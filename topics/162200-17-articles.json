{"TopicId":162200,"ForumId":36,"TopicTitle":"[WIP][1.8.1, 1.9.1, 1.10.1, 1.11.0\u20132, 1.12.2\u20135] Principia\u2014version \u200E\u200EKleene, released 2024-07-05\u2014n-Body and Extended Body Gravitation","CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-05T00:19:35Z","PageNum":17,"Articles":[{"CreatedByName":"AndreyATGB","CreatedById":62674,"CreatedDateTime":"2014-12-11T11:14:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wayland\u0022 data-cite=\u0022Wayland\u0022\u003E\u003Cdiv\u003EI really, really look forward to this mod...\u003Cp\u003EGranted I can barely do the math for KSP as is, but it is fun to make it hyper-realistic and watch your own spectacular failures, lol.\u003C/p\u003E\u003Cp\u003EWill this work with RSS if/when complete? Or would that break the implementation of either this or RSS?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt works fine with RSS, the issue is that the simulations slow down with increasing time warp. In fact it works better with RSS since the real solar system is actually stable unlike Kerbol\u0027s.\u003C/p\u003E\n"},{"CreatedByName":"Semmel","CreatedById":90652,"CreatedDateTime":"2014-12-15T08:38:19Z","Content":"\n\u003Cp\u003EWhen this mod gets live, there are some problems with gameplay that need solving. Assuming of course you dont want to babysit every single probe.\u003C/p\u003E\u003Cp\u003E* Since orbits are a lot more unstable, it will be hard to get probes into stable 2-body situations. Like for example L1, L2 and L3 points are instable and require active correction.\u003C/p\u003E\u003Cp\u003E* Geo/Kerbo-synchronous orbits will decay over time, there needs to be active control to keep them stable.\u003C/p\u003E\u003Cp\u003EThese points are especially relevant for Remote Tech since you need a fleet of communication satellites.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-12-16T12:45:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Semmel\u0022 data-cite=\u0022Semmel\u0022\u003E\u003Cdiv\u003EWhen this mod gets live, there are some problems with gameplay that need solving. Assuming of course you dont want to babysit every single probe.\u003Cp\u003E* Since orbits are a lot more unstable, it will be hard to get probes into stable 2-body situations. Like for example L1, L2 and L3 points are instable and require active correction.\u003C/p\u003E\u003Cp\u003E* Geo/Kerbo-synchronous orbits will decay over time, there needs to be active control to keep them stable.\u003C/p\u003E\u003Cp\u003EThese points are especially relevant for Remote Tech since you need a fleet of communication satellites.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESee the OP,\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022me, in OP :: Further modding\u0022 data-cite=\u0022me, in OP :: Further modding\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EStationkeeping, to deal with orbital decay and unstable weakly bound orbits;\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"rdwulfe","CreatedById":107690,"CreatedDateTime":"2014-12-17T14:17:59Z","Content":"\n\u003Cp\u003EI\u0027m delighted to see this still being worked on. I look forward to the future of this mod. Personally, I\u0027d be utterly happy with a partial N-body simulaton, where only the craft has to deal with multiple-body calculations, and the planets and moons are considered \u0022good enough\u0022. \u0026lt;shrug\u0026gt; Doing the whole thing? NEAT!... If my computer doesn\u0027t melt.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-12-17T14:40:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rdwulfe\u0022 data-cite=\u0022rdwulfe\u0022\u003E\u003Cdiv\u003EI\u0027m delighted to see this still being worked on. I look forward to the future of this mod. Personally, I\u0027d be utterly happy with a partial N-body simulaton, where only the craft has to deal with multiple-body calculations, and the planets and moons are considered \u0022good enough\u0022. \u0026lt;shrug\u0026gt; Doing the whole thing? NEAT!... If my computer doesn\u0027t melt.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs discussed several times in the thread (although apparently not in the OP; I need to restructure that OP a bit anyway, the pile of status updates is getting unwieldy), the movement of the planets *has* to be redone in order for physics not to break down: if bodies orbit centres of other bodies, rather the barycentre, you\u0027re going to have a hard time finding L4 and L5 (just compute the potential in the rotating frame for that, its gradient only vanishes in 3 points rather than 5). The additional cost is not very large: B(B-1)/2 force computations, vs. the BV required to integrate the vessels; remember that the number of bodies is small and fixed.\u003C/p\u003E\n"},{"CreatedByName":"ghimb2000","CreatedById":74996,"CreatedDateTime":"2014-12-26T05:43:00Z","Content":"\n\u003Cp\u003EIs it wishful thinking to think this will be eventually implemented into stock KSP? *crosses fingers*\u003C/p\u003E\n"},{"CreatedByName":"fibonatic","CreatedById":73180,"CreatedDateTime":"2014-12-29T02:13:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ghimb2000\u0022 data-cite=\u0022ghimb2000\u0022\u003E\u003Cdiv\u003EIs it wishful thinking to think this will be eventually implemented into stock KSP? *crosses fingers*\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do not think so, since having to deal with orbits which might not be stable over a long period can be annoying in terms of gameplay, because you can only control one craft at the time. And as simulations have shown, not all moons of Jool are stable. I am unsure if there might be a possibility for any of the unstable moons to collide with any other body (or probably pass through each other) and I am unsure how the physics engine would handle such an event. So at least the N-body gravitation implementation would significantly affect the gameplay. The improved integrator on the other hand would nice to have in stock instead of the default unity one, since it does not really affect gameplay besides making the physics calculation more accurate.\u003C/p\u003E\n"},{"CreatedByName":"NeilC","CreatedById":57575,"CreatedDateTime":"2014-12-30T16:08:40Z","Content":"\n\u003Cp\u003EFirst off, eggrobin this is a fantastic thread! Good work! I really appreciate the effort you put into your explanation documents and your extensive references. I\u0027m one of those engineers with funny conventions so I can\u0027t pretend to follow your Grassmann algebra, but I know enough about RK solvers to follow most of the papers cited in broad strokes. This thread taught me a lot. Kudos, I\u0027m looking forward to seeing this project develop.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022fibonatic\u0022 data-cite=\u0022fibonatic\u0022\u003E\u003Cdiv\u003EI do not think so, since having to deal with orbits which might not be stable over a long period can be annoying in terms of gameplay, because you can only control one craft at the time. And as simulations have shown, not all moons of Jool are stable. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m pretty sure this is an issue with the setup of orbital parameters in KSP, not a fundamental issue. If you changed the parameters a bit, it\u0027s definitely possible to set up a Jool system that would be stable for hundreds of years. Jupiter\u0027s moons really are in a \u003Ca href=\u0022https://en.wikipedia.org/wiki/File:Galilean_moon_Laplace_resonance_animation_2.gif\u0022 rel=\u0022external nofollow\u0022\u003E1:2:4 resonance\u003C/a\u003E, and I think the universe\u0027s symplectic n-body integrator is almost as accurate as eggrobin\u0027s. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI think things only go haywire in the Jool nbody video because the orbital parameters used are the ones in stock KSP that produce a \u0022resonance\u0022 in the 2-body solution - that is, they are set up to have 1:2:4 orbital periods around jool using the 2-body assumption, without taking the interactions between moons into account. Of course this would be unstable when you suddenly add in the interactions! They need initial orbits that give them a 1:2:4 period AFTER taking n-body perturbations into account. (As an aside, it would be interesting to see how far off the initial conditions could be and still have the moons correct themselves. The resonance must be a low-energy state compared to the surrounding parameter space, otherwise Jupiter\u0027s system would never have settled there. That implies there\u0027s a basin in which the initial conditions can lie, and still evolve to the same final orbits)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022fibonatic\u0022 data-cite=\u0022fibonatic\u0022\u003E\u003Cdiv\u003ESo at least the N-body gravitation implementation would significantly affect the gameplay. The improved integrator on the other hand would nice to have in stock instead of the default unity one, since it does not really affect gameplay besides making the physics calculation more accurate.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThough I don\u0027t think N-body gravity would significantly affect any planetary orbits in terms of gameplay, I do worry that making low orbits unstable would make the game less fun. I know stationkeeping is a planned feature, but that\u0027s a whole layer of complicated code that needs to be written to make Principia playable without untenable levels of orbit management.\u003C/p\u003E\u003Cp\u003ETrouble is, the N-body solver is kinda an all-or-nothing deal:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EAs discussed several times in the thread, the movement of the planets *has* to be redone in order for physics not to break down: if bodies orbit centres of other bodies, rather the barycentre, you\u0027re going to have a hard time finding L4 and L5 \u0026lt;...\u0026gt;\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECorrect me if I\u0027m wrong, but it\u0027s not just Lagrange points that would break: you can\u0027t have some stuff on Keplerian rails and other stuff following a path defined by conservation of energy: the Kepler bodies would break that conservation and things would go screwy. The whole Principia solver is based on symplecticity. Making it 2-body isn\u0027t \u0022set n=2\u0022, it\u0027s \u0022ground-up rewrite\u0022.\u003C/p\u003E\u003Cp\u003EEggrobin, do you see any value in using the libraries you\u0027ve developed to implement an improved Kepler integrator with the same interfaces as Principia? Is that a lot of work? I\u0027m just thinking it might help you (somewhat) as you develop the annoying and untestable part of your code that interacts with the KSP API, to have a built-in test case: you\u0027d be solving the same case as KSP, so could check your answers against it each frame. Should be within a small tolerance, otherwise something screwed up (probably a reference frame transform which I gather are kinda obtuse in KSP).\u003C/p\u003E\u003Cp\u003EAlso, you would then have a much-improved integrator that doesn\u0027t affect gameplay at all, which would allow a playable Principia(Lite) before you\u0027ve had a chance to develop stationkeeping. And would be much more likely to get integrated into stock KSP, which would be super cool.\u003C/p\u003E\u003Cp\u003EOne last thing: I just finished reading \u003Ca href=\u0022https://www.amazon.ca/The-Martian-Novel-Andy-Weir-ebook/dp/B00EMXBDMA\u0022 rel=\u0022external nofollow\u0022\u003EThe Martian\u003C/a\u003E, and I really really want to play this plugin so I can build an Ion-engine Mars transfer vehicle like Hermes. SOOOOOOO cool!\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2015-01-03T11:52:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeilC\u0022 data-cite=\u0022NeilC\u0022\u003E\u003Cdiv\u003EFirst off, eggrobin this is a fantastic thread! Good work! I really appreciate the effort you put into your explanation documents and your extensive references. I\u0027m one of those engineers with funny conventions so I can\u0027t pretend to follow your Grassmann algebra, but I know enough about RK solvers to follow most of the papers cited in broad strokes. This thread taught me a lot. Kudos, I\u0027m looking forward to seeing this project develop.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003Cp\u003ERegarding Grassmann algebras, you may be more familiar with the terminology \u0022pseudovector\u0022 or \u0022axial vector\u0022 for bivector, \u0022pseudoscalar\u0022 for trivector. See also [Tao 2012] in the bibliography.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EJool, Jool, Jool...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyeah, with a proper interpretation of the orbital parameters (pre-Pol, but this shouldn\u0027t matter), Scott showed the system was stable, see the OP (this question seems to come up fairly often, I need to make the OP more readable at some point).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThough I don\u0027t think N-body gravity would significantly affect any planetary orbits in terms of gameplay, I do worry that making low orbits unstable would make the game less fun. I know stationkeeping is a planned feature, but that\u0027s a whole layer of complicated code that needs to be written to make Principia playable without untenable levels of orbit management.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eunstable low orbits are in the far future (I need to discuss that with ferram4, it\u0027s aerodynamics), I guess that update will have to come with basic stationkeeping.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ETrouble is, the N-body solver is kinda an all-or-nothing deal:\u003C/p\u003E\u003Cp\u003ECorrect me if I\u0027m wrong, but it\u0027s not just Lagrange points that would break: you can\u0027t have some stuff on Keplerian rails and other stuff following a path defined by conservation of energy: the Kepler bodies would break that conservation and things would go screwy. The whole Principia solver is based on symplecticity. Making it 2-body isn\u0027t \u0022set n=2\u0022, it\u0027s \u0022ground-up rewrite\u0022.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, see also below, it\u0027s a completely different kind of problem. I took Lagrange points as an example since it\u0027s fairly easy to work out analytically (and people seem to get excited about those).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EEggrobin, do you see any value in using the libraries you\u0027ve developed to implement an improved Kepler integrator with the same interfaces as Principia?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe whole point of using the 2-body problem is that you \u003Cem\u003Edon\u0027t\u003C/em\u003E integrate it, you solve it exactly (well, you have to solve Kepler\u0027s equation, but no numerical integration is involved). This is what KSP does. One \u003Cem\u003Ecould\u003C/em\u003E make bodies orbit barycentres rather than centres, by essentially rewriting KSP\u0027s Orbit class, but I\u0027m not interested in doing that (it\u0027s a completely different exercise).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m just thinking it might help you (somewhat) as you develop the annoying and untestable part of your code that interacts with the KSP API, to have a built-in test case: you\u0027d be solving the same case as KSP, so could check your answers against it each frame. Should be within a small tolerance, otherwise something screwed up (probably a reference frame transform which I gather are kinda obtuse in KSP).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is why I have strongly-typed reference frames. \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/blob/master/ksp_plugin/frames.hpp#L38\u0022 rel=\u0022external nofollow\u0022\u003EObtuse is probably an understatement.\u003C/a\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAlso, you would then have a much-improved integrator that doesn\u0027t affect gameplay at all, which would allow a playable Principia(Lite) before you\u0027ve had a chance to develop stationkeeping.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs discussed above, it would not be an integrator, and stationkeeping will not be necessary for relatively low orbits (or anything where one massive body dominates) for a while.\u003C/p\u003E\u003Cp\u003EI wonder what the point of a mod that doesn\u0027t affect gameplay at all actually is \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnd would be much more likely to get integrated into stock KSP, which would be super cool.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA couple of things should be said here:\u003C/p\u003E\u003Cp\u003E- This mod is almost entirely in C\u002B\u002B (not C\u002B\u002B/CLI, the interfacing is done via P/Invoke). KSP is not, virtually no other mod is. I\u0027d say that makes this mod one of the hardest to integrate in their codebase.\u003C/p\u003E\u003Cp\u003E- I have no reason to want this to become stock: The best I could hope for is that I could somehow disable the stock implementation and replace it with my own to keep modding. See \u003Cstrong\u003Eferram4\u003C/strong\u003E\u0027s concerns about improved aerodynamics in stock.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ENote:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI will not be actively developing this mod until mid-February because of exams (the astute reader may have noticed that this happens \u003Ca href=\u0022https://github.com/eggrobin\u0022 rel=\u0022external nofollow\u0022\u003Eevery 6 months\u003C/a\u003E).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-03T18:49:59Z\u0022 title=\u002201/03/2015 06:49  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 3, 2015\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NeilC","CreatedById":57575,"CreatedDateTime":"2015-01-13T04:43:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EThanks!\u003Cp\u003ERegarding Grassmann algebras, you may be more familiar with the terminology \u0022pseudovector\u0022 or \u0022axial vector\u0022 for bivector, \u0022pseudoscalar\u0022 for trivector. See also [Tao 2012] in the bibliography.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHeh, nope I\u0027m afraid I don\u0027t recognize any of those terms. Closest I could come was \u0022Wedge product... that must be kind of like a general cross product?\u0022 I\u0027m afraid my brain gets firmly locked into 3D geometry, as a mechanical engineer I\u0027ve never studied these concepts in a general way - 4D applications don\u0027t come up very often in our courses. Thanks for the paper suggestion though, I\u0027ll check it out.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E unstable low orbits are in the far future (I need to discuss that with ferram4, it\u0027s aerodynamics), I guess that update will have to come with basic stationkeeping. \u0026lt;...\u0026gt; stationkeeping will not be necessary for relatively low orbits (or anything where one massive body dominates) for a while. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENeat, I was afraid perturbations from the Mun would be significant enough to lower a ~100km periapsis below 70km within, say, a round-trip trip to Duna. Glad to hear it isn\u0027t so!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E The whole point of using the 2-body problem is that you \u003Cem\u003Edon\u0027t\u003C/em\u003E integrate it, you solve it exactly (well, you have to solve Kepler\u0027s equation, but no numerical integration is involved). This is what KSP does. \u0026lt;...\u0026gt; I wonder what the point of a mod that doesn\u0027t affect gameplay at all actually is \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERight, of course, the \u0022conics\u0022 part of patched conics - sorry, momentary brain fart. I guess what I was thinking of improving was the \u0022patching\u0022 part of patched conics where KSP is just terrible at predicting intercepts, periapsis after frame change, etc. That would be the gameplay value: say, being able to reliably predict a mid-course correction burn to set up a Duna aerobrake before entering its SoI. But you\u0027re right: that\u0027s just numerics, not integration. No overlap with your project, poor suggestion...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EThis is why I have strongly-typed reference frames. \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/blob/master/ksp_plugin/frames.hpp#L38\u0022 rel=\u0022external nofollow\u0022\u003EObtuse is probably an understatement.\u003C/a\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWow, that is a whole mess of crazy. Left-handed co-ordinate frames seem to abound in computer graphics applications, but I\u0027ll never understand why...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EA couple of things should be said here:\u003C/p\u003E\u003Cp\u003E- This mod is almost entirely in C\u002B\u002B (not C\u002B\u002B/CLI, the interfacing is done via P/Invoke). KSP is not, virtually no other mod is. I\u0027d say that makes this mod one of the hardest to integrate in their codebase.\u003C/p\u003E\u003Cp\u003E- I have no reason to want this to become stock: The best I could hope for is that I could somehow disable the stock implementation and replace it with my own to keep modding. See \u003Cstrong\u003Eferram4\u003C/strong\u003E\u0027s concerns about improved aerodynamics in stock.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor sure, totally fair! But since this is the first thread I\u0027ve seen approaching an n-body solver for KSP with anywhere near this rigor, \u003Cem\u003E\u003Cstrong\u003EI\u003C/strong\u003E\u003C/em\u003E have plenty of reason to want it to become stock! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E Didn\u0027t mean to assume anything about your motivations, just thought I\u0027d ask the question. Thanks for answering.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003ENote:\u003C/strong\u003E\u003Cp\u003EI will not be actively developing this mod until mid-February because of exams (the astute reader may have noticed that this happens \u003Ca href=\u0022https://github.com/eggrobin\u0022 rel=\u0022external nofollow\u0022\u003Eevery 6 months\u003C/a\u003E).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGood luck on your exams! May the coffee and skittles be with you.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2015-01-14T19:02:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeilC\u0022 data-cite=\u0022NeilC\u0022\u003E\u003Cdiv\u003EHeh, nope I\u0027m afraid I don\u0027t recognize any of those terms. Closest I could come was \u0022Wedge product... that must be kind of like a general cross product?\u0022\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s either the cross product, or the dot product, depending what you put in it: vector wedge vector is bivector (cross on the coordinates), bivector wedge vector is trivector (dot). It\u0027s really an algebraic wrapper on operations you know, that keeps track of what kind of object you have (i.e. how they transform under coordinate changes). Keeping track of that also prevents you from doing meaningless operations (e.g., adding a pseudovector to a vector), much like dimensional analysis does.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI\u0027m afraid my brain gets firmly locked into 3D geometry, as a mechanical engineer I\u0027ve never studied these concepts in a general way - 4D applications don\u0027t come up very often in our courses.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut I \u003Cem\u003Eam\u003C/em\u003E talking about 3D geometry here. See \u003Ca href=\u0022https://en.wikipedia.org/wiki/Pseudovector#Physical_examples\u0022 rel=\u0022external nofollow\u0022\u003Ethis wikipedia article\u003C/a\u003E for a physical example, and \u003Ca href=\u0022https://en.wikipedia.org/wiki/Exterior_algebra#Cross_and_triple_products\u0022 rel=\u0022external nofollow\u0022\u003Ethis one\u003C/a\u003E for the formalism.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWow, that is a whole mess of crazy. Left-handed co-ordinate frames seem to abound in computer graphics applications, but I\u0027ll never understand why...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUsing left-handed reference frames is not an issue \u003Cem\u003Eper se\u003C/em\u003E, the laws of physics are the same through the looking-glass (we\u0027re not dealing with \u003Ca href=\u0022https://en.wikipedia.org/wiki/Parity_(physics)#Parity_violation\u0022 rel=\u0022external nofollow\u0022\u003Eweak interaction\u003C/a\u003E here), but using both handednesses is mad (and can be no good reason to do so, since the laws of physics work are same through the looking-glass). In order to safely deal with both handednesses, you \u003Cem\u003Eneed\u003C/em\u003E to distinguish vectors and bivectors, since they transform differently.\u003C/p\u003E\n"},{"CreatedByName":"NeilC","CreatedById":57575,"CreatedDateTime":"2015-01-19T22:24:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EBut I \u003Cem\u003Eam\u003C/em\u003E talking about 3D geometry here. See \u003Ca href=\u0022https://en.wikipedia.org/wiki/Pseudovector#Physical_examples\u0022 rel=\u0022external nofollow\u0022\u003Ethis wikipedia article\u003C/a\u003E for a physical example, and \u003Ca href=\u0022https://en.wikipedia.org/wiki/Exterior_algebra#Cross_and_triple_products\u0022 rel=\u0022external nofollow\u0022\u003Ethis one\u003C/a\u003E for the formalism.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks so much, that nailed it for me. I get why that would be really important for co-ordinate transforms.\u003C/p\u003E\u003Cp\u003EWe engineers get SUPER lazy with the things you call \u0022Pseudovectors\u0022. Gear trains with parallel axes don\u0027t really lend themselves to learning about co-ordinate transforms... I\u0027d just represent angular momentum as a scalar in all my calculations, and then do a manual balance pass at the end if anything was spinning in a different direction. I\u0027m rarely asked to design a gear train as seen through a mirror. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThat lazy approach leads to passing our exams with study bandwidth left over for metallurgy and thermodynamics and such, but we never learn those formalisms. Cool stuff!\u003C/p\u003E\n"},{"CreatedByName":"SAI Peregrinus","CreatedById":125558,"CreatedDateTime":"2015-01-20T20:47:27Z","Content":"\n\u003Cp\u003EYou might find \u003Ca href=\u0022http://www.mrao.cam.ac.uk/~clifford/publications/ps/dll_millen.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ethis paper\u003C/a\u003E interesting. It\u0027s a very cursory historical overview of using geometric algebra (the algebra of the wedge product) in various applications. \u003Ca href=\u0022https://news.ycombinator.com/item?id=8196294\u0022 rel=\u0022external nofollow\u0022\u003EThis comment\u003C/a\u003E, and indeed the entire discussion on that article at HN is interesting.\u003C/p\u003E\n"},{"CreatedByName":"Sput42","CreatedById":133617,"CreatedDateTime":"2015-01-22T08:12:46Z","Content":"\n\u003Cp\u003EPretty cool stuff. However, one thing popped into my mind - as you\u0027re using native C\u002B\u002B code for much of it, did you consider portability? Will your mod run in Linux versions of KSP?\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2015-01-22T19:50:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sput42\u0022 data-cite=\u0022Sput42\u0022\u003E\u003Cdiv\u003EPretty cool stuff. However, one thing popped into my mind - as you\u0027re using native C\u002B\u002B code for much of it, did you consider portability? Will your mod run in Linux versions of KSP?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMono can compile C\u002B\u002B to the MonoVM. However, I hope he is doing this.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2015-01-22T20:30:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sput42\u0022 data-cite=\u0022Sput42\u0022\u003E\u003Cdiv\u003EPretty cool stuff. However, one thing popped into my mind - as you\u0027re using native C\u002B\u002B code for much of it, did you consider portability? Will your mod run in Linux versions of KSP?\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022me, in OP\u0022 data-cite=\u0022me, in OP\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThis means there will be separate x86 and AMD64 builds for each target operating system (Microsoft Windows and 57 varieties of Unix), possibly more if we decide to do specific optimisations for Intel chips (though ICC is not cheap).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe dependencies are open-source Google libraries, which are portable, and we try to make our code portable too.\u003C/p\u003E\u003Cp\u003EIt\u0027s been a ridiculously long time since I\u0027ve made one of these, and I should have made one in December when I got intrinsic acceleration working...\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ERetroactive Status Update:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u003Cstrong\u003Eantedated 2014-12-13\u003C/strong\u003E\u003C/em\u003E\u003C/p\u003E\u003Cp\u003ESupport for intrinsic acceleration has been \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/pull/346\u0022 rel=\u0022external nofollow\u0022\u003Eadded\u003C/a\u003E. Refactoring will be needed, but it works, as demonstrated by the following plane change man\u00C3\u2026\u00E2\u20AC\u0153uvre:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/4n4ax6e\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/4n4ax6el.png\u0022 alt=\u00224n4ax6el.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EStatus Update:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/pull/354\u0022 rel=\u0022external nofollow\u0022\u003Erefactoring\u003C/a\u003E of the physics bubble has been done (and some \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/pull/359\u0022 rel=\u0022external nofollow\u0022\u003Etests\u003C/a\u003E have been added), as well as some cleanup in the C# adapter (including some performance improvements, a lot of the performance issues occur on the C# side since the implementation is a bit careless there).\u003C/p\u003E\u003Cp\u003EMore refactoring occurred (use of a \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/blob/feee05624f790272683367710dc12fd15359f31b/base/not_null.hpp\u0022 rel=\u0022external nofollow\u0022\u003Enot_null\u003C/a\u003E template for non-null pointers).\u003C/p\u003E\u003Cp\u003EThe next step on the path towards playability is persistence: the state of the plugin must be persisted so that we remember the states of the planets, the histories of the vessel trajectories, etc. (currently loading a save or reverting will result in either a crash or a loss of consistency due to the planets having moved around).\u003C/p\u003E\u003Cp\u003EPersistence of our types will be achieved using \u003Ca href=\u0022https://developers.google.com/protocol-buffers/docs/overview\u0022 rel=\u0022external nofollow\u0022\u003Eprotocol buffers\u003C/a\u003E, stored in config nodes: we don\u0027t want to use KSP\u0027s config format directly, since we have lots of highly structured data and operate far from KSP\u0027s API it would be inefficient and clumsy.\u003C/p\u003E\u003Cp\u003EWe\u0027ll probably also use protobufs for caching when implementing trajectory predictions later on.\u003C/p\u003E\u003Cp\u003ESome work has already been \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/pull/389\u0022 rel=\u0022external nofollow\u0022\u003Edone\u003C/a\u003E in that \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/pull/391\u0022 rel=\u0022external nofollow\u0022\u003Edirection\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EHere are some more screenshots, showing a flight from Kerbin to the Kerbin-Mun L4 Lagrange point (the reference frame for each screenshot is indicated in the \u0022Traces of various description\u0022 window).\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/H4jij\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-22T22:43:40Z\u0022 title=\u002201/22/2015 10:43  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 22, 2015\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"shmameron","CreatedById":78025,"CreatedDateTime":"2015-01-28T00:36:55Z","Content":"\n\u003Cp\u003EThis is looking really good so far! Beyond getting persistence down, what are the major steps towards completion?\u003C/p\u003E\n"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-01-28T01:18:00Z","Content":"\n\u003Cp\u003EI downloaded what there is on the github. But it\u0027s not a plugin in any usable form. I should have known. I would probably have noticed if this was released.\u003C/p\u003E\n"},{"CreatedByName":"NeilC","CreatedById":57575,"CreatedDateTime":"2015-01-29T05:19:26Z","Content":"\n\u003Cp\u003EThanks for the update and the screenshots, eggrobin!\u003C/p\u003E\u003Cp\u003EI\u0027m having trouble visualizing what you call the barycentric rotating reference frame. Your pics 6 and 7 show the same trajectory in the usual Kerbin-centric and the rotating-barycentric, correct?\u003C/p\u003E\u003Cp\u003EI understand your co-ordinate system has the origin at the barycentre, and if I\u0027m parsing your description correctly its axes are always aligned with the kerbin-mun connection line, but I\u0027m having trouble figuring out why that would generate the track shown.\u003C/p\u003E\u003Cp\u003EI can see the trip out to the Mun being tough to visualize since the relative velocity in that frame would be changing throughout the track, but I must be missing something fundamental because I really lose comprehension when the orbits about the L-point come into play. Once you\u0027re near L4, shouldn\u0027t your position be (nearly) fixed in the barycentric frame? Isn\u0027t L4 fixed in a frame that\u0027s centered on the barycenter and rotating at the same rate as the Mun? Those tracks look like the craft is wandering within ~1/16th of an orbit of L4, which seems huge. What am I missing?\u003C/p\u003E\u003Cp\u003EIs there any insight that comes from looking at the trajectory in this frame? If so, do you think it would help to illustrate the motion of the co-ordinate system in the track plot somehow?\u003C/p\u003E\u003Cp\u003EI hope your exams went well!\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SAI Peregrinus\u0022 data-cite=\u0022SAI Peregrinus\u0022\u003E\u003Cdiv\u003EYou might find \u003Ca href=\u0022http://www.mrao.cam.ac.uk/~clifford/publications/ps/dll_millen.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ethis paper\u003C/a\u003E interesting. It\u0027s a very cursory historical overview of using geometric algebra (the algebra of the wedge product) in various applications. \u003Ca href=\u0022https://news.ycombinator.com/item?id=8196294\u0022 rel=\u0022external nofollow\u0022\u003EThis comment\u003C/a\u003E, and indeed the entire discussion on that article at HN is interesting.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks so much for this link, very cool read. The concept of a universal, geometric math that\u0027s taught early and often really appeals to me. Whenever I try to wrap my head around quantum mechanics I just get totally bogged down in obscure, specific notations and math that doesn\u0027t seem to have any physical interpretation. Made me drop out of the physics minor in undergrad and choose robotics instead. At least I could visualize the quaternions in forward and inverse kinematics!\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2015-01-29T12:46:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeilC\u0022 data-cite=\u0022NeilC\u0022\u003E\u003Cdiv\u003EThanks for the update and the screenshots, eggrobin!\u003Cp\u003EI\u0027m having trouble visualizing what you call the barycentric rotating reference frame. Your pics 6 and 7 show the same trajectory in the usual Kerbin-centric and the rotating-barycentric, correct?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes (4 seconds apart, as shown by the MET).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI understand your co-ordinate system has the origin at the barycentre, and if I\u0027m parsing your description correctly its axes are always aligned with the kerbin-mun connection line,\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is correct (although this only define one axis, so the other two are defined by making the orbit plane invariant in addition to the line through the bodies).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ebut I\u0027m having trouble figuring out why that would generate the track shown.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EConsider that this is the frame in which a free-return trajectory would look like a figure-eight.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOnce you\u0027re near L4, shouldn\u0027t your position be (nearly) fixed in the barycentric frame? Isn\u0027t L4 fixed in a frame that\u0027s centered on the barycenter and rotating at the same rate as the Mun? Those tracks look like the craft is wandering within ~1/16th of an orbit of L4, which seems huge. What am I missing?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI I\u0027m orbiting L4 from quite far away. Had I man\u00C3\u2026\u00E2\u20AC\u0153uvred more precisely, I could have come closer to L4 with a smaller velocity in the rotating frame, resulting in a tighter orbit.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIs there any insight that comes from looking at the trajectory in this frame?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy trajectory stays somewhat close to L4, rather than drifting away.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf so, do you think it would help to illustrate the motion of the co-ordinate system in the track plot somehow?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt might help to show the gravitational \u002B centrifugal potential.\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2015-01-29T21:15:23Z","Content":"\n\u003Cp\u003EVery interesting man, I hope we will see the results soon \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI have been thinking that not only Kerbin-Mun L4 and L5 should be much stabler than the real ones, but on Duna it\u0027s likely that \u003Cem\u003Eno\u003C/em\u003E synchronous orbit is stable\u003C/p\u003E\u003Cp\u003EWould any GEO satellite eventually fall into either L4 or L5? (It\u0027ll be interesting to try)\u003C/p\u003E\u003Cp\u003EI remember you were thinking about various visualizations of gravitational potential, did you experiment with that?\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-29T23:52:32Z","Content":"\n\u003Cp\u003EGo math go!\u003C/p\u003E\n"},{"CreatedByName":"NeilC","CreatedById":57575,"CreatedDateTime":"2015-01-30T00:31:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EI I\u0027m orbiting L4 from quite far away. Had I man\u00C3\u2026\u00E2\u20AC\u0153uvred more precisely, I could have come closer to L4 with a smaller velocity in the rotating frame, resulting in a tighter orbit.\u003Cp\u003E\u0026lt;...\u0026gt;\u003C/p\u003E\u003Cp\u003EMy trajectory stays somewhat close to L4, rather than drifting away. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you making any course corrections to stay in orbit? My intuition is that if you drifted that far from the equilibrium point, you\u0027d fall towards either Mun or Kerbin instead of continuing to orbit L4 for as long as you did.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003EKerbin-Mun L4 and L5 should be much stabler than the real ones\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr maybe my intuition is just way off because everything Kerbal is much denser and closer than it is on this side of the screen. How wide and deep is the L4 potential well, anyway?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EIt might help to show the gravitational \u002B centrifugal potential.\u003C/div\u003E\u003C/blockquote\u003E Yeah, that! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E This would change as the track is plotted though, right? Easy to show instantaneously, but it wouldn\u0027t help understand the overall track shape. Maybe you could allow selection of points on the track and draw phantom bodies and potential wells for the selected point? Maybe more trouble than it\u0027s worth?\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2015-01-30T02:05:53Z","Content":"\n\u003Cp\u003EActually, after checking, I see that Ike is so huge that not even L4 and L5 are stable around Duna! (The mass ratio must be greater than 25, Ike is only 16 times lighter).\u003C/p\u003E\u003Cp\u003EThe Kerbin/Mun ratio is above 50 on the other hand. For some reason I expect the steeper gravitational gradients (compared to reality) to yield more binding potentials in the two points, but it\u0027s probably more complicated than that.\u003C/p\u003E\u003Cp\u003EEDIT: well, according to this document (\u003Ca href=\u0022http://wmap.gsfc.nasa.gov/media/ContentMedia/lagrange.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wmap.gsfc.nasa.gov/media/ContentMedia/lagrange.pdf\u003C/a\u003E) the curvature near the points depends almost only on angular velocity squared: so a more compact system like Kerbin/Mun should have steeper wells (but it\u0027s too late to think really straight I suppose)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-30T02:19:11Z\u0022 title=\u002201/30/2015 02:19  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 30, 2015\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"wasmic","CreatedById":64885,"CreatedDateTime":"2015-02-10T20:44:32Z","Content":"\n\u003Cp\u003EI have no idea what most of the stuff you\u0027re talking about here means, but I just want to say that you guys are awesome!\u003C/p\u003E\n"}]}