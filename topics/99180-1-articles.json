{"TopicId":99180,"ForumId":29,"TopicTitle":"Mouse over a part","CreatedByName":"KospY","CreatedById":33868,"CreatedDateTime":"2015-02-09T13:17:18Z","PageNum":1,"Articles":[{"CreatedByName":"KospY","CreatedById":33868,"CreatedDateTime":"2015-02-09T13:17:18Z","Content":"\n\u003Cp\u003EOk, I\u0027m stuck on something... I\u0027m using a raycast to get the part under the cursor in flight, and everything is fine.\u003C/p\u003E\u003Cp\u003EUnfortunatly, I recently discover that the raycast do not hit some vessel parts (like the small scientific parts).\u003C/p\u003E\u003Cp\u003EI think it\u0027s because KSP remove colliders of some parts for an unknow reason. What can I do for that ? \u003C/p\u003E\u003Cp\u003EDo I need to change the method ? Is there another option to detect part mouse hover/exit ? It really bother me to add a component on every part for adding onmousehover method, as raycasting is far better for what i\u0027m working on.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-09T13:30:52Z\u0022 title=\u002202/09/2015 01:30  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 9, 2015\u003C/time\u003E by KospY\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-02-09T14:24:56Z","Content":"\n\u003Cp\u003EDid you try to change the layerMask used for the raycast ? The part should have a collider but may use a different layer. You could check the part.gameObject.layer of the part and then adjust the layer mask.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-02-09T14:40:48Z","Content":"\n\u003Cp\u003EUnfortunately this seems to be an issue where a small part hides inside the collider of a larger object. When I struggled with this (back in KSP 0.24, no guarantees things have not changed) you could zoom in so the small part filled 90% of your screen and you would still select the larger object when you clicked on it.\u003C/p\u003E\u003Cp\u003EI spent quite a long time on this before I gave up and simply listened for the right-click part menu on the small parts of this type.\u003C/p\u003E\u003Cp\u003EI\u0027d love to know how Squad does it, it is obviously possible because they open the right-click menu correctly for the small part, but I spent hours on this myself and was not able to figure out how.\u003C/p\u003E\u003Cp\u003EIt is not a layer issue, the raycast I was using had no mask applied and so should have hit every layer.\u003C/p\u003E\u003Cp\u003EThe one bit of knowledge I have since gained that I did not know at the time I looked at this, is the part physicless/massless? I wonder if that is the key to what is selectable or not.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"KospY","CreatedById":33868,"CreatedDateTime":"2015-02-09T22:27:12Z","Content":"\n\u003Cp\u003EI finally found a way to do it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI checked and the collider exist on this parts too, so it\u0027s not a problem with a missing collider. However, I found that the attached rigidbody is changed to the parent part.\u003C/p\u003E\u003Cp\u003EI used \u0022hit.transform.gameObject.GetComponent\u0026lt;Part\u0026gt;();\u0022 to get the part component, but I think hit.transform.gameObject return the rigidbody gameobject.\u003C/p\u003E\u003Cp\u003ETo get the correct part component, you need to go throught all parents of the collider gameobject until you find the part. After making my own custom method, I found that KSP already have something to go throught all parents : \u0022UIPartActionController.GetComponentUpwards\u0022. I just used it to find the part from the collider and it seem to work.\u003C/p\u003E\u003Cp\u003ESo, here is the method for people interested :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        private Part GetPartUnderCursor()\u003Cbr\u003E        {\u003Cbr\u003E            RaycastHit hit;\u003Cbr\u003E            Part part = null;\u003Cbr\u003E            if (Physics.Raycast(Camera.main.ScreenPointToRay(Input.mousePosition), out hit, 1000, 557059))\u003Cbr\u003E            {\u003Cbr\u003E                part = (Part)UIPartActionController.GetComponentUpwards(\u0022Part\u0022, hit.collider.gameObject);\u003Cbr\u003E            }\u003Cbr\u003E            return part;\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}