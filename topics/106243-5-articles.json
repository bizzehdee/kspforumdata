{"TopicId":106243,"ForumId":34,"TopicTitle":"[1.8.1 - 1.12.5] Interstellar Fuel Switch (IFS) 3.29.5","CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-04-30T08:28:26Z","PageNum":5,"Articles":[{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-08T08:40:36Z","Content":"\u003E \n\u003E Hm, I\u0027m still having that weird VAB problem when first part to place is IFS-enabled part - can\u0027t attach more parts; have to load some craft and press \u0022new\u0022 to workaround this IIRC... What can be wrong? Yes I have CryoEngines installed too.\n\nI wasn\u0027t aware of this bug, thanks. An exception is raised when you start with a IFT, I guess some calls are not done which are done normally when you add it to another part.\n\n**Edited \u003Ctime datetime=\u00222015-06-08T10:38:51Z\u0022 title=\u002206/08/2015 10:38  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 8, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-08T14:35:28Z","Content":"\u003E \n\u003E There\u0027s a lot of decimals attached to the weight of each resource. Might I recommend displaying only 2-4 decimal places?\n\nPersonaly, I like high accuracy, but I understand other people on\u0027t like this. I will add a format proerty which will allow you to specify thr amount of decimals"},{"CreatedByName":"pacbard","CreatedById":129899,"CreatedDateTime":"2015-06-08T14:42:04Z","Content":"I\u0027m having some problems with the fuel switch script over at the NFT thread.\n\nFor some reason, IFS throws a fit with the NFP tank weight. The correct weight is calculated by Module Manager (the tank is configured correctly in ModuleManager cache). I get something like this:\n\n[LOG 07:31:47.509] InsterstellarFuelSwitch: error parsing resource amount 0/0: \u002790,110\u0027: \u002790\u0027\n\n[LOG 07:31:47.510] InsterstellarFuelSwitch parseDoubles: invalid float: tankCost [len:0] \u0027\u0027]\n\nand this:\n\n[LOG 07:34:13.896] InsterstellarFuelSwitch nextTankSetupEvent selectedTankSetup\u002B\u002B = 1\n\n[LOG 07:34:13.896] InsterstellarFuelSwitch assignResourcesToPart calledByPlayer reset configuredAmounts\n\n[LOG 07:34:13.897] InsterstellarFuelSwitch assignResourcesToPart parsing configuredAmounts = \n\n[LOG 07:34:13.897] InsterstellarFuelSwitch assignResourcesToPart setupTankInPart = 1\n\n[LOG 07:34:13.898] InsterstellarFuelSwitch assignResourcesToPart tankList[1].Resources[0].amount \\* 1 = 28856.25\n\n[LOG 07:34:13.898] InsterstellarFuelSwitch assignResourcesToPart tankList[1].Resources[1].amount \\* 1 = 2885.625\n\n[LOG 07:34:13.899] InsterstellarFuelSwitch setupTankInPart removing resource: LqdHydrogen\n\n[LOG 07:34:13.899] InsterstellarFuelSwitch setupTankInPart adding new resources: LqdHydrogen;Oxidizer;\n\n[LOG 07:34:13.900] InsterstellarFuelSwitch: UpdateMass to (0 \u002B 0) \\* 1 = 0\n\n[LOG 07:34:13.901] InsterstellarFuelSwitch setupTankInPart show Resource mass GUI\n\nfrom the log.\n\nI think it is a typecasting error somewhere in the code. I do use float numbers for the mass of the tank."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-08T17:39:36Z","Content":"[h=2]Version 1.11 for Kerbal Space Program 1.0.2[/h] Released on 2015-06-08\n\n- Fixed IFS in Root object not responding after creation\n- Fixed Initialization error messages\n- Added property which allows you to override resource formatting. Default format is 0.0000000\n\n- - - Updated - - -\n\n\u003E \n\u003E I\u0027m having some problems with the fuel switch script over at the NFT thread.\n\u003E For some reason, IFS throws a fit with the NFP tank weight. The correct weight is calculated by Module Manager (the tank is configured correctly in ModuleManager cache). I get something like this:\n\u003E \n\u003E [LOG 07:31:47.509] InsterstellarFuelSwitch: error parsing resource amount 0/0: \u002790,110\u0027: \u002790\u0027\n\u003E \n\u003E [LOG 07:31:47.510] InsterstellarFuelSwitch parseDoubles: invalid float: tankCost [len:0] \u0027\u0027]\n\u003E \n\u003E and this:\n\u003E \n\u003E [LOG 07:34:13.896] InsterstellarFuelSwitch nextTankSetupEvent selectedTankSetup\u002B\u002B = 1\n\u003E \n\u003E [LOG 07:34:13.896] InsterstellarFuelSwitch assignResourcesToPart calledByPlayer reset configuredAmounts\n\u003E \n\u003E [LOG 07:34:13.897] InsterstellarFuelSwitch assignResourcesToPart parsing configuredAmounts = \n\u003E \n\u003E [LOG 07:34:13.897] InsterstellarFuelSwitch assignResourcesToPart setupTankInPart = 1\n\u003E \n\u003E [LOG 07:34:13.898] InsterstellarFuelSwitch assignResourcesToPart tankList[1].Resources[0].amount \\* 1 = 28856.25\n\u003E \n\u003E [LOG 07:34:13.898] InsterstellarFuelSwitch assignResourcesToPart tankList[1].Resources[1].amount \\* 1 = 2885.625\n\u003E \n\u003E [LOG 07:34:13.899] InsterstellarFuelSwitch setupTankInPart removing resource: LqdHydrogen\n\u003E \n\u003E [LOG 07:34:13.899] InsterstellarFuelSwitch setupTankInPart adding new resources: LqdHydrogen;Oxidizer;\n\u003E \n\u003E [LOG 07:34:13.900] InsterstellarFuelSwitch: UpdateMass to (0 \u002B 0) \\* 1 = 0\n\u003E \n\u003E [LOG 07:34:13.901] InsterstellarFuelSwitch setupTankInPart show Resource mass GUI\n\u003E \n\u003E from the log.\n\u003E \n\u003E I think it is a typecasting error somewhere in the code. I do use float numbers for the mass of the tank.\n\nPlease try again with the new version and show me the IFS configuration"},{"CreatedByName":"ev0","CreatedById":116691,"CreatedDateTime":"2015-06-08T19:13:46Z","Content":"\u003E \n\u003E - Added property which allows you to override resource formatting. Default format is 0.0000000\n\nThanks!! But sorry, how do I go about changing the format? There\u0027s no in game setting, and I don\u0027t see anything in the config files... in fact most of the config files with this mod are totally blank."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-08T19:38:58Z","Content":"\u003E \n\u003E Thanks!! But sorry, how do I go about changing the format? There\u0027s no in game setting, and I don\u0027t see anything in the config files... in fact most of the config files with this mod are totally blank.\n\nLook at the OP\n\n    [B]resourcesFormat = 0.0000[/B]"},{"CreatedByName":"pacbard","CreatedById":129899,"CreatedDateTime":"2015-06-08T22:41:19Z","Content":"\u003E \n\u003E **Version 1.11 for Kerbal Space Program 1.0.2**\n\u003E  Released on 2015-06-08\n\u003E \n\u003E \n\u003E \n\u003E - Fixed IFS in Root object not responding after creation\n\u003E - Fixed Initialization error messages\n\u003E - Added property which allows you to override resource formatting. Default format is 0.0000000\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E - - - Updated - - -\n\u003E \n\u003E Please try again with the new version and show me the IFS configuration\n\nYou know what? I had a , instead of a ; between the values.\n\n    [COLOR=#333333][I][LOG 07:31:47.509] InsterstellarFuelSwitch: error parsing resource amount 0/0: \u002790[B],[/B]110\u0027: \u002790\u0027[/I][/COLOR]Right here -----------------------------------------------------------------------^\n\nsometimes I am so dumb.\n\nThank you for trying to fix the issue anyways! I really appreciate it. Also, thank you for fixing the tank root problem. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-06-08T22:53:03Z\u0022 title=\u002206/08/2015 10:53  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 8, 2015\u003C/time\u003E by pacbard**"},{"CreatedByName":"ev0","CreatedById":116691,"CreatedDateTime":"2015-06-09T04:22:57Z","Content":"\u003E \n\u003E Look at the OP\n\nI see it now:P Just slapped on this MM.\n\n    @PART[*]:HAS[@MODULE[InterstellarFuelSwitch]]:NEEDS[InterstellarFuelSwitch]{    @MODULE[InterstellarFuelSwitch],*    {        %resourcesFormat = 0.000    }}"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-09T05:20:43Z","Content":"\u003E \n\u003E You know what? I had a , instead of a ; between the values.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     [COLOR=#333333][I][LOG 07:31:47.509] InsterstellarFuelSwitch: error parsing resource amount 0/0: \u002790[B],[/B]110\u0027: \u002790\u0027[/I][/COLOR]Right here -----------------------------------------------------------------------^\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E sometimes I am so dumb.\n\u003E \n\u003E Thank you for trying to fix the issue anyways! I really appreciate it. Also, thank you for fixing the tank root problem. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nYes, they are easy to overlook. To help to detect them, I made them warnings instead of information messages, this makes them stand out in the log better."},{"CreatedByName":"abowl","CreatedById":110827,"CreatedDateTime":"2015-06-09T19:47:39Z","Content":"Hello, could the recent update have messed with the deltaV values that KER shows somehow? I updated this plugin just now and the DeltaV on my rocket is off with several thousands now. It says i have 5.8k but it wont even get to orbit. I double checked and KER is set to atmospheric and to kerbin. What else could it be? It was showing the right values before i updated thats why i suspect this mod ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) Sorry just wondering if anyone got the same problem."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-10T08:01:28Z","Content":"IFS only affects stored resources, nothing else. Although I have never hear or seen it, The worst that might theoretically happen is replacement of resources, causing you to lose delta V. There is a know issue that if you change the position of resource in the definition. The Fuelswitch think you have switched, and replaces the propellant by a different propellant at startup. Please very all you tanks and compare them with your vessel in you save file before the update.\n\n**Edited \u003Ctime datetime=\u00222015-06-11T14:14:12Z\u0022 title=\u002206/11/2015 02:14  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 11, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"abowl","CreatedById":110827,"CreatedDateTime":"2015-06-10T14:57:18Z","Content":"Hello Freethinker, thanks for you reply. I figured it out. It was a problem with the root part. After i changed it, the correct deltaV values was showing. Im not sure what entirely was causing it because the staging was set up correctly. But i have the correct DeltaV values showing now! Thanks"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2015-06-10T15:37:49Z","Content":"\u003E \n\u003E Hello Freethinker, thanks for you reply. I figured it out. It was a problem with the root part. After i changed it, the correct deltaV values was showing. Im not sure what entirely was causing it because the staging was set up correctly. But i have the correct DeltaV values showing now! Thanks\n\nThe delta-v calculator mods all assume that the root part is what you care about, so any delta-v that other parts of the ship have after separating from the root part will be ignored."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-06-11T17:51:21Z","Content":"Would you consider adding functionality to define resource amounts as a percent/decimal amount of total tank volume. This would make for faster conversion with many fuels like RealFuels."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-12T07:53:48Z","Content":"\u003E \n\u003E Would you consider adding functionality to define resource amounts as a percent/decimal amount of total tank volume. This would make for faster conversion with many fuels like RealFuels.\n\nYes I was considering this for some time, but I was not sure if there was any need for such a thing. One problem is the difference in volume of CRP resources and Stock resources . One way to implement this would be to assume all resource are 1u / 1l except stock resources (which is a fixed list of resources).\n\nTHe current definition for resource amount look like this\n\n    resourceNames = ArgonGas;CarbonDioxide;Hydrogen;KryptonGas;NeonGas;Nitrogen;Oxygen;XenonGas;Oxygen,CarbonDioxide;StructuralresourceAmounts = 224000;224000;224000;224000;224000;224000;224000;44800;112000,112000,0\n\nWhich could then be implemented with the following\n\n    VolumeInLiterUnits = 224000VolumeInStockUnits = 44800resourceNames = ArgonGas;CarbonDioxide;Hydrogen;KryptonGas;NeonGas;Nitrogen;Oxygen;XenonGas;Oxygen,CarbonDioxide;StructuralresourceAmounts = 100%;100%;100%;100%;100%;100%;100%;100%;50%,50%,0\n\nSince we could assume 100% is the default, and VolumeInStockUnits is 20% of VolumeInLiterUnits, the following should also work:\n\n    VolumeInLiterUnits = 224000resourceNames = ArgonGas;CarbonDioxide;Hydrogen;KryptonGas;NeonGas;Nitrogen;Oxygen;XenonGas;Oxygen,CarbonDioxide;StructuralresourceAmounts = ;;;;;;;;50%,50%,0\n\n**Edited \u003Ctime datetime=\u00222015-06-12T08:17:19Z\u0022 title=\u002206/12/2015 08:17  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 12, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"Tellion","CreatedById":116794,"CreatedDateTime":"2015-06-12T13:47:40Z","Content":"Heya, I am currently trying to make Near Future Technologies RealFuels compatible and have hit a wall with Construction. It is using the IFS to create parts with different tanks and textures (correct me if am describing this wrongly), however the tank contents RF offers are too varied to just change a few values in the IFS module of the part file. A servicemodule tank will for example hold many different kinds of hypergolic propellants as well as electric charge - doing this with anything but RF would be quite the chore and get overly cluttered quickly.\n\nNow, from what I gathered, IFS does not allow me to add something more complex than tanks, like RF\u0027s ModuleFuelTanks as a switchable option to a part. The second option that comes to mind would be making a bunch of different part.cfgs that each use one of the different textures IFS applies ingame and let RF handle things from then on. What I do not know is how to do that - what I would need to include in the part.cfg to create a tank with one of the distinct visual options IFS provides ingame? Hints greatly appreciated ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-12T14:38:58Z","Content":"I don\u0027t understand the question\n\nWhat do you mean something more complex that tank, IFS allow switch any resourses, which can include any exotic, etherial or abstract resources like Electric Charge, Antimatter or ResearchResult\n\n**Edited \u003Ctime datetime=\u00222015-06-12T15:13:49Z\u0022 title=\u002206/12/2015 03:13  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 12, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"Tellion","CreatedById":116794,"CreatedDateTime":"2015-06-12T16:12:33Z","Content":"Sorry, I might have expressed myself a little convolutedly. \n\nNear Future Construction adds [parts](http://imgur.com/a/J4UdN#1) than can have different visuals and tank contents using IFS, and I want to make them RealFuels compatible. RF has a huge amount of possible resources, and doing all of them with IFS is not practical. RF uses ModuleFuelTanks to define what and how much of it goes into a certain tank, so I need to add that to the different versions of the part. For example, of the tanks in the screenshot, the one on the left needs something like \n\n        MODULE    {        name = ModuleFuelTanks        volume = 7000        type = ServiceModule}\n\n and nothing else, the next one needs something similar but slightly different. Now, if those were separate parts, I just write a MM config adding what I need and removing what I do not - they are, however just two parts using IFS. So I need to either (a) add those RF Modules with IFS (I am not sure whether IFS supports something like that) or (![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) split those two parts up into many individual ones, so instead of having all those tanks in the screenshot handled by IFS I have each of them as individual parts with individual appearances. I am asking here because I do not know whether IFS would support the more elegant (a), or how to \u0022split\u0022 the parts handled by IFS into their individual forms (how to make a part that looks like exactly one of the ones in the screenshot).\n\n**Edited \u003Ctime datetime=\u00222015-06-12T16:15:20Z\u0022 title=\u002206/12/2015 04:15  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 12, 2015\u003C/time\u003E by Tellion**"},{"CreatedByName":"cipherpunks","CreatedById":114858,"CreatedDateTime":"2015-06-12T16:22:55Z","Content":"Those parts are Modular Octo-Girder segments and they\u0027re using Interstellar Mesh Switch also. Just saying. Useful parts, but I don\u0027t play with RF yet, so can\u0027t help unfortunately."},{"CreatedByName":"Tellion","CreatedById":116794,"CreatedDateTime":"2015-06-12T16:25:03Z","Content":"Yea, its basically the visual part giving me trouble. I need either for IFS to push RF modules in the different versions or to \u0022reverse engineer\u0022 what IFS does, eg. split all those different tanks up into their own part.cfgs and then modify those... No idea whether the first is possible and no idea how to do the second .\\_."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-12T19:14:39Z","Content":"Alright, now I understand, you want to switch Modules, that actually quite a neat idea and I was investigating something similar which was to add modules from external mods to a part. This actually a very powerful concept, as it would allow you do dynamically completely reconfigure a part. Once I figure that out, I will look if I can realize your idea"},{"CreatedByName":"Nori","CreatedById":41334,"CreatedDateTime":"2015-06-23T13:59:21Z","Content":"Really like this mod. Switching tanks is so helpful.\n\nGot a question though, is there a way to have a tank type require electricity for storage (and specify it in the IFS config)? I\u0027m thinking about editing cyrogenic fuel tanks to require electrcity, but I\u0027m not sure how to configure it for IFS tanks."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-06-23T18:09:29Z","Content":"\u003E \n\u003E Really like this mod. Switching tanks is so helpful.\n\u003E Got a question though, is there a way to have a tank type require electricity for storage (and specify it in the IFS config)? I\u0027m thinking about editing cyrogenic fuel tanks to require electricity, but I\u0027m not sure how to configure it for IFS tanks.\n\nI\u0027m currently working on a 2.0 version which will have Cryogenic support which works in conjunction with KSP Heating system. Electric requirment or Boil-off will be automatically calculated based on how fast a tank heats up. This means by increasing the tank insulation, power cost / boiloff will increase realistically. The only requirements are that all stored resources have specific heating specified (in their resource definition) and you have to include a list of the boiling temperatures and Latent Heat vaporization energy\n\nFor now, I will release a update which should help get rid of one more of those warning messages\n\n**Version 1.12 for Kerbal Space Program 1.0.3**\n\n Released on 2015-06-23\n\n- Recompile for KSP 1.0.4\n\n**Edited \u003Ctime datetime=\u00222015-06-23T18:18:48Z\u0022 title=\u002206/23/2015 06:18  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 23, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"mid0r","CreatedById":146822,"CreatedDateTime":"2015-06-24T23:17:42Z","Content":"Waited for this! Thanks!!!"},{"CreatedByName":"KaiserSoze","CreatedById":117446,"CreatedDateTime":"2015-06-27T08:02:05Z","Content":"Seems to be some kind of problem between last update (1.12) and novapunch un 1.04. \n\nK1 tanks in novapunch have decouplers and fuel, but if I use 1.12 they don\u0027t work, the decoupler is not shown in staging and when the ship is like the decoupler is active from the start even without touching anything.\n\nWith 1.11 (even with the warning in KSP 1.04) this doesn\u0027t happen. Not 100% sure if this mod, since I have a lot of mods, but so far this seems to be the only incompatibility I have encountered and it is removed if I uninstall this mod (which I don\u0027t want to) or I use the old version."}]}