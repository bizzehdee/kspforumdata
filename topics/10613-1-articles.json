{"TopicId":10613,"ForumId":16,"TopicTitle":"Calculating Velocity During Accent","CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2012-05-15T00:52:28Z","PageNum":1,"Articles":[{"CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2012-05-15T00:52:28Z","Content":"\n\u003Cp\u003EI\\\u0027m trying to calculate the velocity of my rocket at a given time, assuming I ascend straight up with no worries about wobbling and steering issues. Here is what I have so far:\u003C/p\u003E\u003Cp\u003Ev(t\u003Csub\u003Ef\u003C/sub\u003E) = t\u003Csub\u003Ef\u003C/sub\u003E \u002B ?\u003Csub\u003E0\u003C/sub\u003E\u003Csup\u003Et\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003Ef\u003C/sup\u003E\u003C/sub\u003E(F(t)/m(t)) dt\u003C/p\u003E\u003Cp\u003Ewhere\u003C/p\u003E\u003Cp\u003EF(t) = T(t) \u002B F\u003Csub\u003Eg\u003C/sub\u003E(t) \u002B F\u003Csub\u003Ed\u003C/sub\u003E(t)\u003C/p\u003E\u003Cp\u003ET(t) = thrust at time t\u003C/p\u003E\u003Cp\u003EF\u003Csub\u003Eg\u003C/sub\u003E(t) = force of gravity at time t ? -gm(t) at low altitudes\u003C/p\u003E\u003Cp\u003Eg = Kerbin\\\u0027s gravitational accel at sea level = 9.8066 m/s\u003C/p\u003E\u003Cp\u003EF\u003Csub\u003Ed\u003C/sub\u003E(t) = force of drag at time t = -\u00C2\u00BDge\u003Csup\u003E-x(t)/5000\u003C/sup\u003EC\u003Csub\u003Ed\u003C/sub\u003E(t)v\u003Csup\u003E2\u003C/sup\u003E(t) \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=7161.msg102592#msg102592\u0022 rel=\u0022external nofollow\u0022\u003Esource\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ex(t) = altitude at time t = ?\u003Csub\u003E0\u003C/sub\u003E\u003Csup\u003Et\u003C/sup\u003Ev(t)dt\u003C/p\u003E\u003Cp\u003EC\u003Csub\u003Ed\u003C/sub\u003E(t) = mass-weighted drag factor at time t\u003C/p\u003E\u003Cp\u003Em(t) = mass at time t\u003C/p\u003E\u003Cp\u003EIf I work all this out, I get v(t\u003Csub\u003Ef\u003C/sub\u003E) as an integral equation involving not only ?v\u003Csup\u003E2\u003C/sup\u003E(t) dt but also ?e\u003Csup\u003E?v(t)dt\u003C/sup\u003E dt. How does one solve this? My first thought was to take derivatives until the integrals go away, then solve the ODE. But unless I goofed up, the exponential term causes the integral to remain forever.\u003C/p\u003E\u003Cp\u003EMy rocket is simple: stock chute, stock pod, Z02 main, stock solid booster. So it\\\u0027s easy to account for everything except drag (of course!). Any hints would be appreciated.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2012-05-15T02:12:33Z","Content":"\n\u003Cp\u003EYou\\\u0027re gonna have to solve this numerically, but I would do this:\u003C/p\u003E\u003Cp\u003E\u003Csup\u003Edx\u003C/sup\u003E/\u003Csub\u003Edt\u003C/sub\u003E = v(t)\u003C/p\u003E\u003Cp\u003E\u003Csup\u003Edv\u003C/sup\u003E/\u003Csub\u003Edt\u003C/sub\u003E = \u003Csup\u003E(T(t) - \u00C2\u00BD*m(t)*0.0098*e\u003C/sup\u003E\u003Csup\u003E\u003Csup\u003E-x(t)/5000\u003C/sup\u003E\u003C/sup\u003EC\u003Csub\u003Ed\u003C/sub\u003E(t)*v\u003Csup\u003E2\u003C/sup\u003E(t) - \u003Csup\u003Emu*m(t)\u003C/sup\u003E/\u003Csub\u003E(R\u003C/sub\u003E\u003Csub\u003E\u003Csub\u003EK\u003C/sub\u003E\u003C/sub\u003E\u002Bx(t))\u003Csup\u003E2\u003C/sup\u003E)/\u003Csub\u003Em(t)\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003Ewhere mu = 3530.35 \u003Csup\u003Ekm\u003C/sup\u003E\u003Csup\u003E\u003Csup\u003E3\u003C/sup\u003E\u003C/sup\u003E/\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E\u003Csub\u003E2\u003C/sub\u003E\u003C/sup\u003E\u003C/p\u003E\u003Cp\u003EThen solve it using a standard 4th order Runge-Kutta scheme. It\\\u0027ll give you velocity and altitude as functions of time.\u003C/p\u003E\u003Cp\u003EIf you\\\u0027re looking for an analytic solution then I think you\\\u0027re out of luck.\u003C/p\u003E\u003Cp\u003EEdit: forgot mass in the gravity force term. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-05-17T20:48:29Z","Content":"\n\u003Cp\u003EAttached is a PDF of some restricted solutions I found analytically, on the assumption that \u0027g\u0027 and the drag factor are both constant, and that the Thrust/Weight ratio is held constant (different from constant-thrust). \u003C/p\u003E\u003Cp\u003EEven with these simplifications, the functions are hard to evaluate (exponential integrals), and it would be better to use a numerical method such as RK4, although if you use a smaller time-step (0.01s) you can use a simple step-wise linear method, as jebbe and I did for the Goddard Problem challenge thread, here: \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=7161\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/forum/index.php?topic=7161\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EKosmo-not implemented something similar just by using an Excel spreadsheet to update the mass, velocity, thrust etc. in each timestep (referenced in the same thread above). We all learned a lot about the atmosphere and optimal ascent strategies in that thread!\u003C/p\u003E\u003Cp\u003EFor constant thrust (therefore dm/dt = constant), even assuming a constant-density atmosphere I cannot get an analytical solution. If someone is interested enough I can post the C\u002B\u002B code I use, but you have to edit the thrust, mass, and drag factors for each particular rocket, using information from the KSP Parts Wiki. \u003C/p\u003E\n"},{"CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2012-05-18T04:54:24Z","Content":"\n\u003Cp\u003EThanks both. This is great stuff.\u003C/p\u003E\n"},{"CreatedByName":"Panichio","CreatedById":2858,"CreatedDateTime":"2012-05-19T15:56:36Z","Content":"\n\u003Cp\u003EMy brain nearly exploded.\u003C/p\u003E\n"}]}