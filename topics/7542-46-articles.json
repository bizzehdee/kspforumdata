{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":46,"Articles":[{"CreatedByName":"kenbobo","CreatedById":70629,"CreatedDateTime":"2014-07-10T18:51:28Z","Content":"\n\u003Cp\u003EI have the stock LES, and the Orion LES had little jets on top that ran on SolidFuel. My idea was to make RCS jets on the tip. So how do i make this work?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-10T19:13:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alex P\u0022 data-cite=\u0022Alex P\u0022\u003E\u003Cdiv\u003EHi again,\u003Cp\u003EFor some reason, this code doesn\u0027t seem to be working.\u003C/p\u003E\u003Cp\u003Epublic override void OnFixedUpdate(){\u003C/p\u003E\u003Cp\u003E print (\u0022This should say something...\u0022);\u003C/p\u003E\u003Cp\u003E if (CompressAir == true) {\u003C/p\u003E\u003Cp\u003E print (\u0022Should be compressing air...\u0022);\u003C/p\u003E\u003Cp\u003E part.RequestResource(\u0022Oxidizer\u0022, -10);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EI think that should spam the log with at least one message every FixedUpdate. But, it doesn\u0027t, even when it\u0027s OnDraw. The KSPEvent buttons are able to print things to the log, but why can\u0027t I do this OnDraw or OnFixedUpdate?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027ve left out a few details, can you copy paste your entire code window into a new post? Put them inside {code} blocks will make it easier for us to parse it. Quote my post to see the correct square brackets to use.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E-insert code here\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFrom the limited description there could be a couple things wrong.\u003C/p\u003E\u003Cp\u003E-Do you inherit at least the monobehavior class? The \u0027print\u0027 command is inherited through that.\u003C/p\u003E\u003Cp\u003E-Do you add your OnDraw method to the rendering manager so it gets called?\u003C/p\u003E\u003Cp\u003EBut really, the information you\u0027ve given us is lacking to really tell what is going wrong.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-10T19:15:50Z\u0022 title=\u002207/10/2014 07:15  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 10, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-10T19:41:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alex P\u0022 data-cite=\u0022Alex P\u0022\u003E\u003Cdiv\u003EHi again,\u003Cp\u003EFor some reason, this code doesn\u0027t seem to be working.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESince this seems to be for a partmodule, did you activate the module? OnUpdate and (I think) OnFixedUpdate only run when the module has been activated. Normally this is through staging, or just putting this.part.force_activate() in the OnStart code.\u003C/p\u003E\n"},{"CreatedByName":"Alex P","CreatedById":72376,"CreatedDateTime":"2014-07-10T22:32:41Z","Content":"\n\u003Cp\u003EThanks for the quick response,\u003C/p\u003E\u003Cp\u003EDebug.Log(\u0022SPAM\u0022); inside OnFixedUpdate didn\u0027t work either. Print(\u0022example\u0022) worked for the KSPEvent buttons, and part.RequestResource(\u0022Oxidizer\u0022, -10); worked also. I need to know how to get debug and part.RequestResource working in the OnFixedUpdate loop. Maybe the entire part module code would be helpful?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E using System;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing KSP.IO;\u003Cbr\u003E\u003Cbr\u003Enamespace MarsDirect{\u003Cbr\u003E\u003Cbr\u003E\tpublic class AirCompressor : PartModule{\u003Cbr\u003E\u003Cbr\u003E\t\t//declares variables\u003Cbr\u003E\u003Cbr\u003E\t\tpublic bool CompressAir = false;\u003Cbr\u003E\u003Cbr\u003E\t\t//these variables aren\u0027t used yet\u003Cbr\u003E\t\tpublic String CurrentPlanet = \u0022\u0022;\u003Cbr\u003E\t\tpublic float OxygenRatio = 0;\u003Cbr\u003E\t\tpublic float CarbonDioxideRatio = 0;\u003Cbr\u003E\t\tpublic float Oxygen = 1;\u003Cbr\u003E\t\tpublic float CarbonDioxide = 0;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\t//button to start compressing\u003Cbr\u003E\t\t[KSPEvent(guiActive = true, guiName = \u0022Start Compressing\u0022, active = true)]\u003Cbr\u003E\t\tpublic void StartCompression(){\u003Cbr\u003E\t\t\tCompressAir = true;\u003Cbr\u003E\t\t\tprint (\u0022CompressAir = true\u0022);\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\t//button to stop compressing\u003Cbr\u003E\t\t[KSPEvent(guiActive = true, guiName = \u0022Stop Compressing\u0022, active = true)]\u003Cbr\u003E\t\tpublic void StopCompression(){\u003Cbr\u003E\t\t\tCompressAir = false;\u003Cbr\u003E\t\t\tprint (\u0022CompressAir = false\u0022);\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t//I think this should be doing something to the log, but it doesn\u0027t.\u003Cbr\u003E\t\tpublic override void OnFixedUpdate(){\u003Cbr\u003E\t\t\tDebug.Log (\u0022SPAM\u0022);\u003Cbr\u003E\t\t\tif (CompressAir == true) {\u003Cbr\u003E\t\t\t\tprint (\u0022Should be compressing air...\u0022);\u003Cbr\u003E\t\t\t\tpart.RequestResource(\u0022Oxidizer\u0022, -10);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E} \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-10T23:23:20Z","Content":"\n\u003Cp\u003EOkay, the code is never running because you never assign the partModule to a part.\u003C/p\u003E\u003Cp\u003ETake a part (you can use one of squads default parts, just make a backup of the part.cfg first) and make sure it has the following:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = AirCompressor\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMODULE is a typical field, any of the existing part.cfgs can show you where it goes. It is okay for a part to have multiple MODULEs.\u003C/p\u003E\u003Cp\u003EThen when you place that part in the editor, or fly that ship in flight mode, the AirCompressor class will run. Note that it will run once for each part placed that has this part module attached.\u003C/p\u003E\u003Cp\u003EI\u0027m not sure FixedUpdate will run in the editor though, I\u0027m pretty sure Update does however.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"kenbobo","CreatedById":70629,"CreatedDateTime":"2014-07-10T23:26:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kenbob5588\u0022 data-cite=\u0022kenbob5588\u0022\u003E\u003Cdiv\u003EI have the stock LES, and the Orion LES had little jets on top that ran on SolidFuel. My idea was to make RCS jets on the tip. So how do i make this work?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnyone have help?\u003C/p\u003E\n"},{"CreatedByName":"Alex P","CreatedById":72376,"CreatedDateTime":"2014-07-11T01:10:30Z","Content":"\n\u003Cp\u003EDiazo,\u003C/p\u003E\u003Cp\u003EThe part module was assigned, the cfg looks exactly like what you posted.\u003C/p\u003E\u003Cp\u003EI tried OnUpdate instead. It worked! Now I can get to the fun coding...\u003C/p\u003E\u003Cp\u003EThanks! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-11T01:26:34Z","Content":"\n\u003Cp\u003EEDIT: Answered, see answer in the code block, you have to attach the line transform as a child to the root part transform.\u003C/p\u003E\u003Cp\u003EOkay. I am trying to draw a line using the line renderer but I can\u0027t figure out how to point it in the direction I want.\u003C/p\u003E\u003Cp\u003EThe following are my constants:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETWR1CoM = TWR1Vessel.findWorldCenterOfMass(); //find vessel center of mass as Vector3 in world co-ords\u003Cbr\u003ETWR1Up = (TWR1CoM - TWR1Vessel.mainBody.position).normalized; //find Vector 3 line from vessel center of mass to current sphere of influnce center of mass (kerbin for my test)\u003Cbr\u003ETWR1ControlUp = (TWR1Vessel.rootPart.transform.up); //the local co-rds up of the root part in world co-ords, this is what points up for a crew capsule if you don\u0027t turn it with WASD keys\u003Cbr\u003ETWR1OffsetVert = Vector3.Angle(TWR1Up, TWR1ControlUp); //angle betweeen part local up and world up, in degrees. \u0026lt;- this works, I print it and it updates correctly for how far off vertical my vessel is\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo, that all works. I am now trying to setup a way to switch between crew capsule rockets and airplane cockpits (which are rotated 90\u00C3\u201A\u00C2\u00B0 from each other).\u003C/p\u003E\u003Cp\u003ETherefore I am going to use a line, but when I do the following on a line on the same test vessel (so on a crew capsule, not dealing with cockpits yet):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E theLine = lineObj.AddComponent\u0026lt;LineRenderer\u0026gt;();\u003Cbr\u003E            theLine.material = new Material(Shader.Find(\u0022Particles/Additive\u0022));\u003Cbr\u003E            theLine.SetColors(Color.red, Color.red);\u003Cbr\u003E            theLine.SetWidth(1, 0);\u003Cbr\u003E            theLine.SetVertexCount(2);\u003Cbr\u003E            theLine.useWorldSpace = false;\u003Cbr\u003E//[b]Answer:[/b] to set the transform relative to the root part, you need to make the line transform a child and then reset the position\u003Cbr\u003EtheLine.transform.parent = TWR1Vessel.rootPart.transform; //attach line transform to root part as chile\u003Cbr\u003E                theLine.transform.localPosition = Vector3.zero; //reset origin point\u003Cbr\u003E                theLine.transform.rotation = Quaternion.identity; //reset rotation\u003Cbr\u003E                theLine.SetPosition(0, new Vector3(0, 0, 0));\u003Cbr\u003E                theLine.SetPosition(1, TWR1ControlUp * 50); \u0026lt;- Note the same Variable here, this now works as expected after attaching as child.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EThis draws a line 90\u00C3\u201A\u00C2\u00B0 off from where I expect.\u003C/span\u003EThis now draws the line as I expect.\u003C/p\u003E\u003Cp\u003EMy question is that to me it looks like I am using the TWR1ControlUp variable the same way, why is it 90\u00C3\u201A\u00C2\u00B0 off? Or is my setting of the rotation 2 lines before off?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-11T02:17:42Z\u0022 title=\u002207/11/2014 02:17  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 11, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"razorblade75","CreatedById":110952,"CreatedDateTime":"2014-07-15T15:56:15Z","Content":"\n\u003Cp\u003Esos noob, if i want to scan the propellants in search for a specific propellant in someEngine.cfg, what is the code? i\u0027ve already done with array, but i would find it with its name.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-07-16T04:39:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EEDIT: Answered, see answer in the code block, you have to attach the line transform as a child to the root part transform.\u003Cp\u003EOkay. I am trying to draw a line using the line renderer but I can\u0027t figure out how to point it in the direction I want.\u003C/p\u003E\u003Cp\u003EThe following are my constants:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETWR1CoM = TWR1Vessel.findWorldCenterOfMass(); //find vessel center of mass as Vector3 in world co-ords\u003Cbr\u003ETWR1Up = (TWR1CoM - TWR1Vessel.mainBody.position).normalized; //find Vector 3 line from vessel center of mass to current sphere of influnce center of mass (kerbin for my test)\u003Cbr\u003ETWR1ControlUp = (TWR1Vessel.rootPart.transform.up); //the local co-rds up of the root part in world co-ords, this is what points up for a crew capsule if you don\u0027t turn it with WASD keys\u003Cbr\u003ETWR1OffsetVert = Vector3.Angle(TWR1Up, TWR1ControlUp); //angle betweeen part local up and world up, in degrees. \u0026lt;- this works, I print it and it updates correctly for how far off vertical my vessel is\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo, that all works. I am now trying to setup a way to switch between crew capsule rockets and airplane cockpits (which are rotated 90\u00C3\u201A\u00C2\u00B0 from each other).\u003C/p\u003E\u003Cp\u003ETherefore I am going to use a line, but when I do the following on a line on the same test vessel (so on a crew capsule, not dealing with cockpits yet):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E theLine = lineObj.AddComponent\u0026lt;LineRenderer\u0026gt;();\u003Cbr\u003E            theLine.material = new Material(Shader.Find(\u0022Particles/Additive\u0022));\u003Cbr\u003E            theLine.SetColors(Color.red, Color.red);\u003Cbr\u003E            theLine.SetWidth(1, 0);\u003Cbr\u003E            theLine.SetVertexCount(2);\u003Cbr\u003E            theLine.useWorldSpace = false;\u003Cbr\u003E//[B]Answer:[/B] to set the transform relative to the root part, you need to make the line transform a child and then reset the position\u003Cbr\u003EtheLine.transform.parent = TWR1Vessel.rootPart.transform; //attach line transform to root part as chile\u003Cbr\u003E                theLine.transform.localPosition = Vector3.zero; //reset origin point\u003Cbr\u003E                theLine.transform.rotation = Quaternion.identity; //reset rotation\u003Cbr\u003E                theLine.SetPosition(0, new Vector3(0, 0, 0));\u003Cbr\u003E                theLine.SetPosition(1, TWR1ControlUp * 50); \u0026lt;- Note the same Variable here, this now works as expected after attaching as child.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EThis draws a line 90\u00C3\u201A\u00C2\u00B0 off from where I expect.\u003C/span\u003EThis now draws the line as I expect.\u003C/p\u003E\u003Cp\u003EMy question is that to me it looks like I am using the TWR1ControlUp variable the same way, why is it 90\u00C3\u201A\u00C2\u00B0 off? Or is my setting of the rotation 2 lines before off?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe line\u0027s positions with setPosition() should always just be pointing it forward. Then set its direction with rotation and its position with localPosition.\u003C/p\u003E\u003Cp\u003EHere\u0027s a \u0027DrawRay\u0027 substitute I\u0027m working on right now (for the defunct Debug.DrawRay function)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[FONT=Menlo][COLOR=#444444]    [/COLOR][COLOR=#009695]public[/COLOR][COLOR=#444444] [/COLOR][COLOR=#009695]class[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]RayRenderer[/COLOR]\u003Cbr\u003E[COLOR=#444444]    {[/COLOR]\u003Cbr\u003E[COLOR=#444444]        [/COLOR][COLOR=#009695]private[/COLOR][COLOR=#444444]  [/COLOR][COLOR=#3363a4]LineRenderer[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]null[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E\u003Cbr\u003E[COLOR=#444444]        [/COLOR][COLOR=#009695]public[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]RayRenderer[/COLOR][COLOR=#444444] ()[/COLOR]\u003Cbr\u003E[COLOR=#444444]        {[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#3363a4]GameObject[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]obj[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#009695]new[/COLOR][COLOR=#444444] [/COLOR][COLOR=#3363a4]GameObject[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#f57c00]\u0022[/COLOR][COLOR=#f57c00]Ray[/COLOR][COLOR=#f57c00]\u0022[/COLOR][COLOR=#444444] );[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]obj[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]layer[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#f57c00]1[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]Then[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]create[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]itself[/I][/COLOR][COLOR=#999988][I]...[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#444444]obj[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]AddComponent[/COLOR][COLOR=#444444]\u0026lt; [/COLOR][COLOR=#3363a4]LineRenderer[/COLOR][COLOR=#444444] \u0026gt;();[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]transform[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]parent[/I][/COLOR][COLOR=#999988][I] = [/I][/COLOR][COLOR=#999988][I]transform[/I][/COLOR][COLOR=#999988][I]; // ...[/I][/COLOR][COLOR=#999988][I]child[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]to[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]our[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]part[/I][/COLOR][COLOR=#999988][I]...[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]useWorldSpace[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]false[/COLOR][COLOR=#444444]; [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I] ...[/I][/COLOR][COLOR=#999988][I]and[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]moving[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]along[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]with[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]it[/I][/COLOR][COLOR=#999988][I] ([/I][/COLOR][COLOR=#999988][I]rather[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]than[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]staying[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]in[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]fixed[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]world[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]coordinates[/I][/COLOR][COLOR=#999988][I])[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]localPosition[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]zero[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]localEulerAngles[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]zero[/COLOR][COLOR=#444444]; [/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]Make[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]it[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]render[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]a[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]red[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]to[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]yellow[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]triangle[/I][/COLOR][COLOR=#999988][I], [/I][/COLOR][COLOR=#999988][I]1[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]meter[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]wide[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]and[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]2[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]meters[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]long[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]material[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#009695]new[/COLOR][COLOR=#444444] [/COLOR][COLOR=#3363a4]Material[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#3363a4]Shader[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]Find[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#f57c00]\u0022[/COLOR][COLOR=#f57c00]Particles/Additive[/COLOR][COLOR=#f57c00]\u0022[/COLOR][COLOR=#444444] ) );[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetColors[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#3363a4]Color[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]red[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Color[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]yellow[/COLOR][COLOR=#444444] );[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetWidth[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#f57c00]1[/COLOR][COLOR=#444444], [/COLOR][COLOR=#f57c00]0[/COLOR][COLOR=#444444] ); [/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetVertexCount[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#f57c00]2[/COLOR][COLOR=#444444] );[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetPosition[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#f57c00]0[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]zero[/COLOR][COLOR=#444444] );[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetPosition[/COLOR][COLOR=#444444]( [/COLOR][COLOR=#f57c00]1[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]forward[/COLOR][COLOR=#444444] * [/COLOR][COLOR=#f57c00]2[/COLOR][COLOR=#444444] );[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]sortingOrder[/I][/COLOR][COLOR=#999988][I] = [/I][/COLOR][COLOR=#999988][I]1[/I][/COLOR][COLOR=#999988][I];[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]sortingLayerName[/I][/COLOR][COLOR=#999988][I] = \u0022[/I][/COLOR][COLOR=#999988][I]GUI[/I][/COLOR][COLOR=#999988][I]\u0022;[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]material[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]renderQueue[/I][/COLOR][COLOR=#999988][I] = [/I][/COLOR][COLOR=#999988][I]1[/I][/COLOR][COLOR=#999988][I];[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]material[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]set[/I][/COLOR][COLOR=#999988][I];[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]        }[/COLOR]\u003Cbr\u003E\u003Cbr\u003E[COLOR=#444444]        [/COLOR][COLOR=#009695]public[/COLOR][COLOR=#444444] [/COLOR][COLOR=#3363a4]void[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]DrawRay[/COLOR][COLOR=#444444]([/COLOR][COLOR=#3363a4]Transform[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]origin[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]direction[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Color[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]color[/COLOR][COLOR=#444444])[/COLOR]\u003Cbr\u003E[COLOR=#444444]        {[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]parent[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetPosition[/COLOR][COLOR=#444444] ([/COLOR][COLOR=#f57c00]0[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]zero[/COLOR][COLOR=#444444]);[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetPosition[/COLOR][COLOR=#444444] ([/COLOR][COLOR=#f57c00]1[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]forward[/COLOR][COLOR=#444444] * [/COLOR][COLOR=#f57c00]2[/COLOR][COLOR=#444444]);[/COLOR]\u003Cbr\u003E\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]localPosition[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#444444]origin[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]rotation[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]Quaternion[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]LookRotation[/COLOR][COLOR=#444444] ([/COLOR][COLOR=#444444]direction[/COLOR][COLOR=#444444]);[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]transform[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]rotation[/I][/COLOR][COLOR=#999988][I] = [/I][/COLOR][COLOR=#999988][I]Quaternion[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]LookRotation[/I][/COLOR][COLOR=#999988][I]( [/I][/COLOR][COLOR=#999988][I]direction[/I][/COLOR][COLOR=#999988][I] );[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#3363a4]Color[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#444444]color[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]r[/COLOR][COLOR=#444444] *= [/COLOR][COLOR=#f57c00]0.5f[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]g[/COLOR][COLOR=#444444] *= [/COLOR][COLOR=#f57c00]0.5f[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]b[/COLOR][COLOR=#444444] *= [/COLOR][COLOR=#f57c00]0.5f[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetColors[/COLOR][COLOR=#444444] ([/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444], [/COLOR][COLOR=#444444]color[/COLOR][COLOR=#444444]);[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]renderer[/I][/COLOR][COLOR=#999988][I].[/I][/COLOR][COLOR=#999988][I]tag[/I][/COLOR][COLOR=#999988][I] = \u0022\u0022;[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]        }[/COLOR]\u003Cbr\u003E\u003Cbr\u003E[COLOR=#444444]        [/COLOR][COLOR=#009695]public[/COLOR][COLOR=#444444] [/COLOR][COLOR=#3363a4]void[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]DrawRay[/COLOR][COLOR=#444444]([/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]origin[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Vector3[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]direction[/COLOR][COLOR=#444444], [/COLOR][COLOR=#3363a4]Color[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]color[/COLOR][COLOR=#444444])[/COLOR]\u003Cbr\u003E[COLOR=#444444]        {[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#999988][I]//[/I][/COLOR][COLOR=#999988][I]throw[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]new[/I][/COLOR][COLOR=#999988][I] [/I][/COLOR][COLOR=#999988][I]NotImplementedException[/I][/COLOR][COLOR=#999988][I]();[/I][/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]useWorldSpace[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]true[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]localPosition[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#444444]origin[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]transform[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]rotation[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#3363a4]Quaternion[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]LookRotation[/COLOR][COLOR=#444444] ([/COLOR][COLOR=#444444]direction[/COLOR][COLOR=#444444]);[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#3363a4]Color[/COLOR][COLOR=#444444] [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444] = [/COLOR][COLOR=#444444]color[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]r[/COLOR][COLOR=#444444] *= [/COLOR][COLOR=#f57c00]0.5f[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]g[/COLOR][COLOR=#444444] *= [/COLOR][COLOR=#f57c00]0.5f[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]b[/COLOR][COLOR=#444444] *= [/COLOR][COLOR=#f57c00]0.5f[/COLOR][COLOR=#444444];[/COLOR]\u003Cbr\u003E[COLOR=#444444]            [/COLOR][COLOR=#444444]renderer[/COLOR][COLOR=#444444].[/COLOR][COLOR=#444444]SetColors[/COLOR][COLOR=#444444] ([/COLOR][COLOR=#444444]color2[/COLOR][COLOR=#444444], [/COLOR][COLOR=#444444]color[/COLOR][COLOR=#444444]);[/COLOR]\u003Cbr\u003E[COLOR=#444444]        }[/COLOR]\u003Cbr\u003E[COLOR=#444444]    }[/COLOR]\u003Cbr\u003E[/FONT]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#444444;\u0022\u003E\u003Cspan style=\u0022font-family:Menlo;\u0022\u003EWorks like DrawRay except that it has an overloaded function, one that attaches to an object and the other for worldspace. (note that the second version is closer in intent to Debug.DrawRay but it is not complete in the example given, and duration is not implemented for either of them. Also, I was doing something different with color, trying to get it to fade. Still a WIP.\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-16T04:53:26Z\u0022 title=\u002207/16/2014 04:53  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 16, 2014\u003C/time\u003E by Starwaster\u003C/strong\u003E\n\u003Cbr\u003ECommented out order sorting stuff; no idea if that even works that way or not.\n\u003C/span\u003E\n"},{"CreatedByName":"Olympic1","CreatedById":79730,"CreatedDateTime":"2014-07-16T13:31:54Z","Content":"\n\u003Cp\u003EI\u0027m almost ready with updating my mod, but I only need 1 more thing. I already have it working to active/deactive the struts via RMB while flying your craft, but now I want to add that function \u003Cstrong\u003EALSO for EVA\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#region Actions\u003Cbr\u003E\u003Cbr\u003E[KSPAction(\u0022Toggle\u0022)]\u003Cbr\u003E    public void ToggleStrut(KSPActionParam param)\u003Cbr\u003E    {\u003Cbr\u003E\tIsEnabled = !IsEnabled;\u003Cbr\u003E\tCheckHit();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E[KSPAction(\u0022Activate\u0022)]\u003Cbr\u003E    public void ActivateStrut(KSPActionParam param)\u003Cbr\u003E    {\u003Cbr\u003E\tthis.ActivateStrut();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E[KSPAction(\u0022Deactivate\u0022)]\u003Cbr\u003E    public void DeactivateStrut(KSPActionParam param)\u003Cbr\u003E    {\u003Cbr\u003E\tthis.DeactivateStrut();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E#endregion\u003Cbr\u003E\u003Cbr\u003E#region Events\u003Cbr\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Activate\u0022, active = true, guiActiveUnfocused = true, unfocusedRange = 2f)]\u003Cbr\u003Epublic void ActivateStrut()\u003Cbr\u003E{\u003Cbr\u003E\tIsEnabled = true;\u003Cbr\u003E\tCheckHit();\u003Cbr\u003E\tthis.Events[\u0022ActivateStrut\u0022].guiActiveEditor = false;\u003Cbr\u003E\tthis.Events[\u0022DeactivateStrut\u0022].guiActiveEditor = true;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Deactivate\u0022, active = false, guiActiveUnfocused = true, unfocusedRange = 2f)]\u003Cbr\u003Epublic void DeactivateStrut()\u003Cbr\u003E{\u003Cbr\u003E\tIsEnabled = false;\u003Cbr\u003E\tCheckHit();\u003Cbr\u003E\tthis.Events[\u0022ActivateStrut\u0022].guiActiveEditor = true;\u003Cbr\u003E\tthis.Events[\u0022DeactivateStrut\u0022].guiActiveEditor = false;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E#endregion\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDo I need to add \u0027\u003Cem\u003EexternalToEVAOnly = true\u003C/em\u003E\u0027 to do that or something else?\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2014-07-17T19:56:35Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ERDNode[] listnode = GameObject.FindObjectsOfType\u0026lt;RDNode\u0026gt;();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis always return an empty array.\u003C/p\u003E\u003Cp\u003EI am in career mode, I am loading the plugin once in \u003Cem\u003EKSPAddon.Startup.SpaceCentre\u003C/em\u003E.\u003C/p\u003E\u003Cp\u003EI have tried it inside the constructor and inside the \u003Cem\u003EStart()\u003C/em\u003E function.\u003C/p\u003E\u003Cp\u003EAny idea how I can get the list of RDNode?\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-07-17T20:46:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UbioZur\u0022 data-cite=\u0022UbioZur\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ERDNode[] listnode = GameObject.FindObjectsOfType\u0026lt;RDNode\u0026gt;();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis always return an empty array.\u003C/p\u003E\u003Cp\u003EI am in career mode, I am loading the plugin once in \u003Cem\u003EKSPAddon.Startup.SpaceCentre\u003C/em\u003E.\u003C/p\u003E\u003Cp\u003EI have tried it inside the constructor and inside the \u003Cem\u003EStart()\u003C/em\u003E function.\u003C/p\u003E\u003Cp\u003EAny idea how I can get the list of RDNode?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERDNodes are the actual GOs that make up the tech tree. Is that what you\u0027re after? They only exist if the R\u0026amp;D window is open. Luckily there\u0027s an event that lets you know when that\u0027s about to happen, so you can use this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.SpaceCentre, false)]\u003Cbr\u003Epublic class UbioCountNodes : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    void Start() { GameEvents.onGUIRnDComplexSpawn.Add(() =\u0026gt; StartCoroutine(CountNodes())); }\u003Cbr\u003E\u003Cbr\u003E    System.Collections.IEnumerator CountNodes()\u003Cbr\u003E    {\u003Cbr\u003E        yield return null;\u003Cbr\u003E\u003Cbr\u003E        Debug.Log(\u0022Counting RD nodes ...\u0022);\u003Cbr\u003E        var nodes = GameObject.FindObjectsOfType\u0026lt;RDNode\u0026gt;();\u003Cbr\u003E\u003Cbr\u003E        if (nodes == null || nodes.Length == 0)\u003Cbr\u003E        {\u003Cbr\u003E            Debug.LogError(\u0022No RDnodes found!\u0022);\u003Cbr\u003E        }\u003Cbr\u003E        else Debug.Log(\u0022Found \u0022 \u002B nodes.Length \u002B \u0022 RD nodes!\u0022);\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you\u0027re instead trying to find out what the state of the player\u0027s tech tree is, you want to be working with ResearchAndDevelopment.PartTechAvailable/PartModelPurchased etc\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-17T20:46:52Z","Content":"\n\u003Cp\u003Eedit: Oh, RDnode is not a custom class in your own plugin? Post deleted as it won\u0027t work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-17T20:50:51Z\u0022 title=\u002207/17/2014 08:50  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 17, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2014-07-17T21:09:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003ERDNodes are the actual GOs that make up the tech tree. Is that what you\u0027re after? They only exist if the R\u0026amp;D window is open. Luckily there\u0027s an event that lets you know when that\u0027s about to happen, so you can use this:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.SpaceCentre, false)]\u003Cbr\u003Epublic class UbioCountNodes : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    void Start() { GameEvents.onGUIRnDComplexSpawn.Add(() =\u0026gt; StartCoroutine(CountNodes())); }\u003Cbr\u003E\u003Cbr\u003E    System.Collections.IEnumerator CountNodes()\u003Cbr\u003E    {\u003Cbr\u003E        yield return null;\u003Cbr\u003E\u003Cbr\u003E        Debug.Log(\u0022Counting RD nodes ...\u0022);\u003Cbr\u003E        var nodes = GameObject.FindObjectsOfType\u0026lt;RDNode\u0026gt;();\u003Cbr\u003E\u003Cbr\u003E        if (nodes == null || nodes.Length == 0)\u003Cbr\u003E        {\u003Cbr\u003E            Debug.LogError(\u0022No RDnodes found!\u0022);\u003Cbr\u003E        }\u003Cbr\u003E        else Debug.Log(\u0022Found \u0022 \u002B nodes.Length \u002B \u0022 RD nodes!\u0022);\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you\u0027re instead trying to find out what the state of the player\u0027s tech tree is, you want to be working with ResearchAndDevelopment.PartTechAvailable/PartModelPurchased etc\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes I am trying to get them to see what can be down to make a good career integration for my welding tool.\u003C/p\u003E\u003Cp\u003EI will give a try at your solution, thanks.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-18T00:53:28Z","Content":"\n\u003Cp\u003EDid somebody figure out already how to edit the recovery value of a part or a vessel?\u003C/p\u003E\u003Cp\u003EIf you try to change the part\u0027s cost in the partInfo the cost is changed for every present and future instance of the part apparently -.-\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-18T00:59:33Z","Content":"\n\u003Cp\u003EThis is a limitation of 0.24\u003C/p\u003E\u003Cp\u003EThere\u0027s a hacky hacky Majiir thought of, and I thought of trying use a module to force a part to use a new AvailablePart object customized for itself, but...that\u0027s about it.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-18T01:03:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EThis is a limitation of 0.24\u003Cp\u003EThere\u0027s a hacky hacky Majiir thought of, and I thought of trying use a module to force a part to use a new AvailablePart object customized for itself, but...that\u0027s about it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECould you please detail Majiir\u0027s hack? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EBrb, trying your solution right now.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T04:27:57Z","Content":"\n\u003Cp\u003EHow do I get the ConfigNode data from .cfg into an INSTANCE of my Part?\u003C/p\u003E\u003Cp\u003EI have a PartModule with this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022FlightDataRecorder: OnLoad\u0022);\u003Cbr\u003E            print(\u0022FlightDataRecorder: \u0022 \u002B node.ToString());\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand a config like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E\t    name = FlightDataRecorder\u003Cbr\u003E        foo = bar\u003Cbr\u003E        num = 42\u003Cbr\u003E        BODY\u003Cbr\u003E        {\u003Cbr\u003E            name = kerbin\u003Cbr\u003E            value = 1.0\u003Cbr\u003E        }\u003Cbr\u003E        SITUATION\u003Cbr\u003E        {\u003Cbr\u003E            name = landed\u003Cbr\u003E            value = 0.0\u003Cbr\u003E        }\u003Cbr\u003E        SITUATION\u003Cbr\u003E        {\u003Cbr\u003E            name = flying\u003Cbr\u003E            value = 1.0\u003Cbr\u003E        }\u003Cbr\u003E        SITUATION\u003Cbr\u003E        {\u003Cbr\u003E            name = prelaunch\u003Cbr\u003E            value = 0.0\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen the game first starts up and all the parts are being loaded, I see that fire and all the ConfigNode information is in there. However when I start a game, goin to the VAB and add my part, then go to the LaunchPad, that method fires again for that instance of the part, but NONE of my custom ConfigNode information is present.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T13:33:51Z","Content":"\n\u003Cp\u003EI \u003Cem\u003Ethink\u003C/em\u003E your issue is that you are nesting nodes inside one another.\u003C/p\u003E\u003Cp\u003EI think this is what you are looking for:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022FlightDataRecorder: OnLoad\u0022);\u003Cbr\u003E            print(\u0022FlightDataRecorder: \u0022 \u002B node.ToString());\u003Cbr\u003E            ConfigNode bodyNode = node.GetNode(\u0022BODY\u0022);\u003Cbr\u003E            print(\u0022FlightDataRecorder Body: \u0022 \u002B bodyNode.ToString()); //\u0026lt;- Should print Kerbin\u003Cbr\u003E            print(\u0022FlightDataRecorder Body Value: \u0022 \u002B bodyNode.GetValue(\u0022value\u0022)); //\u0026lt;- Should print 1.0\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T13:39:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EI \u003Cem\u003Ethink\u003C/em\u003E your issue is that you are nesting nodes inside one another.\u003Cp\u003EI think this is what you are looking for:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022FlightDataRecorder: OnLoad\u0022);\u003Cbr\u003E            print(\u0022FlightDataRecorder: \u0022 \u002B node.ToString());\u003Cbr\u003E            ConfigNode bodyNode = node.GetNode(\u0022BODY\u0022);\u003Cbr\u003E            print(\u0022FlightDataRecorder Body: \u0022 \u002B bodyNode.ToString()); //\u0026lt;- Should print Kerbin\u003Cbr\u003E            print(\u0022FlightDataRecorder Body Value: \u0022 \u002B bodyNode.GetValue(\u0022value\u0022)); //\u0026lt;- Should print 1.0\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, the problem is the data doesn\u0027t even exist when the part instance is loaded with the actual craft. Its all gone. Even the non-nested primitive data values. It is all there on the first load during game load, and all gone during load of a part on an actual vessel.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T14:17:40Z","Content":"\n\u003Cp\u003EThis should be such a basic thing done by tons of mods out there but I can\u0027t figure it out \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E I must be doing something fundamentally wrong. I even tried storing the data in private variables on that initial load, but as expected since the game spawns off a new instance of my class when the part is added to a vessel, that does no good.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T14:25:55Z","Content":"\n\u003Cp\u003EHow are you adding the config node? There are issues with the .addModule() command that mean you just can\u0027t simply use that.\u003C/p\u003E\u003Cp\u003EAt least there were in 0.23.5, I don\u0027t know if 0.24 changes how it behaves.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T14:29:38Z\u0022 title=\u002207/18/2014 02:29  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T14:30:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EWait, you are either loading those values to a persistent KSPField, or saving them in the OnSave() routine correct?\u003Cp\u003EOne of KSP\u0027s quirks is that on scene load, it runs OnLoad, then almost immediately runs OnSave. If you are not saving the values back, I believe KSP null\u0027s the values out in the ConfigNode on that part and so next time it loads, it sees the null values and loads the defaults. (Note that anything in a persistent KSPField saves automatically for you, as long as you call OnSave.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat sounds like my exact problem then thanks!\u003C/p\u003E\u003Cp\u003EOn a sidenote, I was going to use KSPFields but I wasn\u0027t sure how to do that for complex data types like nested config nodes, which I would store internally as dicts. How would I do that?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T14:39:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agathorn\u0022 data-cite=\u0022Agathorn\u0022\u003E\u003Cdiv\u003EThat sounds like my exact problem then thanks!\u003Cp\u003EOn a sidenote, I was going to use KSPFields but I wasn\u0027t sure how to do that for complex data types like nested config nodes, which I would store internally as dicts. How would I do that?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHeh, you are quick. Check the edit to my previous post for what I think is a more likely culprit.\u003C/p\u003E\u003Cp\u003EHaving said that, for KSP to save your data to the persistent file you must either:\u003C/p\u003E\u003Cp\u003Ea) Assign that field the KSPField attribute with persistent = true. Then keep this value updated as whatever value is in this field when OnSave is called will be saved. Any calculations done in OnSave will \u003Cem\u003Enot\u003C/em\u003E save with this method. (My biggest headache with KSPFields).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E Grab the data directly using node.GetValue() and node.SetValue() for loading and saving. This overrides KSP\u0027s automatic save/load of the KSPField. I prefer this method as I know exactly what is being loaded and saved.\u003C/p\u003E\u003Cp\u003EFor the first method, you are limited to certain data types. Notably double does not work, you have to use float.\u003C/p\u003E\u003Cp\u003EFor the second method, I only use strings and manually convert everything back and forth. It probably makes my save/load code more complex then it needs to be, but I know exactly what is going on this way.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"}]}