{"TopicId":129562,"ForumId":69,"TopicTitle":"It\u0026#039;s been 6 months since I asked about the stutter","CreatedByName":"SessoSaidSo","CreatedById":111600,"CreatedDateTime":"2016-01-09T05:04:52Z","PageNum":5,"Articles":[{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-28T23:56:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222363007\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452860581\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/14/2016 at 0:23 PM, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nActually, this isn\u0027t quite true.\u00A0 Forcing the heap to be larger would also reduce the frequency as it would take longer for the heap to\u00A0fill up.\u00A0 This is also described in the Unity docs\u00A0I linked in another post.\u00A0 It should be possible to write a mod that forces a large allocation of memory (but not\u00A0so much that it kills KSP) and then discard it.\u00A0\u00A0If\u00A0Unity doesn\u0027t automatically shrink the size of the heap (and there are other tricks that\u00A0may prevent this if it tries) then this should result in the heap having much more free space and the stutters should stay further apart.\u00A0 I\u0027ll try to knock this up if I get a few minutes...\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Even better, make it a button on the stock toolbar that triggers the extension of the heap by allocating and discarding a large amount of memory.\u00A0 That way, the user can just click it if the glitches are too bad and they should get better (assuming more memory can be allocated without crashing the game).\n\u003C/p\u003E\n\u003Cp\u003E\nP.S. I hereby place all these ideas in the public domain so any other person is free to implement\u00A0them before I do if they feel like it... \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust in case anyone following this thread hasn\u0027t seen it yet, I have now implemented this \u0022heap padding\u0022 mechanism in my MemGraph mod linked in my sig below. \u00A0It took a little longer than \u0022a few minutes\u0022 to get it working reliably, the initial tests worked but only for one or two runs of the GC, after which Unity/Mono would discard the padding and the improvement would disappear. \u00A0After research into the low-level details of how the Mono heap management works, I have devised a way of padding the heap in such a way that Mono can\u0027t get rid of it. \u00A0This mechanism can result in the interval between stutters being increased significantly though it is highly dependent on the pattern of memory allocation\u00A0(I\u0027ve measured between 3 and 12 times in various situations and others in the thread have also reported similar and that they consider it a significant playability improvement).\n\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2016-09-03T04:08:29Z","Content":"\n\u003Cp\u003E\nI recently returned to the game again and have really noticed the stutter.\u00A0 Mine is every 5 seconds.\u00A0 It\u0027s a brief freeze, but it\u0027s enough to ruin a close docking attempt or course correction.\u00A0 Worse, it\u0027s driving me crazy (granted, I don\u0027t have far to go there, walking distance really...)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve played the game off and on for several years, I don\u0027t remember the stutter happening or at least being this noticeable before.\u00A0 It has seriously become game-breaking for me. \u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2016-09-03T05:59:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222740308\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472875709\u0022 data-ipsquote-userid=\u002264466\u0022 data-ipsquote-username=\u0022Kethevin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Kethevin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI recently returned to the game again and have really noticed the stutter.\u00A0 Mine is every 5 seconds.\u00A0 It\u0027s a brief freeze, but it\u0027s enough to ruin a close docking attempt or course correction.\u00A0 Worse, it\u0027s driving me crazy (granted, I don\u0027t have far to go there, walking distance really...)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve played the game off and on for several years, I don\u0027t remember the stutter happening or at least being this noticeable before.\u00A0 It has seriously become game-breaking for me. \u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s some potential good news to share on this front. According to several\u00A0recent devnotes, the developers have worked on an initiative for the 1.2 release\u00A0to reduce the amount of garbage the game generates, specifically by changing the style of many\u00A0loops and rewriting certain notorious\u00A0core API calls. This suggests that they\u0027re at least taking it seriously, and we may see\u00A0significant improvements if the changes are well-done (hard to tell for sure before the changes are released, of course).\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142712-devnote-tuesday-smashing-buttons/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003Eremoving old foreach() loops, Singletons and generally de-linqing the game. We recommend that modders to the same in anticipation of the next update to help increase performance for all KSP players. Linq and foreach() loops in particular create a lot of garbage, which is what causes the stutter that some people experience while running the game.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/144631-devnote-tuesday-fuel-flow/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EResource requests and GetConnected requested are now cached per set of crossfeeding parts, and per resource ID. On top of that the event system created in 1.1 for when PartResources change state (flow mode, empty, nonempty, full, etcetera) is used so that the caches are updated in place rather than recreated. All in all, this means there is a small spike on staging but so long as the part count doesn\u2019t change and crossfeed rules don\u2019t change the actual lookups are extremely fast and garbage-free.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/144175-devnote-tuesday-we-couldnt-think-of-a-title-this-week/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EPartModules take advantage of caching where possible and have lower garbage hits, and CrewManifest was completely rewritten to lower garbage creation and avoid loops.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-03T06:00:01Z\u0022 title=\u002209/03/2016 06:00  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 3, 2016\u003C/time\u003E by HebaruSan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2016-09-03T09:30:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222740360\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472882371\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThere\u0027s some potential good news to share on this front.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is really good to hear, I\u0027d not read some of those dev notes so thanks for collecting that info together. That\u00A0sounds promising.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"PSU_Jedi","CreatedById":170782,"CreatedDateTime":"2016-10-25T07:32:01Z","Content":"\n\u003Cp\u003E\nI was having a ton of problems with stutter in the game. It got to the point where it would freeze up for a second about every two to three seconds and it was driving me absolutely bonkers. I tried all kinds of tweaks that have been suggested, to no avail. In fact, just for S\u0027s \u0026amp; G\u0027s I bumped up the graphics to the max and it didn\u0027t make anything worse.\n\u003C/p\u003E\n\u003Cp\u003E\nI just happened to be combing through my contracts and noticed that I had one to capture an E class asteroid and one for an A class asteroid. When I went to the tracking station, I noticed that I was tracking a ton of C class asteroids. So I stopped tracking them. All of a sudden, voila! No more stuttering!\n\u003C/p\u003E\n\u003Cp\u003E\nSo for me it seemed to be fixed because I was just tracking way too much junk in the tracking station. I should also note that my methodical debris removal (using \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E and the K4 explosive when it\u0027s too much delta-v to try to bring it back for reentry) has not made any noticeable difference...it\u0027s only been the removal of tracking asteroids that drastically improved my gameplay. I hope this helps someone else!\n\u003C/p\u003E\n"},{"CreatedByName":"Sybok","CreatedById":170310,"CreatedDateTime":"2016-12-27T18:31:53Z","Content":"\n\u003Cp\u003E\nI suffer from this problem too. It is very painful and my biggest issue with KSP by far!\u003Cbr\u003E\nBugs and some game crashes are not that big of a deal, but this stutter (~0,2s every 2s) ruining my whole game experience \u003Cimg alt=\u0022;.;\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 title=\u0022;.;\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-12-27T23:27:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222902266\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482863513\u0022 data-ipsquote-userid=\u0022170310\u0022 data-ipsquote-username=\u0022Sybok\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Sybok said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI suffer from this problem too. It is very painful and my biggest issue with KSP by far!\u003Cbr\u003E\nBugs and some game crashes are not that big of a deal, but this stutter (~0,2s every 2s) ruining my whole game experience \u003Cimg alt=\u0022;.;\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 title=\u0022;.;\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTry the MemGraph mod linked in my sig...\n\u003C/p\u003E\n"},{"CreatedByName":"Broco","CreatedById":4320,"CreatedDateTime":"2016-12-29T10:06:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222902622\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482881259\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 28.12.2016 at 0:27 AM, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTry the MemGraph mod linked in my sig...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt somehow worsens it for me. Any settings suggestions? I have a lot of ram to spare. I think it has to do with the sheer amount of flights I have (~50, refineries on different moons, relays, space stations and missions) since it doesn\u0027t occur in an empty sandbox save. I try to reduce it but that\u0027s not really the point of a space program. Why are inactive missions creating so much garbage?\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-12-29T16:02:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222904057\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221483005991\u0022 data-ipsquote-userid=\u00224320\u0022 data-ipsquote-username=\u0022Broco\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Broco said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt somehow worsens it for me. Any settings suggestions? I have a lot of ram to spare. I think it has to do with the sheer amount of flights I have (~50, refineries on different moons, relays, space stations and missions) since it doesn\u0027t occur in an empty sandbox save. I try to reduce it but that\u0027s not really the point of a space program. Why are inactive missions creating so much garbage?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYour best bet would be to post an output_log.txt and some screenshots showing the MemGraph window in a number of situations (with the scale set reasonably so it isn\u0027t all solid green). \u00A0Also, some more details of your machine would be helpful, e.g. at least your total RAM and your\u00A0free physical memory once you\u0027ve loaded your save in KSP. \u00A0Inactive missions shouldn\u0027t be creating large amounts of garbage as Squad fixed the main cause of this for 1.1.x but there have been reports that seem to imply that having a large number of tracked asteroids does nasty things. \u00A0Do you have lots of asteroids? \u00A0If the save game is (mostly) stock (at least in terms of part mods) then you could upload that so others could try it. \u00A0Even if it uses quite a few part mods, someone may find the time to investigate it (or already have most/all of them installed)...\n\u003C/p\u003E\n"},{"CreatedByName":"Mike106","CreatedById":175461,"CreatedDateTime":"2017-03-02T09:32:50Z","Content":"\n\u003Cp\u003E\nI have 2x GTX 1080\u0027s and a 7700k @4.4 Ghz. I still have these stutters. it goes from 30-40 FPS to 1 every 10-15 seconds when using larger aircraft. If you quick save \u002B reload it helps. relaunching the game makes them temporarily stop. It doesn\u0027t matter what settings you use and it is NOT a hardware thing. I think the Unity game engine is struggling to refresh after V-sync causing certain frames to take longer than others. My dual core XP machine runs this game the same as my friends rendering server as well as my gaming rig. HE has 6 quadros and 2 xeons and it still stutters after a couple hours of gaming (400-500 FPS then drops to 6 for 10-15ms). Windows, linux, unix, doesn\u0027t matter. the engine is broken and can only be resolved by patching or upgrading the engine. The only thing i haven\u0027t tried is Windows 7 or an apple based OS. Playing with your driver setting may help. engaging triple or dual buffering seems to make it worse. SLI cuts the stutter time in half but increases the frequency.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere has been talk on steam of a new patch recently. will wee what happens otherwise its a permanent thing.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Val","CreatedById":126227,"CreatedDateTime":"2017-03-02T10:13:19Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175461-mike106/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022175461\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175461-mike106/\u0022 rel=\u0022\u0022\u003E@Mike106\u003C/a\u003E\u003Cspan style=\u0022color:#800000;\u0022\u003E, I moved your post to a more recent topic, than the dusty old 2015 \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/98170-that-stutter-every-x-seconds/\u0022 rel=\u0022\u0022\u003Eone\u003C/a\u003E, you had found.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-02T10:21:44Z","Content":"\n\u003Cp\u003E\nHi \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175461-mike106/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022175461\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175461-mike106/\u0022 rel=\u0022\u0022\u003E@Mike106\u003C/a\u003E, the pause is from the old version of Mono\u0027s \u003Ca href=\u0022https://en.wikipedia.org/wiki/Mono_%28software%29#Garbage_collector\u0022 rel=\u0022external nofollow\u0022\u003EBoehm garbage collector\u003C/a\u003E, this is built into the Unity3D engine.\n\u003C/p\u003E\n\u003Cp\u003E\nLots of work has been done by Squad to reduce garbage but it cannot be eliminated, and add-ons can create their own garbage.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks to Microsoft relicensing Xamarin as MIT software, Unity Technologies are now able to update their version of Mono, the newer versions of Mono make the SGen garbage collector available, check the Unity3D site for news on when this might occur.\n\u003C/p\u003E\n\u003Cp\u003E\nTo be clear, this isn\u0027t an FPS issue, the Unity engine is literally pausing the application to manage memory, Squad have done all they can to alleviate this but it\u0027s unlikely to ever be eliminated, as it\u0027s a feature of the engine.\n\u003C/p\u003E\n"},{"CreatedByName":"kokospl","CreatedById":137783,"CreatedDateTime":"2017-03-06T18:43:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222972760\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488450104\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2.03.2017 at 11:21 AM, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175461-mike106/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022175461\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175461-mike106/\u0022 rel=\u0022\u0022\u003E@Mike106\u003C/a\u003E Squad have done all they can to alleviate this but it\u0027s unlikely to ever be eliminated, as it\u0027s a feature of the engine.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s a very elite feature, I haven\u0027t seen it in any other Unity games. Aparently, we are very lucky.\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-06T18:51:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977735\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488825828\u0022 data-ipsquote-userid=\u0022137783\u0022 data-ipsquote-username=\u0022kokospl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, kokospl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nIt\u0027s a very elite feature, I haven\u0027t seen it in any other Unity games. Aparently, we are very lucky.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nElite? No, you are welcome to check the Unity3D documentation yourself, this is a core component of the engine and it is present in every Unity3D game made, from the Unity tutorials to the most extravagant projects.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s some links that may interest you.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://docs.unity3d.com/Manual/UnderstandingAutomaticMemoryManagement.html\u0022 ipsnoembed=\u0022true\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/Manual/UnderstandingAutomaticMemoryManagement.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Unity-Technologies/mono\u0022 ipsnoembed=\u0022true\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Unity-Technologies/mono\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://unity3d.com/learn/tutorials/temas/performance-optimization/optimizing-garbage-collection-unity-games\u0022 ipsnoembed=\u0022true\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://unity3d.com/learn/tutorials/temas/performance-optimization/optimizing-garbage-collection-unity-games\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThere are many more.\n\u003C/p\u003E\n"},{"CreatedByName":"kokospl","CreatedById":137783,"CreatedDateTime":"2017-03-06T19:58:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977743\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488826283\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nElite? No, you are welcome to check the Unity3D documentation yourself, this is a core component of the engine and it is present in every Unity3D game made, from the Unity tutorials to the most extravagant projects.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPardon me, I forgot I\u0027m not supposed to use sarcasm on the internet.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I meant was, not a single Unity game I played had this stutter nonsense. Before 1.2 rolled out, I thought garbage collector was just a guy waking me up in the middle of the night with his dump truck. When you look at it this way, KSP is an unique enlightening experince, where one cannot simply play the game and enjoy it. You need to understand software design witchcraft, peaks, memory leaks, padheaps and whatnot. You never get that sort of depth playing Battlefield.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-06T19:58:37Z\u0022 title=\u002203/06/2017 07:58  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 6, 2017\u003C/time\u003E by kokospl\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-06T20:06:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977847\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488830290\u0022 data-ipsquote-userid=\u0022137783\u0022 data-ipsquote-username=\u0022kokospl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, kokospl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nPardon me, I forgot I\u0027m not supposed to use sarcasm on the internet.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I meant was, not a single Unity game I played had this stutter nonsense. Before GC 1.2 rolled out, I thought garbage collector was just a guy waking me up in the middle of the night with his dump truck. When you look at it this way, KSP is an unique enlightening experince, where one cannot simply play the game and enjoy it. You need to understand software design witchcraft, peaks, memory leaks, padheaps and whatnot. You never get that sort of depth playing Battlefield.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh I see what you mean, well it\u0027s the nature of the game unfortunately, a physics simulation in C#, there\u0027s a lot (or there was a lot, things are a lot better now) of usage of the kind of memory that needs a garbage collector, unless it\u0027s rewritten in C and C\u002B\u002B and memory is handled manually.\n\u003C/p\u003E\n\u003Cp\u003E\nYou just don\u0027t get this with Battlefield or most other games, there\u0027s no real physics, what there is is faked or handled by a physics engine that\u0027s designed to do limited things very fast, and it doesn\u0027t exactly take a lot of code to move a soldier forwards when you hold the W key.\n\u003C/p\u003E\n\u003Cp\u003E\nI am not sure anyone tried a game like KSP in Unity before this, or will again, every game I see with physics of some sort is either small enough that this isn\u0027t a problem or it uses a custom engine.\n\u003C/p\u003E\n"},{"CreatedByName":"kokospl","CreatedById":137783,"CreatedDateTime":"2017-03-06T20:27:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977855\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488830784\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am not sure anyone tried a game like KSP in Unity before this, or will again, every game I see with physics of some sort is either small enough that this isn\u0027t a problem or it uses a custom engine.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo what will it take to fix it? I assume that reducing the amont of garbage created is resource intensive process. Like many things in life - it\u0027s not impossible, just expensive. If we create a crowdfunding campaign \u0022Make KSP great again\u0022, what the magic number would be?\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-06T20:36:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977885\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488832022\u0022 data-ipsquote-userid=\u0022137783\u0022 data-ipsquote-username=\u0022kokospl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, kokospl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nSo what will it take to fix it? I assume that reducing the amont of garbage created is resource intensive process. Like many things in life - it\u0027s not impossible, just expensive. If we create a crowdfunding campaign \u0022Make KSP great again\u0022, what the magic number would be?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe devs who left last year worked extremely hard to reduce garbage as much as they were able to, and this has had a huge positive effect on KSP, but it can\u0027t be eliminated.\n\u003C/p\u003E\n\u003Cp\u003E\nAt some point the work required is too great and the return too small.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, mods add to the memory garbage, not parts but plugins, anything that uses strings in C# will allocate heap memory, so that\u0027s anything with text.\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s newer ways to handle text, \u003Ca href=\u0022https://msdn.microsoft.com/en-us/library/system.text.stringbuilder(v=vs.110).aspx\u0022 rel=\u0022external nofollow\u0022\u003Estringbuilder\u003C/a\u003E for example, though performance will vary, and there\u0027s awkward workarounds using char arrays, which is already done in KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nSorry but there\u0027s really no way to \u0027fix\u0027 this as it\u0027s not really \u0027broken\u0027, this is how the garbage collector in Unity works, but when Unity updates Mono they will make the SGen GC an option, and that is much newer and smarter than the garbage collector Unity currently provides.\n\u003C/p\u003E\n"},{"CreatedByName":"kokospl","CreatedById":137783,"CreatedDateTime":"2017-03-06T20:44:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977899\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488832594\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAt some point the work required is too great and the return too small.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI agree, hence my question in post above. Assuming the \u0022return\u0022 is additional revenue from more copies sold, I asked what the crowdfunding campaign target should be?\n\u003C/p\u003E\n\u003Cp\u003E\nI for one, would like to play this awsome game without stutter. To that end, I\u0027m willing to pay for KSP for a second time and I don\u0027t belive I\u0027m alone in this matter.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-06T20:45:53Z\u0022 title=\u002203/06/2017 08:45  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 6, 2017\u003C/time\u003E by kokospl\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-06T20:50:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977910\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488833094\u0022 data-ipsquote-userid=\u0022137783\u0022 data-ipsquote-username=\u0022kokospl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, kokospl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI agree, hance my question in post above. Assuming the \u0022return\u0022 is additional revenue from more copies sold, I asked what the crowdfunding campaign target should be?\n\u003C/p\u003E\n\u003Cp\u003E\nI for one, would like to play this awsome game without stutter. To that end, I\u0027m willing to pay for KSP a second time and I don\u0027t belive I\u0027m alone in this matter.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t think you quite understand, it would take a complete rewrite of KSP at this point and that could take years, or for example a KSP 2, even then there is no guarantee because a \u0027stop the world\u0027 garbage collector is \u003Cem\u003Ehow Unity works\u003C/em\u003E, even SGen won\u0027t eliminate this, it\u0027s just smarter about what it checks and deletes so pauses are potentially shorter.\n\u003C/p\u003E\n\u003Cp\u003E\nUnity themselves offer advice for memory management, but I\u0027m afraid in this case the only fix might be a simpler game, and none of us want to lose the complexity that KSP does have, many want to add to it.\n\u003C/p\u003E\n"},{"CreatedByName":"kokospl","CreatedById":137783,"CreatedDateTime":"2017-03-06T20:55:01Z","Content":"\n\u003Cp\u003E\nKeeping my fingers crossed for KSP 2.0, hopefully I won\u0027t be to old to enjoy it. Thank you for your honesty.\n\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2017-03-06T20:58:23Z","Content":"\n\u003Cp\u003E\nFor what it\u0027s worth I\u0027ve not noticed it in a while, not playing near-stock (only mod being \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E and its hard dependencies). As sal_vager mentioned dealing with the problem isn\u0027t just on Squad, modders need to be careful too. It\u0027s a problem that affects every Unity developer, evidently some deal with it better than others. Code that might be natural and acceptable in another application can need to be avoided in a Unity game.\n\u003C/p\u003E\n\u003Cp\u003E\nGame developers, mod developers, and players won\u0027t have a true 100% solution to this until Unity change their C# runtime.\n\u003C/p\u003E\n\u003Cp\u003E\n(My understanding is that Unity got stuck in this problem because they made their own modifications to a once-current version of Mono, which meant that when Mono improved their garbage collector Unity couldn\u0027t upgrade. Legal issues with the software licenses were also a problem for Unity.)\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-06T21:06:04Z","Content":"\n\u003Cp\u003E\nWell, it\u0027s all hearsay and but there\u0027s plenty of \u003Ca href=\u0022https://forum.unity3d.com/threads/unity-5-and-mono-runtime.235079/#post-1567424\u0022 rel=\u0022external nofollow\u0022\u003Ethis kind of post\u003C/a\u003E around if you look.\n\u003C/p\u003E\n"},{"CreatedByName":"paulprogart","CreatedById":174587,"CreatedDateTime":"2017-03-06T22:42:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977932\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488834364\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, it\u0027s all hearsay and but there\u0027s plenty of \u003Ca href=\u0022https://forum.unity3d.com/threads/unity-5-and-mono-runtime.235079/#post-1567424\u0022 rel=\u0022external nofollow\u0022\u003Ethis kind of post\u003C/a\u003E around if you look.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s a bit old and actually a lot has changed that gives reason to be optimistic.\u00A0 Microsoft is now involved with both Unity and Mono. \u00A0 (There\u0027s already \u003Ca href=\u0022http://www.mono-project.com/news/2016/11/29/mono-code-sharing/\u0022 rel=\u0022external nofollow\u0022\u003Ecode sharing underway between Mono and .NET Core\u003C/a\u003E, and actually I fully expect at some point for the two projects to just merge.)\u00A0 It will take time to upgrade Unity though; they\u0027ve got to replace the very core of the Unity player on multiple platforms after all.\n\u003C/p\u003E\n\u003Cp\u003E\nFor the Unity-bashers, remember that while Unity may be far from ideal for KSP (and indeed many other games), if it weren\u0027t for Unity then we probably would not even \u003Cem\u003Ehave\u003C/em\u003E a KSP.\u00A0 It let the developers focus on the simulation rather than low-level stuff.\u00A0 Writing a new custom engine for something as complex as KSP could take years -- and an 8-figure budget.\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2017-03-07T07:30:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222978017\u0022 data-ipsquote-contentid=\u0022129562\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488840135\u0022 data-ipsquote-userid=\u0022174587\u0022 data-ipsquote-username=\u0022paulprogart\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, paulprogart said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nThat\u0027s a bit old...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, it\u0027s old, Microsoft have actually bought Xamarin and have released Mono under the MIT license, so Unity are free to upgrade to the latest version and I hear this is happening.\n\u003C/p\u003E\n"}]}