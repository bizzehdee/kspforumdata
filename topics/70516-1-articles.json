{"TopicId":70516,"ForumId":29,"TopicTitle":"Adding KSPField attribute to c# property (rather than c# field)","CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-04-25T22:47:18Z","PageNum":1,"Articles":[{"CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-04-25T22:47:18Z","Content":"\n\u003Cp\u003EI am striggling a bit, I wonder if you can help...\u003C/p\u003E\u003Cp\u003EIn my Module that inherits from PartModule I have a member field of type bool. I want be hable to display its status on right clicking on the part, but not as \u0022true or false\u0022 bu a text of my choosing. So I wrote some code like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E        KSPField(isPersistant = true,guiActive = true, guiName = \u0022*option\u0022)]\u003Cbr\u003E        public bool option;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        [KSPField(isPersistant=false, guiActive = true, guiName = \u0022Option Status\u0022)]\u003Cbr\u003E        public string OptionStatus\u003Cbr\u003E        {\u003Cbr\u003E            get\u003Cbr\u003E            {\u003Cbr\u003E                if (option)\u003Cbr\u003E                {\u003Cbr\u003E                    return \u0022The option has been set\u0022;\u003Cbr\u003E                }\u003Cbr\u003E                else\u003Cbr\u003E                {\u003Cbr\u003E                    return \u0022The option has nit been set\u0022;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHowever when I right click on the part *option is included but Option Status is not. Why is this? I suspect it is because OptionStatus is a property, however KSPField does appear to be value for c# properties as well as c# fields. Any ideas?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-04-26T04:36:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022codepoet\u0022 data-cite=\u0022codepoet\u0022\u003E\u003Cdiv\u003EI am striggling a bit, I wonder if you can help...\u003Cp\u003EIn my Module that inherits from PartModule I have a member field of type bool. I want be hable to display its status on right clicking on the part, but not as \u0022true or false\u0022 bu a text of my choosing. So I wrote some code like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E        KSPField(isPersistant = true,guiActive = true, guiName = \u0022*option\u0022)]\u003Cbr\u003E        public bool option;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        [KSPField(isPersistant=false, guiActive = true, guiName = \u0022Option Status\u0022)]\u003Cbr\u003E        public string OptionStatus\u003Cbr\u003E        {\u003Cbr\u003E            get\u003Cbr\u003E            {\u003Cbr\u003E                if (option)\u003Cbr\u003E                {\u003Cbr\u003E                    return \u0022The option has been set\u0022;\u003Cbr\u003E                }\u003Cbr\u003E                else\u003Cbr\u003E                {\u003Cbr\u003E                    return \u0022The option has nit been set\u0022;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHowever when I right click on the part *option is included but Option Status is not. Why is this? I suspect it is because OptionStatus is a property, however KSPField does appear to be value for c# properties as well as c# fields. Any ideas?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m pretty sure KSPField only work for Fields, as it kinda says in the name. However you could do something like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EKSPField(isPersistant = true,guiActive = true, guiName = \u0022*option\u0022)]\u003Cbr\u003Epublic bool option;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[KSPField(isPersistant = false, guiActive = true, guiName = \u0022Option Status)]\u003Cbr\u003Epublic string _optionStatus = string.Empty;\u003Cbr\u003E\u003Cbr\u003Eprivate string optionStatus\u003Cbr\u003E{\u003Cbr\u003E    get\u003Cbr\u003E    {\u003Cbr\u003E        this._optionStatus = this.option ? \u0022The option has been set\u0022 : \u0022The option has not been set\u0022;\u003Cbr\u003E        return this._optionStatus;\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen all you need to do is to call optionStatus for your own use, and _optionStatus will update on it\u0027s own without you ever touching it and display the right thing in the right click menu.\u003C/p\u003E\n"},{"CreatedByName":"einsteiner","CreatedById":71000,"CreatedDateTime":"2014-08-31T06:07:04Z","Content":"\n\u003Cp\u003EIt is a compile error to assign an attribute to something it\u0027s not designed for. The error says \u0022Attribute \u0027KSPField\u0027 is not valid on this declaration type. It is only valid on \u0027property, indexer, field\u0027 declarations.\u0022 So it should work on properties. It is possible Squad declared it as applying to properties but didn\u0027t put in the code to actually fetch the value. Perhaps this belongs in the bug reports?\u003C/p\u003E\n"}]}