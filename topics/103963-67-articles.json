{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":67,"Articles":[{"CreatedByName":"tkw","CreatedById":142638,"CreatedDateTime":"2015-10-10T18:36:30Z","Content":"ksp\u002Belite dangerous=beauty"},{"CreatedByName":"CalculusWarrior","CreatedById":58313,"CreatedDateTime":"2015-10-10T18:38:52Z","Content":"\u003E \n\u003E Just passing by\n\u003E [http://i.imgur.com/yWPWvZJ.jpg](http://i.imgur.com/yWPWvZJ.jpg)\n\nYou just put Kerbin in Space Engine and took a picture of that, didn\u0027t you? I refuse to believe this can be from the stock game! ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"tkw","CreatedById":142638,"CreatedDateTime":"2015-10-10T18:40:14Z","Content":"is not seems space engine"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-10-10T20:18:14Z","Content":"\u003E \n\u003E You just put Kerbin in Space Engine and took a picture of that, didn\u0027t you? I refuse to believe this can be from the stock game! ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nIt didn\u0027t come from the stock game \n\n\u003Cwaits a=\u0022\u0022 beat=\u0022\u0022\u003E\u003C/waits\u003E\n\nIt came from the stock game \u002B Scatterer mod!"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-10-11T00:12:29Z","Content":"Someone just posted this picture on Imgur. I think it\u0027s a nice picture of what sunset from orbit looks like ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\n![U12xndQ.jpg](http://i.imgur.com/U12xndQ.jpg)\n\nBUT MORE IMPORTANTLY IT\u0027S BEAUTIFUL!!! ![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif)\n\n**Edited \u003Ctime datetime=\u00222015-10-11T01:10:48Z\u0022 title=\u002210/11/2015 01:10  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 11, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-10-11T00:19:19Z","Content":"\u003E \n\u003E Just passing by\n\u003E [http://i.imgur.com/yWPWvZJ.jpg](http://i.imgur.com/yWPWvZJ.jpg)\n\nGimme."},{"CreatedByName":"sDaZe","CreatedById":111181,"CreatedDateTime":"2015-10-11T00:48:51Z","Content":"\u003E \n\u003E Just passing by\n\u003E [http://i.imgur.com/yWPWvZJ.jpg](http://i.imgur.com/yWPWvZJ.jpg)\n\nCant wait for this and the Duna sunrise. So hyped"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-10-11T17:22:51Z","Content":"\u003E \n\u003E Is anyone else getting [this rough transition](http://gfycat.com/FarflungShamefulInchworm) to scaled space textures once they pass 110km? I\u0027m running this on Dx9, dunno if that makes a difference. If its just me I\u0027ll have to do some poking but thought I\u0027d ask. Thanks ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nSo, I just discovered that this harsh pop-in of the scaled space textures seems to be coming from WIP-EVE, not Scatterer. I don\u0027t know why I didn\u0027t notice it before now. Sorry about bothering you about this earlier ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-10-11T21:24:05Z","Content":"I discovered the weirdest thing today. I was mucking around with HDR, trying to figure out how to get some realistic exposure and lighting going (this would allow to not being able to see the dark side of the mun through the atmo, and see a crescent instead, among other things). I enabled HDR on the scaled space camera, imported a tonemapper, disabled the built-in HDR in my shaders (only applies to scatterer effects) set everything up and fired up the game. I then decided to disable my atmo shaders and see what the stock sky would look like with HDR and tonemapping, just for giggles, and surprise surprise:\n\n![syNHQNd.jpg](http://i.imgur.com/syNHQNd.jpg)\n\nThis is what the stock sky looks like with just HDR and tonemapping, no scatterer effects involved. I thought this looked a suspicious lot like proper atmospheric scattering. I sped time up and it seems the sky doesn\u0027t change color at sunset so probably it\u0027s not a full implementation. Still I thought this looked a lot more pleasant than what the sky looks like by default, so I digged around a bit and I found this:\n\n[http://kerbalspace.tumblr.com/post/17827181033/the-story-of-ksp-ksp-04](https://kerbalspace.tumblr.com/post/17827181033/the-story-of-ksp-ksp-04)\n\nAnd so it seems it\u0027s true, KSP has some form of atmospheric scattering implemented, but for some reason, one of the most crucial bits, HDR and tonemapping is disabled, leaving the stock sky \u0022truncated\u0022 and weird. As a reminder, HDR rendering means rendering outside of the 0-1 range values, and then mapping everything back to 0-1 using math formulas that involve exposure and some such, this allows for some realistic lighting and camera effects. When HDR is disabled, effects that are designed to work with HDR just get their values cut off. I believe someone at SQUAD has some explaining to do.\n\nEdited: I might make a separate mod out of this for people who don\u0027t like scatterer, it\u0027s stock, it was done by the official devs and I only need about 5 lines of code to get this enabled, should also improve the sky on other stock planets and on kopernicus planets/planet packs without needing to reconfigure anything.\n\n**Edited \u003Ctime datetime=\u00222015-10-11T21:41:13Z\u0022 title=\u002210/11/2015 09:41  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 11, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2015-10-11T21:41:24Z","Content":"\u003E \n\u003E I discovered the weirdest thing today. I was mucking around with HDR, trying to figure out how to get some realistic exposure and lighting going (this would allow to not being able to see the dark side of the mun through the atmo, and see a crescent instead, among other things). I enabled HDR on the scaled space camera, imported a tonemapper, disabled the built-in HDR in my shaders (only applies to scatterer effects) set everything up and fired up the game. I then decided to disable my atmo shaders and see what the stock sky would look like with HDR and tonemapping, just for giggles, and surprise surprise:\n\u003E [http://i.imgur.com/syNHQNd.jpg](http://i.imgur.com/syNHQNd.jpg)\n\u003E \n\u003E This is what the stock sky looks like with just HDR and tonemapping, no scatterer effects involved. I thought this looked a suspicious lot like proper atmospheric scattering. I sped time up and it seems the sky doesn\u0027t change color at sunset so probably it\u0027s not a full implementation. Still I thought this looked a lot more pleasant than what the sky looks like by default, so I digged around a bit and I found this:\n\u003E \n\u003E [http://kerbalspace.tumblr.com/post/17827181033/the-story-of-ksp-ksp-04](https://kerbalspace.tumblr.com/post/17827181033/the-story-of-ksp-ksp-04)\n\u003E \n\u003E And so it seems it\u0027s true, KSP has some form of atmospheric scattering implemented, but for some reason, one of the most crucial bits, HDR and tonemapping is disabled, leaving the stock sky \u0022truncated\u0022 and weird. As a reminder, HDR rendering means rendering outside of the 0-1 range values, and then mapping everything back to 0-1 using math formulas that involve exposure and some such, this allows for some realistic lighting and camera effects. When HDR is disabled, effects that are designed to work with HDR just get their values cut off. I believe someone at SQUAD has some explaining to do.\n\u003E \n\u003E Edited: I might make a separate mod out of this for people who don\u0027t like scatterer, it\u0027s stock, it was done by the official devs and I only need about 5 lines of code to get this enabled, should also improve the sky on other stock planets and on kopernicus planets/planet packs.\n\n Could you make a beta for this? Looks nice."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-10-11T21:48:24Z","Content":"\u003E \n\u003E Could you make a beta for this? Looks nice.\n\nI will try to do this tomorrow, have to go to bed for now."},{"CreatedByName":"CalculusWarrior","CreatedById":58313,"CreatedDateTime":"2015-10-12T01:13:47Z","Content":"\u003E \n\u003E I discovered the weirdest thing today. I was mucking around with HDR, trying to figure out how to get some realistic exposure and lighting going (this would allow to not being able to see the dark side of the mun through the atmo, and see a crescent instead, among other things). I enabled HDR on the scaled space camera, imported a tonemapper, disabled the built-in HDR in my shaders (only applies to scatterer effects) set everything up and fired up the game. I then decided to disable my atmo shaders and see what the stock sky would look like with HDR and tonemapping, just for giggles, and surprise surprise:\n\u003E [http://i.imgur.com/syNHQNd.jpg](http://i.imgur.com/syNHQNd.jpg)\n\u003E \n\u003E This is what the stock sky looks like with just HDR and tonemapping, no scatterer effects involved. I thought this looked a suspicious lot like proper atmospheric scattering. I sped time up and it seems the sky doesn\u0027t change color at sunset so probably it\u0027s not a full implementation. Still I thought this looked a lot more pleasant than what the sky looks like by default, so I digged around a bit and I found this:\n\u003E \n\u003E [http://kerbalspace.tumblr.com/post/17827181033/the-story-of-ksp-ksp-04](https://kerbalspace.tumblr.com/post/17827181033/the-story-of-ksp-ksp-04)\n\u003E \n\u003E And so it seems it\u0027s true, KSP has some form of atmospheric scattering implemented, but for some reason, one of the most crucial bits, HDR and tonemapping is disabled, leaving the stock sky \u0022truncated\u0022 and weird. As a reminder, HDR rendering means rendering outside of the 0-1 range values, and then mapping everything back to 0-1 using math formulas that involve exposure and some such, this allows for some realistic lighting and camera effects. When HDR is disabled, effects that are designed to work with HDR just get their values cut off. I believe someone at SQUAD has some explaining to do.\n\u003E \n\u003E Edited: I might make a separate mod out of this for people who don\u0027t like scatterer, it\u0027s stock, it was done by the official devs and I only need about 5 lines of code to get this enabled, should also improve the sky on other stock planets and on kopernicus planets/planet packs without needing to reconfigure anything.\n\nThat\u0027s brilliant! Maybe reach out to the devs and see if they\u0027d be receptive to putting it in 1.0.5 or 1.1? If it\u0027s just 5 lines of code and in the stock game already, I can\u0027t imagine why they wouldn\u0027t want to enable it."},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-10-12T02:16:56Z","Content":"\u003E \n\u003E That\u0027s brilliant! Maybe reach out to the devs and see if they\u0027d be receptive to putting it in 1.0.5 or 1.1? If it\u0027s just 5 lines of code and in the stock game already, I can\u0027t imagine why they wouldn\u0027t want to enable it.\n\nThey\u0027re planning on touching visual aspects after 1.1 ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-10-12T17:58:39Z","Content":"Eh, it\u0027s not too bad I guess but it\u0027s nothing amazing.\n\nBefore:\n\n![XicDohd.jpg](http://i.imgur.com/XicDohd.jpg)\n\nAfter:\n\n![NhOgejl.jpg](http://i.imgur.com/NhOgejl.jpg)\n\nBefore:\n\n![0qjI8FU.jpg](http://i.imgur.com/0qjI8FU.jpg)\n\nAfter:\n\n![9JoNLNp.jpg](http://i.imgur.com/9JoNLNp.jpg)\n\nSeems to remove the banding and make the colors generally easier on the eyes but that\u0027s pretty much it. Back to scatterer I guess.\n\nIf anyone wants to try it: [http://www.filedropper.com/skytonemapping](http://www.filedropper.com/skytonemapping)\n\nSource is included inside, license is do whatever you want."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-10-12T18:15:32Z","Content":"\u003E \n\u003E Eh, it\u0027s not too bad I guess but it\u0027s nothing amazing.\n\u003E Before:\n\u003E \n\u003E [http://i.imgur.com/XicDohd.jpg](http://i.imgur.com/XicDohd.jpg)\n\u003E \n\u003E After:\n\u003E \n\u003E [http://i.imgur.com/NhOgejl.jpg](http://i.imgur.com/NhOgejl.jpg)\n\u003E \n\u003E Before:\n\u003E \n\u003E [http://i.imgur.com/0qjI8FU.jpg](http://i.imgur.com/0qjI8FU.jpg)\n\u003E \n\u003E After:\n\u003E \n\u003E [http://i.imgur.com/9JoNLNp.jpg](http://i.imgur.com/9JoNLNp.jpg)\n\u003E \n\u003E Seems to remove the banding and make the colors generally easier on the eyes but that\u0027s pretty much it. Back to scatterer I guess.\n\u003E \n\u003E If anyone wants to try it: [http://www.filedropper.com/skytonemapping](http://www.filedropper.com/skytonemapping)\n\u003E \n\u003E Source is included inside, license is do whatever you want.\n\nBest license ever ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) - Is this possible on other planets as well?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-10-12T18:25:37Z","Content":"\u003E \n\u003E Best license ever ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) - Is this possible on other planets as well?\n\nYes, I only tested with Kerbin and Laythe but it should be the same."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-10-13T06:55:41Z","Content":"Interesting... I\u0027ll give it a go then. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-10-13T07:15:37Z\u0022 title=\u002210/13/2015 07:15  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 13, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-10-13T18:17:07Z","Content":"Quick question: Is it legal if I extract kerbin\u0027s texture, do small modifications on it (mainly colors) and then re-distribute it with the mod?"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-10-13T18:29:07Z","Content":"\u003E \n\u003E Quick question: Is it legal if I extract kerbin\u0027s texture, do small modifications on it (mainly colors) and then re-distribute it with the mod?\n\nKerbins map is a flipped version of a royalty-free image ([this one](http://cdn.obsidianportal.com/assets/136584/Cytheria.jpg)) and, given the popularity of planet texture packs (Mainly with UR, not TR, but [1](https://forum.kerbalspaceprogram.com/threads/60961-0-23-5-TextureReplacer-1-5-10-%287-6-2014%29-IVA-Helmets-Removal?p=926577\u0026viewfull=1#post926577), [2](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=588163\u0026viewfull=1#post588163), [3](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=581825\u0026viewfull=1#post581825), [4](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=581916\u0026viewfull=1#post581916), [5](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=640636\u0026viewfull=1#post640636), [6](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0/page155?p=772056#post772056), [7](https://forum.kerbalspaceprogram.com/threads/76972-0-90-KSPRC-Renaissance-Compilation-artworks-remake-V-0-2-%2818-04-15%29) etc)... you\u0027ll be fine.\n\n(links provided by [Glyphs list of texture packs](https://docs.google.com/spreadsheets/d/1pML8fr98DaUzKP3WQ96fevmqveng5K7niODNAmJMnR0/edit#gid=0))\n\n**Edited \u003Ctime datetime=\u00222015-10-13T18:33:04Z\u0022 title=\u002210/13/2015 06:33  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 13, 2015\u003C/time\u003E by ObsessedWithKSP**"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-10-13T18:53:29Z","Content":"\u003E \n\u003E Quick question: Is it legal if I extract kerbin\u0027s texture, do small modifications on it (mainly colors) and then re-distribute it with the mod?\n\nIf you want you could use [this](https://forum.kerbalspaceprogram.com/threads/107471-1-0-4-TextureReplacer-2-4-10-%2822-9-2015%29/page50?p=1935030#post1935030) version of kerbin. That album is outdated and the planets aren\u0027t shiny anymore. The planets are from endraxial\u0027s planet pack (An ancient mod which has been around about equal time to my resumed stay on the forums). He/she has since left the community though and left the upkeep of the pack to me. Feel free to use it as you wish."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-10-13T18:55:47Z","Content":"\u003E \n\u003E Quick question: Is it legal if I extract kerbin\u0027s texture, do small modifications on it (mainly colors) and then re-distribute it with the mod?\n\nYes, we (modder community collectively) have been doing that with Squad\u0027s textures since forever."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-10-13T18:58:31Z","Content":"\u003E \n\u003E Yes, we (modder community collectively) have been doing that with Squad\u0027s textures since forever.\n\nAhh okay. I actually didn\u0027t know that XD. ty"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-10-13T20:46:28Z","Content":"Today I had the idea to look inside the space engine shaders for research purposes (which are conveniently shipped uncompiled in a .zip file renamed as .pak) and lo and behold, actual code from proland is in there: [http://imgur.com/BIvueaP](http://imgur.com/BIvueaP)\n\nThis seems weird to me, I know space engine looks awesome but it also looks quite different from proland, mainly the sunsets aren\u0027t getting any special effects. I wonder if this is still used, and space engine computes parameters for generated planets on the fly or if these are remanants from some older version.\n\nAnyway, I\u0027ll see what I can learn from this, what seems like a good idea for me right now is making a sunflare shader like the one space engine uses, I just think it\u0027s both beautiful and not too annoying [http://i.imgur.com/HKrXfMX.png](http://i.imgur.com/HKrXfMX.png)\n\nThere also seems to be an eclipse shader in there (and you know SE eclipses are beautiful [http://img94.imageshack.us/img94/2482/kersolareclipse.jpg](http://img94.imageshack.us/img94/2482/kersolareclipse.jpg) [http://voksenlia.net/spaceengine/eclipse.jpg](http://voksenlia.net/spaceengine/eclipse.jpg) ), probably I won\u0027t be able to derive anything from it but we\u0027ll see.\n\n\u003E \n\u003E Kerbins map is a flipped version of a royalty-free image ([this one](http://cdn.obsidianportal.com/assets/136584/Cytheria.jpg)) and, given the popularity of planet texture packs (Mainly with UR, not TR, but [1](https://forum.kerbalspaceprogram.com/threads/60961-0-23-5-TextureReplacer-1-5-10-%287-6-2014%29-IVA-Helmets-Removal?p=926577\u0026viewfull=1#post926577), [2](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=588163\u0026viewfull=1#post588163), [3](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=581825\u0026viewfull=1#post581825), [4](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=581916\u0026viewfull=1#post581916), [5](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0?p=640636\u0026viewfull=1#post640636), [6](https://forum.kerbalspaceprogram.com/threads/44135-0-22-Universe-Replacer-v4-0/page155?p=772056#post772056), [7](https://forum.kerbalspaceprogram.com/threads/76972-0-90-KSPRC-Renaissance-Compilation-artworks-remake-V-0-2-%2818-04-15%29) etc)... you\u0027ll be fine.\n\u003E (links provided by [Glyphs list of texture packs](https://docs.google.com/spreadsheets/d/1pML8fr98DaUzKP3WQ96fevmqveng5K7niODNAmJMnR0/edit#gid=0))\n\n\u003E \n\u003E If you want you could use [this](https://forum.kerbalspaceprogram.com/threads/107471-1-0-4-TextureReplacer-2-4-10-%2822-9-2015%29/page50?p=1935030#post1935030) version of kerbin. That album is outdated and the planets aren\u0027t shiny anymore. The planets are from endraxial\u0027s planet pack (An ancient mod which has been around about equal time to my resumed stay on the forums). He/she has since left the community though and left the upkeep of the pack to me. Feel free to use it as you wish.\n\n\u003E \n\u003E Yes, we (modder community collectively) have been doing that with Squad\u0027s textures since forever.\n\nThanks everyone, I will probably use the texture Avera9eJoe provided for now. I know proot has an awesome 8k texture in the works but I wouldn\u0027t want to ruin the full effect of his upcoming KSPRC pack before he releases it officially ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\n**Edited \u003Ctime datetime=\u00222015-10-13T20:49:16Z\u0022 title=\u002210/13/2015 08:49  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 13, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-10-13T21:12:27Z","Content":"You can also download the data kerbal maps uses from [here](https://mega.nz/#F!8EAnSL5Z!OAyLBQqrQtlmfL0GT8fcQg!EBYyXRxA). You can download the separate planet textures individually because the files are huge."},{"CreatedByName":"peachoftree","CreatedById":110108,"CreatedDateTime":"2015-10-13T21:38:30Z","Content":"does kerbin normally look like this from low orbit in OpenGL? (all the lines on the planet are pretty distracting)\n\n![f5gqKL1.png](http://i.imgur.com/f5gqKL1.png)"}]}