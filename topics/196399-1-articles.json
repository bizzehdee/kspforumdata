{"TopicId":196399,"ForumId":29,"TopicTitle":"Add model with KSPParticleEmitter to gameobject","CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2020-08-19T06:09:25Z","PageNum":1,"Articles":[{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2020-08-19T06:09:25Z","Content":"\n\u003Cp\u003E\nI am trying to add a model to a gameobject A, my plan is to create a new gameobject B with the model and attach\u00A0B to A as child.\n\u003C/p\u003E\n\u003Cp\u003E\nBut the KSPparticleemitter in B could not be got by\u00A0GetComponentInChildren\u0026lt;KSPParticleEmitter\u0026gt;() after attachment.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EGameObject DebObj = GameDatabase.Instance.GetModel(SunbeamFXPath);\nKSPParticleEmitter pe = DebObj.GetComponentInChildren\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPParticleEmitter\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\nDebug.Log(\u0022\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;color\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022atv\u0022\u003Egreen\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E[RayMonitor] \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;/color\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EDeb PE = \u0022\u002B pe.name);//This log will return the name \nDebObj.transform.SetParent(RayObj.transform);\nKSPParticleEmitter rpe = RayObj.GetComponentInChildren\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPParticleEmitter\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\nDebug.Log(\u0022\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;color\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022atv\u0022\u003Egreen\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E[RayMonitor] \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;/color\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003ERay PE = \u0022 \u002B rpe.name);//This log will return NRE\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIs there better solutions?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-08-19T12:56:05Z\u0022 title=\u002208/19/2020 12:56  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 19, 2020\u003C/time\u003E by flywlyx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2020-08-20T01:16:50Z","Content":"\n\u003Cp\u003E\nDon\u0027t mess with the original models in GameDatabase. Instantiate a new GameObject using them instead or you\u0027ll blow things up later. I would be surprised if your first log was working; GetComponentInChildren only returns a component on active GameObjects (unless you use one of its overloads) and none of the model stuff should be active\n\u003C/p\u003E\n"},{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2020-08-28T18:10:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223840979\u0022 data-ipsquote-contentid=\u0022196399\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221597886210\u0022 data-ipsquote-userid=\u002275857\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/19/2020 at 9:16 PM, xEvilReeperx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDon\u0027t mess with the original models in GameDatabase. Instantiate a new GameObject using them instead or you\u0027ll blow things up later. I would be surprised if your first log was working; GetComponentInChildren only returns a component on active GameObjects (unless you use one of its overloads) and none of the model stuff should be active\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I noticed later, if the GO is not active, then\u00A0GetComponentInChildren still give you result, but if child is not active\u00A0GetComponentInChildren will return nothing.\n\u003C/p\u003E\n"}]}