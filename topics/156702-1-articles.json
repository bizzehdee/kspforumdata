{"TopicId":156702,"ForumId":32,"TopicTitle":"Tips for max CPU/GPU utilization?","CreatedByName":"NightshineRecorralis","CreatedById":167612,"CreatedDateTime":"2017-02-19T17:17:25Z","PageNum":1,"Articles":[{"CreatedByName":"NightshineRecorralis","CreatedById":167612,"CreatedDateTime":"2017-02-19T17:17:25Z","Content":"\n\u003Cp\u003E\nSo I was playing and testing some SSTOs today, and I happened to have task manager out beside KSP. I noticed that my CPU wasn\u0027t really going past 70%, but it seemed like my framerates were dropping due to lack of processing/graphical power. I\u0027m sorta confused as to why that is happening. In my current config, it should be my CPU bottlenecking and not the GPU, but neither are close to 100% utilization. Should I prioritize\u00A0KSP in task manager? Will that help?\n\u003C/p\u003E\n\u003Cp\u003E\ni3-7100\n\u003C/p\u003E\n\u003Cp\u003E\nGTX960\n\u003C/p\u003E\n\u003Cp\u003E\n8GB DDR4\n\u003C/p\u003E\n"},{"CreatedByName":"Gaarst","CreatedById":126740,"CreatedDateTime":"2017-02-19T18:28:48Z","Content":"\n\u003Cp\u003E\nKSP has limited multithreading since 1.1:\u00A0while several threads are used by the physics processing engine, a single craft is bound to a single thread. This means that you can have one thread running at 100% while the other ones are not used at all by the game.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s the way the game (and Unity itself AFAIK) are coded and I don\u0027t think there is any solution to that.\n\u003C/p\u003E\n\u003Cp\u003E\nEarlier, there was the trick of forcing OpenGL (or DirectX11, not really sure which does what)\u00A0to transfer some CPU or RAM load to the GPU but I\u0027m not sure if it still works.\n\u003C/p\u003E\n"},{"CreatedByName":"Curveball Anders","CreatedById":107529,"CreatedDateTime":"2017-02-19T18:32:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222960739\u0022 data-ipsquote-contentid=\u0022156702\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221487524645\u0022 data-ipsquote-userid=\u0022167612\u0022 data-ipsquote-username=\u0022NightshineRecorralis\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, NightshineRecorralis said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI noticed that my CPU wasn\u0027t really going past 70%\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYour CPU is dual-core (and HT, so 4 virtual), and the CPU utilization reported is for both cores.\n\u003C/p\u003E\n\u003Cp\u003E\nKSP isn\u0027t fully multi-threaded so it will not be able to use all cores/threads equally.\n\u003C/p\u003E\n"},{"CreatedByName":"Ty Tan Tu","CreatedById":167214,"CreatedDateTime":"2017-02-19T19:32:46Z","Content":"\n\u003Cp\u003E\nA lot of this has to do with Unity. Prioritize\u00A0KSP probably will help a little, but not that much. Separate\u00A0 gameobjects is what is the likely cause of frame drops. Other than minimizing the parts use use on a ship (i.e. maybe you don\u0027t need 20 lights on your space station) try dropping the pixel light count down one or two. It saves both CPU and GPU usage.\n\u003C/p\u003E\n"},{"CreatedByName":"NightshineRecorralis","CreatedById":167612,"CreatedDateTime":"2017-02-19T23:06:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222960815\u0022 data-ipsquote-contentid=\u0022156702\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221487529135\u0022 data-ipsquote-userid=\u0022107529\u0022 data-ipsquote-username=\u0022Curveball Anders\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Curveball Anders said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYour CPU is dual-core (and HT, so 4 virtual), and the CPU utilization reported is for both cores.\n\u003C/p\u003E\n\u003Cp\u003E\nKSP isn\u0027t fully multi-threaded so it will not be able to use all cores/threads equally.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv title=\u0022Protected by Grammarly\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNone of the cores/threads are over 75%\n\u003C/p\u003E\n\u003Cp\u003E\nGPU is @100, but it is massively underclocked.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222960877\u0022 data-ipsquote-contentid=\u0022156702\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221487532766\u0022 data-ipsquote-userid=\u0022167214\u0022 data-ipsquote-username=\u0022Ty Tan Tu\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Ty Tan Tu said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA lot of this has to do with Unity. Prioritize\u00A0KSP probably will help a little, but not that much. Separate\u00A0 gameobjects is what is the likely cause of frame drops. Other than minimizing the parts use use on a ship (i.e. maybe you don\u0027t need 20 lights on your space station) try dropping the pixel light count down one or two. It saves both CPU and GPU usage.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv title=\u0022Protected by Grammarly\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBeen there, done that. Doesn\u0027t really help.\n\u003C/p\u003E\n"},{"CreatedByName":"Peder","CreatedById":57860,"CreatedDateTime":"2017-02-19T23:29:38Z","Content":"\n\u003Cp\u003E\nfound this..:\n\u003C/p\u003E\n\u003Cp\u003E\nit will only be one thread per vessel. Basically when you are approaching your space station your craft and space station are in different threads (and your OS might put these threads into different cores if it sees it worthwhile). But once you dock, they get merged into one thread and to one core.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are trying to dock big ship to big station, it should help with FPS, but once you are docked it will basically be the same situation as now.\u003Cbr\u003E\u003Cbr\u003E\nHope this help a little with understanding how kerbal uses \u0022cores\u0022.\n\u003C/p\u003E\n"},{"CreatedByName":"wumpus","CreatedById":133850,"CreatedDateTime":"2017-02-20T01:39:00Z","Content":"\n\u003Cp\u003E\nUtilization of either CPU or GPU is a red herring unless fps drops less than 60 (or the maximum your monitor can display and you can perceive). \u00A0If your framerate drops into the \u0022hey! I can see a framerate issue!\u0022 then it probably (for KSP) is a CPU (physics engine) issue (and your GPU can simply loaf along and attempt to conserve power while drawing all the frames it gets). \u00A0Also, it would probably take at least 4 (and more likely some multiple of 4) separate equally large ships all within physics range to make sure all available CPUs (and threads) were processing data.\n\u003C/p\u003E\n\u003Cp\u003E\nIn other words, KSP just isn\u0027t going to \u0022efficiently\u0022 use all CPU time or GPU time. \u00A0That type of thing is typical only in consoles (where everybody has the exact same CPU and GPU) and even there isn\u0027t likely to work with console-KSP since each space craft is custom designed by the user (and not a developer carefully balance CPU \u0026amp; GPU power). \u00A0So don\u0027t worry about it. \u00A0Now if you are trying to optimize your system to crank up the graphic options and resolution, or trying to keep KSP working while you make supersized rockets, that is another issue (that is unlikely to be solved by \u0022balancing\u0022 or \u0022hitting 100% utilization\u0022 CPU \u0026amp; GPU usage).\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbal101","CreatedById":157058,"CreatedDateTime":"2017-02-20T03:41:37Z","Content":"\n\u003Cp\u003E\nKSP requires very little GPU, but a lot of CPU. I upgraded from hd5850 to r9 280, and got almost no change in fps. But when I went from athlon II x4 to xeon x5600, the increase was noticeable. Its very true that IPC (memory access) speed and power of thread processing by cpu core per clock are more helping than amount of cores, their speed or multicore task distribution efficiency.\n\u003C/p\u003E\n\u003Cp\u003E\nThere are few eaters of CPU performance, most prominent are aerodynamic fx effects - I always set them to very low. Terrain quality eats quite a lot, can easy set it to Low. Physics delta frame still plays a role, whilst doing same calculations regardless, setting it to lesser value will give more time to fps redraw, and less time to physics update. Also, all fairings eat a LOT of CPU, reduce them where possible. 20 fairings for example totally destroy my fps, where I can have 2500 barrels of fuel on screen no problem.\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, the FPS graph itself when open eats around 20% of fps...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-02-20T03:42:50Z\u0022 title=\u002202/20/2017 03:42  AM\u0022 data-short=\u00227 yr\u0022\u003EFebruary 20, 2017\u003C/time\u003E by Kerbal101\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"LesYeuxNoirs","CreatedById":184545,"CreatedDateTime":"2018-01-18T11:07:20Z","Content":"\n\u003Cp\u003E\nI can personally attest to quite large performance improvements from overclocking. I\u0027m currently running the game on a 4670k @4.7-4.9 ghz (depending on the ambient temperature, due to unique conditions such as occasionally poor ventilation) with\u00A0 DDR3 2166 mhz and very tight timings. Granted overclocking can be very easy or very difficult. For more information on this topic there are countless forums, such as \u003Cspan style=\u0022color:#2980b9;\u0022\u003Etom\u0027s hardware \u003C/span\u003E\u003Cspan\u003Eor\u003C/span\u003E\u003Cspan style=\u0022color:#2980b9;\u0022\u003E overclock.net\u003C/span\u003E. If anyone reading this is willing to try overclocking, provided your equipment supports it, it can yield quite significant improvements. One little detail\u00A0to keep in mind however,\u00A0is that KSP\u00A0heavily favors single threaded performance so sometimes it can be a good idea to use a separate overclocking profile for KSP which has one or two cores clocked higher than the rest. This allows for increasingly higher multipliers while still staying within reasonable temperatures and voltages, but can also lead to an unstable system, if done incorrectly.\n\u003C/p\u003E\n\u003Cp style=\u0022text-align:center;\u0022\u003E\n\u003Cu\u003E\u0026lt;This is meant as an informative post and is not meant to spark further conversation\u0026gt;\u003C/u\u003E\n\u003C/p\u003E\n"}]}