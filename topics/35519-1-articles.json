{"TopicId":35519,"ForumId":20,"TopicTitle":"Adding a sound effect to a non-engine part?","CreatedByName":"Nuka","CreatedById":60587,"CreatedDateTime":"2013-07-01T20:02:31Z","PageNum":1,"Articles":[{"CreatedByName":"Nuka","CreatedById":60587,"CreatedDateTime":"2013-07-01T20:02:31Z","Content":"\n\u003Cp\u003EHey, i\u0027m trying to make a sort of police car rover for recovering pods and Kerbals on Kerbin. I\u0027ve already got the flashing lights working with Aviation Lights, but i\u0027d like to be able to switch on a siren on a part or at least add a command to a part such as the lights to turn on a looping siren.\u003C/p\u003E\u003Cp\u003EI\u0027ve looked at sound FX for the engines but i\u0027m guessing this is only with throttle up, i\u0027d just like to add a sound to a command, :/\u003C/p\u003E\n"},{"CreatedByName":"StarVision","CreatedById":44592,"CreatedDateTime":"2013-07-02T03:01:46Z","Content":"\n\u003Cp\u003EI would also like to know if this is possible, although I suspect it would require a plugin.\u003C/p\u003E\n"},{"CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2013-07-02T08:42:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022StarVision\u0022 data-cite=\u0022StarVision\u0022\u003E\u003Cdiv\u003EI would also like to know if this is possible, although I suspect it would require a plugin.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELast time I did a plug-in, there was a way to add sound on activation in the .cfg: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/CFG_File_Documentation#Sound_FX_definition\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/CFG_File_Documentation#Sound_FX_definition\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EYou could make a horn part and play the sound when it is active (it loops).\u003C/p\u003E\n"},{"CreatedByName":"Nuka","CreatedById":60587,"CreatedDateTime":"2013-07-02T13:06:07Z","Content":"\n\u003Cp\u003EI would like to make a horn part, yes, but i can\u0027t figure it out.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2013-07-02T17:32:24Z","Content":"\n\u003Cp\u003EHere, have some code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Eclass PartSound : PartModule\u003Cbr\u003E{\u003Cbr\u003E    public FXGroup MySound = null; // Make sure this is public so it can be initialised internally.\u003Cbr\u003E    private bool _playSound = false;\u003Cbr\u003E\u003Cbr\u003E    /// \u0026lt;summary\u0026gt;\u003Cbr\u003E    /// Called during the Part startup.\u003Cbr\u003E    /// StartState gives flag values of initial state\u003Cbr\u003E    /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E    public override void OnStart(StartState state)\u003Cbr\u003E    {\u003Cbr\u003E        if (state == StartState.Editor || state == StartState.None) return; // Don\u0027t play sounds in the editor view.\u003Cbr\u003E\u003Cbr\u003E        MySound.audio = gameObject.AddComponent\u0026lt;AudioSource\u0026gt;();\u003Cbr\u003E        MySound.audio.volume = GameSettings.SHIP_VOLUME;\u003Cbr\u003E        MySound.audio.Stop();\u003Cbr\u003E\u003Cbr\u003E\t// Be sure not to include the file extension of the sound here.\u003Cbr\u003E\t// Unity can play WAV and OGG, possibly some others, but not MP3.\u003Cbr\u003E        MySound.audio.clip = GameDatabase.Instance.GetAudioClip(\u0022folderUnderGameData/SoundFileName\u0022);\u003Cbr\u003E        MySound.audio.loop = true; // Repeat the sound from the start if we reach the end of the file. Use this for engine sounds etc.\u003Cbr\u003E\u003Cbr\u003E        base.OnStart(state); // Allow OnStart to do what it usually does.\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    /// \u0026lt;summary\u0026gt;\u003Cbr\u003E    /// Per-frame update\u003Cbr\u003E    /// Called ONLY when Part is ACTIVE!\u003Cbr\u003E    /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E    public override void OnUpdate()\u003Cbr\u003E    {\u003Cbr\u003E        if (_playSound)\u003Cbr\u003E        {\u003Cbr\u003E            if (!MySound.audio.isPlaying)\u003Cbr\u003E                MySound.audio.Play();\u003Cbr\u003E        }\u003Cbr\u003E        else\u003Cbr\u003E            MySound.audio.Stop();\u003Cbr\u003E\u003Cbr\u003E        base.OnUpdate();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    // Add a right-click option to the part to play the sound.\u003Cbr\u003E    [KSPEvent(guiActive = true, guiName = \u0022Play sound\u0022)]\u003Cbr\u003E    public void PlaySound()\u003Cbr\u003E    {\u003Cbr\u003E\t_playSound = true;\u003Cbr\u003E\u003Cbr\u003E\t// Make sure the quoted text matches the method names.\u003Cbr\u003E        Events[\u0022PlaySound\u0022].active = false; // Disable the \u0022Play sound\u0022 right-click option.\u003Cbr\u003E        Events[\u0022StopSound\u0022].active = true; // Enable the \u0022Stop playing sound\u0022 right-click option.\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    // Add a right-click option to the part to stop playing the sound.\u003Cbr\u003E    [KSPEvent(guiActive = true, guiName = \u0022Stop playing sound\u0022)]\u003Cbr\u003E    public void StopSound()\u003Cbr\u003E    {\u003Cbr\u003E\t_playSound = false;\u003Cbr\u003E\u003Cbr\u003E        Events[\u0022PlaySound\u0022].active = true; // Enable the \u0022Play sound\u0022 right-click option.\u003Cbr\u003E        Events[\u0022StopSound\u0022].active = false; // Disable the \u0022Stop playing sound\u0022 right-click option.\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOnce you have the DLL compiled and in a directory under GameData, add it to whatever part you want by adding before the last \u0027}\u0027 in the file:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = PartSound\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you need anything else, just ask \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-02T17:40:48Z\u0022 title=\u002207/02/2013 05:40  PM\u0022 data-short=\u002211 yr\u0022\u003EJuly 2, 2013\u003C/time\u003E by pizzaoverhead\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nuka","CreatedById":60587,"CreatedDateTime":"2013-07-03T15:53:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pizzaoverhead\u0022 data-cite=\u0022pizzaoverhead\u0022\u003E\u003Cdiv\u003EHere, have some code:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Eclass PartSound : PartModule\u003Cbr\u003E{\u003Cbr\u003E    public FXGroup MySound = null; // Make sure this is public so it can be initialised internally.\u003Cbr\u003E    private bool _playSound = false;\u003Cbr\u003E\u003Cbr\u003E    /// \u0026lt;summary\u0026gt;\u003Cbr\u003E    /// Called during the Part startup.\u003Cbr\u003E    /// StartState gives flag values of initial state\u003Cbr\u003E    /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E    public override void OnStart(StartState state)\u003Cbr\u003E    {\u003Cbr\u003E        if (state == StartState.Editor || state == StartState.None) return; // Don\u0027t play sounds in the editor view.\u003Cbr\u003E\u003Cbr\u003E        MySound.audio = gameObject.AddComponent\u0026lt;AudioSource\u0026gt;();\u003Cbr\u003E        MySound.audio.volume = GameSettings.SHIP_VOLUME;\u003Cbr\u003E        MySound.audio.Stop();\u003Cbr\u003E\u003Cbr\u003E\t// Be sure not to include the file extension of the sound here.\u003Cbr\u003E\t// Unity can play WAV and OGG, possibly some others, but not MP3.\u003Cbr\u003E        MySound.audio.clip = GameDatabase.Instance.GetAudioClip(\u0022folderUnderGameData/SoundFileName\u0022);\u003Cbr\u003E        MySound.audio.loop = true; // Repeat the sound from the start if we reach the end of the file. Use this for engine sounds etc.\u003Cbr\u003E\u003Cbr\u003E        base.OnStart(state); // Allow OnStart to do what it usually does.\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    /// \u0026lt;summary\u0026gt;\u003Cbr\u003E    /// Per-frame update\u003Cbr\u003E    /// Called ONLY when Part is ACTIVE!\u003Cbr\u003E    /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E    public override void OnUpdate()\u003Cbr\u003E    {\u003Cbr\u003E        if (_playSound)\u003Cbr\u003E        {\u003Cbr\u003E            if (!MySound.audio.isPlaying)\u003Cbr\u003E                MySound.audio.Play();\u003Cbr\u003E        }\u003Cbr\u003E        else\u003Cbr\u003E            MySound.audio.Stop();\u003Cbr\u003E\u003Cbr\u003E        base.OnUpdate();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    // Add a right-click option to the part to play the sound.\u003Cbr\u003E    [KSPEvent(guiActive = true, guiName = \u0022Play sound\u0022)]\u003Cbr\u003E    public void PlaySound()\u003Cbr\u003E    {\u003Cbr\u003E\t_playSound = true;\u003Cbr\u003E\u003Cbr\u003E\t// Make sure the quoted text matches the method names.\u003Cbr\u003E        Events[\u0022PlaySound\u0022].active = false; // Disable the \u0022Play sound\u0022 right-click option.\u003Cbr\u003E        Events[\u0022StopSound\u0022].active = true; // Enable the \u0022Stop playing sound\u0022 right-click option.\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    // Add a right-click option to the part to stop playing the sound.\u003Cbr\u003E    [KSPEvent(guiActive = true, guiName = \u0022Stop playing sound\u0022)]\u003Cbr\u003E    public void StopSound()\u003Cbr\u003E    {\u003Cbr\u003E\t_playSound = false;\u003Cbr\u003E\u003Cbr\u003E        Events[\u0022PlaySound\u0022].active = true; // Enable the \u0022Play sound\u0022 right-click option.\u003Cbr\u003E        Events[\u0022StopSound\u0022].active = false; // Disable the \u0022Stop playing sound\u0022 right-click option.\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOnce you have the DLL compiled and in a directory under GameData, add it to whatever part you want by adding before the last \u0027}\u0027 in the file:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = PartSound\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you need anything else, just ask \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s super helpful, still trying to understand it though, lol.\u003C/p\u003E\n"}]}