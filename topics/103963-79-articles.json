{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":79,"Articles":[{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2015-11-18T07:34:03Z","Content":"\n[quote name=\u0027blackrack\u0027]Custom depth buffer is working, all high altitude artifacts and moire patterns are gone\u003Cbr\u003E\n\u003Cbr\u003E\nEdited: for those who want to try it: [URL=\u0022https://mega.nz/#!6JYDSKQJ!JoSWw_pr7wH1wBbknI3k7Nfl5xhRJ7tUcYCCcx3xHyA\u0022]ArtifactsFix.zip[/URL].[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nTried it, works great (applied over 0.191 w/ OpenGL mode)\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-18T09:03:54Z","Content":"\n[quote name=\u0027selfish_meme\u0027][url]http://i.imgur.com/vsRPpXB.png[/url]I am seeing a noticible lag now on scene changes before scatterer kicks in, it was always behind the scene load but now it\u0026#39;s more pronounced, no other effect of note. Linux 64bit, Intel with nvidia graphics and overidden hardware antialiasing. Happens for a second before physics kicks in. Glorius.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nTry setting delayLoading = 0 in the planetslist.cfg file.\n"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-11-18T15:01:06Z","Content":"\nEve and/or Scatterer seems to have some kind of problem/incompatibility in the last changes: atmos are loaded, but unloaded again after one or two secs, leaving the sky black (I\u0026#39;ve changed the delay with no effect). Also, environmental effects appears completely stopped (froze, no movement), and the volumetrics are gone.\u003Cbr\u003E\nI\u0026#39;m not able to determine the specific problem, so I\u0026#39;m reporting the same to you and Rbray89.\u003Cbr\u003E\nI leave you the logs here:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL=\u0022https://drive.google.com/file/d/0B8doOUfa8UN-WGZ5dTVvaVVGaWM/view?usp=sharing\u0022]KSP.log\u003Cbr\u003E\n[/URL][URL=\u0022https://drive.google.com/file/d/0B8doOUfa8UN-VTk4RFQwc0Q0S0U/view?usp=sharing\u0022]output_log.txt[/URL]\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-18T15:27:40Z","Content":"\n[quote name=\u0027Proot\u0027]Eve and/or Scatterer seems to have some kind of problem/incompatibility in the last changes: atmos are loaded, but unloaded again after one or two secs, leaving the sky black (I\u0026#39;ve changed the delay with no effect). Also, environmental effects appears completely stopped (froze, no movement), and the volumetrics are gone.\u003Cbr\u003E\nI\u0026#39;m not able to determine the specific problem, so I\u0026#39;m reporting the same to you and Rbray89.\u003Cbr\u003E\nI leave you the logs here:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL=\u0022https://drive.google.com/file/d/0B8doOUfa8UN-WGZ5dTVvaVVGaWM/view?usp=sharing\u0022]KSP.log\u003Cbr\u003E\n[/URL][URL=\u0022https://drive.google.com/file/d/0B8doOUfa8UN-VTk4RFQwc0Q0S0U/view?usp=sharing\u0022]output_log.txt[/URL][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nI can see this: IsolatedStorageException: Could not find file \u0022D:\u0026#092;Archivos de programa (x86)\u0026#092;Steam\u0026#092;steamapps\u0026#092;common\u0026#092;Kerbal Space Program\u0026#092;GameData\u0026#092;scatterer\u0026#092;CompiledDepthTexture.shader\u0022\u003Cbr\u003E\n\u003Cbr\u003E\nSo the postprocessing won\u0026#39;t work, it shouldn\u0026#39;t affect the sky though. It seems I forgot an important shader file, and yet someone reported it as working.\u003Cbr\u003E\n\u003Cbr\u003E\nTry again with this:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL=\u0022https://mega.nz/#!CAZ2xJTT!RFzP6vX8o55ktRZz6-L4D32fnIRbZ_fU2eLaXO931fk\u0022]https://mega.nz/#!CAZ2xJTT!RFzP6vX8o55ktRZz6-L4D32fnIRbZ_fU2eLaXO931fk[/URL]\n"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-11-18T15:58:39Z","Content":"\n[quote name=\u0027blackrack\u0027]I can see this: IsolatedStorageException: Could not find file \u0022D:\u0026#092;Archivos de programa (x86)\u0026#092;Steam\u0026#092;steamapps\u0026#092;common\u0026#092;Kerbal Space Program\u0026#092;GameData\u0026#092;scatterer\u0026#092;CompiledDepthTexture.shader\u0022\u003Cbr\u003E\n\u003Cbr\u003E\nSo the postprocessing won\u0026#39;t work, it shouldn\u0026#39;t affect the sky though. It seems I forgot an important shader file, and yet someone reported it as working.\u003Cbr\u003E\n\u003Cbr\u003E\nTry again with this:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]https://mega.nz/#!CAZ2xJTT!RFzP6vX8o55ktRZz6-L4D32fnIRbZ_fU2eLaXO931fk[/URL][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nThe result is the same, but the error now seems different, many thanks anyway. The new logs:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL=\u0022https://drive.google.com/file/d/0B8doOUfa8UN-Z2tHaTF0UE5FWEE/view?usp=sharing\u0022]KSP.log[/URL]\u003Cbr\u003E\n[URL=\u0022https://drive.google.com/file/d/0B8doOUfa8UN-NkdqTWg5T0hZNDg/view?usp=sharing\u0022]output_log.txt\u003Cbr\u003E\n[/URL]\n"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-11-18T16:02:57Z","Content":"\nStill happening with me as well. Here are my logs if you need to compare.\u003Cbr\u003E\n[url=http://www./view/w8o7pizq36kic6x/output_log.txt]output_log[/url]\u003Cbr\u003E\n[url=http://www./download/zezm6pn20orwkw7/KSP.log]KSP[/url]\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2015-11-18T20:48:12Z","Content":"\n[quote name=\u0027blackrack\u0027]Try again with this:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]https://mega.nz/#!CAZ2xJTT!RFzP6vX8o55ktRZz6-L4D32fnIRbZ_fU2eLaXO931fk[/URL][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nIt is certainly odd how this has different issues for different people so I\u0026#39;m wondering what other things are at play. For example, after cleaning out my install and putting EVE, scatterer and the latest fixes in place, I get this..\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://steamcommunity.com/sharedfiles/filedetails/?id=557792501[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nMaybe the blackness has something to do with Proot and Nhawks17 using higher resolution textures or something about the modified files they have. I\u0026#39;ve got some things I need to do but I\u0026#39;ll try these latest fixes with just scatterer in place shortly.\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-18T21:00:49Z","Content":"\n[quote name=\u0027Manwith Noname\u0027]It is certainly odd how this has different issues for different people so I\u0026#39;m wondering what other things are at play. For example, after cleaning out my install and putting EVE, scatterer and the latest fixes in place, I get this..\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://steamcommunity.com/sharedfiles/filedetails/?id=557792501[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nMaybe the blackness has something to do with Proot and Nhawks17 using higher resolution textures or something about the modified files they have. I\u0026#39;ve got some things I need to do but I\u0026#39;ll try these latest fixes with just scatterer in place shortly.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nDoes this (or something like it) still happen without Scatterer? Those look like the quads generated for EVE\u0026#39;s volume particles.\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2015-11-18T21:16:28Z","Content":"\n[quote name=\u0027rbray89\u0027]Does this (or something like it) still happen without Scatterer? Those look like the quads generated for EVE\u0026#39;s volume particles.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;ll test but I very much doubt it as I was using EVE with the tonemapper until scatterer was updated to 1.0.5 and I did not see this until using the latest shader fixes above.\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-18T21:20:46Z","Content":"\n[quote name=\u0027Manwith Noname\u0027]I\u0026#39;ll test but I very much doubt it as I was using EVE with the tonemapper until scatterer was updated to 1.0.5 and I did not see this until using the latest shader fixes above.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nAh. Carry on then :)\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2015-11-18T21:28:55Z","Content":"\nIt\u0026#39;s possible there is a connection mind, still doing a few real life things be testing shortly.\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2015-11-18T23:32:30Z","Content":"\nUch, I don\u0026#39;t like double posting but here goes...\u003Cbr\u003E\n\u003Cbr\u003E\nWith just scatterer and the latest fix with the new shading technique, the big blue rectangles are gone, however....\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557876814[/url]\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557884235[/url]\u003Cbr\u003E\n\u003Cbr\u003E\nYou\u0026#39;ll probably need to zoom in on the second shot but particles appear to wipe out the atmo effect under certain circumstances. So I suspect the blue rectangles in the sky when EVE is present are in some way connected to this too.\n"},{"CreatedByName":"Bizz Keryear","CreatedById":68896,"CreatedDateTime":"2015-11-18T23:34:41Z","Content":"\nHave the black sky problem, too, but I really think that it is more of an problem caused by EVE. Since even with the old version of scatter it shows a complete black sky\u003Cbr\u003E\n\u003Cbr\u003E\nAnyway while having a look at the files there are some things that hit my eye.\u003Cbr\u003E\n[list][*]Is it really necessary to have duplicates of files? I mean sunglare.png and black.png are literally the same everywhere.\u003Cbr\u003E\nHow about bout a folder named global. Having all the stuff in that is used more than once. Every for every planet if it has a folder of its own but it doesn\u0026#39;t find file X in it it uses the global one.\u003Cbr\u003E\n[*]The black png ... after starting up KSP ... not being in game, not doing something in game I am already at 3.2 Gig (not really [only] your fault, though).... is it really necessary to have a 5kb png of only one color?\u003Cbr\u003E\n.... I mean is there really a reason to make it 512 x 512 pixels, too? If I was making this my black file would probably (unless I really really need something else) be (if used to produce black pixels) a 1x1 pixel grayscale bmp. (this should make the smallest file since you don\u0026#39;t need compression for just one pixel and one color) Size of that file is 66 bytes to 4533 bytes of yours.\u003Cbr\u003E\nOn other hand I am relative clueless when it comes to compiling C scripts, I am clueless about Unity and KSP api. So ... I don\u0026#39;t know if that would work.\u003Cbr\u003E\nBut I still thought I mentioned it. Maybe you are so deep into it that it left your grasp that you could use a file like this, too.[/list]\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-18T23:35:25Z","Content":"\n[quote name=\u0027Manwith Noname\u0027]Uch, I don\u0026#39;t like double posting but here goes...\u003Cbr\u003E\n\u003Cbr\u003E\nWith just scatterer and the latest fix with the new shading technique, the big blue rectangles are gone, however....\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557876814[/url]\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557884235[/url]\u003Cbr\u003E\n\u003Cbr\u003E\nYou\u0026#39;ll probably need to zoom in on the second shot but particles appear to wipe out the atmo effect under certain circumstances. So I suspect the blue rectangles in the sky when EVE is present are in some way connected to this too.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nWeird... is this with the new depth buffer change?\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-18T23:36:43Z","Content":"\n[quote name=\u0027Manwith Noname\u0027]Uch, I don\u0026#39;t like double posting but here goes...\u003Cbr\u003E\n\u003Cbr\u003E\nWith just scatterer and the latest fix with the new shading technique, the big blue rectangles are gone, however....\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557876814[/url]\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557884235[/url]\u003Cbr\u003E\n\u003Cbr\u003E\nYou\u0026#39;ll probably need to zoom in on the second shot but particles appear to wipe out the atmo effect under certain circumstances. So I suspect the blue rectangles in the sky when EVE is present are in some way connected to this too.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;m not sure but I think the transparent objects might be writing to the custom depth buffer, I added the \u0022Opaque\u0022 tags but they didn\u0026#39;t seem to work, better stay away from the new custom depth buffer for now (replace scatterer.dll and compiledatmosphericscatter.shader with those from the current release on kerbalstuff, delete compileddepthtexture.shader, keep the other files).\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-18T23:41:43Z\u0022 title=\u002211/18/2015 11:41  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 18, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-18T23:37:00Z","Content":"\n[quote name=\u0027Bizz Keryear\u0027]Have the black sky problem, too, but I really think that it is more of an problem caused by EVE. Since even with the old version of scatter it shows a complete black sky\u003Cbr\u003E\n\u003Cbr\u003E\nAnyway while having a look at the files there are some things that hit my eye.\u003Cbr\u003E\n[list][*]Is it really necessary to have duplicates of files? I mean sunglare.png and black.png are literally the same everywhere.\u003Cbr\u003E\nHow about bout a folder named global. Having all the stuff in that is used more than once. Every for every planet if it has a folder of its own but it doesn\u0026#39;t find file X in it it uses the global one.\u003Cbr\u003E\n[*]The black png ... after starting up KSP ... not being in game, not doing something in game I am already at 3.2 Gig (not really [only] your fault, though).... is it really necessary to have a 5kb png of only one color?\u003Cbr\u003E\n.... I mean is there really a reason to make it 512 x 512 pixels, too? If I was making this my black file would probably (unless I really really need something else) be (if used to produce black pixels) a 1x1 pixel grayscale bmp. (this should make the smallest file since you don\u0026#39;t need compression for just one pixel and one color) Size of that file is 66 bytes to 4533 bytes of yours.\u003Cbr\u003E\nOn other hand I am relative clueless when it comes to compiling C scripts, I am clueless about Unity and KSP api. So ... I don\u0026#39;t know if that would work.\u003Cbr\u003E\nBut I still thought I mentioned it. Maybe you are so deep into it that it left your grasp that you could use a file like this, too.[/list][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nTry disabling cloud shadows in EVE. GUI: ALT-0\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-18T23:41:01Z","Content":"\n[quote name=\u0027Bizz Keryear\u0027]Have the black sky problem, too, but I really think that it is more of an problem caused by EVE. Since even with the old version of scatter it shows a complete black sky\u003Cbr\u003E\n\u003Cbr\u003E\nAnyway while having a look at the files there are some things that hit my eye.\u003Cbr\u003E\n[list][*]Is it really necessary to have duplicates of files? I mean sunglare.png and black.png are literally the same everywhere.\u003Cbr\u003E\nHow about bout a folder named global. Having all the stuff in that is used more than once. Every for every planet if it has a folder of its own but it doesn\u0026#39;t find file X in it it uses the global one.\u003Cbr\u003E\n[*]The black png ... after starting up KSP ... not being in game, not doing something in game I am already at 3.2 Gig (not really [only] your fault, though).... is it really necessary to have a 5kb png of only one color?\u003Cbr\u003E\n.... I mean is there really a reason to make it 512 x 512 pixels, too? If I was making this my black file would probably (unless I really really need something else) be (if used to produce black pixels) a 1x1 pixel grayscale bmp. (this should make the smallest file since you don\u0026#39;t need compression for just one pixel and one color) Size of that file is 66 bytes to 4533 bytes of yours.\u003Cbr\u003E\nOn other hand I am relative clueless when it comes to compiling C scripts, I am clueless about Unity and KSP api. So ... I don\u0026#39;t know if that would work.\u003Cbr\u003E\nBut I still thought I mentioned it. Maybe you are so deep into it that it left your grasp that you could use a file like this, too.[/list][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nThe sunglare textures are the only repeating things and they\u0026#39;re mostly insignificant, a 512x512 texture is nothing, and they\u0026#39;re only loaded if their associated planet is loaded so at worst you see slightly more memory usage when both Laythe and Jool are loaded, for the rest it\u0026#39;s the same. The black texture could also be removed. Both of these points are so insignificant memory-wise and the current sunglare system is only temporary anyway so I haven\u0026#39;t bothered changing them.\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-18T23:43:51Z","Content":"\n[quote name=\u0027blackrack\u0027]I\u0026#39;m not sure but I think the transparent objects might be writing to the custom depth buffer, I added the \u0022Opaque\u0022 tags but they didn\u0026#39;t seem to work, better stay away from the new custom depth buffer for now (replace scatterer.dll and compiledatmosphericscatter.shader with those from the current release on kerbalstuff, delete compileddepthtexture.shader, keep the other files).[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nWhat does your Camera.RenderWithShader or Camera.SetReplacementShader call look like? For replacementTag it should be \u0022RenderType\u0022. Using null will rendder everything which is what it looks like is happening.\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-18T23:48:33Z","Content":"\n[quote name=\u0027rbray89\u0027]What does your Camera.RenderWithShader or Camera.SetReplacementShader call look like? For replacementTag it should be \u0022RenderType\u0022. Using null will rendder everything which is what it looks like is happening.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nI actually used \u0022Opaque\u0022 because I read somewhere that will replace the opaque shaders but I was getting nothing, went ahead with null while I debug it and then forgot about it.\u003Cbr\u003E\n\u003Cbr\u003E\nDidn\u0026#39;t know about \u0022RenderType\u0022, does this take the type from the replacement shader itself? I guess this would fix it then.\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2015-11-18T23:57:19Z","Content":"\n[quote name=\u0027blackrack\u0027]I\u0026#39;m not sure but I think the transparent objects might be writing to the custom depth buffer, I added the \u0022Opaque\u0022 tags but they didn\u0026#39;t seem to work, better stay away from the new custom depth buffer for now (replace scatterer.dll and compiledatmosphericscatter.shader with those from the current release on kerbalstuff, delete compileddepthtexture.shader, keep the other files).[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nIn terms of playing the game, I\u0026#39;ll revert to 0.0191 with the files in Fix3.zip. When combined with EVE this works wonders for me. I\u0026#39;m mostly a sandbox dabbler so this has just been some interesting testing for me and hopefully useful to yourself and rBray. Happy to test anything out.\u003Cbr\u003E\n\u003Cbr\u003E\nEdit:\u003Cbr\u003E\n\u003Cbr\u003E\n[quote name=\u0027rbray89\u0027]Weird... is this with the new depth buffer change?[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nYeah, the last zip file with the replacement .dll and shaders.\u003Cbr\u003E\n\u003Cbr\u003E\nAnother edit: This one...\u003Cbr\u003E\n\u003Cbr\u003E\n[url]https://mega.nz/#!CAZ2xJTT!RFzP6vX8o55ktRZz6-L4D32fnIRbZ_fU2eLaXO931fk[/url]\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-19T00:01:24Z\u0022 title=\u002211/19/2015 12:01  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 19, 2015\u003C/time\u003E by Manwith Noname\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-19T00:02:06Z","Content":"\n[quote name=\u0027blackrack\u0027]I actually used \u0022Opaque\u0022 because I read somewhere that will replace the opaque shaders but I was getting nothing, went ahead with null while I debug it and then forgot about it.\u003Cbr\u003E\n\u003Cbr\u003E\nDidn\u0026#39;t know about \u0022RenderType\u0022, does this take the type from the replacement shader itself? I guess this would fix it then.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://docs.unity3d.com/Manual/SL-ShaderReplacement.html[/url]\u003Cbr\u003E\n\u003Cbr\u003E\nBasically, it looks through the tags and plays match-up to what is set in the shaders.\u003Cbr\u003E\n\u003Cbr\u003E\nSo you have a replacement shader that looks like this:\u003Cbr\u003E\n[code]\u003Cbr\u003E\nShader \u0022Custom/DepthTexture\u0022 {\u003Cbr\u003E\nSubShader {\u003Cbr\u003E\nTags { \u0022RenderType\u0022=\u0022Opaque\u0022 }\u003Cbr\u003E\nPass {\u003Cbr\u003E\n...\u003Cbr\u003E\n[/code]\u003Cbr\u003E\n\u003Cbr\u003E\nThen call Camera.RenderWithShader(MyReplacementShader, \u0022RenderType\u0022), it will use the RenderType tag as a mask, ignoring all materials that don\u0026#39;t match it. In this case, the shaders replaced would have to match \u0022RenderType\u0022=\u0022Opaque\u0022. I believe you can add multiple sub shaders with different tags, and add multiple tags to a subshader, but don\u0026#39;t quote me on that :)\n"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-11-19T00:20:43Z","Content":"\nSome more shots for you, I have not had any of the artifacts the others reported, using 0.0191 with artifacts.zip on OpenGL Nvidia Linux, but I have seen this before with scatterer and SVE cruising through the cloud base back to the KSC, I have a video of moving through the cloud base, they look like texture edges to me that are not faded out completely. i also tried Loaddelay like you said but it still seems a lot slower than previously.\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://i.imgur.com/VyMmGsP.png[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nOther direction no artifacts visible\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://i.imgur.com/y4ATuC6.png[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nYes the edges definitely move with the clouds\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-19T00:23:35Z\u0022 title=\u002211/19/2015 12:23  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 19, 2015\u003C/time\u003E by selfish_meme\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-19T00:44:36Z","Content":"\n[quote name=\u0027rbray89\u0027][url]http://docs.unity3d.com/Manual/SL-ShaderReplacement.html[/url]\u003Cbr\u003E\n\u003Cbr\u003E\nBasically, it looks through the tags and plays match-up to what is set in the shaders.\u003Cbr\u003E\n\u003Cbr\u003E\nSo you have a replacement shader that looks like this:\u003Cbr\u003E\n[code]\u003Cbr\u003E\nShader \u0022Custom/DepthTexture\u0022 {\u003Cbr\u003E\nSubShader {\u003Cbr\u003E\nTags { \u0022RenderType\u0022=\u0022Opaque\u0022 }\u003Cbr\u003E\nPass {\u003Cbr\u003E\n...\u003Cbr\u003E\n[/code]\u003Cbr\u003E\n\u003Cbr\u003E\nThen call Camera.RenderWithShader(MyReplacementShader, \u0022RenderType\u0022), it will use the RenderType tag as a mask, ignoring all materials that don\u0026#39;t match it. In this case, the shaders replaced would have to match \u0022RenderType\u0022=\u0022Opaque\u0022. I believe you can add multiple sub shaders with different tags, and add multiple tags to a subshader, but don\u0026#39;t quote me on that :)[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nTesting this now.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n[quote name=\u0027selfish_meme\u0027]Some more shots for you, I have not had any of the artifacts the others reported, using 0.0191 with artifacts.zip on OpenGL Nvidia Linux, but I have seen this before with scatterer and SVE cruising through the cloud base back to the KSC, I have a video of moving through the cloud base, they look like texture edges to me that are not faded out completely. i also tried Loaddelay like you said but it still seems a lot slower than previously.\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://i.imgur.com/VyMmGsP.png[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nOther direction no artifacts visible\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://i.imgur.com/y4ATuC6.png[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nYes the edges definitely move with the clouds[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\n[quote name=\u0027Manwith Noname\u0027]In terms of playing the game, I\u0026#39;ll revert to 0.0191 with the files in Fix3.zip. When combined with EVE this works wonders for me. I\u0026#39;m mostly a sandbox dabbler so this has just been some interesting testing for me and hopefully useful to yourself and rBray. Happy to test anything out.\u003Cbr\u003E\n\u003Cbr\u003E\nEdit:\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\nYeah, the last zip file with the replacement .dll and shaders.\u003Cbr\u003E\n\u003Cbr\u003E\nAnother edit: This one...\u003Cbr\u003E\n\u003Cbr\u003E\n[url]https://mega.nz/#!CAZ2xJTT!RFzP6vX8o55ktRZz6-L4D32fnIRbZ_fU2eLaXO931fk[/url][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nTry this:\u003Cbr\u003E\n\u003Cbr\u003E\n[url]https://mega.nz/#!ad5QXQKS!fbAn2AMTNT8eUFffR7xJmrHO-4E39EoGCCdFEJhRw74[/url]\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2015-11-19T00:57:22Z","Content":"\n[quote name=\u0027blackrack\u0027]Try this:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]https://mega.nz/#!ad5QXQKS!fbAn2AMTNT8eUFffR7xJmrHO-4E39EoGCCdFEJhRw74[/URL][/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nParticles are good but....\u003Cbr\u003E\n\u003Cbr\u003E\n[URL]http://steamcommunity.com/sharedfiles/filedetails/?id=557917762[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;ll throw EVE back in and report if the blue rectangles appear. I should just clarify this perhaps, KSP32 (Win 8.1 x64) DX9.\u003Cbr\u003E\n\u003Cbr\u003E\nEdit: OK, threw EVE back into the equation and indeed, the odd rectangles in the sky are gone. I\u0026#39;ll go try a launch and see if anything crops up.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-19T01:02:12Z\u0022 title=\u002211/19/2015 01:02  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 19, 2015\u003C/time\u003E by Manwith Noname\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-19T01:02:29Z","Content":"\n[quote name=\u0027Manwith Noname\u0027]Particles are good but....\u003Cbr\u003E\n\u003Cbr\u003E\n[url]http://steamcommunity.com/sharedfiles/filedetails/?id=557917762[/url]\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;ll throw EVE back in and report if the blue rectangles appear. I should just clarify this perhaps, KSP32 (Win 8.1 x64) DX9.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nOcean is of type TransparentCuttout... You\u0026#39;ll need to add the RenderType to the tags in the replacement shader or do the ocean radius math fix thing in your sky shader.\n"}]}