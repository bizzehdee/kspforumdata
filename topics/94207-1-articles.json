{"TopicId":94207,"ForumId":16,"TopicTitle":"What happens if unsupervised craft enters atmosphere?","CreatedByName":"THX1138","CreatedById":113955,"CreatedDateTime":"2014-12-23T03:37:16Z","PageNum":1,"Articles":[{"CreatedByName":"THX1138","CreatedById":113955,"CreatedDateTime":"2014-12-23T03:37:16Z","Content":"\n\u003Cp\u003EIn the screenshot you can see the situation. I have two craft that I\u0027m controlling on similar timescales. One is returning to Kerbin using air-braking to expend excess energy (periapsis is 42 km) and the other is placing a satellite before heading to Mun. My question is, why KSP just declare the unattended craft a wreck if it enters the atmosphere without me controlling it? Or will it do the calculations properly and realise that the unattended craft should actually be able to orbit a few times before landing happens?\u003C/p\u003E\u003Cp\u003E(click to enlarge)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/hSIVf0Q\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/hSIVf0Qm.jpg\u0022 alt=\u0022hSIVf0Qm.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-23T06:10:08Z\u0022 title=\u002212/23/2014 06:10  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 23, 2014\u003C/time\u003E by THX1138\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Anquietas314","CreatedById":8761,"CreatedDateTime":"2014-12-23T03:39:10Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EErr, \u003C/span\u003E\u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Ewhat\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E screenshot? You didn\u0027t post one.\u003C/span\u003E Never mind, either forums derped or you edited it and it\u0027s not showing the edit. However, to answer the title: it gets deleted if it goes below about 30km. No refunds, any Kerbals on board are killed. If periapsis is above that, it just stays in orbit. Atmospheric drag does not apply unless it\u0027s within 2.5km of the active ship (this also will prevent deletion).\u003C/p\u003E\u003Cp\u003EYou should be fine to leave that one though until you match the target orbit. It\u0027s so far out it probably won\u0027t enter the atmosphere any time soon.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-23T03:41:58Z\u0022 title=\u002212/23/2014 03:41  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 23, 2014\u003C/time\u003E by armagheddonsgw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"THX1138","CreatedById":113955,"CreatedDateTime":"2014-12-23T03:54:39Z","Content":"\n\u003Cp\u003EI edited the post because I forgot the screenshot. I did it immediately so I guess it doesn\u0027t count edits that are made within a certain time limit.\u003C/p\u003E\u003Cp\u003EDoes that mean that the orbit wouldn\u0027t change at all on the unsupervised craft? TBH that\u0027s still not ideal, I don\u0027t think. It\u0027s probably saved some people some heartache but I still wanted the air-braking to occur while I did my other stuff.\u003C/p\u003E\n"},{"CreatedByName":"Anquietas314","CreatedById":8761,"CreatedDateTime":"2014-12-23T04:02:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022THX1138\u0022 data-cite=\u0022THX1138\u0022\u003E\u003Cdiv\u003EI edited the post because I forgot the screenshot. I did it immediately so I guess it doesn\u0027t count edits that are made within a certain time limit.\u003Cp\u003EDoes that mean that the orbit wouldn\u0027t change at all on the unsupervised craft? TBH that\u0027s still not ideal, I don\u0027t think. It\u0027s probably saved some people some heartache but I still wanted the air-braking to occur while I did my other stuff.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe there\u0027s a mod somewhere that makes physics work on ships that enter the atmosphere outside of your control, but I have no idea if it\u0027s still maintained or what it\u0027s called. The problem is you can time-warp when you\u0027re in another ship. How should the game handle your trajectory through the atmosphere? If the ship has wings things get really complicated really, really fast. If the aerodynamics model was any good at all, it would get really really complicated, really, really, \u003Cstrong\u003Ereally\u003C/strong\u003E fast.\u003C/p\u003E\n"},{"CreatedByName":"lirg03","CreatedById":133053,"CreatedDateTime":"2014-12-23T04:37:53Z","Content":"\n\u003Cp\u003EI believe when a ship \u0027on rail\u0027 enters the atmosphere, either nothing happens, or it gets deleted. Depends on how deep the PE is. For Kerbin, the threshold is ~23km, any ships on rail enters atmosphere below that height will be deleted. (ref: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Atmosphere\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Atmosphere\u003C/a\u003E)\u003C/p\u003E\n"},{"CreatedByName":"THX1138","CreatedById":113955,"CreatedDateTime":"2014-12-23T04:39:09Z","Content":"\n\u003Cp\u003EWell the game could handle the situation in different ways. For a start it could warn the player that they have another ship entering the atmosphere of planet (that seems a pretty user-friendly thing to do). Then, if the player doesn\u0027t want to switch to the ship in question (madness!), the game can just put the calculations \u0022on the back burner\u0022 and perform them when the spare GPU cycles are available. If the player tries to change to the ship in question before the calculations are complete, they can watch the simulation as a recording of what happened. Not all calculations should need to be performed in real-time if the user is off lollygagging elsewhere.\u003C/p\u003E\n"},{"CreatedByName":"Anquietas314","CreatedById":8761,"CreatedDateTime":"2014-12-23T04:47:32Z","Content":"\n\u003Cp\u003ETHX1138: The last time I checked (admittedly, a while ago), KSP\u0027s physics (mostly managed by unity afaik) is done on the CPU. The amount of lag I get for even relatively small ships (say, 100-150 parts) on my old hardware would certainly suggest it. Most of the time the GPU\u0027s doing diddly squat the entire time, while the CPU\u0027s pegged at about 50% (quad core), half of which is KSP; which means it\u0027s CPU-bound and mostly serialized (i.e. more or less single-threaded).\u003C/p\u003E\u003Cp\u003EAs to your proposed solution: what happens if the ship is about to enter the atmosphere at the same time you\u0027re in the middle of a long, possibly complicated burn that you absolutely cannot stop in the middle of? Or here\u0027s a really nasty one: suppose you have not one but \u003Cstrong\u003Etwo\u003C/strong\u003E or more ships entering the atmosphere (possibly different atmospheres!) at the same time?\u003C/p\u003E\n"},{"CreatedByName":"Claw","CreatedById":100668,"CreatedDateTime":"2014-12-23T05:09:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lirg03\u0022 data-cite=\u0022lirg03\u0022\u003E\u003Cdiv\u003EI believe when a ship \u0027on rail\u0027 enters the atmosphere, either nothing happens, or it gets deleted. Depends on how deep the PE is. For Kerbin, the threshold is ~23km, any ships on rail enters atmosphere below that height will be deleted. (ref: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Atmosphere\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Atmosphere\u003C/a\u003E)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022armagheddonsgw\u0022 data-cite=\u0022armagheddonsgw\u0022\u003E\u003Cdiv\u003E which means it\u0027s CPU-bound and mostly serialized (i.e. more or less single-threaded).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd yes. KSP is not multi-threaded. Also, the Unity engine does an amazing amount of part-to-part comparison each frame. That\u0027s why lag increases exponentially with part count.\u003C/p\u003E\u003Cp\u003ECheers,\u003C/p\u003E\u003Cp\u003E~Claw\u003C/p\u003E\n"},{"CreatedByName":"Anquietas314","CreatedById":8761,"CreatedDateTime":"2014-12-23T05:29:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Claw\u0022 data-cite=\u0022Claw\u0022\u003E\u003Cdiv\u003EAnd yes. KSP is not multi-threaded. Also, the Unity engine does an amazing amount of part-to-part comparison each frame. That\u0027s why lag increases exponentially with part count.\u003Cp\u003ECheers,\u003C/p\u003E\u003Cp\u003E~Claw\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are pretty simple ways that could be brought down to something closer to polynomial complexity without adversely affecting physics accuracy to a noticeable degree, at least in theory; for example processing part physics (and anything else) in stages in a manner similar a parallel prefix sum algorithm. How practical that is in Unity I don\u0027t know though, and of course there\u0027s always the possibility of complications.\u003C/p\u003E\n"},{"CreatedByName":"WuphonsReach","CreatedById":130759,"CreatedDateTime":"2014-12-23T06:33:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022armagheddonsgw\u0022 data-cite=\u0022armagheddonsgw\u0022\u003E\u003Cdiv\u003EI believe there\u0027s a mod somewhere that makes physics work on ships that enter the atmosphere outside of your control, but I have no idea if it\u0027s still maintained or what it\u0027s called. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStage Recovery (and yes it works with 0.90).\u003C/p\u003E\u003Cp\u003EPut parachutes on your booster stages, get about 1/2-2/3 of the value back. Put parachutes \u002B heat shields on your second stage that slots you into a stable orbit, get 1/4-1/2 of the value back (just make sure to decouple from the last stage while your Pe is still under 50km).\u003C/p\u003E\u003Cp\u003EMakes those early launches much more affordable / profitable since you can get back at least 1/4-1/3 of your launch costs right after launch.\u003C/p\u003E\n"},{"CreatedByName":"Anquietas314","CreatedById":8761,"CreatedDateTime":"2014-12-23T15:49:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022WuphonsReach\u0022 data-cite=\u0022WuphonsReach\u0022\u003E\u003Cdiv\u003EStage Recovery (and yes it works with 0.90).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do actually use that mod, but that doesn\u0027t seem to be how it works. The parts \u0022land\u0022 much too soon for that to be what it\u0027s doing; instead, I think it simply waits until the parts hit the deletion cut-off and then computes terminal velocity based on all attached parachutes deploying and presumably something like MechJeb\u0027s atmosphere landing prediction. It also produces slightly incorrect results - if you fly the stages manually, you will very reliably get less return than if you let the mod take care of it. I imagine this is considerably worse with FAR, though I don\u0027t use that at the moment.\u003C/p\u003E\u003Cp\u003EEDIT: The mod just uses the point when ships are deleted in the atmosphere. Confirmed both by observing debris fall back down and mention of implementation in the relevant thread.\u003C/p\u003E\u003Cp\u003EYou can easily get near 100% of the value back - you just need \u003Cstrong\u003Emore\u003C/strong\u003E parachutes; 2 radial ones for a 3x1.25m tank launcher seems to be about right.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-25T23:22:39Z\u0022 title=\u002212/25/2014 11:22  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 25, 2014\u003C/time\u003E by armagheddonsgw\u003C/strong\u003E\n\u003C/span\u003E\n"}]}