{"TopicId":183044,"ForumId":29,"TopicTitle":"C\u002B\u002B Managed/Native Hybrid Mod","CreatedByName":"Gavin786","CreatedById":196260,"CreatedDateTime":"2019-03-22T23:20:12Z","PageNum":1,"Articles":[{"CreatedByName":"Gavin786","CreatedById":196260,"CreatedDateTime":"2019-03-22T23:20:12Z","Content":"\n\u003Cp\u003E\nFellow Kerbonauts,\n\u003C/p\u003E\n\u003Cp\u003E\nI am now ready to start developing my mods which I have planned for KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nI have a massive library of pretty nice c\u002B\u002B code that I have developed and maintained throughout the years.\n\u003C/p\u003E\n\u003Cp\u003E\nI would really like to use this in my mod.\n\u003C/p\u003E\n\u003Cp\u003E\nMany years ago I did use this in a hybrid managed cli/unmanaged program which was a total nightmare for a number of reasons: 1. There was no incremental linking meaning whole thing needed to be relinked on any code change(which took aaaages).\u00A0 2. MS implementation was absolutely full of bugs(this was back in mid 2000s) 3. It is just plain miserable and ugly way to code\n\u003C/p\u003E\n\u003Cp\u003E\nHas anything changed that will make this prospect any saner?\u00A0 My c\u002B\u002B library compiles on Clang and GCC; having my mods run on linux and osx would be a real nice to have, there is no particular technical reason they should not compile as long as there is not some kind of barrier there I dont get.\n\u003C/p\u003E\n\u003Cp\u003E\nAre there any massive difficulties in having managed/unmanaged code run under mono(as its not \u0027real\u0027 .net) ?\n\u003C/p\u003E\n\u003Cp\u003E\nAnyone know of any nice ways to do this ?\n\u003C/p\u003E\n\u003Cp\u003E\nI have been away from serious .net development for many years(except aspx) and am absolutely new to mono and unity (and ksp modding).\n\u003C/p\u003E\n\u003Cp\u003E\nHelpful advice is welcome.\u00A0 Unhelpful advice like do it in c# is not.\n\u003C/p\u003E\n\u003Cp\u003E\nGavin786\n\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2019-03-23T04:01:38Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#27ae60;\u0022\u003E\u003Cstrong\u003E[MOD - Moved to C# Plugin Development Help and Support subforums.\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#27ae60;\u0022\u003E\u003Cstrong\u003EYes, I am aware of the irony in that you clearly stated you are not coding in C#, but this is the subforum for discussing plugin development in general.]\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-03-23T04:55:47Z","Content":"\n\u003Cp\u003E\nGive a look on the Advanced Fly By Wire mod. I\u0027m pretty sure you will find it useful to your needs.\n\u003C/p\u003E\n"},{"CreatedByName":"Gavin786","CreatedById":196260,"CreatedDateTime":"2019-03-27T14:50:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223566602\u0022 data-ipsquote-contentid=\u0022183044\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221553316947\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/23/2019 at 4:55 AM, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGive a look on the Advanced Fly By Wire mod. I\u0027m pretty sure you will find it useful to your needs.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you for your reply Lisias, it was very helpful.\n\u003C/p\u003E\n\u003Cp\u003E\nTo those in the same or similar situation, this is what I have uncovered so far.\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems that the Unity executable will not load any image that is not cli/safe.\u00A0 Even if tools such as CorFlags are used to change the executable signature it seems that KSP will not run the code(I have yet to EXHAUSTIVLY test this but it certainly seems so for now).\n\u003C/p\u003E\n\u003Cp\u003E\nThe bigger problem though, even if one was willing to convert existing c\u002B\u002B code to cli/safe is that the Pdb2Mdb conversion tool does not seem to work correctly with c\u002B\u002B images.\n\u003C/p\u003E\n\u003Cp\u003E\nUse of a debugger is a red line for me; I must have access to this.\n\u003C/p\u003E\n\u003Cp\u003E\nMy current situation is that I need to modify Pdb2Mdb to properly work with c\u002B\u002B/cli or accept that I need to code this in C# or Visual Basic(more than likely) or some other .NET primary language.\n\u003C/p\u003E\n\u003Cp\u003E\nI will try and modify Pdb2Mdb and see if I get any luck there.\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-03-27T14:56:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223569748\u0022 data-ipsquote-contentid=\u0022183044\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221553698251\u0022 data-ipsquote-userid=\u0022196260\u0022 data-ipsquote-username=\u0022Gavin786\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Gavin786 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe bigger problem though, even if one was willing to convert existing c\u002B\u002B code to cli/safe is that the Pdb2Mdb conversion tool does not seem to work correctly with c\u002B\u002B images.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m an idiot!\n\u003C/p\u003E\n\u003Cp\u003E\nGive a peek on Principia too - hell of a project, they are reimplementing orbital mechanics using C\u002B\u002B.\u00A0So they solved this issue for sure!\n\u003C/p\u003E\n"}]}