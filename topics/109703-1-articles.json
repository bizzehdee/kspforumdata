{"TopicId":109703,"ForumId":15,"TopicTitle":"Emissive troubles","CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-05-17T20:13:38Z","PageNum":1,"Articles":[{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-05-17T20:13:38Z","Content":"\n\u003Cp\u003EI\u0027m having a puzzling issue here. I\u0027ve created an emissive heat animation with no problem, it works fine, I\u0027ve tested it in game, everything is great. Except I realized the models were no longer bump-mapped, so I went back and changed my shader from emissive/specular to emissive/bumped specular. However, any time I try and load the parts with the bumped specular shader, I get this error:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELoad(Model): HeatManagement/IAHMS/125AHMS/model\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\u003Cbr\u003E\u003Cbr\u003EFile error:\u003Cbr\u003EFailed to read past end of stream.\u003Cbr\u003E  at System.IO.BinaryReader.ReadByte () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at System.IO.BinaryReader.Read7BitEncodedInt () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at System.IO.BinaryReader.ReadString () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at A..ReadTextures (System.IO.BinaryReader br, UnityEngine.GameObject o) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at A..ReadChild (System.IO.BinaryReader br, UnityEngine.Transform parent) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at A.. (.UrlFile ) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\u003Cbr\u003E\u003Cbr\u003EModel load error in \u0027C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\GameData\\HeatManagement\\IAHMS\\125AHMS\\model.mu\u0027\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI see that it says something about a parent object, so I tried rebuilding the model from scratch twice now and it still throws the same error when trying to use the emissive/bumped specular shader. Works fine otherwise. Any thoughts? \u003C/p\u003E\u003Cp\u003ESince it seems someone always asks for it, here\u0027s a screenshot with the hierarchy, though I don\u0027t know that it will help:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/mFSwvq9.png\u0022 alt=\u0022mFSwvq9.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here\u0027s a zip file with the assets I\u0027m using in it: \u003Ca href=\u0022https://www.dropbox.com/s/xx377ewvw2r93ww/AHMS125.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/xx377ewvw2r93ww/AHMS125.zip?dl=0\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2015-05-17T20:54:36Z","Content":"\n\u003Cp\u003EIt looks like your model isnt exporting from unity properly, this is somewhat common when dealing with animation. The only sure-fire solution is to clean out the scene (delete all objects from the \u0022hierarchy\u0022 area and then add in the GameObject, re-add the part tools script to it, and then drag in your model again from assets and set everything up again.\u003C/p\u003E\u003Cp\u003EYou can usually notice that a .mu file isnt exporting properly because it will be 1 to 5kb or so in the export folder and it won\u0027t export the textures anymore (compare the \u0022last update\u0022 dates for both files, or just delete the textures and note that they don\u0027t come back)\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-17T21:39:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tiberion\u0022 data-cite=\u0022Tiberion\u0022\u003E\u003Cdiv\u003EIt looks like your model isnt exporting from unity properly, this is somewhat common when dealing with animation. The only sure-fire solution is to clean out the scene (delete all objects from the \u0022hierarchy\u0022 area and then add in the GameObject, re-add the part tools script to it, and then drag in your model again from assets and set everything up again.\u003Cp\u003EYou can usually notice that a .mu file isnt exporting properly because it will be 1 to 5kb or so in the export folder and it won\u0027t export the textures anymore (compare the \u0022last update\u0022 dates for both files, or just delete the textures and note that they don\u0027t come back)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESince this is a common problem, is there anything that can be done to avoid it altogether?\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2015-05-17T21:53:03Z","Content":"\n\u003Cp\u003ENot exactly sure what causes it, one reliable way to make it happen was to change the hierarchy of the objects in the scene after animating them (it breaks the animation and can leave the model in a broken state) but I\u0027ve seen it occur without doing that too.\u003C/p\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-05-18T00:07:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tiberion\u0022 data-cite=\u0022Tiberion\u0022\u003E\u003Cdiv\u003EYou can usually notice that a .mu file isnt exporting properly because ... it won\u0027t export the textures anymore (compare the \u0022last update\u0022 dates for both files, or just delete the textures and note that they don\u0027t come back)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis was it. The image I was using as the bump map was in dds format, and unity couldn\u0027t export it. Changing it to a PNG fixed it. \u003C/p\u003E\u003Cp\u003EThanks again!\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2015-05-18T01:06:21Z","Content":"\n\u003Cp\u003EAh thats a different issue then, part tools just didn\u0027t like the DDS texture; Until its updated everyone should keep their assets in unity in PNG/TGA/whatever and let Part tools export to one of the expected formats it can handle (it will convert between those it supports, just not DDS yet) and then once exported you can convert it to DDS using the DDS4KSP utility or your favorite image tool; as long as the filename minus the file extension is the same, it\u0027ll work \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}