{"TopicId":142192,"ForumId":29,"TopicTitle":"AddValueChangedDelegate \u0026amp; IPartCostModifier errors when reviving old code","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-06-21T17:24:25Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-06-21T17:24:25Z","Content":"\n\u003Cp\u003E\nOk, this is two questions in one post. \u00A0I\u0027m trying to revive an old and dead mod. \u00A0I\u0027ve gone through most of the code and I\u0027m down to 3 errors and 2 warnings and these are the ones Google is not giving me a solid answer on.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst one\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\u00A0public class ShipCost : PartModule, IPartCostModifier\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI get this error:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0027ShipCost\u0027\u00A0does not implement interface member \u0027IPartCostModifier.GetModuleCost(float, ModifierStagingSituation)\u0027 \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nand this error:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0027ShipCost\u0027 does not implement interface member \u0027IPartCostModifier.GetModuleCostChangeWhen()\u0027\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not sure if I\u0027m doing this right but, I changed this line\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Epublic float GetModuleCost(float stdCost)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nto this\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E        public float GetModuleCost(float stdCost, ModifierStagingSituation sit)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nand added in this\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E        public ModifierChangeWhen GetModuleCostChangeWhen()\n        {\n            throw new NotImplementedException();\n        }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nand it quit complaining.\n\u003C/p\u003E\n\u003Cp\u003E\nDid I get that right?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNext one is a good bit more complex.\n\u003C/p\u003E\n\u003Cp\u003E\nThe original modder appeared to be hijacking the Center of Lift marker in the editor in order to have it show Center of Buoyancy?.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EvesselOverlays = (EditorVesselOverlays)GameObject.FindObjectOfType(\n               typeof(EditorVesselOverlays));\n\n\t    if (vesselOverlays == null)\n                Log.post(\u0022Error. No vesselOverlays found\u0022, LogLevel.LOG_ERROR);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI run into problems here:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EvesselOverlays.toggleCoLbtn.AddValueChangedDelegate(this.CoLButtonClick);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI\u0027m guessing that the modder was adding this delegate to detect when the Center of Lift button in the Editor was clicked.\n\u003C/p\u003E\n\u003Cp\u003E\nBut, I get this error in the code:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u0027Button\u0027 does not contain a definition for \u0027AddValueChangedDelegate\u0027 and no extension method \u0027AddValueChangedDelegate\u0027 accepting a first argument of type \u0027Button\u0027 could be found (are you missing a using directive or an assembly reference?)\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFrom what I gather this is part of the EZGui. and is referenced in either Assembly-CSharp or Assembly-CSharp-firstpass. \u00A0I have both of those reference in my code but, AddValueChangedDelegate is simply not there. \u00A0Nothing I\u0027ve found says this has been removed. \u00A0Apparently the OLD version of EZGui used SetValueChangedDelegate, but that\u0027s not there either.\n\u003C/p\u003E\n\u003Cp\u003E\nAny ideas???\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-21T17:35:55Z\u0022 title=\u002206/21/2016 05:35  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 21, 2016\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2016-06-22T00:59:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222640129\u0022 data-ipsquote-contentid=\u0022142192\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466529865\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m guessing that the modder was adding this delegate to detect when the Center of Lift button in the Editor was clicked.\n\u003C/p\u003E\n\u003Cp\u003E\nBut, I get this error in the code:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u0027Button\u0027 does not contain a definition for \u0027AddValueChangedDelegate\u0027 and no extension method \u0027AddValueChangedDelegate\u0027 accepting a first argument of type \u0027Button\u0027 could be found (are you missing a using directive or an assembly reference?)\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIPartCostModifier was \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/8908\u0022 rel=\u0022external nofollow\u0022\u003Echanged\u003C/a\u003E. Some details can be found in the link. The other problem is that all EzGUI stuff was migrated over to the Unity UI. EzGUI is present in the assemblies but I don\u0027t believe it\u0027s used at all anywhere anymore. toggleCoLbtn is now a \u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/UI.Button.html\u0022 rel=\u0022external nofollow\u0022\u003EUnityEngine.UI.Button\u003C/a\u003E so you\u0027ll want to change AddValueChangedDelegate into .onClick.AddListener\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-06-22T12:23:35Z","Content":"\n\u003Cp\u003E\nThanks Evil!\u00A0\u00A0That\u0027ll help solve a couple of the 900\u002B errors I\u0027m wading through.\n\u003C/p\u003E\n"}]}