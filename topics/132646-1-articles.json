{"TopicId":132646,"ForumId":69,"TopicTitle":"KSP 1.0.5 Apoapsis and Periapsis Changing when Pitching Spacecraft","CreatedByName":"kysam2","CreatedById":158945,"CreatedDateTime":"2016-02-21T16:20:47Z","PageNum":1,"Articles":[{"CreatedByName":"kysam2","CreatedById":158945,"CreatedDateTime":"2016-02-21T16:20:47Z","Content":"\n\u003Cp\u003E\nMy apoapsis and periapsis are changing when I turn spacecraft. Any help would be appreciated!!!\n\u003C/p\u003E\n"},{"CreatedByName":"Evanitis","CreatedById":145424,"CreatedDateTime":"2016-02-21T16:27:48Z","Content":"\n\u003Cp\u003E\nThat\u0027s kinda\u0027 normal. RCS thrusters or reaction wheels apply force to the spacecraft, and any force modifies your orbit.\n\u003C/p\u003E\n"},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2016-02-22T13:33:26Z","Content":"\n\u003Cp\u003E\nRotational force should not affect you orbit. Also, my orbits tend to change even when ship is completely passive. Most of the time it just drifts a bit up and down, but some orbits are particularly unstable. Low Mun orbit for one - I frequently use 10-12km parking orbit for phasing to station higher up and I can attest it is actually impossible to keep anything there without timewarp. Effect disappears when on rails. I had one case when I left ship there and went away for about 20 minutes and\u00A0when I got back it was falling onto surface\u2026\n\u003C/p\u003E\n\u003Cp\u003E\nIt is probably product of floating\u00A0point calculations inaccuracy.\n\u003C/p\u003E\n"},{"CreatedByName":"MrWolf83","CreatedById":141199,"CreatedDateTime":"2016-02-22T14:46:22Z","Content":"\n\u003Cp\u003E\nI had this same issue last night and went back into ship view, and realized I had three reaction wheels on ship and shut off all but one, problem solved.\n\u003C/p\u003E\n"},{"CreatedByName":"Zhetaan","CreatedById":125721,"CreatedDateTime":"2016-02-22T14:52:03Z","Content":"\n\u003Cp\u003E\nIt\u0027s floating-point inaccuracy, and also I recall that KSP calculates off-rails apses based on the root part, rather than the centre of mass.\u00A0\u00A0Since it\u0027s rare for the root\u00A0part to be at the centre of mass, rotation (which is based on the centre of mass) changes the root part\u0027s\u00A0position with respect to the orbit, thereby changing the calculated orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nIt would be difficult to test whether they\u0027ve addressed that because using a single command pod, for example, wouldn\u0027t eliminate the floating-point problem. \u00A0Maybe a command pod on one end of a long rotating boom with a couple of full Kerbodyne tanks at the other would do the trick?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-02-22T14:54:15Z\u0022 title=\u002202/22/2016 02:54  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 22, 2016\u003C/time\u003E by Zhetaan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-02-22T14:55:21Z","Content":"\n\u003Cp\u003E\nFloating point inaccuracy is a part of it, the major reason however is \u003Ca href=\u0022https://en.wikipedia.org/wiki/Numerical_integration\u0022 rel=\u0022external nofollow\u0022 target=\u0022_blank\u0022\u003E\u003Cspan style=\u0022text-decoration:underline\u0022\u003Ethe limitation of numeric integration\u003C/span\u003E\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nYour Apoapsis and Periapsis are not numbers held in a variable, they are recalculated every physics frame.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd there\u0027s a lot of factors involved, you are not the center of the game universe, though you\u0027re never too far from it thanks to the Krakensbane fix.\n\u003C/p\u003E\n\u003Cp\u003E\nSo the calculation has to use your angle and magnitude (distance) from the 0,0,0 origin point in the scene, your crafts direction of travel and speed, as well as any acceleration that may be applied.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd it has to take into account the angle and distance of the body your orbit is relative to, the difference between them and apply gravity on your craft, this changes your crafts direction (vector) and speed.\n\u003C/p\u003E\n\u003Cp\u003E\nWith these KSP can start calculating the various \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_elements\u0022 rel=\u0022external nofollow\u0022\u003Eorbital elements\u003C/a\u003E, and find your Apoapsis and Periapsis.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the next physics tick it does all this again.\n\u003C/p\u003E\n\u003Cp\u003E\nBut because of numeric integration the results are slightly different each time.\n\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2016-02-22T15:32:50Z","Content":"\n\u003Cp\u003E\nOne thing to remember is that your cabin or core is often not at the centre of mass of your craft so when you rotate it moves around the centre of mass meaning it will appear to be moving faster or slower than your craft is actually going which will give it a different Ap and Pe.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is why, when you rotate, your Ap and Pe change but return back to more accurate numbers when you stop rotating without having to resort to blaming floating point issues.\n\u003C/p\u003E\n\u003Cp\u003E\nTechnically it\u0060s a bug because the Ap and Pe should be taken from the movement of the centre of mass of your craft but instead it seem plain that it is taken from the movement of your probe core or cabin leading to inaccuracy when they are not at the centre of rotation for your whole craft..\n\u003C/p\u003E\n"},{"CreatedByName":"StarManta","CreatedById":57805,"CreatedDateTime":"2016-02-22T18:29:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222424143\u0022 data-ipsquote-contentid=\u0022132646\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221456152921\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFloating point inaccuracy is a part of it, the major reason however is \u003Ca href=\u0022https://en.wikipedia.org/wiki/Numerical_integration\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Ethe limitation of numeric integration\u003C/span\u003E\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThose two things are part of it, but not all of it.\u00A0There\u0027s no way simple arbitrary math error\u00A0- whether due to FP inaccuracy or something more mathematically fundamental - accounts for \u003Cstrong\u003Eall\u003C/strong\u003E observed movements of faraway nodes. Those would lead only to random-looking \u0022jitter\u0022. And yes, we see that. But there are\u00A0\u003Cem\u003Ealso\u003C/em\u003E\u00A0more predictable inaccuracies when rotational force is being applied to the craft, especially in faraway nodes that are especially sensitive to small changes, such as interplanetary captures. I have \u00A0taken advantage of this to fine-tine encounters spending no fuel\u00A0on occasion - because it\u0027s predictable, I could hold the rotation keys to \u0022force\u0022 the path towards one direction or another, and it would sort of oscillate as the craft rotated with the button held down. By entering timewarp at the most desirable point in the oscillation (zeroing out rotation immediately), then repeating the process, I could achieve some significant changes using only reaction wheels.\u00A0The path generally \u0022bounces\u0022 back after the key is released, indication it\u0027s the rotational force causing the error and not the rotation itself.\n\u003C/p\u003E\n\u003Cp\u003E\nI think \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/125721-zhetaan/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125721\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125721-zhetaan/\u0022\u003E@Zhetaan\u003C/a\u003E\u00A0is on the right track with it being a discrepancy between the CoM and the root part. I\u0027ve noticed this most often on big vessels - when rotating, it\u0027s easy to see how the root part (at the front of the ship) would have a different world velocity than the CoM when rotating. If the patched conics are using the root part\u0027s world velocity to calculate the trajectory, this would align with what I\u0027ve seen of this issue.\n\u003C/p\u003E\n"},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2016-02-22T18:57:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222424143\u0022 data-ipsquote-contentid=\u0022132646\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221456152921\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u2026On the next physics tick it does all this again\u2026\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhich is what bugs me. If ship is outside atmosphere and all engines are off, it could be effectively \u0022on rails\u0022. AFAIK this is why timewarping mitigates this problem.\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-02-22T19:01:18Z","Content":"\n\u003Cp\u003E\nOther craft are, but your craft could change its orientation at any time, you can go to warp and be put on rails but then you have no control.\n\u003C/p\u003E\n\u003Cp\u003E\nPlayers often think it\u0027d be fine to have the ship on rails when it\u0027s not receiving input but there can be a big jump in apoapsis when coming off rails, much more than being in physics time all the time.\n\u003C/p\u003E\n\u003Cp\u003E\nYour orbits would be massively more jumpy if you were going on and off rails with every movement.\n\u003C/p\u003E\n"},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2016-02-23T13:35:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222424549\u0022 data-ipsquote-contentid=\u0022132646\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221456167678\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOther craft are, but your craft could change its orientation at any time, you can go to warp and be put on rails but then you have no control.\n\u003C/p\u003E\n\u003Cp\u003E\nPlayers often think it\u0027d be fine to have the ship on rails when it\u0027s not receiving input but there can be a big jump in apoapsis when coming off rails, much more than being in physics time all the time.\n\u003C/p\u003E\n\u003Cp\u003E\nYour orbits would be massively more jumpy if you were going on and off rails with every movement.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for clarifying that one Sal. I knew there would be simple reason, but could not think\u00A0of one. Silly of me, now I remeber Harvester mentioning it in devnotes once.\n\u003C/p\u003E\n"},{"CreatedByName":"kysam2","CreatedById":158945,"CreatedDateTime":"2016-02-27T17:14:51Z","Content":"\n\u003Cp\u003E\nThank you all for the info, but this still doesn\u0027t fix the problem. It\u0027s really not when I\u0027 min Kerbin orbit that\u0027s annoying, but when I have a interception with a perhaps is of another planet and moving around changes that by many kilometers, which makes aerobraking quite difficult.\n\u003C/p\u003E\n"},{"CreatedByName":"FullMetalMachinist","CreatedById":156531,"CreatedDateTime":"2016-02-27T17:25:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222432288\u0022 data-ipsquote-contentid=\u0022132646\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221456593291\u0022 data-ipsquote-userid=\u0022158945\u0022 data-ipsquote-username=\u0022kysam2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, kysam2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThank you all for the info, but this still doesn\u0027t fix the problem. It\u0027s really not when I\u0027 min Kerbin orbit that\u0027s annoying, but when I have a interception with a perhaps is of another planet and moving around changes that by many kilometers, which makes aerobraking quite difficult.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m afraid that there really isn\u0027t a \u0022fix\u0022 for this. As those above have said, it comes from the way that KSP calculates your obits while in different situations.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs for interplanetary trips, you can minimize the errors in your obit pretty easily. Just get your encounter \u0022good enough\u0022 while in Kerbin\u0027s SOI, then when you\u0027re about halfway to the destination planet, do a minor correction burn. Then right when you enter the destination planet\u0027s SOI you should be going (relatively) slowly, and you can do a final correction burn for minimal dV.\u00A0\n\u003C/p\u003E\n"}]}