{"TopicId":170379,"ForumId":70,"TopicTitle":"What is the quickest way to determine which mod is causing a lag spike issue?","CreatedByName":"aluc24","CreatedById":152712,"CreatedDateTime":"2018-02-01T19:57:58Z","PageNum":1,"Articles":[{"CreatedByName":"aluc24","CreatedById":152712,"CreatedDateTime":"2018-02-01T19:57:58Z","Content":"\n\u003Cp\u003E\nHi, guys. First of all, let me note that this\u003Cstrong\u003E ISN\u0027T garbage collection\u003C/strong\u003E issue. I have MemGraph to monitor GC, and the lag spikes I\u0027m having are far more frequent than the rare GC spikes. The spikes I\u0027m having are not even showing up on MemGraph. They happen every 3-4 seconds in flight, \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E, \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E, everywhere.\n\u003C/p\u003E\n\u003Cp\u003E\nI spent \u003Cstrong\u003E3 days now\u003C/strong\u003E, hunting for issue - removing and adding mods one by one, testing, testing, testing... And I can\u0027t narrow it down. It\u0027s as if it happens randomly due to some mod combination or something. I have more than 60 mods, so as you can imagine, finding the cause by trial-and-error is like finding a needle in a haystack. I tried my best, but it\u0027s just impossible.\n\u003C/p\u003E\n\u003Cp\u003E\nI have looked over the logs, and they are clean. Vanilla KSP runs without these lag spikes, so it\u0027s not my PC issue either.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not asking for someone to find the problem for me... I\u0027m just asking what alternative ways there are to hunt down the cause for such a problem. Because I\u0027m totally frustrated, wasted more than 20 hours by loading/unloading mods, and I\u0027m still nowhere closer to finding the issue.\n\u003C/p\u003E\n\u003Cp\u003E\nCan someone please give some advice?\n\u003C/p\u003E\n"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2018-02-01T21:33:42Z","Content":"\n\u003Cp\u003E\nFast way is to order mods in some (maybe alphabetic) order and use binary search: you remove half of the list and load the game (some test sandbox save with test ship and stock parts set up) and look. If lag is gone, return the removed half and remove the one on wich you have no lag. Recursively split the laggy half in two until you have found the offending mod or mod bundle.\n\u003C/p\u003E\n"},{"CreatedByName":"aluc24","CreatedById":152712,"CreatedDateTime":"2018-02-01T21:50:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223283422\u0022 data-ipsquote-contentid=\u0022170379\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517520822\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 minutes ago, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFast way is to order mods in some (maybe alphabetic) order and use binary search: you remove half of the list and load the game (some test sandbox save with test ship and stock parts set up) and look. If lag is gone, return the removed half and remove the one on wich you have no lag. Recursively split the laggy half in two until you have found the offending mod or mod bundle.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is exactly what I did. But it is not so simple. Some of the mods are dependent on others, so removing or adding them without taking that into consideration causes missing the issue. Not to mention that the game sometimes doesn\u0027t load at all or gives performance issues because of missing dependencies. Besides, I have a hunch that it is somehow related to the savegame. Loading a savegame with only half the mods it was creating with deletes some part of the savegame, and when mod is added back later, the issue might seem to disappear for that moment, making it impossible to tie to a specific mod that you just added.\n\u003C/p\u003E\n\u003Cp\u003E\nIn other words, I tried this for 3 days now, and it got me nowhere.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-01T21:52:01Z\u0022 title=\u002202/01/2018 09:52  PM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 1, 2018\u003C/time\u003E by aluc24\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2018-02-01T21:54:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223283450\u0022 data-ipsquote-contentid=\u0022170379\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517521836\u0022 data-ipsquote-userid=\u0022152712\u0022 data-ipsquote-username=\u0022aluc24\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, aluc24 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLoading a savegame with only half the mods it was creating with deletes some part of the savegame\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s more convenient to use new blank save with no vessels at all. If the lag is only in old saves and it doesn\u0027t appear in blank save .... I\u0027m afraid there\u0027s no trivial way to search.\n\u003C/p\u003E\n"},{"CreatedByName":"aluc24","CreatedById":152712,"CreatedDateTime":"2018-02-01T21:57:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223283455\u0022 data-ipsquote-contentid=\u0022170379\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517522073\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u0027s more convenient to use new blank save with no vessels at all. If the lag is only in old saves and it doesn\u0027t appear in blank save .... I\u0027m afraid there\u0027s no trivial way to search.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere must be something. I mean, every time KSP or any of the mods update, there\u0027s like 30% chance that there will be some issue. I can\u0027t spend days each time hunting for whatever is causing the problem. That\u0027s what logs and stuff are for.\n\u003C/p\u003E\n"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2018-02-01T22:05:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223283460\u0022 data-ipsquote-contentid=\u0022170379\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517522232\u0022 data-ipsquote-userid=\u0022152712\u0022 data-ipsquote-username=\u0022aluc24\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, aluc24 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI can\u0027t spend days each time hunting for whatever is causing the problem. That\u0027s what logs and stuff are for.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThings work well when someone made an effort to make them work well. Noone has done that for the combination of mods you use, on hardware you use, on KSP version you use. Such is the drawback of playing a modded game.\n\u003C/p\u003E\n\u003Cp\u003E\nI can only advise careful, manual management of your mod set and self-restraint. \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E is a dangerous ally. Less mods = less things to break. No autoupdates - no surprises. There is a notable portion of players that still play pre-1.2.0 KSP,\u00A0 because they value stability of their experience more than new features.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-01T22:05:41Z\u0022 title=\u002202/01/2018 10:05  PM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 1, 2018\u003C/time\u003E by Boris-Barboris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"aluc24","CreatedById":152712,"CreatedDateTime":"2018-02-01T22:06:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223283468\u0022 data-ipsquote-contentid=\u0022170379\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517522721\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThings work well when someone made an effort to make them work well. Noone has done that for the combination of mods you use, on hardware you use, on KSP version you use. Such is the drawback of playing modded game.\n\u003C/p\u003E\n\u003Cp\u003E\nI can only advise careful, manual management of your mod set and self-restraint. \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E is a dangerous ally. Less mods = less things to break. No autoupdates - no surprises. There is a notable portion of players that still play pre-1.2.0 KSP,\u00A0 because they value stability of their experience more than new features.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you for your insight. If anyone else can give me some more advice on how to track down the problem, I would appreciate it very much.\n\u003C/p\u003E\n"},{"CreatedByName":"aluc24","CreatedById":152712,"CreatedDateTime":"2018-02-02T01:17:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223283468\u0022 data-ipsquote-contentid=\u0022170379\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517522721\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThings work well when someone made an effort to make them work well. Noone has done that for the combination of mods you use, on hardware you use, on KSP version you use. Such is the drawback of playing a modded game.\n\u003C/p\u003E\n\u003Cp\u003E\nI can only advise careful, manual management of your mod set and self-restraint. \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E is a dangerous ally. Less mods = less things to break. No autoupdates - no surprises. There is a notable portion of players that still play pre-1.2.0 KSP,\u00A0 because they value stability of their experience more than new features.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFinally, I found it!!! It was RealPlume (or it\u0027s dependency SmokeScreen). Just telling in case someone else might have this issue. I\u0027m going to report this to the RealPlume maintainer.\n\u003C/p\u003E\n"}]}