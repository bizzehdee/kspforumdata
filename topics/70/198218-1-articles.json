{"TopicId":198218,"ForumId":70,"TopicTitle":"Extreme lag when panning around with the mouse when flying (Linux, Modded)","CreatedByName":"HerrCrazi","CreatedById":180017,"CreatedDateTime":"2020-11-20T06:00:44Z","PageNum":1,"Articles":[{"CreatedByName":"HerrCrazi","CreatedById":180017,"CreatedDateTime":"2020-11-20T06:00:44Z","Content":"\n\u003Cp\u003E\nAloha !\n\u003C/p\u003E\n\u003Cp\u003E\nI am suffering extreme lag (down under 3 FPS) when panning around the view with my mouse while flying in the atmosphere. Panning with the arrows keys doesn\u0027t cause such a massive drop (there is still a slight drop in FPS, by something like 5 to 10, negligible). I\u0027m pretty surprised, given that my hardware is perfectly suited to play KSP (I run almost all latest games smoothly at 60FPS, including RDR2 or AC Valhalla), and I don\u0027t remember having this issue in the past. My average FPS is around 50 while flying in the atmosphere, 60 anywhere else. The plane I\u0027ve been using is rather small, 20 parts or so.\u00A0 The same lag spikes also happens when I\u0027m in space (on rails) and I bring back Kerbin in the viewport (but not when Kerbin is either entirely out or in the viewport).\n\u003C/p\u003E\n\u003Cp\u003E\nThat led me to think that heavy lag spikes occurs whenever large areas of Kerbin are suddenly displayed or hidden, like by panning around in flight or bringing back Kerbin in view.\u00A0 Small movements are most of the time unaffected, and using the keys moves the view slower, making terrain being shown in view at a slower rate.\n\u003C/p\u003E\n\u003Cp\u003E\nI may try reproducing this later on Windows. I have the following setup:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nGPU : Nvidia GTX 1660TI - 6gb VRAM\n\u003C/li\u003E\n\u003Cli\u003E\nCPU : i5 9400H\n\u003C/li\u003E\n\u003Cli\u003E\nRAM : 24 gb (one 8gb and one 16gb)\n\u003C/li\u003E\n\u003Cli\u003E\nSome visual mods are installed : Scatterer,\u00A0 Scatterer Sunflares, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E, Planetshine, TUFX.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThanks by advance for your help \u0026amp; consideration.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003EF.E.\u003C/em\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-11-20T06:01:11Z\u0022 title=\u002211/20/2020 06:01  AM\u0022 data-short=\u00223 yr\u0022\u003ENovember 20, 2020\u003C/time\u003E by HerrCrazi\u003C/strong\u003E\n\u003Cbr\u003Emarkdown not suported\n\u003C/span\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-11-20T08:10:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223883906\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605852044\u0022 data-ipsquote-userid=\u0022180017\u0022 data-ipsquote-username=\u0022HerrCrazi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, HerrCrazi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am suffering extreme lag (down under 3 FPS) when panning around the view with my mouse\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve encountered similar issues in the past, and it came down to Unity not liking the 1000Hz reporting rate of my mouse. Might be worth a look.\u003Cbr\u003E\nThe relevant info for generic input devices can be found in the usual places (i.e.\u00A0 ArchWiki), if you have a fancy gaming mouse you\u0027ll want something like piper/libratbag or an appropriate model specific configuration tool.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223883906\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605852044\u0022 data-ipsquote-userid=\u0022180017\u0022 data-ipsquote-username=\u0022HerrCrazi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, HerrCrazi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nScatterer,\u00A0 Scatterer Sunflares, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E, Planetshine, TUFX.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAlso worth noting that scatterer performance on GNU/Linux (or OpenGL in general) sucks monkey-balls. So much so that I\u0027ve given up running it, it\u0027s not worth the performance hit. Scatterer is a \u003Cem\u003E50%\u003C/em\u003E framerate tax here, on a 1070 and a 4.3Ghz I7.\u003Cbr\u003E\nAFAIK TUFX doesn\u0027t work on OpenGL at all. At least it didn\u0027t the last time I looked, and the thread still states DX11 only. I\u0027ll be pleasantly surprised if you have evidence to the contrary though.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223883906\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605852044\u0022 data-ipsquote-userid=\u0022180017\u0022 data-ipsquote-username=\u0022HerrCrazi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, HerrCrazi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nmy hardware is perfectly suited to play KSP\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNow pull the other one, it\u0027s got bells on \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003ENo\u003C/em\u003E hardware is perfectly suited to play KSP, the mostly-single-threaded cpu-crippling physics engine sees to that. Your CPU ain\u0027t bad mind, so long as it\u0027s not throttling under load... being a mobile chip and all.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-11-20T08:21:54Z\u0022 title=\u002211/20/2020 08:21  AM\u0022 data-short=\u00223 yr\u0022\u003ENovember 20, 2020\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HerrCrazi","CreatedById":180017,"CreatedDateTime":"2020-11-20T14:51:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223883935\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605859825\u0022 data-ipsquote-userid=\u002269272\u0022 data-ipsquote-username=\u0022steve_v\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, steve_v said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve encountered similar issues in the past, and it came down to Unity not liking the 1000Hz reporting rate of my mouse. Might be worth a look.\u003Cbr\u003E\nThe relevant info for generic input devices can be found in the usual places (i.e.\u00A0 ArchWiki), if you have a fancy gaming mouse you\u0027ll want something like piper/libratbag or an appropriate model specific configuration tool.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh. My mouse is a Corsair Harpoon (forgot the exact model), but I do have a configuration tool for it working on Linux (namely, \u003Cem\u003Eckb-next\u003C/em\u003E). Should I look into changing something in there?\n\u003C/p\u003E\n\u003Cp\u003E\nAnd there\u0027s the fact that, if Kerbin is not in view, wobbling the mouse around doesn\u0027t destroys my framerate, for it only happens when Kerbin, or parts of Kerbin, are entering the view. I\u0027d suppose something like caching/rendering terrain that is out of the view and needs to be reloaded/reprocessed as it enters the view and needs to be rendered by the game engine.\n\u003C/p\u003E\n\u003Cp\u003E\nScatterer alone hits my performance hard, but since I can still sustain \u0022acceptable\u0022 framerates (from 60 to 40 depending on the situation), and that large crafts around 1000 parts \u003Cem\u003Ealways \u003C/em\u003Eresults in a slideshow, even on a vanilla install, I\u0027d rather keep it than lay my eyes once more on the astonishingly terrible stock water texture.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223883935\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605859825\u0022 data-ipsquote-userid=\u002269272\u0022 data-ipsquote-username=\u0022steve_v\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, steve_v said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cem\u003ENo\u003C/em\u003E hardware is perfectly suited to play KSP\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI rather meant that it is within and above the recommended specs. Of course there is no computer on this planet being able to play KSP perfectly. This game is so heavy in resources and so terribly optimised that it would require an infinite processing power ; or at least extremely expensive hardware to flawlessly cover most of the scenarios encountered by players who pushes the game farther than the standard, moderately sized spaceship on rails.\n\u003C/p\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-11-20T22:11:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223884006\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605883864\u0022 data-ipsquote-userid=\u0022180017\u0022 data-ipsquote-username=\u0022HerrCrazi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, HerrCrazi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nShould I look into changing something in there?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAssuming that mouse has adjustable polling rate, and a quick poke about suggests it does, lower it from the default 1000Hz to 500 or 250.\u00A0 \u003Cs\u003EI can\u0027t tell you whether ckb-next supports changing this as I don\u0027t have any compatible hardware\u003C/s\u003E, looks like there are instructions in the ckb-daemon \u003Ca href=\u0022https://github.com/mattanger/ckb-next/wiki/CKB-Daemon-Manual\u0022 rel=\u0022external nofollow\u0022\u003Emanual\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223884006\u0022 data-ipsquote-contentid=\u0022198218\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221605883864\u0022 data-ipsquote-userid=\u0022180017\u0022 data-ipsquote-username=\u0022HerrCrazi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, HerrCrazi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nif Kerbin is not in view, wobbling the mouse around doesn\u0027t destroys my framerate, for it only happens when Kerbin, or parts of Kerbin, are entering the view.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLike I said, it\u0027s just something to try.\u00A0\u003Cbr\u003E\nIt might have nothing to do with it, but it doesn\u0027t hurt to try and it sounds exactly like what I was seeing when I switched from a classic intellimouse to a SteelSeries Sensei. Reducing polling rate to 250Hz solved the problem\u00A0 here. Reports of high polling rates causing issues are not without precedent on the \u0027net at large either.\u003Cbr\u003E\nIf you have one laying around,\u00A0 another quick test would be to switch to a generic non-gaming mouse and see if it improves the situation.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOther than that, yeah, your machine should run KSP fine. Testing without mods is of course also worthwhile.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-11-20T22:26:52Z\u0022 title=\u002211/20/2020 10:26  PM\u0022 data-short=\u00223 yr\u0022\u003ENovember 20, 2020\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HerrCrazi","CreatedById":180017,"CreatedDateTime":"2020-11-21T05:05:10Z","Content":"\n\u003Cp\u003E\nI have tested again, on Windows, having AVP installed on top of \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, and the issue did not appear there. In both cases I have also tested with a generic ultra-cheap desktop mouse and noted no improvement on Linux (the Corsair mouse was unplugged and ckb was disabled and stopped before launching the game). I shall try reinstalling my graphics mods on Linux.\n\u003C/p\u003E\n\u003Cp\u003E\nOh, should\u0027ve mentioned that I have freshly reinstalled my graphics drivers (using nvidia-drivers-455, the latest).\n\u003C/p\u003E\n"},{"CreatedByName":"HerrCrazi","CreatedById":180017,"CreatedDateTime":"2021-04-11T02:45:34Z","Content":"\n\u003Cp\u003E\nUpdates on this issue, hence reviving this thread.\u003Cbr\u003E\u003Cbr\u003E\nThe problem seemingly disappeared using the latest version of the game and reinstalling all mods. I\u0027ll now mark it as solved, albeit I haven\u0027t been able to concretely identify the exact point of failure.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for all those who helped !\n\u003C/p\u003E\n"}]}