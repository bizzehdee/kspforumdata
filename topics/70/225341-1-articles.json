{"TopicId":225341,"ForumId":70,"TopicTitle":"KSP1 with about 170 mods and 32 gb of DDR5 RAM just showed a major slow up on my i9-13900KF Desktop PC","CreatedByName":"rnyboy","CreatedById":157958,"CreatedDateTime":"2024-07-05T20:22:17Z","PageNum":1,"Articles":[{"CreatedByName":"rnyboy","CreatedById":157958,"CreatedDateTime":"2024-07-05T20:22:17Z","Content":"\n\u003Cp\u003E\nYesterday I added two additional mods that resulted in a drastic increase in app and craft load times and a lot of stuttering during play until KSP would lock up.\u00A0 I really don\u0027t want to mention the mods by name because I don\u0027t think they were at fault but seemed to be the \u0022straw that broke the camel\u0027s back\u0022 in that before the two new mods were added I could get to the start screen in about 7 minutes and have about 5 gb of my 32 gb\u00A0 of RAM initially still left free and could work in KSP for something like six or so hours with very little stuttering until getting into the mid to upper 90% of RAM used and then things start to quickly bog down and I\u00A0 either quit and restarted or eventually get the \u0022Unexpected Stack Overflow\u0022 error warning from Unity Analytics.\u00A0 When KSP is not running the system plus other processes uses around 27% of the available RAM.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter installing those two new mods, one with a fair number of new parts and the other with increased animation effects, the load times went to about 10 minutes and about 98% of memory was being used right at the start screen.\u00A0 Loading up a craft would take a few minutes when it used to take maybe 30s up to 45s on a bad day.\u00A0 During the craft loading free memory would often be jumping into the few hundred mb numbers when before it would pretty much stay in the low gbs at worse.\u00A0 \u00A0When in flight mode there was 98\u002B% of total RAM used with quite a bit of stuttering and after about 15 or so minutes KSP would lock up.\n\u003C/p\u003E\n\u003Cp\u003E\nThis morning, I uninstalled the two new apps and things went back to normal.\u00A0 The memory usage stays around 85% while in flight with no stuttering and smooth graphics with the physics time scale in the green.\u00A0 So, I\u0027m thinking I may bite the bullet and upgrade from 32gb of RAM to 64gb considering what I\u0027ve seen suggests I\u0027m bumping up against a lack of free RAM ceiling.\u00A0 \u00A0Just wondering if this RAM upgrade sounds about right based on the above recent observations or if there is a better solution that doesn\u0027t involve reducing the number of mods.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222024-07-05T20:35:17Z\u0022 title=\u002207/05/2024 08:35  PM\u0022 data-short=\u0022Jul 5\u0022\u003EJuly 5\u003C/time\u003E by rnyboy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Phoenix-D","CreatedById":9395,"CreatedDateTime":"2024-07-05T22:24:28Z","Content":"\n\u003Cp\u003E\nTry the Memgraph mod if you haven\u0027t already. It improves garbage collection somewhat which can reduce memory usage.\n\u003C/p\u003E\n\u003Cp\u003E\nYou could also try lowering texture quality. Also try installing those two mods alone and see if they cause the same issue.\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2024-07-06T00:44:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224404843\u0022 data-ipsquote-contentid=\u0022225341\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221720210937\u0022 data-ipsquote-userid=\u0022157958\u0022 data-ipsquote-username=\u0022rnyboy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, rnyboy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ntwo new mods, one with a fair number of new parts\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEvery part that you add takes up more RAM and adds time to the game\u0027s startup.\n\u003C/p\u003E\n"},{"CreatedByName":"rnyboy","CreatedById":157958,"CreatedDateTime":"2024-07-06T16:54:58Z","Content":"\n\u003Cp\u003E\nMemgraph sounds interesting.\u00A0 I\u0027ll have to try that.\u00A0 Thanks.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#2980b9;\u0022\u003E(Edit:\u00A0 I looked up MemGraph and linuxgurugamer pointed to another mod called HeapPadder.\u00A0 It appears to be something like a MemGraph-lite.\u00A0 I think I\u0027ll give that a try first.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#2980b9;\u0022\u003E2nd edit to the 1st edit...\u00A0 \u00A0Looks like MemGraph is a dependency of HeapPadder in that \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003E\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E\u003C/abbr\u003E installed both.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#2980b9;\u0022\u003E3rd Edit:\u00A0 After installing MemGraph, and using it for ~30 minutes, I realized this won\u0027t solve the issue at the moment.\u00A0 The real issue seems to be bumping up too close to my max available 32gb of RAM and adding to the heap reduces that small headroom even further.\u00A0 \u00A0My install of KSP1 is using up around 25gb of RAM at the start, so not small.\u00A0 \u00A0I think I\u0027m going to bite the bullet and double my RAM to 64 gb and then reinvestigate MemGraph because I think that should reduce whatever stutters I do get to a lower number over time. )\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI really don\u0027t want to lower the texture quality because I like the looks and generally get good fps.\u00A0 I have an ~650 part ship (Habtech ISS with a docked Benjee10 Space Shuttle) in orbit and the physics slows from 1s in ksp time being equal to1s in real time to 1s ksp being less than 2s in real time.\u00A0 I can live with that.\u00A0 Shortly after liftoff from an alphamense\u00A0launchpad a ~150 part BDB Apollo Saturn V shows around 30 fps the couple of times I\u0027ve checked and once in orbit I get about 40 fps.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m still kind of leaning to upgrade the RAM to 64gb too.\u00A0 I like to post process astronomy images and sometimes videos and generally the more RAM the better for that as well.\n\u003C/p\u003E\n\u003Cp\u003E\nI only upgraded from KSP v1.11.2 to 1.12.5 about two weeks ago because all the mods I was using finally had 1.12\u002B versions.\u00A0 I\u0027m now in the process of trying to get orbiting craft, landers, rovers, and bases back to the way I like it.\u00A0 Like usual, after a major upgrade, many of my v1.11.2 craft files have missing or invalid parts and I need to redo the important ones.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222024-07-06T18:39:37Z\u0022 title=\u002207/06/2024 06:39  PM\u0022 data-short=\u0022Jul 6\u0022\u003EJuly 6\u003C/time\u003E by rnyboy\u003C/strong\u003E\n\u003Cbr\u003EJust found HeapPadder...\n\u003C/span\u003E\n"},{"CreatedByName":"rnyboy","CreatedById":157958,"CreatedDateTime":"2024-07-11T22:48:23Z","Content":"\n\u003Cp\u003E\nThought I\u0027d finish this topic with the results after upgrading to 64gb.\u00A0 I\u0027m now running between 175 and 180 mods including MemGraph.\u00A0 The padheap.cfg is fixed at 16384 (probably could lower it actually) with \u0022visible = true\u0022 and \u0022applyPadding = true\u0022 in the settings.cfg .\u00A0 The total memory used was 82% with KSP using about 28 gb of memory when the image below was saved.\u00A0 I\u0027ve seen as high as 87% memory used, so between 10% and 15% of total RAM is still free.\u00A0 I\u0027m sure I could have quite a bit less free because that\u0027s a lot of free RAM for Windows and the other apps running in the background.\n\u003C/p\u003E\n\u003Cp\u003E\nTo test the new 64gb setup I\u0027ve played with quite a few craft using as few as 96 parts to over 250 from launch to final orbit.\u00A0 \u00A0I also have an over 650 part Hab Tech2 ISS with US and Russian parts plus a Dragon-2 cargo ship docked to it in a 100km orbit around Kerbin and so far time between stutters is pretty much always longer than a minute and often more than two minutes.\u00A0 The stutter time for a garbage-clean is under a second and is typically not even noticed unless I happen to be doing something at the time.\n\u003C/p\u003E\n\u003Cp\u003E\nAt the moment KSP is behaving very nicely after the new RAM upgrade.\u00A0 I haven\u0027t had a single hiccup or crash due to a memory overflow after playing for many hours straight.\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#2980b9;\u0022\u003EEdit:\u00A0 I meant to add that the total loading time is long, about 7 minutes, but that\u0027s a onetime thing per playing session.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#2980b9;\u0022\u003EEdit #2:\u00A0 I just loaded up KSP1 and went to the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E.\u00A0 Shortly after that I looked and % Memory was 88% and Ram used was 47gb.\u00A0 That\u0027s a new observed high but it typically drops down to around 80% after a while of playing and very slowly increases with time played.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe following image gives the frame-rate and memgraph data while the Artemis Construction Kit\u0027s ICPS and Orion is in Kerbin orbit...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022EGU2eU8.jpg\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002285.50\u0022 height=\u0022834\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/EGU2eU8.jpg\u0022\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222024-07-12T14:13:11Z\u0022 title=\u002207/12/2024 02:13  PM\u0022 data-short=\u0022Jul 12\u0022\u003EJuly 12\u003C/time\u003E by rnyboy\u003C/strong\u003E\n\u003Cbr\u003EAdded load time.\n\u003C/span\u003E\n"}]}