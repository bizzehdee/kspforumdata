{"TopicId":86800,"ForumId":70,"TopicTitle":"kOS Help?","CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-10-10T15:33:28Z","PageNum":1,"Articles":[{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-10-10T15:33:28Z","Content":"\n\u003Cp\u003EI wrote these two programs as a test launcher for the kOS mod. I\u0027m in version 0.24.2, and as far as I know this is not a bug.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ecircularize\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//Circularization Program.\u003Cbr\u003E//\u003Cbr\u003E//declare parameter gparam.\u003Cbr\u003E//declare parameter timetoapo.\u003Cbr\u003E//declare parameter altitude.\u003Cbr\u003E//declare parameter apospeed.\u003Cbr\u003E//declare parameter radiusofbody.\u003Cbr\u003E\u003Cbr\u003Ewait 1.\u003Cbr\u003E\u003Cbr\u003Eset gparam to 3531600000000.\u003Cbr\u003E\u003Cbr\u003Eset altitude to ship:apoapsis.\u003Cbr\u003E\u003Cbr\u003Eset timetoapo to eta:apoapsis.\u003Cbr\u003E\u003Cbr\u003Eset apospeed to velocityat(ship,time:seconds\u002Btimetoapo).\u003Cbr\u003E\u003Cbr\u003Eset radiusofbody to 600000.\u003Cbr\u003E\u003Cbr\u003Eset absalt to (altitude \u002B radiusofbody).\u003Cbr\u003E\u003Cbr\u003Eset velorbit to sqrt((gparam)/absalt).\u003Cbr\u003E\u003Cbr\u003E//set velremaining to (velorbit - apospeed).\u003Cbr\u003E\u003Cbr\u003Eif (velorbit - apospeed) \u0026gt; 5 {\u003Cbr\u003E\u003Cbr\u003E\tset burnnode to node((time:seconds \u002B timetoapo),velremaining,0,0).\u003Cbr\u003E\tadd burnnode.\u003Cbr\u003E\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewait 1.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ekostestlaunch\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//KOS Test Launcher\u003Cbr\u003E//\u003Cbr\u003Eset kerbinGParam to 3531600000000.\u003Cbr\u003Eset kerbinRadius to 600000.\u003Cbr\u003Eset targetorbit to 85000.\u003Cbr\u003Eset completion to False.\u003Cbr\u003Eset burn1 to False.\u003Cbr\u003Eset burn2 to False.\u003Cbr\u003Eset countdown to 10.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Counting down:\u0022.\u003Cbr\u003Euntil countdown = 0{\u003Cbr\u003E\tprint \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\tif countdown = 5{\u003Cbr\u003E\t\tprint \u0022Automatic Steering Systems Engaged.\u0022.\u003Cbr\u003E\t\tlock steering to heading(90,90).\u003Cbr\u003E\t}.\u003Cbr\u003E\tif countdown = 3{\u003Cbr\u003E\t\tprint \u0022100% Throttle Confirmed\u0022.\u003Cbr\u003E\t\tlock throttle to 1.\u003Cbr\u003E\t}.\u003Cbr\u003E\tif countdown = 1{\u003Cbr\u003E\t\tprint \u0022Engine Ignition Sequence Start\u0022.\u003Cbr\u003E\t\tstage.\u003Cbr\u003E\t}.\u003Cbr\u003E\tset countdown to countdown - 1.\u003Cbr\u003E\twait 1. //pause for 1 second\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022ZERO: RELEASING CLAMPS...\u0022.\u003Cbr\u003Estage.\u003Cbr\u003Ewait 1.\u003Cbr\u003E\u003Cbr\u003Ewhen stage:liquidfuel \u0026lt; 0.001 then {\u003Cbr\u003E\tprint \u0022Liquid Fuel Depleted. Attempting to stage.\u0022.\u003Cbr\u003E\tstage.\u003Cbr\u003E\tpreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen ship:altitude \u0026gt; 6000 then {\u003Cbr\u003E\tprint \u0022Initiating Gravity Turn. Applying torque.\u0022.\u003Cbr\u003E\tlock steering to heading(90,45).\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen ship:apoapsis \u0026gt; 40000 then {\u003Cbr\u003E\tprint \u0022Finalizing Gravity Turn. Applying torque.\u0022.\u003Cbr\u003E\tlock steering to heading(90,0).\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen ship:apoapsis \u0026gt; 85000 then {\u003Cbr\u003E\tprint \u0022Apoapsis target achieved. Engine cutoff.\u0022.\u003Cbr\u003E\tlock throttle to 0.\u003Cbr\u003E\tunlock all.\u003Cbr\u003E\tset burn1 to True.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen ship:altitude \u0026gt; 60000 then {\u003Cbr\u003E\ttoggle panels. //should deploy solar panels at 60 km\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen burn1 = True and burn2 = False and ship:apoapsis \u0026lt; 83000 then {\u003Cbr\u003E\tlock throttle to 0.5.\u003Cbr\u003E\tset burn2 to True.\u003Cbr\u003E\tpreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen burn1 = True and burn2 = True and ship:apoapsis \u0026gt; 85000 then {\u003Cbr\u003E\tlock throttle to 0.\u003Cbr\u003E\tset burn2 to False.\u003Cbr\u003E\tpreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Euntil ship:altitude \u0026gt; 70000{}.\u003Cbr\u003E\u003Cbr\u003Eset timetoapo to eta:apoapsis.\u003Cbr\u003Eset apospeed to velocityat(ship,time:seconds\u002Btimetoapo).\u003Cbr\u003E//run circularize(kerbingparam,timetoapo,ship:apoapsis,apospeed,kerbinradius).\u003Cbr\u003Erun circularize.\u003Cbr\u003E\u003Cbr\u003Ewait 1.\u003Cbr\u003Eprint \u0022Program Termination.\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt says \u0022Object reference not set to an instance of an object\u0022 when it tries to run the circularization program, either manually or when it is called with kostestlaunch.\u003C/p\u003E\u003Cp\u003EWhat am I doing wrong?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-10T18:58:20Z\u0022 title=\u002210/10/2014 06:58  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 10, 2014\u003C/time\u003E by Starwhip\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Jimbimbibble","CreatedById":77859,"CreatedDateTime":"2014-10-10T17:02:35Z","Content":"\n\u003Cp\u003EI haven\u0027t used KOS for a while but it looks like the period after your brackets should not be there if you have periods on the internal lines. At least, that\u0027s how C works. If it\u0027s not that, then you\u0027re trying to reference a structure incorrectly but I can\u0027t tell which one.\u003C/p\u003E\n"},{"CreatedByName":"Godot","CreatedById":16902,"CreatedDateTime":"2014-10-10T17:11:04Z","Content":"\n\u003Cp\u003EDunno about kOS .... but in most programming languages the condition that schould be evaluated for an if-statement has to be enclosed in brackets\u003C/p\u003E\u003Cp\u003Ei.e. IF (condition) { ... }\u003C/p\u003E\u003Cp\u003Esimilarly for multiple conditions:\u003C/p\u003E\u003Cp\u003EIF ((condition 1) AND|OR (condition 2) AND|OR ... ) { ... }\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-10-10T17:26:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kOS Wiki\u0022 data-cite=\u0022kOS Wiki\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESET X TO 1.\u003C/p\u003E\u003Cp\u003EIF X = 1 { PRINT \u0022X equals one.\u0022. }. // Prints \u0022X equals one.\u0022\u003C/p\u003E\u003Cp\u003EIF X \u0026gt; 10 { PRINT \u0022X is greater than ten.\u0022. }. // Does nothing\u003C/p\u003E\u003Cp\u003E//\u003C/p\u003E\u003Cp\u003E// IF-ELSE structure:\u003C/p\u003E\u003Cp\u003EIF X \u0026gt; 10 { PRINT \u0022X is large\u0022. } ELSE { PRINT \u0022X is small\u0022. }.\u003C/p\u003E\u003Cp\u003E//\u003C/p\u003E\u003Cp\u003E// An if-else ladder:\u003C/p\u003E\u003Cp\u003EIF X = 0 {\u003C/p\u003E\u003Cp\u003EPRINT \u0022zero\u0022.\u003C/p\u003E\u003Cp\u003E} ELSE IF X \u0026lt; 0 {\u003C/p\u003E\u003Cp\u003EPRINT \u0022negative\u0022.\u003C/p\u003E\u003Cp\u003E} ELSE {\u003C/p\u003E\u003Cp\u003EPRINT \u0022positive\u0022.\u003C/p\u003E\u003Cp\u003E}.\u003C/p\u003E\u003Cp\u003EAlthough a period (.) is usally optional after the end of a set of curly braces like so:\u003C/p\u003E\u003Cp\u003E{ }.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is the structure for the kOS IF-THEN statement. \u003C/p\u003E\u003Cp\u003EI\u0027ll add a few debug print statements to see where it fails.\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003ERiiiiight, it\u0027s when it returns the variable \u0022apospeed\u0022. The ORBITABLEVELOCITY class that it represents is not what I should be trying to do.\u003C/p\u003E\u003Cp\u003EIt \u003Cem\u003Eshould\u003C/em\u003E be \u0022apospeed:velociyt:orbit\u0022, I think.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-10T17:38:26Z\u0022 title=\u002210/10/2014 05:38  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 10, 2014\u003C/time\u003E by Starwhip\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-10-10T17:59:56Z","Content":"\n\u003Cp\u003ESo, apospeed looks like this: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EORBITABLEVELOCITY: ORBIT = V(X,Y,Z), SURFACE = V(X,Y,Z)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhere V(x,y,z) is a vector.\u003C/p\u003E\u003Cp\u003EYou can call \u0022apospeed:orbit\u0022 to give you the orbit value.\u003C/p\u003E\u003Cp\u003EHow do you call the first value of the orbit vector? Vectors in the code are just tuples, but \u0022apospeed:orbit[0]\u0022 fails.\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003E\u0022apospeed:orbit:X\u0022 is the correct syntax.\u003C/p\u003E\u003Cp\u003EI\u0027ll see if that fixes it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-10T18:07:47Z\u0022 title=\u002210/10/2014 06:07  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 10, 2014\u003C/time\u003E by Starwhip\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-10-10T18:20:39Z","Content":"\n\u003Cp\u003EYep! \u0022apospeed:orbit:x\u0022 accesses the first value. I needed apospeed:orbit:mag though, and IT WORKS NOW!!!\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2014-10-10T23:43:42Z","Content":"\n\u003Cp\u003EMoved to mod support.\u003C/p\u003E\n"}]}