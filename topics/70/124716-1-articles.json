{"TopicId":124716,"ForumId":70,"TopicTitle":"Probable memory leak on Yosemite","CreatedByName":"S1gmoid","CreatedById":124382,"CreatedDateTime":"2015-11-08T11:46:56Z","PageNum":1,"Articles":[{"CreatedByName":"S1gmoid","CreatedById":124382,"CreatedDateTime":"2015-11-08T11:46:56Z","Content":"\n\u003Cp\u003EAfter playing on Mavericks last autumn, without any problems at all, I have re-installed KSP (latest version 1.0.4 from Steam), and this time I\u0027m running Yosemite.\u003C/p\u003E\u003Cp\u003EAnd I\u0027m having the exact same instability problems that were described under \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/3404\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/3404\u003C/a\u003E. Randomly, upon scene switching (recover vessel or revert flight), the game will sometimes crash, or freeze with the \u0022progress indicator\u0022 running, but nothing happening at all. This seems to happen on every other flight or so. The game is playable, but not very.\u003C/p\u003E\u003Cp\u003EMods installed (via CKAN):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAdvanced Jet Engine 2.4.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAnalog Control 1.6.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAnimate Emissive Module 1.11\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EBetter buoyancy 1.4\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECommunity tech tree 2.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EConnected Living Space 1.1.3.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECrossfeeds Enabler 3.3\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EDeadly Reentry Continued 7.2.2\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFAR 3:0.15.5.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModularFlightIntegrator 1.1.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModule Manager 2.6.8\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModuleRCSFX 4.2\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EProcedural Fairings 3.15\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERealChute 1.3.2.3\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESolver Engines Plugin 1.11\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EStage Recovery 1.5.7\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETantares 30.0\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETantares LV 14.0\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECould someone share some information about the state of the MacOS version? Reading up on the Internet, it seems widely accepted that it\u0027s unstable on Yosemite, yet the bug I\u0027ve found is old (0.24) and closed (even though it perfectly describes my problems on 1.0.4), and there is little discussion here about OS X...\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/file/d/0B5axzxOcJ-5INTR3Z3dMTTA0dU0/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s the log file.\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-13T18:44:52Z\u0022 title=\u002211/13/2015 06:44  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 13, 2015\u003C/time\u003E by S1gmoid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dr_Goddard","CreatedById":100796,"CreatedDateTime":"2015-11-09T11:28:34Z","Content":"\n\u003Cp\u003ETry switching to 64-bit.\u003C/p\u003E\u003Cp\u003EThe performance and stability is way better on my 2012 Macbook Pro.\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/sTtOy4tQzt4?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-11-09T11:55:45Z","Content":"\n\u003Cp\u003ES1gmoid, your log errors are very different to the logs in the report you linked, so they are not likely to be related, ie not the same cause.\u003C/p\u003E\u003Cp\u003EYour log is showing stuff I\u0027ve not seen before, but it looks like something tried to allocate memory that wasn\u0027t available.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EKSP(1352,0xa11401d4) malloc: *** mach_vm_map(size=67108864) failed (error code=3)\u003Cp\u003E*** error: can\u0027t allocate region\u003C/p\u003E\u003Cp\u003E*** set a breakpoint in malloc_error_break to debug\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe rest of the log is mostly just repeated lines and a stack trace with no indication as to what caused it.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E#2550x00000001392856 in mono_traverse_objects\u003Cp\u003EStacktrace:\u003C/p\u003E\u003Cp\u003ENative stacktrace:\u003C/p\u003E\u003Cp\u003E 0 libsystem_kernel.dylib 0x9747669a __pthread_kill \u002B 10\u003C/p\u003E\u003Cp\u003E 1 libsystem_c.dylib 0x95c40dee abort \u002B 156\u003C/p\u003E\u003Cp\u003E 2 KSP 0x0034a822 _Z12HandleSignaliP9__siginfoPv \u002B 34\u003C/p\u003E\u003Cp\u003E 3 libmono.0.dylib 0x0139081a mono_chain_signal \u002B 76\u003C/p\u003E\u003Cp\u003E 4 libmono.0.dylib 0x012daae2 mono_sigsegv_signal_handler \u002B 234\u003C/p\u003E\u003Cp\u003E 5 libsystem_platform.dylib 0x9441703b _sigtramp \u002B 43\u003C/p\u003E\u003Cp\u003E 6 ??? 0xffffffff 0x0 \u002B 4294967295\u003C/p\u003E\u003Cp\u003E 7 libmono.0.dylib 0x01483af8 g_ptr_array_set_size \u002B 83\u003C/p\u003E\u003Cp\u003E 8 libmono.0.dylib 0x01391f4d array_safe_grow \u002B 79\u003C/p\u003E\u003Cp\u003E 9 libmono.0.dylib 0x01392642 mono_add_process_object \u002B 100\u003C/p\u003E\u003Cp\u003E 10 libmono.0.dylib 0x01392849 mono_traverse_objects \u002B 440\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut that error \u003Ca href=\u0022http://answers.unity3d.com/questions/825223/editor-crash-log-help-diagnosing.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022text-decoration:underline\u0022\u003Ehas been reported on the Unity forums\u003C/span\u003E\u003C/a\u003E and looks to be related to parts.\u003C/p\u003E\u003Cp\u003ESo my advice is to try removing addons one at a time, especially anything with animations even if it\u0027s just lighting effects, and see if this problem goes away.\u003C/p\u003E\n"},{"CreatedByName":"S1gmoid","CreatedById":124382,"CreatedDateTime":"2015-11-11T10:39:19Z","Content":"\n\u003Cp\u003EThanks for the hints... So far it seems that Analog Control was the culprit, but it only crashes in windowed mode.\u003C/p\u003E\u003Cp\u003EEDIT: I also got crashes \u003Cem\u003EI thought were caused by\u003C/em\u003E Distant Object Enhancement... But I still am getting them, although less frequently... it\u0027s the same malloc fail, too. Am I running into the 4GiB memory limit?! I don\u0027t have that much stuff...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EKSP(1081,0xa11401d4) malloc:\u003Cbr\u003E*** mach_vm_map(size=67108864) failed (error code=3)*** error: can\u0027t allocate region\u003Cbr\u003E*** set a breakpoint in malloc_error_break to debug\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt would seem this has occured before under Mono on OSX. It\u0027s most likely running out of memory, but why... Is there a leak in one of the mods?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-12T23:39:46Z\u0022 title=\u002211/12/2015 11:39  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 12, 2015\u003C/time\u003E by S1gmoid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"S1gmoid","CreatedById":124382,"CreatedDateTime":"2015-11-13T18:38:11Z","Content":"\n\u003Cp\u003EOkay it\u0027s 99% confirmed, I\u0027m \u003Cem\u003Erunning out of memory.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGiven how it\u0027s also happening with lot less mods in 1.0.5 (and it wasn\u0027t so many mods to begin with), something is clearly leaking ram.\u003C/p\u003E\u003Cp\u003EIf the something is Mono or Unity itself, it would explain how the 64bit mod makes it \u0022more stable\u0022 on OSX... It takes longer to leak 16 exibytes, and unused structures can be paged out...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-13T18:41:05Z\u0022 title=\u002211/13/2015 06:41  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 13, 2015\u003C/time\u003E by S1gmoid\u003C/strong\u003E\n\u003C/span\u003E\n"}]}