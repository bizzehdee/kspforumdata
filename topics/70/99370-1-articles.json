{"TopicId":99370,"ForumId":70,"TopicTitle":"The Underground Kraken:Switching to landed craft catapults it into the air, logs show negative heigt","CreatedByName":"Sethur","CreatedById":131449,"CreatedDateTime":"2015-02-11T10:34:35Z","PageNum":1,"Articles":[{"CreatedByName":"Sethur","CreatedById":131449,"CreatedDateTime":"2015-02-11T10:34:35Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003ETitle Correction:\u003C/strong\u003E \u0022... catapults it into a random direction, often upwards, into the vacuum\u0022. Using \u0022air\u0022 was just a manner of speech.\u003C/p\u003E\u003Cp\u003EKSP: 0.90.0 Windows 32bit with -popupwindow and -force-opengl\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EProblem: \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EPondering wether I had the great honor to discover a completely new type of Kraken. I call it: \u003Cem\u003EThe (Terrible) Underground Kraken\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EOn several occasions during my first 0.90 career run, crafts landed on the M\u00C3\u0192\u00C2\u00BCn would be violently tossed into the vacuum above, rapidly spinning and often immediately colliding with nearby rocky surfaces, causing catastrophic mission failures, rapid unplanned disassembles, frustration and sometimes hysterical laughter.\u003C/p\u003E\u003Cp\u003EThe catapult action happens either when you switch to the landed craft or when you walk towards it with a Kerbal on EVA and come to a certain distance where the physics engine for the approached craft kicks in. The first time I witnessed this was on such an EVA mission, and it was truly a sight to behold for unsuspecting Jeb Kermin to see his only return vehicle rapidly taking of, spinning violently and seconds later exploding on the ground.\u003C/p\u003E\u003Cp\u003EOne you have identified a vessel that struck the fancy of the Underground Kraken, the issue is reproducible every time. On the same EVA, I tried not walking back with Jeb but instead switching to the problematic vessel. When you do this, the physics engine is working heavily for a short while during loading (I think the timer is red, too), then the craft gets the same \u0022donkey kick\u0022 as previously described, only this time one has a chance to safe the rapidly spinning craft if has not already exploded (the ejection angle seems to be quite random, sometimes you immediately explode, sometimes you get launched straight into the air). \u003C/p\u003E\u003Cp\u003EMods are all on the current version. I uninstalled everything that I didn\u0027t need for the reproduction but the landers in the affected quicksaves kept on getting attacked by the Kraken. I even tried uninstalling some suspicious mods and playing out the same landing trajectory while my craft was still approaching the surface of M\u00C3\u0192\u00C2\u00BCn (height \u0026gt;= 15 km) and the issue would still persist. When you land and exit for EVA, nothing happens until you are out of physics range (few hundred meters). Then, when you walk back or switch to the craft: b\u00C3\u0192\u00C2\u00A4m! As far as I remember, I even tried putting the lander on its side, but to no avail.\u003C/p\u003E\u003Cp\u003EI initially though Mechjeb was the culprit because I was using Smart S.A.S. on the affected craft with KILL ROT enabled and I think I went out of electricity, but that wasn\u0027t it. Once I gave up on the such affected crafts, though, further mun landings went well until a certain point where it happened again, and so on.\u003C/p\u003E\u003Cp\u003ENow the most interesting thing: The logs show a negative height of you vessel just before the Kraken strikes (i.e. the physics engine goes crazy). I had with four different vessels now, all lite-weight and with relatively few parts, i.e. standard Mun landers with only one fuel tank and an LV-909 engine. I think I used the medium lander legs on all of those.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EMods installed:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EKerbal Engineer Redux\u003C/p\u003E\u003Cp\u003EDeadly Reentry Continued\u003C/p\u003E\u003Cp\u003EQuick Search\u003C/p\u003E\u003Cp\u003EQuick Scroll\u003C/p\u003E\u003Cp\u003EFerram Aerospace Research (tried uninstalling)\u003C/p\u003E\u003Cp\u003EMechjeb (tried uninstalling)\u003C/p\u003E\u003Cp\u003EKerbal Joint Reinforcement\u003C/p\u003E\u003Cp\u003EProcedural Dynamics\u003C/p\u003E\u003Cp\u003EProcedural Fairings\u003C/p\u003E\u003Cp\u003EActive Texture Management\u003C/p\u003E\u003Cp\u003EChatterer (tried uninstalling)\u003C/p\u003E\u003Cp\u003EKerbal Attachment System (tried uninstalling)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EReproduction steps:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EHard to reproduce. Build a simple M\u00C3\u0192\u00C2\u00BCn lander with the medium stock landing legs, land, go on EVA, switch to your craft when you are far enough away. But I think the Kraken is quite insidious and intelligent, it only strikes when you don\u0027t expect him to do so and when you didn\u0027t quicksave before the deorbit burn \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ELog:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t have the exact logs here right now, but it show something of a negative height when the Kraken strikes.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-11T21:56:48Z\u0022 title=\u002202/11/2015 09:56  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 11, 2015\u003C/time\u003E by Sethur\u003C/strong\u003E\n\u003Cbr\u003EMinor corrections\n\u003C/span\u003E\n"},{"CreatedByName":"Vereox","CreatedById":137967,"CreatedDateTime":"2015-02-14T06:00:02Z","Content":"\n\u003Cp\u003EI have experienced this problem several times now as well. On Mun as well as Minmus and Ike.\u003C/p\u003E\u003Cp\u003EUsually my problem goes like this:\u003C/p\u003E\u003Cp\u003EI land a base or a simple lander on the surface. Then a kerbal goes on EVA. Once they reach a certain distance away from the lander/base the game stutters for a bit but all is fine. Once I have done whatever it is that I\u0027ve needed to do. I start to head back to the lander with the kerbal. Then all of a sudden all hell breaks loose. The lander explodes and gets flung into space. Pieces go everywhere and the base or lander is more often than not destroyed.\u003C/p\u003E\u003Cp\u003EAs a general rule of thumb I don\u0027t have any SAS active or have any engines activated when I land something and it is staying there. (just to note)\u003C/p\u003E\u003Cp\u003EBut recently I just landed a base on Ike and sent a kerbal out to do some science a few hundred metres away. When the kerbal went 250 metres away from the base, the base suddenly started falling downwards, into the moon. It stopped at about 350 metres away. Curious, I sent the kerbal back over to investigate. Once I was essentially standing right on top the base (except that it was underground), the base suddenly popped back up to the surface, then promptly exploded. Sending parts and the kerbal into space.\u003C/p\u003E\u003Cp\u003EHere are two series of screenshots I just took to demonstrate this bug. The first series is without the debug open, the second is with the debug open.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/j29re\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cstrong\u003ELog: \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/85103666/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/85103666/output_log.txt\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-14T08:29:23Z\u0022 title=\u002202/14/2015 08:29  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 14, 2015\u003C/time\u003E by Vereox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Vereox","CreatedById":137967,"CreatedDateTime":"2015-02-14T06:06:09Z","Content":"\n\u003Cp\u003EI should also add that the mods that I have installed are:\u003C/p\u003E\u003Cp\u003EAlternate Resource Panel\u003C/p\u003E\u003Cp\u003EDistant Object Enhancer\u003C/p\u003E\u003Cp\u003EEnvironment Visual Enhancements\u003C/p\u003E\u003Cp\u003EFerram Aerospace Research\u003C/p\u003E\u003Cp\u003EIn-Flight Waypoints (uninstalled a while ago when first experiencing this on Mun when I sent a lander there to do a contract; but uninstalling did not solve the problem)\u003C/p\u003E\u003Cp\u003EKerbal Alarm Clock\u003C/p\u003E\u003Cp\u003EKerbal Engineer Redux\u003C/p\u003E\u003Cp\u003EModule Manager\u003C/p\u003E\u003Cp\u003ENear Future Solar\u003C/p\u003E\u003Cp\u003EProcedural Fairings\u003C/p\u003E\u003Cp\u003EProcedural Parts\u003C/p\u003E\u003Cp\u003EStageRecovery\u003C/p\u003E\u003Cp\u003ESurface Lights\u003C/p\u003E\n"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-02-14T14:36:31Z","Content":"\n\u003Cp\u003EHm, I see both of you have procedural something (besides fairings), so, I have a bit of a hunch here. Did either of you edit the landing legs in any way?\u003C/p\u003E\u003Cp\u003ESounds like a ground clipping issue. While not the underground kraken exactly, I\u0027ve experienced something similar to what\u0027s described, the hangars from Allistas hangar mod will clip and collide with the launchpad on load and experience the same kinetic kick (or donkey kick as Sethur described it). I haven\u0027t experienced this bug with things other than the hangars initial load on launchpad.\u003C/p\u003E\n"},{"CreatedByName":"Vereox","CreatedById":137967,"CreatedDateTime":"2015-02-14T15:26:17Z","Content":"\n\u003Cp\u003EI myself haven\u0027t edited any of the parts or files. All of it is the same as any downloaded copy of the game files or mod files.\u003C/p\u003E\u003Cp\u003EJust another note on the ground clipping. I\u0027ve noticed that whenever I\u0027m on Kerbin and I\u0027m trying to land a plane, the game won\u0027t load the terrain in a way that causes parts to clip except for the controlling part of the craft. But when I reach about 80 m/s, the terrain loads correctly and I can land perfectly fine. Any velocity higher and the terrain doesn\u0027t load. It\u0027s actually really annoying.\u003C/p\u003E\u003Cp\u003EPersonally I think that there may be something with the way the game loads in the terrain under certain conditions, or may be way a mod interacts with the terrain code. Just my two cents.\u003C/p\u003E\n"},{"CreatedByName":"Sethur","CreatedById":131449,"CreatedDateTime":"2015-02-22T01:14:39Z","Content":"\n\u003Cp\u003EDid someone file this on the official squad bugtracker, yet? I did not take any screenshots, but Vereox could post it on: \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/projects/ksp/issues\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/projects/ksp/issues\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Vereox","CreatedById":137967,"CreatedDateTime":"2015-02-24T11:47:33Z","Content":"\n\u003Cp\u003EBug added to the tracker. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Sethur","CreatedById":131449,"CreatedDateTime":"2015-02-27T08:04:08Z","Content":"\n\u003Cp\u003EThanks Vereox, I updated the tracker with my latest findings. Turns out I had another issue with clipping and missing ground on the old airfield island near the KSC, which made me suspicious. After long testing and uninstalling tons of mods (without the issue disappearing), it finally dawned on me that I was using an old settings.cfg from pre-0.90 times and did a comparison with the current stock config. Turns out that they apparently changed a line in the High Terrain Details preset that somehow determines how the ground is rendered. The clipping issue went away after I changed this and there is a good chance that this was also somehow connected with the Kraken, at least it\u0027s worth a try. Could anybody who was experiencing the Kraken report if they had the wrong entry in their respective settings.cfg? See below for a description and also see \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/4128\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/4128\u003C/a\u003E and \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/4134\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/4134\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe relevant part of my old (and apparently wrong) settings.cfg:\u003C/p\u003E\u003Cp\u003E \u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EPRESET\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E {\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E name = High\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E PLANET\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E {\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E name = Kerbin\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E minDistance = 8\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E \u003C/span\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EminSubdivision = 1\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003E \u003C/span\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EmaxSubdivision = 14 \u0026lt;--- This is 10 now for the High preset.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-27T08:05:39Z\u0022 title=\u002202/27/2015 08:05  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 27, 2015\u003C/time\u003E by Sethur\u003C/strong\u003E\n\u003Cbr\u003EFormatting\n\u003C/span\u003E\n"},{"CreatedByName":"firda","CreatedById":182404,"CreatedDateTime":"2018-01-17T21:05:19Z","Content":"\n\u003Cp\u003E\nStill happens with 1.3.1, the only possibly relevant mod I use is Joint Reinforcement (because the game kinda sucks without it, you at least need to use advanced tweakables and auto-struts).\n\u003C/p\u003E\n\u003Cp\u003E\nI just do not understand it because I am a programmer. KSP already uses kind of state, one of them being LANDED, so please, implement some workaround when loading LANDED craft, pin it in place, limit it\u0027s speed until you can detect that everything is fine!! SIMPLE!!!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt happens more often if you land on slope but the reason is obvious: simplified landscape and physics when far, kick-in of precision and the transition sucks.\n\u003C/p\u003E\n"},{"CreatedByName":"firda","CreatedById":182404,"CreatedDateTime":"2018-01-20T09:58:44Z","Content":"\n\u003Cp\u003E\nLooks like there is mod for this:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed8353430574\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/169206-131-worldstabilizer-bugfix-for-vessels-bouncing-on-scene-load/\u0026amp;do=embed\u0022 style=\u0022height:214px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n...just in case somebody finds this after his kerbal went too far to place the flag and has nowhere to return, because his landed ship went on a trip without a pilot.\n\u003C/p\u003E\n"},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2018-01-24T03:38:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223272964\u0022 data-ipsquote-contentid=\u002299370\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516442324\u0022 data-ipsquote-userid=\u0022182404\u0022 data-ipsquote-username=\u0022firda\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 20. 1. 2018 at 10:58 AM, firda said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooks like there is mod for this:\n\u003C/p\u003E\n\u003Cp\u003E\n...just in case somebody finds this after his kerbal went too far to place the flag and has nowhere to return, because his landed ship went on a trip without a pilot.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust happened to me. Thank you.\n\u003C/p\u003E\n"}]}