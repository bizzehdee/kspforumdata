{"TopicId":83639,"ForumId":70,"TopicTitle":"Terrain is missing when switching to probe landed on Mun or Minmus","CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-02T17:05:25Z","PageNum":1,"Articles":[{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-02T17:05:25Z","Content":"\n\u003Cp\u003EI first noticed the problem when a rover crashed on Minmus and I switched to a previous probe to get the KSPI seismic data. I\u0027ve tried older saves of the same career from before the last time I was able to switch to a landed probe, with the same result. The probe appears intact, but floating in space with the skybox visible on all sides.\u003C/p\u003E\u003Cp\u003ELog is at \u003Ca href=\u0022https://www.dropbox.com/s/ktm87kv8ksiggn7/Player.log?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ktm87kv8ksiggn7/Player.log?dl=0\u003C/a\u003E . I\u0027ll work on putting together a complete mod list when I have more time to dig into it. Any suggestions on where to start?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-06T02:47:25Z\u0022 title=\u002209/06/2014 02:47  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 6, 2014\u003C/time\u003E by undercoveryankee\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-03T06:23:55Z","Content":"\n\u003Cp\u003EPer the sticky try narrowing it down to the smallest set of mod(s) that exhibit the problem. That would be the best way to start.\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-04T00:22:35Z","Content":"\n\u003Cp\u003EFinally got some time to continue troubleshooting. I\u0027ll update this post periodically as I make progress.\u003C/p\u003E\u003Cp\u003EI made a new copy of KSP 0.24.2 from the never-launched master copy in my Steam library and installed only enough mods to be able to load one of the probes in my save file. All mods were freshly extracted from the original downloads. It\u0027s a longer list than I would like.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 0: Required for the test ship\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EKW Rocketry 2.6c\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERemoteTech2 1.4.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModuleManager 2.3.3, replacing the older versions packaged with some of the mods\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EInterstellar Lite 12.2 and the dependencies packaged with it:\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003EToolbar\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECommunity Resource Pack\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOpen Resource System 1.2.0\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETreeLoader\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETweakScale (custom package)\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E[*]MechJeb 2.3.1\u003C/p\u003E\u003Cp\u003E[*]Science Revisited 1.3.1\u003C/p\u003E\u003Cp\u003E[*]KDEX 1.0.2\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EResults: Tracking Station failed to load when I clicked on it. After deleting all active contracts from my save file (assuming that FinePrint contracts were part of the problem) I was able to access the Tracking Station and switch to a probe. The original problem with missing terrain doesn\u0027t show up with this selection of mods, but I still have intermittent problems with the Tracking Station (\u0022Fly\u0022 button remaining disabled when I click on a ship, clicking a ship doesn\u0027t select it). I suspect these glitches are due to having data in the save file for other mods I don\u0027t have.\u003C/p\u003E\u003Cp\u003ESince the original glitch seems to be gone, I\u0027ll go ahead and add the next group of mods: the ones I find hardest to do without.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 1: Top priority\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EActive Texture Management 3-3-1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFAR 0.14.1.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EProcedural Fairings 3.09\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EATM is installed with its stock configs for now. I have some local tweaks that I\u0027ll probably apply later in the process. I deleted ModStatistics from the FAR directory. I don\u0027t mind the data it shares, but for troubleshooting purposes I would rather avoid plugins that don\u0027t add gameplay.\u003C/p\u003E\u003Cp\u003EResult: Switching to probes still works. Still getting exceptions in the Tracking Station. What seems to be the root exception is this when I try to select a vessel:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at KnowledgeBase.\u0026lt;GetUnloadedVesselMass\u0026gt;m__326 (.ProtoPartResourceSnapshot x) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at System.Linq.Enumerable\u002B\u0026lt;Sum\u0026gt;c__AnonStorey3A\u00601[ProtoPartResourceSnapshot].\u0026lt;\u0026gt;m__74 (Single a, .ProtoPartResourceSnapshot  [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at System.Linq.Enumerable.Sum[ProtoPartResourceSnapshot,Single] (IEnumerable\u00601 source, System.Func\u00603 selector) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at System.Linq.Enumerable.Sum[ProtoPartResourceSnapshot] (IEnumerable\u00601 source, System.Func\u00602 selector) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KnowledgeBase.GetUnloadedVesselMass (.Vessel v) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KnowledgeBase.CreateVesselInfoList (.Vessel v) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KnowledgeBase.OnMapFocusChange (.MapObject target) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at EventData\u00601[MapObject].Fire (.MapObject data) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PlanetariumCamera.SetTarget (.MapObject tgt) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at SpaceTracking.SetVessel (.Vessel v, Boolean keepFocus) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at SpaceTracking\u002B\t.MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EStill hoping that problem has something to do with the save referencing mods I don\u0027t have installed.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 2: Difficulty\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EDeadly Reentry Continued 5.2\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETAC Life Support 0.10\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERealChute 1.2.4\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENo change either in terrain loading or in Tracking Station exceptions. Suspect that Tracking Station exceptions occur when a part on the vessel references a resource whose definition isn\u0027t installed, such as the MKS/OKS PunchCards resource that gets added to the Comms DTS-M1 dish antenna.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 3: Info and editing tools\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EKerbal Engineer Redux 0.6.2.10\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EDocking Alignment Indicator 4.0\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EEnhanced NavBall 1.3.2\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECrewManifest 0.5.8.0\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EKerbal Alarm Clock 2.7.8.2\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EResearchThemAll 1.1.0.0\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESelectRoot July 18\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETAC Fuel Balancer 2.0.4.3\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERCS Build Aid 0.5\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECan still switch to my probes. Exceptions in Tracking Station not fully tested after this batch. The landers I\u0027ve been checking the missing-terrain problem with have both been flown since the last time I reverted to the original save file and no longer contain PunchCards.\u003C/p\u003E\u003Cp\u003EAt this stage in the mod-installation process, I\u0027m leaning toward file corruption as the cause of the original missing-terrain glitch, and I\u0027m optimistic about my chances of continuing the interrupted career in a new copy of KSP. I think I still have two or three separate groups worth of mods to install before I\u0027m back in action.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-04T03:21:29Z\u0022 title=\u002209/04/2014 03:21  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 4, 2014\u003C/time\u003E by undercoveryankee\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-06T02:47:04Z","Content":"\n\u003Cp\u003ESince the last round of testing, ModuleManager 2.3.4 has been released. Upgrade that, install the next group, and continue testing.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 4: Resources\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EMKS 0.20.8 (with bundled Firespitter plugin and Karbonite). Did not install ORS because KSPI Lite\u0027s version is current.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EReplaced Community Resource Pack with latest version 0.1.2\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAsteroid Recycling Technologies 0.4.4\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EExtraplanetary Launchpads 4.2.3\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EEPL Karbonite conversion 16-5 (September 1)\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETerrain was still present on switching to Minmus probe. Consistent with hypothesis that references to the MKS PunchCards resource were causing exceptions in the Tracking Station, no exceptions were observed after installing this group.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 5: Science\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003ECustom Biomes 1.6.6\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESCANsat 7rc4. Deleted ModStatistics.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETarsier Space Tech 4.4\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf there\u0027s a mod conflict involved, this group is where I expect to run into trouble. SCANsat actually talks to the terrain system, and it\u0027s still on an older ORS. My first time using Tarsier\u0027s telescope was between the last time I switched to a lander on my original install and the first time I ran into the bug.\u003C/p\u003E\u003Cp\u003ENo issues observed, though.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EMod Group 6: Parts, Automation, and Leftovers\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E6S Service Compartments 1.1 and extension. Skipped the older Firespitter in the package in favor of the version bundled with MKS.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFinePrint 0.58b\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EkOS 0.13.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMSI Infernal Robotics 0.18.6\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EProcedural Dynamics 0.8.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESpaceplane Plus 1.3\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETaurus HCV 1.2\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd with that group of mods, I can return to the original save and do what I was trying to do before the glitch hit.\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-06T03:59:28Z","Content":"\n\u003Cp\u003EAfter I thought everything was working again, I got a Tarsier contract to photograph Kerbin with the space telescope and completed it.\u003C/p\u003E\u003Cp\u003ETried switching back to a lander again and got missing terrain.\u003C/p\u003E\u003Cp\u003EI\u0027m experimenting with some things to see if I can get it back without a full reinstall. Once it\u0027s fixed, I\u0027ll experiment with the Tarsier telescope in a separate game to try to reduce it to a test case.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-06T05:08:51Z","Content":"\n\u003Cp\u003EThat seems like a very strange turn, yeah. Only thing I can think of is that PQS runs out of memory trying to create a new quad. OS X, right? I know that has an even lower process limit than Windows 32bit. You can try upping the scale in ATM....\u003C/p\u003E\u003Cp\u003EIf not, and you\u0027re on Linux (or can install Linux!) use Linux x64.\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-06T15:29:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EThat seems like a very strange turn, yeah. Only thing I can think of is that PQS runs out of memory trying to create a new quad. OS X, right? I know that has an even lower process limit than Windows 32bit. You can try upping the scale in ATM....\u003Cp\u003EIf not, and you\u0027re on Linux (or can install Linux!) use Linux x64.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOS X. If it was just a memory problem, you\u0027d think that reverting to the same save and the same mods from the last time it worked would fix it. It doesn\u0027t make sense that once this glitch has been triggered, it survives everything short of a clean reinstall. At least now I have the steps that worked to fix it written down.\u003C/p\u003E\u003Cp\u003EI\u0027ll be back (probably on the Tarsier Space Tech thread) if I can find a simple test case.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-06T18:14:19Z","Content":"\n\u003Cp\u003EUnity/KSP use garbage collection; that means that the memory state will not necessarily be the same each time you load that save. But yeah, it\u0027s not a certainty it\u0027s that...\u003C/p\u003E\n"}]}