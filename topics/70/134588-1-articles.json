{"TopicId":134588,"ForumId":70,"TopicTitle":"Fixing NaN errors","CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2016-03-20T14:03:41Z","PageNum":1,"Articles":[{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2016-03-20T14:03:41Z","Content":"\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0060ve been getting fairly regular NaN errors since installing RO possibly due to SOI changes. Black screen, NaN everywhere, game freezes.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know of a way to fix these, possibly by editing the persistence file?\n\u003C/p\u003E\n\u003Cp\u003E\nThank you in anticipation.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-03-20T14:52:51Z","Content":"\n\u003Cp\u003E\nWithout seeing the persistence file and a log file (output_log.txt or player.log) it\u0027s impossible to tell...\n\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2016-03-20T15:27:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222465405\u0022 data-ipsquote-contentid=\u0022134588\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221458485571\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWithout seeing the persistence file and a log file (output_log.txt or player.log) it\u0027s impossible to tell...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHere you go, Should have posted them in the OP...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://mega.nz/#!vcdnHALA!lJ_wzY6Q9ZYqFiqobxXXSj6_llOT6VPMNIT0LOsYlNM\u0022 rel=\u0022external nofollow\u0022\u003EOutput.log\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022#!3AthhaRJ!FbwJEPp1ZhHdKzxNp2FuQeEA2kYtwQr012N2xT4hmJg\u0022 rel=\u0022external\u0022\u003EPersistent\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nJust had a look in my output log and there were so many errors I can\u0060t tell what the problem is.\n\u003C/p\u003E\n\u003Cp\u003E\nThe NaN\u0060s start about when Mars 1 (Mars 1 and Mars 2 both have the Nan issue) is unpacking,\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\nUnpacking Mars 1\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nTestFlightInterface: Could not find TestFlightInterop module\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nTestFlightInterface: Could not find TestFlightInterop module\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nTestFlightInterface: Could not find TestFlightInterop module\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nRemoteTech: Loading Flightcomputer from persistent!\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nRemoteTech: Loading queued commands from persistent ...\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nRemoteTech: Loading Flightcomputer from persistent!\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nRemoteTech: Loading queued commands from persistent ...\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\u003C/p\u003E\n\u003Cp\u003E\nLook rotation viewing vector is zero\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename:\u00A0 Line: 70)\n\u003C/p\u003E\n\u003Cp\u003E\nInvalid parameter because it was infinity or nan.\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename:\u00A0 Line: 155)\n\u003C/p\u003E\n\u003Cp\u003E\nInvalid parameter because it was infinity or nan.\u003Cbr\u003E\n\u00A0\u003Cbr\u003E\n(Filename:\u00A0 Line: 155)\n\u003C/p\u003E\n\u003Cp\u003E\nInvalid parameter because it was infinity or nan.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-20T16:03:50Z\u0022 title=\u002203/20/2016 04:03  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 20, 2016\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003Cbr\u003Emore info\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-03-20T18:25:08Z","Content":"\n\u003Cp\u003E\nYou\u0027ve messed up the second link a bit but I managed to find it.\n\u003C/p\u003E\n\u003Cp\u003E\nThere are so many exceptions in your log that I\u0027m not surprised you\u0027re getting nasty crashes.\u00A0 They start during part loading when Procedural Parts gives\u00A0an exception for several of its parts.\u00A0 Then there\u0027s an exception from Scatterer while trying to destroy something though it looks like most other plugins are just being initialised about then.\u00A0 Then there are a couple of null reference exceptions from KAC when going from the tracking station to the space center.\u00A0 Then the same Scatterer exception happens again when switching from space center to flight followed by an argument exception from DeadlyReentry (calling a GUI function from OnStart).\n\u003C/p\u003E\n\u003Cp\u003E\nThere are a number of exceptions from MJFARExt because it can\u0027t load the FAR dll.\u00A0 I assume this\u00A0would be\u00A0normal if you don\u0027t have FAR installed but you do appear to as FAR also gives an index out of range exception when trying to build its voxel stuff.\u00A0 There are then ~28000 lines of \u0022Transform error\u0022 followed by, what appears to be FAR, getting upset about stuff being NaN.\u00A0 Then there are also lots of other exceptions from other mods and bits of stock code presumably because the earlier exceptions have prevented some stuff from being initialised correctly.\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t see anything obviously wrong in the .sfs but, if I had to guess at the underlying cause, I would say that the installations of either or both of Procedural Parts and FAR are broken and this is causing exceptions during the initialisation of the flight scene that causes everything to break...\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Also, the exception from Deadly Reentry could be causing something nasty so that should be reported to the author as it should be fairly simple to fix.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-20T18:27:07Z\u0022 title=\u002203/20/2016 06:27  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 20, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-03-20T18:35:33Z","Content":"\n\u003Cp\u003E\nSadly those OnStart ProcParts exceptions are a known issue with the current release. They only occur during the loading screen and things otherwise work. I\u0027ve pushed a fix to git but there\u0027s been no release.\n\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2016-03-21T10:42:20Z","Content":"\n\u003Cp\u003E\nI remember that FAR had issues with being installed with CKAN so I\u0060ll reinstall that manually, I did notice also that it seemed to happen more often if I used KAC\u0060s \u0060jump to ship\u0060\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0060ll also report the error to the DRE thread. I may remove scatterer too until after 1.1 and RVE are playing well with RO.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you so much for looking at it, there was just so much going on I wasn\u0060t sure where to start.\n\u003C/p\u003E\n"},{"CreatedByName":"Jansn67","CreatedById":158367,"CreatedDateTime":"2016-03-21T14:56:19Z","Content":"\n\u003Cp\u003E\nSporadic i have NaN-Errors with Weight and Electricity ONLY (at switching)\u00A0to some (not all, but they all are the same Vessel)\u00A0of my RemoteTech- and ScanSAT-Probes. But in general, they work all fine.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst solution: dont switch there if its not really neccessary.\n\u003C/p\u003E\n\u003Cp\u003E\nSecond solution: if its neccessary and if\u00A0i see NaN in Trackig Center (Mod = Ressource Window in TS) -\u0026gt; quicksave -\u0026gt; edit quicksafe.sfs -\u0026gt; quickload.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-21T14:57:01Z\u0022 title=\u002203/21/2016 02:57  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 21, 2016\u003C/time\u003E by Jansn67\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-03-21T17:12:36Z","Content":"\n\u003Cp\u003E\nThe only thing I know of that\u00A0causes electric charge NaNs is using an engine that has a max EC capacity of 0 but allows it to be tweakable in the VAB. \u00A0Opening the part menu of the engine will cause it to read NaN/0.0 and this will cause most things that try to get the mass of the part (or the whole vessel) to get a NaN result (including the CoM indicator in the VAB). \u00A0Fundamentally, this is a stock bug with the resource tweakable sliders but making something tweakable when it can only range from 0 to 0 is not sensible so the engine really should be fixed. \u00A0It can be temporarily fixed by just dragging the tweakable slider a little which will reset it to 0.0/0.0 and the mass calculations will start working again.\n\u003C/p\u003E\n\u003Cp\u003E\nGiven you are switching between vessels in flight it is unlikely to be related to this. \u00A0It is more likely that some mod that tries to adjust the EC to simulate on-rails consumption is making a mess of things and setting it to NaN. \u00A0There isn\u0027t much you can do about this other than finding a reliable\u00A0sequence of actions that can reproduce it with as few mods installed as possible and then reporting it to the authors of those mods that look likely.\n\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2016-03-26T15:55:55Z","Content":"\n\u003Cp\u003E\nJust to update, I reinstalled FAR manually and I avoid switching to craft with KAC and have not had a NaN error since.\n\u003C/p\u003E\n"}]}