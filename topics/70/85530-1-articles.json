{"TopicId":85530,"ForumId":70,"TopicTitle":"VAB will \u0026quot;stutter\u0026quot; with large crafts.","CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-09-27T11:20:46Z","PageNum":1,"Articles":[{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-09-27T11:20:46Z","Content":"\n\u003Cp\u003EWhen I have a large craft in the VAB, it will freeze for about one second every second. Between freezes, it operates at high framerates and gives me normal performance. The freezes seem to occur more often after reloading several craft and after placing several parts. I do not remember this happening to me in stock KSP, so I suspect that it is a mod.\u003C/p\u003E\u003Cp\u003EUsing KSP 0.24.2 32 bit\u003C/p\u003E\u003Cp\u003Emodlist:\u003Cimg src=\u0022http://i.imgur.com/kfC0ZwZ.png\u0022 alt=\u0022kfC0ZwZ.png\u0022\u003ELog file: \u003Ca href=\u0022http://www./view/izxdnzjt9e6venf/KSP%283%29.log\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./view/izxdnzjt9e6venf/KSP%283%29.log\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-09-27T13:09:08Z","Content":"\n\u003Cp\u003EFrom what I can see there, I would say the most likely causes are MechJeb\u0027s deltaV calculations or possibly the calculations that FAR does. I would expect both of these mods to not do any complex calculations if their windows are not open but this might be optimistic thinking.\u003C/p\u003E\u003Cp\u003EIt might be helpful if you could upload a complete output_log.txt (or player.log for Linux/OSX) as there may be some indications in there...\u003C/p\u003E\n"},{"CreatedByName":"Thanny","CreatedById":110623,"CreatedDateTime":"2014-10-01T18:59:14Z","Content":"\n\u003Cp\u003EThat\u0027s Unity garbage collection, and happens with or without mods installed. Whether or not KSP can do anything about it is a question I don\u0027t know the answer to. I\u0027d be inclined to think there is, however, since it doesn\u0027t happen all the time, even with the same ship, and seems linked to game run time. There\u0027s probably some more explicit object freeing that could be done to prevent the engine from doing this annoying pause routine.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-10-02T14:03:28Z","Content":"\n\u003Cp\u003EWell, it is actually mono garbage collection but close enough. Anyway, if you are just sat in the VAB then very little garbage should be created, certainly not enough to require a second of collection every second...\u003C/p\u003E\u003Cp\u003EI\u0027m on mobile at the moment so can\u0027t check your log but there must be some code running that is allocating and freeing lots of objects for the collection to take that long...\u003C/p\u003E\n"},{"CreatedByName":"Xaiier","CreatedById":22833,"CreatedDateTime":"2014-10-02T15:22:21Z","Content":"\n\u003Cp\u003EFAR is spamming errors about not being able to find modules.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[WRN 07:04:48.649] [Part]: PartModule FARBasicDragModel at largeAdapter2, index 0: index exceeds module count as defined in cfg.\u003Cbr\u003ELooking for FARBasicDragModel in other indices...\u003Cbr\u003E[ERR 07:04:48.651] ...no FARBasicDragModel module found on part definition. Skipping...\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn the loading section of the log, there are a lot of errors relating to various mods being unable to find certain PartModules, particularly B9 and \u0022ModuleCrossfeed\u0022 as well as various ones for PWings. This is likely what is causing FAR to freak out in the editor.\u003C/p\u003E\u003Cp\u003EI can\u0027t give reason as to why said failures are happening, though the usual try a fresh install might work.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-10-02T16:19:19Z","Content":"\n\u003Cp\u003EThats not the right log, cannot help you with that. We need the output_log.txt, not the KSP.log.\u003C/p\u003E\u003Cp\u003EBut to be specific, does the hanging happen when you add/remove a part to the vessel?\u003C/p\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-10-02T16:32:35Z","Content":"\n\u003Cp\u003EThe first post seems to have got it right. I removed the Mechjeb pods and the stuttering mostly went away.\u003C/p\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-10-02T20:19:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vaporo\u0022 data-cite=\u0022Vaporo\u0022\u003E\u003Cdiv\u003EThe first post seems to have got it right. I removed the Mechjeb pods and the stuttering mostly went away.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENever mind. It\u0027s not as bad with MechJeb gone, but it\u0027s also happening in flight now.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-10-02T23:23:27Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@Xaiier: \u003C/strong\u003ENope, that\u0027s expected behavior. That\u0027s supposed to happen and doesn\u0027t cause FAR to freak out. That\u0027s just what happens when KSP tries to load a module that has no definition for it in the part.cfg and ignores it.\u003C/p\u003E\n"},{"CreatedByName":"Xaiier","CreatedById":22833,"CreatedDateTime":"2014-10-03T02:18:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ferram4\u0022 data-cite=\u0022ferram4\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E@Xaiier: \u003C/strong\u003ENope, that\u0027s expected behavior. That\u0027s supposed to happen and doesn\u0027t cause FAR to freak out. That\u0027s just what happens when KSP tries to load a module that has no definition for it in the part.cfg and ignores it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EOh, is it? It\u0027s spamming one error per problematic part per second. That sounds remarkably similar to the 1 second stuttering he is getting.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003EHmm perhaps not.\u003C/p\u003E\u003Cp\u003ECould you provide a log where you load up KSP and go into the editor, sit there for a minute or so experiencing the issue, and then exit the game?\u003C/p\u003E\u003Cp\u003EAlso the output_log.txt in KSPData along side it would help greatly.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-03T02:30:47Z\u0022 title=\u002210/03/2014 02:30  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 3, 2014\u003C/time\u003E by Xaiier\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-10-04T13:31:33Z","Content":"\n\u003Cp\u003EI fixed the stuttering in flight. I was using an old version of Smokescreen. Still getting VAB stutters. And one second is just an approximation. Sometimes it happens at five second intervals, sometimes at half second intervals.\u003C/p\u003E\u003Cp\u003EAnd I will get the other log files.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-04T13:33:34Z\u0022 title=\u002210/04/2014 01:33  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 4, 2014\u003C/time\u003E by Vaporo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-10-04T15:45:05Z","Content":"\n\u003Cp\u003EDoes it always pause for a long time each time? A second is a long time for garbage collection...\u003C/p\u003E\u003Cp\u003ECan you try scrolling the vab up and down with keys so you are always looking at the inside of the vab? Are the pauses any different?\u003C/p\u003E\n"},{"CreatedByName":"ormaaj","CreatedById":128209,"CreatedDateTime":"2014-11-04T04:18:27Z","Content":"\n\u003Cp\u003EI have the same problem in both Windows and Linux, both 32 bit and 64 bit, with or without mods. Anybody know of a workaround?\u003C/p\u003E\u003Cp\u003EMy guess was the GC so it\u0027s interesting to find this thread.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-04T15:47:25Z\u0022 title=\u002211/04/2014 03:47  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 4, 2014\u003C/time\u003E by ormaaj\u003C/strong\u003E\n\u003Cbr\u003EDo some testing before speculating.\n\u003C/span\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2014-11-06T23:16:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ormaaj\u0022 data-cite=\u0022ormaaj\u0022\u003E\u003Cdiv\u003EI have the same problem in both Windows and Linux, both 32 bit and 64 bit, with or without mods. Anybody know of a workaround?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI too would be most interested in finding out what is causing this.\u003C/p\u003E\u003Cp\u003EI\u0027ll post here since I suspect that it\u0027s the same issue that\u0027s been bugging me for a while.\u003C/p\u003E\u003Cp\u003EI usualy play in GNU/Linux, but fired up a Windows install to check, it\u0027s there too.\u003C/p\u003E\u003Cp\u003EI\u0027m getting a small \u0027hitch\u0027 or pause on a single frame with an otherwise good framerate (even at 120\u002BFPS), most easily seen when rotating or panning the camera in editor or flight scene. With higher part counts in flight also causes the mission clock to flicker yellow.\u003C/p\u003E\u003Cp\u003EIn flight, this appears to happen even when on rails / warp, though somewhat harder to spot.\u003C/p\u003E\u003Cp\u003ELogs are clean.\u003C/p\u003E\u003Cp\u003EAFAICT, it\u0027s happening all the time, higher part counts (or lower overall perfomance) simply make it more obvious.\u003C/p\u003E\u003Cp\u003EMy stopwatch says every ~5 seconds, every second \u0027pause\u0027 (i.e. 10s) is slightly more noticeabe / longer.\u003C/p\u003E\u003Cp\u003EI\u0027m not seeing a 1 second pause, more like 0.25s. Still enough to be really annoying.\u003C/p\u003E\u003Cp\u003EStock or modded, 0.25 and 0.24.2, 32 and 64 bit.\u003C/p\u003E\u003Cp\u003EPlugin based mods exacerbate the problem, MechJeb being the biggest offender.\u003C/p\u003E\u003Cp\u003ELooking over the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/42877-CPU-Performance-Database\u0022 rel=\u0022external nofollow\u0022\u003ECPU-Performance-Database thread\u003C/a\u003E it would seem this is a common problem.\u003C/p\u003E\u003Cp\u003EConsensus points to GC.\u003C/p\u003E\u003Cp\u003EAny Idea what, if anything, can be done about it?\u003C/p\u003E\u003Cp\u003EI have tried to get some \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/73586-Profiling-Debugging-Support-For-KSP-Plugins-%2822-Aug-Unity-4-5%29\u0022 rel=\u0022external nofollow\u0022\u003Eprofiling\u003C/a\u003E going, but currently having issues building a working mono from unitys git repo (and finding time to muck with it).\u003C/p\u003E\u003Cp\u003EMy complete lack of mono / C# knowledge is probably not helping, and if it\u0027s a unity issue this may not reveal anything anyway. \u003C/p\u003E\u003Cp\u003EAnyone else care to try?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-06T23:53:36Z\u0022 title=\u002211/06/2014 11:53  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 6, 2014\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003Cbr\u003ETest on 32bit too.\n\u003C/span\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-11-07T00:27:17Z","Content":"\n\u003Cp\u003EOh, totally forgot about this thread. I remember I looked through the output_log file and didn\u0027t see anything that would indicate a problem (which is why I didn\u0027t bother to upload it), but I have gathered some more data about the bug\u0027s its occurrence. \u003C/p\u003E\u003Cp\u003E1. It happens more often after being in the VAB for a long time, or after placing numerous parts (not sure which).\u003C/p\u003E\u003Cp\u003E2. Going to the flight scene (and maybe other scenes) and then back to the VAB will often reset the stutter.\u003C/p\u003E\u003Cp\u003E3. Said this before, but the stutter occurs most often when a high part count ship is in the VAB.\u003C/p\u003E\u003Cp\u003E4. The stutter can occur in the flight scene (though not nearly as bad as in the VAB), but quickloading seems to reset the stutter. The stutter returns after looking at the map view.\u003C/p\u003E\u003Cp\u003EAlso, I can confirm that it is not FAR causing the problem, as I removed it and the bug still occurs.\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-11-07T01:08:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vaporo\u0022 data-cite=\u0022Vaporo\u0022\u003E\u003Cdiv\u003EOh, totally forgot about this thread. I remember I looked through the output_log file and didn\u0027t see anything that would indicate a problem (which is why I didn\u0027t bother to upload it), but I have gathered some more data about the bug\u0027s its occurrence. \u003Cp\u003E1. It happens more often after being in the VAB for a long time, or after placing numerous parts (not sure which).\u003C/p\u003E\u003Cp\u003E2. Going to the flight scene (and maybe other scenes) and then back to the VAB will often reset the stutter.\u003C/p\u003E\u003Cp\u003E3. Said this before, but the stutter occurs most often when a high part count ship is in the VAB.\u003C/p\u003E\u003Cp\u003E4. The stutter can occur in the flight scene (though not nearly as bad as in the VAB), but quickloading seems to reset the stutter. The stutter returns after looking at the map view.\u003C/p\u003E\u003Cp\u003EAlso, I can confirm that it is not FAR causing the problem, as I removed it and the bug still occurs.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETry turning off the VAB crew to see if things improve. I think it\u0027s SHOW_SPACE_CENTER_CREW = False in the settings.cfg. Also, it would be nice if you posted the requested logs. It would help some of the sharp folks around here to help you.\u003C/p\u003E\n"}]}