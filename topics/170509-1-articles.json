{"TopicId":170509,"ForumId":32,"TopicTitle":"How do you do a gravity turn?","CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-05T16:18:49Z","PageNum":1,"Articles":[{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-05T16:18:49Z","Content":"\n\u003Cp\u003E\nOr more precisely how do you correct a gravity turn mid flight?\n\u003C/p\u003E\n\u003Cp\u003E\nSo I have started playing with KOS and I am trying to figure out how to do a gravity turn.\u00A0 I am attempting to write a generic script that can work with a range of vehicles.\u00A0 I have written, what I feel, are a couple of really good predictive scripts that use \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E, Dynamic pressure, AP, Time to AP, vertical speed and Burn time.\u00A0 But they keep getting messed up by the changing \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E and staging.\u00A0 When \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E goes up the craft pitches down too early.\u00A0 Then at staging when \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E drops it realizes it has to pitch up a lot.\u00A0 I attempted using a \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E correction factor with little success as it appears the relationship is very non-linear.\u00A0 So I think I need a way to minimize pitching adjustments as \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E departs from average.\u00A0 Perhaps 1/((AverageTWR-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E)^2\u002B1/\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E).\u00A0 Would average acceleration would be \u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E/BurnTime?\u00A0 Thus making average \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E = Average Acceleration/9.8.\n\u003C/p\u003E\n\u003Cp\u003E\nI am just about out of ideas and the last thing I want to do is build a lookup table and fly to that.\n\u003C/p\u003E\n"},{"CreatedByName":"suicidejunkie","CreatedById":155878,"CreatedDateTime":"2018-02-05T18:10:02Z","Content":"\n\u003Cp\u003E\nWhy are you pitching up and down?\u00A0 Isn\u0027t the idea of a gravity turn to simply follow prograde?\n\u003C/p\u003E\n\u003Cp\u003E\nSeems to me that you should instead consider throttle; if you messed up the start and are going to high, throttle back to increase the turn rate, and if you\u0027re going too low, throttle up or abandon the gravity turn for an emergency maneuver.\n\u003C/p\u003E\n\u003Cp\u003E\nIn terms of predicting where you should be, you could get fancy, but maybe try interpolating between the nearly-empty stage N and the full stage N\u002B1.\u00A0 As you start to run out of fuel for one stage, pretend its stats are gradually changing to the stats of the next stage and act accordingly so there is no sudden shock.\u00A0 Keep the deviations gradual, and plan ahead.\n\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2018-02-05T18:33:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223286214\u0022 data-ipsquote-contentid=\u0022170509\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517847529\u0022 data-ipsquote-userid=\u0022145678\u0022 data-ipsquote-username=\u0022Nich\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Nich said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I have started playing with KOS and I am trying to figure out how to do a gravity turn.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve had great results with a rather simple approach that would turn the rocket so that srfprograde would reach X pitch by the time I had an airspeed of Y (IIRC 80\u00B0 \u003Cspan\u003E@ 100m/s, but I\u0027m not too sure)\u003C/span\u003E. Then follow srfprograde until the first stage burned out, and only *then* would I start to seriously consider where I was and if any adjustments were necessary.\n\u003C/p\u003E\n\u003Cp\u003E\nThe X degree by Y airspeed scheme turned out to be surprisingly versatile: over a wide range of initial TWRs, it would place me on a reasonable trajectory the later parts of the script could work with, *without* requiring massive control inputs at any time of the flight. It looked a lot more planned than it really was.\n\u003C/p\u003E\n\u003Cp\u003E\nETA:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223286315\u0022 data-ipsquote-contentid=\u0022170509\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517855739\u0022 data-ipsquote-userid=\u0022145678\u0022 data-ipsquote-username=\u0022Nich\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Nich said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry forgot to mention playing in RP-0 so most launch engines don\u0027t have throttle.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEven better, because I did too. Above approach worked very well for Atlas, Titan, and all types of Saturn. Also Proton and R-7.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-05T18:40:06Z\u0022 title=\u002202/05/2018 06:40  PM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 5, 2018\u003C/time\u003E by Laie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-05T18:35:39Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155878-suicidejunkie/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022155878\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155878-suicidejunkie/\u0022 rel=\u0022\u0022\u003E@suicidejunkie\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSorry forgot to mention playing in RP-0 so most launch engines don\u0027t have throttle.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYou do make a good point as I was using current accelerations and rates to make my predictions but I could probably find a way to average the remaining stages together and then use that to make my predictions.\u00A0 Challenging but feasible Thanks for the inspiration.\n\u003C/p\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-05T19:13:51Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110461-laie/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022110461\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110461-laie/\u0022 rel=\u0022\u0022\u003E@Laie\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSounds pretty similar to what I am doing.\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 1 launch Heading(90, 90)\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 2 Initiate turn based off Speed = f(\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 3 Follow surface prograde until 45 degrees or 10% peak dynamic pressure\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 4 (Killing me) Minor adjustments to Fix AP\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 5 (have not started but doesn\u0027t seem too hard) accelerate to orbital velocity and circularize\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFor this particular rocket I have phase 2 nailed and if it would just follow prograde it would be perfect.\u00A0 Currently the program can vary pitch infinitely but perhaps I should tie it into Prograde so that it cant run away.\u00A0 This rocket suffers from lack of significant control authority the last 2 minutes of its flight (3-8 degrees max)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-05T19:16:32Z\u0022 title=\u002202/05/2018 07:16  PM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 5, 2018\u003C/time\u003E by Nich\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Rocket In My Pocket","CreatedById":154640,"CreatedDateTime":"2018-02-05T19:21:37Z","Content":"\n\u003Cp\u003E\nHow do I do a gravity turn?\n\u003C/p\u003E\n\u003Cp\u003E\nWith the \u0022W\u0022 key mostly.\n\u003C/p\u003E\n\u003Cp\u003E\nLike this: W........W...........W..W....W....W...W....W Then at some point I stop hitting W. Hope that helps you.\u00A0\u003Cimg alt=\u0022:rolleyes:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 title=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Archgeek","CreatedById":116048,"CreatedDateTime":"2018-02-06T00:40:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223286365\u0022 data-ipsquote-contentid=\u0022170509\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517858497\u0022 data-ipsquote-userid=\u0022154640\u0022 data-ipsquote-username=\u0022Rocket In My Pocket\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Rocket In My Pocket said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow do I do a gravity turn?\n\u003C/p\u003E\n\u003Cp\u003E\nWith the \u0022W\u0022 key mostly.\n\u003C/p\u003E\n\u003Cp\u003E\nLike this: W........W...........W..W....W....W...W....W Then at some point I stop hitting W. Hope that helps you.\u00A0\u003Cimg alt=\u0022:rolleyes:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 title=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI use \u0022D\u0022 myself. \u00A0The best ones go .D....D..D................................................A...T and just kinda fall into a nice orbit on their own. \u00A0Unfortunately I can\u0027t seem to find a way to make that happen intentionally.\n\u003C/p\u003E\n\u003Cp\u003E\nWorse,\u00A0anything with a light payload in a big fairing goes more like: \u00A0.D...D...D......S....W....D..D.A..W...S...S.S.S.A..D..D.D.AA.D.DDDDDDDDD.........revert\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-06T01:27:52Z","Content":"\n\u003Cp\u003E\nROFL.\n\u003C/p\u003E\n\u003Cp\u003E\nIt is amazing how easily I can do it and how hard it is to tell a computer to do it.\u00A0 I just tested it and sure enough my turn was perfect.\u00A0 Following SRFPROGRADE the entire way up ended in a 800x150 orbit with 400 \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E left.\u00A0 I am still upset with the KOS PID.\u00A0 It used 4000 helium, \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E used 400 and I can do it using 40 \u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E.\u00A0 Now I just need to make correction logic that does nothing and circularization logic.\n\u003C/p\u003E\n\u003Cp\u003E\nJust incase anyone want to use my turn logic I thought I would share.\u00A0 It probably needs to be tested and tweeked for a starting SLT \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E of\u00A01.1 but for 1.48 it is perfect\n\u003C/p\u003E\n\u003Cp\u003E\nwait until airspeed \u0026gt; -300*maxthrust/mass/9.8\u002B490.\u003Cbr\u003E\nset mypitch to 85.\u003Cbr\u003E\nset mysteer to heading(myheading,mypitch).\n\u003C/p\u003E\n\u003Cp\u003E\nwait until arctan(verticalspeed/groundspeed)\u0026lt;85.\u003Cbr\u003E\nlock steering to srfprograde.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-06T01:32:25Z\u0022 title=\u002202/06/2018 01:32  AM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 6, 2018\u003C/time\u003E by Nich\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2018-02-06T01:51:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223286659\u0022 data-ipsquote-contentid=\u0022170509\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517880472\u0022 data-ipsquote-userid=\u0022145678\u0022 data-ipsquote-username=\u0022Nich\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n24 minutes ago, Nich said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt is amazing how easily I can do it and how hard it is to tell a computer to do it.\u00A0 I just tested it and sure enough my turn was perfect.\u00A0 Following SRFPROGRADE the entire way up ended in a 800x150 orbit with 400 \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E left.\u00A0 I am still upset with the KOS PID.\u00A0 It used 4000 helium, \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E used 400 and I can do it using 40 \u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E.\u00A0 Now I just need to make correction logic that does nothing and circularization logic.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou might look into the steering manager to tune the \u0022cooked\u0022 control.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://ksp-kos.github.io/KOS/structures/misc/steeringmanager.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp-kos.github.io/KOS/structures/misc/steeringmanager.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIf I understand the explanations correctly, the easiest thing to do would be to increase PITCHTS, ROLLTS, and YAWTS, making it essentially lazier about applying corrections. I\u0027ve yet to test it out myself: I looked it up yesterday after my Mercury capsule burned through every last drop of HTP overcorrecting on descent.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: My guess is that the default kOS PID for steering is tuned to stock, where most people use magic torque machines to maintain heading, not RP-0 where 99% of the time, there\u0027s not a single solitary reaction wheel onboard.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-06T01:53:22Z\u0022 title=\u002202/06/2018 01:53  AM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 6, 2018\u003C/time\u003E by Starman4308\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ty Tan Tu","CreatedById":167214,"CreatedDateTime":"2018-02-06T01:55:56Z","Content":"\n\u003Cp\u003E\nIt seems to me to get something that works with different designs you would have to monitor\u00A0the center of lift, or drag as I think about it. I have never seriously thought about it, because I have a\u00A0 bad habit of playing by the seat of my pants on launches. But, I think you would need to be able to limit the angle between the center of thrust and the center of lift to \u0027x\u0027 degrees. I am not sure what the optimal, or acceptable\u00A0value for \u0027x\u0027 would be though...\n\u003C/p\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-06T14:16:35Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/122674-starman4308/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022122674\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/122674-starman4308/\u0022 rel=\u0022\u0022\u003E@Starman4308\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThanks, I adjusted the\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ccite\u003ESTEERINGMANAGER:MAXSTOPPINGTIME\u003C/cite\u003E to 10\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ccite\u003ESTEERINGMANAGER:PITCHPID:KD to 2\u003C/cite\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ccite\u003ESTEERINGMANAGER:YAWPID:KD\u003C/cite\u003E to 2\n\u003C/p\u003E\n\u003Cp\u003E\nbecause originally it would just spammed all 4 \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E ports randomly until it ran out of fuel.\u00A0 Now at least it spams them in a random fashion that tends towards the target.\u00A0 Interestingly pitch worked pretty well with acceptable over corrections for a PID but yaw was spamming 50% left 50% right the entire time.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI will admit the controller does a great job when you have vectored thrust.\u00A0 I will have to try a vehicle with more \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E and the default settings.\u00A0 I suspect the KOS PID needs a larger dead zone and more dampening.\u00A0 If I ever get this launch script working writing my own \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E controller not based off a PID.\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2018-02-06T15:28:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223286214\u0022 data-ipsquote-contentid=\u0022170509\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517847529\u0022 data-ipsquote-userid=\u0022145678\u0022 data-ipsquote-username=\u0022Nich\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, Nich said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthe last thing I want to do is build a lookup table and fly to that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhy not, if it works?\n\u003C/p\u003E\n\u003Cp\u003E\nSeriously, gravity turns aren\u0027t a big deal.\u00A0 Here\u0027s how to do a gravity turns:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nTurn slightly eastwards, right off the pad, by the correct amount.\n\u003C/li\u003E\n\u003Cli\u003E\nSet \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E to follow \u003Cimg alt=\u0022:prograde:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/prograde3.png\u0022 title=\u0022:prograde:\u0022\u003E.\n\u003C/li\u003E\n\u003Cli\u003E\nMax throttle, staging as necessary, until your \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E gets to where you want it.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nThat\u0027s it.\u00A0 That\u0027s all there is.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223286214\u0022 data-ipsquote-contentid=\u0022170509\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517847529\u0022 data-ipsquote-userid=\u0022145678\u0022 data-ipsquote-username=\u0022Nich\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, Nich said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOr more precisely how do you correct a gravity turn mid flight?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou don\u0027t.\u00A0 You get it right the first time.\u00A0 If you find out it\u0027s wrong, revert and try again.\u00A0 Do this a few times and pretty soon you develop a pretty good feel for how it should be.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n...Of course, I\u0027m being a bit glib in the above.\u00A0 The crux of the matter is that little phrase \u0022...by the correct amount\u0022 that I kinda slipped in there.\u00A0 \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHow much is \u0022the correct amount\u0022?\u00A0 Well, judging that is a matter of practice.\u00A0 In general, the higher the \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E of your rocket-- particularly, the \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E in the early stage of acceleration, up to 500 m/s or so-- the more of a turn you\u0027ll need.\n\u003C/p\u003E\n\u003Cp\u003E\nI gather that what you \u003Cem\u003E\u003Cu\u003Ereally\u003C/u\u003E\u003C/em\u003E want is \u0022how do I program an automated thing to do this for me\u0022, and that\u0027s hard.\u00A0 I mean, \u003Cem\u003E\u003Cu\u003Ereally\u003C/u\u003E\u003C/em\u003E hard.\u00A0 Not just because it has to account for varying \u003Cem\u003E\u003Cu\u003Efuture\u003C/u\u003E\u003C/em\u003E \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E of your ship, depending on ship design and how you stage and so forth, but also because different ships have different capabilities.\u00A0 For example, some ships are a lot more aerodynamically stable than others.\u00A0 A ship that\u0027s aerodynamically stable, \u003Cem\u003E\u003Cu\u003Eand\u003C/u\u003E\u003C/em\u003E has steerable fins on the back, can often \u0022correct\u0022 a somewhat misaligned gravity turn by pitching slightly up or down (i.e. above or below \u003Cimg alt=\u0022:prograde:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/prograde3.png\u0022 title=\u0022:prograde:\u0022\u003E).\u00A0 However, a ship that\u0027s not so stable doesn\u0027t have that option, because if it gets off \u003Cimg alt=\u0022:prograde:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/prograde3.png\u0022 title=\u0022:prograde:\u0022\u003E even a little, it\u0027s likely to start tumbling uncontrollably and then the launch is toast.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd so forth.\n\u003C/p\u003E\n\u003Cp\u003E\nSince you\u0027re trying to address a really really hard problem (virtually impossible to solve \u003Cem\u003E\u003Cu\u003Eperfectly\u003C/u\u003E\u003C/em\u003E), then as a practical matter, you should either focus on some way to make the problem simpler, or else come up with some reasonable approximation which, though not perfect, is \u0022good enough\u0022 to get the job done.\n\u003C/p\u003E\n\u003Cp\u003E\nFor example, it would be a lot easier to write a program that will do a gravity turn for a \u003Cem\u003E\u003Cu\u003Eparticular\u003C/u\u003E\u003C/em\u003E ship than for all-ships-in-general, since it has a problem smaller space to work with.\u00A0 So, if you make a habit of always building your ships to have about the same \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E, then they\u0027ll all have similarly-shaped gravity turns and your job gets easier.\n\u003C/p\u003E\n\u003Cp\u003E\nIn terms of practicality:\u00A0 I suspect it will be easier to code an automated solution if you work backwards from successful \u003Cem\u003E\u003Cu\u003Ehuman\u003C/u\u003E\u003C/em\u003E-controlled launches, than if you try to solve it analytically.\u00A0 For example:\u00A0 How does a human know whether things are going well or poorly, as the launch proceeds?\u00A0 Dunno what \u003Cem\u003E\u003Cu\u003Eyou\u003C/u\u003E\u003C/em\u003E do, but I know what \u003Cem\u003E\u003Cu\u003EI\u003C/u\u003E\u003C/em\u003E do:\u00A0 I look at my pitch angle as a function of my speed.\u00A0 I\u0027ve got a pretty good model in my head of \u0022when I am going \u003Cem\u003E\u003Cu\u003Ethis\u003C/u\u003E\u003C/em\u003E many meters per second, I should be pitched at about \u003Cem\u003E\u003Cu\u003Ethis\u003C/u\u003E\u003C/em\u003E angle.\u0022\u00A0 And I don\u0027t need to track that super precisely-- i.e. I don\u0027t have a big huge table in my head with many angle entries for many different speeds, because it\u0027s really not necessary.\u00A0 The most important one is 45 degrees:\u00A0 that is, I know that I need to be going around 400 m/s by the time I get to 45 degrees away from vertical.\u00A0 As long as I hit that, I\u0027m pretty much guaranteed a successful launch.\n\u003C/p\u003E\n\u003Cp\u003E\nSo if I were going to try to write some sort of script to do this (which I won\u0027t, because I enjoy flying manually too much) \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E ... probably what I would do, as a simple poor-man\u0027s solution, is try a few launches and record a few data points.\u00A0 e.g. What angle is the pitch when I\u0027m at 200, 400, 600 m/s?\u00A0 Maybe just those three.\u00A0 Do a few launches, record those, average them.\u00A0 With a bit of interpolation, just those three data points would be enough for a script to have an idea of \u0022if I am going at \u003Cem\u003E\u003Cu\u003Ethis\u003C/u\u003E\u003C/em\u003E speed, then my pitch should be N degrees\u0022.\u00A0 And then write the script so that it tries to torque the ship up or down a smidgeon if the pitch isn\u0027t following what it thinks is the right angle for the current speed.\n\u003C/p\u003E\n\u003Cp\u003E\nI suspect that will be a whole lot easier to write than to solve the thing analytically... and I suspect it would work at least as well, too.\n\u003C/p\u003E\n\u003Cp\u003E\nWhatever you end up doing:\u00A0 I suggest that you \u003Cspan style=\u0022background-color:#ffff00;\u0022\u003Econtrol pitch as a function of \u003C/span\u003E\u003Cem\u003E\u003Cu\u003E\u003Cspan style=\u0022background-color:#ffff00;\u0022\u003Espeed\u003C/span\u003E\u003C/u\u003E\u003C/em\u003E\u003Cspan style=\u0022background-color:#ffff00;\u0022\u003E, not pitch as a function of \u003C/span\u003E\u003Cem\u003E\u003Cu\u003E\u003Cspan style=\u0022background-color:#ffff00;\u0022\u003Ealtitude\u003C/span\u003E\u003C/u\u003E\u003C/em\u003E.\u00A0 Reason for that advice:\u00A0 I think it\u0027s more applicable across different types of rockets with different \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E.\u00A0 I\u0027ve found, for example, that I want to be about 45 degrees of pitch when I\u0027m going 300-400 m/s.\u00A0 It doesn\u0027t matter much if I have a higher-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E or lower-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E rocket; they both want to be pitched at about 45 degrees when they\u0027re at about that speed.\u00A0 Of course, the higher-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E rocket will hit that speed at a lower \u003Cem\u003E\u003Cu\u003Ealtitude\u003C/u\u003E\u003C/em\u003E than the lower-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E rocket will, but if I just (mostly) ignore altitude and look at the speed, I\u0027ve found it to be a remarkably general rule.\n\u003C/p\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-06T18:27:21Z","Content":"\n\u003Cp\u003E\nThanks not a bad suggestion.\u00A0 It will at least make visualizing the problem easier.\n\u003C/p\u003E\n"},{"CreatedByName":"Gargamel","CreatedById":64714,"CreatedDateTime":"2018-02-06T23:16:26Z","Content":"\n\u003Cp\u003E\nThe key to doing a gravity turn is to throw yourself at the ground, and miss.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n(Sorry, SpaceX and the HGTG onboard has me all goofy tonight!)\n\u003C/p\u003E\n"},{"CreatedByName":"blakemw","CreatedById":168819,"CreatedDateTime":"2018-02-07T11:52:38Z","Content":"\n\u003Cp\u003E\nI wrote a kRPC script that does repeated runs to find the optimal initial angle for a given rocket.\n\u003C/p\u003E\n\u003Cp\u003E\nOne of the challenges of trying to use a predictive approach is aerodynamics. Like depending on the \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E, drag, \u003Cabbr title=\u0022Center of Mass\u0022\u003ECoM\u003C/abbr\u003E/\u003Cabbr title=\u0022Center of Lift\u0022\u003ECoL\u003C/abbr\u003E and\u00A0moment of inertia\u00A0of the rocket it can tip over faster or slower. That is darn challenging to capture in static analysis. (rather like a tail-heavy plane, a rocket can even be designed so it naturally wants to pitch up rather than pitch down, naturally this isn\u0027t desirable because it would cause an extremely unstable rocket, but it\u0027s just to make the point that the rate at which a rocket tips over is variable and non-trivial to predict).\n\u003C/p\u003E\n\u003Cp\u003E\nAs a result of this you either have to do an adaptive\u00A0gravity turn which steers to stay on course (or at least, to avoid falling into dangerous flight zones - follow prograde unless you\u0027re tipping too fast in which case pitch up is a darn fine approach), or do repeated runs.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-07T11:57:44Z\u0022 title=\u002202/07/2018 11:57  AM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 7, 2018\u003C/time\u003E by blakemw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"suicidejunkie","CreatedById":155878,"CreatedDateTime":"2018-02-07T15:50:50Z","Content":"\n\u003Cp\u003E\nAlong the lines of \u0022do it right from T-0\u0022, another angle to consider is when to abort (not revert necessarily) the mission and update the initial launch parameters to more correct values?\n\u003C/p\u003E\n\u003Cp\u003E\nIf going too high, at what point will you not have enough \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E to make orbit and allow a safe place to review the mission?\n\u003C/p\u003E\n\u003Cp\u003E\nIf going too low, at what point do you need to abort and slow down to avoid burning up and/or impacting the ground?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPS: Pun not intended\n\u003C/p\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-07T15:53:02Z","Content":"\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125662-snark/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125662\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125662-snark/\u0022 rel=\u0022\u0022\u003E@Snark\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EAfter thinking about it Pitch based off speed doesn\u0027t work.\u00A0 If you start off too low on your turn will will gain speed faster which will cause you to pitch faster causing you to burn up in the atmosphere and fail to reach target AP.\u00A0 If you start to high you will not gain speed fast enough and by the time you reach target AP you will have a ton on vertical speed left making circulatization impossible.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI did graph the data.\u00A0 Target was 155x155 orbit.\u00A0 If I manually cut the throttle I probably could have had a 150x400 orbit.\u00A0 As you can see final circulization was at 186km with 159 m/s vertical speed.\u00A0 I have also included the CSV data at the very end.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022G4u9gGy.png\u0022 class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/G4u9gGy.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n*Second Vertical speed is supposed to be Expected AP.\n\u003C/p\u003E\n\u003Cp\u003E\nExpected AP is calculated off the following code.\u00A0 It is not too bad but I think it can be better\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 set AP0 to apoapsis. \u003Cspan style=\u0022color:#27ae60;\u0022\u003E//Starting AP\u003C/span\u003E\u003Cbr\u003E\n\u00A0\u00A0 wait 2.\u003Cbr\u003E\n\u00A0\u00A0 set \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E to maxthrust/mass/9.8. \u003Cspan style=\u0022color:#27ae60;\u0022\u003E//\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E is used to modulate rate \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E is growing\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022color:#27ae60;\u0022\u003E\u00A0\u00A0 //The next equation does a lot.\u003Cbr\u003E\n\u00A0\u00A0 //First we calculate the rate that AP is growing\u003Cbr\u003E\n\u00A0\u00A0 //(APCurrent-APTwoSecondsAgo)/2 Seconds gives the rate that AP is increasing at.\u003Cbr\u003E\n\u00A0\u00A0 //Next we divide this rate in half because we want to to reduce to 0 at the end of the burn.\u003Cbr\u003E\n\u00A0\u00A0 //This assumes linear rate of decay (think Triangle)\u003Cbr\u003E\n\u00A0\u00A0 //Normalize this by multiplying by AverageTWR/CurrentTWR.\u00A0 I hard coded 2.38 for the moment.\u003Cbr\u003E\n\u00A0\u00A0 //I think this value is too high at the moment.\u00A0 I calcualted \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E/burntime/9.8 or 9300/398/9.8.\u003Cbr\u003E\n\u00A0\u00A0 //This inculded the first stage and 300 \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E not needed from the final stage.\u003Cbr\u003E\n\u00A0\u00A0 //If I remove these I end up with more like 2.29\u003C/span\u003E\u003Cbr\u003E\n\u00A0\u00A0 set APdelta to (apoapsis-AP0)*2.38/4/\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E.\u003Cbr\u003E\n\u00A0\u003Cspan style=\u0022color:#27ae60;\u0022\u003E\u00A0 //Take the rate that AP is growing and multiply it by the remaining burn time then add that\u003Cbr\u003E\n\u00A0\u00A0 //to the current AP to get estimated AP\u003C/span\u003E\u003Cbr\u003E\n\u00A0\u00A0 set APexp to apoapsis\u002B(APdelta*(duration-time\u002Btime0):seconds).\n\u003C/p\u003E\n\u003Cp\u003E\naltitude, airspeed, prograde, vertical speed, expected AP, Time\n\u003C/p\u003E\n\u003Cp\u003E\n766, 83, 83.66, , 82, 35087, 376\n\u003C/p\u003E\n\u003Cp\u003E\n2730, 193, 72.02, 184, 76994, 361\n\u003C/p\u003E\n\u003Cp\u003E\n6413, 356, 59.48, 307, 133036, 346\n\u003C/p\u003E\n\u003Cp\u003E\n11998, 580, 48.81, 437, 138720, 331\n\u003C/p\u003E\n\u003Cp\u003E\n19480, 831, 40.51, 540, 168867, 316\n\u003C/p\u003E\n\u003Cp\u003E\n28064, 1098, 33.4, 618, 172181, 301\n\u003C/p\u003E\n\u003Cp\u003E\n37654, 1428, 28.51, 674, 179925, 286\n\u003C/p\u003E\n\u003Cp\u003E\n48408, 1877, 23.87, 760, 195218, 271\n\u003C/p\u003E\n\u003Cp\u003E\n60660, 2485, 20.68, 877, 226553, 256\n\u003C/p\u003E\n\u003Cp\u003E\n74411, 2877, 18.24, 901, 236201, 241\n\u003C/p\u003E\n\u003Cp\u003E\n87558, 3058, 16.14, 850, 239711, 226\n\u003C/p\u003E\n\u003Cp\u003E\n100027, 3269, 14.33, 809, 234115, 211\n\u003C/p\u003E\n\u003Cp\u003E\n111860, 3496, 12.55, 759, 241813, 195\n\u003C/p\u003E\n\u003Cp\u003E\n122796, 3691, 10.88, 697, 212022, 180\n\u003C/p\u003E\n\u003Cp\u003E\n132839, 3920, 9.39, 640, 207316, 165\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n142062, 4187, 8.07, 588, 204923, 150\n\u003C/p\u003E\n\u003Cp\u003E\n150406, 4355, 6.87, 521, 199519, 135\n\u003C/p\u003E\n\u003Cp\u003E\n157742, 4528, 5.77, 455, 194893, 120\n\u003C/p\u003E\n\u003Cp\u003E\n164105, 4722, 4.72, 392, 191664, 105\n\u003C/p\u003E\n\u003Cp\u003E\n169548, 4952, 3.86, 333, 189799, 90\n\u003C/p\u003E\n\u003Cp\u003E\n174144, 5217, 3.07, 279, 188904, 75\n\u003C/p\u003E\n\u003Cp\u003E\n177973, 5524, 2.4, 231, 188864, 60\n\u003C/p\u003E\n\u003Cp\u003E\n181230, 5914, 1.85, 191, 189841, 45\n\u003C/p\u003E\n\u003Cp\u003E\n183893, 6409, 1.48, 166, 192853, 30\n\u003C/p\u003E\n\u003Cp\u003E\n186306, 7059, 1.29, 159, 210205, 15\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-07T15:56:34Z\u0022 title=\u002202/07/2018 03:56  PM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 7, 2018\u003C/time\u003E by Nich\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-07T16:05:45Z","Content":"\n\u003Cp\u003E\nVertical Speed vs Time has a very nice linear graph.\u00A0 I will have to try something with this in the logic\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022https://i.imgur.com/v3bMdQ9.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022v3bMdQ9.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2018-02-12T15:41:56Z","Content":"\n\u003Cp\u003E\nBeen busy with work so I have not had much time to work on this but I have been thinking about it.\u00A0 Please leave any comments or suggestions\n\u003C/p\u003E\n\u003Cp\u003E\nThe area under the curve is the altitude (m/s * s)\n\u003C/p\u003E\n\u003Cp\u003E\nSince this is roughly triangular I feel it is a good enough approximation to assume Final AP = 1/2*base*height.\n\u003C/p\u003E\n\u003Cp\u003E\nBase is fixed and is the burn time (398s).\n\u003C/p\u003E\n\u003Cp\u003E\nFinal AP is 150,000m\u00A0 (user specified).\n\u003C/p\u003E\n\u003Cp\u003E\nHeight is the maximum vertical speed. 150,000*2/398 = 754m/s\n\u003C/p\u003E\n\u003Cp\u003E\nFrom here is gets a little tricky.\u00A0 The shape of the triangle can anything from a right triangle to an equilateral and my previous assumption is still valid.\u00A0 Now I think the best way to go is to assume Min and Max points I feel the triangle should be allowed to have.\u00A0 The first makes sense to me and is the midpoint of the burn (398/2).\u00A0 The other I will have to take from the empirical data. (398/1.65).\n\u003C/p\u003E\n\u003Cp\u003E\nFrom this I can make 2 lines to use during phase 1 of launch\n\u003C/p\u003E\n\u003Cp\u003E\nline 1 (0,0) to (199,754) and line 2 (0,0) to (241,754).\u00A0 When line 1 is crossed the rocket will pitch up relative to prograde and line 2 will pitch down.\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 2 starts when a vertical speed of 754 is reached.\u00A0 At this time we will construct a new line from (398,0) to (x,754) and use a PID to track this line to the end of the burn.\n\u003C/p\u003E\n\u003Cp\u003E\nPhase 3 will track 0m/s vertical speed until circularized.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-12T15:44:31Z\u0022 title=\u002202/12/2018 03:44  PM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 12, 2018\u003C/time\u003E by Nich\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"EpicSpaceTroll139","CreatedById":162839,"CreatedDateTime":"2018-02-16T14:29:49Z","Content":"\n\u003Cp\u003E\nWhat I did for my kOS guided space shuttle launch was create an off-horizon pitch angle as a (non-linear) function of altitude. I based it off of a generic gravity turn I do in KSP, generally trying to smoothly tilt over and have have my nose at 45 degrees at 10km altitude.\n\u003C/p\u003E\n\u003Cp\u003E\nGranted, the result of my script wasn\u0027t technically a gravity turn, but it was reasonably close, and being a function of altitude, could correct for changes of \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E by keeping the nose up longer if the \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E is lower than expected (thus the shuttle is staying in the lower atmosphere longer), or nosing over faster if the \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E is higher than expected (thus the shuttle gets to the upper atmosphere quicker).\n\u003C/p\u003E\n\u003Cp\u003E\nThe caveat to this is that it likely only works well for stable rockets, which do not risk flipping and or breaking up if the nose is brought more than a couple degrees off prograde. This could perhaps be mitigated to some extent by averaging the prograde vector in with the function-generated steering vector, thus keeping closer to the line of travel.\n\u003C/p\u003E\n\u003Cp\u003E\nAll this being said, if you look up \u0022PEGAS\u0022 (Powered Explicit Guidance Ascent System iirc) on the forums here, I think you will find a thread on a kOS script that uses real-world guidance algorithms to guide rockets to orbit. I have not tried using it myself, but it definitely warrants a look at least for the understanding of rocket guidance it gives.\n\u003C/p\u003E\n\u003Cp\u003E\nI believe that any guidance script that follows a gravity turn will require inputs of the stats for each stage of a rocket before launch. It may be possible to make the script capable of crawling through the parts tree and determine what stages when and how the rocket will fly, but that\u0027s past my level at the moment.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: this page, while from the orbiter wiki and not KSP, is still applicable and gives a good overlook of equations and such used in the Powered Explicit Guidance algorithms\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-17T03:44:30Z\u0022 title=\u002202/17/2018 03:44  AM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 17, 2018\u003C/time\u003E by EpicSpaceTroll139\u003C/strong\u003E\n\u003Cbr\u003EDang autocorrect\n\u003C/span\u003E\n"}]}