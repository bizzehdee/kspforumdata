{"TopicId":36458,"ForumId":36,"TopicTitle":"SteamGauges Beta release 1.6.1b [27 Dec]","CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-07-09T18:23:50Z","PageNum":2,"Articles":[{"CreatedByName":"MasseFlieger","CreatedById":74250,"CreatedDateTime":"2013-08-08T10:21:37Z","Content":"\n\u003Cp\u003EHi trueborn, \u003C/p\u003E\u003Cp\u003EYour mod is simply amazing. I am hoping that in your next work around the markers you include the velocity vector as part of the HUD? Apologies if you have said that already. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nothke","CreatedById":51185,"CreatedDateTime":"2013-08-08T11:31:17Z","Content":"\n\u003Cp\u003EWow having a hud in IVA is awesome.. but pleaaaaaase change that newspaper font into something that looks more technical but thick enough to be easibly readable like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://strikefighterconsultinginc.com/wp-content/uploads/2012/03/url7.jpg\u0022 alt=\u0022url7.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003Eor\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.simhq.com/_air14/images/air_507a_026.jpg\u0022 alt=\u0022air_507a_026.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-08T11:35:08Z\u0022 title=\u002208/08/2013 11:35  AM\u0022 data-short=\u002210 yr\u0022\u003EAugust 8, 2013\u003C/time\u003E by nothke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-08T13:27:37Z","Content":"\n\u003Cp\u003EYeah, I\u0027ll take a look at some other fonts, I\u0027m not entirely pleased with this one either.\u003C/p\u003E\u003Cp\u003EAnd yes, vectors are coming soon \u003C/p\u003E\n"},{"CreatedByName":"WedgeJAntilles","CreatedById":67191,"CreatedDateTime":"2013-08-08T16:26:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trueborn\u0022 data-cite=\u0022Trueborn\u0022\u003E\u003Cdiv\u003EThe markers will come first, but that sounds very interesting. From some brief research, that mode would essentially display (0, 0, 0) (pitch, yaw, roll) as the prograde vector? Thus, to burn prograde you just burn at (0, 0, 0), and retrograde would be (0, 180, 0). To increase inclination (0, 90, 0), etch. That sound about right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, pretty much. Basically it treats the orbital plane like the horizon. Very useful since, once you\u0027re in orbit, you don\u0027t care about your attitude relative to the surface so much as your attitude relative to your current orbit.\u003C/p\u003E\u003Cp\u003EAnyway, I haven\u0027t had a chance to play with the HUD yet, but I\u0027m really looking forward to it. I do a lot of IVA-only missions, and SteamGauges has already made it easy for me to do a lot of stuff I couldn\u0027t do before. Keep up the good work!\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-13T02:32:52Z","Content":"\n\u003Cp\u003ENew beta release! Lots of HUD improvements, as well as a few other fixes. The target relative velocity vector is in place, but no other vectors yet. Future improvements include orbital mode (forward velocity is North, and 0 degrees), vertical ascent mode (replaces pitch ladder at high attitudes). Also, the advanced settings window has been expanded because it was getting too big.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/5wyQopb.png\u0022 alt=\u00225wyQopb.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/yh8bxrz.png\u0022 alt=\u0022yh8bxrz.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs usual, feedback is appreciated.\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-08-13T11:01:33Z","Content":"\n\u003Cp\u003EWhen the HUD is scaled, a black halo appears around its green elements. This is an obvious non-premultiplied alpha artifact, and to fix it you need to either find a way to render your textures with premultiplied alpha, or modify your png images to work around the issue. Specifically, you need to make the image contain a constant green field in the color channel, and only use the alpha to outline the elements; currently transparent areas are black instead. Note the difference after I edited a few images:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/DItevmB.png\u0022 alt=\u0022DItevmB.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt does make the image appear more blurry and hard to see over the bright cyan/white portion of the sky near the horizon - but easier to see over the grass.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-13T15:23:45Z","Content":"\n\u003Cp\u003EHmm, I\u0027ll play around in GIMP and see what I can do. Alternately, this is how I\u0027m doing the Alpha blending currently:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//Alpha blending\u003Cbr\u003EColor tmpColor = GUI.color;\u003Cbr\u003EGUI.color = new Color(1, 1, 1, SteamGauges.Alpha);     //Alpha is the global alpha scale between 1 and 0.10 \u003Cbr\u003E...\u003Cbr\u003EGUI.color = tmpColor;   //reset Alpha blend\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIs there a better way to do this that would eliminate the issue?\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-08-13T16:03:15Z","Content":"\n\u003Cp\u003EThe problem is in how the color in the textures is blended into the final image by GPU - specifically, how it interprets the alpha channel value. The naive alpha model that everyone knows, where transparency is just added parallel to unchanged color data, does not actually allow mathematically sound linear interpolation. It\u0027s easy to realize: if you interpolate white fully opaque color and black fully transparent, you should be getting white half transparent, because in reality there is only one fully transparent \u0027color\u0027, with no actual color information. Instead you get half-transparent grey (or dark green like with these images) - that spurious black leaks into the visible image.\u003C/p\u003E\u003Cp\u003EThe solution to this is to multiply the color data by the alpha value before interpolation, instead of after - this is called premultiplied alpha. This obviously requires appropriately prepared texture images, and an option in the rendering engine to stop it doing the exact same multiplication during the actual final blending. Alternatively, in this case you can get away with a texture that in effect contains only alpha data, and fixed color for all pixels.\u003C/p\u003E\u003Cp\u003EWhat I\u0027ve done to those images is basically:\u003C/p\u003E\u003Cp\u003E1. Open in GIMP, right click on the layer, select Add layer mask, then Transfer alpha from layer.\u003C/p\u003E\u003Cp\u003E2. Right click layer again, check Disable layer mask and uncheck Edit layer mask if set. This reveals the green on black color channel data.\u003C/p\u003E\u003Cp\u003E3. Paint the image all flat green.\u003C/p\u003E\u003Cp\u003E4. Save as png.\u003C/p\u003E\u003Cp\u003E(You might potentially also try to instead convert them to TextureFormat.Alpha8 after loading in your code to leave only the alpha channel in memory, and apply the green color via that color thing. This would allow an option to change the color \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/p\u003E\u003Cp\u003ERegarding the observed blurring, I wonder if Unity/KSP is doing any silly in-memory compression of the texture images on the fly as they are loaded. These particular textures absolutely must not be compressed. Are you using any KSP functions to load the pictures, or pure original Unity API?\u003C/p\u003E\u003Cp\u003EEdit: Ah, btw one image is named \u0022HUD_...\u0022 and thus fails to load on linux unless renamed.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-13T16:12:50Z\u0022 title=\u002208/13/2013 04:12  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 13, 2013\u003C/time\u003E by a.g.\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-13T16:12:24Z","Content":"\n\u003Cp\u003EHere is how I\u0027m loading all my textures. I\u0027m sure there\u0027s a better way. I\u0027ll try doing that in GIMP.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EByte[] arrBytes;\u003Cbr\u003Epublic static Texture2D Node_no_node = new Texture2D(width, height);\u003Cbr\u003EarrBytes = KSP.IO.File.ReadAllBytes\u0026lt;SteamGauges\u0026gt;(\u0022Node_no_node.png\u0022);\u003Cbr\u003ENode_no_node.LoadImage(arrBytes);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThanks for all your help, I\u0027m not too familiar with textures, or Unity for that matter.\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-08-13T16:30:59Z","Content":"\n\u003Cp\u003EI think unless you are calling the Compress method yourself later, that bit of code shouldn\u0027t be doing any weird compression. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I wonder why those G and B icons become such unreadable blobs at small scales if the black discoloration is fixed.\u003C/p\u003E\u003Cp\u003EYou could also paint the image pure white instead of pure green in the above process, and try applying the color via that GUI.color setting. An Alpha8 texture I mentioned is completely equivalent to such an RGBA image - it just uses less memory since it doesn\u0027t actually store the uniform white color.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-13T19:54:46Z","Content":"\n\u003Cp\u003EPesky capitalized file changed.\u003C/p\u003E\u003Cp\u003EIt does look like I can assign arbitrary colors to the texture elements using GUI.color. So eventually, expect fully customizable HUD colors (it\u0027ll be global to the whole HUD though, because anything else you might as well just repaint the darn textures yourselves). Unfortunately, I\u0027ve only gotten it to work on textures that are a single layer of text. If I create a new layer from visible and run through the steps above, I end up with a pure green (or white) texture. Same with merging them all into a single texture first. Use of the Alpha8 format doesn\u0027t seem to be affecting it (visually) one way or another. Any thoughts on that?\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-08-14T06:15:19Z","Content":"\n\u003Cp\u003ECould you elaborate? The steps I wrote are supposed to be used on the png files in the zip, which by definition contain one layer. The goal of the whole process is to end up with a png file that has the color channel filled with one uniform color, and only contains useful information in the alpha channel. With multiple layers the inter-layer blending in gimp may be messing things up.\u003C/p\u003E\u003Cp\u003EUsing Alpha8 is clunky because you apparently have to actually convert the texture in your C# code by adding something like this to the above (obviously untested since I have no full source code to put this in \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETexture2D alpha = new Texture2D(width, height, TextureFormat.Alpha8);\u003Cbr\u003Ealpha.SetPixels(Node_no_node.GetPixels());\u003Cbr\u003Ealpha.Apply();\u003Cbr\u003EDestroy(Node_no_node); // hopefully free the memory for the first object quicker\u003Cbr\u003ENode_no_node = alpha;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"SpaceK531","CreatedById":62535,"CreatedDateTime":"2013-08-14T06:41:20Z","Content":"\n\u003Cp\u003EIs there a way to reset gauge position? When I switched from a large screen to a smaller screen, most of the gauges got swallowed up.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-14T12:43:50Z","Content":"\n\u003Cp\u003E@SpaceK531: Absolutely. In your GameData\\SteamGauges\\Plugins\\PluginData\\SteamGauges folder there is a file called \u0022config\u0022. You can either open it and manually put the gauges where you want (with xmin and ymin), or just delete the file and the plugin will rebuild it the next time you start KSP. Everything should be pretty safely in the upper left hand corner. I\u0027ll look into a screen size safety though, so people can\u0027t completely loose gauges off the screen.\u003C/p\u003E\u003Cp\u003E@a.g.: I was trying it from my original texture files, I\u0027ll try just editing the .png\u0027s after I get off work. I\u0027ll try that alpha8 conversion as well.\u003C/p\u003E\n"},{"CreatedByName":"Alskari","CreatedById":57638,"CreatedDateTime":"2013-08-14T14:46:10Z","Content":"\n\u003Cp\u003EIs there a way to limit the HUD view to IVA only? I\u0027d be willing to learn how to make a prop if you\u0027re interested. A lot of my modeling is pretty blocky, but that\u0027s due more to collision mesh issues than ability.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-14T17:19:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alskari\u0022 data-cite=\u0022Alskari\u0022\u003E\u003Cdiv\u003EIs there a way to limit the HUD view to IVA only? I\u0027d be willing to learn how to make a prop if you\u0027re interested. A lot of my modeling is pretty blocky, but that\u0027s due more to collision mesh issues than ability.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERight now I think I\u0027ll stick to a straight plugin, but thanks for the offer. I\u0027ll take a look at only enabling it in IVA, and add the option if it isn\u0027t that hard.\u003C/p\u003E\n"},{"CreatedByName":"SpaceK531","CreatedById":62535,"CreatedDateTime":"2013-08-14T18:33:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trueborn\u0022 data-cite=\u0022Trueborn\u0022\u003E\u003Cdiv\u003E@SpaceK531: Absolutely. In your GameData\\SteamGauges\\Plugins\\PluginData\\SteamGauges folder there is a file called \u0022config\u0022. You can either open it and manually put the gauges where you want (with xmin and ymin), or just delete the file and the plugin will rebuild it the next time you start KSP. Everything should be pretty safely in the upper left hand corner. I\u0027ll look into a screen size safety though, so people can\u0027t completely loose gauges off the screen.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs there a thing in the KSP API that tells you screen dimensions?\u003C/p\u003E\u003Cp\u003EIf you enabled a hard-coded limit then those with ridiculously large screens might have a bad time.\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-08-14T18:49:31Z","Content":"\n\u003Cp\u003EMechJeb clips window positions \u003Ca href=\u0022https://github.com/MuMech/MechJeb2/blob/master/MechJeb2/DisplayModule.cs#L13\u0022 rel=\u0022external nofollow\u0022\u003Elike this\u003C/a\u003E so that its windows cannot be moved off screen.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-14T20:20:20Z","Content":"\n\u003Cp\u003EI want you to be able to move part (most) of the window off screen if you want, but not all of it. So I\u0027ll probably use a buffer of like, 10 pixels so the left edge of the window can\u0027t go past width-10, and the left edge can\u0027t go past 10, etc. Thanks for the link a.g. and I\u0027ll see what I can do with those textures, now that I\u0027m off for the day.\u003C/p\u003E\n"},{"CreatedByName":"TheCardinal","CreatedById":22874,"CreatedDateTime":"2013-08-17T14:47:16Z","Content":"\n\u003Cp\u003EI like the instruments very much. Disadvantage is only the amount of screen covered by them.\u003C/p\u003E\u003Cp\u003EOne thing i\u0027m still missing is an anunciaterpanel (preferably with sound) with Master, Temp., Fuel, RCS, Electricity (etc.).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-17T14:58:46Z\u0022 title=\u002208/17/2013 02:58  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 17, 2013\u003C/time\u003E by TheCardinal\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"GrizzlyJones","CreatedById":75892,"CreatedDateTime":"2013-08-17T19:25:30Z","Content":"\n\u003Cp\u003EHey, I\u0027ve been having a problem with the gauges, and I\u0027m not sure if its a problem with the mod or on my end, but all of the gauges are completely unreadable. All of the textures are blurred I can\u0027t read any of the numbers or writing on them. Now at first I just figured it was the Video settings, because I keep them all down, cause my computer is slow a hell, but I even put them all the way up, and still, they were still bad looking, so unless I\u0027m missing something, I can\u0027t seem to get them to be legible.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-18T14:04:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022GrizzlyJones\u0022 data-cite=\u0022GrizzlyJones\u0022\u003E\u003Cdiv\u003EHey, I\u0027ve been having a problem with the gauges, and I\u0027m not sure if its a problem with the mod or on my end, but all of the gauges are completely unreadable. All of the textures are blurred I can\u0027t read any of the numbers or writing on them. Now at first I just figured it was the Video settings, because I keep them all down, cause my computer is slow a hell, but I even put them all the way up, and still, they were still bad looking, so unless I\u0027m missing something, I can\u0027t seem to get them to be legible.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhich version are you using? The latest version should have improved HUD readability. What resolution are you running, and have you scaled the gauges up larger? Also, a screen shot might help.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheCardinal\u0022 data-cite=\u0022TheCardinal\u0022\u003E\u003Cdiv\u003EI like the instruments very much. Disadvantage is only the amount of screen covered by them.\u003Cp\u003E One thing I\u0027m still missing is an annunciator panel (preferably with sound) with Master, Temp., Fuel, RCS, Electricity (etc.). \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the next version, the Maneuver Node, Rendezvous, an Radar Altimeter gauges will auto-hide when not valid. This should help a bit with clutter. Turning off the bezels helps as well. I\u0027ve generally tried to incorporate warning lights in gauges, but I\u0027ll consider a master panel.\u003C/p\u003E\n"},{"CreatedByName":"TheCardinal","CreatedById":22874,"CreatedDateTime":"2013-08-18T16:58:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trueborn\u0022 data-cite=\u0022Trueborn\u0022\u003E\u003Cdiv\u003E....... I\u0027ve generally tried to incorporate warning lights in gauges, but I\u0027ll consider a master panel.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESuper! That\u0027s exactly what i meant\u003C/p\u003E\n"},{"CreatedByName":"MK3424","CreatedById":19932,"CreatedDateTime":"2013-08-18T21:33:20Z","Content":"\n\u003Cp\u003EWhere is 1.4b? i can\u0027t find it on Spaceport and neither is it on Skydrive.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2013-08-19T01:49:34Z","Content":"\n\u003Cp\u003ESorry. I can put it back up, but its been supplanted by stable 1.2 Yeah, my numbering system sucks.\u003C/p\u003E\n"}]}