{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":4,"Articles":[{"CreatedByName":"Thomas988","CreatedById":92699,"CreatedDateTime":"2015-04-16T14:50:38Z","Content":"\u003E \n\u003E Again, something is almost making me want to come back to this game.\n\u003E Glad to see a proper mod for what our E.V.E packs were trying to create.\n\nYeah, it\u0027s a shame Rbray is gone. This mod is looking *amazing*, so hopefully we can have something better than EVE in the future."},{"CreatedByName":"papics","CreatedById":77783,"CreatedDateTime":"2015-04-16T14:52:50Z","Content":"Holy kerbal, this is simply amazing. I logged into the forum after I don\u0027t know how long to give you rep. Keeping an eye on this for sure (such a shame I am stuck in 0.24 because 0.90 does not love Macs much...)."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T15:13:09Z","Content":"\u003E \n\u003E Holy kerbal, this is simply amazing. I logged into the forum after I don\u0027t know how long to give you rep. Keeping an eye on this for sure (such a shame I am stuck in 0.24 because 0.90 does not love Macs much...).\n\nGuess what, it works in 0.24 ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"papics","CreatedById":77783,"CreatedDateTime":"2015-04-16T15:18:02Z","Content":"\u003E \n\u003E guess what, it works in 0.24 ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\noh, my, god...!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T15:21:13Z","Content":"\u003E \n\u003E oh, my, god...!\n\nIt\u0027s been reported to have problems with macs though..."},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2015-04-16T15:29:04Z","Content":"\u003E \n\u003E I\u0027ll get around to it... eventually. I haven\u0027t worked on it today because I had too much fun just flying around sightseeing in kerbin.\n\u003E ![9XQdA3A.jpg](http://i.imgur.com/9XQdA3A.jpg)\n\nExcellent progress!\n\nThere\u0027s an odd sense of transparency in the above image. I can\u0027t quite place why. It seems to be a mix of the haze colour lightening with distance from the camera and approaching the colour of the horizon, and the way the haze reduces with altitude, making the hills fade as they approach the tops of the ones in front of them.\n\nIt may be due to the time of day. Looking at other images and playing around with Google Earth\u0027s atmospheric effects, the sky colour seems to pick up a red tint towards the distant horizon, giving it a slight grey-brown appearance as it mixes with the blue:\n\n![screen_20061211_mountains.jpg](http://www.malteclasen.de/zib/media/screen_20061211_mountains.jpg)\n\n![700633main_ED12-0306-10.jpg](http://www.nasa.gov/sites/default/files/images/700633main_ED12-0306-10.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-04-16T16:00:40Z\u0022 title=\u002204/16/2015 04:00  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 16, 2015\u003C/time\u003E by pizzaoverhead**"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-04-16T15:55:58Z","Content":"Will offer the mod the possibility of tweaking parameters (via GUI or settings file)?\n\nCould be used in other planets, even the huge ones like Jool?\n\nI was waiting for your license too.\n\nI love this. If I can help you in any task (arts, settings or tests), just tell me."},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-04-16T16:39:41Z","Content":"How expensive is this?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T16:53:07Z","Content":"\u003E \n\u003E Excellent progress!\n\u003E There\u0027s an odd sense of transparency in the above image. I can\u0027t quite place why. It seems to be a mix of the haze colour lightening with distance from the camera and approaching the colour of the horizon, and the way the haze reduces with altitude, making the hills fade as they approach the tops of the ones in front of them.\n\nYou\u0027re correct about this, in that image the layers of mountains are close together, but the problem is that the atmosphere is rather low and the color of the terrain approaching the horizon is waay too close to that of the sky.\n\nYou can see it in this pic where I removed the sky, the mountains are just too light.\n\n![gWKZPKi.jpg](http://i.imgur.com/gWKZPKi.jpg)\n\nI think in real-life it\u0027s darker, this is just about getting the settings righ now.\n\n\u003E \n\u003E Will offer the mod the possibility of tweaking parameters (via GUI or settings file)?\n\u003E Could be used in other planets, even the huge ones like Jool?\n\u003E \n\u003E I was waiting for your license too.\n\u003E \n\u003E I love this. If I can help you in any task (arts, settings or tests), just tell me.\n\nYes, I will add the possiblity of making your own config and adding atmosphere to any planet."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-04-16T16:58:16Z","Content":"Getting a lot of errors trying to use this. When I load into a game, the camera is stuck in an odd view of the KSC and the following error occurs multiple times in the log\n\n    IndexOutOfRangeException: Array index is out of range.  at scatterer.Manager.SetUniforms (UnityEngine.Material mat) [0x00000] in :0   at scatterer.SkyNode.UpdateNode () [0x00000] in :0   at scatterer.Manager.Update () [0x00000] in :0   at scatterer.Core.Update () [0x00000] in :0 (Filename:  Line: -1)\n\nUpon exiting to main menu, I\u0027m unable to click anything.\n\nfull log: [https://www.dropbox.com/s/g367pay79hzyhbs/output_log.scattering.errors.zip?dl=1](https://www.dropbox.com/s/g367pay79hzyhbs/output_log.scattering.errors.zip?dl=1)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T17:09:50Z","Content":"\u003E \n\u003E Getting a lot of errors trying to use this. When I load into a game, the camera is stuck in an odd view of the KSC and the following error occurs multiple times in the log\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     IndexOutOfRangeException: Array index is out of range.  at scatterer.Manager.SetUniforms (UnityEngine.Material mat) [0x00000] in :0   at scatterer.SkyNode.UpdateNode () [0x00000] in :0   at scatterer.Manager.Update () [0x00000] in :0   at scatterer.Core.Update () [0x00000] in :0 (Filename:  Line: -1)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Upon exiting to main menu, I\u0027m unable to click anything.\n\u003E \n\u003E full log: [https://www.dropbox.com/s/g367pay79hzyhbs/output_log.scattering.errors.zip?dl=1](https://www.dropbox.com/s/g367pay79hzyhbs/output_log.scattering.errors.zip?dl=1)\n\nWhich OS are you running? I\u0027ve been getting lots of similar reports on OSX and linux, I have a few several wonky implementations that get stuff from cameras and I suspect these are the main culprits, I\u0027ll try to fix this as soon as I can."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-04-16T17:17:08Z","Content":"\u003E \n\u003E Which OS are you running? I\u0027ve been getting lots of similar reports on OSX and linux, I have a few several wonky implementations that get stuff from cameras and I suspect these are the main culprits, I\u0027ll try to fix this as soon as I can.\n\nIt\u0027s Windows 8."},{"CreatedByName":"HerrGeneral","CreatedById":63453,"CreatedDateTime":"2015-04-16T18:01:47Z","Content":"To me it feels just a little bit too \u0022thick\u0022, what does it look like if you turn down the intensity of the fog a little bit?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T18:17:48Z","Content":"\u003E \n\u003E To me it feels just a little bit too \u0022thick\u0022, what does it look like if you turn down the intensity of the fog a little bit?\n\nRight now you can\u0027t turn down the intensity, you can scale it up or down but it messes up because it\u0027s related to the planet\u0027s scale. Right now the only solution is to generate a separate scattering table for the ground with the settings turned down. I haven\u0027t tried it yet but it may or may not result in decreased performance.\n\nI tried the easy way by just editing transparency but it doesn\u0027t look good at all."},{"CreatedByName":"djnattyd","CreatedById":63737,"CreatedDateTime":"2015-04-16T18:51:12Z","Content":"Any chance of adding your licence and source Blackrack? D/L\u0027s have been disabled as these are missing."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T19:51:41Z","Content":"I\u0027ve uploaded the source and license and put back the download link."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-16T20:06:48Z","Content":"blackrack, I\u0027ve taken the liberty of adding the license to your OP as required, please add a copy of it to the .zip you\u0027ve packaged for download, as requested [here](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod?p=1840538\u0026viewfull=1#post1840538). \n\nSorry to be a stickler about this, but these rules protect both our community and the rights of modders."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-04-16T20:14:35Z","Content":"Cool!! Does it work from other planets? It would be super amazing if you could get Jool as well the Sun to scatter when on Laythe ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif). I\u0027ll be looking to using this for my future vids possibly!\n\n**Edited \u003Ctime datetime=\u00222015-04-16T20:16:50Z\u0022 title=\u002204/16/2015 08:16  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 16, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-16T20:40:12Z","Content":"\u003E \n\u003E blackrack, I\u0027ve taken the liberty of adding the license to your OP as required, please add a copy of it to the .zip you\u0027ve packaged for download, as requested [here](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod?p=1840538\u0026viewfull=1#post1840538). \n\u003E Sorry to be a stickler about this, but these rules protect both our community and the rights of modders.\n\nAlright, gonna do this now, at least you know how insisting you are ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nEdited: Done, download link moved to kerbalstuff.\n\n\u003E \n\u003E Cool!! Does it work from other planets? It would be super amazing if you could get Jool as well the Sun to scatter when on Laythe ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif). I\u0027ll be looking to using this for my future vids possibly!\n\nThe jool thing might be hard to do, but if all else fails we could just play around with transparency.\n\n**Edited \u003Ctime datetime=\u00222015-04-16T20:57:49Z\u0022 title=\u002204/16/2015 08:57  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 16, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-04-16T22:03:24Z","Content":"Wow, this is simply amazing looking! It gives a real sense of scale to Kerbin."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-04-16T23:58:51Z","Content":"I\u0027m thinking of making a short video of this. This mod doesn\u0027t have one yet."},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-04-17T00:08:49Z","Content":"\u003E \n\u003E I\u0027m thinking of making a short video of this. This mod doesn\u0027t have one yet.\n\nDamn and I was there thinking those screens were fakes! Nice!!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T00:30:22Z","Content":"\u003E \n\u003E Damn and I was there thinking those screens were fakes! Nice!!\n\nIf you\u0027re talking about that one random screen on reddit two weeks ago... I threw that together in photoshop when I first started working on this mod to generate hype. So yeah ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-04-17T00:33:31Z\u0022 title=\u002204/17/2015 12:33  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 17, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Robotengineer","CreatedById":104525,"CreatedDateTime":"2015-04-17T00:44:28Z","Content":"I\u0027m getting the same error that other Linux/Mac users are getting. Heres part of the log. I\u0027m going to hazard a guess that it\u0027s the OpenGL issue, but I\u0027m not sure.\n\n    [EXC 19:39:03.408] IsolatedStorageException: Could not find a part of the path \u0022/home/swtwtrgrad/Desktop/KSP_RSS/GameData/scatterer\\ReplacementShaders/CompiledPQSProjectionSurfaceQuad.shader\u0022.\tSystem.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions options)\tSystem.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean isAsync, Boolean anonymous)\tSystem.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access)\tscatterer.ShaderTool.GetShader2 (System.String resource)\tscatterer.ShaderReplacer.GetShaderFromName (System.String name)\tscatterer.ShaderReplacer.ReplaceShader (UnityEngine.Material mat)\tscatterer.ShaderReplacer.GameSceneLoaded (GameScenes scene)\tEventData\u00601[GameScenes].Fire (GameScenes data)\tHighLogic.LoadScene (GameScenes scene)\tGame.Start ()\tMainMenu.ConfirmLoadGame ()\tMainMenu.DrawLoadGame (Int32 id)\tUnityEngine.GUILayout\u002BLayoutedWindow.DoWindow (Int32 windowID)\tUnityEngine.GUI.CallWindowDelegate (UnityEngine.WindowFunction func, Int32 id, UnityEngine.GUISkin _skin, Int32 forceRect, Single width, Single height, UnityEngine.GUIStyle style)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T00:46:30Z","Content":"\u003E \n\u003E I\u0027m getting the same error that other Linux/Mac users are getting. Heres part of the log. I\u0027m going to hazard a guess that it\u0027s the OpenGL issue, but I\u0027m not sure.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     [EXC 19:39:03.408] IsolatedStorageException: Could not find a part of the path \u0022/home/swtwtrgrad/Desktop/KSP_RSS/GameData/scatterer\\ReplacementShaders/CompiledPQSProjectionSurfaceQuad.shader\u0022.\tSystem.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions options)\tSystem.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean isAsync, Boolean anonymous)\tSystem.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access)\tscatterer.ShaderTool.GetShader2 (System.String resource)\tscatterer.ShaderReplacer.GetShaderFromName (System.String name)\tscatterer.ShaderReplacer.ReplaceShader (UnityEngine.Material mat)\tscatterer.ShaderReplacer.GameSceneLoaded (GameScenes scene)\tEventData\u00601[GameScenes].Fire (GameScenes data)\tHighLogic.LoadScene (GameScenes scene)\tGame.Start ()\tMainMenu.ConfirmLoadGame ()\tMainMenu.DrawLoadGame (Int32 id)\tUnityEngine.GUILayout\u002BLayoutedWindow.DoWindow (Int32 windowID)\tUnityEngine.GUI.CallWindowDelegate (UnityEngine.WindowFunction func, Int32 id, UnityEngine.GUISkin _skin, Int32 forceRect, Single width, Single height, UnityEngine.GUIStyle style)\n\nLooks like there\u0027s an inverted \u0022/\u0022, is this like a platform-specific thing? Hold on I\u0027ll check why it works for the rest of the path.\n\nEdited: Replace your scatterer.dll with this [http://s000.tinyupload.com/index.php?file_id=42296570119783257966](http://s000.tinyupload.com/index.php?file_id=42296570119783257966)\n\nReport back if it works and I\u0027ll update the link in the OP.\n\nAlso, right now the haze shader doesn\u0027t work in opengl but you should at least get in game and get the sky shaders.\n\n**Edited \u003Ctime datetime=\u00222015-04-17T00:52:33Z\u0022 title=\u002204/17/2015 12:52  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 17, 2015\u003C/time\u003E by blackrack**"}]}