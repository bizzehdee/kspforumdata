{"TopicId":138718,"ForumId":20,"TopicTitle":"Underwater Physics","CreatedByName":"ThatOneBritishGuy...","CreatedById":144135,"CreatedDateTime":"2016-05-02T03:25:14Z","PageNum":1,"Articles":[{"CreatedByName":"ThatOneBritishGuy...","CreatedById":144135,"CreatedDateTime":"2016-05-02T03:25:14Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022line-height:1.6;\u0022\u003ESo after playing with \u003C/span\u003E\u003Ca data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022105198\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/\u0022 rel=\u0022\u0022\u003E@RoverDude\u003C/a\u003E\u003Cspan style=\u0022line-height:1.6;\u0022\u003E\u0027s Otter Submarine mod (which you should definitely check out if you haven\u0027t) for a while, I noticed a few things. One: It\u0027s very fun to drive a sub all over Kerbin, and two: that the stock underwater effects are extremely unaccomodating. Not only is it impossible to see the sea floor beyond \u00A0a certain depth, and the surface of the water at all, but the fog does little to create an illusion of depth, with it\u0027s ridiculous lighting effects which look more like the souposphere of pre-0.90 than water. In short, while the mod is extremely fun to play with the way stock handles being underwater, while obviously far better than olden days, is still terribad. In short, what I would like to ask is whether or not it is feasible to ovveride the stock Water System with a better one. I believe \u003C/span\u003E\u003Ca data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/78435-fengist/\u0026amp;do=hovercard\u0022 data-mentionid=\u002278435\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/78435-fengist/\u0022 rel=\u0022\u0022\u003E@Fengist\u003C/a\u003E\u003Cspan style=\u0022line-height:1.6;\u0022\u003E\u00A0was working of something of the sort before he left the forums, but I haven\u0027t a clue about the specifics of it.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nScreenshots for emphasis:\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/2KYFV/embed?background=ffffff\u0026amp;text=1a1a1a\u0026amp;link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/lnzKw/embed?background=ffffff\u0026amp;text=1a1a1a\u0026amp;link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-02T03:30:38Z\u0022 title=\u002205/02/2016 03:30  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 2, 2016\u003C/time\u003E by ThatOneBritishGuy...\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"BT Industries","CreatedById":156823,"CreatedDateTime":"2016-05-02T06:31:18Z","Content":"\n\u003Cp\u003E\nI agree underwater physics would be really cool.\n\u003C/p\u003E\n\u003Cp\u003E\nThis game is longer just a space sim...\n\u003C/p\u003E\n\u003Cp\u003E\nIts a everything sim.\n\u003C/p\u003E\n\u003Cp\u003E\nKSP is great for building any crazy idea you have and trying to make it work in a realistic enviroment, except for submarines.\n\u003C/p\u003E\n"},{"CreatedByName":"ShotgunNinja","CreatedById":159391,"CreatedDateTime":"2016-05-04T12:53:56Z","Content":"\n\u003Cp\u003E\nThey are doing the underwater rendering using the \u0027fog technique\u0027, that essentially mix the pixel color with a constant one blended by distance from camera. This is bad for multiple reasons and was probably hacked together in an afternoon, giving the focus of this game is space. What you need to do for good looking underwater renderings is taking into consideration the absorption coefficients and the length the ray travel inside water. You can use something as simple as this, as a postprocess:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nvec3 water_extinction(const vec3 clr, const float depth)\n{\n\treturn clr * clamp(water.extinction / depth, 0.0, 1.0);\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0where \u003Cem\u003Eclr\u003C/em\u003E is the pixel color on the screen,\u00A0\u003Cem\u003Edepth\u003C/em\u003E is the distance from camera (reconstruct\u00A0it from the z-buffer or whatever) plus distance from point to water surface in direction of the sun,\u00A0and \u003Cem\u003Eextinction\u003C/em\u003E contain the absorption coefficients for red, green and blue. (default for \u0027average\u0027 ocean water: [4.5f, 75.0f, 300.0f])\n\u003C/p\u003E\n"}]}