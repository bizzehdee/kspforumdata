{"TopicId":119738,"ForumId":29,"TopicTitle":"Part Module Creates Null Object Refference Error and Destroys Kerbin On Launch","CreatedByName":"K3achas","CreatedById":99468,"CreatedDateTime":"2015-08-30T13:34:30Z","PageNum":1,"Articles":[{"CreatedByName":"K3achas","CreatedById":99468,"CreatedDateTime":"2015-08-30T13:34:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EEXC 09:24:04.932] NullReferenceException: Object reference not set to an instance of an object\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhenever I launch a part with the following module, procedural parts module, and the procedural shapes module the above error is thrown. Any ideas on how to fix?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Reflection;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing ProceduralParts;\u003Cbr\u003E\u003Cbr\u003Enamespace ProceduralTech\u003Cbr\u003E{\u003Cbr\u003E\tpublic class ProceduralCabin : PartModule\u003Cbr\u003E\t{\u003Cbr\u003E\t\t[KSPField(guiActiveEditor=true)]\u003Cbr\u003E\t\tfloat cabinVolume;\u003Cbr\u003E\t\t[KSPField(guiActiveEditor=true)]\u003Cbr\u003E\t\tint crewSize;\u003Cbr\u003E\t\tPartModuleList modules;\u003Cbr\u003E\t\tProceduralPart rootStreach;\u003Cbr\u003E\t\tProceduralAbstractShape rootShape;\u003Cbr\u003E\t\tpublic float CrewDensity;\u003Cbr\u003E\t\tpublic float MassDensity;\u003Cbr\u003E\u003Cbr\u003E\t\tpublic override void OnStart(StartState state) {\u003Cbr\u003E\t\t\tmodules = part.Modules;\u003Cbr\u003E\t\t\tfor (int i = 0; i \u0026lt; modules.Count; i\u002B\u002B) { //find the procedural part module\u003Cbr\u003E\t\t\t\tif (modules [i].ClassName == \u0022ProceduralPart\u0022) {\u003Cbr\u003E\t\t\t\t\trootStreach = (ProceduralPart)modules [i];\u003Cbr\u003E\t\t\t\t}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\trootShape = rootStreach.CurrentShape;\u003Cbr\u003E//\t\t\tprint (\u0022CD = \u0022 \u002B CrewDensity.ToString ());\u003Cbr\u003E//\t\t\tprint (\u0022bla = \u0022 \u002B bla.ToString());\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tpublic void Update() {\u003Cbr\u003E\t\t\tif (HighLogic.LoadedSceneIsEditor) {\u003Cbr\u003E\t\t\t\tcabinVolume = rootShape.Volume;\u003Cbr\u003E//\t\t\t\tprint ((cabinVolume / CrewDensity).ToString());\u003Cbr\u003E\t\t\t\tcrewSize = (int)(cabinVolume / CrewDensity);\u003Cbr\u003E\t\t\t\tpart.CrewCapacity = crewSize;\u003Cbr\u003E\t\t\t\tpart.mass = cabinVolume / MassDensity;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tpublic override void OnLoad(ConfigNode ownNode) {\u003Cbr\u003E\t\t\tCrewDensity = float.Parse (ownNode.GetValue (\u0022CrewDensity\u0022));\u003Cbr\u003E\t\t\tMassDensity = float.Parse (ownNode.GetValue (\u0022MassDensity\u0022));\u003Cbr\u003E//\t\t\tprint (\u0022[Debug] CrewDensity = \u0022 \u002B CrewDensity.ToString());\u003Cbr\u003E//\t\t\tprint (\u0022[Debug] MassDensity = \u0022 \u002B MassDensity.ToString());\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-08-30T13:54:54Z","Content":"\n\u003Cp\u003EHard to tell if you don\u0027t post the whole exception (in the outputlog.txt) but most likely one of : \u003C/p\u003E\u003Cp\u003E - in OnStart you don\u0027t check if rootStreach returned a value\u003C/p\u003E\u003Cp\u003E - in Update you don\u0027t check if rootShape is set\u003C/p\u003E\n"},{"CreatedByName":"K3achas","CreatedById":99468,"CreatedDateTime":"2015-08-30T19:23:44Z","Content":"\n\u003Cp\u003EIt works fine in the VAB, where both variables are being used. It should also be noted that, while crewSize works correctly, part.crewCapacity isn\u0027t being correctly shown in the crew selection tab of the VAB.\u003C/p\u003E\u003Cp\u003EAnyone know a good file hositing site for the KSP.log\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-30T19:31:33Z\u0022 title=\u002208/30/2015 07:31  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 30, 2015\u003C/time\u003E by K3achas\u003C/strong\u003E\n\u003C/span\u003E\n"}]}