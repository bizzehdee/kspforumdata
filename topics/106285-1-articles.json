{"TopicId":106285,"ForumId":44,"TopicTitle":"Serious Bug in Convective Heating in The Game","CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-04-30T13:44:34Z","PageNum":1,"Articles":[{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-04-30T13:44:34Z","Content":"I posted this in gameplay questions, but did not get an answer...\n\nSo, i\u0027ve noticed that some of my craft appear to explode for no reason due to overheating in 1.0, so i decided to debug a bit.\n\nI think i\u0027ve found a serious problem:\n\nWhen i look at the ram intake temperature, it is larger than air stream temperature, and yet, the convective flux is still positive (when it was below air stream temperature, convective flux was negative)-- why? ![Rg01W6D.jpg](http://i.imgur.com/Rg01W6D.jpg)\n\nThis obviously violates Newton\u0027s law of cooling ( Q=h\\*A\\*(T-T\\_fluid) ). Yes, h might be a complicated function of Reynolds, attitude, Mach etc... but these only effect magnitude, not sign. Thus, if T \u003C T\\_fluid, T cannot become larger than T\\_fluid...\n\nTo highlight this point, another user, Windy\\_Skunk, performed an experiment of hypersonic flight at sea level with temperature damage turned off. Here are his results: ![1pte659.jpg](http://i.imgur.com/1pte659.jpg)\n\nTemperature approaches 20,000 K while air temperature, even after all the shock heating, approaches 1505.6 K. \n\nIncidentally, 1505.6 is EXACTLY the same value as the surface velocity... so something is fishy..."},{"CreatedByName":"Mr Shifty","CreatedById":68146,"CreatedDateTime":"2015-04-30T15:25:50Z","Content":"I notice in your first image that ext. temp and surface velocity are exactly the same as well: 943.9. Hmm..."},{"CreatedByName":"ZetaX","CreatedById":60692,"CreatedDateTime":"2015-04-30T15:33:56Z","Content":"Has someone tried to find out if this is a bug in the display (which could have happened easily) or an actual bug in the temperature handling (which would sound a bit weird)\u00C3\u201A\u00C2\u00BF"},{"CreatedByName":"michaelsteele3","CreatedById":127113,"CreatedDateTime":"2015-04-30T15:34:23Z","Content":"\u003E \n\u003E So, i\u0027ve noticed that some of my craft appear to explode for no reason due to overheating in 1.0\n\nNo offense, but are you trolling?\n\n- Wrong Forum\n- You DID in fact get an answer on your last thread in Gameplay Questions and Tutorials, but you just kept arguing with others on the other thread about it, even going as far as to insulting.\n- Yes, crafts explode when they overheat. It\u0027s a thing.\n- It\u0027s obviously not a huge problem if nobody else seems to notice it. They are trying to help you, and you say stuff like\u0022Let me google that for you:sticktongue:\u0022"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-04-30T16:52:05Z","Content":"\u003E \n\u003E - Wrong Forum\n\nI like to post things in science forum since people here generally are more willing to discuss physics/science rather than just giving me an answer and get offended when i argue why their answer makes no sense. So i think this is the perfect form. I didnt place it in bug reporting because i think we might be making progress i.e. discovering that velocity = Temp\\_ext...I might post it in bug forum once i am more confident that there is definitely a bug...\n\n\u003E \n\u003E You DID in fact get an answer on your last thread in Gameplay Questions and Tutorials, but you just kept arguing with others on the other thread about it, even going as far as to insulting.\n\nFirst of all, no, i didnt get a good answer. Everyone just gave an explanation ignoring the equations, like you are here, saying crafts explode when they overheat and hypersonic craft get hot. That is not helpful, which, once again, is why i came here. For some reason, everyone on Gameplay Questions and Tutorials just wants to give answers, and get insulted when you argue with them, instead of defending their positions (like you are doing here).  \nSecond, I didnt mean to be insulting (my use of emoticons were supposed to convey i was being playful). But calling me a troll I think is insulting.\n\n\u003E \n\u003E No offense, but are you trolling?\n\n...\n\n\u003E \n\u003E Yes, crafts explode when they overheat. It\u0027s a thing.\n\nI realize that. That is not the issue we are discussing. This is condescending and unhelpful...\n\n\u003E \n\u003E It\u0027s obviously not a huge problem if nobody else seems to notice it. They are trying to help you, and you say stuff like\u0022Let me google that for you:sticktongue:\u0022\n\nHe admitted he had no idea what newtons law of cooling was, but was participating in the discussion anyway... that is not helpful...\n\nIf there is a bug, then it is a HUGE problem...\n\nJust because others havent noticed it, doesnt mean its not a problem. Other, inexperienced players (or players who never played with deadly re-entry) might not be familiar with what can and should cause re-entry problems, so they might have assumed they were doing something wrong...\n\n- - - Updated - - -\n\n\u003E \n\u003E Has someone tried to find out if this is a bug in the display (which could have happened easily) or an actual bug in the temperature handling (which would sound a bit weird)\u00C3\u201A\u00C2\u00BF\n\nYeah, i dont know. I would love to see the source code, or a Wiki on how KSP handles re-entry heating (convective, radiative, and conductive heat fluxes).\n\n- - - Updated - - -\n\n\u003E \n\u003E I notice in your first image that ext. temp and surface velocity are exactly the same as well: 943.9. Hmm...\n\nGood find!\n\nIt seems to always be the case above Mach 1-2... Below Mach 1-2, i think temp reads normally..."},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2015-04-30T17:57:34Z","Content":"\u003E \n\u003E If there is a bug, then it is a HUGE problem...\n\u003E Just because others havent noticed it, doesnt mean its not a problem. Other, inexperienced players (or players who never played with deadly re-entry) might not be familiar with what can and should cause re-entry problems, so they might have assumed they were doing something wrong...\n\nEven if it isn\u0027t just a display bug as Rathlon suggests below, it probably isn\u0027t a good idea to hold your breath while you wait for it to be fixed. I gave up on my re-entry heat mod (the original re-entry heat mod that predated deadly re-entry) when I couldn\u0027t get my heat effects (which were based on simplified compressible flow, convective heat transfer and radiative heat transfer models and which were surprisingly consistent with real world re-entry heating data that I could find, given the simplicity of my physics model) to correlate with the visual effects that were added in v0.19 of the game. When I first introduced the mod several months prior to v0.19\u0027s release, Moach even went over the code with his brother (HarvesteR) and Moach passed along some suggestions from Harv to me following their conversation. Clearly they know that there are alternatives to the way they coded it, but KSP\u0027s developers have said over and over again that they are making a game first; it isn\u0027t intended to be a physics simulation.\n\n**Edited \u003Ctime datetime=\u00222015-04-30T19:45:21Z\u0022 title=\u002204/30/2015 07:45  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 30, 2015\u003C/time\u003E by PakledHostage**\n  \nRevised post in consideration of Rathlon\u0027s good point, below."},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2015-04-30T18:50:15Z","Content":"I think what\u0027s happening is that Squad messed up and instead of the external temperature you\u0027re seeing part velocity. Thanks to Adiabatic compression the external air is heated by some function of velocity and is convecting heat into the part.\n\nPost it in the bug report forums as a minor display bug and be done with it."},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-04-30T20:20:25Z","Content":"\u003E \n\u003E I think what\u0027s happening is that Squad messed up and instead of the external temperature you\u0027re seeing part velocity. Thanks to Adiabatic compression the external air is heated by some function of velocity and is convecting heat into the part.\n\u003E Post it in the bug report forums as a minor display bug and be done with it.\n\nI would agree with you if velocity always equaled temp\\_ext, but that isnt the case always (for low mach numbers or in space), so i dont think thats the root of the problem (or at least, not the ONLY problem).\n\n- - - Updated - - -\n\n\u003E \n\u003E Even if it isn\u0027t just a display bug as Rathlon suggests below, it probably isn\u0027t a good idea to hold your breath while you wait for it to be fixed. I gave up on my re-entry heat mod (the original re-entry heat mod that predated deadly re-entry) when I couldn\u0027t get my heat effects (which were based on simplified compressible flow, convective heat transfer and radiative heat transfer models and which were surprisingly consistent with real world re-entry heating data that I could find, given the simplicity of my physics model) to correlate with the visual effects that were added in v0.19 of the game. When I first introduced the mod several months prior to v0.19\u0027s release, Moach even went over the code with his brother (HarvesteR) and Moach passed along some suggestions from Harv to me following their conversation. Clearly they know that there are alternatives to the way they coded it, but KSP\u0027s developers have said over and over again that they are making a game first; it isn\u0027t intended to be a physics simulation.\n\nFair enough. If possible, if its not just a display bug (which i dont think it is for the reasons ive given above), i might even consider writing a mod to fix it... though i have little experience with that.\n\n- - - Updated - - -\n\n\u003E \n\u003E Even if it isn\u0027t just a display bug as Rathlon suggests below, it probably isn\u0027t a good idea to hold your breath while you wait for it to be fixed. I gave up on my re-entry heat mod (the original re-entry heat mod that predated deadly re-entry) when I couldn\u0027t get my heat effects (which were based on simplified compressible flow, convective heat transfer and radiative heat transfer models and which were surprisingly consistent with real world re-entry heating data that I could find, given the simplicity of my physics model) to correlate with the visual effects that were added in v0.19 of the game. When I first introduced the mod several months prior to v0.19\u0027s release, Moach even went over the code with his brother (HarvesteR) and Moach passed along some suggestions from Harv to me following their conversation. Clearly they know that there are alternatives to the way they coded it, but KSP\u0027s developers have said over and over again that they are making a game first; it isn\u0027t intended to be a physics simulation.\n\nSince you\u0027ve written your own mods for re-entry, do you think it is still behaving physically accurate (not 100%, but at least order of magnitude)?\n\nClearly, 20,000K for 1500 m/s at sea level is a bit high....\n\n**Edited \u003Ctime datetime=\u00222015-04-30T20:18:56Z\u0022 title=\u002204/30/2015 08:18  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 30, 2015\u003C/time\u003E by arkie87**"},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2015-04-30T20:55:53Z","Content":"\u003E \n\u003E Since you\u0027ve written your own mods for re-entry, do you think it is still behaving physically accurate (not 100%, but at least order of magnitude)?\n\nI don\u0027t know. I haven\u0027t played KSP since [Gasp!!!] v0.19 was released. Now I\u0027m just an old curmudgeon who hangs around on the Science Labs. And while I haven\u0027t seen such numbers myself, 20000 K does seem way too high (like close to an order of magnitude too high) for 1500 m/s at sea level."},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-04-30T22:38:37Z","Content":"\u003E \n\u003E I don\u0027t know. I haven\u0027t played KSP since [Gasp!!!] v0.19 was released. Now I\u0027m just an old curmudgeon who hangs around on the Science Labs. And while I haven\u0027t seen such numbers myself, 20000 K does seem way too high (like close to an order of magnitude too high) for 1500 m/s at sea level.\n\nExactly; it\u0027s what makes me think the game is using the wrong formula for convective heating i.e. adding a separate heat source term when velocity gets too high, rather than just make air temperature increase, and part temperature approach air temperature via convection."},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-05-01T03:11:30Z","Content":"You do realize that you are interpreting the values wrong?\n\nTemp is the current temperature of the whole part. Temp ext is **not** the atmospheric temperature. It\u0027s the stagnation themperature, which is the temperature air would have if all it\u0027s kinetic energy would be transformed into thermal energy. Now the latter is rather hard to actually calculate, so the \u0022hack\u0022 used to calculate it is to say that 1m/s=1K, which is actually rather close. So yes, you can expect Temp ext to be pretty close, if not the same as the velocity.\n\ntl;dr: Make sure you know what you\u0027re even looking at before blowing stuff out of proportions.\n\n**Edited \u003Ctime datetime=\u00222015-05-01T03:15:14Z\u0022 title=\u002205/01/2015 03:15  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 1, 2015\u003C/time\u003E by stupid\\_chris**"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-01T04:45:18Z","Content":"\u003E \n\u003E You do realize that you are interpreting the values wrong?\n\u003E Temp is the current temperature of the whole part. Temp ext is **not** the atmospheric temperature. It\u0027s the stagnation themperature, which is the temperature air would have if all it\u0027s kinetic energy would be transformed into thermal energy. Now the latter is rather hard to actually calculate, so the \u0022hack\u0022 used to calculate it is to say that 1m/s=1K, which is actually rather close. So yes, you can expect Temp ext to be pretty close, if not the same as the velocity.\n\u003E \n\u003E tl;dr: Make sure you know what you\u0027re even looking at before blowing stuff out of proportions.\n\nYes, that is exactly what i was saying (and everyone else; no one is confused about that)... have you read the whole thread?\n\nNo one ever questioned why atmospheric temperature (i.e. external stagnation temperature) was so high....\n\nWe are confused why there is heating when readout for Temp\\_ext (stagnation temperature) is BELOW part temperature...\n\nNathanKell proposed a reason here: [http://forum.kerbalspaceprogram.com/threads/117511-Serious-Bug-in-Convective-Aerodynamic-Heating?p=1886854\u0026viewfull=1#post1886854](https://forum.kerbalspaceprogram.com/threads/117511-Serious-Bug-in-Convective-Aerodynamic-Heating?p=1886854\u0026viewfull=1#post1886854)\n\nIMHO, there is still a bug since Temp\\_ext is not used above Mach 2 or so, so it is misleading, to say the least...\n\nFuthermore, I\u0027m not convinced that the form of hypersonic convective flux is correct.\n\nconvective flux = density\\*velocity^3\\*convection\\_constant\n\nWhat is the physical basis for this form (any sources?)?\n\nRegardless, there also seems to be a numerical problem: at hypersonic velocities, flux is independent of part temperature so part can be heated to infinity, even above the stagnation temperature of the compressed air. this is clearly not physical \n\nThe only hand wavy explanation i can give is that since radiation heat transfer coefficient grows with T^3, (flux grows with T^4), radiative heat transfer coefficient will be dominant anyway... though i\u0027m not really convinced that is the case\n\n(for example: h\\_radiation(T=2000K)~=5.67e-8\\*2000^3=450 W/m2-K.... that is not large at all...)\n\n**Edited \u003Ctime datetime=\u00222015-05-01T05:14:04Z\u0022 title=\u002205/01/2015 05:14  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 1, 2015\u003C/time\u003E by arkie87**"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-01T06:17:49Z","Content":"I found a good reference for the convective flux relationship:\n\nconvective\\_flux = density\\*velocity^3\\*convection\\_constant\n\n[See Page 22](http://www.engr.sjsu.edu/nikos/courses/AE264/pdf/Hypersonic.pdf)\n\nInterestingly, the derivation assumes that the wall temperature is much less than stagnation temperature. Thus, this formula correctly predicts heating when wall is cold and heating is just beginning, but as T\\_wall approaches stagnation temperature, convective flux will not approach zero, as it should...\n\n**Edited \u003Ctime datetime=\u00222015-05-01T06:20:10Z\u0022 title=\u002205/01/2015 06:20  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 1, 2015\u003C/time\u003E by arkie87**"},{"CreatedByName":"Nibb31","CreatedById":7272,"CreatedDateTime":"2015-05-01T06:29:44Z","Content":"So there\u0027s a bug in KSP? Big deal. Report it, and get on with your life."},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-01T14:57:53Z","Content":"\u003E \n\u003E So there\u0027s a bug in KSP? Big deal. Report it, and get on with your life.\n\nUntil just now, i wasnt sure if there was a bug, or if there was, what it was or how to fix it...\n\nThat\u0027s why i posted this, hoping someone could help me pin it down or explain that there isnt one...\n\nIf you dont have anything nice to say, please dont say anything at all\n\n**Edited \u003Ctime datetime=\u00222015-05-01T19:18:24Z\u0022 title=\u002205/01/2015 07:18  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 1, 2015\u003C/time\u003E by arkie87**"}]}