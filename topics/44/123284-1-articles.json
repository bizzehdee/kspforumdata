{"TopicId":123284,"ForumId":44,"TopicTitle":"Computing escape velocity and density in php. Code included.","CreatedByName":"MGCJerry","CreatedById":95202,"CreatedDateTime":"2015-10-18T12:15:20Z","PageNum":1,"Articles":[{"CreatedByName":"MGCJerry","CreatedById":95202,"CreatedDateTime":"2015-10-18T12:15:20Z","Content":"\n\u003Cp\u003EThis isn\u0027t KSP related, but definitely space related. I have an old script ive been trying to modernize and I wanted to add some calculations to help fill in missing data. Escape Velocity and volume. The problem is with the solutions that php is giving me. Either I\u0027m just being really stupid, or there\u0027s some bug in how php handles math.\u003C/p\u003E\u003Cp\u003ELets start with Earth. Its giving me all kinds of convoluted output. Its telling me Earth\u0027s escape velocity is 353420.83796328... I know its 11.200 km/s, rearranging the math and using brackets does not alter the output. I have been fighting this math on and off for the last 3 days. I can get it to get close, but when you try figuring it out for our sun, its over 10,000x over what the answer should be. I have even tried avoiding scientific notation from php, but even then the output remains the same.\u003C/p\u003E\u003Cp\u003EHere\u0027s my variables...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E$radius = 6378.1; //Earth radius\u003Cbr\u003E$mass = \u00275.972e\u002B24\u0027; //earth mass\u003Cbr\u003E$g = 6.67*pow(10, -11); // Gravity constant\u003Cbr\u003E$volume = sprintf(\u0022%01.5f\u0022, 4.19*$radius*$radius*$radius);\u003Cbr\u003E$density = $mass/$volume; //density..\u003Cbr\u003E$ev = sqrt(2*$g*$mass/$radius); // Escape velocity\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E$ev returns: 353420.83796328... \u003C/p\u003E\u003Cp\u003EAs far as density concerned, it give me and obnoxious number... 5493280854827.7\u003C/p\u003E\u003Cp\u003EI have this bit of code that gives me correct information, but when it comes to the sun, it becomes extremely wrong. This is the code that is currently in the script that I managed to get to work after screwing with it for 2 days. Otherwise the numbers are very good out of it (even if the equations are wrong).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        $g = 6.67*pow(10, -11); // Gravity constant\u003Cbr\u003E        $volume = 4.19*($radius*$radius*$radius); // Volume\u003Cbr\u003E        $d = $mass/$volume/1000000000000; // no idea why i have to divide like this... otherwise its stupid WRONG\u003Cbr\u003E        $ev = sqrt(2*$g*$mass/($radius*1000)); // Escape velocity.. no idea why i need to divide by 1000.. its over 3 million, and stupid wrong if i dont.\u003Cbr\u003E        $gv = ($g*$mass)/($radius*1000*$radius*1000); // Gravity\u003Cbr\u003E        $buffer[\u0027escapeVelocityMS\u0027] = number_format($ev, 2); // escape velocity in m/s\u003Cbr\u003E        $buffer[\u0027escapeVelocityKMS\u0027] = number_format($ev/1000, 3); // escape velocity from m/s to km/s\u003Cbr\u003E        $buffer[\u0027gravityMS\u0027] = number_format($gv, 2); // force of gravity\u003Cbr\u003E        $buffer[\u0027relativeGravity\u0027] = number_format($gv/9.80, 2); // gravity relative to earth\u003Cbr\u003E        $buffer[\u0027volumeCM\u0027] = number_format($volume, 0); //density in cubic meters\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EUsing the code above, I get the following results... which I find acceptable.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EArray\u003Cbr\u003E(\u003Cbr\u003E    [escapeVelocityMS] =\u0026gt; 11,179.98\u003Cbr\u003E    [escapeVelocityKMS] =\u0026gt; 11.180\u003Cbr\u003E    [gravityMS] =\u0026gt; 9.80\u003Cbr\u003E    [relativeGravity] =\u0026gt; 1.00\u003Cbr\u003E    [volumeCM] =\u0026gt; 1,087,095,173,817\u003Cbr\u003E)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen it comes to our sun... Here are the results it gives... ... Which are beyond wrong. Of course I\u0027m using the sun\u0027s data to try to compute it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EArray\u003Cbr\u003E(\u003Cbr\u003E    [escapeVelocityMS] =\u0026gt; 61,765,610.61\u003Cbr\u003E    [escapeVelocityKMS] =\u0026gt; 61,765.611\u003Cbr\u003E    [gravityMS] =\u0026gt; 2,742,624.48\u003Cbr\u003E    [relativeGravity] =\u0026gt; 279,859.64\u003Cbr\u003E    [volumeCM] =\u0026gt; 1,409,630,947,936,250,112\u003Cbr\u003E)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAny ideas why i cant get the math to work the same for both items? I almost give up trying to hack at it myself. Thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-18T12:20:52Z\u0022 title=\u002210/18/2015 12:20  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 18, 2015\u003C/time\u003E by MGCJerry\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Yourself","CreatedById":4465,"CreatedDateTime":"2015-10-18T15:15:39Z","Content":"\n\u003Cp\u003EThe problem is you\u0027re not being careful with your units, you end up giving the body radius in kilometers, which is why you have \u0022random\u0022 factors of 1000 being divided our multiplied out: because you want the radius to be specified in meters, because the value of the gravitational constant you\u0027re using has units of m\u00C3\u201A\u00C2\u00B3 / ( kg s\u00C3\u201A\u00C2\u00B2 ), not km. \u003C/p\u003E\u003Cp\u003EAlso, don\u0027t mix in strings with numbers, that\u0027s really messy.\u003C/p\u003E\u003Cp\u003EHere\u0027s a working version of the first script:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E$radius = 6378100; //Earth radius \u003Cbr\u003E$mass = 5.97219e\u002B24; //earth mass \u003Cbr\u003E$G = 6.67408e-11; // Gravity constant \u003Cbr\u003E$volume = 4 * pi() * $radius * $radius * $radius / 3; \u003Cbr\u003E$density = $mass/$volume; //density.. \u003Cbr\u003E$ev = sqrt(2* $G * $mass / $radius); // Escape velocity  \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve also replaced the 4.19 magic number with what it actually should be: 4 \u00C3\u00E2\u201A\u00AC / 3\u003C/p\u003E\n"},{"CreatedByName":"MGCJerry","CreatedById":95202,"CreatedDateTime":"2015-10-18T19:16:17Z","Content":"\n\u003Cp\u003EAh! that explains a lot. I\u0027ve been feeding it km the whole time. I knew it was something stupid simple... I\u0027m not a math guy so details like this slip by.\u003C/p\u003E\u003Cp\u003ETypically I do not mix strings \u0026amp; numbers. I seen I did that after I posted it, it was my code where I was in the \u0027let me get the right numbers, then ill clean up\u0027 mode. Also because math isnt my strongest point, the 4.19 was one of the ways of trying to simplify it, but it did give me some good numbers... Until...\u003C/p\u003E\u003Cp\u003EThanks for the solution and pointing the idiot (me) to the right direction. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}