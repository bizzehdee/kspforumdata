{"TopicId":110443,"ForumId":44,"TopicTitle":"How does KSP calculate ISP for engines?","CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-23T02:21:29Z","PageNum":1,"Articles":[{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-23T02:21:29Z","Content":"Okay, so I\u0027ve been learning some of these rocket equations in my spare time. And I\u0027ve come up on a brick wall. \n\nLet\u0027s say I have an engine I want to make for the game, and I know the thrust and ISP I want it to have. But in the config files, you can input the thrust and fuel consumption rate values. \n\nThe equation for fuel consumption is Thrust (in newtons) / (gravity \\* ISP ). Otherwise known as Thrust / exhaust velocity. \n\nSo if I use this equation on one of KSP\u0027s engines, let\u0027s say the O10 monopropellant engine, the number I get does not match the stats in game. \n\nThrust = 20 kN\n\nIsp = 250 s\n\nand fuel rate = 2.04/s. \n\nIf I use the real world equation, I get: 8.15. \n\nI\u0027ve tried it with several engines but it never matches up..."},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-23T02:33:21Z","Content":"There\u0027s an extra conversion -- units of LF/Oxidizer/Mono are \u0022volumetric\u0022, rather than mass.\n\n20 kN /(250 s \\*9.80665m/s\u00C3\u201A\u00C2\u00B2) == 0.0081577 tonnes per second\n\nNote that the \u0022density\u0022 of monoprop is 0.004 tonnes/l\n\n0.0081577/0.004 == 2.0394324 units/s"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-23T02:40:36Z","Content":"Ahhhhhh thank you so much!"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-23T02:42:51Z","Content":"Uh, also to expand a bit, mind the ratios -- you can do the same with LF/Oxidizer engines (0.005 tonnes/l), but keep in mind that they run 55% oxidizer, 45% liquid fuel."},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T18:53:22Z","Content":"Err, still having problems with this. For example - I have an engine I made for a mod. In the config file, I put 0.93 for engine fuel ratio. In game however, the stats say \u00225.09\u0022 for fuel consumption and ISP of 250 s. \n\nThats exactly what ISP I want, however for future reference, what is the extra calculation there? None of the config files seem to match up to what the fuel ratio is in-game."},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T19:09:24Z","Content":"Could you post the entire CFG file (say, on pastebin), and what the engine is doing?\n\n(And if there are any mods, this should probably be moved to gameplay questions)"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T19:17:48Z","Content":"You can see it on the stock monopropellant engine. \n\n[http://wiki.kerbalspaceprogram.com/wiki/Parts/Engine/OMSEngine/omsEngine.cfg](http://wiki.kerbalspaceprogram.com/wiki/Parts/Engine/OMSEngine/omsEngine.cfg)\n\nratio says \u00220.9\u0022 and in game the stats are \u00222.04\u0022."},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T20:01:30Z","Content":"The ratio isn\u0027t an actual ratio, but a weighting factor. As best I can tell, KSP adds them all up, then uses the ratio value over the sum. (A notable example is the ion engine)\n\nI was also asking, because I was wondering about the details of your modded engine (eg: is it the O-10 just with that number changed, or...?)."},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T20:15:50Z","Content":"Over the sum of what? Thrust / atmosphere curve? \n\nMy engine was just the o-10 with a different FX and changed values. Ratio was changed to 0.93 and thrust to 50. In game, it says 50kN, isp of 250 s and fuel rate of 5.09 / s"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T20:51:26Z","Content":"\u0022Ratio\u0022 of that propellant supply over the sum of all other \u0022ratios.\u0022 Things should only get messy if you have multiple propellants of varying densities.\n\nSince the engine still only burns monopropellant, that\u0027s 0.93/0.93 == 1\n\nmass flow == thrust/(g0\\*Isp) == 50/(9.80665\\*250) == 0.0020394 tonnes/s\n\n\u0022volumetric flow\u0022 == mass flow/density \\* proportion == 0.0020394/0.004\\*1 == 5.0986 units/second"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T21:06:51Z","Content":"Well, that\u0027s helpful to know... But sorry, I may be missing something. In the configuration files, you can only specify RATIO and THRUST. So how does KSP calculate fuel flow and ISP from only these two values?"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T23:10:51Z","Content":"Isp \\*is\\* specified (at 0 atm, 1 atm, and some higher amount where it hits 0.001 s) in the CFG files. eg:\n\n    atmosphereCurve\t\t{\t\t\tkey = 0 250\t\t\tkey = 1 120\t\t\tkey = 4 0.001\t\t}\n\n250 s at 0 atm, 120 s at 1 atm, 0.001 s at 4 atm. Interpolation is messy."},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T23:24:27Z","Content":"\u003E \n\u003E Isp \\*is\\* specified (at 0 atm, 1 atm, and some higher amount where it hits 0.001 s) in the CFG files. eg:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     atmosphereCurve        {            key = 0 250            key = 1 120            key = 4 0.001        }\n\u003E \n\u003E \n\u003E 250 s at 0 atm, 120 s at 1 atm, 0.001 s at 4 atm. Interpolation is messy.\n\nHaha, you\u0027ve got to be kidding me. \n\nThank you so much for your help and patience!"},{"CreatedByName":"Armchair Rocket Scientist","CreatedById":76165,"CreatedDateTime":"2015-05-27T03:55:45Z","Content":"\u003E \n\u003E There\u0027s an extra conversion -- units of LF/Oxidizer/Mono are \u0022volumetric\u0022, rather than mass.\n\u003E 20 kN /(250 s \\*9.80665m/s\u00C3\u201A\u00C2\u00B2) == 0.0081577 tonnes per second\n\u003E \n\u003E Note that the \u0022density\u0022 of monoprop is 0.004 tonnes/l\n\u003E \n\u003E 0.0081577/0.004 == 2.0394324 units/s\n\nAFAIK the units are actually mass (one unit of LF or oxidizer is 5 kg, but units of monoprop and xenon have different values. Can\u0027t remember how solid fuel is handled.\n\nHowever, RealFuels does have volumetric units (liters for everything)."},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-05-27T04:09:25Z","Content":"\u003E \n\u003E Interpolation is messy.\n\nA bit, but not too complicated. It\u0027s a standard cubic spline, keyed from values and slopes. The slopes are computed by taking average from the two neighbors. Just in case anyone is curious."},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-05-27T09:02:03Z","Content":"And for the calculation, gravity is not 9.81 m/s^2^ but 9.82 m/s^2^.\n\nHave a look here: [http://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor](http://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor)"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-27T11:21:26Z","Content":"\u003E \n\u003E And for the calculation, gravity is not 9.81 m/s^2^ but 9.82 m/s^2^.\n\u003E Have a look here: [http://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor](http://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor)\n\nWas 9.82, but as of 1.0 changed to 9.80665. \n\n![Isp_1_0_2_zps3m5brcdz.png](https://i26.photobucket.com/albums/c128/raptor_87/KSP/Isp_1_0_2_zps3m5brcdz.png)\n\n(The page will probably require an extensive rewrite, given the way engines also changed.)"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-05-27T13:43:40Z","Content":"\u003E \n\u003E Was 9.82, but as of 1.0 changed to 9.80665.\n\nThanks for the info. Have not known about this change."}]}