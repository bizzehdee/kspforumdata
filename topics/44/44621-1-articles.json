{"TopicId":44621,"ForumId":44,"TopicTitle":"Space Computer. Brought to you by kOS and hopefully many nerds.","CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T18:11:17Z","PageNum":1,"Articles":[{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T18:11:17Z","Content":"\n\u003Cp\u003EWe\u0027ll the kOS release thread is starting to get clustered with code example questions and such. I thought it would be a great idea to start a new thread so that those things can be discussed without making a mess.\u003C/p\u003E\u003Cp\u003EMy idea was that we build a basic flight computer out of txt modules that can be accessed from a main menu. I have a few ideas kicking around about how to do that. I could do the whole thing but then I wouldn\u0027t really learn anything and you guys wouldn\u0027t either.\u003C/p\u003E\u003Cp\u003EIt needs parts. Or modules. \u003C/p\u003E\u003Cp\u003E1. Lift off to orbit.\u003C/p\u003E\u003Cp\u003E2. Change orbit.\u003C/p\u003E\u003Cp\u003E 2a. change apoapsis/periapsis/circularize.\u003C/p\u003E\u003Cp\u003E3. Execute node.\u003C/p\u003E\u003Cp\u003E4. Landing from orbit.\u003C/p\u003E\u003Cp\u003E 4a. with deorbit burn and without. \u003C/p\u003E\u003Cp\u003EThat is about all I think we can do for now. As time goes on and kOS becomes more robust I think many features could be added. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u003Cstrong\u003E\u003Cspan style=\u0022color:#0000FF;\u0022\u003ENotice!. Requires kOS v0.71\u003C/span\u003E\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EUpdate 10-15-2013.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EFound the time to update the Orbital calculation place holders. Circularization and Transfers are now handed with Vis-a-Vis.\u003C/p\u003E\u003Cp\u003EAdded some checks to the menu system. Now you cant accidentally run the orbit script when you are already flying. May need tweaking.\u003C/p\u003E\u003Cp\u003EAdded Cancel options to the Transfer and Landing scripts. You now have the option to go back to the menu when you get the burn dialog.\u003C/p\u003E\u003Cp\u003EOther various changes.\u003C/p\u003E\u003Cp\u003E \u003Cstrong\u003E10-11-2013. Bro, do you even land? SC does! \u003C/strong\u003E\u003Cem\u003E\u003Cstrong\u003EMost of the time.\u003C/strong\u003E\u003C/em\u003E\u003Cstrong\u003E \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/a-k0C0rmI3s?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E \u003Cp\u003E\u003Ca href=\u0022https://www.youtube.com/watch?v=lXvvJpWK--4\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.youtube.com/watch?v=lXvvJpWK--4\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E Changelog.\u003Cspan style=\u0022color:#FFFFFF;\u0022\u003E.................................................................................................................................\u003C/span\u003E\u003Cstrong\u003EFAR\u002BDRE Video by Kalista\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E Massive round of bug fixes related to Recursive ON statements.\u003C/p\u003E\u003Cp\u003E Menu now functions.\u003C/p\u003E\u003Cp\u003E Primitive landing function.\u003C/p\u003E\u003Cp\u003E Scripts hosted on pastebin.\u003C/p\u003E\u003Cp\u003E Other things I probably forgot already.\u003C/p\u003E\u003Cp\u003E \u003Cstrong\u003E9-16-2013. Added comments to the launch script\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E \u003Cstrong\u003E9-15-2013. Added roll control to the launch script.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EUpdate 9-14-2013.\u003C/strong\u003E \u003C/p\u003E\u003Cp\u003EO.K. Guys. New updates.\u003C/p\u003E\u003Cp\u003EHeading is now set via yaw with the Variable \u003Cstrong\u003EtHeading\u003C/strong\u003E. Inclination launches are now as easy as setting a heading.\u003C/p\u003E\u003Cp\u003EThe further you stray from equatorial the more Your inclination will vary from heading.\u003C/p\u003E\u003Cp\u003EWorst is polar at around 84deg inclination. 45 deg heading was 44.6 inclination. YMMV.\u003C/p\u003E\u003Cp\u003ERockets launched into inclination should now circularize much better. \u003C/p\u003E\u003Cp\u003EPitch is set just like it used to be only with a better term and the numbers now correspond to the Nav Ball.\u003C/p\u003E\u003Cp\u003EThrottle limiting is in. You can currently limit your TWR directly via the variable\u003Cstrong\u003E tTWR.\u003C/strong\u003E You can turn throttle limits off with the variable \u003Cstrong\u003EthrottleLimit\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003EAuto warp is in. If you have focus on the kOS window then the auto warp will default to Physical Warp for some reason. So make sure you don\u0027t.\u003C/p\u003E\u003Cp\u003EHohmann transfer updated with warp script.\u003C/p\u003E\u003Cp\u003EScripts below have been updated.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EScripts updated 10-15-2013.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EMenu system. \u003Cimg src=\u0022http://i.imgur.com/wMqNdPd.jpg\u0022 alt=\u0022wMqNdPd.jpg\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/AueQ1TF.jpg\u0022 alt=\u0022AueQ1TF.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESpash Screen.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/J0YRUueD\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/J0YRUueD\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMenu.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/epwUK7aN\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/epwUK7aN\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ELaunch to orbit. \u003Cimg src=\u0022http://i.imgur.com/iL6R6WH.jpg\u0022 alt=\u0022iL6R6WH.jpg\u0022\u003E Note the eccentricity. That is correct. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E MechJeb said .000\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/zZwek06Z\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/zZwek06Z\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHohmann transfer. \u003Cimg src=\u0022http://i.imgur.com/FHkUOXe.jpg\u0022 alt=\u0022FHkUOXe.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/RxN9a4n3\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/RxN9a4n3\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ELanding Program. \u003Cstrong\u003ENo Image Yet. See video.\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/eteJFMUg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/eteJFMUg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI would enjoy any questions and feed back on these items as they are.\u003C/p\u003E\u003Cp\u003ESpecial thanks to Cpt. Kipard and Ralathon for dropping the orbital calc knowledge.\u003C/p\u003E\u003Cp\u003EAlso thanks to Kalista for making great videos for us.\u003C/p\u003E\u003Cp\u003EKnown issues.\u003C/p\u003E\u003Cp\u003EG-turn is not dynamic. That is getting worked on soon.\u003C/p\u003E\u003Cp\u003EAs always, still need to setup a config file to run that will replace constants.\u003C/p\u003E\u003Cp\u003EThe Mun is getting closer to our grasp. Once some bugs in the newest version of kOS get sorted, there is nothing stopping us.\u003C/p\u003E\u003Cp\u003EStill requires kOS version 0.71 for now.\u003C/p\u003E\u003Cp\u003ENeed MORE Modules!\u003C/p\u003E\u003Cp\u003EAgain, we need people to get in and write some modules. We are still missing the standard orbital ops functions. I have written the transfer to give you an example of how those things can be accomplished since it must do all of them.\u003C/p\u003E\u003Cp\u003EGrand programming experience is not required. Examples and advice are available. Everyone has to learn this language from scratch anyway. Get started now!\u003C/p\u003E\u003Cp\u003EAvailable test crafts can be found here.\u003C/p\u003E\u003Cp\u003EkOS Test Craft v1.0.. \u003Ca href=\u0022http://www./download/hp5epoz6u3daq96/kOS_Test_Craft.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/hp5epoz6u3daq96/kOS_Test_Craft.zip\u003C/a\u003E By Cpt. Kipard. This baby has enough dV to go to duna at least. It is also a very KSP style rocket. It\u0027s a little wobbly but it gets there.\u003C/p\u003E\u003Cp\u003EThe Jebpollo... \u003Ca href=\u0022http://pastebin.com/2zp4N9MU\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/2zp4N9MU\u003C/a\u003E. Serial staged Apollo like craft that I have been using for testing. Has all the things to get Jeb to the mun in style.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-16T18:02:49Z\u0022 title=\u002210/16/2013 06:02  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 16, 2013\u003C/time\u003E by Payload\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-01T18:21:06Z","Content":"\n\u003Cp\u003EMy kethane operations require me to land tankers right next to my mining/converting rig within a several meters AND on the right side of the rig AND oriented correctly. Right now I deorbit and approach the rig but before touchdown I have to manually hover and position the tanker correctly. Only then do i land proper. Sooooo we need a hover module that allows manual (for now) RCS maneuvers just above the ground. I\u0027ve already started work on it, but I might need some help understanding PID algorithms.\u003C/p\u003E\u003Cp\u003ESince I\u0027m already here I\u0027ll design the test vehicle.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-01T18:23:19Z\u0022 title=\u002209/01/2013 06:23  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 1, 2013\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T18:33:18Z","Content":"\n\u003Cp\u003EWe can\u0027t do that right now at all. We have no way of correcting horizontal speed other than manually. Landing from orbit is going to require an atmosphere and a horizontal speed reduction device. AKA parachute. What you are talking about is a job for mech jeb. I think you\u0027re misunderstand the capability of the virtual machine we have access to. I think if we wanted mech jeb we would just use that. I don\u0027t know. Am I out of touch with what people expect this thing will be able to do? I have high hopes for sure but I don\u0027t see this ever getting near mech jeb functionality nor does it need to.\u003C/p\u003E\u003Cp\u003EWe need a simple Apollo style test vehicle to start with. Test Vehicle 1.0. The current project goals are to make Test Vehicle 1.0 go up, move around, come back. Maybe late in development. We can go for mun free return etc.\u003C/p\u003E\u003Cp\u003EEDIT: I mis-read I thought you were talking about closed loop control.\u003C/p\u003E\u003Cp\u003EI think maybe you will be able to setup a loop that pulses the steering lock off and the sas on at the same time and then back on lock and sas off. That might give us enough control to cancel our horizontal speed manually.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-01T18:44:14Z\u0022 title=\u002209/01/2013 06:44  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 1, 2013\u003C/time\u003E by Payload\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T18:46:20Z","Content":"\n\u003Cp\u003EGreat article here that will help with understanding of PID controllers. Caution! This will hurt your head.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-01T18:57:02Z","Content":"\n\u003Cp\u003EThis is funny but I always knew I\u0027d get mechjeb one day when I get good at manual flight. That time is nearly upon me, but now I have kOS which is a lot more fun. As for the capabilities of kOS it\u0027s already possible to control horizontal speed by pitching and yawing. Of course we have to wait for trigonometric functions, but I\u0027m sure they\u0027re coming. Then if you want to hover at a constant height AND use your engines to change horizontal speed you just need to take into account the horizontal and vertical components of thrust and adjust both accordingly. It\u0027s semi-complex maths, sure, but it\u0027s doable. With that in mind and by checking the target vector you can land right on top of another craft. Of course before you cause a collision you\u0027d run a script to just keep your altitude constant and manually fine-tune your horizontal position with RCS and then finally touch down.\u003C/p\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2013-09-01T18:59:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EMy kethane operations require me to land tankers right next to my mining/converting rig within a several meters AND on the right side of the rig AND oriented correctly. Right now I deorbit and approach the rig but before touchdown I have to manually hover and position the tanker correctly. Only then do i land proper. Sooooo we need a hover module that allows manual (for now) RCS maneuvers just above the ground. I\u0027ve already started work on it, but I might need some help understanding PID algorithms.\u003Cp\u003ESince I\u0027m already here I\u0027ll design the test vehicle.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPID controllers are really easy to make. Here\u0027s my hovering PID controller (Still trying to figure out a good way to adjust things without breaking the control loop):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EClearscreen.\u003Cbr\u003Eprint \u0022Launch!\u0022.\u003Cbr\u003Estage.\u003Cbr\u003E\u003Cbr\u003Eset TargetH to 50.\u003Cbr\u003Elock steering to up \u002B R(0,0,180).\u003Cbr\u003Eset I to 0.\u003Cbr\u003Eset deactivateFlag to 0.\u003Cbr\u003Eon AG9 set deactivateFlag to 1.\u003Cbr\u003E\u003Cbr\u003Euntil deactivateFlag=1 {\u003Cbr\u003Eset P to 0.02*((TargetH - ALT:RADAR)-verticalspeed).\u003Cbr\u003Eset I to 0.02*((TargetH - ALT:RADAR)-verticalspeed \u002B I).\u003Cbr\u003Elock throttle to P\u002BI.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Thanks for flying!\u0022.\u003Cbr\u003Elock throttle to 0.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis\u0027ll lift up your craft (If able) and makes it hover at 50 meters above the ground. The idea behind a PID controller (Or just PI in this case, the D part isn\u0027t really needed here) is that you look at the difference between a certain target and a measurement. \u003C/p\u003E\u003Cp\u003ESay for example that you\u0027re trying to heat an oven. You set the temperature at 100 degrees. The system then checks the current temperature and takes the difference between the 2. So say your oven used to be 50 degrees. That means the oven will start to pump power towards its heater following the formula \u0022Qp = x*(100 - 50)\u0022. Where x is some variable that you can set to adjust how fast the whole thing works (more on that later). The smaller the difference the smaller the power towards the heater, so the more accurate the temperature.\u003C/p\u003E\u003Cp\u003EThis in itself would be a pretty lousy oven since an oven loses heat to the outside world as well. So at some point it would strike a balance where Qin - Qout = 0. And this means that there is a temperature difference between the desired value and the actual value. This is where the I part of the PID controller comes in. I stands for integral and this section of the controller removes the aforementioned offset. The formula this follows is \u0022Qi = y* integral(Tset - Tmeasured)dt\u0022. Now if we have a constant offset this integral keeps growing and growing until eventually it overcomes the heat loss and thus stabilizing the oven at exactly the desired value. It does make your system a lot slower however. The D part of the controller takes care of that, but I doubt you\u0027ll ever need that bit for something KSP related.\u003C/p\u003E\u003Cp\u003ENow, you have 2 variables (3 if you go for the full PID package). By tweaking those you can adjust how the system behaves. How the system behaves is determined mainly by just 3 things:\u003C/p\u003E\u003Cp\u003E - Overshoot (The system tends to oscilate quite a bit before it settles. The overshoot is how far it shoots over the value)\u003C/p\u003E\u003Cp\u003E - Settling time (How long it takes before the thing is reasonably stable on 1 value)\u003C/p\u003E\u003Cp\u003E - Maximum slope (How fast the thing is allowed to change. Don\u0027t want your astronauts to turn into pulp due to a 15g burn)\u003C/p\u003E\u003Cp\u003EYou can see some great pics on the wiki that demonstrate all 3 of these properties.\u003C/p\u003E\u003Cp\u003ENow, in control engineering there is this nasty little rule called the \u0022Law of conservation of misery\u0022. It basically says that whenever you improve one of the above things, the others will become worse. Fast response, Fast settling time or small overshoot. Pick 1. Wiki has a nice table that shows what messing with the various parameters will do to your response. Figuring out the optimal parameters is an art in itself, but since we can launch as often as we want without angry people shouting at us manual adjustment is the easiest.\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T19:26:34Z","Content":"\n\u003Cp\u003EWhat I don\u0027t get is, the info we need to cancel Horizontal speed is right there on the navball. I wonder just how hard hooking that is. I haven\u0027t tried writing any plugins for this game. That would be one more IDE package on my machine that required constant maintenance. Some call it tired. I\u0027m going with lazy... Might as well tell the truth about it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I bet Kevin already has it working in his little lab over there. Just laughing at us.\u003C/p\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2013-09-01T19:36:42Z","Content":"\n\u003Cp\u003ECant you calculate it really easily? We know vertical velocity and we know total velocity. sqrt (V(total)^2 - V(vertical)^2) = V(horizontal).\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T21:32:48Z","Content":"\n\u003Cp\u003ELook at all that math. Why calculate it again? It is already calculated. We just need the variable exposed. You must really hate free cpu cycles.\u003C/p\u003E\u003Cp\u003EI think we are just going to have to take it slow for a while. Every time we get a new update something else critical breaks. Now the rockets are having stretchy syndrome like some of the older mods and wigging out KSP. .4.5. try it. My rockets wig out KSP above 6000m now. OR AND operators work though.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-01T21:36:45Z\u0022 title=\u002209/01/2013 09:36  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 1, 2013\u003C/time\u003E by Payload\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ozin","CreatedById":80820,"CreatedDateTime":"2013-09-01T21:47:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ralathon\u0022 data-cite=\u0022Ralathon\u0022\u003E\u003Cdiv\u003ECant you calculate it really easily? We know vertical velocity and we know total velocity. sqrt (V(total)^2 - V(vertical)^2) = V(horizontal).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe issue isn\u0027t getting the horizontal speed. It\u0027s getting the direction of it. We need a surface prograde vector or angle. I\u0027m also missing being able to get my ship\u0027s current angle, got my fingers crossed for that one being implemented soon.\u003C/p\u003E\u003Cp\u003EAlso, I\u0027ve been playing around with your PI controller script, thanks for sharing that. Slapped this together, it seems to work well, with little-to-no overshoot.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprint \u0022Hovering..\u0022.\u003Cbr\u003Eset radius to 600000.\u003Cbr\u003Eset g to 9.81.\u003Cbr\u003Eset TargetH to 1000.\u003Cbr\u003E\u003Cbr\u003Elock steering to up \u002B R(0,0,180).\u003Cbr\u003Eset I to 0.\u003Cbr\u003Eset deactivateFlag to 0.\u003Cbr\u003Eon AG9 set deactivateFlag to 1.\u003Cbr\u003E\u003Cbr\u003Euntil deactivateFlag=1 {\u003Cbr\u003E\tset WTR to (mass*g*((radius/(radius\u002Baltitude))^2)/maxthrust).\u003Cbr\u003E\tset E to (TargetH - ALT:RADAR) - (verticalspeed*2).\u003Cbr\u003E\tset P to (0.1*(E))*WTR.\u003Cbr\u003E\tset I to (0.03*(E \u002B I))*WTR.\u003Cbr\u003E\tlock throttle to P\u002BI.\u003Cbr\u003E\tif verticalspeed \u0026lt; (((TargetH - alt:radar)/10)-20) { lock throttle to 1. }.\u003Cbr\u003E\tif verticalspeed \u0026gt; (((TargetH - alt:radar)/10)\u002B25) { lock throttle to 0. }.\u003Cbr\u003E\u003Cbr\u003E\tprint \u0022e: \u0022 \u002B E.\u003Cbr\u003E}.\u003Cbr\u003Eprint \u0022Exiting..\u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe two if statements slow the vessel down gradually as it aproaches the target altitude. It should probably take gravity and TWR into account, didn\u0027t get to that yet.\u003C/p\u003E\u003Cp\u003EThe beauty of the pi controller is that it lets me change my horizontal speed while keeping hover to the same altitude. Very nice \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-01T22:30:19Z\u0022 title=\u002209/01/2013 10:30  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 1, 2013\u003C/time\u003E by Ozin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Desrtfox","CreatedById":80185,"CreatedDateTime":"2013-09-01T22:33:23Z","Content":"\n\u003Cp\u003EIf anyone\u0027s interested, here\u0027s my script for boosting to orbit using a sabre engine system (From B9). This rocket has a TWR of about 3.3, but I\u0027m hoping the code works for rockets of varying TWRs. Also, action group 1 is used to switch engine mode.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset air to \u0026lt;IntakeAir\u0026gt;.\u003Cbr\u003Eset tAlt to 100000.\u003Cbr\u003Eset maxAccel to 40.\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Elock steering to up.\u003Cbr\u003E\u003Cbr\u003Estage.\u003Cbr\u003Ewait 4.\u003Cbr\u003Estage.\u003Cbr\u003Elock throttle to maxAccel * mass/maxthrust.\u003Cbr\u003Ewait 1.\u003Cbr\u003Euntil air \u0026lt; 1/6 {\u003Cbr\u003E\tset x to x - verticalspeed/135.\t\u003Cbr\u003E\tif x \u0026lt; -85 { set x to -85.}.\u003Cbr\u003E\tlock steering to up \u002B R(0,X,-90).\u003Cbr\u003E\tlock throttle to maxAccel * mass/maxthrust.\u003Cbr\u003E\twait 1.\u003Cbr\u003E\tset air to \u0026lt;IntakeAir\u0026gt;.\u003Cbr\u003E}.\u003Cbr\u003Etoggle ag1.\u003Cbr\u003Ercs on.\u003Cbr\u003Elock steering to up \u002B R(0,-55,-90).\u003Cbr\u003Euntil apoapsis \u0026gt; tAlt {\u003Cbr\u003E\tlock throttle to maxAccel * mass/maxthrust.\u003Cbr\u003E}.\u003Cbr\u003Ercs off.\u003Cbr\u003Elock throttle to 0.\u003Cbr\u003Elock steering to prograde.\t\u003Cbr\u003Euntil eta:apoapsis \u0026lt; 5 {\u003Cbr\u003E\tif apoapsis \u0026lt; tAlt {lock throttle to maxAccel * mass/maxthrust.}.\u003Cbr\u003E\tif apoapsis \u0026gt; tAlt {lock throttle to 0.}.\u003Cbr\u003E}.\u003Cbr\u003Eset t to 0.5.\u003Cbr\u003Elock throttle to t.\u003Cbr\u003Euntil periapsis \u0026gt; (tAlt* 0.99) {\t\u003Cbr\u003E\tif eta:apoapsis \u0026gt; 5 { set t to t - 1/10.}.\u003Cbr\u003E\tif eta:apoapsis \u0026lt; 5 { set t to t  \u002B 1/10.}.\u003Cbr\u003E\tif t \u0026lt; 0 {set t to 0.}.\u003Cbr\u003E\tif t \u0026gt; 40 * mass/maxthrust {set t to maxAccel * mass/maxthrust.}.\u003Cbr\u003E\tlock throttle to t.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-01T22:43:03Z\u0022 title=\u002209/01/2013 10:43  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 1, 2013\u003C/time\u003E by Desrtfox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-01T22:39:11Z","Content":"\n\u003Cp\u003ESimple serial staging.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EOHH THAT IS BAD CODE\u0026gt;\u003Cbr\u003E\u003Cbr\u003EIf anyone tried that autostage script I\u0027m sorry it was only the top part of it apparently, and that part was broken too.\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt checks for total fuel so it won\u0027t stage your parachutes unless they are on the same stage and it handles upper stage solids and decouplers. Those four variables are updated in the loop. I haven\u0027t tried removing them and using the direct terms. That wasn\u0027t working last time I checked. \u003C/p\u003E\u003Cp\u003EIt won\u0027t stage asparagus. Am I right in thinking the test vehicle will be serial staged?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-02T01:57:10Z\u0022 title=\u002209/02/2013 01:57  AM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 2, 2013\u003C/time\u003E by Payload\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-02T01:46:45Z","Content":"\n\u003Cp\u003ERight now it\u0027s asparagus, but I\u0027ll make it serial if there\u0027s no other way. Have you tried parallel staging or are fuel lines simply out of the question.\u003C/p\u003E\u003Cp\u003EAnyway I\u0027ve just manually tested the ship and there\u0027s something odd with it. Because it\u0027s an Apollo style ship with a undockable lander and SM when you return the lander from a moon to the SM and dock with it you have to rearrange the stages. Then when I returned to kerbin I had to press spacebar twice in order to open the chutes. I think it might have to do something with the separate engines on the lander and SM. I\u0027ll do some more tests tomorrow\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-02T01:58:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003ERight now it\u0027s asparagus, but I\u0027ll make it serial if there\u0027s no other way. Have you tried parallel staging or are fuel lines simply out of the question.\u003Cp\u003EAnyway I\u0027ve just manually tested the ship and there\u0027s something odd with it. Because it\u0027s an Apollo style ship with a undockable lander and SM when you return the lander from a moon to the SM and dock with it you have to rearrange the stages. Then when I returned to kerbin I had to press spacebar twice in order to open the chutes. I think it might have to do something with the separate engines on the lander and SM. I\u0027ll do some more tests tomorrow\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0022m not totally against it. Any idea of how we will make it work? I was thinking something like acceleration checking. but it will have to be tightly windowed so it doesn\u0027t stage anything it isn\u0027t supposed too.\u003C/p\u003E\n"},{"CreatedByName":"JewelShisen","CreatedById":71737,"CreatedDateTime":"2013-09-02T02:44:36Z","Content":"\n\u003Cp\u003EGuys there is already a retrograde steering command so you can easily drop your HVel to zero for landing by doing what MJ does and just burn retro until it matches the UP direction.\u003C/p\u003E\n"},{"CreatedByName":"razark","CreatedById":32993,"CreatedDateTime":"2013-09-02T03:07:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ozin\u0022 data-cite=\u0022Ozin\u0022\u003E\u003Cdiv\u003EThe issue isn\u0027t getting the horizontal speed. It\u0027s getting the direction of it. We need a surface prograde vector or angle.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe\u0027ve got latitude and longitude. If you take two of those, separated by a known time, you should be able to determine surface direction and velocity, yes? I\u0027m not up on the math for that, though. I\u0027m guessing it probably involves some trigonometry we don\u0027t have right now.\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-02T07:23:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022JewelShisen\u0022 data-cite=\u0022JewelShisen\u0022\u003E\u003Cdiv\u003EGuys there is already a retrograde steering command so you can easily drop your HVel to zero for landing by doing what MJ does and just burn retro until it matches the UP direction.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERetrograde just means west in this computer. I hate to tell you. If it were that easy we would be showing it off already. Now if there is some new development I haven\u0027t heard about. By all means enlighten us. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027m sure the landing guys would love to have it for Test vehicle 2.0 time. Test vehicle 1.0 is slated to land capsule only like apollo. Test vehicle 2 is where we attempt to make the software compatible with a much wider range of rockets. I was hoping to get an Apollo style code out because I know there are a lot of people who would love to be able to recreate that as accurately as possible. The Apollo guys had to manually cancel horizontal velocity. At least Neal Armstrong did anyway.\u003C/p\u003E\u003Cp\u003EI can say that I have made a boat load of headway. My launch to orbit code now stages \u0022all the things\u0022 perfectly without jacking your chutes or anything else. Even asparagus! I have some work to do on my menus and I\u0027m not entirely sure how I will handle that now. I was thinking of using a separate program for setting of initial values then when done executing the launch to orbit program. I think that will work as far as variable retention.\u003C/p\u003E\u003Cp\u003EFor real this time. Staging all the things launch to orbit code. For asparagus, all I need to know is the amount of fuel in the two sections you intend to drop off when empty and how many asparagus stages you have. It\u0027s rough and it\u0027s full of unneeded variables and resource tracking that isn\u0027t required anymore. When I wrote the majority of this the direct values didn\u0027t work in expression.\u003C/p\u003E\u003Cp\u003EI will start working on getting it cleaned up and getting the main menu system at least started. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003Eset rpAlt to 100.\u003Cbr\u003Eset rProgram to 90.\u003Cbr\u003Eset r to 180.\u003Cbr\u003Eset p to 0.\u003Cbr\u003Eset y to 0.\u003Cbr\u003Eset orbit to 0.\u003Cbr\u003Eset tOrbit to 100000.\u003Cbr\u003Eset hAtmo to 69500.\u003Cbr\u003Eset tAngle to up \u002B R(y,p,r).\u003Cbr\u003Eset tThr to 1.\u003Cbr\u003Eset turn1 to 9999.\u003Cbr\u003Eset turn2 to 14999.\u003Cbr\u003Eset turn3 to 19999.\u003Cbr\u003Eset turn4 to 24999.\u003Cbr\u003Eset turn5 to 49000.\u003Cbr\u003Eset selection to 0.\u003Cbr\u003Eset flagup to 0.\u003Cbr\u003Eset flagdown to 0.\u003Cbr\u003Eset confirm to 0.\u003Cbr\u003Eset Count to 2.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Select your orbit altitude.\u0022.\u003Cbr\u003Eprint \u0022--------------------------------\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Use action group 9 to add 10Km to orbit alt.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Use action group 8 to remove 10Km from orbit alt.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Use action group 7 to confirm orbit alt.\u0022.\u003Cbr\u003E\u003Cbr\u003Euntil selection = 1\u003Cbr\u003E {\u003Cbr\u003E on ag9 set flagup to 1.\u003Cbr\u003E on ag8 set flagdown to 1.\u003Cbr\u003E on ag7 set confirm to 1.\u003Cbr\u003E\u003Cbr\u003E if flagup = 1\u003Cbr\u003E {\u003Cbr\u003E clearscreen.\u003Cbr\u003E print \u0022Select your orbit altitude.\u0022.\u003Cbr\u003E print \u0022--------------------------------\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Default orbit alt is set to \u0022 \u002B tOrbit \u002B \u0022m\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Use action group 9 to add 10Km to orbit alt.\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Use action group 8 to remove 10Km from orbit alt.\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Use action group 7 to confirm orbit alt.\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E set tOrbit to tOrbit \u002B 10000.\u003Cbr\u003E print \u0022You have selected \u0022 \u002B tOrbit.\u003Cbr\u003E toggle ag9.\u003Cbr\u003E set flagup to 0.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003E if flagdown = 1\u003Cbr\u003E {\u003Cbr\u003E clearscreen.\u003Cbr\u003E print \u0022Select your orbit altitude.\u0022.\u003Cbr\u003E print \u0022--------------------------------\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Default orbit alt is set to \u0022 \u002B tOrbit \u002B \u0022m\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Use action group 9 to add 10Km to orbit alt.\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Use action group 8 to remove 10Km from orbit alt.\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Use action group 7 to confirm orbit alt.\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E set tOrbit to tOrbit - 10000.\u003Cbr\u003E if tOrbit \u0026lt; 80000 { set tOrbit to 80000. }.\u003Cbr\u003E print \u0022You have selected \u0022 \u002B tOrbit \u002B \u0022m\u0022.\u003Cbr\u003E toggle ag8.\u003Cbr\u003E set flagdown to 0.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003E if confirm = 1\u003Cbr\u003E {\u003Cbr\u003E clearscreen.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022You have confirmed \u0022 \u002B tOrbit \u002B \u0022m\u0022.\u003Cbr\u003E print \u0022 \u0022.\u003Cbr\u003E print \u0022Lift Off in 5s.\u0022.\u003Cbr\u003E toggle ag7.\u003Cbr\u003E set confirm to 0.\u003Cbr\u003E wait 2.\u003Cbr\u003E set selection to 1.\u003Cbr\u003E }.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003Eset cAlt to tOrbit - (tOrbit*.2).\u003Cbr\u003Eset xAlt to tOrbit - 1000.\u003Cbr\u003Eset hAlt to tOrbit - 5.\u003Cbr\u003Eclearscreen.\u003Cbr\u003Eprint \u0022Orbit altitude set to \u0022 \u002B tOrbit.\u003Cbr\u003Eprint \u00223\u0022. wait 1.\u003Cbr\u003Eprint \u00222\u0022. wait 1.\u003Cbr\u003Eprint \u00221\u0022. Wait 1.\u003Cbr\u003EPrint \u0022Lift Off!\u0022. stage.\u003Cbr\u003E\u003Cbr\u003Eset StartFuel to \u0026lt;liquidfuel\u0026gt;.\u003Cbr\u003Elock steering to tAngle.\u003Cbr\u003Elock throttle to tThr.\u003Cbr\u003E\u003Cbr\u003Ewhen altitude \u0026gt; rpAlt then\u003Cbr\u003E {\u003Cbr\u003E set r to rProgram.\u003Cbr\u003E print \u0022Roll Program\u0022.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003Ewhen altitude \u0026gt; turn1 then set p to -35.\u003Cbr\u003Ewhen altitude \u0026gt; turn2 then set p to -45.\u003Cbr\u003Ewhen altitude \u0026gt; turn3 then set p to -60.\u003Cbr\u003Ewhen altitude \u0026gt; turn4 then set p to -75.\u003Cbr\u003Ewhen apoapsis \u0026gt; turn5 then set p to -90.\u003Cbr\u003E\u003Cbr\u003Ewhen apoapsis \u0026gt; tOrbit then\u003Cbr\u003E {\u003Cbr\u003E { set tThr to 0. }.\u003Cbr\u003E until altitude \u0026gt; hAtmo\u003Cbr\u003E {\u003Cbr\u003E if apoapsis \u0026lt; hAlt { set tThr to .05. }.\u003Cbr\u003E if apoapsis \u0026gt; tOrbit { set tThr to 0. }.\u003Cbr\u003E }.\u003Cbr\u003E when Eapoapsis \u0026lt; 1 then set tThr to 1.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003Ewhen periapsis \u0026gt; cAlt then set tThr to .05.\u003Cbr\u003E\u003Cbr\u003Ewhen periapsis \u0026gt; xAlt then\u003Cbr\u003E {\u003Cbr\u003E set tThr to 0.\u003Cbr\u003E sas on.\u003Cbr\u003E print \u0022You Are Now In Orbit\u0022.\u003Cbr\u003E wait 1.\u003Cbr\u003E set orbit to 1.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003Euntil orbit = 1\u003Cbr\u003E {\u003Cbr\u003E set Lfuel to \u0026lt;liquidfuel\u0026gt;.\u003Cbr\u003E set Sfuel to \u0026lt;solidfuel\u0026gt;.\u003Cbr\u003E set StageLiquid to stage:liquidfuel.\u003Cbr\u003E set StageSolid to stage:solidfuel.\u003Cbr\u003E set Eapoapsis to eta:apoapsis.\u003Cbr\u003E set tAngle to up \u002B R(y,p,r).\u003Cbr\u003E set throttle to tThr.\u003Cbr\u003E\u003Cbr\u003E if Lfuel \u0026lt; StartFuel - 215 AND Count \u0026gt; 0\u003Cbr\u003E { stage. set StartFuel to Lfuel. set Count to Count - 1. }.\u003Cbr\u003E\u003Cbr\u003E if StageSolid \u0026gt; 0 And StageSolid \u0026lt; 1\u003Cbr\u003E { stage. }.\u003Cbr\u003E\u003Cbr\u003E if StageLiquid = 0 AND StageSolid = 0\u003Cbr\u003E { if LFuel \u0026gt; 0 { stage. }. }.\u003Cbr\u003E\u003Cbr\u003E }.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"alterbaron","CreatedById":57492,"CreatedDateTime":"2013-09-02T07:53:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI\u0027m guessing it probably involves some trigonometry we don\u0027t have right now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you want trig functions, you could always use:\u003C/p\u003E\u003Cp\u003Esin(x) ~= 1-(1/2)x^2\u002B(1/24)x^4-(1/720)x^6\u003C/p\u003E\u003Cp\u003Ecos(x) ~= x-(1/6)x^3\u002B(1/120)x^5-(1/5040)x^7\u003C/p\u003E\u003Cp\u003EThese are quite accurate when x is between -pi and pi.\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-02T14:24:34Z","Content":"\n\u003Cp\u003EMenu system progress. I need sleep.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/zjJxNa1.jpg\u0022 alt=\u0022zjJxNa1.jpg\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/6BtpSS7.jpg\u0022 alt=\u00226BtpSS7.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-02T15:04:43Z","Content":"\n\u003Cp\u003ELol nice touch with he ASCII art there \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EOk I\u0027ve just finished my second test of the craft and I\u0027m about ready to release it. Unfortunately I wasn\u0027t able to work out the strange staging after docking the lander to the SM. I\u0027ve tried every sensible rearrangement of stages after docking and it always needed two space bar presses to open the chutes. It must be a KSP bug. We\u0027ll just have to work around it. I\u0027ll post the ship in a little while with a short usage guide.\u003C/p\u003E\u003Cp\u003ESince no one has suggested it yet, my next project will be a universal script for adjusting the true anomaly. It\u0027s main use will be for changing ship locations for synchronous orbits on all the bodies where synchronous orbits are possible. I already have the calculations in a spreadsheet so it should be a breeze.\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-09-02T15:25:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003ELol nice touch with he ASCII art there \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EOk I\u0027ve just finished my second test of the craft and I\u0027m about ready to release it. Unfortunately I wasn\u0027t able to work out the strange staging after docking the lander to the SM. I\u0027ve tried every sensible rearrangement of stages after docking and it always needed two space bar presses to open the chutes. It must be a KSP bug. We\u0027ll just have to work around it. I\u0027ll post the ship in a little while with a short usage guide.\u003C/p\u003E\u003Cp\u003ESince no one has suggested it yet, my next project will be a universal script for adjusting the true anomaly. It\u0027s main use will be for changing ship locations for synchronous orbits on all the bodies where synchronous orbits are possible. I already have the calculations in a spreadsheet so it should be a breeze.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat rocket actually flies off the top of the screen!!! Not just pretty pictures. Moving pretty pictures like a bauss.\u003C/p\u003E\n"},{"CreatedByName":"Glaucus","CreatedById":14664,"CreatedDateTime":"2013-09-02T15:44:49Z","Content":"\n\u003Cp\u003EThis is really interesting.\u003C/p\u003E\u003Cp\u003EBut does anyone know the equations for ideal trajectory and ideal velocity for different altitudes to obtain an orbit around kerbin.\u003C/p\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2013-09-02T16:06:52Z","Content":"\n\u003Cp\u003EThe ideal trajectory depends on your craft and staging setup. But I imagine you can get a pretty good approximation by simply keeping the ETA to Apoapsis constant at 30 seconds or something. Or have some a turning speed that depends on TWR.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-02T16:10:46Z","Content":"\n\u003Cp\u003EOrbital velocity for circular orbits of small objects like rockets is:\u003C/p\u003E\u003Cp\u003Ev\u003Csub\u003Eo\u003C/sub\u003E = (GM/r)^0.5\u003C/p\u003E\u003Cp\u003Ewhere:\u003C/p\u003E\u003Cp\u003EG = Gravitational constant\u003C/p\u003E\u003Cp\u003EM = Mass of the object you\u0027re orbting.\u003C/p\u003E\u003Cp\u003Er = distance between the centres of mass of your rocket and the object\u003C/p\u003E\u003Cp\u003EAs for trajectory that\u0027s a lot more complex. I read a reddit post once about performing a true gravity turn, which should be possible provided that your rocket is perfectly balanced. You could then run a small script to launch your rocket at the perfect angle needed for a true gravity turn, and just keep it at full power WITHOUT making any course corrections. The pilot would also need to refrain from touching the controls. I think for now it would be simpler to just fake gravity turns by actively controlling the ships orientation according to some preset rules that approximate a gravity turn ascent profile. I\u0027ve been trying to find some information on this for a while now, with no luck.\u003C/p\u003E\n"},{"CreatedByName":"LtPinback","CreatedById":81173,"CreatedDateTime":"2013-09-02T16:22:18Z","Content":"\n\u003Cp\u003EHohmann transfer maneuver script based on Payload\u0027s Launch script.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003E\u003Cbr\u003Eset completion to 0.\u003Cbr\u003Eset tOrbit to 100000.\u003Cbr\u003E\u003Cbr\u003Eset tThr to 0.\u003Cbr\u003E\u003Cbr\u003Eset selection to 0.\u003Cbr\u003Eset flagup to 0.\u003Cbr\u003Eset flagdown to 0.\u003Cbr\u003Eset confirm to 0.\u003Cbr\u003E\u003Cbr\u003Eset tManeuver to 0.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Hohmann transfer maneuver.\u0022.\u003Cbr\u003Eprint \u0022--------------------------\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Current orbit. Ap \u0022 \u002B apoapsis \u002B \u0022m. Pe \u0022 \u002B periapsis \u002B \u0022m.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Select new orbit altitude.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Default orbit alt is set to 100km.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Use action group 9 to add 10Km to orbit alt.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Use action group 8 to remove 10Km from orbit alt.\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Use action group 7 to confirm orbit alt.\u0022.\u003Cbr\u003E\u003Cbr\u003Euntil selection = 1\u003Cbr\u003E {\u003Cbr\u003E on ag9 set flagup to 1.\u003Cbr\u003E on ag8 set flagdown to 1.\u003Cbr\u003E on ag7 set confirm to 1.\u003Cbr\u003E\u003Cbr\u003E if flagup = 1\u003Cbr\u003E  {\u003Cbr\u003E  clearscreen.\u003Cbr\u003E  set tOrbit to tOrbit \u002B 10000.\u003Cbr\u003E  print tOrbit \u002B \u0022m.\u0022.\u003Cbr\u003E  toggle ag9.\u003Cbr\u003E  set flagup to 0.\u003Cbr\u003E  }.\u003Cbr\u003E\u003Cbr\u003E if flagdown = 1\u003Cbr\u003E  {\u003Cbr\u003E  clearscreen.\u003Cbr\u003E  set tOrbit to tOrbit - 10000.\u003Cbr\u003E  print tOrbit \u002B \u0022m.\u0022.\u003Cbr\u003E  toggle ag8.\u003Cbr\u003E  set flagdown to 0.\u003Cbr\u003E  }.\u003Cbr\u003E\u003Cbr\u003E if confirm = 1\u003Cbr\u003E  {\u003Cbr\u003E  clearscreen.\u003Cbr\u003E  print \u0022You have confirmed a \u0022 \u002B tOrbit \u002B \u0022m circular orbit.\u0022.\u003Cbr\u003E  print \u0022Beginning Hohmann transfer maneuver.\u0022.\u003Cbr\u003E  toggle ag7.\u003Cbr\u003E  set confirm to 0.\u003Cbr\u003E  wait 2.\u003Cbr\u003E  set selection to 1.\u003Cbr\u003E  }.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003Eif tOrbit \u0026gt; apoapsis { set tManeuver to 1. }.\u003Cbr\u003Eif tOrbit \u0026lt; apoapsis { set tManeuver to 2. }.\u003Cbr\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Hohmann transfer maneuver.\u0022.\u003Cbr\u003Eprint \u0022--------------------------\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022All systems nominal.\u0022.\u003Cbr\u003Eprint \u0022 \u0022. \u003Cbr\u003E\u003Cbr\u003Elock throttle to tThr.\u003Cbr\u003Esas off.\u003Cbr\u003E\u003Cbr\u003Ewhen tManeuver = 1 then\u003Cbr\u003E {\u003Cbr\u003E print MISSIONTIME \u002B \u0022: ETA to first burn in \u0022 \u002B Eapoapsis \u002B \u0022s.\u0022.\u003Cbr\u003E lock steering to prograde.\u003Cbr\u003E set cAlt to tOrbit - ( ( tOrbit - apoapsis ) * 0.10 ).\u003Cbr\u003E set xAlt to tOrbit - 500.\u003Cbr\u003E\u003Cbr\u003E when Eapoapsis \u0026lt; 1 then\u003Cbr\u003E  {\u003Cbr\u003E  print MISSIONTIME \u002B \u0022: First burn initiated\u0022.\u003Cbr\u003E  set tThr to 1.\u003Cbr\u003E  when apoapsis \u0026gt; cAlt then set tThr to 0.05.\u003Cbr\u003E  }.\u003Cbr\u003E\u003Cbr\u003E when apoapsis \u0026gt; tOrbit then \u003Cbr\u003E  {\u003Cbr\u003E  print MISSIONTIME \u002B \u0022: First burn completed\u0022.\u003Cbr\u003E  set tThr to 0. \u003Cbr\u003E  print MISSIONTIME \u002B \u0022: ETA to second burn in \u0022 \u002B Eapoapsis \u002B \u0022s.\u0022.\u003Cbr\u003E  when Eapoapsis \u0026lt; 1 then\u003Cbr\u003E   {\u003Cbr\u003E   print MISSIONTIME \u002B \u0022: Second burn initiated\u0022.\u003Cbr\u003E   set tThr to 1.\u003Cbr\u003E   when periapsis \u0026gt; cAlt then set tThr to 0.05.\u003Cbr\u003E   when periapsis \u0026gt; xAlt then\u003Cbr\u003E    {\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Second burn completed\u0022.\u003Cbr\u003E    set tThr to 0.\u003Cbr\u003E    sas on.\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Hohmann transfer maneuver completed.\u0022.\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Apoapsis at \u0022 \u002B apoapsis \u002B \u0022m.\u0022.\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Periapsis at \u0022 \u002B periapsis \u002B \u0022m.\u0022.\u003Cbr\u003E    wait 1.\u003Cbr\u003E    set completion to 1.\u003Cbr\u003E    }.\u003Cbr\u003E   }.\u003Cbr\u003E  }.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003Ewhen tManeuver = 2 then\u003Cbr\u003E {\u003Cbr\u003E print MISSIONTIME \u002B \u0022: ETA to first burn in \u0022 \u002B Eperiapsis \u002B \u0022s.\u0022.\u003Cbr\u003E lock steering to retrograde.\u003Cbr\u003E set cAlt to tOrbit \u002B ( ( apoapsis - tOrbit ) * 0.10 ).\u003Cbr\u003E set xAlt to tOrbit \u002B 500.\u003Cbr\u003E\u003Cbr\u003E when Eperiapsis \u0026lt; 1 then\u003Cbr\u003E  {\u003Cbr\u003E  print MISSIONTIME \u002B \u0022: First burn initiated\u0022.\u003Cbr\u003E  set tThr to 1.\u003Cbr\u003E  when periapsis \u0026lt; cAlt then set tThr to 0.05.\u003Cbr\u003E  }.\u003Cbr\u003E\u003Cbr\u003E when periapsis \u0026lt; tOrbit then \u003Cbr\u003E  {\u003Cbr\u003E  print MISSIONTIME \u002B \u0022: First burn completed\u0022.\u003Cbr\u003E  set tThr to 0. \u003Cbr\u003E  print MISSIONTIME \u002B \u0022: ETA to second burn in \u0022 \u002B Eperiapsis \u002B \u0022s.\u0022.\u003Cbr\u003E  when Eperiapsis \u0026lt; 1 then\u003Cbr\u003E   {\u003Cbr\u003E   print MISSIONTIME \u002B \u0022: Second burn initiated\u0022.\u003Cbr\u003E   set tThr to 1.\u003Cbr\u003E   when apoapsis \u0026lt; cAlt then set tThr to 0.05.\u003Cbr\u003E   when apoapsis \u0026lt; xAlt then\u003Cbr\u003E    {\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Second burn completed\u0022.\u003Cbr\u003E    set tThr to 0.\u003Cbr\u003E    sas on.\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Hohmann transfer maneuver completed.\u0022.\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Apoapsis at \u0022 \u002B apoapsis \u002B \u0022m.\u0022.\u003Cbr\u003E    print MISSIONTIME \u002B \u0022: Periapsis at \u0022 \u002B periapsis \u002B \u0022m.\u0022.\u003Cbr\u003E    wait 1.\u003Cbr\u003E    set completion to 1.\u003Cbr\u003E    }.\u003Cbr\u003E   }.\u003Cbr\u003E  }.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Euntil completion = 1\u003Cbr\u003E {\u003Cbr\u003E set Eapoapsis to eta:apoapsis.\u003Cbr\u003E set Eperiapsis to eta:periapsis.\u003Cbr\u003E set throttle to tThr.\u003Cbr\u003E }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit: Clean up and use of prograde and retrograde vector so it works for orbits with any inclination.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-04T02:38:01Z\u0022 title=\u002209/04/2013 02:38  AM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 4, 2013\u003C/time\u003E by LtPinback\u003C/strong\u003E\n\u003C/span\u003E\n"}]}