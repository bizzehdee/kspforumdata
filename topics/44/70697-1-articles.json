{"TopicId":70697,"ForumId":44,"TopicTitle":"Modeling 3D orbital movement on a 2D grid - Soliciting physics and programming advice","CreatedByName":"Accelerando","CreatedById":543,"CreatedDateTime":"2014-04-27T05:31:42Z","PageNum":1,"Articles":[{"CreatedByName":"Accelerando","CreatedById":543,"CreatedDateTime":"2014-04-27T05:31:42Z","Content":"\n\u003Cp\u003EI\u0027m designing a 2D grid-based video game that models orbital mechanics, and doing this alone is one of the most confounding parts. Part of the problem is that I don\u0027t understand how generalized \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V maps work. Another part is how to model orbital combat maneuvers.\u003C/p\u003E\u003Cp\u003EFor creating the \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V map system, I used the \u003Ca href=\u0022http://imgur.com/a/TEwzX#2\u0022 rel=\u0022external nofollow\u0022\u003Ehexagrid-based \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V map\u003C/a\u003E of the out-of-print Rocket Flight, by Phil Eklund, as my basis. A hexagrid seems the most generalizable to me, since it breaks down \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V into tiles of a standard size which can be repeated indefinitely, and offers the most connection points between each tile.\u003C/p\u003E\u003Cp\u003EHere is the map:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/JKqAjkY.jpg\u0022 alt=\u0022JKqAjkY.jpg\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003EIt seems simple enough. The map radiates out from the Sun, with Mercury, Earth, and Jupiter descending directly from an unseen Sun tile. However, I don\u0027t understand why any of the other bodies are placed where they are. Why is Venus a tile to the side? Why is Mars or any of the asteroids off to the sides?\u003C/p\u003E\u003Cp\u003EI tried to rationalize it myself, but it always comes back to the hard math. Since Rocket Flight, its descendant High Frontier, and cousin Attack Vector seem to have done \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V already, I don\u0027t want to re-invent everything.\u003C/p\u003E\u003Cp\u003ERocket Flight has the Zodiac, which appears to be like a compass. I don\u0027t know what their real significance is though, leading to my confusion about the position of solar system bodies. I guessed that they mean something like, with respect to the Sun:\u003C/p\u003E\u003Cp\u003E\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A2 Up/down hex faces = Retrograde and Prograde\u003C/p\u003E\u003Cp\u003E\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A2 Upper left/Lower right = Normal and Antinormal\u003C/p\u003E\u003Cp\u003E\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A2 Upper right/Lower left = Out and In (from the Sun, like the RAD\u002B/RAD- options on Mechjeb\u0027s Smart ASS)\u003C/p\u003E\u003Cp\u003EAt first glance this makes sense to me, since it covers all three dimensions. Yet under this system, using RF\u0027s standard units of \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V, it takes 3km/s to transfer from a prograde orbit to a normal/polar orbit... \u003Cstrong\u003Eat the bottom of the Sun\u0027s gravity well.\u003C/strong\u003E That doesn\u0027t seem right.\u003C/p\u003E\u003Cp\u003EYet, at the same time, the Zodiac symbols appear to be used as directional indicators in RF\u0027s Tactical view of the Jovian system. See:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/rTYqaki.jpg\u0022 alt=\u0022rTYqaki.jpg\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003EThat brings me to my other question, too. How can I create a tactical interface that offers players freedom to move and execute maneuvers while simulating orbital mechanics on some level?\u003C/p\u003E\u003Cp\u003EDoes it make sense to model combat using a \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V grid, and if so, is that what Rocket Flight\u0027s system appears to be simulating? Or should I use something more like the distance-based grids of \u003Ca href=\u0022http://projectrho.com/game/triplanetary.html\u0022 rel=\u0022external nofollow\u0022\u003ETriplanetary\u003C/a\u003E or \u003Ca href=\u0022http://projectrho.com/game/attackvector.html\u0022 rel=\u0022external nofollow\u0022\u003EAttack Vector\u003C/a\u003E?\u003C/p\u003E\u003Cp\u003EAnd, finally, since I want to make this a video game, what would you advise in general to a very much newbie to game creation? I want to program this myself.\u003C/p\u003E\u003Cp\u003Ebonus: \u003Ca href=\u0022The\u0022 rel=\u0022external nofollow\u0022\u003EThe Rocket Flight image album\u003C/a\u003E, pulled from Boardgamegeek.com\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-27T05:37:24Z\u0022 title=\u002204/27/2014 05:37  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 27, 2014\u003C/time\u003E by Accelerando\u003C/strong\u003E\n\u003Cbr\u003Emessed up the Tactical map link\n\u003C/span\u003E\n"},{"CreatedByName":"Nephas","CreatedById":75234,"CreatedDateTime":"2014-04-27T13:05:02Z","Content":"\n\u003Cp\u003EWell, I don\u0027t know the rules of Rocket-Flight, but from my general understanding of the matter, this map looks just like a simple 2D-cut through the ecliptic of the solar system, without any thought put into inclined planet orbits. For example look at the Lagrange points, L4 and L5 which lie in the plane of the earth\u0027s movement. Also, the star signs of the zodiac lie in the planetary plane, and i think in this context the star signs are just used as an North/South/East/West-analogue.\u003C/p\u003E\u003Cp\u003ESo my interpretation would be:\u003C/p\u003E\u003Cp\u003Eup-down: low solar orbit - high solar orbit\u003C/p\u003E\u003Cp\u003Eleft-right: trailing or leading on orbit, relative to the planet in the same row of hexes\u003C/p\u003E\u003Cp\u003EI think this is just a rather sketchy mapping of the dV-Problem, also because a physically realistic DeltaV-map for this many bodies (5 Planets and dozens of asteroids...), that gives correct DeltaV-values for all thinkable transfers cannot fit into a 2D-Plane.\u003C/p\u003E\u003Cp\u003EAnd if you want to simulate combat, distances and relative velocities of your ships are important, which a DeltaV-map can\u0027t give you. Think of it this way: you expend the same dV as your enemy, you land on the same orbit as him, but you could be drifting 1km behind him or going on the opposite side of the planet/sun, which makes quite a difference...\u003C/p\u003E\u003Cp\u003EAlso, i don\u0027t think that in a simulation of interplanetary combat the third dimension (read: orbit inclination) would be very important, as nearly every point of interest lies within the plane of planetary movements, and the inclinations of planetary orbits are just some neglectable degrees.\u003C/p\u003E\u003Cp\u003EBut you\u0027ve mentioned Triplanetary which has imho the best spaceship movement system ever (if you don\u0027t know the rules, read them and try the system, it\u0027s brilliant). In my eyes It\u0027s a newtonian physics simulation, boiled down to a level of granularity that you can fit the rules in five sentences and carry it out by hand. You get the distances and relative velocities simply from counting hexes, and you can even do gravity-slingshots. I\u0027ve made my own modification of the solar system map that includes a large solar gravity well and produces large kepler-ish solar orbits for your spaceships without any major rules additions. The only thing it still needs are better combat mechanics than the vanilla ones. If you\u0027re interested let me know and i will post and explain the map.\u003C/p\u003E\n"},{"CreatedByName":"Accelerando","CreatedById":543,"CreatedDateTime":"2014-04-27T17:57:35Z","Content":"\n\u003Cp\u003ETrue, a \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V map won\u0027t leave room for maneuvers, only showing the acceleration needed to get from here to there on a certain orbit at a certain time.\u003C/p\u003E\u003Cp\u003EAnd, true, RF\u0027s \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V map including L-Points suggests the map is basing direction on trailing or leading. Need a new system... \u003C/p\u003E\u003Cp\u003EAbout the realism part of the \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V map, would it work better if \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V increments could be scaled? Like you can drag a slider that adjusts the increments of \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V you want to see mapped out. So for larger increments like 3km/s, you might see Earth and Luna compressed into the same hex, and targeting that hex will drop down a menu of bodies to transfer to. \u003C/p\u003E\u003Cp\u003ETriplanetary indeed looks good, giving a very intuitive feel for gravity assist and burn maneuvers, with gravity hexes tugging the ship around, and each unit of burn pushing the ship one hex in the specified direction, adding to the final velocity. I would love to see your map! And your explanation.\u003C/p\u003E\u003Cp\u003EI disagree that 3D won\u0027t matter. Especially in the orbital space around planets and moons, won\u0027t the differences be pretty significant? KSC launches from nearly 30 degrees north of the equator, and Baikonur 45\u00C3\u201A\u00C2\u00BA.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-27T18:04:16Z\u0022 title=\u002204/27/2014 06:04  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 27, 2014\u003C/time\u003E by Accelerando\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nephas","CreatedById":75234,"CreatedDateTime":"2014-04-27T20:30:50Z","Content":"\n\u003Cp\u003EI assume that you already know triplanetary\u0027s map, but i will shortly recite the rules for other readers with my addition:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ETriplanetary Movement Rules\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe ship\u0027s positions in the former round and the running round are connected by a drawn vector arrow.\u003C/p\u003E\u003Cp\u003Eto predict the movement in the running turn:\u003C/p\u003E\u003Cp\u003E1. the vector is copied and drawn again starting from the tip of the old arrow.\u003C/p\u003E\u003Cp\u003E2. any gravity arrows the ship ran through in the round before move the tip of the new arrow by one field in the shown direction, where\u003C/p\u003E\u003Cp\u003Ea) Black arrows cannot be ignored and are cumulative\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E The small grey arrows cannot be ignored, but arrows from the same ring are not cumulative. If the ship ran throug several contradicting arrows, the captain may choose wich one to count\u003C/p\u003E\u003Cp\u003Ec) White arrows are totally optional and may be ignored.\u003C/p\u003E\u003Cp\u003E3. The captain may expend one point of fuel to move the final position of the vector by one field.\u003C/p\u003E\u003Cp\u003Epart \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E and the grey arrows were added by me to model the large scale gravitational force of the sun.\u003C/p\u003E\u003Cp\u003EThe part about ,,choosing your gravitational influence\u0027\u0027 can be reasoned as small scale correction burns that fall below the granularity of the fuel system.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/PNd7qZF.jpg\u0022 alt=\u0022PNd7qZF.jpg\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you play around with it a bit (for example, just do the movements for a ship without using the engines), you see that it produces nice parabolic and seemingly elliptic trajectories. Of course the trajectories are not closed ellipses (like real kepler orbits), but in the most practical cases you do short arcing transfers from one planet to the next without doing full solar orbits anyway. And it reproduces important characteristics of the gravitational field, like ships that go faster when falling deeper into the gravity well, or if you don\u0027t have enough fuel you won\u0027t even reach the outer planets ... just imagine what you can do with assistance of your computer: large scale map, moving planets...\u003C/p\u003E\u003Cp\u003EOn the 3D:\u003C/p\u003E\u003Cp\u003Eit really is a question of whether you do interplanetary war (here i think it would just add loads of complexity without adding anything to gameplay or strategic options), or whether you stay close to one planet\u0027s orbit.\u003C/p\u003E\u003Cp\u003EBut there i don\u0027t see a system that does fit both scenarios equally well. Except if you go totally abstract and use some graph similar to this one (just more detailed, and with cross connections):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://wiki.kerbalspaceprogram.com/w/images/7/73/KerbinDeltaVMap.png\u0022 alt=\u0022KerbinDeltaVMap.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003EBut here again distances and relative velocities don\u0027t play any role.\u003C/p\u003E\u003Cp\u003Edisclaimer: perhaps i should add that i was mainly thinking in terms of board games but that isn\u0027t necessarily bad when designing a video game \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}