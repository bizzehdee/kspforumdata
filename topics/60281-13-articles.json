{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":13,"Articles":[{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-07T21:36:52Z","Content":"\n\u003Cp\u003ELet me know if you want me to upload full copies of the logs.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-08T00:05:21Z","Content":"\n\u003Cp\u003EOk that\u0027s helpful. So the plugin is not getting any input packets. Is your arduino tx LED on when you launch? Rx LED should flash every 80ms, tx led should flash every 25ms, so it looks like it\u0027s on solid.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-08T10:41:34Z","Content":"\n\u003Cp\u003EWith Chatterer (working) -TX constantly on and RX constantly flickering.\u003C/p\u003E\u003Cp\u003EWithout Chatterer (not working) - TX off and RX constantly flickering.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-08T14:04:23Z","Content":"\n\u003Cp\u003ESo the problem has something to do with the arduino code not actually sending anything to the plugin.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-08T15:31:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003ESo the problem has something to do with the arduino code not actually sending anything to the plugin.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes... but the arduino code has no problem sending the data if chatterer is in the gamedata folder. So the problem has to be at the plugin side of things.... and some how the chatterer code holds the cure.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-08T17:10:54Z","Content":"\n\u003Cp\u003EPlug in some leds to check that the arduino code is actually running and not completely locked up.\u003C/p\u003E\n"},{"CreatedByName":"Chaosratt","CreatedById":71354,"CreatedDateTime":"2014-04-09T01:01:05Z","Content":"\n\u003Cp\u003EI\u0027ve got my ebay mega clone setup and the v4 code and plugin are working just fine (only tested base sketch so far) without chatterer installed.\u003C/p\u003E\n"},{"CreatedByName":"Chaosratt","CreatedById":71354,"CreatedDateTime":"2014-04-09T01:22:24Z","Content":"\n\u003Cp\u003EWell, I can confirm Mulbin\u0027s issue partially. Buttons/switches do not effect any change and only the RX light is flashing.\u003C/p\u003E\u003Cp\u003EEdit: Fully confirmed. TX only with chatterer mod installed, buttons and switches functional.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-09T01:33:42Z\u0022 title=\u002204/09/2014 01:33  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 9, 2014\u003C/time\u003E by Chaosratt\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-09T09:07:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chaosratt\u0022 data-cite=\u0022Chaosratt\u0022\u003E\u003Cdiv\u003EWell, I can confirm Mulbin\u0027s issue partially. Buttons/switches do not effect any change and only the RX light is flashing.\u003Cp\u003EEdit: Fully confirmed. TX only with chatterer mod installed, buttons and switches functional.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m glad someone has replicated the bug! I thought I was going insane!\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-09T13:37:42Z","Content":"\n\u003Cp\u003EWhen you say it\u0027s not working is it only the switches not working or is the whole thing not working?\u003C/p\u003E\n"},{"CreatedByName":"Chaosratt","CreatedById":71354,"CreatedDateTime":"2014-04-09T14:23:33Z","Content":"\n\u003Cp\u003EWithout Chatterer:\u003C/p\u003E\u003Cp\u003EOnly RX light blinks - Status LEDs work, buttons/switches do not.\u003C/p\u003E\u003Cp\u003EWith Chatterer:\u003C/p\u003E\u003Cp\u003EBoth RX \u0026amp; TX lights blink - Status LEDs work, buttons/switches work as expected.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-09T15:30:14Z","Content":"\n\u003Cp\u003ETry this\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_014_3.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_014_3.zip\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-09T16:38:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003ETry this\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_014_3.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_014_3.zip\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat works... without Chatterer!!!... what did you do?\u003C/p\u003E\u003Cp\u003EEDIT - I\u0027ll give it some more in depth testing later... but so far seems to have fixed the issue.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-09T16:42:16Z\u0022 title=\u002204/09/2014 04:42  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 9, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-09T19:37:22Z","Content":"\n\u003Cp\u003EIt seems that the bootloader on the mega puts the micro controller into load program mode if you send serial data to it too soon after connecting, which causes the thing to lock up. I just added a delay.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-09T19:51:02Z","Content":"\n\u003Cp\u003EAhhh, so Chatterer was just simulating a similar delay with all of the data it throws about when a scene loads!\u003C/p\u003E\u003Cp\u003EGreat work!\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-11T13:33:51Z","Content":"\n\u003Cp\u003EOK I assume the problem is fixed, updated the first page. Will resume adding more stuff this weekend.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-12T18:44:48Z","Content":"\n\u003Cp\u003EVersion 0.15.0: Moar Outputs!\u003C/p\u003E\u003Cp\u003EAdded:\u003C/p\u003E\u003Cp\u003EMission time: (second) unsigned long, will overflow after 2^32 seconds or ~130 years, so if your mission is more than 130 years, you will have problems with time\u003C/p\u003E\u003Cp\u003Edelta time: (second) float, the KSP time difference between current and previous packet, should be correctly scaled by time warp.\u003C/p\u003E\u003Cp\u003EAlso added the following resources for current stage, they are based on what the engines can see, so you need to activate engines on the stage to see them. The code is copied from the KOS plugin.\u003C/p\u003E\u003Cp\u003Efloat LiquidFuelTotS; \u003C/p\u003E\u003Cp\u003Efloat LiquidFuelS; \u003C/p\u003E\u003Cp\u003Efloat OxidizerTotS; \u003C/p\u003E\u003Cp\u003Efloat OxidizerS;\u003C/p\u003E\u003Cp\u003EPlugin:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_015_0.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_015_0.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EUpdated arduino code: (indicators now use stage fuel instead of total fuel)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemo5.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemo5.zip\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"RSRaney","CreatedById":35397,"CreatedDateTime":"2014-04-14T02:03:04Z","Content":"\n\u003Cp\u003EYour quick! And thank you for adding LF information status. \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EVersion 0.15.0: Moar Outputs!\u003Cp\u003EAdded:\u003C/p\u003E\u003Cp\u003EMission time: (second) unsigned long, will overflow after 2^32 seconds or ~130 years, so if your mission is more than 130 years, you will have problems with time\u003C/p\u003E\u003Cp\u003Edelta time: (second) float, the KSP time difference between current and previous packet, should be correctly scaled by time warp.\u003C/p\u003E\u003Cp\u003EAlso added the following resources for current stage, they are based on what the engines can see, so you need to activate engines on the stage to see them. The code is copied from the KOS plugin.\u003C/p\u003E\u003Cp\u003Efloat LiquidFuelTotS; \u003C/p\u003E\u003Cp\u003Efloat LiquidFuelS; \u003C/p\u003E\u003Cp\u003Efloat OxidizerTotS; \u003C/p\u003E\u003Cp\u003Efloat OxidizerS;\u003C/p\u003E\u003Cp\u003EPlugin:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_015_0.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_015_0.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EUpdated arduino code: (indicators now use stage fuel instead of total fuel)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemo5.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemo5.zip\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-15T14:26:33Z","Content":"\n\u003Cp\u003Ewhoa... how did I miss this! I\u0027ll download the new update tonight! great news.\u003C/p\u003E\u003Cp\u003EAny hints on how to code my charge/drain dial would be great if anyone has any ideas. The dial will have a needle show whether the battery is draining or charging and by how much.\u003C/p\u003E\u003Cp\u003EThe gauge will have a similar layout to this one, but obviously its actually a 0-5v voltmeter.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://withfriendship.com/images/g/31432/ammeter-clip-art.jpg\u0022 alt=\u0022ammeter-clip-art.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EFirst I need code to determing how fast my electric charge is draining or charging measured against MET.\u003C/p\u003E\u003Cp\u003EThe needle will need to be pointing vertically up when the battery is neither charging or draining (so arduino sending signal of about 127-128) and will move towards the left when the battery is draining and to the right when it is charging.\u003C/p\u003E\u003Cp\u003ESo negative values (drain rate) will mean the pin sending a signal range of 0-127 (0 being the strongest amount of drain) and positive values (charge rate) will use a signal range of 128-255\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-15T14:28:38Z\u0022 title=\u002204/15/2014 02:28  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 15, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-17T15:03:17Z","Content":"\n\u003Cp\u003ETry\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Efloat drainPerSecond;\u003Cbr\u003Efloat chargePrevious;\u003Cbr\u003E...\u003Cbr\u003E\u003Cbr\u003EdrainPerSecond = (VData.ECharge - chargePrevious)/VData.deltaTime;\u003Cbr\u003EchargePrevious = VData.ECharge;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"thatsmessedup","CreatedById":82196,"CreatedDateTime":"2014-04-19T21:02:35Z","Content":"\n\u003Cp\u003ESorry for the noob question but the arduino code is 4 different files and I do not know how to load them so it will compile and work on my uno. How do I go about opening and running this program?\u003C/p\u003E\u003Cp\u003EEDIT: after re-downloading and opening from the KSPIODemo file all of the others where included.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-19T22:41:01Z\u0022 title=\u002204/19/2014 10:41  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 19, 2014\u003C/time\u003E by thatsmessedup\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"thatsmessedup","CreatedById":82196,"CreatedDateTime":"2014-04-19T22:45:55Z","Content":"\n\u003Cp\u003EIv wired my arduino up but no success. Iv installed the plugin to the gamedata folder then opened arduino uno r3 and sent the program KSPIODemo without a hickup. After launching ksp I go into vab and setup a simple rocket. I hit launch and the green led will flash for about 1 second before showing anything on the pad. When I go to launch my rocket there are no blinking tx/rx lights and I do not get anymore activity from the leds. Any ideas?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-04-20T01:25:39Z","Content":"\n\u003Cp\u003ECan you post your debug log (press F2)?\u003C/p\u003E\n"},{"CreatedByName":"thatsmessedup","CreatedById":82196,"CreatedDateTime":"2014-04-20T04:55:54Z","Content":"\n\u003Cp\u003EThanks zitronen,\u003C/p\u003E\u003Cp\u003EIm not sure how to save that out as a file but It has no report about anything particular to this plugin.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-04-20T08:18:07Z","Content":"\n\u003Cp\u003EYour debug log automatically saves in your main KSP folder (the same place as KSP.exe) each time you play. It\u0027s a text file called KSP.log\u003C/p\u003E\n"}]}