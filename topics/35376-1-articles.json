{"TopicId":35376,"ForumId":29,"TopicTitle":"solved Activating custom PartModule freezes game after restarting flight","CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2013-06-30T13:41:42Z","PageNum":1,"Articles":[{"CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2013-06-30T13:41:42Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003EI\u0027m writing a new part module which is an advanced SRB. For new ships (straight from the VAB or using the select ship box on the Launchpad) the plugin works as expected. However, after restarting a flight or loading a flight already on the Launchpad, activating the part causes the game to freeze.\u003C/p\u003E\u003Cp\u003E1. I suspect the problem is with the plugin working after loading from the persistence file.\u003C/p\u003E\u003Cp\u003E2. Output log shows that the program is running through the end of the OnActivate() sub, but stops somewhere before getting into OnFixedUpdate() (it may actually enter the code block, but a print() message as the first line of the OnFixedUpdate() sub does not show up in the log\u003C/p\u003E\u003Cp\u003E3. As long as I don\u0027t activate the custom part module, the game runs fine.\u003C/p\u003E\u003Cp\u003EI don\u0027t have internet at my development computer until tomorrow, but I may be able to post the code up sometime tonight.\u003C/p\u003E\u003Cp\u003EThanks for your help.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-02T16:03:20Z\u0022 title=\u002207/02/2013 04:03  PM\u0022 data-short=\u002211 yr\u0022\u003EJuly 2, 2013\u003C/time\u003E by kujuman\u003C/strong\u003E\n\u003Cbr\u003ESolved my stupid errors\n\u003C/span\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-07-01T16:57:34Z","Content":"\n\u003Cp\u003EWithout knowing what your module is doing or what the error is it\u0027s a little hard to say.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-02T16:14:08Z\u0022 title=\u002207/02/2013 04:14  PM\u0022 data-short=\u002211 yr\u0022\u003EJuly 2, 2013\u003C/time\u003E by EndlessWaves\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2013-07-02T16:01:08Z","Content":"\n\u003Cp\u003Ehm, I thought I had updated the post...\u003C/p\u003E\u003Cp\u003EAnyway I have solved the issue. \u003C/p\u003E\u003Cp\u003EIt was due to a do loop getting stuck because part.attachnode.attachedPartId.ToString() returns the attached part and id number just fine when loading a new vessel. (It will return something like \u0022CommandPod1-2_49295810560054\u0022)\u003C/p\u003E\u003Cp\u003EHowever, this returns \u0022\u0022 when the game creates a vessel from a save file. Which is...weird. Anyway, I instead used part.attachnode.attachedPart != null (which returns the attached part as a Part class) which does work after loading from a save.\u003C/p\u003E\u003Cp\u003ESo all in all, always remember to put some failsafe way out of loops and part.attachnode.attachPartId.ToString() should not be used on flight vessels, but would probably work ok for editor type stuff\u003C/p\u003E\n"}]}