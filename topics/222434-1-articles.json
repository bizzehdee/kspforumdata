{"TopicId":222434,"ForumId":136,"TopicTitle":"KSP2 on launch uses 100% CPU and forces hard power off to recover","CreatedByName":"iDrake","CreatedById":231935,"CreatedDateTime":"2023-12-31T17:39:09Z","PageNum":1,"Articles":[{"CreatedByName":"iDrake","CreatedById":231935,"CreatedDateTime":"2023-12-31T17:39:09Z","Content":"\n\u003Cp\u003E\nHello,\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am troubleshooting a condition that started happening to me as of yesterday. Before going into the details, here is the general information requested on support cases.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EYou system specifications (CPU / GPU / RAM/\u003C/strong\u003E\u003Cbr\u003E\nA: Intel(R) Core(TM) i7-7820X CPU @ 3.60GHz, 3600 Mhz, 8 Core(s), 16 Logical Processor(s)\u003Cbr\u003E\nNVIDIA GeForce RTX 2080 Ti\u003Cbr\u003E\nInstalled Physical Memory (RAM)\u00A0\u00A0 \u00A032.0 GB\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EIf you are trying to load an existing save or start a new one\u003C/strong\u003E\u003Cbr\u003E\nA: start the game at all\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EThe content of the file \u0022Player.log\u0022 situated in %USERPROFILE%\\AppData\\LocalLow\\Intercept Games\\Kerbal Space Program 2\u003C/strong\u003E\u003Cbr\u003E\nA: -----start-----\u003Cbr\u003E\nMono path[0] = \u0027C:/Steam/steamapps/common/Kerbal Space Program 2/KSP2_x64_Data/Managed\u0027\u003Cbr\u003E\nMono config path = \u0027C:/Steam/steamapps/common/Kerbal Space Program 2/MonoBleedingEdge/etc\u0027\u003Cbr\u003E\nInitialize engine version: 2022.3.5f1 (9674261d40ee)\u003Cbr\u003E\n[Subsystems] Discovering subsystems at path C:/Steam/steamapps/common/Kerbal Space Program 2/KSP2_x64_Data/UnitySubsystems\u003Cbr\u003E\nGfxDevice: creating device client; threaded=1; jobified=0\u003Cbr\u003E\nDirect3D:\u003Cbr\u003E\n\u00A0 \u00A0 Version: \u00A0Direct3D 11.0 [level 11.1]\u003Cbr\u003E\n\u00A0 \u00A0 Renderer: NVIDIA GeForce RTX 2080 Ti (ID=0x1e07)\u003Cbr\u003E\n\u00A0 \u00A0 Vendor: \u00A0 NVIDIA\u003Cbr\u003E\n\u00A0 \u00A0 VRAM: \u00A0 \u00A0 11041 MB\u003Cbr\u003E\n\u00A0 \u00A0 Driver: \u00A0 31.0.15.4633\u003Cbr\u003E\nBegin MonoManager ReloadAssembly\u003Cbr\u003E\n-----end-----\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EA zipped copy of your campaign located at C:\\Users\\\u0026lt;name\u0026gt;\\AppData\\LocalLow\\Intercept Games\\Kerbal Space Program 2\\Saves\\SinglePlayer\u003C/strong\u003E\u003Cbr\u003E\nA: saved\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EProblem Description:\u003C/strong\u003E\u003Cbr\u003E\nI launch KSP2 from Steam, and the Private Division launcher executes. I click the play button, the launcher window disappears and the KSP splash window comes up with the spinning circle in the bottom right corner. it takes about 5 seconds and then, everything begins to lag extremely hard. The mouse movement across the screen is rough and jittery, the responsiveness of the entire OS drops. Each time this happens the only working option to recover the system is to hard power off. Through troubleshooting I\u0027ve determined that CPU is hitting 100%, however have been unable to confirm the exact process and path that is the offending process\u2014more details in the troubleshooting section.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ETroubleshooting:\u003C/strong\u003E\u003Cbr\u003E\nI\u0027ve attempted to gather more information by using Process Explorer and having it up on the screen in a small window with it focused on CPU usage, to try and identify if there is one single process causing the issue and what it is. When this problem happens, the lag on the OS is so powerful that it takes on average about 45 seconds for even Process Explorer to refresh graphically. In one attempt I let it sit for 10 minutes, waiting to see if I could catch an offending process. It never came up, but there was a general increase across all running processes including the highest one being System Interrupts. The CPU usage is so heavy that even my RGB fans which cycle through a rainbow display (iCue / H1501 Elite LCD XT) will stutter and lag as a result of the CPU impact. (Which I find to be impressive!)\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve attempted to recover the system when this happens by ending task on the private launcher process, does no good and never terminates.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve attempted to recover the system by doing a sign out, waited 20 minutes, it got as far as the spinning dots, never made it further, gave up and hard powered off.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve attempted to recover the system by doing a shutdown, as above, waited a more than reasonable amount of time, with the same results as the sign out attempt.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve attempted to recover the system by mashing ALT-F4 as soon as the lagging starts.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried verifying the game files.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve uninstalled KSP 2 and tried a clean install.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried copying out the Private Division launcher director from \u003Cem\u003EAPPDATA \u003C/em\u003Eand letting all those files be recreated. (And they did)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried deleting out the KSP directory out of \u003Cem\u003EAPPDATA \u003C/em\u003Eafter zipping up the \u003Cem\u003Esingleplayer \u003C/em\u003Edirectory for troubleshooting.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried shutting down all background processes within reason to rule out a new conflict with other software.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve shut off all security software and AV, going as far as to disable the system services from ever starting up on a clean boot.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve ran SFC, no OS issues found.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve made sure my GPU driver is up to date, no change preceding this issue started. Currently on 546.33 GeForce Game Ready Driver release date 12/12/2023\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve ran other games without this issue.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ENext Steps:\u003C/strong\u003E\u003Cbr\u003E\nI\u0027m happy to do any next-level information gathering like procmon that is targeted to capture KSP executable actions. I don\u0027t know if an ELT Trace would work as I\u0027m having to shut down the system with the power button, so an ETL capture wouldn\u0027t be able to package its data.\u00A0 I\u0027m open to giving things a try. I\u0027m fairly IT knowledgeable.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-12-31T17:41:17Z\u0022 title=\u002212/31/2023 05:41  PM\u0022 data-short=\u0022Dec 31\u0022\u003EDecember 31, 2023\u003C/time\u003E by iDrake\u003C/strong\u003E\n\u003Cbr\u003EI forgot to bold something and I have OCD\n\u003C/span\u003E\n"},{"CreatedByName":"iDrake","CreatedById":231935,"CreatedDateTime":"2024-01-01T22:21:03Z","Content":"\n\u003Cp\u003E\nWe fixed the glitch!\n\u003C/p\u003E\n\u003Cp\u003E\nAfter giving it a few days I decided to come back to it and dig deeper. I will spare everything it wasn\u0027t, and the painful crawl through the system and application event logs, but I discovered there was a recent update to MSI software on my rig.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EResolution:\u003C/strong\u003E\u003Cbr\u003E\nRoot cause was an update done to \u003Cstrong\u003E\u003Cspan style=\u0022color:#e74c3c;\u0022\u003EMSI Center.\u003C/span\u003E\u003C/strong\u003E This application has several \u003Cstrong\u003E\u003Cspan style=\u0022color:#e74c3c;\u0022\u003Efeature sets.\u003C/span\u003E\u003C/strong\u003E One is a feature set called \u003Cstrong\u003E\u003Cspan style=\u0022color:#e74c3c;\u0022\u003EGaming Mode\u003C/span\u003E\u003C/strong\u003E described as \u0022Provide auto-tuning function for your favorite games.\u0022 \u003Cspan style=\u0022color:#3498db;\u0022\u003E\u003Cstrong\u003EUpon removing this feature set from MSI Center entirely, KSP now\u003C/strong\u003E\u003C/span\u003E \u003Cspan style=\u0022color:#3498db;\u0022\u003E\u003Cstrong\u003Elaunches correctly.\u003C/strong\u003E\u003C/span\u003E I never had an issue with this before, have an issue now, and have decided never to use that MSI Center feature set again.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EReference:\u00A0\u003C/strong\u003E\u003Cbr\u003E\n\u003Ca href=\u0022https://www.msi.com/support/technical_details/NB_%20SW_MSI_Center#txt01\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.msi.com/support/technical_details/NB_ SW_MSI_Center#txt01\u003C/a\u003E\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022113\u0022 src=\u0022https://www.youtube-nocookie.com/embed/Zh3EYeZ6GHI?feature=oembed\u0022 title=\u0022MSI Center \u2013 Your Own Style | MSI\u0022 width=\u0022200\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}