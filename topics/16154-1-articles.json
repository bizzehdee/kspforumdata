{"TopicId":16154,"ForumId":36,"TopicTitle":"Question about explosions ( I swear, it\u0026#039;s not about weapons)","CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2012-08-05T22:22:03Z","PageNum":1,"Articles":[{"CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2012-08-05T22:22:03Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003EI\u0027ve just started making a small plug-in/part to remove space debris (basically, a TNT bomb, Wile E. Coyote/ACME style, which triggers 5 seconds after being decoupled).\u003C/p\u003E\u003Cp\u003EMy issue is not making the part (it\u0027s mostly done, except some CFG issues, but I can deal with that later), it\u0027s \u0022how to explode the discarded stage with the bomb on it\u0022.\u003C/p\u003E\u003Cp\u003EIf I just explode the pack, nothing explodes around it.\u003C/p\u003E\u003Cp\u003EIf I decide to explode the pack and its parent, only those two are exploding (and projecting fuel tanks upward. Fun, but not what I expected).\u003C/p\u003E\u003Cp\u003EI finally tried what would have been the \u0022best way\u0022: explode each and every part of the discarded stage (I used some sort of parent/children algorithm to get them all).\u003C/p\u003E\u003Cp\u003EIt works fine for 2 tanks, an engine and a decoupler, buuuuuuut KSP crashes if I use it on my 36-tanks, 9-engines, 48-struts stage (since then, I removed the struts from the list; still crashes though) . \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt also creates deadlocks and the likes, and that\u0027s just a dirty, wrong way to make it happen.\u003C/p\u003E\u003Cp\u003ENow that I\u0027ve thought a bit more about it, I\u0027d think the best way to do this would be some sort of \u0022now let\u0027s blow this thing and go home\u0022: a big, huge explosion, and other parts destroyed without exploding (this way, KSP just removes them and doesn\u0027t search to make a \u0022fractal\u0022 explosion).\u003C/p\u003E\u003Cp\u003ESo here are my questions:\u003C/p\u003E\u003Cp\u003E- is there a \u0022good\u0022 way to explode a vessel completely? I think most of the issues are due to the \u0022sum\u0022 of explosions I make by blowing each part.\u003C/p\u003E\u003Cp\u003E- is it preferable to do a \u0022massive\u0022 explosion and part.onPartDestroy() than just part.explode()?\u003C/p\u003E\u003Cp\u003E- in the case it\u0027s preferable, what is a good \u0022max\u0022 value for explosionPotential (not crashing, not lagging, still scares Jeb even if he\u0027s 2km away), and can it be set dynamically to a part via the API? (I made an \u0022explosion.dll\u0022 already, so it\u0027s more of a \u0022how can I set this\u0022)\u003C/p\u003E\u003Cp\u003EIt would be best for it to go from something like 0.5 for a TNT pack alone to \u0026lt;maxValue\u0026gt; if you have more than 5 or 6 explosive parts.\u003C/p\u003E\u003Cp\u003EAnyway, if you have any ideas, please let me know.\u003C/p\u003E\n"},{"CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2012-08-07T08:53:08Z","Content":"\n\u003Cp\u003EOkay, a bit more trial-and-error yesterday, and here\u0027s what I got:\u003C/p\u003E\u003Cp\u003E- I can retrieve/set the explosionPotential of a part by... calling part.explosionPotential. Dunno why I was expecting something else. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I also saw some other variables like blastForce and the like; any idea what those are? (smells like moar testing)\u003C/p\u003E\u003Cp\u003E- destroying parts instead of exploding them is HARD. After many fails, I decided to set a part explosionPotential to 0 and explode it. However, that brings back the \u0022old\u0022 issue if the explosion is too complex, with deadlocks and the like.\u003C/p\u003E\u003Cp\u003E - I tried to use Vessel.destroy(vessel), but it was a lost cause, didn\u0027t work. Shame, it would have been perfect.\u003C/p\u003E\u003Cp\u003EAlso, this is more linked to my code, but if I think deadlocks are caused by the fact there is more than one TNT pack on a vessel (one is enough, but I know people will put 10 or 20 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ) and they\u0027re trying to delete the same part at the same time.\u003C/p\u003E\u003Cp\u003EI may have to rethink how the destruction occurs (shared static list between TNT packs? One \u0022master\u0022 pack that destroys the vessel, while the others just explode?)\u003C/p\u003E\u003Cp\u003Eedit: well, it\u0027s done now.\u003C/p\u003E\u003Cp\u003EWhat I did:\u003C/p\u003E\u003Cp\u003E- Vessel.Die() kills the whole vessel without any fuss. It\u0027s perfect for my needs.\u003C/p\u003E\u003Cp\u003E- before that, each pack knows the \u0022main\u0022 pack (first one in vessel.parts). The others are destroyed with the vessel, but their explosionPotential is added to the main one; this way, only one big explosion, much less (or no) deadlocks, and the vessel is destroyed.\u003C/p\u003E\u003Cp\u003E- the maxValue is set at 100, but since I didn\u0027t see a difference with 10, it\u0027s not very useful. Maybe I\u0027ll remove it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-08T22:07:53Z\u0022 title=\u002208/08/2012 10:07  PM\u0022 data-short=\u002211 yr\u0022\u003EAugust 8, 2012\u003C/time\u003E by Neomatt\u003C/strong\u003E\n\u003C/span\u003E\n"}]}