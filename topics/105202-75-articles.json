{"TopicId":105202,"ForumId":34,"TopicTitle":"[1.12.x] USI Life Support","CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2015-04-27T17:37:19Z","PageNum":75,"Articles":[{"CreatedByName":"oglommi","CreatedById":127214,"CreatedDateTime":"2016-03-02T13:12:57Z","Content":"The crew on my ship turned grumpy despite having supplies and don\u0027t want to work anymore. After warping to a maneuver node my supplies and fertilizer in my nom-o-matic 500 dissapeared and the crew turned grouchy, despite having a 3.75 lifesupport tank full of supplies. The Crew refuses to come back to work despite me cheating in more fertilizer and balancing out the supplies. They are gluttonous sinners and are eating like crazy but not working.\n\nHelp\n\n**Edited \u003Ctime datetime=\u00222016-03-02T13:13:26Z\u0022 title=\u002203/02/2016 01:13  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 2, 2016\u003C/time\u003E by oglommi**"},{"CreatedByName":"ExplorerKlatt","CreatedById":107424,"CreatedDateTime":"2016-03-02T14:20:15Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, oglommi said:\n\u003E \n\u003E \n\u003E The crew on my ship turned grumpy despite having supplies and don\u0027t want to work anymore. After warping to a maneuver node my supplies and fertilizer in my nom-o-matic 500 dissapeared and the crew turned grouchy, despite having a 3.75 lifesupport tank full of supplies. The Crew refuses to come back to work despite me cheating in more fertilizer and balancing out the supplies. They are gluttonous sinners and are eating like crazy but not working.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Help\n\u003E \n\nDo you have EC?"},{"CreatedByName":"oglommi","CreatedById":127214,"CreatedDateTime":"2016-03-02T15:52:49Z","Content":"Yes I have EC, I have everything.\n\nThe problem was not enough workspace. They turned grumpy because all the capsules where full of people."},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2016-03-02T18:54:45Z","Content":"Looks like I missed a lot in this thread ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)  I\u0027ll be bundling up an update with the new PR\u0027s and reviewing the current issue logs."},{"CreatedByName":"nathan1","CreatedById":144486,"CreatedDateTime":"2016-03-02T20:11:26Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, Kobymaru said:\n\u003E \n\u003E \n\u003E Thanks a lot! I\u0027m gonna check out the changes when I get home, and to some testing. A note though, RoverDude likes his changes against the DEVELOP branch for some reason (I gotta ask him why, some time...). Could you rebase it?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E While we\u0027re at it, what if we compile a suite of tests ranging from something as easy as \u0022timewarp focused vessel and check if consumption is correct\u0022 to all of the docking/undocking business?\n\u003E \n\nI had based it on the dev branch, but the dev branch has moved on. I\u0027ll rebase it so it\u0027s up-to-date.\n\nUnfortunately there\u0027s a pretty big bug with my changes currently: if you run out of supplies during catch-up then the negative effects will not get applied. I know the exact line of the code that\u0027s the problem, but the root of the problem is subtle differences for detecting that catch-up is in progress (so that it doesn\u0027t kill your kerbals during catch-up if your vessel/base is in the middle of creating resources at the same time as they\u0027re being consumed) between what the code used to do and my changes. For now I\u0027m mulling over what I can do to fix it...\n\nA suite of tests is a good idea. Were you thinking something automated, or a list on the wiki? I\u0027d recommend keeping it as concise as possible; if it\u0027s short and to the point then it\u0027s a convenient check-list for testing, but if it\u0027s long and verbose then people will avoid it and it will quickly become out of date."},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2016-03-02T20:39:03Z","Content":"\u003E \n\u003E \n\u003E 25 minutes ago, nathan1 said:\n\u003E \n\u003E \n\u003E Unfortunately there\u0027s a pretty big bug with my changes currently: if you run out of supplies during catch-up then the negative effects will not get applied. I know the exact line of the code that\u0027s the problem, but the root of the problem is subtle differences for detecting that catch-up is in progress (so that it doesn\u0027t kill your kerbals during catch-up if your vessel/base is in the middle of creating resources at the same time as they\u0027re being consumed) between what the code used to do and my changes. For now I\u0027m mulling over what I can do to fix it...\n\u003E \n\nSince RoverDude is back, we should leave the heavy coding to him ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n\u003E \n\u003E \n\u003E 25 minutes ago, nathan1 said:\n\u003E \n\u003E \n\u003E A suite of tests is a good idea. Were you thinking something automated, or a list on the wiki? I\u0027d recommend keeping it as concise as possible; if it\u0027s short and to the point then it\u0027s a convenient check-list for testing, but if it\u0027s long and verbose then people will avoid it and it will quickly become out of date.\n\u003E \n\nI live by the \u0022something is better than nothing\u0022 principle. So automatic would be awesome, but for now at least a check-list would be good. The idea is just a little helper for RoverDude and people who make pull requests, to check if their code breaks other stuff."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-02T20:59:19Z","Content":"I\u0027ve been reading back a few pages and noticed a few bugs related to un-kerbal\u0027d vessels.  \n\nI also picked this up last week and  I submitted a PR that Roverdude applied today to fix the life support recipe processing for when a vessel is un-crewed for a period of time. The life support recipe would then play catch-up and consume all the supplies for the entire period of time it was un-crewed. So next version should fix that."},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2016-03-02T21:53:12Z","Content":"I\u0027ll be doing an interim release today - that should give folks a nicer base to work off of.\n\nAnd I take PRs against dev since that\u0027s what I work against ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  Master is only for the released versions"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2016-03-03T03:24:25Z","Content":"0.3.13 - 2016.03.02  \n\n-------------------  \n\nRemove ReplacementParts input ressource from MPL (thanks far-lobyte!)  \n\nFixed issue with empty vessels and supply consumption upon Kerbals entering (thanks JPLRepo!)  \n\nadded more info to the VAB info windows (Thanks bennord!)  \n\nOrbiting/Splashed/Landed should display correctly now.  \n\nBoth hab time and homesickness time are shown.  When either timer expires, the habitation effect takes place.  \n\nCorrected an issue that was causing hab time to incorrectly reset.  \n\nFixed an issue where supply consumption was out of sync with recyclers/etc. during catch-up mechanics.  \n\nFixed an issue causing diminishing returns for recyclers   \n\nFixed an issue where certain settings were not having effects\n\n[Side note - the VAB display also has an update but I\u0027d consider this experimental for now]"},{"CreatedByName":"Kaa253","CreatedById":68628,"CreatedDateTime":"2016-03-03T04:10:21Z","Content":"[@RoverDude](https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/) Wonderful, thank you for the update. Can\u0027t wait to try it out. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"jofwu","CreatedById":94705,"CreatedDateTime":"2016-03-03T04:12:59Z","Content":"I was digging through the code for how multiple Recycler work earlier, which turned out to have some issues which are now fixed. Since I got nice and cozy with what\u0027s going on I thought I\u0027d explain for anyone else who\u0027s curious for the gory details:\n\nA Recycler has an Efficiency and a Crew Capacity. So for example the stock MPL (Science Lab) is modified by USI-LS to have 70% Efficiency and a Crew Capacity of 5. This means your usual consumption rate of 16.2 Supplies per Kerbal-day will be reduced by 70% (i.e. multiplied by 1 - 0.7 = 0.3) for up to 5 Kerbals. So one Kerbal with an activated Science Lab would eat 1\\*16.2\\*0.3 Supplies/day. Two Kerbals would eat 2\\*16.2\\*0.3 Supplies/day. Five Kerbals would eat 5\\*16.2\\*0.3 Supplies per day.\n\nAfter you exceed the Crew Capacity, the Efficiency is reduced proportionally to how far over capacity you are. Say you\u0027ve got 8 Kerbals in a ship/colony with a single activated Science Lab. Instead of getting the 70% discount you\u0027re going to get 5/8ths of that discount. For 10 Kerbals (two times overcapacity) you\u0027re only going to get 5/10 = 1/2 of the Science Lab\u0027s normal rate. So 10 Kerbals with a Science Lab will only get an \u0022effective efficiency\u0022 of 0.7\\*(5/10) = 0.35. And then, as before, 35% efficiency translates to a 1 - 0.35 = 0.65 reduction. In the end your Kerbals will collectively consume Supplies at a rate of 10\\*16.2\\*(1-0.7\\*5/10) = 10\\*16.2\\*(0.65) Supplies/day. With a second Science Lab you would no longer be overcapacity so you wouldn\u0027t see the efficiency reduction. You\u0027d simply have 10\\*16.2\\*0.3 Supplies/day. Big difference.\n\nLastly I\u0027ll talk about having multiple activated Recyclers in your colony. There\u0027s two key ideas. First, the effective efficiencies for each Recyler part simply add up into a single colony-wide effective efficiency. Second, that number is limited by the efficiency of your most efficient part. So let\u0027s look at some numbers... I just talked about having two Science Labs. The math isn\u0027t actually as simple as I made it sound. You have to look at each Recycler separately. Since they\u0027re the same part in this case, the math for each is the same. You\u0027ve got 10 Kerbals, a Crew Capacity of 5, and an Efficiency of 70%. So that\u0027s 0.7\\*(5/10) = 0.35. But you\u0027ve got two of them, so they add together: 0.35 \u002B 0.35 = 0.7 = 70%. But what happens if you had 9 Kerbals with two Science Labs? That\u0027s an efficiency of 0.7\\*(5/9) = 0.39 each, producing a sum of 0.39 \u002B 0.39 = 0.78. In this case, since we\u0027re higher than the max single-part efficiency of 70%, we cap things off at 70% instead of allowing for a 78% efficiency. Now, if you\u0027re running over the capacity of both you\u0027d see a reduction just as you\u0027d expect. If you have 14 Kerbals and two Science Labs that\u0027s 0.7\\*(5/14) = 0.25 each or 0.5 total. Since this is less than the 70% cap we go with 50%. Your Kerbals will consume at a rate of 14\\*16.2\\*(1-0.5) = 14\\*16.2\\*0.5.\n\nHopefully this clears things up for anyone like myself who wonders!"},{"CreatedByName":"Brigadier","CreatedById":147109,"CreatedDateTime":"2016-03-03T04:34:38Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, RoverDude said:\n\u003E \n\u003E \n\u003E [Side note - the VAB display also has an update but I\u0027d consider this experimental for now]\n\u003E \n\nI\u0027m not so sure I want to know what this means ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"DStaal","CreatedById":155685,"CreatedDateTime":"2016-03-03T06:12:01Z","Content":"It\u0027s nice - a bit more of a breakdown of what\u0027s going on with the vessel you\u0027re designing."},{"CreatedByName":"merlinux","CreatedById":83117,"CreatedDateTime":"2016-03-03T06:40:32Z","Content":"Hi all,\n\nIm sorry to ask those questions which Im sure have been answered in the past somewhere in this thread. But searching has been a bit of a hit and miss. I have been away from KSP for more than a year now. Tried a bit of 1.0 when it first came out but that\u0027s it. I have used USI mods a lot in the past but things have changed so much ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nSo I play in sandbox mode, never been a fan of the grinding that career requires. Now I have set up a mockup base at KSC and a space station in mun orbit and I have trouble understanding how LS works. When I look at my stats the kerbals on kerbin have ran out of supplies yet hab andhome stats still show some high values, and on the space station I have also very values. What does exactely \u0027hab\u0027 and \u0027home\u0027 mean? I supposed \u0027home\u0027 is for the homesick time?\n\nIs it because I play sandbox and it is meant to be played on career?"},{"CreatedByName":"nathan1","CreatedById":144486,"CreatedDateTime":"2016-03-03T07:00:54Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, RoverDude said:\n\u003E \n\u003E \n\u003E 0.3.13 - 2016.03.02  \n\u003E \n\u003E -------------------  \n\u003E \n\u003E Remove ReplacementParts input ressource from MPL (thanks far-lobyte!)  \n\u003E \n\u003E Fixed issue with empty vessels and supply consumption upon Kerbals entering (thanks JPLRepo!)  \n\u003E \n\u003E added more info to the VAB info windows (Thanks bennord!)  \n\u003E \n\u003E Orbiting/Splashed/Landed should display correctly now.  \n\u003E \n\u003E Both hab time and homesickness time are shown.  When either timer expires, the habitation effect takes place.  \n\u003E \n\u003E Corrected an issue that was causing hab time to incorrectly reset.  \n\u003E \n\u003E Fixed an issue where supply consumption was out of sync with recyclers/etc. during catch-up mechanics.  \n\u003E \n\u003E Fixed an issue causing diminishing returns for recyclers   \n\u003E \n\u003E Fixed an issue where certain settings were not having effects\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [Side note - the VAB display also has an update but I\u0027d consider this experimental for now]\n\u003E \n\nA new bug is introduced with this version: supplies consumption scales up with the Unity physics time-step (instead of consuming supplies once every second it\u0027s consuming supplies every FixedUpdate - so supply consumption appears to be about 25x higher in this version on my machine, consuming more than 1 supply every minute). The check referred to in [this comment in the source](https://github.com/BobPalmer/USI-LS/blob/master/Source/USILifeSupport/ModuleLifeSupport.cs#L104) appears to have been moved *after* supply consumption and needs to happen *before* instead (as it was before this version)."},{"CreatedByName":"oglommi","CreatedById":127214,"CreatedDateTime":"2016-03-03T07:37:46Z","Content":"Hey hey everybody. Just wondering if there are other factors making the crew grouchy other than supplies and workspace?"},{"CreatedByName":"Tossy64","CreatedById":135514,"CreatedDateTime":"2016-03-03T08:19:35Z","Content":"\u003E \n\u003E \n\u003E On 2/14/2016 at 8:21 PM, RoverDude said:\n\u003E \n\u003E \n\u003E 0.3.12 - 2016.02.13  \n\u003E \n\u003E -------------------  \n\u003E \n\u003E Various display bug fixes\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 1.  This changed, yes it is the new default\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 2.  That should just be visual, but I\u0027ll take a peek\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 3.  Sorry, can\u0027t control MechJeb\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 4.  See if that still occurs in the new patch - if so, logging github issues is the best way to get things changed ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nSo will you update the first post description, if the orange suit exemption is no longer a thing? Is there a better \u0022manual\u0022 for how this works, because the first post doesn\u0027t mention this habitability concept either."},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2016-03-03T11:16:06Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, merlinux said:\n\u003E \n\u003E \n\u003E Hi all,\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Im sorry to ask those questions which Im sure have been answered in the past somewhere in this thread. But searching has been a bit of a hit and miss. I have been away from KSP for more than a year now. Tried a bit of 1.0 when it first came out but that\u0027s it. I have used USI mods a lot in the past but things have changed so much ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E So I play in sandbox mode, never been a fan of the grinding that career requires. Now I have set up a mockup base at KSC and a space station in mun orbit and I have trouble understanding how LS works. When I look at my stats the kerbals on kerbin have ran out of supplies yet hab andhome stats still show some high values, and on the space station I have also very values. What does exactely \u0027hab\u0027 and \u0027home\u0027 mean? I supposed \u0027home\u0027 is for the homesick time?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Is it because I play sandbox and it is meant to be played on career?\n\u003E \n\nHab = how long they will stay in their current abode (i.e. if you go from a cushy base to a tiny capsule, this changes).  Home = how long they can stay off of Kerbin based on the very best hab they have ever had.\n\nSo a guy stuffed in a capsule has low values on both.  A guy launching in a giant colony ship probably has high values on both.  But if he is sent off in a small rover later, home will be high, hab will be small (so while you can extend hab with nice bases, they either need to stay there, or come back after short jaunts).  Example would be a trip to Duna with a larger command ship with lots of hab space, and a small surface lander that just needs enough hab to last getting down to the surface and back.\n\n\u003E \n\u003E \n\u003E 4 hours ago, nathan1 said:\n\u003E \n\u003E \n\u003E A new bug is introduced with this version: supplies consumption scales up with the Unity physics time-step (instead of consuming supplies once every second it\u0027s consuming supplies every FixedUpdate - so supply consumption appears to be about 25x higher in this version on my machine, consuming more than 1 supply every minute). The check referred to in [this comment in the source](https://github.com/BobPalmer/USI-LS/blob/master/Source/USILifeSupport/ModuleLifeSupport.cs#L104) appears to have been moved *after* supply consumption and needs to happen *before* instead (as it was before this version).\n\u003E \n\nThe line is moved in the correct place, but there\u0027s very likely another bug causing over-consumption.\n\n\u003E \n\u003E \n\u003E 3 hours ago, oglommi said:\n\u003E \n\u003E \n\u003E Hey hey everybody. Just wondering if there are other factors making the crew grouchy other than supplies and workspace?\n\u003E \n\nThat should be it - tho it\u0027s hab space not work space ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  Also, it can be EC as well, not just supplies.\n\n\u003E \n\u003E \n\u003E 2 hours ago, Tossy64 said:\n\u003E \n\u003E \n\u003E So will you update the first post description, if the orange suit exemption is no longer a thing? Is there a better \u0022manual\u0022 for how this works, because the first post doesn\u0027t mention this habitability concept either.\n\u003E \n\nIt\u0027s a thing that\u0027s selectable, will fiddle with the OP as I have time ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Kowgan","CreatedById":116874,"CreatedDateTime":"2016-03-03T12:20:09Z","Content":"Did you increase the hab value for pods, from 30 days per seat to 150d?\n\nSpoiler\n\n![d19ea36225.png](http://puu.sh/nte35/d19ea36225.png)\n\nAlso, all those kerbals\u0027 home being 105 years looks weird, almost like not right. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\nSpoiler\n\n![9429912102.png](http://puu.sh/nte8y/9429912102.png)"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2016-03-03T12:30:49Z","Content":"Default for USI-LS (without UKS or MKS-Lite) has a much longer hab time, yes\n\nJust uploaded a new version that should fix the overconsumption problem"},{"CreatedByName":"Kowgan","CreatedById":116874,"CreatedDateTime":"2016-03-03T13:30:30Z","Content":"Overconsumption is still happening here on old vessels, even while not warping.\n\nI\u0027m trying to find the correct numbers, but I noticed that kerbals were eating twice as much in one of the vessels. At another vessel with 4 kerbals, 10 days of supplies were consumed in 1h40m. In that same vessel, the MPL\u0027s Life Support module stopped working. It works normally on new vessels.  \n\nResetting LifeSupportScenario didn\u0027t solve the issues.\n\nAlso, HomeWorldAltitude doesn\u0027t prevent kerbals from eating supplies in a vessel at the launchpad.\n\n**Edited \u003Ctime datetime=\u00222016-03-03T14:09:52Z\u0022 title=\u002203/03/2016 02:09  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 3, 2016\u003C/time\u003E by Kowgan**"},{"CreatedByName":"merlinux","CreatedById":83117,"CreatedDateTime":"2016-03-03T13:33:00Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Kowgan said:\n\u003E \n\u003E \n\u003E Did you increase the hab value for pods, from 30 days per seat to 150d?\n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E ![d19ea36225.png](http://puu.sh/nte35/d19ea36225.png)\n\u003E \n\u003E \n\u003E \n\u003E Also, all those kerbals\u0027 home being 105 years looks weird, almost like not right. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E ![9429912102.png](http://puu.sh/nte8y/9429912102.png)\n\u003E \n\nHow well so my sandbox game is just showing normal numbers then ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) I thought the home was way way to high and maybe it would be different if I played career."},{"CreatedByName":"Kowgan","CreatedById":116874,"CreatedDateTime":"2016-03-03T13:34:56Z","Content":"[@merlinux](https://forum.kerbalspaceprogram.com/index.php?/profile/83117-merlinux/) Turns out it\u0027s a desync glitch between versions. Removing the LifeSupportScenario section from my save file solved it. Remember to backup, always."},{"CreatedByName":"merlinux","CreatedById":83117,"CreatedDateTime":"2016-03-03T13:42:12Z","Content":"[@Kowgan](https://forum.kerbalspaceprogram.com/index.php?/profile/116874-kowgan/) Okie I\u0027ll have a look. Been a while since I last looked at a persistent file. how fun!\n\n**Edited \u003Ctime datetime=\u00222016-03-03T13:42:43Z\u0022 title=\u002203/03/2016 01:42  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 3, 2016\u003C/time\u003E by merlinux**"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2016-03-03T14:13:40Z","Content":"Let me tinker with it."}]}