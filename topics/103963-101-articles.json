{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":101,"Articles":[{"CreatedByName":"Binho","CreatedById":142470,"CreatedDateTime":"2015-12-05T17:56:41Z","Content":"\u003E \n\u003E \n\u003E 36 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Hmm, is this running dx9 or OpenGL? Can you try forcing a different mode?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Is this new to the latest version?\n\u003E \n\nDX9. I forced DX11 and that solved the atmosphere issue, but created those black artifacts in the ocean (Bumping the ocean quality to 100 fixed them).\n\nI tested in Dx9 some more, and that issue was only occurring for Kerbin, not for Laythe or Duna.\n\nAlso noted a compatibility issue with Distant Objects. The Sun flare is visible through the planet, though I\u0027m not sure if that issue is being caused by EVE or scatterer. Will look in to that some more.\n\nEDIT: And this is new to the latest version. Last version I was running of scatterer was v0.0191 and that worked fine on DX9 (Bar some weird flickering issues that don\u0027t seem to be in the new version)\n\n**Edited \u003Ctime datetime=\u00222015-12-05T17:59:55Z\u0022 title=\u002212/05/2015 05:59  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 5, 2015\u003C/time\u003E by Binho**"},{"CreatedByName":"Binho","CreatedById":142470,"CreatedDateTime":"2015-12-05T18:25:35Z","Content":"Also, another fun bug for you ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Returning to the space center from the in-flight map mode causes the oceans to disappear at the space center. Entering and exiting the VAB/SPH or the science/admin/mission/astronaut complexes doesn\u0027t fix the issue, but entering and exiting the tracking station does. Launching a craft also brings the oceans back."},{"CreatedByName":"Senshi","CreatedById":57692,"CreatedDateTime":"2015-12-05T18:36:49Z","Content":"Got the same issue as Binho on D3D9, as well as the \u0022sun shines through the planet\u0022 thing. From larger distance (Mun orbit), it looks like this:\n\n[http://i.imgur.com/rUksySs.jpg](http://i.imgur.com/rUksySs.jpg)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T18:38:46Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Senshi said:\n\u003E \n\u003E \n\u003E Got the same issue as Binho on D3D9, as well as the \u0022sun shines through the planet\u0022 thing. From larger distance (Mun orbit), it looks like this:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://i.imgur.com/rUksySs.jpg](http://i.imgur.com/rUksySs.jpg)\n\u003E \n\nIs this with the newest version I uploaded today? If so, revert to the previous one for now and I\u0027ll take a look at it.\n\n**Edited \u003Ctime datetime=\u00222015-12-05T18:39:00Z\u0022 title=\u002212/05/2015 06:39  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 5, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-05T20:07:10Z","Content":"Ah! Figured the ocean out! I\u0027ll send you the info. Basically, I replace the ocean PQS with a \u0022fake\u0022 clone that has isFakeBuild permanently set to false. This also leaves all the ocean FX in place as well."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T20:19:34Z","Content":"\u003E \n\u003E \n\u003E 12 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E Ah! Figured the ocean out! I\u0027ll send you the info. Basically, I replace the ocean PQS with a \u0022fake\u0022 clone that has isFakeBuild permanently set to false. This also leaves all the ocean FX in place as well.\n\u003E \n\nGreat news, i\u0027ll check it out right away, this should bump the performance up."},{"CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2015-12-05T20:39:24Z","Content":"\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/YjXt7/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\nHi, I\u0027m also having the bug that Senshi is having. Here\u0027s some more screenshots, I thought it looked interesting.\n\nUsing Scatterer-v0.0215.zip. \n\n**Edited \u003Ctime datetime=\u00222015-12-05T20:44:40Z\u0022 title=\u002212/05/2015 08:44  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 5, 2015\u003C/time\u003E by vwr0527**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T20:50:09Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, vwr0527 said:\n\u003E \n\u003E \n\u003E Hi, I\u0027m also having the bug that Senshi is having. Here\u0027s some more screenshots, I thought it looked interesting.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Using Scatterer-v0.0215.zip.\n\u003E \n\nI\u0027m on it. Are you also running direct3D9?"},{"CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2015-12-05T20:52:36Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I\u0027m on it. Are you also running direct3D9?\n\u003E \n\nit\u0027s directx 11.0, looking at the Nvidia control panel -\u003E system information. Is there a different place to check?\n\n**Edited \u003Ctime datetime=\u00222015-12-05T20:52:58Z\u0022 title=\u002212/05/2015 08:52  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 5, 2015\u003C/time\u003E by vwr0527**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T20:57:14Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, vwr0527 said:\n\u003E \n\u003E \n\u003E it\u0027s directx 11.0, looking at the Nvidia control panel -\u003E system information. Is there a different place to check?\n\u003E \n\nIf you\u0027re not adding any command line options (-force-d3d11 or  -force-opengl) to KSP it means you\u0027re running directx 9. Alternatively check the debug log, Ctrl\u002BF \u0022[scatterer] detected\u0022 and you should find which renderer you\u0027re using."},{"CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2015-12-05T21:00:33Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E If you\u0027re not adding any command line options (-force-d3d11 or  -force-opengl) to KSP it means you\u0027re running directx 9. Alternatively check the debug log, Ctrl\u002BF \u0022[scatterer] detected\u0022 and you should find which renderer you\u0027re using.\n\u003E \n\nAh, here:\n\n[LOG 14:59:16.942] [Scatterer] Detected Direct3D 9.0c [nvd3dum.dll 10.18.13.5906]"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T21:26:31Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, vwr0527 said:\n\u003E \n\u003E \n\u003E Ah, here:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [LOG 14:59:16.942] [Scatterer] Detected Direct3D 9.0c [nvd3dum.dll 10.18.13.5906]\n\u003E \n\nAlright, these files should fix it. Funny enough, this was one of the first bugs I ran into back in April.\n\n[https://mega.nz/#!3cJ2jJjQ!rurSNC9jildjOmDOcOv5RGpwly6IJniMrIguJoDeF6Q](https://mega.nz/#!3cJ2jJjQ!rurSNC9jildjOmDOcOv5RGpwly6IJniMrIguJoDeF6Q)\n\nIt may also fix the \u0022sunglare visible from behind atmo\u0022 bug. I\u0027ll roll out a proper update once I finish a few things."},{"CreatedByName":"Senshi","CreatedById":57692,"CreatedDateTime":"2015-12-05T22:10:17Z","Content":"Fixed the atmosphere weirdo, but sun glare-through is still present.\n\n[http://i.imgur.com/f0fpRUA.jpg](http://i.imgur.com/f0fpRUA.jpg)\n\nThose black blocks on the left of the atmosphere are caused by JPEG compression, not by the mod, just saying.\n\nAlso, the cloudlayer is cutoff on the right there. It\u0027s \u0022static on planet\u0022.\n\n[http://i.imgur.com/vwX1zar.jpg](http://i.imgur.com/vwX1zar.jpg)\n\nIt\u0027s easy enough to fix, though: Switched to map view and back once after above screenshot was taken, and the cloudlayer was \u0022fully there\u0022 again. Weird.\n\nRegardless of any issues, I\u0027ll use the chance to present my thanks. Your contribution to the graphical enhancement of KSP is absolutely fundamental, much like EVE always has been. I\u0027m absolutely amazed how you make the game so magnificent, especially as it is with very reasonable performance impact for current-gen computers. Time for a donation, Christmas is coming, after all ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) ."},{"CreatedByName":"Aegrim","CreatedById":2155,"CreatedDateTime":"2015-12-05T22:57:52Z","Content":"\u003E \n\u003E \n\u003E On 04/12/2015, 20:53:59, blackrack said:\n\u003E \n\u003E \n\u003E Atmosphere height is now tweakable directly ingame, this means you don\u0027t have to fiddle with the config tool anymore to make your atmosphere higher, this is mostly good news for mod and config makers.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also, this allows tweaking the atmo directly to have a blue sky higher up in Kerbin, and to avoid mountains poking through the atmosphere.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E x1 , current config:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![s1Mm5Be.jpg](http://i.imgur.com/s1Mm5Be.jpg)](http://i.imgur.com/s1Mm5Be.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E x2:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![G4ilw1C.jpg](http://i.imgur.com/G4ilw1C.jpg)](http://i.imgur.com/G4ilw1C.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E x3:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![psbmAWG.jpg](http://i.imgur.com/psbmAWG.jpg)](http://i.imgur.com/psbmAWG.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also, added a workaround for the \u0022line over the horizon\u0022 which appears when you make the atmosphere too high relative to the planet.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Before:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![jgeOPu6.jpg](http://i.imgur.com/jgeOPu6.jpg)](http://i.imgur.com/jgeOPu6.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E After:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![jygdUwn.jpg](http://i.imgur.com/jygdUwn.jpg)](http://i.imgur.com/jygdUwn.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E There\u0027s not a fix yet for this problem so all you can do is wait.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Install environmental visual enhancements for the clouds, older versions of the plugin or the game may not be compatible.\n\u003E \n\nWhy do I not have these \u0022experimentalAtmoScale\u0022 and \u0022experimentalViewDirOffset\u0022 options?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T22:59:16Z","Content":"\u003E \n\u003E \n\u003E 46 minutes ago, Senshi said:\n\u003E \n\u003E \n\u003E Fixed the atmosphere weirdo, but sun glare-through is still present.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://i.imgur.com/f0fpRUA.jpg](http://i.imgur.com/f0fpRUA.jpg)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Those black blocks on the left of the atmosphere are caused by JPEG compression, not by the mod, just saying.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also, the cloudlayer is cutoff on the right there. It\u0027s \u0022static on planet\u0022.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://i.imgur.com/vwX1zar.jpg](http://i.imgur.com/vwX1zar.jpg)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It\u0027s easy enough to fix, though: Switched to map view and back once after above screenshot was taken, and the cloudlayer was \u0022fully there\u0022 again. Weird.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Regardless of any issues, I\u0027ll use the chance to present my thanks. Your contribution to the graphical enhancement of KSP is absolutely fundamental, much like EVE always has been. I\u0027m absolutely amazed how you make the game so magnificent, especially as it is with very reasonable performance impact for current-gen computers. Time for a donation, Christmas is coming, after all ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) .\n\u003E \n\nIt\u0027s probably caused by the new method I\u0027m doing to rescale the atmo.\n\nFor the cutoff cloudlayers I think it may be the ignoreProjector tags missing, for some reason unity always puts them back in caps after compile when they\u0027re not supposed to. I go into those new files and replace every \u0022IGNOREPROJECTOR\u0022=\u0022true\u0022 with \u0022IgnoreProjector\u0022=\u0022True\u0022, that should do it.\n\nThanks a lot, I appreciate it."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-12-05T23:18:34Z","Content":"Hey Blackrack, I just had to do it ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nI can\u0027t believe how great everything looks. Really great job with the update!\n\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/UO_WFQF5pFg?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222015-12-05T23:33:53Z\u0022 title=\u002212/05/2015 11:33  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 5, 2015\u003C/time\u003E by V8jester**"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-12-05T23:41:09Z","Content":"Looking great! (Although, whenever I try to fiddle with the ocean settings I end up with artifact soup. But the provided version looks great enough, so I can live with that.)\n\nAlso, perhaps you should put somewhere in the first post that you get the UI with Alt-10/Alt-11. It took me a while to dig that up out of the changelog."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-05T23:53:40Z","Content":"\u003E \n\u003E \n\u003E 33 minutes ago, V8jester said:\n\u003E \n\u003E \n\u003E Hey Blackrack, I just had to do it ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E I can\u0027t believe how great everything looks. Really great job with the update!\n\u003E \n\nAwesome, great choice of music too.\n\n\u003E \n\u003E \n\u003E 10 minutes ago, skykooler said:\n\u003E \n\u003E \n\u003E Looking great! (Although, whenever I try to fiddle with the ocean settings I end up with artifact soup. But the provided version looks great enough, so I can live with that.)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also, perhaps you should put somewhere in the first post that you get the UI with Alt-10/Alt-11. It took me a while to dig that up out of the changelog.\n\u003E \n\nIt was already in the OP but at the very bottom. I moved it up.\n\nIf you don\u0027t want to end up with artifact soup only change omega, windspeed, and AMP. Keep the values reasonable and you can get some really good results."},{"CreatedByName":"Yukon0009","CreatedById":109376,"CreatedDateTime":"2015-12-06T00:54:08Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, V8jester said:\n\u003E \n\u003E \n\u003E Yukon, I have some game setup tips on my thread linked in my signature. Not sure if it will help you much if you are as low as 5fps. But give it a shot.\n\u003E \n\nWhich link?"},{"CreatedByName":"Murdox","CreatedById":148129,"CreatedDateTime":"2015-12-06T01:05:43Z","Content":"[@Yukon0009](https://forum.kerbalspaceprogram.com/index.php?/profile/109376-yukon0009/) [V8jester\u0027s Thread](https://forum.kerbalspaceprogram.com/index.php?/topic/103147-advanced-aircraft-screenshots-and-building-techniques/). There is spoiler section called \u0022 How to hit 60-100 FPS\u0022. Sorry V8 for being faster than you this time and also huge thanks to you increasing also my gaming performance! I didn\u0027t knew that W10 trying to force ksp using dx12 and that fixed some of my stutters and other weird lags. Many thanks! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nbtw i also made prototype carrier plane with runway only for Blackrack. Smaller planes can takeoff and also land to it. Had difficulties to add any screens or vids before today, but im not giving up. Later guys.\n\n**Edited \u003Ctime datetime=\u00222015-12-06T01:19:06Z\u0022 title=\u002212/06/2015 01:19  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 6, 2015\u003C/time\u003E by Murdox**"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-12-06T01:20:59Z","Content":"I\u0027d not been playing KSP for a while, just picking it up again and currently running with just EVE and Scatterer installed.    \n\nJust want to say good job [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), scatterer has been greatly improved since I last used it (3-4 few months ago)!!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-06T01:27:11Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, katateochi said:\n\u003E \n\u003E \n\u003E I\u0027d not been playing KSP for a while, just picking it up again and currently running with just EVE and Scatterer installed.    \n\u003E \n\u003E Just want to say good job [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), scatterer has been greatly improved since I last used it (3-4 few months ago)!!\n\u003E \n\nThanks, it was very basic at the time and I had very limited free time for it."},{"CreatedByName":"Alkahest","CreatedById":144015,"CreatedDateTime":"2015-12-06T01:58:26Z","Content":"I can\u0027t tell if this is Scatterer or not, but is anyone else getting this issue?\n\n[![Scatterer_zpsjafx2gie.png](http://i4.photobucket.com/albums/y148/Chimychanga/Scatterer_zpsjafx2gie.png)](http://i4.photobucket.com/albums/y148/Chimychanga/Scatterer_zpsjafx2gie.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-06T02:02:38Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, Aegrim said:\n\u003E \n\u003E \n\u003E Why do I not have these \u0022experimentalAtmoScale\u0022 and \u0022experimentalViewDirOffset\u0022 options?\n\u003E \n\nDid you download the newest version I uploaded today?\n\n\u003E \n\u003E \n\u003E 2 minutes ago, Alkahest said:\n\u003E \n\u003E \n\u003E I can\u0027t tell if this is Scatterer or not, but is anyone else getting this issue?\n\u003E \n\nFix is in the last page, I\u0027ll put it in the OP. I haven\u0027t rolled out a proper fixed version yet because I want to finish something first."},{"CreatedByName":"rotisserie919","CreatedById":133895,"CreatedDateTime":"2015-12-06T04:17:54Z","Content":"Having wierd glitch to my graphic on clean install w/Scatterer. If I\u0027m in cockpit mode and i bank 90 degrees in either direction, it spams the terrain with the super nice water texture. I\u0027d post a screenshot but the new forum doesnt seem to let me upload one. :^P\n\nRunning on linux via Steam if that helps. 1920x1080, maxed settings and plenty of RAM."}]}