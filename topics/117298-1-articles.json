{"TopicId":117298,"ForumId":44,"TopicTitle":"KSP and Scale Heights?","CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T02:55:32Z","PageNum":1,"Articles":[{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T02:55:32Z","Content":"\n\u003Cp\u003EOkay, I have a question regarding KSP, scale heights, and the KSP wiki pages.\u003C/p\u003E\u003Cp\u003EI came into this problem because I\u0027ve been adding to the Outer Planets Mod\u0027s wikia page, and it uses an Infobox/Body template that calculates atmosphere height by scale height.\u003C/p\u003E\u003Cp\u003ESo here\u0027s my issue - the OPM wikia\u0027s template takes the scale height and does this equation: ln(1e-6) * -scale height.\u003C/p\u003E\u003Cp\u003EWhich is from the KSP wiki\u0027s \u0022Atmosphere\u0022 page, here: \u003Cimg src=\u0022http://wiki.kerbalspaceprogram.com/images/math/4/7/9/4791c594e9e599b0b813125e8a001569.png\u0022 alt=\u00224791c594e9e599b0b813125e8a001569.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ETo be honest, I\u0027ve never seen this form of scale height/atmosphere height equation anywhere else...\u003C/p\u003E\u003Cp\u003EOkay, so if I make Sarnus\u0027 scale height 22km, the OPM wikia puts the atmosphere height at 303.941km, which is \u003Cem\u003Eclose\u003C/em\u003E to the in-game data, which puts the actual atmospheric height at 304km.\u003C/p\u003E\u003Cp\u003EOkay, so there\u0027s problem one. I can\u0027t get a scale height that gives an atmospheric height of 304km even. Problem two:\u003C/p\u003E\u003Cp\u003EI took that equation and tried to apply it / check it with the KSP wikia\u0027s data for the planets, and my numbers are way off. For example - Kerbin\u0027s scale height is listed at 5.6km, and the atmosphere height, we all know is 70km. But that equation gives an atmospheric height of ~77km, which is wrong. With Jool, it\u0027s even worse. Scale height is listed as 31km, atmospheric height we know (from the game itself) is 200km. The equation says ~428km.\u003C/p\u003E\u003Cp\u003ESo now, I don\u0027t even know how to come up with a reliable way to calculate scale height.\u003C/p\u003E\u003Cp\u003EIf you use the real world equation, which is (1.38e-23 * Average Temperature in Kelvin) / (Average mass of molecule in kg * surface gravity), you get numbers that are wayyyy off the listed numbers on the wikia pages. Part of that is because I don\u0027t know how to take the wiki\u0027s data of Kerbin having a molar mass of 28.9644 g/mol into straight kg. I tried using the \u0022Avogadro Constant\u0022 to break it down to kilograms for use in the equation, but even then, I ended up with a scale height of 8.07km, which is closer to Earth\u0027s scale height than Kerbin\u0027s.\u003C/p\u003E\u003Cp\u003ESo what crazy voodoo am I missing here? Is there some KSP specific unit or formula I\u0027m missing? Is there a different way to calculate scale height, such as with density, temperature and atmospheric height? Am I totally botching up the math involved? Are the wiki pages TOTALLY outdated or wrong? Or is this a case of, simply, real-world principals that cannot be transferred to KSP? Which I find hard to imagine.\u003C/p\u003E\n"},{"CreatedByName":"Hcube","CreatedById":137241,"CreatedDateTime":"2015-07-31T07:46:03Z","Content":"\n\u003Cp\u003Ei haven\u0027t tried it (didn\u0027t bring my calculator on vacation) but something you wrote bugged me : the equation you copy-pasted uses the neperian logarithm (ln) along with decimal powers (10^x) and you wrote it yourself using the neperian logarithm and the exponential (e^x) function. Maybe you messed up here ? just an idea\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-07-31T09:11:06Z","Content":"\n\u003Cp\u003EGiven altitude h, and surface pressure P\u003Csub\u003E0\u003C/sub\u003E, pressure P(h) at altitude is given by the following.\u003C/p\u003E\u003Cp\u003EP(h) = P\u003Csub\u003E0\u003C/sub\u003E exp(-h/H)\u003C/p\u003E\u003Cp\u003EThat\u0027s from definition of scale height. Now, KSP cuts off atmosphere where P(h) = P\u003Csub\u003E0\u003C/sub\u003E / 1,000,000. It\u0027s just a thing KSP does. Once pressure is lower than 10\u003Csup\u003E-6\u003C/sup\u003E of surface pressure, it\u0027s considered negligible, and KSP computes things as if it\u0027s total vacuum. In other words, altitude cuts off when:\u003C/p\u003E\u003Cp\u003EP\u003Csub\u003E0\u003C/sub\u003E exp(-h/H) = 10\u003Csup\u003E-6\u003C/sup\u003E P\u003Csub\u003E0\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003ESolving it for h trivially yields h = -ln(10\u003Csup\u003E-6\u003C/sup\u003E) H = ln(10\u003Csup\u003E6\u003C/sup\u003E) H = 6 ln(10) H.\u003C/p\u003E\u003Cp\u003EFor example, pre 1.1, KSP scale height was 5,000m. 6 ln(10) = 13.82. That puts h at 69km. Which is where atmosphere used to end.\u003C/p\u003E\u003Cp\u003EAfter the aerodynamics update, these things changed a bit, but it\u0027s still pretty close.\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-07-31T12:29:54Z","Content":"\n\u003Cp\u003E1.0 change the atmospheres. In particular they no longer need to have a single scale height, it can vary with altitude.\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T13:34:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EFor example, pre 1.1, KSP scale height was 5,000m. 6 ln(10) = 13.82. That puts h at 69km. Which is where atmosphere used to end.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, but that equation does not work for other bodies -\u003C/p\u003E\u003Cp\u003EEve - Atmospheric height is 90km. Wiki lists the Scale Height at 7.3km. The equation\u0027s results are: 100.853km.\u003C/p\u003E\u003Cp\u003EDun - Atmospheric height is 50km. Wiki lists the Scale Height at 6km. The equation\u0027s results are: 82.893km\u003C/p\u003E\u003Cp\u003ELaythe - Atmospheric height is 50km . Wiki lists the Scale Height at 8km. The equation\u0027s results are: 110.524km\u003C/p\u003E\u003Cp\u003EJool - Atmospheric height is 200km. Wiki lists the Scale Height at 31km. The equation\u0027s results are: 428.280km\u003C/p\u003E\u003Cp\u003ESo even though Kerbin comes out correct with that equations, none of the other bodies do. Am I missing something?\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E6 * ln ( 10 ) = 13.82\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E13.82 * Scale Height = Atmospheric Height\u003C/em\u003E\u003C/p\u003E\u003Cp\u003ESo am I wrong? Or is the Wiki wrong? And where the heck did they get those numbers on the Wiki page?\u003C/p\u003E\n"},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-07-31T13:49:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022-ctn-\u0022 data-cite=\u0022-ctn-\u0022\u003E\u003Cdiv\u003EOkay, I have a question regarding KSP, scale heights, and the KSP wiki pages.\u003Cp\u003EI came into this problem because I\u0027ve been adding to the Outer Planets Mod\u0027s wikia page, and it uses an Infobox/Body template that calculates atmosphere height by scale height.\u003C/p\u003E\u003Cp\u003ESo here\u0027s my issue - the OPM wikia\u0027s template takes the scale height and does this equation: ln(1e-6) * -scale height.\u003C/p\u003E\u003Cp\u003EWhich is from the KSP wiki\u0027s \u0022Atmosphere\u0022 page, here: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/images/math/4/7/9/4791c594e9e599b0b813125e8a001569.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/images/math/4/7/9/4791c594e9e599b0b813125e8a001569.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ETo be honest, I\u0027ve never seen this form of scale height/atmosphere height equation anywhere else...\u003C/p\u003E\u003Cp\u003EOkay, so if I make Sarnus\u0027 scale height 22km, the OPM wikia puts the atmosphere height at 303.941km, which is \u003Cem\u003Eclose\u003C/em\u003E to the in-game data, which puts the actual atmospheric height at 304km.\u003C/p\u003E\u003Cp\u003EOkay, so there\u0027s problem one. I can\u0027t get a scale height that gives an atmospheric height of 304km even. Problem two:\u003C/p\u003E\u003Cp\u003EI took that equation and tried to apply it / check it with the KSP wikia\u0027s data for the planets, and my numbers are way off. For example - Kerbin\u0027s scale height is listed at 5.6km, and the atmosphere height, we all know is 70km. But that equation gives an atmospheric height of ~77km, which is wrong. With Jool, it\u0027s even worse. Scale height is listed as 31km, atmospheric height we know (from the game itself) is 200km. The equation says ~428km.\u003C/p\u003E\u003Cp\u003ESo now, I don\u0027t even know how to come up with a reliable way to calculate scale height.\u003C/p\u003E\u003Cp\u003EIf you use the real world equation, which is (1.38e-23 * Average Temperature in Kelvin) / (Average mass of molecule in kg * surface gravity), you get numbers that are wayyyy off the listed numbers on the wikia pages. Part of that is because I don\u0027t know how to take the wiki\u0027s data of Kerbin having a molar mass of 28.9644 g/mol into straight kg. I tried using the \u0022Avogadro Constant\u0022 to break it down to kilograms for use in the equation, but even then, I ended up with a scale height of 8.07km, which is closer to Earth\u0027s scale height than Kerbin\u0027s.\u003C/p\u003E\u003Cp\u003ESo what crazy voodoo am I missing here? Is there some KSP specific unit or formula I\u0027m missing? Is there a different way to calculate scale height, such as with density, temperature and atmospheric height? Am I totally botching up the math involved? Are the wiki pages TOTALLY outdated or wrong? Or is this a case of, simply, real-world principals that cannot be transferred to KSP? Which I find hard to imagine.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI thought Kerbin\u0027s scale height is 5k alt. I have been using the equation that Kerbins atmosphere recedes at 8 fold reduction per 10,000 meters. \u003C/p\u003E\u003Cp\u003EIn the real world scale height type calculation are only valid in a range. PV = nRT and this is a function of the molecular weight of the gas and its density. The heavier gases tend to settle in the lower atmosphere and the lighter gases (hydrogen and helium) are found in LEO. Also temperature falls to about -100 and then begins to rise. Finally, there is a density of gas inside the earths magnetosphere, and most recent articles (I posted here about 1 month ago) show that the gas and associated temperatures exist in tendrils that spiral around earth. Finally you exit the magnetosphere and you encounter the solar wind. In KSPs model gravity is contained in spherical SOI in which the graviational isoquants are also spherical, and pressure terminates at a fixed altitude. The earth is also spinning and there is a perturbative interaction of Coriolis effect, Earth-moon interactions, etc. To get an idea of what these are like compare real aircraft data for GPS altitude and altimeter data from aircraft. Commericial aircraft set the MSL pressure to a fixed value at 18k feet and ride waves of pressure under an assumption of atmospheric pressure-elevation above. This can often vary in any location by 1000s of meters depending on pressure, and these perturbations increase in flux at higher altitudes. You really don\u0027t want KSP doing real world pressure, given it takes massively paralleled supercomputers to model real world atmospheric conditions, the only way the could model real world variation would be to create a model Kerbin with a supercomputer devoted to generating pressure and use something like flight simulators real-world downloads to update everyones machine, and of course it would have to be done everytime you entered and exited warp, queriing their server with a new time-stamp. \u003C/p\u003E\u003Cp\u003ESo, no, we are not in the real world; back to the original problem, how to verify the formula. . . . .is it really that important to get the calculation down to a relative variation of 0.001%?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-31T13:53:59Z\u0022 title=\u002207/31/2015 01:53  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 31, 2015\u003C/time\u003E by PB666\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T14:12:07Z","Content":"\n\u003Cp\u003EAt this point, I would like a formula that gives consistently correct answers with all the atmospheric bodies in the game.\u003C/p\u003E\u003Cp\u003EAs I stated, the formula works fine for Kerbin, but then is massively off - anywhere from 10-50% depending on the planet/moon.\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-07-31T14:52:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022-ctn-\u0022 data-cite=\u0022-ctn-\u0022\u003E\u003Cdiv\u003EOkay, but that equation does not work for other bodies -\u003Cp\u003EEve - Atmospheric height is 90km. Wiki lists the Scale Height at 7.3km. The equation\u0027s results are: 100.853km.\u003C/p\u003E\u003Cp\u003EDun - Atmospheric height is 50km. Wiki lists the Scale Height at 6km. The equation\u0027s results are: 82.893km\u003C/p\u003E\u003Cp\u003ELaythe - Atmospheric height is 50km . Wiki lists the Scale Height at 8km. The equation\u0027s results are: 110.524km\u003C/p\u003E\u003Cp\u003EJool - Atmospheric height is 200km. Wiki lists the Scale Height at 31km. The equation\u0027s results are: 428.280km\u003C/p\u003E\u003Cp\u003ESo even though Kerbin comes out correct with that equations, none of the other bodies do. Am I missing something?\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E6 * ln ( 10 ) = 13.82\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E13.82 * Scale Height = Atmospheric Height\u003C/em\u003E\u003C/p\u003E\u003Cp\u003ESo am I wrong? Or is the Wiki wrong? And where the heck did they get those numbers on the Wiki page?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003EThese results tally with what some people have been talking about - that bodies other than Kerbin have their atmospheres \u0022chopped off\u0022 too low, making aerobraking needlessly hard. It may be that the edge of the atmosphere is now coded in the game as a definite value, regardless of surface pressure.\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T14:55:17Z","Content":"\n\u003Cp\u003EOkay, that\u0027s starting to make sense to me now. It\u0027s a shame that it throws off any scale height calculations, and thus any calculations that require the use of scale height.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-07-31T19:07:10Z","Content":"\n\u003Cp\u003EA LOT of this is outdated as of aerodynamics update. KSP\u0027s game code has had an ability to handle planets with pressure-altitude relation defined by control curves for a while now. I wouldn\u0027t be surprised if that\u0027s being used now.\u003C/p\u003E\u003Cp\u003EHas anyone done actual pressure measurements at a bunch of altitudes to test this recently?\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T20:55:03Z","Content":"\n\u003Cp\u003EI suppose I will be. The only concrete pressure data I have gotten myself is for Sarnus from the Outer Planets Mod. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://outer-planets.wikia.com/wiki/Sarnus\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://outer-planets.wikia.com/wiki/Sarnus\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-07-31T21:28:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003EHas anyone done actual pressure measurements at a bunch of altitudes to test this recently?\u003C/div\u003E\u003C/blockquote\u003EI\u0027ve done it for a couple of mod planets. Wonder if there\u0027s a data logging mod?\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-07-31T21:56:04Z","Content":"\n\u003Cp\u003EThat would be neat. When you activate a science experiment, it saves the data and output it as a txt file.\u003C/p\u003E\u003Cp\u003EI\u0027ve always just used screenshots.\u003C/p\u003E\n"},{"CreatedByName":"Olympic1","CreatedById":79730,"CreatedDateTime":"2015-08-10T04:41:32Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@Everybody\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI have found the correct values for scale height! I\u0027ll add those to the wiki.\u003C/p\u003E\u003Cp\u003EKerbol: 43429.45m (result: 600000.03m)\u003C/p\u003E\u003Cp\u003EEve: 6514.42m (result: 90000.01m)\u003C/p\u003E\u003Cp\u003EKerbin: 5066.77m (result: 70000.01m)\u003C/p\u003E\u003Cp\u003EDuna: 3619.12m (result: 49999.99m)\u003C/p\u003E\u003Cp\u003EJool: 14476.48m (result: 199999.96m)\u003C/p\u003E\u003Cp\u003ELaythe: 3619.12m (result: 49999.99m)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E@-ctn-\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EHere are the values for the OPM planets, I added them already to my wiki\u003C/p\u003E\u003Cp\u003ESarnus: 22004.25m (result: 303999.95m)\u003C/p\u003E\u003Cp\u003ETekto: 7274.43m (result: 100499.96m)\u003C/p\u003E\u003Cp\u003ENeidon: 8034.45m (result: 111000.03m)\u003C/p\u003E\u003Cp\u003EUrlum: 9047.80m (result: 124999.98m)\u003C/p\u003E\n"}]}