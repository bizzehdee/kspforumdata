{"TopicId":170596,"ForumId":32,"TopicTitle":"Ksp need to fix the performance","CreatedByName":"Luc1fer\uFEFF","CreatedById":182201,"CreatedDateTime":"2018-02-07T17:55:56Z","PageNum":1,"Articles":[{"CreatedByName":"Luc1fer\uFEFF","CreatedById":182201,"CreatedDateTime":"2018-02-07T17:55:56Z","Content":"\n\u003Cp\u003E\nSeriously,how a game with this low end grapighs can lag a PC that runs \u00A0battlefield 1 on medium grapighs?\n\u003C/p\u003E\n"},{"CreatedByName":"klgraham1013","CreatedById":105132,"CreatedDateTime":"2018-02-07T18:10:16Z","Content":"\n\u003Cp\u003E\nKSP is CPU dependent.\u00A0 The graphics aren\u0027t what\u0027s causing the lag.\n\u003C/p\u003E\n"},{"CreatedByName":"septemberWaves","CreatedById":160814,"CreatedDateTime":"2018-02-07T18:19:13Z","Content":"\n\u003Cp\u003E\nThe performance is actually very good considering the simulations\u00A0being done, and being rude about it will do nothing to further improve it.\n\u003C/p\u003E\n"},{"CreatedByName":"Luc1fer\uFEFF","CreatedById":182201,"CreatedDateTime":"2018-02-07T18:32:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223288718\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518027553\u0022 data-ipsquote-userid=\u0022160814\u0022 data-ipsquote-username=\u0022septemberWaves\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, septemberWaves said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe performance is actually very good considering the simulations\u00A0being done, and being rude about it will do nothing to further improve it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think i wasnt rude,but sorry if i offended you\n\u003C/p\u003E\n"},{"CreatedByName":"The Aziz","CreatedById":150811,"CreatedDateTime":"2018-02-08T10:13:21Z","Content":"\n\u003Cp\u003E\nI\u0027d say it wasn\u0027t rude. It was more like making assumptions without learning about the topic first\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2018-02-08T12:28:53Z","Content":"\n\u003Cp\u003E\nWel-l-l... KSP\u0027s performance is frankly pretty bad. Yes there\u0027s a lot of simulation being done, but it really ought to be possible to do them faster. I don\u0027t know if it\u0027s limited by Unity, by architecture, or by bottlenecks, but I\u0027m pretty certain it\u0027s not limited by hardware as such.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2018-02-08T12:49:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223288693\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518026156\u0022 data-ipsquote-userid=\u0022182201\u0022 data-ipsquote-username=\u0022Juanlu16\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Juanlu16 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSeriously,how a game with this low end grapighs can lag a PC that runs \u00A0battlefield 1 on medium grapighs?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBecause battlefield 1 doesn\u0027t\u00A0 have to calculate physics\u00A0 on dozens if not hundreds of parts, 20 times a second.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m curious, if you fire a bullet in the air in battlefield 1, does the game figure out where it is going to land?\u00A0 Does it calculate the air resistance?\u00A0 Does the bullet slow down?\u00A0 Does it get heated from it\u0027s passage through the air?\n\u003C/p\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2018-02-08T13:46:25Z","Content":"\n\u003Cp\u003E\nThe issue with KSP is lego-style construction with rigid body physics.\n\u003C/p\u003E\n\u003Cp\u003E\n500 separate objects flying through the air would be trivial to solve. 500 objects linked by rigid body physics requires a self consistent solution that satisfies all linkage constraints without violating basic physics.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m still unsure if it\u0027s O(n*ln(n)) or O(n^2), but the problem gets harder fast.\n\u003C/p\u003E\n\u003Cp\u003E\nUnity\u0027s rigid body physics solver is almost certainly not the fastest in the world, but it\u0027s being stretched far beyond what most games ask of it.\n\u003C/p\u003E\n"},{"CreatedByName":"KerikBalm","CreatedById":91917,"CreatedDateTime":"2018-02-08T16:12:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223288713\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518027016\u0022 data-ipsquote-userid=\u0022105132\u0022 data-ipsquote-username=\u0022klgraham1013\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, klgraham1013 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKSP is CPU dependent.\u00A0 The graphics aren\u0027t what\u0027s causing the lag.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289365\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518094183\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBecause battlefield 1 doesn\u0027t\u00A0 have to calculate physics\u00A0 on dozens if not hundreds of parts, 20 times a second.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m curious, if you fire a bullet in the air in battlefield 1, does the game figure out where it is going to land?\u00A0 Does it calculate the air resistance?\u00A0 Does the bullet slow down?\u00A0 Does it get heated from it\u0027s passage through the air?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027d be curious about this too. I think most shooters don\u0027t use hitscan anymore.\n\u003C/p\u003E\n\u003Cp\u003E\nI know Arma 3 has some pretty complex physics and ballistics calculations. However, Arma 3\u0027s graphics aren\u0027t phenomenal either, and people complain about low fram rates in that game too.\n\u003C/p\u003E\n\u003Cp\u003E\nIt calculates trajectories and accounts for air resistance, bullets do slow down with distance... but air resistance is fixed and not velocity dependent. Its an approximation because bullet velocity doesn\u0027t change soooo much in the timeframes/distances involved, but it does make bullet drop at extreme sniping ranges (\u0026gt;1 kilometer) for many weapons unrealistically high.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m sure BF1 doesn\u0027t go into as much depth as Arma3\n\u003C/p\u003E\n"},{"CreatedByName":"Leafbaron","CreatedById":167849,"CreatedDateTime":"2018-02-08T16:25:25Z","Content":"\n\u003Cp\u003E\nFrom what i know battlefield does some kind of bullet simulation rather than hitscan type stuff. Bullets have velocity, and do indeed drop. The game has funtions to even adjust scopes and iron sights for different distances to account for this drop.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nno idea how its calculated in the game though.\n\u003C/p\u003E\n"},{"CreatedByName":"invision","CreatedById":178900,"CreatedDateTime":"2018-02-08T20:58:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289365\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518094183\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBecause battlefield 1 doesn\u0027t\u00A0 have to calculate physics\u00A0 on dozens if not hundreds of parts, 20 times a second.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m curious, if you fire a bullet in the air in battlefield 1, does the game figure out where it is going to land?\u00A0 Does it calculate the air resistance?\u00A0 Does the bullet slow down?\u00A0 Does it get heated from it\u0027s passage through the air?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nactually BF1 is brutal on a CPU because of physics. the bullets, rockets, planes, all of that stuff has to be calculated. things can be destroyed,and the game has to track 60 players and a dozen vehicles, and there is bullet drop.\n\u003C/p\u003E\n\u003Cp\u003E\ni agree KSP runs like crap, theres no reason my game should run at 20 frames a second with a Ryzen 5 1600 which is overclocked to 3.9ghz and paired with a GTX 1080, but it does happen and it happens a lot especially if the mission is very long.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2018-02-08T21:34:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289771\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518123500\u0022 data-ipsquote-userid=\u0022178900\u0022 data-ipsquote-username=\u0022invision\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n33 minutes ago, invision said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ntheres no reason my game should run at 20 frames a second with a Ryzen 5 1600 which is overclocked to 3.9ghz and paired with a GTX 1080\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcept there is. As already discussed in this thread, the rigid body calculations required to update a vessel\u0027s position are huge, computationally expensive and inherently linear. Your GPU setup is completely irrelevant, it comes down to single core CPU performance. Improving performance won\u0027t come from a new engine, but a new branch of mathematics.\n\u003C/p\u003E\n"},{"CreatedByName":"invision","CreatedById":178900,"CreatedDateTime":"2018-02-08T21:44:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289806\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518125653\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nExcept there is. As already discussed in this thread, the rigid body calculations required to update a vessel\u0027s position are huge, computationally expensive and inherently linear. Your GPU setup is completely irrelevant, it comes down to single core CPU performance. Improving performance won\u0027t come from a new engine, but a new branch of mathematics.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nno there is not\n\u003C/p\u003E\n\u003Cp\u003E\nsimply hanging out on the surface of the moon shouldnt run the game at 20 fps\n\u003C/p\u003E\n\u003Cp\u003E\ngoing to space center and then reloading the same ship now the game runs at 100 fps\n\u003C/p\u003E\n\u003Cp\u003E\nthere is nothing to calculate except bad coding.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2018-02-08T21:50:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289814\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518126287\u0022 data-ipsquote-userid=\u0022178900\u0022 data-ipsquote-username=\u0022invision\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, invision said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ngoing to space center and then reloading the same ship now the game runs at 100 fps\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf the flight scene is leaking memory, that\u0027s a separate issue.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289814\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518126287\u0022 data-ipsquote-userid=\u0022178900\u0022 data-ipsquote-username=\u0022invision\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, invision said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthere is nothing to calculate except bad coding.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, there is.\n\u003C/p\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2018-02-09T00:34:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289771\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518123500\u0022 data-ipsquote-userid=\u0022178900\u0022 data-ipsquote-username=\u0022invision\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, invision said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nactually BF1 is brutal on a CPU because of physics. the bullets, rockets, planes, all of that stuff has to be calculated. things can be destroyed,and the game has to track 60 players and a dozen vehicles, and there is bullet drop.\n\u003C/p\u003E\n\u003Cp\u003E\ni agree KSP runs like crap, theres no reason my game should run at 20 frames a second with a Ryzen 5 1600 which is overclocked to 3.9ghz and paired with a GTX 1080, but it does happen and it happens a lot especially if the mission is very long.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAll of that is, frankly, a trivial O(N) problem with some glitzy graphics thrown on top. The CPU load, like most FPS games, is trivial: it\u0027s all the shiny effects that slow you down because of all the scene rendering the GPU has to do.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the server side:\n\u003C/p\u003E\n\u003Cp\u003E\nEach physics frame, a bullet can ask \u0022in any of the grid cubes I passed through, do any objects\u00A0have colliders? If so, did I hit them?\u0022. This is constant-time per bullet, since it only has to poll nearby objects, and O(N) in the number of bullets. Stuff like bullet drop is almost hilariously simplistic mathematics; unless you\u0027re trying for aircraft-simulator levels of aerodynamics, it\u0027s a few single-operation multiplies and adds, with nary a single exponential or division to handle.\n\u003C/p\u003E\n\u003Cp\u003E\nA player/vehicle object needs to respond to any player or environment inputs, but the number of those is small: maybe a few keystrokes from the player, plus mouse input, plus possibly a bullet or explosion.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the client side:\n\u003C/p\u003E\n\u003Cp\u003E\nThe client needs to update the status of nearby objects based on a message packet from the server, respond to player input and send it to the server,\u00A0and render sounds and graphics.\n\u003C/p\u003E\n\u003Cp\u003E\nThe client does not even need to be informed of the status of every object, just nearby ones. I can\u0027t think of anything that, by necessity, absolutely has to be done in more than O(N) time... and N is pretty small, maybe a couple hundred tops. If you double the number of objects, the workload per frame just doubles.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nKSP\u0027s rigid body physics is not an O(N) problem. I suspect it\u0027s an O(N^2) problem, where every single part must act on every other part for consistent rigid-body physics that don\u0027t break Newton\u0027s laws into a million little pieces. This means that if you double the number of parts, the workload per frame quadruples. This is why KSP can be so slow with large part counts: the amount of CPU effort needed is going up far faster than the number of parts on the vessel.\n\u003C/p\u003E\n"},{"CreatedByName":"MythicalHeFF","CreatedById":176690,"CreatedDateTime":"2018-02-09T00:35:20Z","Content":"\n\u003Cp\u003E\nI think the bad performance has to do with the way Unity works, where it collects garbage every few seconds and that results in a stutter. The more parts you have, the more garbage Unity has to collect and the worse the stutter gets. I do think it\u2019s outrageous that my KSP sometimes freezes for a good half second every 5 s or so with a vessel that has \u0026lt;50 parts.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0As for force calculations, there\u2019s really no excuse for the game to perform that badly considering the only forces that have to be accounted for on parts are thrust and torque.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2018-02-09T00:44:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289934\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518136520\u0022 data-ipsquote-userid=\u0022176690\u0022 data-ipsquote-username=\u0022Jack Joseph Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, Jack Joseph Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs for force calculations, there\u2019s really no excuse for the game to perform that badly considering the only forces that have to be accounted for on parts are thrust and torque.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPlease note that there is far more for KSP to handle than \u0022thrust and torque\u0022. The ships aren\u0027t treated as one big piece: it\u0027s often hundreds of parts, each with their own masses, aerodynamics, and temperature, connected together with rigid linkages. An engine fired on one end of the craft winds up transmitting force all the way through the rocket to the capsule at the top, and it winds up being a monstrous O(N^2) problem to solve all that self-consistently.\n\u003C/p\u003E\n\u003Cp\u003E\nNo comment on the garbage collection, though you might try looking into MemGraph. Admittedly, if you threw a ridiculous amount of programmer time at the problem, you could move KSP to a language with manual memory management...\n\u003C/p\u003E\n\u003Cp\u003E\nBut not before that manual memory management caused 57,328 bugs to catch.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-02-09T00:46:18Z\u0022 title=\u002202/09/2018 12:46  AM\u0022 data-short=\u00226 yr\u0022\u003EFebruary 9, 2018\u003C/time\u003E by Starman4308\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fearless Son","CreatedById":133397,"CreatedDateTime":"2018-02-09T01:18:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289503\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518106323\u0022 data-ipsquote-userid=\u002291917\u0022 data-ipsquote-username=\u0022KerikBalm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, KerikBalm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d be curious about this too. I think most shooters don\u0027t use hitscan anymore.\n\u003C/p\u003E\n\u003Cp\u003E\nI know Arma 3 has some pretty complex physics and ballistics calculations. However, Arma 3\u0027s graphics aren\u0027t phenomenal either, and people complain about low fram rates in that game too.\n\u003C/p\u003E\n\u003Cp\u003E\nIt calculates trajectories and accounts for air resistance, bullets do slow down with distance... but air resistance is fixed and not velocity dependent. Its an approximation because bullet velocity doesn\u0027t change soooo much in the timeframes/distances involved, but it does make bullet drop at extreme sniping ranges (\u0026gt;1 kilometer) for many weapons unrealistically high.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m sure BF1 doesn\u0027t go into as much depth as Arma3\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, this is where I get to put on my Professional\u003Cspan style=\u0022background-color:#ffffff;color:#545454;font-size:small;text-align:left;\u0022\u003E\u2122\u003C/span\u003E hat as someone who has done performance testing for a big-budget\u00A0first-person shooter. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYes, most first-person shooters these days do projectile calculations for bullets rather than the hitscan calculations common to shooters in the 90s and early oughts. \u00A0However, these calculations tend to take a lot of mathematical shortcuts to simplify their effect on performance. \u00A0What they tend to do is more \u0022emulation\u0022 than \u0022simulation\u0022, because in most games a lot of the real world ballistic considerations are simply irrelevant to the gameplay and would bog down the perf for no reason that the player would notice. \u00A0So for example, a bullet might simply have a \u0022damage\u0022 value that gets decremented every time it passes through the collision mesh of a penetrable object. \u00A0Arma 3 is an exception to this usual method since it calculates how the penetration changes the ballistic qualities of the projectile, but that is a game that tends more toward simulation.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe big thing though is the interaction. \u00A0Calculating the physics qualities of a single object in motion is easy, calculating how several objects in contact have reciprocating forces on one another makes the calculation more complicated, and it gets exponentially more complicated the more parts you add. \u00A0So for example when a player fires a gun in a shooter, the bullet did not exist in the weapon, it was simply spawned at the end of the barrel at the time of firing with a velocity already applied to it. \u00A0When that bullet impacts a target, it simply applies a discrete physics force and damage to the target without the target necessarily applying one back on the bullet other than that simple \u0022cheat\u0022 I mentioned above. \u00A0If the bullet is decremented of all its damage, it disappears from the world and ceases to be part of the simulation.\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2018-02-09T01:25:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289989\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518139130\u0022 data-ipsquote-userid=\u0022133397\u0022 data-ipsquote-username=\u0022Fearless Son\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Fearless Son said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHowever, these calculations tend to take a lot of mathematical shortcuts to simplify their effect on performance.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo they account for the effects of differently shaped bullets?\n\u003C/p\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2018-02-09T01:32:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289998\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518139526\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo they account for the effects of differently shaped bullets?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou could probably do that just by storing a precomputed ballistic coefficient for the bullet, which saves on the cost of ever having to actually worry about the bullet\u0027s shape.\n\u003C/p\u003E\n\u003Cp\u003E\nSure, it would change a bit as speed decreased, and if a smoothbore round began to tumble, that would have a huge effect on ballistic coefficient, but you could either have a precomputed lookup table/curve for ballistic coefficient vs. speed, or, more likely, ask yourself exactly how important this is to gameplay and just store a single ballistic coefficient.\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2018-02-09T01:39:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223290001\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518139954\u0022 data-ipsquote-userid=\u0022122674\u0022 data-ipsquote-username=\u0022Starman4308\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Starman4308 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nask yourself exactly how important this is to gameplay and just store a single ballistic coefficient.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s what I was thinking. Either you have a single coefficient for all bullets, or one per type. As compared to a parachute-pod-shield-decoupler-tank-engine monstrosity hurtling down out of the vacuum.\n\u003C/p\u003E\n"},{"CreatedByName":"KerikBalm","CreatedById":91917,"CreatedDateTime":"2018-02-09T06:53:34Z","Content":"\n\u003Cp\u003E\nDifferent ballistic coefficients is what Arma3 uses, I know that much.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes BF1 model ricochets and penetration?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nArma\u0027s damage calculations are quite complex, varying depending on bullet velocity, if the projectile comes to rest in the target or completely penetrates, etc. Depending on the projectile and objects in the way (walls, sandbags, trees, fences, etc), projectiles may pass through, have their direction altered, large velocity changes, etc. The penetration system is also used for determining vehicle damage (not sure about player damage).\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022damage_summary_diag_2.JPG\u0022 class=\u0022ipsImage\u0022 height=\u0022432\u0022 src=\u0022https://community.bistudio.com/wikidata/images/7/7e/damage_summary_diag_2.JPG\u0022 width=\u0022510\u0022\u003E\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n\u003Cb\u003ECase B\u003C/b\u003E: The projectile does not penetrate through the entire FG. In this case the Hitpoint will receive 100% of the directDamage (directDamage = (Hit - indirectHit)*speedmodifier ) of the projectile\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n\u003Cb\u003ECase A\u003C/b\u003E: In contrary to Case B, the projectile completely penetrates the FG. Only a portion of the directDamage of the projectile will be dealt to the Hitpoint. The portion of damage depends on the amount of speed the projectile lost during penetration. The formula for this is unknown and also seems to be nonlinear. This means that very thin firegeometry will cause low amount of damage in most cases (as many projectiles will fully penetrate).\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n...\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\nRecall from the\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://community.bistudio.com/wiki/Arma_3_Damage_Description#Damage_vs._Penetration\u0022 style=\u0022color:#0b0080;\u0022 rel=\u0022external nofollow\u0022\u003E\u0022Damage vs. Penetration section\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Ethat an attack must simultaneously affect both fire geometry and a hitpoint to produce damage.\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\nConsider the following two approaches to hitpoint placement for the same vehicle--the front view of a simplified AFV. The polygons represent FG and the purple circles represent the virtual spheres created by hitpoint vertices and their radii.\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n...\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n\u003Cimg alt=\u0022armor-hp-2.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022300\u0022 src=\u0022https://community.bistudio.com/wikidata/images/5/50/armor-hp-2.jpg\u0022 width=\u0022400\u0022\u003E\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n\u003Cspan\u003E\u00A0\u003C/span\u003EIn the second approach, the hitpoints are constrained to be inside the armor layer (blue polygons). The second vehicle will take only trivial damage from non-penetrating hits.\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\nObviously, if you have non-armored parts of a vehicle that\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ci\u003Eshould\u003C/i\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Ebe damaged by non-penetrating hits (tires, glass windscreens, unarmored vehicle parts, etc.), then their hitpoint spheres\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ci\u003Eshould\u003C/i\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u0022poke through\u0022 the FG in the \u0022old\u0022 manner.\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#222222;font-size:14px;\u0022\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nI\u0027m sure that\u0027s more complicated than what BF1 does, people complain about arma3 being a bit slow. Its also much simpler than what KSP does - vehicles seem to act as only 1 piece for most physics calculations, so except when multiple vehicles are colliding with each other, you don\u0027t have \u0022\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003Ereciprocating forces\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/span\u003E\u0022 as Fearless Son calls them.\n\u003C/p\u003E\n\u003Cp\u003E\nSo who cares what BF1\u0027s framerate is with its graphics. It effectively has a very low partcount within the physics bubble, with the \u0022parts\u0022 undergoing less calculations - they probably ignore air resistance (even if they don\u0027t, I\u0027d bet that air density is constant and they don\u0027t care about mach number), no temperature simulation, gravity is constant, there are no \u0022connections\u0022 between objects, bullets are probably just vectors/trajectories rather than \u0022physical\u0022 objects...etc.\n\u003C/p\u003E\n\u003Cp\u003E\nRunning that game with good graphics should just mean that your computer could run Scatterer and high res texture packs for KSP without slowing it down, since the bottleneck is the CPU and not the GPU.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2018-02-09T07:18:39Z","Content":"\n\u003Cp\u003E\nIf 24 fps was good enough for Stanley Kubrick, it\u0027s good enough for me :-)\n\u003C/p\u003E\n"},{"CreatedByName":"Fearless Son","CreatedById":133397,"CreatedDateTime":"2018-02-09T07:32:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223289998\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518139526\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo they account for the effects of differently shaped bullets?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223290001\u0022 data-ipsquote-contentid=\u0022170596\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221518139954\u0022 data-ipsquote-userid=\u0022122674\u0022 data-ipsquote-username=\u0022Starman4308\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Starman4308 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou could probably do that just by storing a precomputed ballistic coefficient for the bullet, which saves on the cost of ever having to actually worry about the bullet\u0027s shape.\n\u003C/p\u003E\n\u003Cp\u003E\nSure, it would change a bit as speed decreased, and if a smoothbore round began to tumble, that would have a huge effect on ballistic coefficient, but you could either have a precomputed lookup table/curve for ballistic coefficient vs. speed, or, more likely, ask yourself exactly how important this is to gameplay and just store a single ballistic coefficient.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is almost exactly how they do it.\u00A0 Most of the time, these things are simply defined on a per-bullet basis.\u00A0 A designer inputs the coefficients in the constants of the projectile, and when the player fires it simply instantiates the projectile into existence at the barrel of the gun with an input velocity vector defined by where the gun is pointed.\u00A0 Air resistance is almost never modeled, since with very rare exceptions differences in air pressure or wind are almost never an issue in the environments and ranges at which the gunplay takes place.\u00A0 Usually they just substitute the damage dropping off as a function of range, with the longer the projectile travels the less damage it does.\u00A0 Often this is actually dialed down to drop off far faster than it would in real-life as a function of enforcing close-range shootouts as a gameplay feature (getting sniped in one shot from across the map by an enemy you were not close enough to see is rarely \u0022fun\u0022.)\u00A0 Different guns will spawn different\u00A0bullets, as defined in the game\u0027s files.\u00A0 Sometimes even the same gun will shoot \u0022different\u0022 bullets, even if they are the same caliber, just by switching the weapon\u0027s parts (the game uses a different dataset reference for bullets in that case.)\n\u003C/p\u003E\n\u003Cp\u003E\nCompare that to KSP, where each \u0022projectile\u0022 is made of multiple objects and they have to calculate aerodynamic forces on each of them, at different kinds of velocities and air pressures, and the forces on \u003Cem\u003Ethose\u003C/em\u003E can then impact the forces on other parts of the craft (dragging surfaces triggering leveraging forces which affect the orientation of the craft for example.)\u00A0 KSP cannot do the kind of simplified, fixed calculation that a shooter\u0027s bullets might without losing a substantial amount of the core of the gameplay experience.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Mako","CreatedById":69375,"CreatedDateTime":"2018-02-09T07:41:07Z","Content":"\n\u003Cp\u003E\nHold up. Let me get this straight. If we ignore the details about the physics for a second, are people actually saying they expect an indie game made by a small, relatively inexperienced team with a small budget working on a somewhat closed-source third-party engine should perform as good as a game made by a large studio of experienced industry professionals with a Triple A budget\u00A0working on their own completely customizable engine?\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not going to ever say that is impossible. I\u0027ve seen small teams do amazing things on a tight budget. That being said, I would think it\u0027s highly unlikely that Squad could deliver Triple A performance levels on their indie project that was likely never expected to go as far as it did.\n\u003C/p\u003E\n\u003Cp\u003E\nWe don\u0027t know how many employees Squad has, but let\u0027s say it\u0027s less than 30 people. The folks who made Battlefield 1 work in a studio of over 600 people (as of 2016 according to wikipedia, grain of salt sold seperately) who have the benefit of full control over their engine. Battlefield 1 appears to have been made by a team well over 20 times the size of Squad.\n\u003C/p\u003E\n\u003Cp\u003E\nThe comparison being argued here seems beyond\u00A0absurd before you even get into the discussion of how extremely different the games are.\n\u003C/p\u003E\n"}]}