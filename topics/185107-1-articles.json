{"TopicId":185107,"ForumId":29,"TopicTitle":"Correctly handling GUI visibility via F2","CreatedByName":"BadRocket","CreatedById":194509,"CreatedDateTime":"2019-06-04T02:38:35Z","PageNum":1,"Articles":[{"CreatedByName":"BadRocket","CreatedById":194509,"CreatedDateTime":"2019-06-04T02:38:35Z","Content":"\n\u003Cp\u003E\nI am updating my mod \u003Cem\u003E\u003Ca href=\u0022https://spacedock.info/mod/2048/Telemetria\u0022 rel=\u0022external nofollow\u0022\u003ETelemetria\u003C/a\u003E\u003C/em\u003E, and I\u0027ve had an issue that I\u0027ve never been able to solve. As per the wiki for the \u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/Key_bindings\u0022 rel=\u0022external nofollow\u0022\u003EKey Bindings\u003C/a\u003E reference, the default F2 key globally toggles UI visibility (or whatever override key is chosen). I am able to correctly handle this notification, and toggle my own visibility successfully, plus the user can also hide my mod with any keypress of their choosing.\n\u003C/p\u003E\n\u003Cp\u003E\nBUT, the problem is I can\u0027t find a way to recognize if the user has previously hidden all screen elements with the F2 key. Then my mod gets \u0022out of sync\u0022 with the global visibility. The user can hide my mod again, but that requires another keypress.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve done some research on this, but all I found is this topic from 2013: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/32449-f2-button-does-not-hide-my-monobehaviour-icon/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/32449-f2-button-does-not-hide-my-monobehaviour-icon/\u003C/a\u003E where a comment matches my problem:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u0022450895\u0022 data-ipsquote-contentid=\u002232449\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221371412060\u0022 data-ipsquote-userid=\u002267157\u0022 data-ipsquote-username=\u0022TheUndeadFish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/16/2013 at 12:47 PM, TheUndeadFish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve tried looking through all the stuff that KSP exposes but I have yet to find a specific event or property that signals when the GUI should or should not be displayed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo my question -- what flag indicates that the user wants ALL screen elements hidden?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for any help / suggestions.\n\u003C/p\u003E\n"},{"CreatedByName":"BadRocket","CreatedById":194509,"CreatedDateTime":"2019-06-04T03:13:01Z","Content":"\n\u003Cp\u003E\nActually I think I just solved it myself: I can watch for the global Hide All key press, and can determine current state of visibility by checking if it\u0027s been called an even or odd number of times.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d prefer to check an official global system flag, but this kludge seems to work. Hopefully this helps somebody else someday.\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-06-04T12:41:22Z","Content":"\n\u003Cp\u003E\nHave you tried GameEvents.OnHideUI and GameEvents.OnShowUI?\n\u003C/p\u003E\n"},{"CreatedByName":"BadRocket","CreatedById":194509,"CreatedDateTime":"2019-06-04T15:36:22Z","Content":"\n\u003Cp\u003E\nThanks cakepie, that\u0027s the info I was looking for! I will check out those events, they definitely sound like what I need.\n\u003C/p\u003E\n"},{"CreatedByName":"BadRocket","CreatedById":194509,"CreatedDateTime":"2019-06-04T17:36:42Z","Content":"\n\u003Cp\u003E\nYep, confirmed. onHideUI/onShowUI is the correct answer and performed exactly as advertised. \u002B1 to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69278-cakepie/\u0026amp;do=hovercard\u0022 data-mentionid=\u002269278\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69278-cakepie/\u0022 rel=\u0022\u0022\u003E@cakepie\u003C/a\u003E for the advice!\n\u003C/p\u003E\n\u003Cp\u003E\nIn hindsight, it seems pretty obvious, but in my defense I also just found this 2015 thread with the identical problem:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed3796150783\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/117240-looking-for-a-better-way-to-know-if-the-ui-is-visible-or-not/\u0026amp;do=embed\u0022 style=\u0022height:226px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nIf the prolific \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E had the same question, with an answer supplied by freakin\u0027 \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/113164-thomas-p/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022113164\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/113164-thomas-p/\u0022 rel=\u0022\u0022\u003E@Thomas P.\u003C/a\u003E, then I\u0027m in good company. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-06-04T18:33:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223612121\u0022 data-ipsquote-contentid=\u0022185107\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221559669802\u0022 data-ipsquote-userid=\u0022194509\u0022 data-ipsquote-username=\u0022BadRocket\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n56 minutes ago, BadRocket said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYep, confirmed. onHideUI/onShowUI is the correct answer and performed\u003Cspan\u003E\uFEFF\u003C/span\u003E exactly as advertised. \u002B1 to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69278-cakepie/\u0026amp;do=hovercard\u0022 data-mentionid=\u002269278\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69278-cakepie/\u0022 rel=\u0022\u0022\u003E@cakepie\u003C/a\u003E for the advice!\n\u003C/p\u003E\n\u003Cp\u003E\nIn hindsight, it seems pretty obvious, but in my defense I also just found this 2015 thread with the identical problem:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed9760015553\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/117240-looking-for-a-better-way-to-know-if-the-ui-is-visible-or-not/\u0026amp;do=embed\u0022 style=\u0022height:223px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nIf the prolific \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E had the same question, with an answer supplied by freakin\u0027 \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/113164-thomas-p/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022113164\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/113164-thomas-p/\u0022 rel=\u0022\u0022\u003E@Thomas P.\u003C/a\u003E, then I\u0027m in good company. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnd while I may not have gotten the same answer back then, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69278-cakepie/\u0026amp;do=hovercard\u0022 data-mentionid=\u002269278\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69278-cakepie/\u0022 rel=\u0022\u0022\u003E@cakepie\u003C/a\u003E is totally correct\n\u003C/p\u003E\n"}]}