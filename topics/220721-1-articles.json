{"TopicId":220721,"ForumId":20,"TopicTitle":"How do I modify .cfg files?","CreatedByName":"Connor.io","CreatedById":223699,"CreatedDateTime":"2023-11-08T19:52:05Z","PageNum":1,"Articles":[{"CreatedByName":"Connor.io","CreatedById":223699,"CreatedDateTime":"2023-11-08T19:52:05Z","Content":"\n\u003Cp\u003E\nAlright, so I am just wondering how to edit the .cfg files of a jet engine. More specifically, I am trying to modify the stock R.A.P.I.E.R engine to increase the maximum speed and altitude it can function at, such as allowing the engine to work at up to Mach 6.5 to 7, with the max altitude being increased to 35-45 km. Any tips?\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2023-11-09T17:01:20Z","Content":"\n\u003Cp\u003E\nHi, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/profile/223699-connorio/?do=hovercard\u0022 data-mentionid=\u0022223699\u0022 href=\u0022https://forum.kerbalspaceprogram.com/profile/223699-connorio/\u0022 rel=\u0022\u0022\u003E@Connor.io\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s not that hard, but it\u0027s not plain easy neither. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EFirst things first, instead of directly editing Stock files - what would play havoc later with crafts you download from Kerbal-X, or anything else you had done before - it\u0027s better to create new parts using the original as templates, and then changing the later. This will keep your game\u0027s integrity, preventing nasty accidents as times passes and you forget about what you changed.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ESo your best tool is a thingy called Module Manager. Everybody and the kitchen\u0027s sink have it installed nowadays, so installing it is a no-brainer.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EThen you \u00A0need to find a place on your \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EGameData\u003C/span\u003E to store your custom patches, without risking something else overwritting or deleting things - what would also ruin your savegames and crafts. I like to use \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003E\u0026lt;KSP_ROOT\u0026gt;/GameData/__LOCAL\u003C/span\u003E for this, as Explorer and Finder makes it very easy to find it by sorting files by name. To keep things more organised, let\u0027s create a directory inside that, like \u0022\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EMyFancyParts\u003C/span\u003E\u0022. Of course, you can use any directory you want, what I\u0027m doing here are suggestions - but historically, people following these suggestions have way less problems on missing parts out of the blue as time goes by. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EThe first task is to open the R.A.P.I.E.R config file to give it a good look. Open it in read/only mode just to be on the safe side, you will find it on\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003E\u0026lt;KSP_ROOT\u0026gt;/GameData/Squad/Parts/Engine/rapierEngine/rapierEngine.cfg\u003C/span\u003E.\u003C/span\u003E\u003C/span\u003E\u00A0Don\u0027t worry about not understanding what you are reading, because it will take some time until you learn enough - I\u0027m modding KSP\u00B9 for near half its existence, and I\u0027m still learning (and making lots of mistakes in the process!).\n\u003C/p\u003E\n\u003Cp\u003E\nWe will create this thing gradually, so you can understand all the steps.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, create a file (like\u00A0\u003Cspan\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003E\u0026lt;KSP_ROOT\u0026gt;/GameData/__LOCAL/MyFancyParts/RapierSuper.cfg\u003C/span\u003E\u003C/span\u003E) and type:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[RAPIER]:FINAL\n{\n\t@name = #$name$-super\n\t@author = #$author$, Connor.io\n\t@title = #$title$ Super\n\t@manufacturer = Connor.IO Manufacturing under license from #$manufacturer$\n\t@description = #$description$. Super variant with improved performance.\n}\u003C/pre\u003E\n\u003Cp\u003E\nThe code above will tell \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003E\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E\u003C/abbr\u003E to take the whole PART called RAPIER (see the original file for reference!) and copy it on a new node on the prefab (the place in memory where the config files are loaded), and then edit the atribute \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ename\u003C/span\u003E to be the original value appended by \u0022-super\u0022. \u00A0Same for the remaining attributes, note that you can \u0022inject\u0022 new data at any place, no only at the end of the original string!\n\u003C/p\u003E\n\u003Cp\u003E\nRight now we just created the new copy with some information changed to help you to differentiate it from the original on the game. Now we need to make it behave differently too!!!\n\u003C/p\u003E\n\u003Cp\u003E\nOn the RAPIER config, you will find two \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EMODULE\u003C/span\u003E sections with name\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EModuleEnginesFX\u003C/span\u003E . \u00A0This is where you define engines, and when your engine has more than one mode (like the RAPIER); you use one for each mode. In this case, we want to mangle with the\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EModuleEnginesFX\u003C/span\u003E module with \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EengineID\u003C/span\u003E =\u00A0AirBreathing:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[RAPIER]:FINAL\n{\n\t@name = #$name$-super\n\t@author = #$author$, Connor.io\n\t@title = #$title$ Super\n\t@manufacturer = Connor.IO Manufacturing under license from #$manufacturer$\n\t@description = #$description$. Super variant with improved performance.\n\t\n\t@MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]\n\t{\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\nSo we already solved half the problem: we carbon-copied a new part, and we now know how to edit one of the engine modes.\u00A0So we need to understand how an air breathing engine works - we can\u0027t change what we don\u0027t know. Our changes will be inside the { } thingies on the MODULE section.\n\u003C/p\u003E\n\u003Cp\u003E\nAn airbreathing engine gives you propulson in exchange of LiquidFuel and IntakeAir in a precise misture (the proportion may vary from engine to engine). So every airbreathing engine needs an Air Intake to fetch IntakeAir for it. But Air Intakes also have limitations, and so these limitations pile up with the engine\u0027s own ones.\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s first work on the engine and, if it\u0027s not enough, later we will try something on an Air Intake.\n\u003C/p\u003E\n\u003Cp\u003E\nFor engines, we have two constraints - atmospheric curve and velocity curve. The atmospheric curve describes how the engine behaves as you get higher, where the air pressure is smaller, while the velocity curve does the same compared to the current airspeed. Engines are usually trimmed to be optimal on a specific high and speed.\n\u003C/p\u003E\n\u003Cp\u003E\nThe Velocity Curve is called \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EvelCurve\u003C/span\u003E\u00A0on the engine\u0027s node, and the original values are:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\t\tvelCurve\n\t\t{\n\t\t\tkey = 0 1 0 0.08333334\n\t\t\tkey = 0.2 0.98 0.42074 0.42074\n\t\t\tkey = 0.7 1.8 2.290406 2.290406\n\t\t\tkey = 1.4 4.00 3.887193 3.887193\n\t\t\tkey = 3.75 8.5 0 0\n\t\t\tkey = 4.5 7.3 -2.831749 -2.831749\n\t\t\tkey = 5.5 3 -5.260566 -5.260566\n\t\t\tkey = 6 0 -0.02420209 0\n\t\t}\n\u003C/pre\u003E\n\u003Cp\u003E\nAnd the meaning follows:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nfirst value is the velocity in Mach\u00A0for the point you are describing .\n\u003C/li\u003E\n\u003Cli\u003E\nsecond value is the normalize value of the engine performance (1 = 100%) at that velocity\n\u003C/li\u003E\n\u003Cli\u003E\nthe two last values are for configuring the \u0022curve\u0022, so you have nice curves instead of ramps on the calculation (something like bezier). We will just reuse whatever we have.\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nYou want the engine to be useable at Mach 7, so we will replace the \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EvelCurve\u003C/span\u003E as follows:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[RAPIER]:FINAL\n{\n\t@name = #$name$-super\n\t@author = #$author$, Connor.io\n\t@title = #$title$ Super\n\t@manufacturer = Connor.IO Manufacturing under license from #$manufacturer$\n\t@description = #$description$. Super variant with improved performance.\n\t\n\t@MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]\n\t{\n\t\t!velCurve,* { }\n\t\t\u0026amp;velCurve\n\t\t{\n\t\t\tkey = 0 1 0 0.08333334\n\t\t\tkey = 0.2 0.98 0.42074 0.42074\n\t\t\tkey = 0.7 1.8 2.290406 2.290406\n\t\t\tkey = 1.4 4.00 3.887193 3.887193\n\t\t\tkey = 4.75 8.5 0 0\n\t\t\tkey = 6.5 7.3 -2.831749 -2.831749\n\t\t\tkey = 7.5 3 -5.260566 -5.260566\n\t\t\tkey = 8 0 -0.02420209 0\n\t\t}\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\nThis piece of code will delete the original \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EvelCurve\u003C/span\u003E\u00A0and replace it with a new one. See the new values I added, this engine will work acceptably until Mach 7.5, and then will flame out at Mach 8.\n\u003C/p\u003E\n\u003Cp\u003E\nNow we need to work on the atmospheric curve,\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmCurve\u003C/span\u003E. Follows the original:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\t\tatmCurve\n\t\t{\n\t\t\t// higher thrust at altitude than even TRJ\n\t\t\tkey = 0 0 0 0\n\t\t\tkey = 0.018 0.09 7.914787 7.914787\n\t\t\tkey = 0.08 0.3 1.051923 1.051923\n\t\t\tkey = 0.35 0.5 0.3927226 0.3927226\n\t\t\tkey = 1 1 1.055097 0\n\t\t}\n\u003C/pre\u003E\n\u003Col\u003E\n\u003Cli\u003E\nfirst value is the atmospheric pressure normalised, where 0 = space and 1 = Kerbin\u0027s sea level.\n\u003Col\u003E\n\u003Cli\u003E\nExactly what altitude is 0 dependes of the Body, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E is 90Km while Kerbin is 70Km.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E at sea level has a \u0022key\u0022 value of 5.\n\u003C/li\u003E\n\u003Cli\u003E\nAdditionally, this values\u00A0\u003Cstrong\u003Eare not linear\u003C/strong\u003E\u00A0so halving the key will not means double the altitude! Check this graph for reference:\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cimg alt=\u0022800px-(updated)_Comparison_of_the_atmosp\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002274.00\u0022 height=\u0022592\u0022 width=\u0022800\u0022 src=\u0022https://wiki.kerbalspaceprogram.com/images/thumb/6/61/(updated)_Comparison_of_the_atmospheres_of_Eve_and_Kerbin.png/800px-(updated)_Comparison_of_the_atmospheres_of_Eve_and_Kerbin.png\u0022\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nsecond value is the normalised value of the engine performance (1 = 100%) at that pressure\n\u003C/li\u003E\n\u003Cli\u003E\nthe two last values are for configuring the \u0022curve\u0022, so you have nice curves instead of ramps on the calculation (something like bezier). We will just reuse whatever we have.\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nThis will be a trial and error process, because properly calculating these values are a bit boring. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003Cspan\u003E\u00A0So let\u0027s half some values to allow the RAPIER Super to work higher, and if you find it\u0027s too much, you can edit the values to be a bit higher until you are satisfied. Rememeber, 0 is space and 1 is Kerbin\u0027s sea level, so to allow the engine to fly higher we need to change the lower keys - except the key 0, as there\u0027s no possible way for a airbreathing engine to work on vaccum!\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ESo we get:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[RAPIER]:FINAL\n{\n\t@name = #$name$-super\n\t@author = #$author$, Connor.io\n\t@title = #$title$ Super\n\t@manufacturer = Connor.IO Manufacturing under license from #$manufacturer$\n\t@description = #$description$. Super variant with improved performance.\n\t\n\t@MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]\n\t{\n\t\t!velCurve,* { }\n\t\t\u0026amp;velCurve\n\t\t{\n\t\t\tkey = 0 1 0 0.08333334\n\t\t\tkey = 0.2 0.98 0.42074 0.42074\n\t\t\tkey = 0.7 1.8 2.290406 2.290406\n\t\t\tkey = 1.4 4.00 3.887193 3.887193\n\t\t\tkey = 4.75 8.5 0 0\n\t\t\tkey = 6.5 7.3 -2.831749 -2.831749\n\t\t\tkey = 7.5 3 -5.260566 -5.260566\n\t\t\tkey = 8 0 -0.02420209 0\n\t\t}\n\t\t!atmCurve,* { }\n\t\t\u0026amp;atmCurve\n\t\t{\n\t\t\tkey = 0 0 0 0\n\t\t\tkey = 0.009 0.09 7.914787 7.914787\n\t\t\tkey = 0.04 0.3 1.051923 1.051923\n\t\t\tkey = 0.35 0.5 0.3927226 0.3927226\n\t\t\tkey = 1 1 1.055097 0\n\t\t}\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\nThe values you will need to trim are the second and third \u0022keys\u0022 (compare them with the original!) from top to bottom.\n\u003C/p\u003E\n\u003Cp\u003E\nI think this will give you a new RAPIER engine that should behave like you want. However, I wrote that at my lunch, away from my game machine, so I didn\u0027t tested it. I will check it tonight for any mistakes - but if you test it before me and it works, please advise! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-11-10T02:59:23Z\u0022 title=\u002211/10/2023 02:59  AM\u0022 data-short=\u0022Nov 10\u0022\u003ENovember 10, 2023\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003EGrammars... (Sigh)\n\u003C/span\u003E\n"}]}