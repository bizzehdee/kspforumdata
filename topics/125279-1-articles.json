{"TopicId":125279,"ForumId":69,"TopicTitle":"Bug : Launching KSP and default initialisation","CreatedByName":"Warzouz","CreatedById":140055,"CreatedDateTime":"2015-11-13T09:05:33Z","PageNum":1,"Articles":[{"CreatedByName":"Warzouz","CreatedById":140055,"CreatedDateTime":"2015-11-13T09:05:33Z","Content":"\n\u003Cp\u003EThis is a old bug I though was related to mods, but it\u0027s not.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ESymptoms\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe DOVE stock plane should partially blow when ascending (or at least overheats). It didn\u0027t at all. I could get up to 1600m/s at 10000m (with another plane) without any sweat.\u003C/p\u003E\u003Cp\u003EKER said the convection flux was 0.00W and never changed\u003C/p\u003E\u003Cp\u003E(There could be other anomalies of such kind)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFailed search for the mod\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EFirst I though of a mod, or editing I did, that wrecked the squad files. I did a fresh install and removed Physics.cfg and tested it. I got heating. \u003C/p\u003E\u003Cp\u003EThen I added mods and didn\u0027t get any... Then I restarted and did a fresh install, removing physics.cfg again and didn\u0027t get any heating. So mods weren\u0027t the cause. I even noticed the Physic.cfg wasn\u0027t recreated !\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EThe truth is elsewhere\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EFor some reason, on my second test run, the physics.cfg wasn\u0027t recreated. There is a dependency on \u003Cstrong\u003EHOW\u003C/strong\u003E the game is started. I remembered that the first time I double clicked on KSP.exe in the KSP folder. I usually start the game from Windows 10 tile added by TILECREATOR app.\u003C/p\u003E\u003Cp\u003EW10 TileCreator App call for a proxy that run the game. That proxy simply call the EXE \u003Cstrong\u003EBUT it doesn\u0027t set the starting folder\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003EI think that behaviour can be emulated by running the game from a command line in the console without being in the KSP folder.\u003C/p\u003E\u003Cp\u003ECorrect game start\u003C/p\u003E\u003Cp\u003E- Shortcut (by default, the starting folder is set to the exe folder)\u003C/p\u003E\u003Cp\u003E- Double click from KSP folder\u003C/p\u003E\u003Cp\u003E- Use the uncooperative stock launcher\u003C/p\u003E\u003Cp\u003EIncorrect game start\u003C/p\u003E\u003Cp\u003E- Direct EXE launch (example command-line)\u003C/p\u003E\u003Cp\u003E- Proxy or launcher that doesn\u0027t set the starting folder (such as TileCreator app \u0026amp; proxy)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EMy understanding of the bug\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EWhen the game starts, it checks for Physics.cfg. If it doesn\u0027t find it it creates it and initialise parameters.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ETHEN\u003C/strong\u003E it forces the current folder despite of the starting folder (most software do that)\u003C/p\u003E\u003Cp\u003EThe game runs correctly because most of the files are initialised after the folder change, but not all of them.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EBUG : the current folder is not changed soon enough \u003C/strong\u003Eso few parameter aren\u0027t initialize correctly causing few but hard to find bugs.\u003C/p\u003E\u003Cp\u003EI hope that description helps.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-13T09:10:52Z\u0022 title=\u002211/13/2015 09:10  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 13, 2015\u003C/time\u003E by Warzouz\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-11-13T09:51:08Z","Content":"\n\u003Cp\u003EThanks for your detailed explanation, it would have been pretty hard to get what the issue is without it.\u003C/p\u003E\u003Cp\u003EBut, at least IMO, you made a great description of a bug with TileCreator. It is the proxy set by TileCreator that should also set the folder path, exactly as it works with desktop shortcuts. \u003C/p\u003E\u003Cp\u003ECould be KSP.exe could be modified to change to its install folder earlier (but please know, that file is actually a Unity 4.6.4 runtime exe, as such there may be very little Squad may do to change its behaviour). \u003C/p\u003E\u003Cp\u003EOther software expect to access files from the folder the system has set for them, so would not work at all if started with the proxy.\u003C/p\u003E\n"},{"CreatedByName":"Warzouz","CreatedById":140055,"CreatedDateTime":"2015-11-13T10:16:22Z","Content":"\n\u003Cp\u003EOK, I mentioned a discrepancy on how the game is started. If it\u0027s a unity feature, then it can\u0027t be fixed, but some heating data aren\u0027t initialized as other. This doesn\u0027t seem to be a Unity problem.\u003C/p\u003E\u003Cp\u003EI found a workaround but this bug might cause other misbehaviour of KSP which is quite hard to find. There are many ways of starting apps, not only shortcut or double click.\u003C/p\u003E\u003Cp\u003EAny software should always be sure of the folder it runs into (except if designed to run into various folder such as user data folders which is not the case of KSP). As a former developer myself, I always deal with folder even before loading parameters and data (language files are sometime an exception to deal with user error messages).\u003C/p\u003E\u003Cp\u003EOf course this is not a major bug, but some test could be run on Unity 5 dev version.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-11-13T16:47:41Z","Content":"\n\u003Cp\u003EThe trouble is that most software \u003Cem\u003Eis installed\u003C/em\u003E, so the paths the program can use are set in the Windows registry and you are given a shortcut in the menu to start the program.\u003C/p\u003E\u003Cp\u003EIf you move most of these programs out of their install folder, such as from Program Files to the Desktop, they can fail to work correctly because they ask the registry for the absolute path to where their files are, but because they were moved they can\u0027t find them.\u003C/p\u003E\u003Cp\u003EKSP from Steam and from GoG have an installer and provide a shortcut in your menu, but both of these are based on the store version of KSP that is simply unzipped to a location, if you move these versions of KSP from their install folder they will still work because they look for files relative to themselves, and don\u0027t need to ask the registry, but they also can\u0027t find their files if started from some other folder.\u003C/p\u003E\u003Cp\u003EThis also happens with other programs that aren\u0027t installed, they expect to find files relative to where they were started so you\u0027re usually asked to start the program.exe directly.\u003C/p\u003E\u003Cp\u003EThis is one reason why installers exist, as most people don\u0027t mess with their installed files, just use the shortcut in the menu and never know that this issue exists.\u003C/p\u003E\u003Cp\u003EUsers of mobile applications will run into this from time to time, though usually they just use the program.exe anyway.\u003C/p\u003E\u003Cp\u003EAs for the Dove, there were jet engine changes and the Dove \u003Cem\u003Eis\u003C/em\u003E a spaceplane so it\u0027d not be much use if it couldn\u0027t take some heat, as for KER, please make sure your mods are up to date, and don\u0027t rule out bugs in the mods as well.\u003C/p\u003E\n"}]}