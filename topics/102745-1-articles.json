{"TopicId":102745,"ForumId":15,"TopicTitle":"Mesh collider is correct but incorrect","CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-26T21:37:01Z","PageNum":1,"Articles":[{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-26T21:37:01Z","Content":"\n\u003Cp\u003E#####SOLVED#####\u003C/p\u003E\u003Cp\u003EThis problem is nearly game-breaking (it\u0027s certainly stopped me from continuing my mod project), and it has absolutely no reason to exist.\u003C/p\u003E\u003Cp\u003EI made a video showcasing the problem, but it appears my recording software is spitting out unusable video files.\u003C/p\u003E\u003Cp\u003EMy problem is that the Center of Mass is WAY of in the VAB. As in, the center of mass is on the edge of the model. And it\u0027s not the mesh, because I can hover my mouse over the ghost space where objects attach radially (they act like there are two collision meshes, one in this weird area and one where I put mine) and not select anything. The model has a tendency to fall over on the launchpad, thus proving that the problem is not an extra mesh (it wouldn\u0027t have fallen over; the mesh should support it). Below is the config, although I doubt it\u0027s something there.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPART\u003Cbr\u003E{\u003Cbr\u003E// Kerbal Space Program - Part Config\u003Cbr\u003E// F500 Fuel Tank\u003Cbr\u003E//\u003Cbr\u003E\u003Cbr\u003E// --- general parameters ---\u003Cbr\u003Ename = f500FuelTank\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = BlazerNitrox\u003Cbr\u003E\u003Cbr\u003E// --- assets parameters ---\u003Cbr\u003Emesh = f500FuelTank.mu\u003Cbr\u003ErescaleFactor = 1.25\u003Cbr\u003E\u003Cbr\u003E// --- node definitions ---\u003Cbr\u003Enode_stack_top = -0.7, 2.0, -0.7, 0.0, 1.0, 0.0, 1\u003Cbr\u003Enode_stack_bottom = -0.7, -2.0, -0.7, 0.0, 1.0, 0.0, 1\u003Cbr\u003Enode_attach = 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1\u003Cbr\u003E\u003Cbr\u003E// --- editor parameters ---\u003Cbr\u003ETechRequired = advRocketry\u003Cbr\u003EentryCost = 0\u003Cbr\u003Ecost = 2000\u003Cbr\u003Ecategory = FuelTank\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = F500 Fuel Tank\u003Cbr\u003Emanufacturer = Blazer Rocket Industries\u003Cbr\u003Edescription = After everyone getting upset about how \u0022heavy\u0022 the fuel tanks are, Blazer Rocket Industries decided to build this tank, which has plastic walls. Of course, then everyone was worried that it was too easy to destroy, so they put reinforcements on it, making it heavier.\u003Cbr\u003E\u003Cbr\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003Cbr\u003EattachRules = 1,1,1,1,0\u003Cbr\u003E\u003Cbr\u003E// --- standard part parameters ---\u003Cbr\u003Emass = 0.5\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.3\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 12\u003Cbr\u003EbreakingForce = 50\u003Cbr\u003EbreakingTorque = 50\u003Cbr\u003EmaxTemp = 1500\u003Cbr\u003E\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E  name = LiquidFuel\u003Cbr\u003E  amount = 720\u003Cbr\u003E  maxAmount = 720\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E  name = Oxidizer\u003Cbr\u003E  amount = 880\u003Cbr\u003E  maxAmount = 880\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-28T02:45:33Z\u0022 title=\u002203/28/2015 02:45  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 28, 2015\u003C/time\u003E by Blazer Nitrox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-26T21:56:50Z","Content":"\n\u003Cp\u003Ethe config file is fine. \u003C/p\u003E\u003Cp\u003Eproblem lies with the mesh\u0027s pivot. make sure the pivot for the visible mesh and collision mesh are in the same location, and have same rotation. the part\u0027s center of mass is the pivot of the object with Part Tools script. if you use an empty game object for the Part Tools script, place that object at the CoM of your part before export. multiple mouse over areas is probably due to having multiple collision meshes that are not aligned. resetting the pivots to the part\u0027s CoM should solve that.\u003C/p\u003E\n"},{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-26T23:19:09Z","Content":"\n\u003Cp\u003EAs I said in my above post, there are \u003Cstrong\u003Enot\u003C/strong\u003E multiple areas that can be highlighted. I also checked, and there is only \u003Cstrong\u003Eone\u003C/strong\u003E collision mesh.\u003C/p\u003E\u003Cp\u003EPictures of my Unity setup are available \u003Ca href=\u0022http://imgur.com/LWA1wAL,SDXMVrc\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E (I linked them because otherwise the pictures were massive).\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-27T00:58:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Blazer Nitrox\u0022 data-cite=\u0022Blazer Nitrox\u0022\u003E\u003Cdiv\u003EAnd it\u0027s not the mesh, because I can hover my mouse over the ghost space where objects attach radially (they act like there are two collision meshes, one in this weird area and one where I put mine) and not select anything. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethis certainly reads like there are multiple areas responding to a mouse over.\u003C/p\u003E\u003Cp\u003Eat any rate. you used capsule collider, it has rounded ends, of course it will tip over...\u003C/p\u003E\u003Cp\u003Elooking at this, \u003Ca href=\u0022https://i.imgur.com/SDXMVrc.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://i.imgur.com/SDXMVrc.png\u003C/a\u003E, your collider is off-center relative to the visible mesh.\u003C/p\u003E\u003Cp\u003Eset your pivot display to \u0022Pivot\u0022 \u0026amp; \u0022Local\u0022\u003C/p\u003E\u003Cp\u003Eset your GameObject to 0,0,0 position and rotation\u003C/p\u003E\u003Cp\u003Erotate your visible mesh so it is positioned at 0,0,0 and oriented correctly. probably 90,0,0\u003C/p\u003E\u003Cp\u003Eremove \u0022Animator\u0022 component\u003C/p\u003E\u003Cp\u003Eremove and reapply capsule collider. it should automatically size to fit the visible mesh. If it sits horizontally, change \u0022Direction\u0022 to Y-Axis, adjust Radius and Height. Center should be 0,0,0\u003C/p\u003E\n"},{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-27T01:26:52Z","Content":"\n\u003Cp\u003EYour edits definitely moved the center of mass, but it didn\u0027t actually make it better (the CoM used to be about a meter to the left; now it\u0027s about a meter to the right). \u003Ca href=\u0022http://imgur.com/yg76rUs,VEW4nwX\u0022 rel=\u0022external nofollow\u0022\u003EHere\u003C/a\u003E\u0027s the links for the images.\u003C/p\u003E\u003Cp\u003EOne thing you can\u0027t see is that the mesh didn\u0027t reorient properly.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-27T01:58:54Z\u0022 title=\u002203/27/2015 01:58  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 27, 2015\u003C/time\u003E by Blazer Nitrox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-27T02:13:52Z","Content":"\n\u003Cp\u003EBlender calls it \u0022Origin\u0022; Unity calls it \u0022Pivot\u0022. your pivot is off center. the pivot is what KSP uses to figure CoM. your pivot is off on the right wall of the tank judging by that picture. The center of your mesh should be aligned to 0,0,0 relative to GameObject. since the pivot is off to one side, you have to correct it by moving \u0022model\u0022 by the same distance as the radius of the cylinder in the opposite direction. You may have to move it in all X,Y,Z to position the visible mesh properly. Best way is to fix it in Blender, link down below...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://i.imgur.com/PT5Rezg.jpg\u0022 alt=\u0022PT5Rezg.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003Eyour mesh and pivot on the left; I replicated what you have with a simple cylinder in the middle; the right side is what you want. The capsule collider\u0027s direction setting will depend on it\u0027s host object\u0027s local pivot. The blue and red axis indicates world axis, they intersect at 0,0,0. Since you imported from Blender (my guess), Z is Blender\u0027s Up/Down axis, the capsule collider should be set to Z-Axis. In this case you would have to adjust the capsule collider\u0027s center to counter correct for the mesh\u0027s offset pivot. \u003C/p\u003E\u003Cp\u003EThink of it this way...\u003C/p\u003E\u003Cp\u003EGameObject with Part Tools script is at 0,0,0, relative to World. \u003C/p\u003E\u003Cp\u003E\u0022model\u0022\u0027s position is relative to GameObject, not the World. Since \u0022model\u0022\u0027s pivot is to the side, you have to shift it in the opposite direction by the radius so it\u0027s visible center (the Center of Mass you want) is at 0,0,0 relative to GameObject. This will ensure the Center of Mass in game is at the position you would expect for cylindrical object like your fuel tank.\u003C/p\u003E\u003Cp\u003Ecapsule collider inherits it\u0027s center from \u0022model\u0022, which is off to the side. You shifted \u0022model\u0022 earlier, which means capsule collider is now offset by the radius relative to GameObject. So you have to adjust the center setting so the collider is overlapping the \u0022model\u0022 properly. \u003C/p\u003E\u003Cp\u003Eyou should fix the pivot in Blender and then import the mesh again. \u003Ca href=\u0022http://wiki.blender.org/index.php/Doc:2.6/Manual/Modeling/Objects\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.blender.org/index.php/Doc:2.6/Manual/Modeling/Objects\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-27T05:18:06Z\u0022 title=\u002203/27/2015 05:18  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 27, 2015\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-27T21:46:19Z","Content":"\n\u003Cp\u003EThank you! That finally fixed it. Apparently I had set it wrong in Blender, so fixing the Origin there allowed me to move the collider to the right position in Unity. But now (after messing with the attach nodes a bit) I\u0027ve got it.\u003C/p\u003E\n"}]}