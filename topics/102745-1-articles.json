{"TopicId":102745,"ForumId":15,"TopicTitle":"Mesh collider is correct but incorrect","CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-26T21:37:01Z","PageNum":1,"Articles":[{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-26T21:37:01Z","Content":"#####SOLVED#####\n\nThis problem is nearly game-breaking (it\u0027s certainly stopped me from continuing my mod project), and it has absolutely no reason to exist.\n\nI made a video showcasing the problem, but it appears my recording software is spitting out unusable video files.\n\nMy problem is that the Center of Mass is WAY of in the VAB. As in, the center of mass is on the edge of the model. And it\u0027s not the mesh, because I can hover my mouse over the ghost space where objects attach radially (they act like there are two collision meshes, one in this weird area and one where I put mine) and not select anything. The model has a tendency to fall over on the launchpad, thus proving that the problem is not an extra mesh (it wouldn\u0027t have fallen over; the mesh should support it). Below is the config, although I doubt it\u0027s something there.\n\n    PART{// Kerbal Space Program - Part Config// F500 Fuel Tank//// --- general parameters ---name = f500FuelTankmodule = Partauthor = BlazerNitrox// --- assets parameters ---mesh = f500FuelTank.murescaleFactor = 1.25// --- node definitions ---node_stack_top = -0.7, 2.0, -0.7, 0.0, 1.0, 0.0, 1node_stack_bottom = -0.7, -2.0, -0.7, 0.0, 1.0, 0.0, 1node_attach = 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1// --- editor parameters ---TechRequired = advRocketryentryCost = 0cost = 2000category = FuelTanksubcategory = 0title = F500 Fuel Tankmanufacturer = Blazer Rocket Industriesdescription = After everyone getting upset about how \u0022heavy\u0022 the fuel tanks are, Blazer Rocket Industries decided to build this tank, which has plastic walls. Of course, then everyone was worried that it was too easy to destroy, so they put reinforcements on it, making it heavier.// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollisionattachRules = 1,1,1,1,0// --- standard part parameters ---mass = 0.5dragModelType = defaultmaximum_drag = 0.2minimum_drag = 0.3angularDrag = 2crashTolerance = 12breakingForce = 50breakingTorque = 50maxTemp = 1500RESOURCE{  name = LiquidFuel  amount = 720  maxAmount = 720}RESOURCE{  name = Oxidizer  amount = 880  maxAmount = 880}}\n\n**Edited \u003Ctime datetime=\u00222015-03-28T02:45:33Z\u0022 title=\u002203/28/2015 02:45  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 28, 2015\u003C/time\u003E by Blazer Nitrox**"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-26T21:56:50Z","Content":"the config file is fine. \n\nproblem lies with the mesh\u0027s pivot. make sure the pivot for the visible mesh and collision mesh are in the same location, and have same rotation. the part\u0027s center of mass is the pivot of the object with Part Tools script. if you use an empty game object for the Part Tools script, place that object at the CoM of your part before export. multiple mouse over areas is probably due to having multiple collision meshes that are not aligned. resetting the pivots to the part\u0027s CoM should solve that."},{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-26T23:19:09Z","Content":"As I said in my above post, there are **not** multiple areas that can be highlighted. I also checked, and there is only **one** collision mesh.\n\nPictures of my Unity setup are available [here](http://imgur.com/LWA1wAL,SDXMVrc) (I linked them because otherwise the pictures were massive)."},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-27T00:58:14Z","Content":"\u003E \n\u003E And it\u0027s not the mesh, because I can hover my mouse over the ghost space where objects attach radially (they act like there are two collision meshes, one in this weird area and one where I put mine) and not select anything.\n\nthis certainly reads like there are multiple areas responding to a mouse over.\n\nat any rate. you used capsule collider, it has rounded ends, of course it will tip over...\n\nlooking at this, [https://i.imgur.com/SDXMVrc.png](https://i.imgur.com/SDXMVrc.png), your collider is off-center relative to the visible mesh.\n\nset your pivot display to \u0022Pivot\u0022 \u0026 \u0022Local\u0022\n\nset your GameObject to 0,0,0 position and rotation\n\nrotate your visible mesh so it is positioned at 0,0,0 and oriented correctly. probably 90,0,0\n\nremove \u0022Animator\u0022 component\n\nremove and reapply capsule collider. it should automatically size to fit the visible mesh. If it sits horizontally, change \u0022Direction\u0022 to Y-Axis, adjust Radius and Height. Center should be 0,0,0"},{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-27T01:26:52Z","Content":"Your edits definitely moved the center of mass, but it didn\u0027t actually make it better (the CoM used to be about a meter to the left; now it\u0027s about a meter to the right). [Here](http://imgur.com/yg76rUs,VEW4nwX)\u0027s the links for the images.\n\nOne thing you can\u0027t see is that the mesh didn\u0027t reorient properly.\n\n**Edited \u003Ctime datetime=\u00222015-03-27T01:58:54Z\u0022 title=\u002203/27/2015 01:58  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 27, 2015\u003C/time\u003E by Blazer Nitrox**"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-27T02:13:52Z","Content":"Blender calls it \u0022Origin\u0022; Unity calls it \u0022Pivot\u0022. your pivot is off center. the pivot is what KSP uses to figure CoM. your pivot is off on the right wall of the tank judging by that picture. The center of your mesh should be aligned to 0,0,0 relative to GameObject. since the pivot is off to one side, you have to correct it by moving \u0022model\u0022 by the same distance as the radius of the cylinder in the opposite direction. You may have to move it in all X,Y,Z to position the visible mesh properly. Best way is to fix it in Blender, link down below...\n\n![PT5Rezg.jpg](https://i.imgur.com/PT5Rezg.jpg)\n\nyour mesh and pivot on the left; I replicated what you have with a simple cylinder in the middle; the right side is what you want. The capsule collider\u0027s direction setting will depend on it\u0027s host object\u0027s local pivot. The blue and red axis indicates world axis, they intersect at 0,0,0. Since you imported from Blender (my guess), Z is Blender\u0027s Up/Down axis, the capsule collider should be set to Z-Axis. In this case you would have to adjust the capsule collider\u0027s center to counter correct for the mesh\u0027s offset pivot. \n\nThink of it this way...\n\nGameObject with Part Tools script is at 0,0,0, relative to World. \n\n\u0022model\u0022\u0027s position is relative to GameObject, not the World. Since \u0022model\u0022\u0027s pivot is to the side, you have to shift it in the opposite direction by the radius so it\u0027s visible center (the Center of Mass you want) is at 0,0,0 relative to GameObject. This will ensure the Center of Mass in game is at the position you would expect for cylindrical object like your fuel tank.\n\ncapsule collider inherits it\u0027s center from \u0022model\u0022, which is off to the side. You shifted \u0022model\u0022 earlier, which means capsule collider is now offset by the radius relative to GameObject. So you have to adjust the center setting so the collider is overlapping the \u0022model\u0022 properly. \n\nyou should fix the pivot in Blender and then import the mesh again. [http://wiki.blender.org/index.php/Doc:2.6/Manual/Modeling/Objects](http://wiki.blender.org/index.php/Doc:2.6/Manual/Modeling/Objects)\n\n**Edited \u003Ctime datetime=\u00222015-03-27T05:18:06Z\u0022 title=\u002203/27/2015 05:18  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 27, 2015\u003C/time\u003E by nli2work**"},{"CreatedByName":"Blazer Nitrox","CreatedById":139712,"CreatedDateTime":"2015-03-27T21:46:19Z","Content":"Thank you! That finally fixed it. Apparently I had set it wrong in Blender, so fixing the Origin there allowed me to move the collider to the right position in Unity. But now (after messing with the attach nodes a bit) I\u0027ve got it."}]}