{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":100,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-01-15T13:48:16Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EOn a kOS Telnet server and security.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m in the middle of trying to implement the ability to remote the kOS terminals from an application outside of KSP.\u003C/p\u003E\u003Cp\u003EThus allowing you to, say, open Putty on Windows and connect it to the kOS computer and have your kOS script show up there. Or open an xterm on linux and connect into kOS from it.\u003C/p\u003E\u003Cp\u003EBut this raises some security concerns, so I thought I\u0027d ask the user community what they thought of my approach, as described below:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E It works by having a \u003Cstrong\u003Etelnet\u003C/strong\u003E server inside of KSP. I wanted \u003Cstrong\u003Essh\u003C/strong\u003E originally but had to abandon that plan due to the dearth of opensource ssh server implementations for C#, and my unwillingness to implement one from scratch as that would be a brand new months-long project in itself. Granted there weren\u0027t any telnet server projects I could find either, but the telnet protocol is a LOT easier to implement from scratch - at least just enough of the handshaking to make it switch from the default line-at-a-time mode to the char-at-a-time mode you need for proper terminal operations.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E The server will refuse to ever use any address other than loopback 127.0.0.1. It will make no attempt to resolve the hostname or find the \u0027real\u0027 address. This should prevent remote network connections.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Because it\u0027s a false sense of security to even bother sending passwords over telnet, a different approach is needed for security entirely. Thus the loopback rule instead of bothering with names and passwords.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Therefore users who \u003Cstrong\u003Edo\u003C/strong\u003E want to try to connect to the system from another host will have to be tech saavy enough to know how to set up their own ssh tunnel to do it. The security will therefore be the responsibility of the person setting up the ssh tunnel and not kOS.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E In keeping with the rules SQUAD imposes about not having KSP mods perform network traffic without the user\u0027s express understanding and opt-in permission, the mod will ship with the telnet option turned off by default, and unless you turn it on by changing a config option, there will be no telnet server running. The first time you turn it on, there will be an explanatory popup message about what it means. I\u0027ll do this even though, *technically*, since the server only talks to loopback 127.0.0.1, it\u0027s not *really* network traffic. It\u0027s local traffic that only lives in RAM and never reaches the hardware network interface.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt is my hope that this will satisfy people\u0027s desire for some security. By only allowing it to be local 127.0.0.1, And being turned off until you say to turn in on, I hope to avoid the need for encryption and username/password checks.\u003C/p\u003E\u003Cp\u003EI can still see *one* potential problem being what might happen if you\u0027re running the game on a computer with multiple users on it at the same time, and another user wants to mess with you by telnetting to your KSP game. But that\u0027s the sort of thing that I think is less likely on a gaming machine on which you would run KSP, and more likely on a server machine. To do this someone *already* needs to have an account on your gaming machine and *already* have the ability to get to the command line on it. And if someone you don\u0027t trust has managed to do that much already, you\u0027ve already lost your security entirely even before kOS enters into the picture.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T13:52:20Z\u0022 title=\u002201/15/2015 01:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2015-01-15T16:07:16Z","Content":"\n\u003Cp\u003EAlowing connection by default to only 127.0.0.1 is reasonably enough security feature, don\u0027t see purpose to deal with ssh connection just for making this mod running.\u003C/p\u003E\u003Cp\u003EHowever, people that already use LAN to access kOS from other computer and edit script while on first run KSP game, may found that 127.0.0.1 is not enough.\u003C/p\u003E\u003Cp\u003EThere should be option to add LAN network adress in filter to alow 127.0.0.1 and 192.168.1.0 network for example. Of course 192.168.1.0 should be editable and explained in warning message where and why to edit this. This will make some simple firewall that will suffice to deal with simple security issue. Users that need more security will have to deal by themself as you already mentioned. They should know how to make ssh tunel and solve it.\u003C/p\u003E\u003Cp\u003EOther then that I don\u0027t see why to waste time and effort to making it more secure, it is better to use that energy elswhere.\u003C/p\u003E\u003Cp\u003EBtw, I missed earlier posts about including telnet protocol in kOS, why you want to do it ? What will be improved with kOS if telnet protocol is available ?\u003C/p\u003E\u003Cp\u003EIt is already possible for people who need it, to make shared folder and allow acess to kOS script folders to be editable over LAN from some other computer, not just account on same PC.\u003C/p\u003E\n"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2015-01-15T16:19:13Z","Content":"\n\u003Cp\u003EHi, I\u0027ve a probably really easy question to you:\u003C/p\u003E\u003Cp\u003EI want that my little Grasshopper keeps an altitude, so that it floats over the surface..\u003C/p\u003E\u003Cp\u003EBut I don\u0027t know to program this. I tried to let it calculate the TWR, and then lock the Throttle somehow there where the TWR is exactly 1, but that didn\u0027t really work out.\u003C/p\u003E\u003Cp\u003EAny tips maybe? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-15T16:49:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kartoffelkuchen\u0022 data-cite=\u0022Kartoffelkuchen\u0022\u003E\u003Cdiv\u003EHi, I\u0027ve a probably really easy question to you:\u003Cp\u003EI want that my little Grasshopper keeps an altitude, so that it floats over the surface..\u003C/p\u003E\u003Cp\u003EBut I don\u0027t know to program this. I tried to let it calculate the TWR, and then lock the Throttle somehow there where the TWR is exactly 1, but that didn\u0027t really work out.\u003C/p\u003E\u003Cp\u003EAny tips maybe? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHovering, meaning your vertical velocity is zero, is a two step process as you have to first cancel your current vertical movement and then lock the throttle at TWR of 1 to cancel gravity.\u003C/p\u003E\u003Cp\u003EAll setting the throttle to TWR of 1 does is keep your current vertical speed, regardless if that speed is 100m/s or 0m/s.\u003C/p\u003E\u003Cp\u003EAnd this ignores terrain, if you want to keep a constant height above terrain, that\u0027s a 3rd step in the process as you have to now include how far away you are from your target altitude in the calculations.\u003C/p\u003E\u003Cp\u003EI\u0027ve written the Vertical Velocity mod to control all this stuff so I\u0027ve never considered what a kOS script would look like.\u003C/p\u003E\u003Cp\u003EThe first step would be can you make a script that sets your throttle to a TWR1 of 1? The next step would be can you cancel your vertical speed? Then chain those two scripts together to do what you are trying to do.\u003C/p\u003E\u003Cp\u003EHope that helps,\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-15T16:56:36Z","Content":"\n\u003Cp\u003EZero your speed, lock TWR to one and design a mechanism to deal with the very slight altitude creep that typically shows in such a setup in kOS and KSP. That is all you need to do (and can be very simple, or get very complicated, depending on your choices).\u003C/p\u003E\u003Cp\u003EIn my experience, dealing with the creep/drift is actually the most subtle, but also the hardest problem. PI/PD/PID is an easy solution, while more involved model based business does it too in more contrived but elegant way. Mind you, I last did this a couple of versions ago, to double check to make sure that just locking TWR to 1 is not enough in itself.\u003C/p\u003E\u003Cp\u003EHover scripts are a lot of fun to do \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T17:04:05Z\u0022 title=\u002201/15/2015 05:04  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-15T17:09:10Z","Content":"\n\u003Cp\u003EThe creep is mostly due to fuel mass burning off so your craft gets lighter, although lift from wings does apply even at very low horizontal velocities, even when it shouldn\u0027t. Notably the tail fins on a Kerbal2 will generate lift as you drift sideways. (...?)\u003C/p\u003E\u003Cp\u003EAnyways, set throttle to TWR 1:\u003C/p\u003E\u003Cp\u003EAllEnginesMaxThrust = Sum of all engines Max Thrust, assuming all engines point straight down, in Newtons (or maybe KiloNewtons?)\u003C/p\u003E\u003Cp\u003EVesselMass = Vessel\u0027s total mass, including fuel onboard\u003C/p\u003E\u003Cp\u003EGravityForce, in m/s = 9.8 at Kerbin sea level\u003C/p\u003E\u003Cp\u003EThrottle%ForTWR1 = (GravityForce * VesselMass) / (AllEngineMaxThrust)\u003C/p\u003E\u003Cp\u003EAs you have to thrust down at exactly the force of gravity to cancel it, the equation is a straight ratio. I have a downwards thrust acceleration of 30m/s^2, gravity is 9.8m^2, my throttle needs to be set just under 1/3rd to have a TWR of 1.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T17:11:51Z\u0022 title=\u002201/15/2015 05:11  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RadarManFromTheMoon","CreatedById":98095,"CreatedDateTime":"2015-01-15T17:11:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EOn a kOS Telnet server and security.\u003C/span\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m in the middle of trying to implement the ability to remote the kOS terminals from an application outside of KSP.\u003C/p\u003E\u003Cp\u003EThus allowing you to, say, open Putty on Windows and connect it to the kOS computer and have your kOS script show up there. Or open an xterm on linux and connect into kOS from it.\u003C/p\u003E\u003Cp\u003EBut this raises some security concerns, so I thought I\u0027d ask the user community what they thought of my approach, as described below:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E It works by having a \u003Cstrong\u003Etelnet\u003C/strong\u003E server inside of KSP. I wanted \u003Cstrong\u003Essh\u003C/strong\u003E originally but had to abandon that plan due to the dearth of opensource ssh server implementations for C#, and my unwillingness to implement one from scratch as that would be a brand new months-long project in itself. Granted there weren\u0027t any telnet server projects I could find either, but the telnet protocol is a LOT easier to implement from scratch - at least just enough of the handshaking to make it switch from the default line-at-a-time mode to the char-at-a-time mode you need for proper terminal operations.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E The server will refuse to ever use any address other than loopback 127.0.0.1. It will make no attempt to resolve the hostname or find the \u0027real\u0027 address. This should prevent remote network connections.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Because it\u0027s a false sense of security to even bother sending passwords over telnet, a different approach is needed for security entirely. Thus the loopback rule instead of bothering with names and passwords.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Therefore users who \u003Cstrong\u003Edo\u003C/strong\u003E want to try to connect to the system from another host will have to be tech saavy enough to know how to set up their own ssh tunnel to do it. The security will therefore be the responsibility of the person setting up the ssh tunnel and not kOS.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E In keeping with the rules SQUAD imposes about not having KSP mods perform network traffic without the user\u0027s express understanding and opt-in permission, the mod will ship with the telnet option turned off by default, and unless you turn it on by changing a config option, there will be no telnet server running. The first time you turn it on, there will be an explanatory popup message about what it means. I\u0027ll do this even though, *technically*, since the server only talks to loopback 127.0.0.1, it\u0027s not *really* network traffic. It\u0027s local traffic that only lives in RAM and never reaches the hardware network interface.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt is my hope that this will satisfy people\u0027s desire for some security. By only allowing it to be local 127.0.0.1, And being turned off until you say to turn in on, I hope to avoid the need for encryption and username/password checks.\u003C/p\u003E\u003Cp\u003EI can still see *one* potential problem being what might happen if you\u0027re running the game on a computer with multiple users on it at the same time, and another user wants to mess with you by telnetting to your KSP game. But that\u0027s the sort of thing that I think is less likely on a gaming machine on which you would run KSP, and more likely on a server machine. To do this someone *already* needs to have an account on your gaming machine and *already* have the ability to get to the command line on it. And if someone you don\u0027t trust has managed to do that much already, you\u0027ve already lost your security entirely even before kOS enters into the picture.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmmm.. I understand your concerns regarding security, but IMHO limiting connections to the loopback is overkill. What about a whitelist which, by default, only contains 172.0.0.1? This way everyone could define explicitly which connections are trustworthy.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-15T17:13:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThe creep is mostly due to fuel mass burning off so your craft gets lighter\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt happens when you use the exact mass of the craft and update continuously too, even when you turn on infinite fuel so that mass does not change, so it does not appear to be mass burning off. I spent quite a bit of time trying to work out where the drift comes from, but for as far as I could tell it is some kind of inherent KSP/kOS thing, or has to do with internal updates that are slightly out of sync.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003Eassuming all engines point straight down\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is not a bad addition to the list: adjusting the throttle setting to compensate for how far the thrust vector is off the gravity vector. If your craft is upright the difference should be small (but not entirely negligible), but with larger angles (meaning vehicle rotation) the effect becomes rather profound, up to the point where full thrust is still going to lose you altitude.\u003C/p\u003E\u003Cp\u003EIt is cool to implement some sort of lock to prevent the vehicle from turning any further, especially with the new pilot inputs. I calculated the maximum safe angle when I was doing my scripts, but hard a hard time intervening in a proper way because kOS could not really do that back then. Locking the craft to some angle was a rather crude way to do that, but now you actually have a lot of fine control and can even lock the player out and override his actions. Airbus style fly-by-wire \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T17:24:51Z\u0022 title=\u002201/15/2015 05:24  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-15T17:35:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RadarManFromTheMoon\u0022 data-cite=\u0022RadarManFromTheMoon\u0022\u003E\u003Cdiv\u003EHmmm.. I understand your concerns regarding security, but IMHO limiting connections to the loopback is overkill. What about a whitelist which, by default, only contains 172.0.0.1? This way everyone could define explicitly which connections are trustworthy.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFirst, for the telnet thing to be really worth it, you need to allow access from other computers. Limiting it to just 120.0.0.1 is overkill though I think, KSP is not being run on top-secret level information servers. (At least, I hope it isn\u0027t.)\u003C/p\u003E\u003Cp\u003ETo satisfy me, accepting connections on 127.0.0.1:23 (port 23 being the default telnet port I believe) works. For remote addresses though, I would want to see the ports for remote IPs forced to use a port in the range of, say, 16000 to 19000. So 192.168.0.5:23 would not be valid, but 192.168.0.5:16000 would be.\u003C/p\u003E\u003Cp\u003EMy rationale for this is two fold:\u003C/p\u003E\u003Cp\u003E1) It prevents kOS from falling into any established telnet rules someone might have already setup.\u003C/p\u003E\u003Cp\u003E2) By forcing the non-standard port, if a player does wish to telnet in from another computer, it establishes a minimum knowledge required level where presumably the player knows what they are doing to their network. Not 100% effective of course, but no strategy of implementing this will be.\u003C/p\u003E\u003Cp\u003ENote that I do not count changing the port itself as any sort of security, the security comes from the fact that changing the port is a way of making sure the player knows enough about networking that they are not opening up their security more then intended to make this work.\u003C/p\u003E\u003Cp\u003EThe other alternative is to limit outgoing address to the same subnet as the computer KSP is running on. So if KSP is running on 192.168.0.50, outgoing packets could have an IP of 192.168.0.xxx, but anything else would not send. That allows computers on the same local network access but anyone outside the router (the ADSL/Cable modem for a typical player) will fail as the destination IP will be a public internet IP. Then if a player really wants external access, they are responsible themselves for security when they setup a VPN/SSH tunnel connection of some sort.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EIt happens when you use the exact mass of the craft and update continuously too, even when you turn on infinite fuel so that mass does not change, so it does not appear to be mass burning off. I spent quite a bit of time trying to work out where the drift comes from, but for as far as I could tell it is some kind of inherent KSP/kOS thing, or has to do with internal updates that are slightly out of sync.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EReally? I do exactly this for my Vertical Velocity mod and I can lock vertical velocity to a set number to an accuracy of 4 or 5 decimal places reliably.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EMy code\u0027s on my Git if you want to take a look at it.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003ENevermind, just re-read and you are talking about directly setting the throttle based on mass, I don\u0027t do it that way. I set the throttle based on your current speed difference. So if/when this drift happens, I interpret that as \u0022speed too high\u0022 and throttle down below the calculated TWR 1 throttle to compensate.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T17:48:40Z\u0022 title=\u002201/15/2015 05:48  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-15T18:08:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ENevermind, just re-read and you are talking about directly setting the throttle based on mass, I don\u0027t do it that way. I set the throttle based on your current speed difference. So if/when this drift happens, I interpret that as \u0022speed too high\u0022 and throttle down below the calculated TWR 1 throttle to compensate.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI calculated the ideal throttle setting for TWR 1 and modulated that depending on whether the altitude was above or below the setpoint. Speed difference was not factored in, though a more advanced version of the script would also allow to set a desired rate of ascent/descent. I never got around to fully finishing that.\u003C/p\u003E\u003Cp\u003EThough I do not know whether the drift I was talking about is also present when writing a direct plugin for KSP - it might very well be an emergent phenomena because of how kOS works. If that is the case, you would not encounter it when you write a plugin. In theory zeroing your speed at a certain altitude and setting TWR to 1 should be enough, but in practice it was not. There was a slight deviation that would add up over time.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T18:12:00Z\u0022 title=\u002201/15/2015 06:12  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2015-01-15T19:28:50Z","Content":"\n\u003Cp\u003EThanks for your tips guys! I\u0027ll see how far I will get with it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-01-15T21:12:13Z","Content":"\n\u003Cp\u003EGuys, I really find the 10000 bytes storage on cores insufficient. I am not a fan of creating unreadable code with short named variables and such, I propose to set this number as a config option.\u003C/p\u003E\u003Cp\u003EI really like KOS and it is challenging enough to have RemoteTech and KOS at the same time but this limitation of 10k code is quite silly IMO.\u003C/p\u003E\u003Cp\u003E//rant off\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EBTW it seems that version 1.6 of RemoteTech broke the RT2 integration in KOS. At least none of my scripts loaded into probe\u0027s memory work properly now when it comes to steering/throttle.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-01-15T23:24:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ziw\u0022 data-cite=\u0022Ziw\u0022\u003E\u003Cdiv\u003EGuys, I really find the 10000 bytes storage on cores insufficient. I am not a fan of creating unreadable code with short named variables and such, I propose to set this number as a config option.\u003Cp\u003EI really like KOS and it is challenging enough to have RemoteTech and KOS at the same time but this limitation of 10k code is quite silly IMO.\u003C/p\u003E\u003Cp\u003E//rant off\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EBTW it seems that version 1.6 of RemoteTech broke the RT2 integration in KOS. At least none of my scripts loaded into probe\u0027s memory work properly now when it comes to steering/throttle.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI agree that it\u0027s ridiculous. It\u0027s been largely left alone for now because a future goal is to make multiple sized storage units and until that infrastrucure is in place any changes made now would just have to be changed again later.\u003C/p\u003E\u003Cp\u003EIn the meantime you should be able to change it yourself by manually editing the Part.cfg file for the kOS part.\u003C/p\u003E\u003Cp\u003ELook at GameData/kOS/Parts/kOSMachine0m/ or GameData/kOS/Parts/kOSMachine1m/, depending on which part you want to change it for, and look for a file called Part.cfg in those folders.\u003C/p\u003E\u003Cp\u003EIt should have a section like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = kOSProcessor\u003Cbr\u003E\tdiskSpace = 5000\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EChange the number for diskSpace, save the file, and re-run KSP.\u003C/p\u003E\u003Cp\u003EBe aware that your change will be reset each time you install an update of kOS and you\u0027ll have to edit it again.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EFor remote addresses though, I would want to see the ports for remote IPs forced to use a port in the range of, say, 16000 to 19000.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI already was planning on not using port 23. This could be running on a computer that already has a real telnet server on it, and besides, the OS *should* be preventing a normal level user from running code that opens up a server on ports less than 1024. That\u0027s supposed to require root/admin privileges, which is another reason I\u0027m not using 23. It would necessitate running KSP as root/admin.\u003C/p\u003E\u003Cp\u003EI may consider allowing the user to open it to known ranges, but that makes me a bit nervous. It would be easy for a kOS user to hear advice from someone saying \u0022hey, doood, all you have to do is just type these numbers in there and it works everywhere - I know because I did it myself.\u0022 I want a certain level of expertise on the part of the person opening this up so it puts the onus on them to know what they\u0027re doing and why.\u003C/p\u003E\u003Cp\u003EI may provide step by step instructions on how to set up an ssh tunnel. But the point is that an ssh tunnel then requires that there be some sort of existing means of logging in to the host machine already, thus the better security.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kcs123\u0022 data-cite=\u0022kcs123\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EBtw, I missed earlier posts about including telnet protocol in kOS, why you want to do it ? What will be improved with kOS if telnet protocol is available ?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt opens up all the following use cases:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EOther mods, like telemachus, remotely hosting kOS terminals inside them.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupport for the people who like to build funky hardware dashboards for KSP.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ELet\u0027s face it, we\u0027ll never end up making the in-game terminal as nice to look at as something like xterm or putty. In an external window, you can overlap the windows nicer, tile them, do what you want, without them getting in the way of the main game window.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupports people running the game on multi-headed monitor setups. They can put their kOS terminals on another screen away from their game screen.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMulti-player coop Artemis-style missions such as envisioned by the Go At Throttle Up mod.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-01-16T00:40:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003Esnip...\u003Cp\u003EIn the meantime you should be able to change it yourself by manually editing the Part.cfg file for the kOS part.\u003C/p\u003E\u003Cp\u003ELook at GameData/kOS/Parts/kOSMachine0m/ or GameData/kOS/Parts/kOSMachine1m/, depending on which part you want to change it for, and look for a file called Part.cfg in those folders.\u003C/p\u003E\u003Cp\u003EIt should have a section like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = kOSProcessor\u003Cbr\u003E    diskSpace = 5000\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EChange the number for diskSpace, save the file, and re-run KSP.\u003C/p\u003E\u003Cp\u003EBe aware that your change will be reset each time you install an update of kOS and you\u0027ll have to edit it again.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - \u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ei tried it just an hour ago, but for some reason it didnt work. Maybe there are some more hidden checks in the code? Or maybe I did something wrong, I\u0027ll try tomorrow one more time on a different install.\u003C/p\u003E\n"},{"CreatedByName":"Dr_Goddard","CreatedById":100796,"CreatedDateTime":"2015-01-16T02:14:38Z","Content":"\n\u003Cp\u003EA little clip to show today\u0027s progress.\u003C/p\u003E\u003Cp\u003EUsing multiple cores is a powerful tool.\u003C/p\u003E\u003Cp\u003EA little more clean-up and I\u0027m going to start on coordinated individual leg movements.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/iAfYi4srj64?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-01-16T08:45:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ziw\u0022 data-cite=\u0022Ziw\u0022\u003E\u003Cdiv\u003Ei tried it just an hour ago, but for some reason it didnt work. Maybe there are some more hidden checks in the code? Or maybe I did something wrong, I\u0027ll try tomorrow one more time on a different install.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETried it on my laptop install, same result, maybe there are some caches I need to clean after changing part.cfg file?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-01-16T09:34:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ziw\u0022 data-cite=\u0022Ziw\u0022\u003E\u003Cdiv\u003ETried it on my laptop install, same result, maybe there are some caches I need to clean after changing part.cfg file?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re probably trying to load a Vessel or a Craft file that you saved earlier before you made the change.\u003C/p\u003E\u003Cp\u003EWhen you save a ship design in the VAB, it saves a copy of the vessel that holds all vessel\u0027s settings for all the vessel\u0027s parts (so it can remember how you had your tweakables set.) When you launch the vessel on the launchpad, it clones that saved copy and all its saved part values.\u003C/p\u003E\u003Cp\u003EThe part.cfg file affects the settings that are applied to *new* instances of the part that are created. It doesn\u0027t affect old instances of the part that already existed before you made the change.\u003C/p\u003E\u003Cp\u003ETry going into the VAB, pulling the ship apart and removing the SCS computer part and throwing it away, and then attaching a new copy of the SCS computer part to the vessel and reattaching the pieces as they were. Save that and it should now have the new setting.\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-01-16T09:43:58Z","Content":"\n\u003Cp\u003EYes, now it works. Thanks a lot! Now I can continue on with my modded career mode 8)\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dr_Goddard\u0022 data-cite=\u0022Dr_Goddard\u0022\u003E\u003Cdiv\u003EA little clip to show today\u0027s progress.\u003Cp\u003EUsing multiple cores is a powerful tool.\u003C/p\u003E\u003Cp\u003EA little more clean-up and I\u0027m going to start on coordinated individual leg movements.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://youtu.be/iAfYi4srj64\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://youtu.be/iAfYi4srj64\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECool!\u003C/p\u003E\u003Cp\u003ESo each core runs a sub-process for corresponding leg or what?\u003C/p\u003E\n"},{"CreatedByName":"Positr0n","CreatedById":132658,"CreatedDateTime":"2015-01-16T10:35:51Z","Content":"\n\u003Cp\u003EI can\u0027t wait to try out this mod with RemoteTech. Hopefully nothing breaks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-01-16T10:56:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Positr0n\u0022 data-cite=\u0022Positr0n\u0022\u003E\u003Cdiv\u003EI can\u0027t wait to try out this mod with RemoteTech. Hopefully nothing breaks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI had to install older version of RT (1.5.2), the newest one (1.6) broke the integration with KOS (at least for me).\u003C/p\u003E\n"},{"CreatedByName":"Dr_Goddard","CreatedById":100796,"CreatedDateTime":"2015-01-16T12:51:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ziw\u0022 data-cite=\u0022Ziw\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESo each core runs a sub-process for corresponding leg or what?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETwo cores running in the demo.\u003C/p\u003E\u003Cp\u003EThe main one runs a routine that allows me to send positions to pre-selected groups of servos.\u003C/p\u003E\u003Cp\u003EI load a big list of pre-selections before the routine to establish variable names.\u003C/p\u003E\u003Cp\u003EThe second core sits and watches for a position change in the first leg segment, and positions the second leg segment.\u003C/p\u003E\u003Cp\u003ERight now I\u0027m cheating a bit by making the first and second leg segment angles match (their angles cancel each other out), that way the third which is set at 180\u00C3\u201A\u00C2\u00BA is always vertical.\u003C/p\u003E\u003Cp\u003EI\u0027m working on making the second leg segment proportion adjustable (how to make that into a command parameter?). This will require a third core to monitor the first and second servos and add their angles to determine what angle the third leg segment needs to take to remain vertical.\u003C/p\u003E\u003Cp\u003EMaking individual legs work independently will be an easy step, because it just requires I add new pre-selections to the device list.\u003C/p\u003E\u003Cp\u003EWHEN I get all this working properly, I will add a script to monitor the vertical angle of the rover, and have the legs respond to maintain vertical on uneven terrain.\u003C/p\u003E\u003Cp\u003EFinally, I want the device to be able to walk on uneven ground like a bug, while maintaining vertical.\u003C/p\u003E\u003Cp\u003EIn addition there are a number of canned routines, such as stow and deploy, dismount the lander, jump.\u003C/p\u003E\u003Cp\u003ELike somebody said before, kOS and robotics are like a challenging game within the game.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EQuestion for the authors\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIt would be useful to have a way to check if a variable exists. Maybe there is and I\u0027m missing it.\u003C/p\u003E\u003Cp\u003ERight now, I\u0027m running a script to load a mess of part module names to control various aspects of my robot.\u003C/p\u003E\u003Cp\u003EBecause the list is huge, I load it as a separate script before running my action scripts.\u003C/p\u003E\u003Cp\u003EThis is very useful because otherwise the delay induced by loading the big script causes long pauses in a series of actions called with parameters.\u003C/p\u003E\u003Cp\u003ERight now I am doing this in devices.ks:\u003C/p\u003E\u003Cp\u003Eif AG10 = true {print \u0022servos ready\u0022.}\u003C/p\u003E\u003Cp\u003Eif AG10 = false {...\u003C/p\u003E\u003Cp\u003E(bunch of part lists)\u003C/p\u003E\u003Cp\u003E...SET AG10 to true.\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EThe action scripts then:\u003C/p\u003E\u003Cp\u003EIF AG10 = false {RUN DEVICES.}\u003C/p\u003E\u003Cp\u003EWhat would be really handy is a command to check if a variable name exists.\u003C/p\u003E\u003Cp\u003EIf exists(\u0022partmod\u0022){...\u003C/p\u003E\n"},{"CreatedByName":"asmi","CreatedById":59068,"CreatedDateTime":"2015-01-16T14:56:30Z","Content":"\n\u003Cp\u003ETried the mod yesterday, and found new features missing (or I don\u0027t know they exist) which I would really like to have:\u003C/p\u003E\u003Cp\u003E1. user-defined functions. Any more-or-less complex program quickly turns into unmaintanable mess of code (tried to create a program for automatic powered lander that uses suicide-burn while keeping in mind the presence of atmosphere (I play with RealFuels, which fixes engine behaviour in atmosphere, but also complicates landing because actual thrust is less than in vacuum and not constant)- 3-way PID for orientation, plus additional one for throttle (for the very last stage of landing sequence, program times suicide burn such that it would bring vertical speed to 0.5m/s at 3 meters above the ground, and after it adjusts throttle to keep that speed until touchdown).\u003C/p\u003E\u003Cp\u003E2. connected to previous one - ability to include other files (c-like #include would do). It would allow to reuse code without copy-paste.\u003C/p\u003E\u003Cp\u003E3. Ability to control engine\u0027s gimbal (for those engine which can gimbal of course). Keep in mind that the engine can have several thrustTransforms for multi-nozzle engines - for example RD-180 has two, while RD-171M has four, and it would be best to have ability to control them independently (for example RD-180 provides roll control by vectoring nozzles in opposite directions).\u003C/p\u003E\u003Cp\u003E4. I would like ability to control other CPUs on the same vessel (simplest example - having secondary CPUs on boosters, and start avoidance program (gimbal booster engine away from the core like Shuttle SRBs do) on them just after separation.\u003C/p\u003E\u003Cp\u003EIs any of that in plans? \u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2015-01-16T16:16:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt opens up all the following use cases:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EOther mods, like telemachus, remotely hosting kOS terminals inside them.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupport for the people who like to build funky hardware dashboards for KSP.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ELet\u0027s face it, we\u0027ll never end up making the in-game terminal as nice to look at as something like xterm or putty. In an external window, you can overlap the windows nicer, tile them, do what you want, without them getting in the way of the main game window.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupports people running the game on multi-headed monitor setups. They can put their kOS terminals on another screen away from their game screen.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMulti-player coop Artemis-style missions such as envisioned by the Go At Throttle Up mod.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for clarification, thinking about it, I find by myself that it could be usefull for people with 2 monitors or extra PC just for kOS terminal.\u003C/p\u003E\u003Cp\u003ESpecialy for people that want to make nice videos, kOS terminal would not use screen space, so craft can be shown with more zoom, etc.\u003C/p\u003E\u003Cp\u003EMissed other possible usage, don\u0027t know if I would go for it, but it is good to know that can be used for that.\u003C/p\u003E\n"},{"CreatedByName":"Dr_Goddard","CreatedById":100796,"CreatedDateTime":"2015-01-16T16:49:33Z","Content":"\n\u003Cp\u003EMuch better servo routine. This code is used to control groups of devices, rotatrons, extendatrons, etc., by a simple command giving device and angle.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//KOS\u003Cbr\u003E//A DEVICE LIST MUST BE LOADED TO SUPPLY THE DEVICE MOD\u003Cbr\u003E//TAKES COMMANDS IN THE FORM OF \u0022RUN SEEK(X,Y).\u0022 WHERE X IS AN ANGLE OR TRANSLATION AND Y IS THE DEVICE.\u003Cbr\u003Edeclare parameter angle.\u003Cbr\u003Edeclare parameter sel.\u003Cbr\u003ESET HALTLIST TO LIST().//SETS UP A LIST TO CHECK IF ALL SERVOS HAVE REACHED THEIR SETPOINT\u003Cbr\u003ESET FVAL TO \u0022ROTATION:\u0022.\u003Cbr\u003E//CHOOSING DEVICE\u003Cbr\u003EIf sel = 0 {SET refmod to ROTMODS1.} ELSE IF sel = 1 {SET refmod to FOLDMODS1.} ELSE IF sel = 2 {SET refmod to FOLDMODS2.}ELSE IF sel = 3 {SET refmod to FOLDMODS3.} ELSE IF sel = 4 {SET refmod to ROTMODS2.} ELSE IF sel = 5 {SET refmod to ROTMODS3.} ELSE IF sel = 6 {SET refmod to EXTMODS2.}\u003Cbr\u003E\u003Cbr\u003EIF SEL = 6 {SET FVAL TO \u0022TRANSLATION:\u0022.} //CHANGES FROM ROTATION TO TRANSLATION AS REQUIRED. ADD MORE OF THESE IF MULTIPLE TRANSLATION DEVICES ARE USED.\u003Cbr\u003E\u003Cbr\u003ESET x to 0.\u003Cbr\u003ESET BYE to 0.\u003Cbr\u003E\tUNTIL x =1{\u003Cbr\u003E\tSET INDEX to 0.\u003Cbr\u003E\tHALTLIST:CLEAR().\u003Cbr\u003E\u003Cbr\u003EUNTIL INDEX \u0026gt;= refmod:LENGTH{\u003Cbr\u003E\u003Cbr\u003E\t\t\tSET TIMECHECK TO TIME:SECONDS.\u003Cbr\u003E  \t\t\tWAIT UNTIL TIME:SECONDS \u0026gt; TIMECHECK. \t\u003Cbr\u003E\u003Cbr\u003E\t\t\t\t//SETTING UP ANGLE DETECTION AND ACCELERATION\u003Cbr\u003E\t\t\t\tSET RMOD TO refmod[INDEX].\u003Cbr\u003E\t\t\t\tSET CURRENTPOS TO RMOD:GETFIELD(FVAL). \u003Cbr\u003E\t\t\t\tSET DELTA TO round(ABS(CURRENTPOS - ANGLE ),2).\t\u003Cbr\u003E\t\t\t\tRMOD:SETFIELD(\u0022fine speed\u0022, -0.08).    \u003Cbr\u003E\t\t\t\tRMOD:SETFIELD(\u0022coarse speed\u0022, MIN(1,DELTA*.12)).\u003Cbr\u003E\t\t\t\tIF SEL = 6 {RMOD:SETFIELD(\u0022coarse speed\u0022,2).}//NO ACCELERATION FOR EXTENDATRONS\u003Cbr\u003E\u003Cbr\u003E\t\t\t\t\tIF DELTA \u0026lt;=0.1 { //IF WE HAVE REACH SETPOINT THEN STOP\u003Cbr\u003E      \t\t\t\t\tRMOD:DOACTION(\u0022MOVE -\u0022,false).\u003Cbr\u003E      \t\t\t\t\tRMOD:DOACTION(\u0022MOVE \u002B\u0022,false).\u003Cbr\u003E\t\t\t\t\tHALTLIST:ADD(INDEX). //ADD THE INDEX NUMBER OF THE STOPPED DEVICE TO A LIST\u003Cbr\u003E\t\t\t\t\t\t\t\t\t\t}\t\t\u003Cbr\u003E\u003Cbr\u003E    \t\t\t\t\t\tELSE IF CURRENTPOS \u0026lt; ANGLE { //MOVE \u002B\u003Cbr\u003E      \t\t\t\t\t\tRMOD:DOACTION(\u0022MOVE -\u0022,false).\u003Cbr\u003E      \t\t\t\t\t\tRMOD:DOACTION(\u0022MOVE \u002B\u0022,true).}\u003Cbr\u003E\u003Cbr\u003E\t\t\t\t\t\t\tELSE IF CURRENTPOS \u0026gt; ANGLE {  //MOVE -\u003Cbr\u003E      \t\t\t\t\t\t\tRMOD:DOACTION(\u0022MOVE -\u0022,true).\u003Cbr\u003E      \t\t\t\t\t\t\tRMOD:DOACTION(\u0022MOVE \u002B\u0022,false).}     \u003Cbr\u003E\u003Cbr\u003ESET INDEX TO INDEX \u002B 1.\u003Cbr\u003E\t\t\t\t\t     }\u003Cbr\u003EIF HALTLIST:LENGTH \u0026gt;= REFMOD:LENGTH {SET X TO X\u002B1.} //IF ALL THE SERVOS HAVE REACHED THE SETPOINT THEN BREAK.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\t    }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"CorBlimey","CreatedById":134058,"CreatedDateTime":"2015-01-16T17:22:27Z","Content":"\n\u003Cp\u003Eis kOS based on a particular language and syntax?\u003C/p\u003E\n"}]}