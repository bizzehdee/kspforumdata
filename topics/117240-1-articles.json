{"TopicId":117240,"ForumId":36,"TopicTitle":"Looking for a better way to know if the UI is visible or not","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-30T05:47:37Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-30T05:47:37Z","Content":"\n\u003Cp\u003EI need to know whether the UI is being displayed or not. For now, I\u0027m using the following code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Epublic class UICLASS: MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003Eprivate bool uiVisible = true;\u003Cbr\u003Eprivate static KeyCode toggleUIKeycode = KeyCode.F2;\u003Cbr\u003E\u003Cbr\u003E        public void Update ()\u003Cbr\u003E        {\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E            if (Input.GetKeyDown (toggleUIKeycode))\u003Cbr\u003E                uiVisible = !uiVisible;\u003Cbr\u003E        }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m sure there is a better way, since this will not work if there is another mod which issues the following calls:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EGameEvents.onHideUI.Fire ();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EGameEvents.onShowUI.Fire ();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo far, I haven\u0027t found it, and was hoping someone could point me in the right direction.\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-30T11:02:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Thomas P.\u0022 data-cite=\u0022Thomas P.\u0022\u003E\u003Cdiv\u003EThis would be my suggestion:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class UICLASS : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    private bool uiVisible = true;\u003Cbr\u003E\u003Cbr\u003E    public void Awake ()\u003Cbr\u003E    {\u003Cbr\u003E        GameEvents.onShowUI.Add(onShowUI);\u003Cbr\u003E        GameEvents.onHideUI.Add(onHideUI);\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    private void onShowUI ()\u003Cbr\u003E    {\u003Cbr\u003E        uiVisible = true;\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    private void onHideUI ()\u003Cbr\u003E    {\u003Cbr\u003E        uiVisible = false;\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    public void OnDestroy ()\u003Cbr\u003E    {\u003Cbr\u003E        GameEvents.onShowUI.Remove(onShowUI);\u003Cbr\u003E        GameEvents.onHideUI.Remove(onHideUI);\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis runs when the UI is activated or deactivated, either with F2, another key or by code. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks.\u003C/p\u003E\u003Cp\u003EI decided to keep this as a separate class to make it cleaner, so I had to add two functions to get and set the flag:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public bool isVisible()\u003Cbr\u003E        {\u003Cbr\u003E            return uiVisible;\u003Cbr\u003E        }\u003Cbr\u003E        public void setVisible(bool \u003Cbr\u003E        {\u003Cbr\u003E            uiVisible = b;\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI had to add two functions, since my original code was copied from the main class of my mod.\u003C/p\u003E\u003Cp\u003EOne thing though, the Awake function isn\u0027t being called, I have to call it myself from inside the main Awake function.\u003C/p\u003E\u003Cp\u003EDo I need to put something in front of this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\tpublic class UICLASS: MonoBehaviour\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-30T13:09:57Z\u0022 title=\u002207/30/2015 01:09  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 30, 2015\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"}]}