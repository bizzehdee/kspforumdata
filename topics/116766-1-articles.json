{"TopicId":116766,"ForumId":15,"TopicTitle":"[Answered] Strange off-angled lighting on rigged mesh","CreatedByName":"Ven","CreatedById":109931,"CreatedDateTime":"2015-07-24T22:14:37Z","PageNum":1,"Articles":[{"CreatedByName":"Ven","CreatedById":109931,"CreatedDateTime":"2015-07-24T22:14:37Z","Content":"After managing to rig a new dish, I ran into this problem:\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/Z1Cbv)\n\nIt seems that the rigged mesh (the mesh between the support arms) is reflecting light at about 90 degrees of where it should when it is folded, but when it is deployed the effect isn\u0027t present.\n\nI rigged the dish with five separate bones (each of which control two loops of vertices), which I then moved and scaled to match the Position of the arms.\n\nAnd so far this effect only shows up in Unity.\n\nThis isn\u0027t a problem with normals, or edge splitting.\n\n[Link to the blend file](http://www./download/cd5j6d65l810u3s/Antenna.zip)\n\nThanks for reading!\n\n**Edited \u003Ctime datetime=\u00222015-07-28T06:39:17Z\u0022 title=\u002207/28/2015 06:39  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 28, 2015\u003C/time\u003E by Ven**"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-25T00:47:46Z","Content":"Urgh, I\u0027ve had this with borked normals on a skinned mesh before. The only way I found to un-bork it was to strip off the skinning stuff (I work in 3D Studio), sorting transform and normals out with a Reset XForm, then re-do the skin. It was painful. I don\u0027t know how that translates into Blender terminology, I\u0027m afraid. Good luck, but that\u0027s almost the exact same thing I struggled with, so hopefully I\u0027ve given you enough to go on. Love your work!"},{"CreatedByName":"Ven","CreatedById":109931,"CreatedDateTime":"2015-07-25T06:15:15Z","Content":"\u003E \n\u003E Urgh, I\u0027ve had this with borked normals on a skinned mesh before. The only way I found to un-bork it was to strip off the skinning stuff (I work in 3D Studio), sorting transform and normals out with a Reset XForm, then re-do the skin. It was painful. I don\u0027t know how that translates into Blender terminology, I\u0027m afraid. Good luck, but that\u0027s almost the exact same thing I struggled with, so hopefully I\u0027ve given you enough to go on. Love your work!\n\nUnfortunately I don\u0027t really know what you mean by \u0027skinning\u0027 (the modifier?). As far as the transform and normals, I tried applying scale and rotation along with recalculating normals, but to no avail.\n\nugh, I have a feeling like I\u0027ll wander across the solution several months from now while looking for something else. Vertex poling... \\*shivers\\*.\n\nAnyways, thanks for replying, and do you by any chance know what this is called? (or maybe what it might be called?)\n\n**Edited \u003Ctime datetime=\u00222015-07-25T06:21:56Z\u0022 title=\u002207/25/2015 06:21  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 25, 2015\u003C/time\u003E by Ven**"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-25T09:24:18Z","Content":"Sorry; yeah, I mean the modifier. \n\nThat\u0027s always the way! It took me ages to figure out on the first track unit I made. I used to have to export it with normals flipped, and then it would always look way too dark. I realised something weird had happened to it before I applied the skin modifier, which even if I fixed, if I applied the same copy of the modifier back on, would break it again. Most frustrating.\n\nI\u0027m afraid I\u0027ve no idea. Makes it a pain to research, doesn\u0027t it. I know it was related to normals. More than that, I have no idea if there is a technical term for it.\n\nSkinned meshes can be a nightmare. Make sure you set the root bone in the Skinned Mesh Renderer component to and object with scale 1,1,1. Otherwise, the extents will look fine, but the values will be way out of whack and KSP may think it\u0027s 50m wide. Also, you may need the Part Icon Fixer plugin to fix the editor icon, which will very possibly end up tiny.You may know all this already, but I\u0027ll offer it just in case it saves you a headache, as well as future reference.\n\nGood luck!"},{"CreatedByName":"Ven","CreatedById":109931,"CreatedDateTime":"2015-07-26T01:24:14Z","Content":"\u003E \n\u003E Sorry; yeah, I mean the modifier. \n\u003E That\u0027s always the way! It took me ages to figure out on the first track unit I made. I used to have to export it with normals flipped, and then it would always look way too dark. I realised something weird had happened to it before I applied the skin modifier, which even if I fixed, if I applied the same copy of the modifier back on, would break it again. Most frustrating.\n\u003E \n\u003E I\u0027m afraid I\u0027ve no idea. Makes it a pain to research, doesn\u0027t it. I know it was related to normals. More than that, I have no idea if there is a technical term for it.\n\u003E \n\u003E Skinned meshes can be a nightmare. Make sure you set the root bone in the Skinned Mesh Renderer component to and object with scale 1,1,1. Otherwise, the extents will look fine, but the values will be way out of whack and KSP may think it\u0027s 50m wide. Also, you may need the Part Icon Fixer plugin to fix the editor icon, which will very possibly end up tiny.You may know all this already, but I\u0027ll offer it just in case it saves you a headache, as well as future reference.\n\u003E \n\u003E Good luck!\n\nHmm... Well applying scale doesn\u0027t fix the problem, and I didn\u0027t use a skinning modifier on this model. \n\nWeirdly enough though, the bounding box for the rigged mesh scales massively through the animation, even after I set the scale for it and the armature. Could that be part of the problem?"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-26T03:23:56Z","Content":"I\u0027d ditch the bones that you move and scale. Bind (Armature modifier in blender) the dish mesh to the arms directly (use bone for each arm if blender doesn\u0027t allow skin bind to other mesh objects) and animate the arms like you already have. use bind weights to fix any interpenetration in the antenna mesh."},{"CreatedByName":"Ven","CreatedById":109931,"CreatedDateTime":"2015-07-28T06:38:32Z","Content":"Yup, after re-rigging everything (as per nil2work\u0027s suggestion), the problem is gone. Thanks for the help!"},{"CreatedByName":"Recognize-Me-","CreatedById":108232,"CreatedDateTime":"2015-07-28T07:02:27Z","Content":"You are amazing Ven! I love your work, that antenna looks amazing man! I would pay you to teach me how to model, texture, animate parts."},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-28T20:20:04Z","Content":"Looked closely at your original blend file, my best guess regarding cause is the bone scaling at the retracted position caused the vert loops at the rim to cross or get too close, as result the normals averging in that situation gave you the odd falloff to black. splitting the smoothing group (max speak), creasing the edge? in blender might have been an easier solution. I\u0027m only a noob with blender so can\u0027t say for sure."}]}