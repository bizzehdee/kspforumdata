{"TopicId":144422,"ForumId":35,"TopicTitle":"Multiple KSP Directories Script","CreatedByName":"pogrmman","CreatedById":166808,"CreatedDateTime":"2016-07-23T21:22:55Z","PageNum":1,"Articles":[{"CreatedByName":"pogrmman","CreatedById":166808,"CreatedDateTime":"2016-07-23T21:22:55Z","Content":"\n\u003Cp\u003E\nHi everybody!\n\u003C/p\u003E\n\u003Cp\u003E\nI wrote a simple Windows shell script that makes a new vanilla installation of KSP by making hardlinks to an existing KSP directory. This allows you to have multiple installations without actually having to install it multiple times. I use this to have multiple sets of mods without actually installing KSP multiple times. It works well for me.\n\u003C/p\u003E\n\u003Cp\u003E\nIt is \u003Cem\u003Edesigned to be run from the command line\u003C/em\u003E. Due to its use of mklink, it needs \u003Cstrong\u003Eadministrator privileges\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is the code for it (spoiler-ed because it is kind of long):\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\n@echo off\n\nREM This program is to create a vanilla installation of Kerbal Space Program by \nREM making links to an existing installation. This allows you to save space over\nREM installing KSP multiple times.\n\nset me=%~0\nset menoext=%~n0\nset parent=%~dp0\nif [%2]==[] (\n    if [%1]==[] (goto usage)\n    if \u0022%%1\u0022==\u0022/^?\u0022 (goto usage) else (\n        echo Invalid Syntax.\n        echo.\n        goto usage\n        )\n    ) else (goto program)\n\n:program\nset sourcedir=%~1\nset destdir=%~2\necho Making new directory.\nmkdir \u0022%destdir%\u0022\ncd \u0022%sourcedir%\u0022\necho Making hardlinks to files.\nfor %%G in (.\\*) do (mklink /h \u0022%destdir%\\%%~nxG\u0022 \u0022%%G\u0022 \u0026gt;nul)\necho Linking folders.\ncd %parent%\ncd \u0022%destdir%\u0022\nmkdir GameData\nmklink /J .\\GameData\\Squad \u0022%sourcedir%\\GameData\\Squad\u0022 \u0026gt;nul\nmklink /J Internals \u0022%sourcedir%\\Internals\u0022 \u0026gt;nul\nmklink /J KSP_Data \u0022%sourcedir%\\KSP_Data\u0022 \u0026gt;nul\nmklink /J KSP_x64_Data \u0022%sourcedir%\\KSP_x64_Data\u0022 \u0026gt;nul\nmklink /J Launcher_Data \u0022%sourcedir%\\Launcher_Data\u0022 \u0026gt;nul\nmkdir Logs\nmklink /J Parts \u0022%sourcedir%\\Parts\u0022 \u0026gt;nul\nmklink /J Plugin_Data \u0022%sourcedir%\\Plugin_Data\u0022 \u0026gt;nul \nmklink /J Plugins \u0022%sourcedir%\\Plugins\u0022 \u0026gt;nul\nmklink /J Resources \u0022%sourcedir%\\Resources\u0022 \u0026gt;nul\nmkdir saves\nmklink /J .\\saves\\scenarios \u0022%sourcedir%\\saves\\scenarios\u0022 \u0026gt;nul \nmklink /J .\\saves\\training \u0022%sourcedir%\\saves\\training\u0022 \u0026gt;nul\nmkdir Screenshots\nmklink /J Ships \u0022%sourcedir%\\Ships\u0022 \u0026gt;nul\nmklink /J sounds \u0022%sourcedir%\\sounds\u0022 \u0026gt;nul\nmkdir thumbs\necho Done!\ncd %parent%\ngoto :EOF\n\n:usage\necho    Makes a new vanilla Kerbal Space Program installation using links to\necho    another installation. This allows you to have multiple KSP installations\necho    wihout having to waste the space for multiple installations.\necho.\necho    Command Usage:\necho.\necho        %me% [/^?] Source Destination\necho.\necho.       /^?             Display this help.\necho        Source         Specifies KSP directory to mirror.\necho        Destination    Specifies the new KSP directory.\ngoto :EOF\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cu\u003ETo use this script:\u003C/u\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nCopy the code in the spoiler above.\n\u003C/li\u003E\n\u003Cli\u003E\nPaste into a text editor, like Notepad.\n\u003C/li\u003E\n\u003Cli\u003E\nSave the file with whatever name you want, wherever you want. Select \u0022all file types\u0022 and \u003Cstrong\u003Echange the part that says \u0022.txt\u0022 to \u0022.bat\u0022\u003C/strong\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nOpen an \u003Cstrong\u003Eadministrator\u003C/strong\u003E command prompt.\n\u003C/li\u003E\n\u003Cli\u003E\nNavigate to where you saved the file using \u0022cd\u0022\n\u003C/li\u003E\n\u003Cli\u003E\nType the name of the file. Then, type the location of the KSP installation you are copying (i.e. \u0022C:\\Kerbal Space Program\u0022). \u003Cstrong\u003EIf this contains spaces, it must be in quotes. \u003C/strong\u003EFinish the command with the folder of the new KSP installation. \u003Cstrong\u003E\u003Cem\u003EType /? after the name of the file for help.\u003C/em\u003E\u003C/strong\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nYou should now have a second KSP installation, that has no mods.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFeel free to modify and distribute this code as you see fit. I\u0027m not super experienced with batch files (I mostly use Python), so \u003Cem\u003Eany input is appreciated!\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-22T21:16:03Z\u0022 title=\u002209/22/2016 09:16  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 22, 2016\u003C/time\u003E by pogrmman\u003C/strong\u003E\n\u003Cbr\u003EFixing bug pointed out below\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-09-14T02:16:34Z","Content":"\n\u003Cp\u003E\nSaved it as ksplink.cmd (works same as .bat)\n\u003C/p\u003E\n\u003Cp\u003E\nFound a bug:\n\u003C/p\u003E\n\u003Cp\u003E\nIf I use the following command:\n\u003C/p\u003E\n\u003Cp\u003E\nksplink.cmd KSP_1.1.3_dev jbb2\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nit will create the directory \u0022jbb2\u0022 inside the source directory\n\u003C/p\u003E\n\u003Cp\u003E\nTo avoid, I needed to put in the drive letter, or at least a backslash to start a complete path.\n\u003C/p\u003E\n\u003Cp\u003E\nI expected it to create the jbb2 directory in my current directory\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOther than that, worked well\n\u003C/p\u003E\n"},{"CreatedByName":"pogrmman","CreatedById":166808,"CreatedDateTime":"2016-09-22T21:12:27Z","Content":"\n\u003Cp\u003E\nThanks for the feedback. I\u0027ve edited the main script above to fix the error.\n\u003C/p\u003E\n"}]}