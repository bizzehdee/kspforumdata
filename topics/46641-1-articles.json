{"TopicId":46641,"ForumId":50,"TopicTitle":"A crash-course in model nodes [tutorial].","CreatedByName":"ThePsuedoMonkey","CreatedById":58589,"CreatedDateTime":"2013-09-27T00:03:05Z","PageNum":1,"Articles":[{"CreatedByName":"ThePsuedoMonkey","CreatedById":58589,"CreatedDateTime":"2013-09-27T00:03:05Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003EWhen 0.20 was released we were given a \u003C/p\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/34013-0-20-PartTools-GameDatabase-and-new-features\u0022 rel=\u0022external nofollow\u0022\u003Efew tools for addon development\u003C/a\u003E, one of which was called \u0022MODEL Nodes.\u0022 This allows multiple parts models to be loaded as a single part, gives options to reposition, rescale, and rotate the models, and even the ability to overload their textures. Since this thing is seen as a single part there will be no physics calculations between the models in the node, which has the obvious application of improving performance of large vessels. This tool is called from a part config file, in place of the standard model definitions.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EPremade model nodes\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/48541-Welded-Thrust-plates-T8-Mega-Lift-Systems-2-0?highlight=weld\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/48541-Welded-Thrust-plates-T8-Mega-Lift-Systems-2-0?highlight=weld\u0022 rel=\u0022external nofollow\u0022\u003EKadrons\u003C/a\u003E\u003C/div\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/48541-Welded-Thrust-plates-T8-Mega-Lift-Systems-2-0?highlight=weld\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cdiv\u003E thrust plates.\u003C/div\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/38577-0-21-UbioZur-Welding-Ltd-Lower-your-part-count\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/38577-0-21-UbioZur-Welding-Ltd-Lower-your-part-count\u0022 rel=\u0022external nofollow\u0022\u003EUbioZur\u003C/a\u003E\u003C/div\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/38577-0-21-UbioZur-Welding-Ltd-Lower-your-part-count\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cdiv\u003E has a bunch of assemblies and has been developing a plugin to do the work for you.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EA few of \u003C/div\u003E\u003Ca href=\u0022https://docs.google.com/file/d/0B6828vVl_-ZoSGF0LTlJYW90Smc/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://docs.google.com/file/d/0B6828vVl_-ZoSGF0LTlJYW90Smc/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Emy\u003C/a\u003E\u003C/div\u003E\u003Ca href=\u0022https://docs.google.com/file/d/0B6828vVl_-ZoSGF0LTlJYW90Smc/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cdiv\u003E old ones.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EBuilding from scratch:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003EFor a relatively simple demonstration, lets combine a structural quad adapter with some aerospikes. \u003C/p\u003E\u003Ca href=\u0022http://imgur.com/5wZsoyS\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/5wZsoySl.png\u0022 alt=\u00225wZsoySl.png\u0022\u003E\u003C/a\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe first thing we need to know is that the position values of a model node are relative to its center of mass, and each model is centered on its own center of mass. To determine where to position the models in the node, we can open the config of the Toroidal Aerospike and check its node definitions\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Enode_stack_top = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis tells us that the aerospikes only attachment node is at its center of mass (first 3 numbers), and faces straight up (4th-6th numbers). The position values are in meters in the X,Y,Z coordinates, and the direction is a vector with the X,Y,Z components. Now we need to know how to place the aerospikes relative to the structural piece, so we look at its node definitions\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Enode_stack_top = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 2\u003Cp\u003Enode_stack_bottom01 = 0.625, -0.75, 0.625, 0.0, 1.0, 0.0, 1\u003C/p\u003E\u003Cp\u003Enode_stack_bottom02 = 0.625, -0.75, -0.625, 0.0, 1.0, 0.0, 1\u003C/p\u003E\u003Cp\u003Enode_stack_bottom03 = -0.625, -0.75, 0.625, 0.0, 1.0, 0.0, 1\u003C/p\u003E\u003Cp\u003Enode_stack_bottom04 = -0.625, -0.75, -0.625, 0.0, 1.0, 0.0, 1\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you looked closely, you saw a seventh number, which just refers to the visual size of the attachment node in the VAB/SPH. Once again, the top node is at the models center of mass, but the bottom nodes are 0.75m below it. The Y-values of the aerospikes and the adapter must be separated by the total distance between their centers of mass (i.e. 0.0 \u002B [0.0 - -0.75] = 0.75), while the X and Y values should correspond to the offsets in the adapters attachment nodes. The last piece of information we need is where to define the center of mass; the aerospikes are 6T and the adaptor is 0.2T, so the CoM is [0.75 * 0.2 / 6.2 = 0.02419] above the Aerospikes. Lets round this to 0.025 for simplicity and we\u0027ve determined that the positions of the models are\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eadaptor = 0.0, 0.725, 0.0\u003Cp\u003Eaerospike1 = 0.625, -0.025, 0.625\u003C/p\u003E\u003Cp\u003Eaerospike2 = 0.625, -0.025, -0.625\u003C/p\u003E\u003Cp\u003Eaerospike3 = -0.625, -0.025, -0.625\u003C/p\u003E\u003Cp\u003Eaerospike4 = -0.625, -0.025, 0.625\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENow we just convert this data into the model node format, and include the rotation of the aerospikes that symmetry would create. It will be important later on that rotation is applied in the order Z,X,Y.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/adapterLargeSmallQuad/model\u003Cbr\u003E        position = 0,0.725,0\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = 0.625, -0.025, 0.625\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = 0.625, -0.025, -0.625\u003Cbr\u003E        rotation = 0, 90, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = -0.625, -0.025, 0.625\u003Cbr\u003E        rotation = 0, 180, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = -0.625, -0.025, -0.625\u003Cbr\u003E        rotation = 0, 270, 0\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you were to load this into a part config, you\u0027d find that the aerospikes are a little smaller than they should be: this is because their model was made before the switch to 1.25m parts so they must be rescaled. You will also find that this engine doesn\u0027t overheat as much as its counterpart. The position of the top attachment node should reflect its original position. The FX definitions will be mimicked for each engine, so we do not need to change them from the default settings in the Aerospike config. The cost, mass, and engine properties will need to be updated as well. When we fix these issues, the part config should look similar to this\u003C/p\u003E\u003Cp\u003E-------------------------------------------------------------\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPART\u003Cbr\u003E{\u003Cbr\u003Ename = ZWeldedEngineA\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = ThePsuedoMonkey\u003Cbr\u003E\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = 0.625, -0.025, 0.625\u003Cbr\u003E        scale = 1.25, 1.25, 1.25\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = -0.625, -0.025, 0.625\u003Cbr\u003E        scale = 1.25, 1.25, 1.25\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = 0.625, -0.025, -0.625\u003Cbr\u003E        scale = 1.25, 1.25, 1.25\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Engine/toroidalAerospike/model\u003Cbr\u003E        position = -0.625, -0.025, -0.625\u003Cbr\u003E        scale = 1.25, 1.25, 1.25\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/adapterLargeSmallQuad/model\u003Cbr\u003E        position = 0.0, 0.725, 0.0\u003Cbr\u003E        scale = 1, 1, 1\u003Cbr\u003E        rotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ErescaleFactor = 1\u003Cbr\u003E\u003Cbr\u003E// --- node definitions ---\u003Cbr\u003Enode_stack_top = 0.0, 0.725, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003E// --- FX definitions ---\u003Cbr\u003Efx_exhaustFlame_blue = 0.0, -0.0, 0.0, 0.0, 1.0, 0.0, running\u003Cbr\u003Efx_exhaustLight_blue = 0.0, -0.0, 0.0, 0.0, 0.0, 1.0, running\u003Cbr\u003Efx_smokeTrail_light = 0.0, -0.0, 0.0, 0.0, 1.0, 0.0, running\u003Cbr\u003Efx_exhaustSparks_flameout = 0.0, -0.0, 0.0, 0.0, 1.0, 0.0, flameout\u003Cbr\u003E// --- Sound FX definition ---\u003Cbr\u003Esound_vent_medium = engage\u003Cbr\u003Esound_rocket_hard = running\u003Cbr\u003Esound_vent_soft = disengage\u003Cbr\u003Esound_explosion_low = flameout\u003Cbr\u003E\u003Cbr\u003Ecost = 4200\u003Cbr\u003Ecategory = Propulsion\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = Quadraspike\u003Cbr\u003Emanufacturer = KittyHawk United\u003Cbr\u003Edescription = Just a bunch of Aerospikes welded together, move along people.\u003Cbr\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003Cbr\u003EattachRules = 1,0,1,0,0\u003Cbr\u003E\u003Cbr\u003Emass = 6.2\u003Cbr\u003EdragModelType = default\u003Cbr\u003EcrashTolerance = 12\u003Cbr\u003EmaxTemp = 3400\u003Cbr\u003EbreakingForce = 50\u003Cbr\u003EbreakingTorque = 50\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E        name = ModuleEngines\u003Cbr\u003E        thrustVectorTransformName = thrustTransform\u003Cbr\u003E        exhaustDamage = True\u003Cbr\u003E        ignitionThreshold = 0.1\u003Cbr\u003E        minThrust = 0\u003Cbr\u003E        maxThrust = 700\u003Cbr\u003E        heatProduction = 600\u003Cbr\u003E        fxOffset = 0, 0, 0.25\u003Cbr\u003E        PROPELLANT\u003Cbr\u003E        {\u003Cbr\u003E                name = LiquidFuel\u003Cbr\u003E                ratio = 0.9\u003Cbr\u003E                DrawGauge = True\u003Cbr\u003E        }\u003Cbr\u003E        PROPELLANT\u003Cbr\u003E        {\u003Cbr\u003E         name = Oxidizer\u003Cbr\u003E         ratio = 1.1\u003Cbr\u003E        }\u003Cbr\u003E        atmosphereCurve\u003Cbr\u003E        {\u003Cbr\u003E         key = 0 390\u003Cbr\u003E         key = 1 388\u003Cbr\u003E        }\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E      name = ModuleAnimateHeat\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn essence, you can think of it as modifying a part config file and telling it where to place the models.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EBuilding from a *.Craft file\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003ERocket engines are cool and all, but you know what\u0027s awesome? Motorbikes.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/pBjCsIz\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/pBjCsIzl.png\u0022 alt=\u0022pBjCsIzl.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you open the craft file, you get a lot of data that you don\u0027t really need and some that needs interpretation. For instance, here is the data on the probe core.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPART\u003Cbr\u003E{\u003Cbr\u003E\tpart = probeCoreCube_4294680264\u003Cbr\u003E\tpartName = Part\u003Cbr\u003E\tpos = -0.1005701,5.050443,0.2725831\u003Cbr\u003E\trot = 0.7071068,1.256074E-15,1.256074E-15,0.7071068\u003Cbr\u003E\tattRot = -3.247939E-15,-4.385655E-23,1.776357E-15,0.9999999\u003Cbr\u003E\tmir = 1,1,1\u003Cbr\u003E\tistg = 0\u003Cbr\u003E\tdstg = 0\u003Cbr\u003E\tsidx = -1\u003Cbr\u003E\tsqor = -1\u003Cbr\u003E\tattm = 0\u003Cbr\u003E\tlink = SmallGearBay_4294680234\u003Cbr\u003E\tEVENTS\u003Cbr\u003E\t{\u003Cbr\u003E\t}\u003Cbr\u003E\tACTIONS\u003Cbr\u003E\t{\u003Cbr\u003E\t}\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleCommand\u003Cbr\u003E\t\tisEnabled = True\u003Cbr\u003E\t\tcontrolSrcStatusText = \u003Cbr\u003E\t\tEVENTS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tMakeReference\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tactive = True\u003Cbr\u003E\t\t\t\tguiActive = True\u003Cbr\u003E\t\t\t\tguiIcon = Control From Here\u003Cbr\u003E\t\t\t\tguiName = Control From Here\u003Cbr\u003E\t\t\t\tcategory = Control From Here\u003Cbr\u003E\t\t\t\tguiActiveUnfocused = False\u003Cbr\u003E\t\t\t\tunfocusedRange = 2\u003Cbr\u003E\t\t\t\texternalToEVAOnly = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tRenameVessel\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tactive = True\u003Cbr\u003E\t\t\t\tguiActive = True\u003Cbr\u003E\t\t\t\tguiIcon = Rename Vessel\u003Cbr\u003E\t\t\t\tguiName = Rename Vessel\u003Cbr\u003E\t\t\t\tcategory = Rename Vessel\u003Cbr\u003E\t\t\t\tguiActiveUnfocused = False\u003Cbr\u003E\t\t\t\tunfocusedRange = 2\u003Cbr\u003E\t\t\t\texternalToEVAOnly = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tACTIONS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleReactionWheel\u003Cbr\u003E\t\tisEnabled = True\u003Cbr\u003E\t\tstateString = Active\u003Cbr\u003E\t\tWheelState = Active\u003Cbr\u003E\t\tEVENTS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tOnToggle\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tactive = True\u003Cbr\u003E\t\t\t\tguiActive = True\u003Cbr\u003E\t\t\t\tguiIcon = Toggle Torque\u003Cbr\u003E\t\t\t\tguiName = Toggle Torque\u003Cbr\u003E\t\t\t\tcategory = Toggle Torque\u003Cbr\u003E\t\t\t\tguiActiveUnfocused = False\u003Cbr\u003E\t\t\t\tunfocusedRange = 2\u003Cbr\u003E\t\t\t\texternalToEVAOnly = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tACTIONS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tActivate\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tactionGroup = None\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tDeactivate\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tactionGroup = None\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tToggle\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tactionGroup = None\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleSAS\u003Cbr\u003E\t\tisEnabled = True\u003Cbr\u003E\t\tEVENTS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tACTIONS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleTripLogger\u003Cbr\u003E\t\tisEnabled = False\u003Cbr\u003E\t\tEVENTS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tACTIONS\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tSurfaced\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tFlew\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tFlewBy\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tOrbited\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tSubOrbited\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe pertinent data approximates to\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Epart = probeCoreCube_4294680264\u003Cp\u003E pos = -0.1005701,5.050443,0.2725831\u003C/p\u003E\u003Cp\u003E rot = sqrt(2)/2, ~0, ~0, sqrt(2)/2\u003C/p\u003E\u003Cp\u003E attRot = ~0, ~0, ~0, ~1\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s listed position is relative to the center of the floor in the SPH, and the rotation values are split into two fields and appear to be given as either the sine or cosine of an angle. I\u0027m not exactly sure how to interpret it, so I\u0027ll just ignore it for now and just use the position information and knowledge of the directory structure to get a starting point.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Command/probeCoreCube/model\u003Cbr\u003E        position = -0.1005701, 5.050443, 0.2725831\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Wheel/SmallGearBay/model\u003Cbr\u003E        position = -0.10057,4.642117,0.4109806\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Utility/spotLight1/model\u003Cbr\u003E        position = -0.1005701,5.039511,0.7625586\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/structuralPanel1/model\u003Cbr\u003E        position = -0.10057,4.713505,-0.807771\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Command/sasModule/model\u003Cbr\u003E        position = -0.10057,4.923228,-0.807772\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Command/seatExternalCmd/model\u003Cbr\u003E        position = -0.10057,5.274733,-0.6029134\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.6008557,4.713508,-1.33992\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.7094498,4.713508,-1.578224\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.8164898,4.713508,-1.813576\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.923505,4.713508,-2.050247\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.923505,4.713508,-2.307719\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.9235049,4.713508,-2.565187\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.9235051,4.476118,-2.586868\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Wheel/wheelMed/model\u003Cbr\u003E        position = -0.8157229,4.476118,-2.54761\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.8229024,4.923228,-0.8520064\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.8846188,4.692904,-0.8666103\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -0.9512572,4.444208,-0.8666108\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E        position = -1.017895,4.195512,-0.8666106\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Electrical/RTG/model\u003Cbr\u003E        position = -0.5352382,4.713508,-0.8125257\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E        model = Squad/Parts/Electrical/RTG/model\u003Cbr\u003E        position = 0.3340983,4.713508,-0.8125257\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe first task is to calculate the CoM and then convert these values using that information. The CoM for those values would be at (0.10057,4.863508, -0.76329), so we subtract that from each coordinate and check the result in the SPH. It turns out that the Y and Z coordinates were flipped, and when we fix that we see that the Z has been mirrored, so multiply those by -1 and all of the parts should be in their proper position. Now we need to deal with rotation. The axes in the SPH are {X = parallel to floor and entrance, Y = parallel to floor and walls, Z = parallel to walls and entrance} and rotations are in degrees and seem to resolve in the order Z, X, Y. Put it together and what have you got?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPART\u003Cbr\u003E{\u003Cbr\u003Ename = ZWeldedCommandB\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = ThePsuedoMonkey\u003Cbr\u003E\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Command/probeCoreCube/model\u003Cbr\u003E    position = 0.0, 1.03590, -0.1870\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Wheel/SmallGearBay/model\u003Cbr\u003E    position = 0.0, 1.17225, 0.2214\u003Cbr\u003E\trotation = 90, 0, 180\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Utility/spotLight1/model\u003Cbr\u003E    position = 0.0, 1.52585, -0.1760\u003Cbr\u003E\trotation = 15, 0, 180\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/structuralPanel1/model\u003Cbr\u003E    position = 0.0, -0.0445, 0.15\u003Cbr\u003E\trotation = 90, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Command/sasModule/model\u003Cbr\u003E    position = 0.0, -0.0445, -0.0597\u003Cbr\u003E\trotation = 90, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Command/seatExternalCmd/model\u003Cbr\u003E    position = 0.0, 0.1604, -0.4112\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.50025, -0.5767, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.60885, -0.815, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.71590, -1.0503, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.82290, -1.287, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.82290, -1.5445, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.82290, -1.8025, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.82290, -1.8236, 0.3874\u003Cbr\u003E\trotation = 90, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Wheel/wheelMed/model\u003Cbr\u003E    position = -0.7151, -1.7843, 0.3874\u003Cbr\u003E\trotation = 90, 0, 180\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.72230, -0.0888, -0.0597\u003Cbr\u003E\trotation = 0, 0, 90\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.78700, -0.1035, 0.1706\u003Cbr\u003E\trotation = 0, 80, 90\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.85065, -0.1035, 0.4193\u003Cbr\u003E\trotation = 0, 80, 90\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Structural/strutCube/model\u003Cbr\u003E    position = -0.91730, -0.1035, 0.668\u003Cbr\u003E\trotation = 0, 80, 90\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Electrical/RTG/model\u003Cbr\u003E    position = -0.435, -0.05, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E    model = Squad/Parts/Electrical/RTG/model\u003Cbr\u003E    position = 0.435, -0.05, 0.15\u003Cbr\u003E\trotation = 0, 0, 0\u003Cbr\u003E}\u003Cbr\u003ErescaleFactor = 1\u003Cbr\u003E\u003Cbr\u003E// --- node definitions ---\u003Cbr\u003Enode_stack_top = 0.0, -0.072, 0.15, 0.0, 0.0, 1.0, 0\u003Cbr\u003E\u003Cbr\u003Ecost = 5110\u003Cbr\u003Ecategory = Pods\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = KU Motorbike\u003Cbr\u003Emanufacturer = KittyHawk United\u003Cbr\u003Edescription = Not sure if functional...\u003Cbr\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003Cbr\u003EattachRules = 1,0,1,1,0\u003Cbr\u003E\u003Cbr\u003Emass = 0.73\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.2\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 20\u003Cbr\u003EbreakingForce = 200\u003Cbr\u003EbreakingTorque = 200\u003Cbr\u003EmaxTemp = 3500\u003Cbr\u003EvesselType = Rover\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLight\u003Cbr\u003E        lightName = spotlight\u003Cbr\u003E\tuseAnimationDim = true\u003Cbr\u003E\tlightBrightenSpeed = 2.5\u003Cbr\u003E\tlightDimSpeed = 2.5\u003Cbr\u003E\tresourceAmount = 0.04\u003Cbr\u003E\tanimationName = LightAnimation\u003Cbr\u003E\tuseResources = true\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLight\u003Cbr\u003E        lightName = LandingLight\u003Cbr\u003E\tuseAutoDim = true\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLandingGear\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleGenerator\u003Cbr\u003E\tisAlwaysActive = true\u003Cbr\u003E\tOUTPUT_RESOURCE\u003Cbr\u003E\t{\u003Cbr\u003E\t   name = ElectricCharge\u003Cbr\u003E\t   rate = 1.5\u003Cbr\u003E\t}\t\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleWheel\u003Cbr\u003E\thasMotor = true\u003Cbr\u003E\tresourceName = ElectricCharge\u003Cbr\u003E        resourceConsumptionRate = 0.7\u003Cbr\u003E\tcanSteer = true\u003Cbr\u003E\tcontrolAxisType = Forward\u003Cbr\u003E\tsteeringModeType = AutomaticSteer\u003Cbr\u003E\tbrakeTorque = 500\u003Cbr\u003E\tbrakeSpeed = 2.5\u003Cbr\u003E\timpactTolerance = 300\u003Cbr\u003E\toverSpeedDamage = 60\u003Cbr\u003E\u003Cbr\u003E\tWHEEL\u003Cbr\u003E\t{\u003Cbr\u003E\t    wheelName = wheel\u003Cbr\u003E\t    wheelColliderName = wheelCollider\u003Cbr\u003E\t    suspensionTransformName = suspensionTraverse\u003Cbr\u003E\t    suspensionNeutralPointName = suspensionNeutralPoint\u003Cbr\u003E\t    damagedObjectName = bustedwheel\u003Cbr\u003E\t    rotateX = 1\u003Cbr\u003E\t    rotateY = 0\u003Cbr\u003E\t    rotateZ = 0\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\tsteeringCurve\u003Cbr\u003E \t{\u003Cbr\u003E   \t key = 0 10\u003Cbr\u003E\t key = 10 6\u003Cbr\u003E  \t key = 30 2\u003Cbr\u003E \t}\u003Cbr\u003E\u003Cbr\u003E\ttorqueCurve\u003Cbr\u003E\t{\u003Cbr\u003E\t  key = 0 100 0 0 \u003Cbr\u003E\t  key = 2.5 70 0 0\u003Cbr\u003E\t  key = 30 0 0 0\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = FXModuleConstrainPosition\u003Cbr\u003E\tmatchRotation = true\u003Cbr\u003E\tmatchPosition = false\u003Cbr\u003E\tCONSTRAINFX\u003Cbr\u003E\t{\u003Cbr\u003E\t\ttargetName = steering\u003Cbr\u003E\t\tmoversName = trackSteering\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = KerbalSeat\u003Cbr\u003E\tseatPivotName = seatPivot\t\t\u003Cbr\u003E\tejectDirection = 0, 1, 0.2\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleCommand\u003Cbr\u003E\tminimumCrew = 0\u003Cbr\u003E\tRESOURCE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ElectricCharge\u003Cbr\u003E\t\trate = 0.02777778\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleReactionWheel\u003Cbr\u003E\tPitchTorque = 20.5\u003Cbr\u003E\tYawTorque = 20.5\u003Cbr\u003E\tRollTorque = 20.5\u003Cbr\u003E\tRESOURCE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ElectricCharge\u003Cbr\u003E\t\trate = 0.325\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleSAS\u003Cbr\u003E}\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E name = ElectricCharge\u003Cbr\u003E amount = 410\u003Cbr\u003E maxAmount = 410\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003ESomething like this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/5TbIH2Rl\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/5TbIH2Rl.png\u0022 alt=\u00225TbIH2Rl.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ECaveats\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EIf you played with the motorbike, you will notice a few things are very different from the craft we based this on. You are only able to toggle the light on the landing gear, and the driving power is coming from the landing gear instead of the electric wheel. These are both a result of being unable to resolve multiple instances of MODULE functions: since the landing gear was the first applicable model node for each of those in the definitions list, they are only applied to the landing gear. This is also why we didn\u0027t define four engine modules in the quadraspike. There may be ways around this, but I\u0027ve not learned them yet. Another problem is that trying to turn with the wheels doesn\u0027t work, since it is seen as neither behind nor ahead of the CoM, which also prevents some uses of RCS thrusters. Remember that this system isn\u0027t meant to replace the way KSP works, but it may help us take on more grandiose missions with better performance. \u003C/div\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}