{"TopicId":110443,"ForumId":44,"TopicTitle":"How does KSP calculate ISP for engines?","CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-23T02:21:29Z","PageNum":1,"Articles":[{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-23T02:21:29Z","Content":"\n\u003Cp\u003EOkay, so I\u0027ve been learning some of these rocket equations in my spare time. And I\u0027ve come up on a brick wall. \u003C/p\u003E\u003Cp\u003ELet\u0027s say I have an engine I want to make for the game, and I know the thrust and ISP I want it to have. But in the config files, you can input the thrust and fuel consumption rate values. \u003C/p\u003E\u003Cp\u003EThe equation for fuel consumption is Thrust (in newtons) / (gravity * ISP ). Otherwise known as Thrust / exhaust velocity. \u003C/p\u003E\u003Cp\u003ESo if I use this equation on one of KSP\u0027s engines, let\u0027s say the O10 monopropellant engine, the number I get does not match the stats in game. \u003C/p\u003E\u003Cp\u003EThrust = 20 kN\u003C/p\u003E\u003Cp\u003EIsp = 250 s\u003C/p\u003E\u003Cp\u003Eand fuel rate = 2.04/s. \u003C/p\u003E\u003Cp\u003EIf I use the real world equation, I get: 8.15. \u003C/p\u003E\u003Cp\u003EI\u0027ve tried it with several engines but it never matches up...\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-23T02:33:21Z","Content":"\n\u003Cp\u003EThere\u0027s an extra conversion -- units of LF/Oxidizer/Mono are \u0022volumetric\u0022, rather than mass.\u003C/p\u003E\u003Cp\u003E20 kN /(250 s *9.80665m/s\u00C3\u201A\u00C2\u00B2) == 0.0081577 tonnes per second\u003C/p\u003E\u003Cp\u003ENote that the \u0022density\u0022 of monoprop is 0.004 tonnes/l\u003C/p\u003E\u003Cp\u003E0.0081577/0.004 == 2.0394324 units/s\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-23T02:40:36Z","Content":"\n\u003Cp\u003EAhhhhhh thank you so much!\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-23T02:42:51Z","Content":"\n\u003Cp\u003EUh, also to expand a bit, mind the ratios -- you can do the same with LF/Oxidizer engines (0.005 tonnes/l), but keep in mind that they run 55% oxidizer, 45% liquid fuel.\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T18:53:22Z","Content":"\n\u003Cp\u003EErr, still having problems with this. For example - I have an engine I made for a mod. In the config file, I put 0.93 for engine fuel ratio. In game however, the stats say \u00225.09\u0022 for fuel consumption and ISP of 250 s. \u003C/p\u003E\u003Cp\u003EThats exactly what ISP I want, however for future reference, what is the extra calculation there? None of the config files seem to match up to what the fuel ratio is in-game.\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T19:09:24Z","Content":"\n\u003Cp\u003ECould you post the entire CFG file (say, on pastebin), and what the engine is doing?\u003C/p\u003E\u003Cp\u003E(And if there are any mods, this should probably be moved to gameplay questions)\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T19:17:48Z","Content":"\n\u003Cp\u003EYou can see it on the stock monopropellant engine. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Parts/Engine/OMSEngine/omsEngine.cfg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Parts/Engine/OMSEngine/omsEngine.cfg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eratio says \u00220.9\u0022 and in game the stats are \u00222.04\u0022.\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T20:01:30Z","Content":"\n\u003Cp\u003EThe ratio isn\u0027t an actual ratio, but a weighting factor. As best I can tell, KSP adds them all up, then uses the ratio value over the sum. (A notable example is the ion engine)\u003C/p\u003E\u003Cp\u003EI was also asking, because I was wondering about the details of your modded engine (eg: is it the O-10 just with that number changed, or...?).\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T20:15:50Z","Content":"\n\u003Cp\u003EOver the sum of what? Thrust / atmosphere curve? \u003C/p\u003E\u003Cp\u003EMy engine was just the o-10 with a different FX and changed values. Ratio was changed to 0.93 and thrust to 50. In game, it says 50kN, isp of 250 s and fuel rate of 5.09 / s\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T20:51:26Z","Content":"\n\u003Cp\u003E\u0022Ratio\u0022 of that propellant supply over the sum of all other \u0022ratios.\u0022 Things should only get messy if you have multiple propellants of varying densities.\u003C/p\u003E\u003Cp\u003ESince the engine still only burns monopropellant, that\u0027s 0.93/0.93 == 1\u003C/p\u003E\u003Cp\u003Emass flow == thrust/(g0*Isp) == 50/(9.80665*250) == 0.0020394 tonnes/s\u003C/p\u003E\u003Cp\u003E\u0022volumetric flow\u0022 == mass flow/density * proportion == 0.0020394/0.004*1 == 5.0986 units/second\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T21:06:51Z","Content":"\n\u003Cp\u003EWell, that\u0027s helpful to know... But sorry, I may be missing something. In the configuration files, you can only specify RATIO and THRUST. So how does KSP calculate fuel flow and ISP from only these two values?\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-26T23:10:51Z","Content":"\n\u003Cp\u003EIsp *is* specified (at 0 atm, 1 atm, and some higher amount where it hits 0.001 s) in the CFG files. eg:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EatmosphereCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tkey = 0 250\u003Cbr\u003E\t\t\tkey = 1 120\u003Cbr\u003E\t\t\tkey = 4 0.001\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E250 s at 0 atm, 120 s at 1 atm, 0.001 s at 4 atm. Interpolation is messy.\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2015-05-26T23:24:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UmbralRaptor\u0022 data-cite=\u0022UmbralRaptor\u0022\u003E\u003Cdiv\u003EIsp *is* specified (at 0 atm, 1 atm, and some higher amount where it hits 0.001 s) in the CFG files. eg:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EatmosphereCurve\u003Cbr\u003E        {\u003Cbr\u003E            key = 0 250\u003Cbr\u003E            key = 1 120\u003Cbr\u003E            key = 4 0.001\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E250 s at 0 atm, 120 s at 1 atm, 0.001 s at 4 atm. Interpolation is messy.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaha, you\u0027ve got to be kidding me. \u003C/p\u003E\u003Cp\u003EThank you so much for your help and patience!\u003C/p\u003E\n"},{"CreatedByName":"Armchair Rocket Scientist","CreatedById":76165,"CreatedDateTime":"2015-05-27T03:55:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UmbralRaptor\u0022 data-cite=\u0022UmbralRaptor\u0022\u003E\u003Cdiv\u003EThere\u0027s an extra conversion -- units of LF/Oxidizer/Mono are \u0022volumetric\u0022, rather than mass.\u003Cp\u003E20 kN /(250 s *9.80665m/s\u00C3\u201A\u00C2\u00B2) == 0.0081577 tonnes per second\u003C/p\u003E\u003Cp\u003ENote that the \u0022density\u0022 of monoprop is 0.004 tonnes/l\u003C/p\u003E\u003Cp\u003E0.0081577/0.004 == 2.0394324 units/s\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAFAIK the units are actually mass (one unit of LF or oxidizer is 5 kg, but units of monoprop and xenon have different values. Can\u0027t remember how solid fuel is handled.\u003C/p\u003E\u003Cp\u003EHowever, RealFuels does have volumetric units (liters for everything).\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-05-27T04:09:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UmbralRaptor\u0022 data-cite=\u0022UmbralRaptor\u0022\u003E\u003Cdiv\u003EInterpolation is messy.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA bit, but not too complicated. It\u0027s a standard cubic spline, keyed from values and slopes. The slopes are computed by taking average from the two neighbors. Just in case anyone is curious.\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-05-27T09:02:03Z","Content":"\n\u003Cp\u003EAnd for the calculation, gravity is not 9.81 m/s\u003Csup\u003E2\u003C/sup\u003E but 9.82 m/s\u003Csup\u003E2\u003C/sup\u003E.\u003C/p\u003E\u003Cp\u003EHave a look here: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"UmbralRaptor","CreatedById":2767,"CreatedDateTime":"2015-05-27T11:21:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mhoram\u0022 data-cite=\u0022mhoram\u0022\u003E\u003Cdiv\u003EAnd for the calculation, gravity is not 9.81 m/s\u003Csup\u003E2\u003C/sup\u003E but 9.82 m/s\u003Csup\u003E2\u003C/sup\u003E.\u003Cp\u003EHave a look here: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Specific_impulse#Conversion_factor\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWas 9.82, but as of 1.0 changed to 9.80665. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://i26.photobucket.com/albums/c128/raptor_87/KSP/Isp_1_0_2_zps3m5brcdz.png\u0022 alt=\u0022Isp_1_0_2_zps3m5brcdz.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E(The page will probably require an extensive rewrite, given the way engines also changed.)\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-05-27T13:43:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UmbralRaptor\u0022 data-cite=\u0022UmbralRaptor\u0022\u003E\u003Cdiv\u003EWas 9.82, but as of 1.0 changed to 9.80665.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the info. Have not known about this change.\u003C/p\u003E\n"}]}