{"TopicId":191341,"ForumId":32,"TopicTitle":"KSP, Unity, and orbital dynamics","CreatedByName":"RyanBrian","CreatedById":202591,"CreatedDateTime":"2020-02-01T18:50:14Z","PageNum":1,"Articles":[{"CreatedByName":"RyanBrian","CreatedById":202591,"CreatedDateTime":"2020-02-01T18:50:14Z","Content":"\n\u003Cp\u003E\nHey all! New here, and I apologize if this is either posted in the wrong place or if there\u0027s existing thread about this topic already. I\u0027m curious if the devs have shared anything about what the physics updates look like for bodies in KSP,\u00A0given the nature of Unity GameObjects, Rigidbodies, and the FixedUpdate\u00A0and Update methods. I\u0027ve been developing a simple\u00A02D orbital mechanics game/sandbox for fun, in part to revisit classical mechanics concepts that I\u0027m sadly far out of practice with, and it\u0027s raised a number of questions!\u00A0\u003Cbr\u003E\u003Cbr\u003E\nMy original assumption was that bodies in KSP simply have one gravitational force applied to the body by means of the Unity-built-in Rigidbody.AddForce(\u0026lt;gravitational_force_applied via other body\u0026gt;) in a body\u0027s FixedUpdate() method, but given the 2-body nature of the game, this isn\u0027t necessary, considering such a system\u0027s\u00A0deterministic nature and the ability to easily calculate elliptical, parabolic, or hyperbolic trajectories from just the masses, relative position, and relative velocity of the two bodies. In setting up some mechanics where I apply appropriate forces in the\u00A0FixedUpdate() method, while also calculating a given orbit\u0027s\u00A0semimajor axis, specific angular momentum, eccentricity vector, etc. in the object\u0027s Update() method, I\u0027ve noticed that my parameters that ought to be conserved (e.g. specific angular momentum, specific orbital energy), are not quite as conserved as I\u0027d like them to be.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m certainly not expecting perfection here, but the experience has mainly further amplified my appreciation for the physics of KSP.. The stability of orbits over time is fantastic! It has me wondering if, when a body stops accelerating by anything BUT gravity (i.e. we\u0027re not thrusting or interacting with an atmosphere), an equation for an ellipse/parabola/ hyperbola is determined and parameterized, and the body is then just updated along that path until some additional force outside gravity is applied.\u003Cbr\u003E\u003Cbr\u003E\nAgain, I\u0027m new here so I apologize if this is common knowledge or well-documented, but\u00A0a cursory search didn\u0027t lead me to anything, so I\u0027m curious. Thanks for any information!\n\u003C/p\u003E\n"},{"CreatedByName":"prestja","CreatedById":200888,"CreatedDateTime":"2020-02-02T18:40:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223735106\u0022 data-ipsquote-contentid=\u0022191341\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221580583014\u0022 data-ipsquote-userid=\u0022202591\u0022 data-ipsquote-username=\u0022RyanBrian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, RyanBrian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m certainly not expecting perfection here, but the experience has mainly further amplified my appreciation for the physics of KSP.. The stability of orbits over time is fantastic! It has me wondering if, when a body stops accelerating by anything BUT gravity (i.e. we\u0027re not thrusting or interacting with an atmosphere), an equation for an ellipse/parabola/ hyperbola is determined and parameterized, and the body is then just updated along that path until some additional force outside gravity is applied.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nKSP uses a deterministic function like what you described to calculate the orbital position, velocity, etc. for all craft at any given point in time,\u00A0\u003Cem\u003Et\u003C/em\u003E. This concept is briefly touched upon in\u00A0\u003Ca href=\u0022https://www.youtube.com/watch?v=mXTxQko-JH0\u0022 rel=\u0022external nofollow\u0022\u003Ethis video\u003C/a\u003E\u00A0where the original developers talk about how KSP was developed. Though they don\u0027t go greatly into the specifics of how this works, I\u0027ve been able to implement this concept myself in Unity with varying degrees of success.\n\u003C/p\u003E\n"},{"CreatedByName":"RyanBrian","CreatedById":202591,"CreatedDateTime":"2020-02-03T22:40:36Z","Content":"\n\u003Cp\u003E\nThanks for the reference, and the info!\u00A0Yeah I might\u0027ve rushed to posing this question\u00A0without thinking much on time warping.. Without the deterministic approach, it\u0027d be real tough to maintain stable orbits at real time and 1000x time, heh.\n\u003C/p\u003E\n"},{"CreatedByName":"prestja","CreatedById":200888,"CreatedDateTime":"2020-02-03T23:14:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223735966\u0022 data-ipsquote-contentid=\u0022191341\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221580769636\u0022 data-ipsquote-userid=\u0022202591\u0022 data-ipsquote-username=\u0022RyanBrian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, RyanBrian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks for the reference, and the info!\u00A0Yeah I might\u0027ve rushed to posing this question\u00A0without thinking much on time warping.. Without the deterministic approach, it\u0027d be real tough to maintain stable orbits at real time and 1000x time, heh.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDon\u0027t give up just yet! The deterministic approach isn\u0027t that difficult to implement if you can calculate a true anomaly from a mean anomaly. I\u0027d be happy to share my notes if you like.\n\u003C/p\u003E\n"},{"CreatedByName":"RyanBrian","CreatedById":202591,"CreatedDateTime":"2020-03-04T00:17:37Z","Content":"\n\u003Cp\u003E\nSorry for a month delay in getting back to you, but thanks for the input! There\u0027s some awkwardness in what I want, as I want to be able to make use of Unity\u0027s rigidbody physics for things like collisions ultimately, but otherwise defer to deterministic updates when not subjected to forces beyond a single gravitational influence. I\u0027ve got decent agreement b/w the FixedUpdate() gravitational force update and the deterministic Kepler problem update now.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"prestja","CreatedById":200888,"CreatedDateTime":"2020-03-04T04:36:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223751560\u0022 data-ipsquote-contentid=\u0022191341\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221583281057\u0022 data-ipsquote-userid=\u0022202591\u0022 data-ipsquote-username=\u0022RyanBrian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, RyanBrian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry for a month delay in getting back to you, but thanks for the input! There\u0027s some awkwardness in what I want, as I want to be able to make use of Unity\u0027s rigidbody physics for things like collisions ultimately, but otherwise defer to deterministic updates when not subjected to forces beyond a single gravitational influence. I\u0027ve got decent agreement b/w the FixedUpdate() gravitational force update and the deterministic Kepler problem update now.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m glad to hear it!\n\u003C/p\u003E\n"},{"CreatedByName":"RyanBrian","CreatedById":202591,"CreatedDateTime":"2020-04-29T23:18:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223751607\u0022 data-ipsquote-contentid=\u0022191341\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221583296590\u0022 data-ipsquote-userid=\u0022200888\u0022 data-ipsquote-username=\u0022prestja\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/3/2020 at 11:36 PM, prestja said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m glad to hear it!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey! If you\u0027re interested, I kept running with the idea \u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0Web is certainly not my intended target, but I figured I\u0027d slap a pause menu on, rig a rough input model in, and build to web to showcase some of mechanics discussed here. Be wary if you test it out, the\u00A0Kraken here is far more aggressive than KSP\u0027s..\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EHosted on my github site:\u003Cbr\u003E\u003Ca href=\u0022https://rtoole13.github.io/Orbital/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://rtoole13.github.io/Orbital/\u003C/a\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"prestja","CreatedById":200888,"CreatedDateTime":"2020-04-30T18:09:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223778057\u0022 data-ipsquote-contentid=\u0022191341\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221588202329\u0022 data-ipsquote-userid=\u0022202591\u0022 data-ipsquote-username=\u0022RyanBrian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, RyanBrian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey! If you\u0027re interested, I kept running with the idea \u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0Web is certainly not my intended target, but I figured I\u0027d slap a pause menu on, rig a rough input model in, and build to web to showcase some of mechanics discussed here. Be wary if you test it out, the\u00A0Kraken here is far more aggressive than KSP\u0027s..\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EHosted on my github site:\u003Cbr\u003E\u003Ca href=\u0022https://rtoole13.github.io/Orbital/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://rtoole13.github.io/Orbital/\u003C/a\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is absolutely incredible! I\u0027ve taken a look through your code and I\u0027m very impressed at the work you\u0027ve done on simulating hyperbolic trajectories. I can easily see this becoming a fully-fledged game for mobile devices.\n\u003C/p\u003E\n"},{"CreatedByName":"RyanBrian","CreatedById":202591,"CreatedDateTime":"2020-04-30T20:44:03Z","Content":"\n\u003Cp\u003E\nThank you\u00A0so much! Been having a blast with it, and I\u0027ve got a couple of project ideas I plan to explore. There are edge-cases aplenty at the moment, and I\u0027m painfully aware of the shortcomings of Kepler\u0027s Equation haha\n\u003C/p\u003E\n"}]}