{"TopicId":110193,"ForumId":36,"TopicTitle":"AffinityUI, an easier way to write Unity GUIs","CreatedByName":"nalitia","CreatedById":117727,"CreatedDateTime":"2015-05-21T03:17:15Z","PageNum":1,"Articles":[{"CreatedByName":"nalitia","CreatedById":117727,"CreatedDateTime":"2015-05-21T03:17:15Z","Content":"\n\u003Cp\u003EHey all, this is a library I wrote to aid in the development of Unity GUIs (the legacy kind that KSP still uses). I started on it years ago, but it fell by the wayside as work became more important. Recently I decided to finish it and release it for the KSP community.\u003C/p\u003E\u003Cp\u003EWhen I first started using Unity about 5 years ago, I couldn\u0027t stand the way the GUI system was designed. I was used to the declarative model and rich data binding capabilities of frameworks like WPF, so I set out to design my own in Unity. This is the result.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EFeatures\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EDeclarative UI \u003Cspan style=\u0022font-family:arial;\u0022\u003E\u003Cspan style=\u0022color:#545454;\u0022\u003E\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u0153\u003C/span\u003E\u003C/span\u003E specify what you want your GUI to do, the framework takes care of the rest. No minutia of plumbing values in and out of GUILayout calls.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERich data binding without a big performance impact. Unlike WPF, there is no reflection, only function calls.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESkin and style support\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFull set of controls wrapping existing Unity controls, plus new controls such as TabControl\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFloating tool tip rendering\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EInteroperable with any existing GUI code\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ENo fancy confusing magic, easy to read code\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s really, really easy to build very complex GUIs and new controls with this library. I put together a short example of the basic capabilities:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/lL2A5YwBqIw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EIt\u0027s pretty flexible and powerful, and there\u0027s still a lot I could add. I\u0027m unsure, however, of the future value of this project given that KSP will be migrating to Unity 5. But maybe it will be useful for legacy projects.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EIf you think this is useful, please let me know!\u003C/strong\u003E I\u0027ll continue to work on this project and support it if people are interested. There are more features that could be added, as well as documentation and tests.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EProject on GitHub\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EReleases, example project, and information on how to build can be found here:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/mattolenik/AffinityUI\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/mattolenik/AffinityUI\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2015-05-21T04:16:18Z","Content":"\n\u003Cp\u003EWow this looks cool! I will tinker with this. I\u0027ve had a few mod ideas but the GUI development process is intimidating. Is this intended to work as an API like blizzy\u0027s toolbar (looks REALLY close already) and what license do you plan?\u003C/p\u003E\u003Cp\u003EAlso, I\u0027m thinking you should add your /lib directory (with the dependence .dlls) on github to .gitignore and remove them from github. I could be wrong, but I recall that being an issue in the past.\u003C/p\u003E\u003Cp\u003ESummary: \u003Cstrong\u003EI think this is useful!\u003C/strong\u003E\u003C/p\u003E\n"},{"CreatedByName":"nalitia","CreatedById":117727,"CreatedDateTime":"2015-05-21T05:05:27Z","Content":"\n\u003Cp\u003EIt\u0027s not an API like blizzy\u0027s toolbar, it\u0027s just an abstraction over the Unity GUI API. You can use it for any game, there isn\u0027t even anything KSP specific.\u003C/p\u003E\u003Cp\u003EAlso, the binaries in lib are actually symlinks, they\u0027re not really there. I wasn\u0027t sure if they were redistributable.\u003C/p\u003E\u003Cp\u003EThanks for asking about the license. It\u0027s supposed to be MIT, I\u0027d just forgotten to add it to the repo.\u003C/p\u003E\n"},{"CreatedByName":"timmers_uk","CreatedById":97413,"CreatedDateTime":"2015-05-21T07:26:48Z","Content":"\n\u003Cp\u003EI\u0027m tempted to try this out for the redo of Keepfit\u0027s ui. Will let you know how I get on.\u003C/p\u003E\n"},{"CreatedByName":"nalitia","CreatedById":117727,"CreatedDateTime":"2015-05-21T17:01:55Z","Content":"\n\u003Cp\u003EFeel free to shoot me a PM or email (my address is on github) if you have questions. The sample code is a bit \u0022kitchen sink\u0022 and probably isn\u0027t a great introductory how-to.\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-05-21T19:45:54Z","Content":"\n\u003Cp\u003EWow, this is exactly what I was hoping someone would do for this kind of thing. I have absolutely no clue about how to write a GUI, nor the patience to figure it out. Besides, I\u0027d probably just get frustrated and pull all my hair out. I\u0027m not old enough for hair loss... only greys.\u003C/p\u003E\n"},{"CreatedByName":"SquaredSpekz","CreatedById":124226,"CreatedDateTime":"2015-05-21T20:58:07Z","Content":"\n\u003Cp\u003ECool Idea. Unfortunate the 1.1 will have a complete redo of UI, using the Unity 4.6 or Higher UI.\u003C/p\u003E\n"},{"CreatedByName":"nalitia","CreatedById":117727,"CreatedDateTime":"2015-05-21T22:01:29Z","Content":"\n\u003Cp\u003EIt\u0027s a much better GUI system, so I don\u0027t mind. I may look into writing something similar for the new UI. There are other Unity projects that already do data binding, but the only ones I\u0027ve seen either cost money, or use heavyweight XML markup and a lot of reflection.\u003C/p\u003E\u003Cp\u003EI \u003Cem\u003Ethink\u003C/em\u003E the legacy UI still works in the newer Unity, but is considered deprecated. Maybe still useful for mods that don\u0027t want to do a complete rewrite? I don\u0027t know much about it, and I don\u0027t know how things will work w.r.t KSP. I\u0027ll have to look into it.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-05-21T22:54:25Z","Content":"\n\u003Cp\u003EThe Unity 5 docs have all of the old GUI stuff listed under legacy, so I imagine it\u0027s all still supported. And as far as I know all of the new UI stuff came in Unity 4.6, which KSP already uses, so old GUI code will probably continue working for the foreseeable future.\u003C/p\u003E\u003Cp\u003EI have a very simple UI mod that I came up with from something I saw in the suggestions forum (a row of icons in the space center and keyboard shortcuts for highlighting and entering different buildings). After getting frustrated trying to find instances of the Space Center Buildings I realized I should try to use the new UI system. I figure it would serve as a simple exercise in the new UI coding. I\u0027ll make sure to document everything well if I can get it working.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-05-22T09:49:55Z","Content":"\n\u003Cp\u003EDmagic and others. Here is a link that shows a good example of scripting the new UI that I saved a while back ago when looking into it.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://chikkooos.blogspot.jp/2015/03/new-ui-implementation-using-c-scripts.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://chikkooos.blogspot.jp/2015/03/new-ui-implementation-using-c-scripts.html\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-05-22T16:05:24Z","Content":"\n\u003Cp\u003EYep, I have the same one bookmarked \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo far that\u0027s the only good scripting documentation I\u0027ve seen.\u003C/p\u003E\u003Cp\u003EThere is a pretty comprehensive \u003Ca href=\u0022http://unity3d.com/learn/tutorials/modules/beginner/ui\u0022 rel=\u0022external nofollow\u0022\u003EUnity tutorial\u003C/a\u003E that goes over the types of objects in the new UI. It\u0027s all done in the editor, but it still gives a good idea of what\u0027s possible.\u003C/p\u003E\n"},{"CreatedByName":"nalitia","CreatedById":117727,"CreatedDateTime":"2015-05-22T20:43:13Z","Content":"\n\u003Cp\u003EThat\u0027s very useful, thank you! My first glance at the new UI showed it to be done in the editor, which would be a problem for KSP or other games where we\u0027re doing work with mods. Similarly all the projects in the Unity asset store are not very useful to KSP modders.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-05-22T22:03:35Z","Content":"\n\u003Cp\u003EYes, all their tutorials are in the editor but the system always was scriptable and the \u003Ca href=\u0022https://bitbucket.org/Unity-Technologies/ui\u0022 rel=\u0022external nofollow\u0022\u003Esource are even open\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EWith some work something that spew code from the editor could be done too but it may be a bit too \u003C/p\u003E\u003Cp\u003EAs for usefull code, here is the other links I had \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://bitbucket.org/ddreaper/unity-ui-extensions\u0022 rel=\u0022external nofollow\u0022\u003Eunity-ui-extensions\u003C/a\u003E repo with some higher level controls and extensions \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://forum.unity3d.com/threads/scripts-useful-4-6-scripts-collection.264161/\u0022 rel=\u0022external nofollow\u0022\u003EThe thread \u003C/a\u003E where those controls were shared (may have a few not in the repo)\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-05-23T18:32:16Z","Content":"\n\u003Cp\u003ESo I managed [thread=122744]this[/thread] using the new UI.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6dbXGzN.png\u0022 alt=\u00226dbXGzN.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s basically just ten buttons laid out along the bottom, a text label is added above and to the left of each button. Everything is manually positioned, I think there is some kind of layout system, but I don\u0027t know how it works. I extended the base UI.Button class to add things like right-click and mouse-over detection (which seem to be half-way implemented already), but otherwise I\u0027m just using basic UI objects.\u003C/p\u003E\u003Cp\u003EThe new UI system is begging for some kind of abstraction like you have here for the legacy GUI stuff. Creating each object is a bit tedious and there are several things I can\u0027t get to work. I don\u0027t know how to assign a background image to the buttons for instance, each one only seems to accept one image object. And I can\u0027t get the UI elements on top of that bottom bar.\u003C/p\u003E\n"}]}