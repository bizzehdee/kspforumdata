{"TopicId":100505,"ForumId":20,"TopicTitle":"Proximity Sensor For Switching Action Groups","CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-02-23T08:23:50Z","PageNum":1,"Articles":[{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-02-23T08:23:50Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EWant to go down in modding history as the one who brought a whole new dimension of gameplay into KSP? Then think about \u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003E\u003Cstrong\u003EThe Proximity Sensor\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith a proximity sensor you can do at least the following:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EAutomatically open and close doors - great for cinematics!\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003ESwitch lights on and off - again, great for cinematics! Imagine slowly drifting into this gigantic space station ... and the lights switch on down that corridor, one set at a time. Or even disco lights!\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EPlay a sound - or even build an instrument that plays a tune!\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EAutomatically Fire missiles \u0026amp; detonate mines\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EBuild yourself a dynamic pressure sensor: a plate connected to a spring. If the plate is moved backwards enough due to high dynamic pressure, some engines could be switched off until pressure drops enough and the engines switch on again.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EBuild a crude mechanical computer\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003ECreate a magneto - the thing that produces a spark at the right time, in the right cylinder, in an old fashioned piston engine.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003ESecurity doors - they open for some but not for others! Great for multiplayer! You\u0027ve got a ship in orbit and you don\u0027t want it commandeered by a different player? Lock the doors and take the right transmitter with ya! \u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EMany more things ... post your ideas!\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EIdeally such a system would have the following: One part is the sensor, which would have an ID to be set by the user. The other part is a transmitter. They can have a single ID or multiple ID\u0027s, to be set by the user.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EThe sensors would have options to \u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003E \u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EActivate when coming into range, set between 1 cm and 2.5km\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EDe-activate when out of range, set between 1 cm and 2.5km \u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EOption to activate not the first but the second time, then reset\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EOption not to deactivate when transmitter goes out of range\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003ESet to activate on a single transmitter ID, a group, a range or set to ignore a range \u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EAble to interface with action group managers.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EThis is an example of needing it badly but not knowing it until it\u0027s there.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027century gothic\u0027;\u0022\u003EWho would love to build it? And post what you would do with such a switch, the more ideas, the greater the chance someone will code it!\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-24T01:53:27Z\u0022 title=\u002202/24/2015 01:53  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 24, 2015\u003C/time\u003E by Azimech\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2015-02-23T13:41:35Z","Content":"\n\u003Cp\u003EThis sounds like it would fit right in with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64227\u0022 rel=\u0022external nofollow\u0022\u003ESmart Parts\u003C/a\u003E (which already has a radio).\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-02-23T14:06:02Z","Content":"\n\u003Cp\u003EThere are some similarities, true. Then again, there are similarities with BD Armory as well. Maybe some code from either is usable.\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-03-08T14:17:59Z","Content":"\n\u003Cp\u003EA friend of mine came up with another use: he wants to use it on his walking robots. This means: able to automate walking without kOS scripts.\u003C/p\u003E\n"},{"CreatedByName":"GusTurbo","CreatedById":57552,"CreatedDateTime":"2015-03-16T12:46:23Z","Content":"\n\u003Cp\u003EGreat idea. I would love to see something like this. If I had the ability, I would do it myself.\u003C/p\u003E\n"},{"CreatedByName":"Yukon0009","CreatedById":109376,"CreatedDateTime":"2015-03-16T12:52:26Z","Content":"\n\u003Cp\u003EWelp, nice idea but I suck at modding- hell, just persistence file editing/CFG changes is annoying.\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-03-16T12:56:15Z","Content":"\n\u003Cp\u003EOh I can help with config files, if you need help, just yell :-)\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-03-16T13:30:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Yukon0009\u0022 data-cite=\u0022Yukon0009\u0022\u003E\u003Cdiv\u003EWelp, nice idea but I suck at modding- hell, just persistence file editing/CFG changes is annoying.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Euh ? How are you doing it ? KSP handle most of the work once you use the proper tools. Post in the\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/forums/30-Plugin-Development-Help-and-Support\u0022 rel=\u0022external nofollow\u0022\u003E Dev help section\u003C/a\u003E if you have trouble\u003C/p\u003E\n"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2015-03-16T13:41:47Z","Content":"\n\u003Cp\u003EHey man, this is a great idea! I can think of a million applications for this but I have no idea how to write code for this..\u003C/p\u003E\u003Cp\u003E Try sending a PM to some well known modders, they may be able to help you. \u003C/p\u003E\u003Cp\u003EMJ\u003C/p\u003E\n"},{"CreatedByName":"Yukon0009","CreatedById":109376,"CreatedDateTime":"2015-03-16T14:22:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003Euh ? How are you doing it ? KSP handle most of the work once you use the proper tools. Post in the\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/forums/30-Plugin-Development-Help-and-Support\u0022 rel=\u0022external nofollow\u0022\u003E Dev help section\u003C/a\u003E if you have trouble\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t mod, but thanks anyways.\u003C/p\u003E\n"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-03-27T23:24:31Z","Content":"\n\u003Cp\u003EThis could be a really cool concept. I like it! \u003C/p\u003E\u003Cp\u003ESo is the idea (as I\u0027m understanding it) to have two parts and have the trigger based of the distance between the parts? I could see uses for that, particularly as you\u0027ve said in cinematic filming. But could it work with just a single part? Could the sensor part also work like a laser trip beam so that it could be triggered by the presence of any part, or the ground, or perhaps a hapless Kerbal walking into some horrific automated trap system!?\u003C/p\u003E\u003Cp\u003EThe two part idea is really nice for ship-ship interaction. having things like docking port covers open automatically as a ship approaches (and as you say having it so that only ships with the right ID on their transmitter would trigger that). \u003C/p\u003E\u003Cp\u003EBut I\u0027d also really like ship-terrain interaction. for things like automatically lowering landing gears when approaching the ground, or sounding a proximity alert sound (I\u0027m thinking of some extra aids to automate things when doing an IVA landing). \u003C/p\u003E\u003Cp\u003EAnd if ship-terrain interaction was possible, ship-kerbal interaction would also be very cool (and not just for building Kerbal traps!). For cinematic things like a Kerbal walking along and having doors open automatically or having lights come on.\u003C/p\u003E\u003Cp\u003EAnyway I think this is a great idea with some interesting potential \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Eto harm kerbals\u003C/span\u003E for interesting automation. Unfortunately I have no experience with writing mods for KSP (something I want to remedy).\u003C/p\u003E\n"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2015-03-28T01:01:35Z","Content":"\n\u003Cp\u003EWhen docking, (especially manually), I always have to close solar panels, heat radiators, antennas, etc, before getting too close to another ship...My manual docking is sometimes laughable, and MechJeb sometimes likes to freak out and screw up docking...Too many times I have broken off antennas and solar panels with close calls...Also, having lights and docking bays/ports turn on and open would be handy as well...\u003C/p\u003E\n"},{"CreatedByName":"esinohio","CreatedById":57681,"CreatedDateTime":"2015-03-28T12:11:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Stone Blue\u0022 data-cite=\u0022Stone Blue\u0022\u003E\u003Cdiv\u003EWhen docking, (especially manually), I always have to close solar panels, heat radiators, antennas, etc, before getting too close to another ship...My manual docking is sometimes laughable, and MechJeb sometimes likes to freak out and screw up docking...Too many times I have broken off antennas and solar panels with close calls...Also, having lights and docking bays/ports turn on and open would be handy as well...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI really liked your last idea there! Of course I can just switch to the other craft and turn everything on... but having it auto turn on via proximity would keep the stream of play a bit better. Help keep the illusion alive I think.\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-03-28T15:28:25Z","Content":"\n\u003Cp\u003EIt\u0027s not a two-part solution, the idea is to have a receiver that looks at a whole range of transmitter ID\u0027s. Could even have the following format:\u003C/p\u003E\u003Cp\u003EID 1 to 5: when in range activate action group 1 (further notation: #1-5 \u0026gt; \u002BAG1)\u003C/p\u003E\u003Cp\u003EID 6: when going out of range, deactivate action group 9 (#6 \u0026lt; -AG9)\u003C/p\u003E\u003Cp\u003ENow the rest:\u003C/p\u003E\u003Cp\u003E#8 \u0026lt; -AG9, \u0026gt;-AG0\u003C/p\u003E\u003Cp\u003E#9 \u0026lt; =AG9, \u0026gt;-AG1 \u0026gt;\u002BAG3\u003C/p\u003E\u003Cp\u003E#10-15 ignore\u003C/p\u003E\u003Cp\u003E#16 ignore unless #8 is in range, \u0026gt;-AG1 if #9 is out of range\u003C/p\u003E\u003Cp\u003Eetc.\u003C/p\u003E\u003Cp\u003ENot only that, it would be fun to have the ability to set certain transmitters to work as receivers as well! \u003C/p\u003E\u003Cp\u003EThis way you can ... \u003C/p\u003E\u003Cp\u003EAutomate a whole range of machines, even build a guidance system.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EAnd have a bunch of robots doing a dance.\u003C/strong\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mad Rocket Scientist","CreatedById":139256,"CreatedDateTime":"2015-04-23T20:13:24Z","Content":"\n\u003Cp\u003EI hereby show my support for this idea.\u003C/p\u003E\n"},{"CreatedByName":"agent_0004","CreatedById":111700,"CreatedDateTime":"2015-04-24T08:08:00Z","Content":"\n\u003Cp\u003EI think i could get this done with Unity\u0027s Ray System. Pretty much the same way BD Armory works, The tricky part for me would be the Kerbal Integration. It might take me a bit to figure out all the different options inside kerbal i.e.(What to look for, how far away. That kinda thing) other than some bumps this should be a pretty smooth ride. PM me if you want me to help.\u003C/p\u003E\u003Cp\u003EEDIT: Forgot to mention, this method should not require any parts or planets to be modified. just the prox sensor.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-24T08:09:39Z\u0022 title=\u002204/24/2015 08:09  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 24, 2015\u003C/time\u003E by agent_0004\u003C/strong\u003E\n\u003Cbr\u003EDerp moment\n\u003C/span\u003E\n"},{"CreatedByName":"z26","CreatedById":91677,"CreatedDateTime":"2015-04-25T22:18:14Z","Content":"\n\u003Cp\u003EThis sounds nice, I think the lazor mod already has support to send a ray and mesure how far it gets before colliding. Maybe reverse engineer that? Integrating this with smartparts would be better than making this a standalone mod.\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-04-26T12:07:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022agent_0004\u0022 data-cite=\u0022agent_0004\u0022\u003E\u003Cdiv\u003EI think i could get this done with Unity\u0027s Ray System. Pretty much the same way BD Armory works, The tricky part for me would be the Kerbal Integration. It might take me a bit to figure out all the different options inside kerbal i.e.(What to look for, how far away. That kinda thing) other than some bumps this should be a pretty smooth ride. PM me if you want me to help.\u003Cp\u003EEDIT: Forgot to mention, this method should not require any parts or planets to be modified. just the prox sensor.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExcellent! I\u0027ll start drawing a schematic on my white board soon.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022z26\u0022 data-cite=\u0022z26\u0022\u003E\u003Cdiv\u003EThis sounds nice, I think the lazor mod already has support to send a ray and mesure how far it gets before colliding. Maybe reverse engineer that? Integrating this with smartparts would be better than making this a standalone mod.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs far as we know, development of Smart Parts has halted. I did suggest it to them but got no response and the topic is lying on it\u0027s back.\u003C/p\u003E\n"},{"CreatedByName":"agent_0004","CreatedById":111700,"CreatedDateTime":"2015-04-26T22:04:47Z","Content":"\n\u003Cp\u003EI could make the part scripts compatible with Smart Parts if you can find an up to date version of it. before it was compiled\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI can start working on the code for the part when you finish the model.\u003C/p\u003E\n"},{"CreatedByName":"Whizzkid","CreatedById":126892,"CreatedDateTime":"2015-05-08T16:12:35Z","Content":"\n\u003Cp\u003EI like this idea! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-05-08T17:39:47Z","Content":"\n\u003Cp\u003EAs it looks like I\u0027ll probably taking over Smart Parts at this point, I\u0027m interested in looking at seeing the possibilities of this.\u003C/p\u003E\u003Cp\u003EThe biggest hurdle is that action groups are one-shot and proximity is an on-going status. I would look at the altimeter part for how to handle that probably.\u003C/p\u003E\u003Cp\u003EThe other thing is \u0022Kerbal Integration\u0022 is mentioned earlier, using Smart Parts would not allow a Kerbal on EVA to trigger this as you would need a two Parts to create a distance between them.\u003C/p\u003E\u003Cp\u003EThe other-other thing is how to handle multiple sensors. It would probably be limited to only using the closest sensor. (On that channel of course so you can control which sensors activate each other.)\u003C/p\u003E\u003Cp\u003EThoughts?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Firov","CreatedById":57445,"CreatedDateTime":"2015-05-11T16:58:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThe biggest hurdle is that action groups are one-shot and proximity is an on-going status. I would look at the altimeter part for how to handle that probably.\u003Cp\u003EThe other-other thing is how to handle multiple sensors. It would probably be limited to only using the closest sensor. (On that channel of course so you can control which sensors activate each other.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor those who haven\u0027t noticed yet, this feature has been added as part of the latest SmartParts, starting in v1.6.0. It\u0027s still a bit experimental, but feel free to give it a try and post any feedback. It works with multiple channels out to 2000 meters, and allows triggering actions on approach, departure, or either. Like the altimeter smart part, it\u0027s also able to reset/rearm itself.\u003C/p\u003E\u003Cp\u003EIn reference to Diazo\u0027s post above, this was definitely an interesting challenge to create. In the end, it turned into a bit of a hybrid of the altimeter and radio smart parts. Much like the radio, each proximity smart part registers itself to a globally accessible list, which allows easy detection by other proximity alarm parts without having to iterate through all local vessel part lists, which would add potentially crippling overhead for larger vessels (ie space stations). I also use this list to determine the channel the remote proxmity part is operating on. With this info, it\u0027s a relatively simple matter to iterate through the list and find the closest proximity sensor that\u0027s on the same channel as the local part, as well as it\u0027s distance and velocity relative to the local vessel (important for altimeter/trigger logic below).\u003C/p\u003E\u003Cp\u003EFrom there, I wanted it to be able to trigger actions on approach, departure, or either, while also allowing the trigger to automatically reset. That last bit is the tricky part because, as Diazo pointed out, proximity to something, be it the ground or another ship, is a constant status. With the part having the ability to reset itself, you could potentially fire the action constantly when the distance conditions are met. \u003C/p\u003E\u003Cp\u003EIdeally, you could fire at exactly the specified distance, but in practice, that\u0027s not possible due to floating point errors as well as the fact that KSP only calculates physics at a specific time interval, .02 seconds per frame, in my case. So you would almost certainly never actually hit the exact distance the part is looking for. The solution is to calculate a sliding window that scales based on the relative velocity between the ship and the target (ground or other ship) as well as the current KSP physics calculation time. The faster your ship moves, the larger the sliding window has to be in order to ensure that the action is triggered. \u003C/p\u003E\u003Cp\u003EThis window is then used in conjunction with the user configured target distance to establish the endpoints of the window. If the sensor detects that it\u0027s inside of this window, it triggers the action. The next physics frame, it recalculates the window, and upon discovering that it is now outside of the window, resets the smart part so it can be triggered again when it re-enters the calculated window, assuming that auto-reset is enabled. Fortunately, I\u0027d already worked through all of this with my altimeter smart part (after much frustration), so I was able to just copy that logic for the proximity detector with a very minor rework.\u003C/p\u003E\n"},{"CreatedByName":"Qigon","CreatedById":141819,"CreatedDateTime":"2015-06-10T23:33:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Firov\u0022 data-cite=\u0022Firov\u0022\u003E\u003Cdiv\u003EFor those who haven\u0027t noticed yet, this feature has been added as part of the latest SmartParts, starting in v1.6.0. It\u0027s still a bit experimental, but feel free to give it a try and post any feedback. It works with multiple channels out to 2000 meters, and allows triggering actions on approach, departure, or either. Like the altimeter smart part, it\u0027s also able to reset/rearm itself.\u003Cp\u003EIn reference to Diazo\u0027s post above, this was definitely an interesting challenge to create. In the end, it turned into a bit of a hybrid of the altimeter and radio smart parts. Much like the radio, each proximity smart part registers itself to a globally accessible list, which allows easy detection by other proximity alarm parts without having to iterate through all local vessel part lists, which would add potentially crippling overhead for larger vessels (ie space stations). I also use this list to determine the channel the remote proxmity part is operating on. With this info, it\u0027s a relatively simple matter to iterate through the list and find the closest proximity sensor that\u0027s on the same channel as the local part, as well as it\u0027s distance and velocity relative to the local vessel (important for altimeter/trigger logic below).\u003C/p\u003E\u003Cp\u003EFrom there, I wanted it to be able to trigger actions on approach, departure, or either, while also allowing the trigger to automatically reset. That last bit is the tricky part because, as Diazo pointed out, proximity to something, be it the ground or another ship, is a constant status. With the part having the ability to reset itself, you could potentially fire the action constantly when the distance conditions are met. \u003C/p\u003E\u003Cp\u003EIdeally, you could fire at exactly the specified distance, but in practice, that\u0027s not possible due to floating point errors as well as the fact that KSP only calculates physics at a specific time interval, .02 seconds per frame, in my case. So you would almost certainly never actually hit the exact distance the part is looking for. The solution is to calculate a sliding window that scales based on the relative velocity between the ship and the target (ground or other ship) as well as the current KSP physics calculation time. The faster your ship moves, the larger the sliding window has to be in order to ensure that the action is triggered. \u003C/p\u003E\u003Cp\u003EThis window is then used in conjunction with the user configured target distance to establish the endpoints of the window. If the sensor detects that it\u0027s inside of this window, it triggers the action. The next physics frame, it recalculates the window, and upon discovering that it is now outside of the window, resets the smart part so it can be triggered again when it re-enters the calculated window, assuming that auto-reset is enabled. Fortunately, I\u0027d already worked through all of this with my altimeter smart part (after much frustration), so I was able to just copy that logic for the proximity detector with a very minor rework.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EVery cool! \u003C/p\u003E\u003Cp\u003EIs there a chance to use that to trigger kis explosives? For... reasons....\u003C/p\u003E\n"}]}