{"TopicId":65438,"ForumId":55,"TopicTitle":"Another optimization for sub-assemblies \u0026amp; physic","CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-11T11:12:50Z","PageNum":1,"Articles":[{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-11T11:12:50Z","Content":"\n\u003Cp\u003ELaunching a crazy beast on orbit today (just 495 parts for the final stage) with \u0022only\u0022 16 small landers docked, I have a steady 5-7 fps, which is very low, it was even better with launcher, 8 fps, and I just thought: why not considering sub-assemblies as a whole in term of physics ?\u003C/p\u003E\u003Cp\u003EIt might save some precious CPU resources for what really matter.\u003C/p\u003E\u003Cp\u003EI think it would be also possible to group parts into small unique physic entities like collider for a bunch of small parts (ie: flat solar panels, lights, ladders, ... are not supposed yet to be ripped of where they are placed, even in reentry). Waiting for Unity team to move in the right way (if they will do that one day !)\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2014-03-12T01:15:43Z","Content":"\n\u003Cp\u003EWhy? Because it\u0027s not that simple. What if you crash? Suddenly the game has to choose whether or not to destroy the entire part, or break it up first (somehow) and then destroy individual parts. When exactly do you \u0022merge\u0022 the parts? What if your subassembly contains six stages? Do they suddenly stop functioning?\u003C/p\u003E\n"},{"CreatedByName":"Sirrobert","CreatedById":70591,"CreatedDateTime":"2014-03-12T10:28:25Z","Content":"\n\u003Cp\u003EWhat if my subassambly IS my launcher, that I put under the lander after building it? Does that make the launcher a solid block?\u003C/p\u003E\n"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2014-03-12T10:30:13Z","Content":"\n\u003Cp\u003EYes, under the op\u0027s rules, but that\u0027s bad.\u003C/p\u003E\n"},{"CreatedByName":"Frank_G","CreatedById":100000,"CreatedDateTime":"2014-03-12T10:46:06Z","Content":"\n\u003Cp\u003EMaybe parts could be designated as payload, so they can be calculated as one piece and only being used when specific conditions are met (like fairings away, decoupled etc.) to avoid metagaming or other problems.\u003C/p\u003E\n"},{"CreatedByName":"Lord Orion","CreatedById":105700,"CreatedDateTime":"2014-03-13T21:16:55Z","Content":"\n\u003Cp\u003ELook up UbioZur Welding mod alows u to simplify things like fuel tanks and wings. Id link it if I was not on my mobile. Best possible fix tho, the game engine alowing use of all cores of a processor for calculations. I know not every one has a computational beast of a computer but still 4 cores is becoming common.\u003C/p\u003E\n"},{"CreatedByName":"Kruleworld","CreatedById":69697,"CreatedDateTime":"2014-03-15T05:48:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022vexx32\u0022 data-cite=\u0022vexx32\u0022\u003E\u003Cdiv\u003EWhen exactly do you \u0022merge\u0022 the parts? \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027d suggest when FPS drops below 10!\u003C/p\u003E\n"},{"CreatedByName":"Frank_G","CreatedById":100000,"CreatedDateTime":"2014-03-15T09:53:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kruleworld\u0022 data-cite=\u0022Kruleworld\u0022\u003E\u003Cdiv\u003EI\u0027d suggest when FPS drops below 10!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would ruin the consistency in the simulation... it must be a system, that will not switch from mode a to b in an uncontrolled way. It wont help you anything, if the vessel you are piloting would suddenly react totally different to your inputs while the game speeds up by an unknown factor. BOOM would be the certain result, and silly flighpaths, and and and... To get somewhat like this feeling right, is very a delicate task that already from the start could not being solved without compromises. Maybe this will be more achievable, after having a look at the new upcoming joint behaviors in .24.\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-26T10:03:03Z","Content":"\n\u003Cp\u003EToday I just have an idea regarding situation and abnormal frame drop due to a few (about 10) vehicles in the vicinity (one alone don\u0027t have so much parts, they work great and frame rate was ok):\u003C/p\u003E\u003Cp\u003Eas physics need to be \u0022stabilized\u0022 when switching to something, I can\u0027t understand why there is so much frame drop due to physics only in such case, so why not just ignore all vehicle farer than x meters (x is a settings parameter), such ignored vehicles might be seen as a mere \u0022box\u0022 with a mass and a basic colider if really needed, especially when they are not in sight (behind for example). \u003C/p\u003E\u003Cp\u003EI mean 3D objects can be as they are, full of nice looking parts, but regarding physics, it just be like KSC buildings = \u0022nothing\u0022 (just a box stuck on the ground), as there is not frame drop at all with buildings displayed and they still have a collider.\u003C/p\u003E\u003Cp\u003EIt\u0027s worth a shot (by Squad) I think, so we could definitely consider this as an optimization or a dead-end.\u003C/p\u003E\u003Cp\u003EAll of this is regarding no improvement in Unity layer.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-03-26T10:23:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Justin Kerbice\u0022 data-cite=\u0022Justin Kerbice\u0022\u003E\u003Cdiv\u003Eas physics need to be \u0022stabilized\u0022 when switching to something, I can\u0027t understand why there is so much frame drop due to physics only in such case, so why not just ignore all vehicle farer than x meters (x is a settings parameter), such ignored vehicles might be seen as a mere \u0022box\u0022 with a mass and a basic colider if really needed, especially when they are not in sight (behind for example). \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs I understand it, that\u0027s pretty much how it works currently. Objects further than 2.5km (IIRC) away go on rails and aren\u0027t physically simulated, though the range isn\u0027t adjustable.\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2014-03-26T10:27:14Z","Content":"\n\u003Cp\u003EIndeed. That\u0027s pretty much exactly what\u0027s done. From memory, I think Harv said something about objects even within the 2.5km radius not being fully in physics mode until either you pass \u003Cem\u003Ereally\u003C/em\u003E close to them, or they\u0027re in atmosphere, or something else happens that requires them to have physics simulated. So... yeah, basically, that\u0027s what\u0027s already done.\u003C/p\u003E\n"},{"CreatedByName":"FREEFALL1984","CreatedById":104993,"CreatedDateTime":"2014-03-26T10:31:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Frank_G\u0022 data-cite=\u0022Frank_G\u0022\u003E\u003Cdiv\u003EMaybe parts could be designated as payload, so they can be calculated as one piece and only being used when specific conditions are met (like fairings away, decoupled etc.) to avoid metagaming or other problems.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat might not be too bad an idea, the payload is generally pretty static and unused during launch, once the player decouples it could then revert to individual part physics saving sweet FPS during launch\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-26T11:39:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022vexx32\u0022 data-cite=\u0022vexx32\u0022\u003E\u003Cdiv\u003EIndeed. That\u0027s pretty much exactly what\u0027s done. From memory, I think Harv said something about objects even within the 2.5km radius not being fully in physics mode until either you pass \u003Cem\u003Ereally\u003C/em\u003E close to them, or they\u0027re in atmosphere, or something else happens that requires them to have physics simulated. So... yeah, basically, that\u0027s what\u0027s already done.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E so there is something weird around, why fps drop so much when more than x \u0022things\u0022 (=vessels, rovers, living debris, landers, ...) are in the vicinity ?\u003C/p\u003E\u003Cp\u003EOr the \u0022close to them\u0022 is too big (\u0026gt;= 500m) ?\u003C/p\u003E\u003Cp\u003EIt\u0027s looks like there is a threshold and when parts count/vessels count is over it, boom,game became almost unplayable (try to dock manually at less than 8 FPS).\u003C/p\u003E\n"}]}