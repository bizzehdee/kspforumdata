{"TopicId":107466,"ForumId":20,"TopicTitle":"module \u0026gt; part not counting in rocket part limit for upgraded buildings","CreatedByName":"Scientist","CreatedById":129760,"CreatedDateTime":"2015-05-04T17:32:02Z","PageNum":1,"Articles":[{"CreatedByName":"Scientist","CreatedById":129760,"CreatedDateTime":"2015-05-04T17:32:02Z","Content":"\n\u003Cp\u003Eok so heavy modded game, alot of parts we add just for decor to make our rockets look nice, but then get kicked in the head because the part count is higher than VAB/launchpad allow until you upgrade further, but cant upgrade yet o.O so a simple module, if on a part, that part isnt counted in the limit\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleExcludePartLimit\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003Eor such \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Ei tried looking through some of ksp code, but can\u0027t find where to hook into the part counting, so maybe theres better modders \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-05-04T19:32:10Z","Content":"\n\u003Cp\u003EThe simplest way would be to dynamically increase the part limit instead. Just glancing at it, I\u0027d say actually preventing the part from being included in the count would exceed the effort : reward ratio for your mod\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.MainMenu, true)]\u003Cbr\u003Epublic class ExtendPartLimitCount : GameVariables\u003Cbr\u003E{\u003Cbr\u003E    private void Awake() // important that this be in Awake\u003Cbr\u003E    {\u003Cbr\u003E        // just a little future-proofing\u003Cbr\u003E        if (Instance.GetType() != typeof (GameVariables))\u003Cbr\u003E        {\u003Cbr\u003E            Debug.LogError(string.Format(\u0022{0} cannot run; conflicting GameVariables instance of type {1}\u0022,\u003Cbr\u003E                GetType().Name, Instance.GetType().FullName));\u003Cbr\u003E            Destroy(this);\u003Cbr\u003E            return;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        Instance = this;\u003Cbr\u003E        DontDestroyOnLoad(this);\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    public override int GetPartCountLimit(float editorNormLevel)\u003Cbr\u003E    {\u003Cbr\u003E        var baseLimit = base.GetPartCountLimit(editorNormLevel);\u003Cbr\u003E\u003Cbr\u003E        if (!HighLogic.LoadedSceneIsEditor) return baseLimit;\u003Cbr\u003E\u003Cbr\u003E        return baseLimit \u002B EditorLogic.fetch.ship.parts\u003Cbr\u003E            .Count(p =\u0026gt; p.GetComponent\u0026lt;ExtendPartCountLimitModule\u0026gt;() != null);\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Epublic class ExtendPartCountLimitModule : PartModule\u003Cbr\u003E{\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}