{"TopicId":117090,"ForumId":36,"TopicTitle":"[WIP][1.8.x] SSTULabs - Low Part Count Solutions (Orbiters, Landers, Lifters) - Dev Thread [11-18-18]","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2015-07-28T18:13:57Z","PageNum":236,"Articles":[{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2017-03-30T15:25:33Z","Content":"Unsurprisingly (given the author) awesome."},{"CreatedByName":"Akira_R","CreatedById":117470,"CreatedDateTime":"2017-03-30T21:31:12Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) I love this!!!\n\nOne feature request/suggestion. How hard would it be to give us the ability to save a color.\n\nYou said there will be a couple buttons for preset colors, would it be extremely difficult to give us the ability to adjust sliders to find a color we like and then hit \u0022save\u0022 and it is added as another \u0022preset\u0022?"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2017-03-30T21:54:25Z","Content":"\u003E \n\u003E \n\u003E 22 minutes ago, Akira\\_R said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) I love this!!!\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E One feature request/suggestion. How hard would it be to give us the ability to save a color.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E You said there will be a couple buttons for preset colors, would it be extremely difficult to give us the ability to adjust sliders to find a color we like and then hit \u0022save\u0022 and it is added as another \u0022preset\u0022?\n\u003E \n\nInstead of a \u0022save\u0022 to a given save game, perhaps it could update an sstu cfg file, so we keep ideal colors across saves."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-31T15:13:58Z","Content":"\u003E \n\u003E \n\u003E 17 hours ago, Akira\\_R said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) I love this!!!\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E One feature request/suggestion. How hard would it be to give us the ability to save a color.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E You said there will be a couple buttons for preset colors, would it be extremely difficult to give us the ability to adjust sliders to find a color we like and then hit \u0022save\u0022 and it is added as another \u0022preset\u0022?\n\u003E \n\nThat is outside the scope of what I\u0027m currently trying to accomplish, but might be an option in the future.  Currently the \u0027preset\u0027 colors are loaded from a .cfg file, that can be edited or patched (and shared), so that will have to suffice for now as far as customization goes."},{"CreatedByName":"Akira_R","CreatedById":117470,"CreatedDateTime":"2017-03-31T15:51:42Z","Content":"\u003E \n\u003E \n\u003E 35 minutes ago, Shadowmage said:\n\u003E \n\u003E \n\u003E That is outside the scope of what I\u0027m currently trying to accomplish, but might be an option in the future.  Currently the \u0027preset\u0027 colors are loaded from a .cfg file, that can be edited or patched (and shared), so that will have to suffice for now as far as customization goes.\n\u003E \n\nI kind of assumed it would be a system like that and was hoping you had some magic way to load changes made to the .cfg lol\n\nWill we be able to add new presets and your UI will make new buttons for them or will we be limited to changing the already existing presets?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-31T16:02:05Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, Akira\\_R said:\n\u003E \n\u003E \n\u003E I kind of assumed it would be a system like that and was hoping you had some magic way to load changes made to the .cfg lol\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Will we be able to add new presets and your UI will make new buttons for them or will we be limited to changing the already existing presets?\n\u003E \n\nYou can add/edit/remove whatever you would like.  The GUI loads whatever is in the file, and has a scrollable area in case someone adds a ton of new colors.  As long as you reload the database between edits, the GUI should pick up the new config data immediately."},{"CreatedByName":"Akira_R","CreatedById":117470,"CreatedDateTime":"2017-03-31T16:04:25Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Shadowmage said:\n\u003E \n\u003E \n\u003E You can add/edit/remove whatever you would like.  The GUI loads whatever is in the file, and has a scrollable area in case someone adds a ton of new colors.  As long as you reload the database between edits, the GUI should pick up the new config data immediately.\n\u003E \n\nI always forget about that lol, thank\u0027s I can\u0027t wait to use this in game!!"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-31T16:48:13Z","Content":"Bit of a heads up:\n\nThe initial KSP 1.3 releases of SSTU might have some incompatibilities with older saves / craft files (probably not game-breaking).  I\u0027m working through the specifics of it now.  Currently it looks like the engine cluster spacing and vertical offsets might end up being off a bit for multi-engine parts.  Hopefully shouldn\u0027t be any game-breaking changes, but it is a bit early to be able to say one way or the other.\n\nWorking through a major cleanup pass on all of the modular part modules (fuel tanks, engine clusters, upper stages, station-core, msrb), to update them for some of the fixes in KSP API, and for some of the new techniques I have learned over the years of dealing with C# and Unity.  Should result in a more standardized feature set across the parts, as they will all be using a lot of the same code on the back end.  Also lots easier to maintain in the long run; instead of mostly copy-pasted code in 5 different classes needing updating individually, I can update the shared modular code and fix them all at the same time.\n\nProgramming with delegates -- fun stuff.  Coming from a Java background, this wasn\u0027t really possible in a clean manner.  But with C#, the ability to pass around a method/function as if it were a variable is...great.  Now if only I could figure out how to dynamically reference a field of a class without using reflection.... (I need a reference to a field in such a way as I can pass in any instance of a given class and retrieve the value of a given field; but it needs to work with multiple unique class types that have different field names).\n\nProbably still a week or two out from seeing any of this stuff in a release (and still pending the 1.3 KSP release, and ModuleManager being updated).  Tons of code-side work to do, and then I still need to create masks and redo the textures for a few hundred models.  This stuff is all up on the SSTULabs repository under the various dev-branches if anyone wanted to try out the WIP code.... but be aware that it is highly WIP, and might not even be usable at any given time (will be more stable/usable in about a week or so as I finish the code work and move onto the texture/masking work).\n\n[@JoseEduardo](https://forum.kerbalspaceprogram.com/index.php?/profile/127759-joseeduardo/) and/or [@stratochief66](https://forum.kerbalspaceprogram.com/index.php?/profile/59541-stratochief66/) Are you still maintaining/helping with the SSTU-\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E configs?  If there were any code-side changes needed in SSTU to fix any incompatibilities, now would be the time for them to be made.  Is there anything horribly broken?  (aside from some \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E issues)"},{"CreatedByName":"Calvin_Maclure","CreatedById":162815,"CreatedDateTime":"2017-03-31T16:52:58Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/), love the way you take the time to improve what\u0027s already existing, mate. Love hearing a modder say he\u0027s optimizing code."},{"CreatedByName":"JoseEduardo","CreatedById":127759,"CreatedDateTime":"2017-03-31T17:46:16Z","Content":"No, I\u0027m not maintaining it anymore  \n\nbtw, since you are working on the code, can I ask you if it is possible to add a slidebar or something to change the rotation of the engine clusters in-game? some engines look right with the clusters, but others might look off ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"CatastrophicFailure","CreatedById":57438,"CreatedDateTime":"2017-03-31T18:16:48Z","Content":"\u003E \n\u003E \n\u003E 29 minutes ago, JoseEduardo said:\n\u003E \n\u003E \n\u003E No, I\u0027m not maintaining it anymore  \n\u003E   \n\u003E \n\u003E btw, since you are working on the code, can I ask you if it is possible to add a slidebar or something to change the rotation of the engine clusters in-game? some engines look right with the clusters, but others might look off ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nSecond this. The new RD-180 is a great example. Awesome engine, but clusters of two just look... odd."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-31T18:23:02Z","Content":"\u003E \n\u003E \n\u003E 33 minutes ago, JoseEduardo said:\n\u003E \n\u003E \n\u003E No, I\u0027m not maintaining it anymore  \n\u003E   \n\u003E \n\u003E btw, since you are working on the code, can I ask you if it is possible to add a slidebar or something to change the rotation of the engine clusters in-game? some engines look right with the clusters, but others might look off ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nGood to know ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nSlider -- not really.  You can\u0027t dynamically add KSPFields/UI controls to a PartModule, and each engine in the layout would need its own rotation field/UI control so it can be controlled individually (so I would need from 1 to 9 fields depending on the layout, possibly more if using layouts with \u003E9 engines).  Unless you are proposing a global rotation offset for all engines in a layout?  Would be doable, but wouldn\u0027t work on all of the layout/engine/mount combinations correctly (e.g. might work for the Four-X layout, but would not work properly on the Three-Inline layout).\n\n\u003E \n\u003E \n\u003E 6 minutes ago, CatastrophicFailure said:\n\u003E \n\u003E \n\u003E Second this. The new RD-180 is a great example. Awesome engine, but clusters of two just look... odd.\n\u003E \n\nHeh, blame the Russians ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"JoseEduardo","CreatedById":127759,"CreatedDateTime":"2017-03-31T18:26:20Z","Content":"I was thinking on one global for the all engines in the layout, yes, keeps it simple and possibly compatible with new clusters (like those on that madman pack somewhere in the forum)"},{"CreatedByName":"CatastrophicFailure","CreatedById":57438,"CreatedDateTime":"2017-03-31T18:33:47Z","Content":"\u003E \n\u003E \n\u003E 10 minutes ago, Shadowmage said:\n\u003E \n\u003E \n\u003E Heh, blame the Russians ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\n*Don\u0027t* get me started!  ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif \u0022:sticktongue:\u0022)"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-31T18:50:46Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, JoseEduardo said:\n\u003E \n\u003E \n\u003E I was thinking on one global for the all engines in the layout, yes, keeps it simple and possibly compatible with new clusters (like those on that madman pack somewhere in the forum)\n\u003E \n\nI\u0027ll see what I can come up with.  Seems like it would need to be coupled with a \u0027rotation direction\u0027 that is set per-engine-position in each layout, as i many cases you would want engines to rotate opposite of eachother and not in the same direction; but it would be different per-layout, and per-position (could even set some of the engines in a layout to not rotate, if desired)."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-31T19:22:24Z","Content":"\u003E \n\u003E \n\u003E 49 minutes ago, JoseEduardo said:\n\u003E \n\u003E \n\u003E I was thinking on one global for the all engines in the layout, yes, keeps it simple and possibly compatible with new clusters (like those on that madman pack somewhere in the forum)\n\u003E \n\nAdded.  Engine layouts configs now support an optional \u0027direction\u0027 parameter in their position node specifications.  A single UI slider has been added to the engine-cluster module to allow for rotating all engines from -180 to \u002B180 degrees, in the direction specified for the position for that layout.  Default direction is 1, which should be counterclockwise (but might be clockwise... silly different coordinate systems in use everywhere); specifying 0 for the \u0027direction\u0027 in the position node will disable slider-based rotation for that position.  This does not rotate the mount, nor the location of the positions in the layout, merely the local rotation of each engine in its existing location as defined in the layout.\n\nThough this reminded me that there are per-engine-per-layout (and per-mount) overrides available for the rotations which can be specified in the part-configs (e.g.  [https://github.com/shadowmage45/SSTULabs/blob/master/GameData/SSTU/Parts/ShipCore/Engines/SC-ENG-RS-68.cfg#L152-L206](https://github.com/shadowmage45/SSTULabs/blob/master/GameData/SSTU/Parts/ShipCore/Engines/SC-ENG-RS-68.cfg#L152-L206) ).  So the proper solution, for the RD-180, would be for someone to figure out what those custom rotations would be and to submit a PR for them (or wait until I can get to it, which should happen before the 1.3 initial releases).  This would give them the proper initial rotations, which the user could then customize further with the \u0027rotation\u0027 slider."},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-04-02T01:09:22Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/)\n\nI\u0027m working on adding support for SSTU into Fusebox.\n\nSpecifically the solar panels.\n\nI need to know two numbers: \n\n1. Max EC generation possible for use in the Editor\n2. Current EC generation\n\nI see a field:  resourceAmount, but no explanation as to what it is.  Can  you help?\n\nThanks"},{"CreatedByName":"Iso-Polaris","CreatedById":165467,"CreatedDateTime":"2017-04-02T13:14:26Z","Content":"Cuold you add RealFuel compatibility for SSTU?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-04-02T16:41:45Z","Content":"\u003E \n\u003E \n\u003E 15 hours ago, linuxgurugamer said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m working on adding support for SSTU into Fusebox.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Specifically the solar panels.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I need to know two numbers: \n\u003E \n\u003E \n\u003E \n\u003E 1. Max EC generation possible for use in the Editor\n\u003E 2. Current EC generation\n\u003E \n\u003E \n\u003E \n\u003E I see a field:  resourceAmount, but no explanation as to what it is.  Can  you help?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Thanks\n\u003E \n\nresourceAmount is indeed the field you are looking for as far as max EC generation is concerned.  It is multiplied at runtime by the number of suncatcher transforms found in the model (which are unfortunately private...).\n\n\u0027energyFlow\u0027 is the current EC/s value, but it is a private field as well.\n\nEdit:  I\u0027ll look into cleaning up the max EC calculation to use the config value as a \u0027total\u0027, and dividing by transform# to get the per-transform value.  Will also see about adding a publicly accessible \u0027current\u0027 EC generation to simplify the integration support.\n\nWill probably be a few weeks out for these changes though (will first be avaialble for KSP 1.3\u002B more than likely), as I\u0027m in the middle of a fairly substantial rework on some models/shaders/textures that is going to keep me busy for a bit.  So the best bet on these would be to hold tight for a few more weeks; if anyone questions the status/etc, feel free to link them to this post.\n\n\u003E \n\u003E \n\u003E 3 hours ago, Iso-Polaris said:\n\u003E \n\u003E \n\u003E Cuold you add RealFuel compatibility for SSTU?\n\u003E \n\nShould be supported as far as plugin-level compatibility goes.  Patches are community provided/maintained, and nothing that I have any involvement in.  So if something isn\u0027t working, feel free to submit some patches to fix the problem/parts.\n\n(The existing RF support was intended for \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E compatibility along with the rest of the \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E patches, so might not work with stand-alone RF installs)\n\n**Edited \u003Ctime datetime=\u00222017-04-02T16:45:40Z\u0022 title=\u002204/02/2017 04:45  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 2, 2017\u003C/time\u003E by Shadowmage**"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-04-02T21:50:37Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, Shadowmage said:\n\u003E \n\u003E \n\u003E resourceAmount is indeed the field you are looking for as far as max EC generation is concerned.  It is multiplied at runtime by the number of suncatcher transforms found in the model (which are unfortunately private...).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u0027energyFlow\u0027 is the current EC/s value, but it is a private field as well.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edit:  I\u0027ll look into cleaning up the max EC calculation to use the config value as a \u0027total\u0027, and dividing by transform# to get the per-transform value.  Will also see about adding a publicly accessible \u0027current\u0027 EC generation to simplify the integration support.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Will probably be a few weeks out for these changes though (will first be avaialble for KSP 1.3\u002B more than likely), as I\u0027m in the middle of a fairly substantial rework on some models/shaders/textures that is going to keep me busy for a bit.  So the best bet on these would be to hold tight for a few more weeks; if anyone questions the status/etc, feel free to link them to this post.\n\u003E \n\nok, thanks"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-04-03T16:35:40Z","Content":"Spent my dev time over the weekend working on the recoloring update.  So much work to do... (didn\u0027t realize I had so many models...)\n\nThe MFT and MEC modulues have both been adapted to use the new modular-part code setup.  Will be working through the MSRB, MUS, and MSC modules this week now that I\u0027ve got the system worked out and working.  The change greatly reduces duplicate code across the modules and is giving them all a very similar internal layout to make them easier to maintain and work with in the long run.  Few hundred lines of code reduction per class so far, and potential for a bit more if I can find how to unify a few more functions.\n\nAll of the adapters, MFT-nosecones, and \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E-nosecones have all been combined onto a single texture sheet.  Results in much better use of the UV space, reduces the number of textures needed, and will give a consistent set of textures and colors across the parts.  Will be working through the rest of the nosecone/adapter stuff this evening, and then moving onto the engine mounts.\n\nI also intend to add recolor support to the Procedural Decoupler, Probe Core, Interstage Decoupler, Interstage Petal Adapter, and am going to attempt to add it to the stock-based payload fairings as well (no clue how that will go, they already use a customized shader setup; but I\u0027m going to give it a try...).\n\nLastly, I\u0027m going to try to work the recoloring system into the generic SSTUTextureSwitch setup so that it might easily be applied to parts for other mods.  Should be as simple as adding a patch to add the module to the part, and supplying the color masks if needed (optional, but highly recommended).  Might even be able to apply this to the SC-A/B/C/E part series... we\u0027ll see how motivated I am once the rest of the parts are finished up.\n\n**WARNING -** There -will- be some craft/vessel/save breakage with the update to 1.3.  So much is changing with the texture sets that I cannot guarantee any compatibility across KSP versions.  Most craft should survive the update physically (part names or stats aren\u0027t changing), but none of them will have the proper texture set / coloring information in place, and as such will revert to the defaults for the parts/models in use.\n\n**ADDITIONAL WARNING -** The texture set definition system is changing as well (the config file layout).  Any external packs using the SSTU plugin will need to also be adapted to the new texture set system, or their texture sets may be non-functional (I\u0027ve tried to keep a bit of extra code to allow for loading the old definitions, but they will be lacking some features).  This is mostly a warning for [@JoseEduardo](https://forum.kerbalspaceprogram.com/index.php?/profile/127759-joseeduardo/) and [@Jimbodiah](https://forum.kerbalspaceprogram.com/index.php?/profile/152759-jimbodiah/) for their custom expansion packs, though I\u0027m not sure how much you guys are using the texture-set stuff.  Feel free to contact me via PM and I can give you details on what is changing / etc."},{"CreatedByName":"Calvin_Maclure","CreatedById":162815,"CreatedDateTime":"2017-04-03T16:41:25Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/), I think you already stated this in the past, just cant remember what you said. But everything you just talked about in the above post, is that just for the 1.3 version or is it also for the 1.2.2 version?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-04-03T16:46:14Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, Calvin\\_Maclure said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/), I think you already stated this in the past, just cant remember what you said. But everything you just talked about in the above post, is that just for the 1.3 version or is it also for the 1.2.2 version?\n\u003E \n\nAll of this work will be for the initial KSP-1.3\u002B releases of SSTU.\n\nWhat you have now is the final 1.2.2 release."},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2017-04-03T16:54:40Z","Content":"\u003E \n\u003E \n\u003E On 3/22/2017 at 11:59 AM, Shadowmage said:\n\u003E \n\u003E \n\u003E [![clL0hYC.png](http://i.imgur.com/clL0hYC.png)](http://i.imgur.com/clL0hYC.png \u0022Enlarge image\u0022)\n\u003E \n\nI need to be able to do a 12 and 6x symmetry mount with these, can it be done?"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2017-04-03T17:03:22Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, regex said:\n\u003E \n\u003E \n\u003E I **need** to be able to do a 12 and 6x symmetry mount with these, can it be done?\n\u003E \n\n(my emphasis)\n\nI want to see whatever it is when you do it ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) ."}]}