{"TopicId":10276,"ForumId":36,"TopicTitle":"0.15 code update - PartModule, KSPField, KSPEvent, ConfigNode and PartResource","CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2012-05-08T23:55:23Z","PageNum":1,"Articles":[{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2012-05-08T23:55:23Z","Content":"Very very very interesting, but just one thing about the formatting for now: did you notice that the code boxes inside spoilers collapse to a single line? I suppose you didn\\\u0027t want them to do that."},{"CreatedByName":"Capt\u0026#039;n Skunky","CreatedById":1261,"CreatedDateTime":"2012-05-09T00:00:49Z","Content":"\u003E \n\u003E Very very very interesting, but just one thing about the formatting for now: did you notice that the code boxes inside spoilers collapse to a single line? I suppose you didn\\\u0027t want them to do that.\n\nThey aren\\\u0027t doing that for me. I get about a 15 line code box.\n\nArrr!\n\nCapt\\\u0027n Skunky"},{"CreatedByName":"C7Studios","CreatedById":3895,"CreatedDateTime":"2012-05-09T00:16:22Z","Content":"I checked on my own machine here. The code looking like that seems to be caused by google chrome. I tried firefox and IE (shudder) they both show about 15 lines instead of 1."},{"CreatedByName":"FlutteryChicken","CreatedById":22399,"CreatedDateTime":"2012-05-19T13:44:12Z","Content":"\u003E \n\u003E I checked on my own machine here. The code looking like that seems to be caused by google chrome. I tried firefox and IE (shudder) they both show about 15 lines instead of 1.\n\nI have noticed that on chrome as well, it\\\u0027s because the code tag is having a style attribute attached to it (\u0027style=\u0027height: 20px;\u0027), where as the one\\\u0027s that are fine don\\\u0027t have this.\n\nit\\\u0027s caused by this code in the theme.js?fin20\n\n    function smf_codeBoxFix(){\tvar codeFix = document.getElementsByTagName(\\\u0027code\\\u0027);\tfor (var i = codeFix.length - 1; i \u003E= 0; i--)\t{\t\tif (is_webkit \u0026\u0026 codeFix[i].offsetHeight \u003C 20)\t\t\tcodeFix[i].style.height = (codeFix[i].offsetHeight \u002B 20) \u002B \\\u0027px\\\u0027;\t\telse if (is_ff \u0026\u0026 (codeFix[i].scrollWidth \u003E codeFix[i].clientWidth || codeFix[i].clientWidth == 0))\t\t\tcodeFix[i].style.overflow = \\\u0027scroll\\\u0027;\t\telse if (\\\u0027currentStyle\\\u0027 in codeFix[i] \u0026\u0026 codeFix[i].currentStyle.overflow == \\\u0027auto\\\u0027 \u0026\u0026 (codeFix[i].currentStyle.height == \\\u0027\\\u0027 || codeFix[i].currentStyle.height == \\\u0027auto\\\u0027) \u0026\u0026 (codeFix[i].scrollWidth \u003E codeFix[i].clientWidth || codeFix[i].clientWidth == 0) \u0026\u0026 (codeFix[i].offsetHeight != 0))\t\t\tcodeFix[i].style.height = (codeFix[i].offsetHeight \u002B 24) \u002B \\\u0027px\\\u0027;\t}}\n\nThe problem occurs when the spoiler tag is wrapped around the code tag.\n\nThe easiest fix would be to change the line \n\n    if (is_webkit \u0026\u0026 codeFix[i].offsetHeight \u003C 20)\n\n to \n\n    if (is_webkit \u0026\u0026 codeFix[i].offsetHeight \u003C 20 \u0026\u0026 codeFix[i].parentNode.style.display != \u0027none\u0027)"},{"CreatedByName":"Papa_Joe","CreatedById":10788,"CreatedDateTime":"2012-05-20T02:36:59Z","Content":"Thanks for this Mu. I\\\u0027ve been wanting to get into plugin dev, so this will be awesome. I\\\u0027ll share when there is something worth sharing."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-20T03:11:32Z","Content":"Thanks Mu, I\\\u0027m still a bit dazed processing this, but great job taking the time to explain things for us.\n\n I had a couple initial questions/issues that came to mind:\n\n 1. Is there a way to manipulate or read which modules are running on a Part runtime? Specifically, is it possible to add a module, or retrieve a list of modules that are attached to an arbitrary Part reference through code?\n\n Looks like there\\\u0027s\n\n    public PartModule AddModule(ConfigNode node);public PartModule AddModule(string moduleName);andpublic PartModuleList Modules { get; }andpublic void RemoveModule(PartModule module);\n\n@-\u003E2. How are conflicting resource definitions handled? As in multiple mod/plugins specifying the same resource name (LOX or LH2) with differing parameters (lbs/ft^3 or kg/m^3 or kilobananas/doo-hickey). Also, is there anything in place to allow differently named resources (LOX and LiquidOxygen) that should resolve to the same physical substance \u0027object\u0027 to do so?\n\n 3. Perhaps I\\\u0027m still a bit out of it, but in your \u0027generic reaction engine\u0027 example, how exactly are you calling part.RequestResource(p.id, p.currentRequirement); Seems the module class has a \u0027part\u0027 member that presumably gets set to the relevant part.\n\n@-\u003E4. The fuel feed system seems to be massively bugged in the initial .15 release. Even once that is fixed, some of us prefer to specify our own \u0027resource distribution\u0027 scheme. If we use part.RequestResource(), are we locked into the default distribution rules? Can we explicitly call a something-or-other on a specific part reference to get it to specifically handle resource...stuff only within itself(as in not propagating the task beyond itself)?\n\n I think that\\\u0027s it, but you\\\u0027re finally forcing me to learn reflection, attributes, and a whole bunch of that other silly C# stuff I\\\u0027d been ignoring, so um...what was I saying again? Anyway, thanks again for explaining it to us.\n\nEdit: Thought of another thing, is there a way to add a new resource entry in code at runtime?\n\nLooks like there\\\u0027s\n\n    public PartResource AddResource(ConfigNode node);public PartResourceList Resources { get; }\n\n@-\u003EEdit 2: In light of the changes to the structure of the part cfg files, does the new paradigm extend to the actual Part definition, and if so, could you please give us an example of what a blank part cfg should look like? As in just a static do-nothing part before any module stuff is added?\n\n@-\u003EEdit 3: Fuel handling is usually done by mass flow, not volume flow(At least in calculations or stat listings of rocket engines, ie Isp, dry/wet mass, stoichiometrics). Having the resources specified in tank and requests in units of volume rather than mass necessitates more spreadsheet work when setting up parts.\n\n@-\u003EEdit 4: This post looks like a huge mess now, but I was wondering how the part GUI\\\u0027s, and icon infoboxes are to be handled. Still working on creating your generic rocket module example, but how/if it interacts with the game GUI is still a mystery. Same goes for a modularized fueltank, especially as I have it set up for dual fuel storage and burn right now."},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-22T12:48:36Z","Content":"Am I getting it right that the list of *KSPFields* cannot be altered at run-time? \n\nIs there some other way to implement a dynamic list of items in part\\\u0027s context menu (e.g. a list of nearest vessels with an ability to click one of them)? We can surely add, well, 5 pre-defined fields *\u0027vessel1, vessel2, ... vessel5\u0027* and change their *guiActive/guiName* as the list changes; but is it the *right* way? o\\_O"},{"CreatedByName":"RC1062","CreatedById":10709,"CreatedDateTime":"2012-05-22T13:02:30Z","Content":"\u003E \n\u003E I checked on my own machine here. The code looking like that seems to be caused by google chrome. I tried firefox and IE (shudder) they both show about 15 lines instead of 1.\n\nSafari displays it incorrectly aswell if that helps."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-23T10:59:18Z","Content":"\u003E \n\u003E Am I getting it right that the list of *KSPFields* cannot be altered at run-time? \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E Is there some other way to implement a dynamic list of items in part\\\u0027s context menu (e.g. a list of nearest vessels with an ability to click one of them)? We can surely add, well, 5 pre-defined fields *\u0027vessel1, vessel2, ... vessel5\u0027* and change their *guiActive/guiName* as the list changes; but is it the *right* way? o\\_O\n\n I haven\\\u0027t gotten around to messing with the GUI stuff yet, but I think we ran into the same underlying issue. The [KSPField] attribute requires one of the listed types, or a class that implements the IConfigNode interface. What you\\\u0027re specifically asking for is to pass a List\u003Ct\u003E to whatever it is that handles the GUI. I am also \u0027losing\u0027 my list through nonpersistance, as [KSPField] doesn\\\u0027t handle List\u003Ct\u003E objects.\u003C/t\u003E\u003C/t\u003E\n\n What I think will work, and am going to try is to wrap my list inside a class that implements IConfigNode, and the Load/Save members to resolve the strings back into a list. If that works like I think it should, I can then apply [KSPField] to an object of my wrapper class type, and it\\\u0027ll persist properly. What you will probably need to do is add more stuff to the wrapper class to let whatever the GUI code is resolve it to whatever it needs to.\n\n As far as actually adding [KSPField] stuff at runtime, I found something [here](http://msdn.microsoft.com/en-us/library/system.componentmodel.typedescriptor.aspx) that may not work due to it\\\u0027s specific limitations, and [here](http://www.codeproject.com/Articles/1811/Creating-and-Using-Attributes-in-your-NET-applicat) that may work using reflection.emit to assemble and manufacture a custom class at runtime.\n\n In general though, because [KSPField] is an attribute, it\\\u0027s in no way dynamic at runtime, unless a reflection.emit class assembler and factory class scheme work out. But that is really, really more involved than modding a game should ever become."},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-23T11:15:33Z","Content":"\u003E \n\u003E In general though, because [KSPField] is an attribute, it\\\u0027s in no way dynamic at runtime, unless a reflection.emit class assembler and factory class scheme work out. But that is really, really more involved than modding a game should ever become.\n\nWell, I bet it\\\u0027s *PartModule.Fields* iterator used when building context menu. And it *may* (or may *not*) be just a *static* list initialized in constructor with all the *KSPFields* available at *that* moment, and may be not updated in run-time... \nNeeds testing :![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-23T12:50:35Z","Content":"You might very well be right, but there is Part.AddModule(), which I was assuming is available at runtime to plugins, which would necessitate the list of fields being dynamic. If it\\\u0027s not going to work properly, that\\\u0027s another problem in itself.\n\n I think the fields list is actually a \u0027public BaseFieldList Fields { get; }\u0027, I tried looking in BaseFieldList, but couldn\\\u0027t make much sense of it, too much hidden code."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-24T03:14:59Z","Content":"I moved my persistent persistence grievance to the Dev forum as a bug, as that\\\u0027s what I\\\u0027ve concluded it is."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-25T07:16:30Z","Content":"I still don\\\u0027t understand how the data loaded into an IConfigNode class is supposed to persist through scenes once it gets loaded from part.cfg, but I have a basic order of operations for the PartModule in action, so I\\\u0027ll share that.\n\n-\u003Epart is created(added to scene, or created from part.cfg)\n\n1. PartModule constructor called\n\n2. PartModule OnAwake called\n\n3. : IConfigNode class constructors for [KSPField] fields in PartModule class\n\n4a. : IConfigNode class Load() called \u0027\u0027 if this is the part.cfg reading scene \u003C-This is not done elsewhere\n\n4b. : IConfigNode class Save() called \u0027\u0027 this seems to happen when launching from VAB, and starting flightscene. It appears to be tied to the flightstate saving. It is not called after reading part.cfg.\n\n5a. PartModule OnLoad() called \u0027\u0027 \u003C-This is done when reading part.cfg, nowhere else\n\n5b. PartModule OnSave() called \u0027\u0027 \u003C-This is done when saving the flightstate, after the [KSPField] Save() calls\n\n6. PartModule OnStart called \u003C-This is not done when reading part.cfg, but is done in VAB/Flightscene. Flightscene happens just before \n\nPQS (KerbinOcean) UpdateInit=3.098877s (1252 quads)\n\nPQS (OceanPQS) UpdateInit=0.001693726s (44 quads)\n\n7. OnUpdate etc called once the part is activated. This could be problematic for parts that should update when inactive."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-26T11:20:32Z","Content":"My workaround for custom type persistence:\n\n 1. Add a [KSPField] string to your PartModule, and override OnAwake and OnLoad like this:\n\n\u003E \n\u003E public class MyModule : PartModule  \n\u003E {  \n\u003E  [KSPField]  \n\u003E  public string MyPersistantData;  \n\u003E   \n\u003E  public MyDataStructure MDS0 = new MyDataStructure();  \n\u003E   \n\u003E  public override void OnAwake()  \n\u003E  {  \n\u003E  if (MDS0 == null)  \n\u003E  MDS0 = new MyDataStructure();  \n\u003E  DeSerialize(); //read all the data stored in MyPersistantData back into the relevant places.  \n\u003E  base.OnAwake();  \n\u003E  }  \n\u003E   \n\u003E  public override void OnLoad(ConfigNode node)  \n\u003E  {  \n\u003E  foreach (ConfigNode subnode in node.nodes)  \n\u003E  {  \n\u003E  switch (subnode.name)  \n\u003E  {  \n\u003E  case \u0027DuelingInts\u0027:  \n\u003E  {  \n\u003E  MDS0.Load(subnode);  \n\u003E  break;  \n\u003E  }  \n\u003E  }  \n\u003E  }  \n\u003E  Serialize(); //store all necessary data into MyPersistantData  \n\u003E  base.OnLoad(node);  \n\u003E  }  \n\u003E   \n\u003E  public void Serialize()  \n\u003E  {  \n\u003E  MyPersistantData = string.Empty;  \n\u003E  if (MDS0 != null)  \n\u003E  MyPersistantData \u002B= MDS0.ToString();  \n\u003E  //can store more data here, just use a delimiter like in the class  \n\u003E  }  \n\u003E   \n\u003E  public void DeSerialize()  \n\u003E  {  \n\u003E  if (string.IsNullOrEmpty(MyPersistantData))  \n\u003E  return;//fail if nothing was saved  \n\u003E  //can split the string into substrings here like in the class if you\\\u0027re packing multiple objects into it  \n\u003E  MDS0.Read(MyPersistantData);  \n\u003E  //this returns a bool for handling multiple object packing  \n\u003E  }  \n\u003E }\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\n 2. Setup your class you need persistent data storage for like so:\n\n\u003E \n\u003E //need this for culture normalization, crazy Euros use all kinds of funny stuff ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)  \n\u003E using System.Globalization;  \n\u003E //  \n\u003E   \n\u003E public class MyDataStructure  \n\u003E {  \n\u003E  public int Data0;  \n\u003E  public int Data1;  \n\u003E   \n\u003E  //These two just keep things consistent  \n\u003E  private static CultureInfo cult = CultureInfo.InvariantCulture;  \n\u003E  private static NumberStyles style = NumberStyles.Float | NumberStyles.AllowThousands;  \n\u003E  //  \n\u003E  private static string[] Delimiter = new string[] { \u0027\\*\u0027 };  \n\u003E  private static int NumEntries = 2;  \n\u003E   \n\u003E  /\\* Just an example of validating data  \n\u003E  private bool ValidateMe(int i)  \n\u003E  {  \n\u003E  if (i \u003C 17 \u0026\u0026 i \u003E 3)  \n\u003E  return true;  \n\u003E  return false;  \n\u003E  }  \n\u003E  \\*/  \n\u003E   \n\u003E  //as this class does not use the IConfigNode interface or loading mechanism, this method can be named anything  \n\u003E  public void Load(ConfigNode node)  \n\u003E  {  \n\u003E  if (node == null)  \n\u003E  return;  \n\u003E  //used tryparse here as that does not throw exceptions  \n\u003E  int.TryParse(node.GetValue(\u0027inta\u0027), out Data0);  \n\u003E  int.TryParse(node.GetValue(\u0027intb\u0027), out Data1);  \n\u003E  }  \n\u003E   \n\u003E  public bool Read(string s)  \n\u003E  {  \n\u003E  if (string.IsNullOrEmpty(s))  \n\u003E  return false;//Failure  \n\u003E  string[] strarr = s.Split(Delimiter, System.StringSplitOptions.RemoveEmptyEntries);//Holds array of string encoded values  \n\u003E  if (strarr.Length != NumEntries)  \n\u003E  return false;//Failure, incorrect number of serialized elements, or corruption  \n\u003E  int[] intvals = new int[NumEntries];//will hold array of decoded values  \n\u003E  bool valid = true;  \n\u003E  for (int i = 0; i \u003C NumEntries; i\u002B\u002B)  \n\u003E  {  \n\u003E  valid \u0026= int.TryParse(strarr[i], style, cult, out intvals[i]);//Try to decode values, and keep a running failure check  \n\u003E  //valid \u0026= ValidateMe(intvals[i]); //Example of another check to make sure the value is valid.  \n\u003E  }  \n\u003E  if (valid) //if all the data decoded and validated right, fill it in  \n\u003E  {  \n\u003E  Data0 = intvals[0];  \n\u003E  Data1 = intvals[1];  \n\u003E  }  \n\u003E  return valid;  \n\u003E  }  \n\u003E   \n\u003E  public override string ToString()  \n\u003E  {  \n\u003E  string s = string.Empty;  \n\u003E  s \u002B= Data0.ToString(cult);  \n\u003E  s \u002B= Delimiter;  \n\u003E  s \u002B= Data1.ToString(cult);  \n\u003E  return s;  \n\u003E  }  \n\u003E }\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\n 3. Setup part.cfg like so:\n\n\u003E \n\u003E // Kerbal Space Program - Part Config  \n\u003E //   \n\u003E //   \n\u003E   \n\u003E // --- general parameters ---  \n\u003E name = KISConnect  \n\u003E module = Strut  \n\u003E author = Kellven  \n\u003E   \n\u003E // --- asset parameters ---  \n\u003E mesh = ConnectV2.dae  \n\u003E scale = 1  \n\u003E texture = ConnectV2.png  \n\u003E specPower = 0.1  \n\u003E rimFalloff = 3  \n\u003E alphaCutoff = 0  \n\u003E   \n\u003E // --- node definitions ---  \n\u003E node\\_attach = 0.0, 0.0, -0.10, 0.0, 0.0, 1.0  \n\u003E   \n\u003E   \n\u003E // --- editor parameters ---  \n\u003E cost = 1000  \n\u003E category = 1  \n\u003E subcategory = 0  \n\u003E title = KIS Connect v2  \n\u003E manufacturer = Kellvonic Imperial Spaceyard  \n\u003E description = Stick just one of these on your ship, and it will automagically make the parts connect better. Adding more than one will not increase connection betterness.  \n\u003E   \n\u003E // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision  \n\u003E attachRules = 0,1,0,1,1  \n\u003E   \n\u003E // --- standard part parameters ---  \n\u003E mass = 0.000001  \n\u003E dragModelType = default  \n\u003E maximum\\_drag = 0  \n\u003E minimum\\_drag = 0  \n\u003E angularDrag = 0  \n\u003E crashTolerance = 100  \n\u003E breakingForce = 1000  \n\u003E breakingTorque = 1000  \n\u003E maxTemp = 2900  \n\u003E   \n\u003E fullExplosionPotential = 0.0  \n\u003E emptyExplosionPotential = 0.0  \n\u003E   \n\u003E MODULE  \n\u003E {  \n\u003E  name = MyModule  \n\u003E   \n\u003E  DuelingInts  \n\u003E  {  \n\u003E  inta = 1  \n\u003E  intb = 2  \n\u003E  }  \n\u003E }\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\n Just used my own part as an example. It\\\u0027s a strut, shows up in strut section, and does nothing but read two ints from part.cfg into a data structure, but it should persist that structure through the various scenes. There might be a couple of errors in here still, I did a quick rewrite of my code into a general purpose example, but the general workaround idea does work in game."},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2012-05-29T19:33:10Z","Content":"I tried the resource system with my solar panels and some power consuming modules. It works, but the tank gives/takes the resources only in case the modules can reach it through crossfeed capable parts. However for some systems like electricity it could be better to have access RCS way. Maybe there could be additional parameter that changes request logic implemented?"},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-30T05:15:58Z","Content":"Alchemist, I assume you\\\u0027re using the part.RequestResource thing. Have you tried modifying part.Resources[0].amount directly? I\\\u0027m curious as to whether or not that also modifies the return value of part.GetResourceMass.\n\n The part.mass remains constant (as in the old drymass value), and I\\\u0027m not entirely sure whether or not the mass from resources is thrown into the gravity, CoM, and applyforce calculations, or is just ignored. I was going to add micro-resource tanks to my part-engines for air, oxidizer, and fuel, so they would work as a complete-engine-in-a-part instead of the multiple-parts-per-engine we seem to be having now. Probably not a big thing, but would be nice is the wetmass of the engine was used when applying the force, instead of the drymass, empty/full fuel tanks are something else entirely.\n\n If there\\\u0027s an additional \u0027RequestMode\u0027 param added to the part.RequestResource, I\\\u0027d like to see an option to lock it to a specific part, so it would assume there\\\u0027s no crossfeed paths connected, and just pull from itself. To pull from a tank, you\\\u0027d have to call the method on a ref to the specific tank you wanted to draw from."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-30T07:56:40Z","Content":"That was interesting, it seems the [KSPField] persistence might still be having problems, but a separate static class with a static ConfigNode field will persist (Just doesn\\\u0027t get cleaned up I guess).\n\n If that will work with a List\u003Cconfignode\u003E also, can just call a static member inside OnLoad to check if the part is already in the list, and if not, add a new ConfigNode(\u0027PartName here\u0027) to the list. Then in OnStart call another member to return a node by \u0027PartName here\u0027, and send it to whatever Load(ConfigNode) members need it to re-initialize the part data. Eliminates the need to read/write from disk.\u003C/confignode\u003E"},{"CreatedByName":"I got BCed","CreatedById":18121,"CreatedDateTime":"2012-06-28T12:27:14Z","Content":"guys I\\\u0027m currently developing a system where all parts will consume a resource when the recive certain in flight messages, (like the ones to fire RCS, or move canards, or lower legs, or... (you get the idea)) I\\\u0027m havving to problems with this:\n\n1. how do I override the default PartModual classes without overriding there existing contents, or how do I obtain the existing code so I can paste it in with what I want to add.\n\n2. I have no idea what the message strings are, what are they? (all of them)"},{"CreatedByName":"BlackBicycle","CreatedById":29657,"CreatedDateTime":"2012-06-28T13:02:27Z","Content":"I am sure you will be better off starting a new thread here:\n\n[http://kerbalspaceprogram.com/forum/index.php?board=39.0](http://kerbalspaceprogram.com/forum/index.php?board=39.0)"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-04-30T21:17:43Z","Content":"Since this thread is now in the correct forum, I\u0027ll go ahead and reply to it and get discussion started again.\n\nI had a solution to the following, but it was bugged, so I\u0027m scrapping it and starting over. Knowing how \u0022official\u0022 modules handle this would be ideal.\n\n1. How do modules like moduleEngines currently store/retrieve List\u003C\u003Es like moduleEngines\u0027 Propellants? Clearly it works for these modules, so I\u0027d like to know how it\u0027s being done.\n\n2. Secondarily, if I change a part\u0027s Resources in the editor, how do I get those changes to propagate to the version that spawns on the launchpad?\n\nHere\u0027s my code, if it helps:\n\n[modularFuelTanks.cs](https://github.com/Ialdabaoth/modularFuelTanks/blob/master/modularFuelTank.cs)\n\n**Edited \u003Ctime datetime=\u00222013-05-01T00:41:32Z\u0022 title=\u002205/01/2013 12:41  AM\u0022 data-short=\u002211 yr\u0022\u003EMay 1, 2013\u003C/time\u003E by ialdabaoth**"},{"CreatedByName":"Morolas","CreatedById":62725,"CreatedDateTime":"2013-05-23T09:23:12Z","Content":"what happened to the first post? it was VERY helpful!"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-05-23T13:38:52Z","Content":"\u003E \n\u003E what happened to the first post? it was VERY helpful!\n\n[http://forum.kerbalspaceprogram.com/showthread.php/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026viewfull=1#post156430](https://forum.kerbalspaceprogram.com/showthread.php/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026viewfull=1#post156430)"}]}