{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":23,"Articles":[{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-04-15T03:48:16Z","Content":"\n\u003Cp\u003EI already added an issue to the tracker basically asking what the correct behavior should be. On one hand locks are like variables and variables don\u0027t have scope, but on the other hand locks also behave like functions and I\u0027m not sure I like having functions without scope. We\u0027ll have to talk it over to find a solution we see fit.\u003C/p\u003E\n"},{"CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2014-04-15T03:48:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marianoapp\u0022 data-cite=\u0022marianoapp\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E@Xty:\u003C/strong\u003E The problem is that locks declared in a parent program are not available in a child program. There\u0027s an explanation for why adding the \u0022unlock throttle\u0022 line in the child program causes the throttle to unlock but that is more suited to the development thread, so I won\u0027t enter into details here.\u003Cp\u003ETry changing the \u0022unlock throttle\u0022 for \u0022set throttle to 0\u0022 which has the same effect and shouldn\u0027t have this problem.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh I see, thank you, it works now. It was actually the opposite of what you said, UNLOCK THROTTLE works, but LOCK THROTTLE causes the bug. \u003C/p\u003E\u003Cp\u003ETangent question, why does LOCK THROTTLE TO 0 unlock the throttle? What if I actually want to lock the throttle off?\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-04-15T04:02:50Z","Content":"\n\u003Cp\u003EThe throttle is a special case which requires to be updated in every update (every frame, by design of KSP) so when you lock the throttle to anything the program also adds a trigger that evaluates the lock on every update and sends that value to KSP.\u003C/p\u003E\u003Cp\u003EDue to the way the program gets compiled the trigger is added if a throttle lock exists anywhere in the program, even if it never gets executed, and since the throttle hasn\u0027t been locked to anything yet the trigger returns the default value of the throttle variable (which is zero).\u003C/p\u003E\n"},{"CreatedByName":"TranquilTempest","CreatedById":18141,"CreatedDateTime":"2014-04-15T04:14:13Z","Content":"\n\u003Cp\u003EIn case anyone\u0027s curious about the ascent autopilot I\u0027m working on: \u003Ca href=\u0022http://pastebin.com/439Bm7yi\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/439Bm7yi\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI wouldn\u0027t call it done, but I\u0027ve wasted enough time on it tonight, and I think it\u0027s good enough to share.\u003C/p\u003E\u003Cp\u003EIntended use: remotetech probes/relays in .24. I need to work on reducing the size of the script and the amount of time it takes to circularize. I\u0027ll probably end up consolidating the three sections into one loop, so I can get rid of the duplicated staging code and steering error/SAS code\u003C/p\u003E\u003Cp\u003EI considered starting a competition to develop the most reliable and efficient ascent script, but decided the fun way to do that would be too much work to organize and score. The idea was to have each competitor submit an autopilot script and a .craft. Each submitted script would be run on each submitted craft, and ranked by average altitude, remaining fuel, and eccentricity. So you design a ship as difficult to pilot as possible, playing to the strengths of your particular autopilot script, and exploiting weaknesses you think everyone else\u0027s autopilot scripts would have.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-15T04:39:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marianoapp\u0022 data-cite=\u0022marianoapp\u0022\u003E\u003Cdiv\u003EI already added an issue to the tracker basically asking what the correct behavior should be. On one hand locks are like variables and variables don\u0027t have scope, but on the other hand locks also behave like functions and I\u0027m not sure I like having functions without scope. We\u0027ll have to talk it over to find a solution we see fit.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs long as there\u0027s only one way to do it, I\u0027d rather that the one way be global. Scoping makes sense only when there\u0027s ways to choose the scope (i.e. local when you want, global when you want). If scoping was forced to be local only, then it would create the opposite problem, where you can\u0027t delegate your steering operations to a subprogram and all steering would have to be in the top level program.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-17T14:13:59Z","Content":"\n\u003Cp\u003EAre there any plans for user console input?\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-04-17T15:25:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EAre there any plans for user console input?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo current plans but it isnt a bad idea. It would enable menus and all kinds of fun stuff \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-17T19:45:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003ENo current plans but it isnt a bad idea. It would enable menus and all kinds of fun stuff \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere\u0027s a toolbar mod \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60863-0-23-5-Toolbar-1-7-1-Common-API-for-draggable-resizable-buttons-toolbar?highlight=toolbar\u0022 rel=\u0022external nofollow\u0022\u003Etoolbar mod\u003C/a\u003E that\u0027s a sort of mod for mods. It doesn\u0027t do anything by itself but it presents a system for other modders to use to create popup windows with icons and guis, and it\u0027s commonly used by many different mods. Perhaps a bridge between kosscript and that might be handy, so someone can call kosscript functions that make things happen in the toolbar mod. I\u0027m of a mixed mind about it though because it does sort of break the \u0022make it feel like an old computer\u0022 feeling of kOS to have your flight computer be able to open dialog boxes and let you click buttons with a mouse.\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2014-04-18T01:52:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThere\u0027s a toolbar mod \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60863-0-23-5-Toolbar-1-7-1-Common-API-for-draggable-resizable-buttons-toolbar?highlight=toolbar\u0022 rel=\u0022external nofollow\u0022\u003Etoolbar mod\u003C/a\u003E that\u0027s a sort of mod for mods. It doesn\u0027t do anything by itself but it presents a system for other modders to use to create popup windows with icons and guis, and it\u0027s commonly used by many different mods. Perhaps a bridge between kosscript and that might be handy, so someone can call kosscript functions that make things happen in the toolbar mod. I\u0027m of a mixed mind about it though because it does sort of break the \u0022make it feel like an old computer\u0022 feeling of kOS to have your flight computer be able to open dialog boxes and let you click buttons with a mouse.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe it could be tied together with that \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EAltair\u003C/span\u003E Alcor module (don\u0027t have the link to the thread handy). So if you are using the \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EAltair\u003C/span\u003E Alcor module you could have the popup menus, but if not you just get regular kOS. Or maybe thats too much? lol\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-18T02:42:46Z\u0022 title=\u002204/18/2014 02:42  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 18, 2014\u003C/time\u003E by Sma\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-18T11:18:10Z","Content":"\n\u003Cp\u003EI think erendrake was talking about text-based menus inside the console window that people can script themselves where you type \u00221\u0022 for menu item number 1 and so on.\u003C/p\u003E\u003Cp\u003E@erendrake could you make the window hide like all other UI elements when you press F2?\u003C/p\u003E\u003Cp\u003Eedit\u003C/p\u003E\u003Cp\u003Ecould you somehow get altitude from \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/76320\u0022 rel=\u0022external nofollow\u0022\u003Ethis mod\u003C/a\u003E? Would be great for landing and hovering scripts.\u003C/p\u003E\u003Cp\u003EDiazo says the method is exposed, so you can call it directly if the plugin is present.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-18T13:57:14Z\u0022 title=\u002204/18/2014 01:57  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 18, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hans Dorn","CreatedById":105419,"CreatedDateTime":"2014-04-18T17:59:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003ENo current plans but it isnt a bad idea. It would enable menus and all kinds of fun stuff \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor the moment, you could put aside a couple of action groups to interact with your script.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-04-18T18:18:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hans Dorn\u0022 data-cite=\u0022Hans Dorn\u0022\u003E\u003Cdiv\u003EFor the moment, you could put aside a couple of action groups to interact with your script.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EReserving action groups for use with KOS would be a support nightmare. You can already read the state of action groups to see when they have been pressed.\u003C/p\u003E\n"},{"CreatedByName":"Hans Dorn","CreatedById":105419,"CreatedDateTime":"2014-04-18T18:32:06Z","Content":"\n\u003Cp\u003ELol I was suggesting this for the user side, not as a change to KOs.\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-18T21:26:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EI think erendrake was talking about text-based menus inside the console window that people can script themselves where you type \u00221\u0022 for menu item number 1 and so on.\u003Cp\u003E@erendrake could you make the window hide like all other UI elements when you press F2?\u003C/p\u003E\u003Cp\u003Eedit\u003C/p\u003E\u003Cp\u003Ecould you somehow get altitude from \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/76320\u0022 rel=\u0022external nofollow\u0022\u003Ethis mod\u003C/a\u003E? Would be great for landing and hovering scripts.\u003C/p\u003E\u003Cp\u003EDiazo says the method is exposed, so you can call it directly if the plugin is present.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI would prefer the more raw information needed to calculate it: \u0022What are the bounding box dimensions of my vessel and where is my current COM within that?\u0022 Because there\u0027s other places besides landing where you need that - like docking. The core problem is not the inability to read altitude from the bottom of the craft, but the inability to even know where the bottom of the craft is in the first place. Solve that more raw problem and you effectively solve more than one problem at the same time.\u003C/p\u003E\u003Cp\u003EImagine being able to access this information:\u003C/p\u003E\u003Cp\u003E\u0022Your current craft\u0027s dimensions are bounded by this box: FORE: [-22 to \u002B5], STARBOARD: [-8 to \u002B8], TOP: [-5 to \u002B5].\u0022\u003C/p\u003E\u003Cp\u003EThen you can use the \u0022-22\u0022 of the FORE dimension to get the distance from your COM to the bottom of the craft, and your true altitude would then be reported altitude minus 22. But you\u0027d also have all the rest of that information at your disposal too.\u003C/p\u003E\u003Cp\u003EAnd of course you could re-query it after doing a stage (which of course changes the numbers as parts of your craft fall off).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-18T21:30:45Z\u0022 title=\u002204/18/2014 09:30  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 18, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-18T22:16:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EI think erendrake was talking about text-based menus inside the console window that people can script themselves where you type \u00221\u0022 for menu item number 1 and so on.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh I know, but I was pointing out a possible alternative. Either approach would still mean people script it themselves. I was picturing having script commands for \u0022open a window that looks like this\u0022 and \u0022put a button here with this word on it\u0022, and \u0022WHEN clicked(mybutton1) THEN { do stuff }.\u0022\u003C/p\u003E\u003Cp\u003EI\u0027m not entirely sure it\u0027s a good idea. I\u0027m waffling on it. The con is that it doesn\u0027t *feel* right to have guis for an old clunky 10,000 byte computer. The pro is that if you look at the thread for the toolbar mod, you see that the rest of the modding community uses it extensively so it would make kOS scripts look more similar to other mod\u0027s interfaces.\u003C/p\u003E\u003Cp\u003EAs for what\u0027s easier to implement, it\u0027s probably easier to implement a simple text keyboard catcher like:\u003C/p\u003E\u003Cp\u003EIF keypress:queued \u0026gt; 0 { print \u0022you pressed \u0022 \u002B keypress:getnext:name. }.\u003C/p\u003E\u003Cp\u003Ewith \u0022keypress\u0022 being a special identifier that has these properties:\u003C/p\u003E\u003Cp\u003Ekeypress:queued, Integer, is the number of queued key presses that haven\u0027t been consumed yet.\u003C/p\u003E\u003Cp\u003Ekeypress:peeknext, keyType, is the bottom of the queue of keypresses. It is the oldest keypress not yet processed.\u003C/p\u003E\u003Cp\u003Ekeypress:getnext, keyType, is exactly the same as peeknext, except that it consumes the keypress from the queue as well.\u003C/p\u003E\u003Cp\u003Ekeypress:peeknew, keyType, allows the script writer to \u0022cheat\u0022 and break the queue model, instead peeking at the most recent keypress without processing the older ones under it. *for the purpose of processing important aborting keys.* There is no getnew. You\u0027re allowed to peek at the newest key to see whether or not to abort something but still have to consume the keys from the oldest-first, like a real queue.\u003C/p\u003E\u003Cp\u003Ekeypress:consume, INTEGER, causes the queue to consume N items from the queue when SET to any positive N. Note that setting N to be equal to keypress:queued clears all the queue.\u003C/p\u003E\u003Cp\u003Ekeypress:trapping, BOOLEAN, is set to true by the script when it\u0027s time to begin trapping keys, false, when it\u0027s time to release control of them. kOS should automatically invoke \u0022set keypress:trapping to False.\u0022 on program exit or abort. \u003C/p\u003E\u003Cp\u003EkeyType, is the type that contains a single key, which in turn contains these parts:\u003C/p\u003E\u003Cp\u003Ekeypress:next:name, String, is the text name of the key, one char for letters like \u0022K\u0022 but also can store things like \u0022[Home]\u0022 or [F7]\u0022\u003C/p\u003E\u003Cp\u003Ekeypress:next:type, Integer, is a code for the kind of key: 0 = printable ascii char, 1 = special like home, F7, arrow, etc\u003C/p\u003E\u003Cp\u003EThat\u0027s just an idea. What do people think of this?\u003C/p\u003E\u003Cp\u003EAs a totally separate interface, for just line-at-a-time input where the program is blocked doing nothing until you press return to make something happen rather than key-at-a-time input, a much simpler method like this could be used:\u003C/p\u003E\u003Cp\u003Eprint -n \u0022What is your Name? \u0022 at (0,0).\u003C/p\u003E\u003Cp\u003Ereadline myName. // script is stopped until ENTER is pressed.\u003C/p\u003E\u003Cp\u003EThe \u0022-n\u0022 idea is borrowed from lots of unix scripting languages. It means \u0022don\u0027t start a new line afterward\u0022. It leaves the cursor where it was at the end of the print statement instead of going to the next line. I don\u0027t quite know what a good equivalent kosscript syntax might be for the same idea, if it was to be implemented.\u003C/p\u003E\u003Cp\u003EWhat do people think of that as another way to do input?\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-18T22:53:49Z","Content":"\n\u003Cp\u003EHonestly all I imagined was something like cin and some basic data type converters if they\u0027re necessary.\u003C/p\u003E\n"},{"CreatedByName":"Hans Dorn","CreatedById":105419,"CreatedDateTime":"2014-04-18T23:20:35Z","Content":"\n\u003Cp\u003EI like the idea of using an old computer as a guideline. These didn\u0027t have GUI\u0027s, but displays and buttons. LOTs of buttons \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.oldcalculatormuseum.com/tisr-60.jpg\u0022 alt=\u0022tisr-60.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EHaving a simple fixed GUI with some LED displays, numerical and function keys (with user defined labels) would be apropriate I guess.\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2014-04-19T00:33:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hans Dorn\u0022 data-cite=\u0022Hans Dorn\u0022\u003E\u003Cdiv\u003EI like the idea of using an old computer as a guideline. These didn\u0027t have GUI\u0027s, but displays and buttons. LOTs of buttons \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.oldcalculatormuseum.com/tisr-60.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.oldcalculatormuseum.com/tisr-60.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHaving a simple fixed GUI with some LED displays, numerical and function keys (with user defined labels) would be apropriate I guess.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHeres the link to a WIP (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/54925-WIP-ALCOR-Advanced-Landing-Capsule-for-Orbital-Rendezvous-by-ASET-%28UPD-11-02-2014%29?highlight=alcor\u002Bmodule\u0022 rel=\u0022external nofollow\u0022\u003EAlcor Module\u003C/a\u003E) I mentioned in a previous reply, look at all the buttons in the IVA mode lol. Maybe it\u0027s a little much though for what we\u0027re talking about here.\u003C/p\u003E\u003Cp\u003EKevin did originally say he was planning on adding some buttons in the bezel area below the screen. Hmmm...*thinking cap on...power light blinking saying to charge the battery*....\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-19T01:36:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EHonestly all I imagined was something like cin and some basic data type converters if they\u0027re necessary.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s easy on the surface to use but harder under the hood to implement.\u003C/p\u003E\u003Cp\u003EAlthough, on an unrelated note, for any sort of input, converters will be necessary to be able to turn \u0022123\u0022 into a numerical variable. Right now you can only go the other way around from number to string (by concatenating numbers to strings with \u0022\u002B\u0022) but you can\u0027t go from string to number, which is vital for being able to take user input and do stuff with it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-19T01:41:33Z\u0022 title=\u002204/19/2014 01:41  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 19, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-21T01:45:00Z","Content":"\n\u003Cp\u003EWas just about to post this in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/47399-kOS-Scriptable-Autopilot-System-0-9\u0022 rel=\u0022external nofollow\u0022\u003Ewrong thread\u003C/a\u003E, someone should lock that thread and put up a link at the top directing everyone to this one.\u003C/p\u003E\u003Cp\u003ESo two questions, first one should be easy, second one takes a little explaining.\u003C/p\u003E\u003Cp\u003EQuestion 1: \u003Cspan style=\u0022color:#333333;\u0022\u003EIf I run remotetech and am in program mode, as soon as that program starts running, does it need contact with KSC to continue running?\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EQuestion 2(What I was originally going to post in the 0.9 thread):\u003C/p\u003E\u003Cp\u003EHey, so I was writing a program for Launch and Ascent Guidance of the stock Kerbal X (with the exception of one kOS module in between the command module and the parachute and a communitron on the side of the command module and the staging setup so the launch clamps release with the first \u0022STAGE.\u0022 command. craft file \u003Ca href=\u0022http://pastebin.com/YtYMb6rg\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E) on my practice save (a separate copy of KSP 0.23.0 I run with no other mods installed so I can use it for debugging purposes) using \u003Ca href=\u0022http://kerbalspaceprogram.com/kos-autopilot/\u0022 rel=\u0022external nofollow\u0022\u003EkOS v0.11.0\u003C/a\u003E. \u003C/p\u003E\u003Cp\u003EI want to be able to get a comm network ready so I can have a probe ready for my Moho launch window in 5 Kerbal days so I\u0027m using this to learn how to code in kOS. But every time I ran my code the launch clamps would release but the throttle wouldn\u0027t respond, so the Kerbal X craft would just end up crashing down on the launch pad.\u003C/p\u003E\u003Cp\u003EThe following is the code I used:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECLEARSCREEN.\u003Cbr\u003E\u003Cbr\u003E//Begin Countdown\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003ESET X TO 10.\u003Cbr\u003EUNTIL X = 0\u003Cbr\u003E{\u003Cbr\u003E PRINT \u0022Launch in T -\u0022 \u002B X.\u003Cbr\u003E WAIT 1.\u003Cbr\u003E SET X TO X-1.\u003Cbr\u003E CLEARSCREEN.\u003Cbr\u003E }\u003Cbr\u003EPRINT \u0022LAUNCH!\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Ascent\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003ELOCK STEERING TO UP.\u003Cbr\u003ELOCK THROTTLE TO 1.\u003Cbr\u003ESTAGE.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI was able to hunt down the problem in my code down to the \u0022LOCK THROTTLE TO 1.\u0022 command by commenting out everything else like so and running the program again:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//CLEARSCREEN.\u003Cbr\u003E\u003Cbr\u003E//Begin Countdown\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//SET X TO 10.\u003Cbr\u003E//UNTIL X = 0\u003Cbr\u003E//{\u003Cbr\u003E// PRINT \u0022Launch in T -\u0022 \u002B X.\u003Cbr\u003E// WAIT 1.\u003Cbr\u003E// SET X TO X-1.\u003Cbr\u003E// CLEARSCREEN.\u003Cbr\u003E// }\u003Cbr\u003E//PRINT \u0022LAUNCH!\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Ascent\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//LOCK STEERING TO UP.\u003Cbr\u003ELOCK THROTTLE TO 1.\u003Cbr\u003E//STAGE.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen I ran that, the throttle did not respond (i.e. it stayed at 0%). So I figured I must have been typing the command wrong so I issued the same command in immediate mode\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK THROTTLE TO 1.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESurprisingly, the throttle immediately responded and went to 100%. So I tried the opposite.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK THROTTLE TO 0.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd once again the throttle responded by going back down to 0% \u003C/p\u003E\u003Cp\u003EAt this point I thought there might have been something wrong with my original program, so that the rest of the code, even though it was commented out, was causing the parser some kind of trouble. So I wrote a program called \u0027THROTTLEUP\u0027 to test this hypothesis.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK THROTTLE TO 1.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGuess what? The throttle didn\u0027t respond at all. Soo... here\u0027s my \u003Ca href=\u0022http://pastebin.com/AXQhvA8a\u0022 rel=\u0022external nofollow\u0022\u003EKSP log\u003C/a\u003E, if it helps at all. I don\u0027t know what\u0027s wrong, so any help would be appreciated:confused:.\u003C/p\u003E\n"},{"CreatedByName":"Logris","CreatedById":99103,"CreatedDateTime":"2014-04-21T02:54:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OxalysResourceConsortium\u0022 data-cite=\u0022OxalysResourceConsortium\u0022\u003E\u003Cdiv\u003Ethe throttle wouldn\u0027t respond, so the Kerbal X craft would just end up crashing down on the launch pad.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat\u0027s happening is that all the locks are cleared when the program finishes running, so what\u0027s happening is you lock the throttle to 1, stage, and then immediately reset the throttle to 0.\u003C/p\u003E\u003Cp\u003EThe trick is to stop the program from ending by putting in a loop. It doesn\u0027t need to do anything necessarily, but normally you would put the bulk of your logic in there.\u003C/p\u003E\u003Cp\u003EA simple\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUNTIL 1=0 {\u003Cbr\u003E...\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eshould do the trick.\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-21T02:56:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Logris\u0022 data-cite=\u0022Logris\u0022\u003E\u003Cdiv\u003EWhat\u0027s happening is that all the locks are cleared when the program finishes running, so what\u0027s happening is you lock the throttle to 1, stage, and then immediately reset the throttle to 0.\u003Cp\u003EThe trick is to stop the program from ending by putting in a loop. It doesn\u0027t need to do anything necessarily, but normally you would put the bulk of your logic in there.\u003C/p\u003E\u003Cp\u003EA simple\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUNTIL 1=0 {\u003Cbr\u003E...\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eshould do the trick.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I probably won\u0027t need to keep that loop in there since I was just writing the code one piece at a time and testing it as I went. In the final version it should work without the loop then?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-21T04:58:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OxalysResourceConsortium\u0022 data-cite=\u0022OxalysResourceConsortium\u0022\u003E\u003Cdiv\u003EThanks, I probably won\u0027t need to keep that loop in there since I was just writing the code one piece at a time and testing it as I went. In the final version it should work without the loop then?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust do anything that keeps it from ending the program. It doesn\u0027t matter what. For example you could do this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET done to False.\u003Cbr\u003EON AG1 SET done to True.\u003Cbr\u003Ewait until done.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETo cause it to wait forever until action group 1 (alt-1) is pressed. You can use anything from AG0 to AG9 for the action groups.\u003C/p\u003E\u003Cp\u003E(Note: for action groups to work, you have to have the terminal window NOT being focused, otherwise the ALT-number keypress doesn\u0027t pass through to the piloting code in KSP and instead KOS has it trapped.)\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-21T11:43:52Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET done to False.\u003Cbr\u003EON AG1 SET done to True.\u003Cbr\u003Ewait until done.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhy is it that even if \u0022done\u0022 is false then that script wont continue? Logically then \u0022wait until false\u0022 should work the same way that \u0022wait until true\u0022 would, wouldn\u0027t it?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-21T13:16:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET done to False.\u003Cbr\u003EON AG1 SET done to True.\u003Cbr\u003Ewait until done.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhy is it that even if \u0022done\u0022 is false then that script wont continue? Logically then \u0022wait until false\u0022 should work the same way that \u0022wait until true\u0022 would, wouldn\u0027t it?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m confused. Are you reporting a bug, or are you describing how you\u0027re saying you would expect it to work? (Because if \u0022wait until false\u0022 and wait until true\u0022 are giving the same result, that\u0027s definitely a bug. They shouldn\u0027t be the same.)\u003C/p\u003E\n"}]}