{"TopicId":43707,"ForumId":34,"TopicTitle":"kOS Scriptable Autopilot System 0.9","CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-08-24T14:28:17Z","PageNum":70,"Articles":[{"CreatedByName":"balu0","CreatedById":74978,"CreatedDateTime":"2013-11-08T08:06:47Z","Content":"\n\u003Cp\u003EThere is a plugin for sensors:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://kerbalspaceprogram.com/sensor-reporter-kos/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/sensor-reporter-kos/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESimilar approach could be used for the terrain radar altimeter.\u003C/p\u003E\u003Cp\u003EJust use one of stock parts for it.\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T14:23:48Z","Content":"\n\u003Cp\u003E@Kethevin. Yep its RT2 that causes the problems with staging/keyboard input. I get around that sort of by locking the staging. kOS ignores that so it still \u0022works\u0022. Though if you have action groups if you type a number that action group will fire, same with if you\u0027ve setup the abort action group.\u003C/p\u003E\u003Cp\u003EAs for your second question, I would think having the probe core face forward and using wheelsteering instead would help. Also maybe put KSP into docking mode (2nd icon on the control panel on the bottom left) might help, though I haven\u0027t tried messing with rovers yet so I don\u0027t know.\u003C/p\u003E\u003Cp\u003ENow for something I\u0027m working on...\u003C/p\u003E\u003Cp\u003EI\u0027m trying to get 3 \u0022komm sats\u0022 into kerbosynchronous orbit. I have a rocket that launches with the 3 komm sats. Then I\u0027m trying to setup a 4hour orbital period with AP at 2,868.75km, and every time the rocket comes around to AP it will drop off another komm sat which I would then switch to and run a circularization program. My AP is currently above what I want it to be so I\u0027m trying to setup a node to bring it down to 2,868.75km. The way I\u0027m writing my program is so that it can be semi universal, in that if the AP is above or below desired altitude (in this case 2,868.75km) it\u0027ll add a node and adjust accordingly. So far I\u0027ve tried using a formula from the \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Tutorial:Advanced_Rocket_Design#Calculating_transfer_maneuvers\u0022 rel=\u0022external nofollow\u0022\u003EKSP Wiki\u003C/a\u003E to calculate deltav needed and then set the node to that, but no luck really with that. The formula(s) I\u0027ve tried separately are:\u003C/p\u003E\u003Cp\u003E sqrt(gp/r1)*(sqrt( (2*r2)/(r1\u002Br2) ) - 1))*1000.\u003C/p\u003E\u003Cp\u003E sqrt(gp/r2)*(1 - sqrt( (2*r1)/(r1\u002Br2) ) ) )*1000.\u003C/p\u003E\u003Cp\u003Er1 being my starting AP, over 3,000km. r2 is the altitude i want to be at (2868750) and gp is the gravitational parameter of Kerbin (3530.461). The *1000 is to convert from km/s to m/s. The results of using both formulas ends up being around 0.1 something \u002B/- so obviously not what I want. I\u0027ve tried moving things around (switching position of r1 and r2) which changed it but not the way i wanted lol. I just don\u0027t get the formulas I guess. \u003C/p\u003E\u003Cp\u003EI\u0027ve had better results subtracting by 10 from x:prograde until its less than desired altitude, then adding 1 until its just above desired, and so on with progressively smaller numbers. Problem is it never actually lands right where I want it to. Maybe partly because my if statements I was using overlapped or something. The other problem I had was that it started to get major lag after a couple of runs through the program. If I reloaded the save though it was fine.\u003C/p\u003E\u003Cp\u003EAt any rate, I\u0027m kinda stuck for the moment, I\u0027m gonna try doing the if statements and add/subtract from x:prograde again and see if maybe I can find something that works. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"balu0","CreatedById":74978,"CreatedDateTime":"2013-11-08T14:44:33Z","Content":"\n\u003Cp\u003EQuick question.\u003C/p\u003E\u003Cp\u003EI just funt the \u0022list engines.\u0022 and \u0022list parts.\u0022 commands.\u003C/p\u003E\u003Cp\u003ECan I do something with the listed things ?\u003C/p\u003E\u003Cp\u003ELike toggle and engine or air intake on and off ?\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T14:50:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022balu0\u0022 data-cite=\u0022balu0\u0022\u003E\u003Cdiv\u003EQuick question.\u003Cp\u003EI just funt the \u0022list engines.\u0022 and \u0022list parts.\u0022 commands.\u003C/p\u003E\u003Cp\u003ECan I do something with the listed things ?\u003C/p\u003E\u003Cp\u003ELike toggle and engine or air intake on and off ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou mean, thats a thing? I haven\u0027t seen it before. I\u0027ll have to test it out next time im in the game.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-08T15:29:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022balu0\u0022 data-cite=\u0022balu0\u0022\u003E\u003Cdiv\u003EQuick question.\u003Cp\u003EI just funt the \u0022list engines.\u0022 and \u0022list parts.\u0022 commands.\u003C/p\u003E\u003Cp\u003ECan I do something with the listed things ?\u003C/p\u003E\u003Cp\u003ELike toggle and engine or air intake on and off ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope. You can only get the strings on the screen, not into variables.\u003C/p\u003E\u003Cp\u003EI figure in order for those to be useful commands, KOS has to first implement arrays, and then implement a way to get the output of a LIST command into an array of objects instead of to the screen.\u003C/p\u003E\u003Cp\u003EThat\u0027s a first step. Then the ability to take an object of type \u0022vessel part\u0022 and manipulate it would have to come second.\u003C/p\u003E\n"},{"CreatedByName":"Cilph","CreatedById":21477,"CreatedDateTime":"2013-11-08T15:51:30Z","Content":"\n\u003Cp\u003EOi. With regards to RT2 / kOS compatibility, anyone mind telling me the best way to contact one of the devs?\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T15:59:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cilph\u0022 data-cite=\u0022Cilph\u0022\u003E\u003Cdiv\u003EOi. With regards to RT2 / kOS compatibility, anyone mind telling me the best way to contact one of the devs?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E As far as I understand it \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/69842-KevinLaity\u0022 rel=\u0022external nofollow\u0022\u003EKevinLaity\u003C/a\u003E is the only dev working on this. I don\u0027t know how often he gets on though. He use to be pretty good about responding, but has been a little slower lately, unless it\u0027s just my imagination. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2013-11-08T16:02:36Z","Content":"\n\u003Cp\u003E@Baloan,\u003C/p\u003E\u003Cp\u003EI think the first thing you need is a node chaser script, which simply executes a Node, then a variety of scripts to set up nodes for changing apoapsis/periapsos (=circularization) and a scripts to create nodes that do hoffman transfers. If you have those the rest should become regular math. The specific calculations of transfer windows are at the very least code documented in various mods which all are open sourced. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T16:35:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EWhat I would find really helpful, and it really seems quite realistic to me to enable it, would be a variant of ALT:RADAR that tells you the distance from your craft to the ground \u003Cstrong\u003Ein the direction your craft is pointed\u003C/strong\u003E rather than straight down. In other words, if you are aimed 45 degrees off from \u0022up\u0022, then don\u0027t report the altitude below the craft, but rather report the distance to the ground in that 45 degree angle. The diagram below shows what I\u0027m talking about. Getting the radar distance along that blue line in my picture is what I\u0027m talking about.\u003Cp\u003E\u003Cstrong\u003E***Awesome lander diagram example***\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIt makes sense that the radar distance measuring equipment would actually rotate with the craft and give the blue result rather than the green one. And that data is crucial to making a working landing script that can react to unknown landing sites at unknown locations.\u003C/p\u003E\u003Cp\u003EBecause of the inability to read the terrain, I can\u0027t really do a \u0022suicide burn\u0022 efficient landing because of the case illustrated in that picture. I end up having to guess what the highest ground MIGHT be based on the wiki entry for the body (all the bodies tell you the max elevation of the highest mountain on that body), and design the suicide burn to \u0022land\u0022 at that height first, and then descend from there down to the ground. On rocky bumpy bodies like The Mun, that\u0027s an enormous amount of error I have to account for.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat might be neat is if with mod integration, you could add a lazor from lazor systems, to check distance from \u0022target\u0022. In this case it would work on anything, buildings terrain etc. Could possibly be used to land on top of a docking port of a base maybe, although I guess manually you can already do that with docking alignment tools and docking cam. Trying to remember if the docking cam had a display that showed distance from objects even if they weren\u0027t selected. \u003C/p\u003E\u003Cp\u003EAt any rate this all depends on if KSP has anything that would allow such things to work, especially with using the lazor idea. Would be awesome though...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-08T16:45:42Z\u0022 title=\u002211/08/2013 04:45  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 8, 2013\u003C/time\u003E by Sma\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ANWRocketMan","CreatedById":65251,"CreatedDateTime":"2013-11-08T18:46:13Z","Content":"\n\u003Cp\u003EI\u0027m having a problem with this(simplified) piece of code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EDECLARE X.\u003Cbr\u003EDECLARE I.\u003Cbr\u003EDECLARE T.\u003Cbr\u003ESET X TO 9.\u003Cbr\u003ESET I TO 10.\u003Cbr\u003ESET T TO 0.\u003Cbr\u003EUNTIL X \u0026lt; 1\u003Cbr\u003E{\u003Cbr\u003E\tSAS OFF.\u003Cbr\u003E\tLOCK STEERING TO UP \u002B R(0,T \u002B I,0).\u003Cbr\u003E\tWAIT 5.\u003Cbr\u003E\t//WAIT UNTIL ROUND(UP:PITCH \u002B T \u002B I) = ROUND(FACING:PITCH).\u003Cbr\u003E\tSET T TO T \u002B I.\u003Cbr\u003E\tSET X TO X - 1.\u003Cbr\u003E\tSAS ON.\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHow do I fix the WAIT statement to actually wait until the facing of the ship is equal to the incremental angle. Currently, that WAIT statement just does not work. Having to wait 4 or 5 seconds per increment is not very nice. And such a fixed wait time does not work if you\u0027re turning through 180 degrees.\u003C/p\u003E\u003Cp\u003EEDIT: I was thinking i might get the difference between FACING PITCH and the incremental pitch(UP PITCH \u002B T \u002B I), then WAIT UNTIL that difference is smaller than a certain number(say, within 1 degree). But it would seem that WAIT UNTIL does not account for things that happened just before it in the loop. Whenever I use one that might work, it just runs through the loop without even allowing the statements before it to run.\u003C/p\u003E\u003Cp\u003EEDIT 2:\u003C/p\u003E\u003Cp\u003EThere is another problem. I want to use this method because I want to allow for the use of a Speed modifier. This is so that kOS doesn\u0027t just rip apart a large vessel or an unstable one when this is used.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-08T19:05:37Z\u0022 title=\u002211/08/2013 07:05  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 8, 2013\u003C/time\u003E by ANWRocketMan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dexter9313","CreatedById":84598,"CreatedDateTime":"2013-11-08T19:13:02Z","Content":"\n\u003Cp\u003EIs there a way to have a \u0022when... then...\u0022 statement being permanent yet ? I can\u0027t figure how to make an auto-staging ascent without this... (Or without putting explicitly 20 \u0022when .. then ..\u0022s within themselves.)\u003C/p\u003E\n"},{"CreatedByName":"TelluriumCrystal","CreatedById":25647,"CreatedDateTime":"2013-11-08T19:21:57Z","Content":"\n\u003Cp\u003EI wonder if this will ever evolve into a object-oriented programming language at some point\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6? With a full palette of sensors for acquiring important information and integration with most major mods?\u003C/p\u003E\u003Cp\u003EI suspect I may be thinking a bit too big. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EBut still, is it \u003Cem\u003Epossible\u003C/em\u003E? Not reasonable, but \u003Cem\u003Epossible\u003C/em\u003E?\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T19:30:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dexter9313\u0022 data-cite=\u0022Dexter9313\u0022\u003E\u003Cdiv\u003EIs there a way to have a \u0022when... then...\u0022 statement being permanent yet ? I can\u0027t figure how to make an auto-staging ascent without this... (Or without putting explicitly 20 \u0022when .. then ..\u0022s within themselves.)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShouldn\u0027t be a problem. My self as well as others have written launch scripts that stage when fuel runs out, some using asparagus staging. YOu can do it by either knowing how much fuel you have exactly, and preprogramming that in, or as I did with asparagus staging, set the staging up so the boosters are activated first, so you can grab how much fuel they have. Then you can divide by the number of booster groups/pairs. \u003C/p\u003E\u003Cp\u003EWithout asparagus staging it\u0027s really simple. The example below I just wrote off the top of my head with out testing it on a ship but lets assume you have solid rockets on the side, and the SRBs, main engine(s) and launch clamp are on the same stage, with each progressive stage having the decoupler and next stage engine starting at the same time.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock throttle to 1. stage. // Power up engines and stage.\u003Cbr\u003Esas on. //Turn SAS on temporarily for stability.\u003Cbr\u003Ewait 10. //Wait 10 seconds.\u003Cbr\u003Esas off. //Turn off SAS so heading can be adjusted. No need for SAS until space.\u003Cbr\u003Elock steering to heading 90 by 90. //This just orients the craft so it doesn\u0027t go crazy during the gravity turn, being as it will rotate on two axis at the same time.\u003Cbr\u003E\u003Cbr\u003E//Do this until apoapsis is 75,000m.\u003Cbr\u003E\u003Cbr\u003Euntil apoapsis \u0026gt; 75000 {\u003Cbr\u003E   if stage:liquidfuel = 0 { stage. } //If current stage is empty stage.\u003Cbr\u003E   if stage:solidfuel = 0 { stage. } //If SRBs are empty drop them.\u003Cbr\u003E   if altitude \u0026gt; 10000 { lock steering to heading 90 by 45. } //Begin gravity turn.\u003Cbr\u003E   if apoapsis \u0026gt; 60000 { lock steering to prograde. } //Start gaining more horizontal speed.\u003Cbr\u003E}\u003Cbr\u003E//Apoapsis is now 75,000m or 75km.\u003Cbr\u003Elock throttle to 0. //Turn off engines.\u003Cbr\u003Ewait until eta:periapsis \u0026lt; 20. //Wait until eta to periapsis is 20 seconds\u003Cbr\u003Elock throttle to 1. //Restart engines.\u003Cbr\u003Ewait until periapsis \u0026gt; 75000. //Wait until periapsis is above 75,000m\u003Cbr\u003Eprint \u0022Welcome to Space!.\u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you wanted your decoupler and next engine to not happen at the same time you could add a wait command to the staging section like \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E   if stage:liquidfuel = 0 { stage. wait 5. stage.}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E**Edit\u003C/strong\u003E After re-reading your post, I think you could get by with just adding a simple wait statement. With out seeing your code I\u0027m just guessing but you\u0027re looking for something like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen stage:liquidfuel = 0 then { stage. }\u003Cbr\u003Ewait until apoapsis \u0026gt; 75000.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m not familiar with using when/then statements but as I understand it it stays in and gets repeated when the condition is true. If that is the case then the above code should keep working until you get to space. Of course at that point you\u0027ll need to circularize but thats easy enough. \u003C/p\u003E\u003Cp\u003EAt any rate, hope all of this helps. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-08T19:35:05Z\u0022 title=\u002211/08/2013 07:35  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 8, 2013\u003C/time\u003E by Sma\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AbeS","CreatedById":80644,"CreatedDateTime":"2013-11-08T19:33:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dexter9313\u0022 data-cite=\u0022Dexter9313\u0022\u003E\u003Cdiv\u003EIs there a way to have a \u0022when... then...\u0022 statement being permanent yet ? I can\u0027t figure how to make an auto-staging ascent without this... (Or without putting explicitly 20 \u0022when .. then ..\u0022s within themselves.)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor an ascent you could add it to a loop like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Euntil apoapsis\u0026gt;desiredOrbit {\u003Cbr\u003E  if stage:liquidfuel=0 {stage.}.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor asparagus staging you would need some more thinking though \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"mossman","CreatedById":1259,"CreatedDateTime":"2013-11-08T19:40:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baloan\u0022 data-cite=\u0022baloan\u0022\u003E\u003Cdiv\u003E@Stiggles:\u003Cp\u003E4. How long is your burn? You know your deltav and the acceleration your engine(s) provide (which is deltav per second). Engine acceleration a is F/m (force by mass), \u003Cstrong\u003Eset maxA to maxthrust/mass\u003C/strong\u003E, and then \u003Cstrong\u003Eset burnduration to deltav / maxA\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI should point out that since the mass of your vessel is of course varying as you burn this method will yield a non-insignificant error. \u003C/p\u003E\u003Cp\u003EInstead, I suggest calculating the burn time by calculating the mass of propellant needed to execute the burn and dividing that by the mass flow rate of your engine. \u003C/p\u003E\u003Cp\u003EIf you know your craft\u0027s starting mass, Isp, and the needed \u00C3\u017D\u00E2\u20ACV then you can calculate this fairly easily with some algebra and the Tsiolkovsky equation. \u003C/p\u003E\u003Cp\u003E\u00C3\u017D\u00E2\u20ACV=Isp*g*ln(m0/m1) rearranges to m1=m0*e^(-\u00C3\u017D\u00E2\u20ACV/Isp*g), propellant mass mp = m0 - m1 and the mass flow rate should be (Isp*g)/F, F being the force of thrust from your engines. Keep in mind that g is basically just a unit conversion constant (For Isp in seconds to exhaust velocity) and = 9.80665 m/s^2.\u003C/p\u003E\u003Cp\u003EI use this for a handy maneuver autopilot and I usually get errors less than 0.2 m/s \u00C3\u017D\u00E2\u20ACV.\u003C/p\u003E\n"},{"CreatedByName":"lijat","CreatedById":58830,"CreatedDateTime":"2013-11-08T19:57:42Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003Emossman:\u003C/strong\u003E I\u0027m using something similar, just out of interest, how do you calculate ISP of you craft? My method is a bit slow it seems \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"balu0","CreatedById":74978,"CreatedDateTime":"2013-11-08T20:04:08Z","Content":"\n\u003Cp\u003EI \u003C/p\u003E\u003Cp\u003ENeed\u003C/p\u003E\u003Cp\u003EFunctions\u003C/p\u003E\u003Cp\u003ENOW!\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m almost done with my universal throttle control.. would be nice to use as a \u0022subroutine\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-08T20:08:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dexter9313\u0022 data-cite=\u0022Dexter9313\u0022\u003E\u003Cdiv\u003EIs there a way to have a \u0022when... then...\u0022 statement being permanent yet ? I can\u0027t figure how to make an auto-staging ascent without this... (Or without putting explicitly 20 \u0022when .. then ..\u0022s within themselves.)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOne thing that might work, assuming you don\u0027t mind the time expense of calling another program, is to make the body of the WHEN/THEN be a program file so you can refer to itself inside of itself:\u003C/p\u003E\u003Cp\u003EImagine a small program file consisting of just these lines:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// This is a program file called \u0022whenResponder\u0022\u003Cbr\u003Eprint \u0022doing a thing here\u0022.\u003Cbr\u003EWHEN blah THEN run whenResponder.  // Note the recursion.  This is the name of this program file itself.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen from your main file, set it up for the first time:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EWHEN blah THEN run whenResponder.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBy putting the body of the THEN inside a program file, you give yourself the ability to perform recursion because you can refer to the chunk of code by its name from inside itself, which you can\u0027t do otherwise.\u003C/p\u003E\u003Cp\u003EThat might let you break out of the Klein bottle problem that you want a WHEN/THEN that contains itself inside its own body.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-08T20:12:35Z\u0022 title=\u002211/08/2013 08:12  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 8, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"baloan","CreatedById":91670,"CreatedDateTime":"2013-11-08T20:12:04Z","Content":"\n\u003Cp\u003E@Mossman:\u003C/p\u003E\u003Cp\u003EYou are of course right. But I am using burntime/2 to determine when to start the burn. The error introduced by not exactly centering the burn around the maneuver node should be small. (Incorrectly calculated) burn time in my configuration is ~ 40sec. It\u0027d be interesting to see what the error is - and what effect this has on orbit configuration (apoapsis vs periapsis error).\u003C/p\u003E\u003Cp\u003EAnd to mess timing up: I throttle my engine during the last few seconds to be able to shutdown accurately and exactly hit deltav. That extends burn time and wrecks any calculation assuming full thrust all the time.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-08T20:16:16Z\u0022 title=\u002211/08/2013 08:16  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 8, 2013\u003C/time\u003E by baloan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T20:43:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022balu0\u0022 data-cite=\u0022balu0\u0022\u003E\u003Cdiv\u003EI \u003Cp\u003ENeed\u003C/p\u003E\u003Cp\u003EFunctions\u003C/p\u003E\u003Cp\u003ENOW!\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThen you program kOS and deal with all the other demands people are making, all the while not getting paid to do so. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m almost done with my universal throttle control.. would be nice to use as a \u0022subroutine\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAside from what I mentioned above you can SORT OF emulate....(kinda, but maybe not really) by running other programs inside of your main program, and using parameters where necessary. \u003C/p\u003E\u003Cp\u003EBelow is a crude and not guaranteed to work...at all.. program, something I whipped up, without testing. Hopefully it gives you some idea on how this could work. I\u0027ve only done this once so far using a program trying to set nodes and adjust them to get a desired orbital period. Basically any variable set in your secondary program will carry over into your primary program, and when you \u0022call\u0022 the \u0022function\u0022 you can pass it variables by putting them in () as shown below with the circularization part.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//main program\u003Cbr\u003Eset orbitHeight to 100000.\u003Cbr\u003Erun throttleControl.\u003Cbr\u003Estage.\u003Cbr\u003E\u003Cbr\u003Elock steering to heading 90 by 90.\u003Cbr\u003Ewait until altitude \u0026gt; 10000.\u003Cbr\u003Elock steering to heading 90 by 45.\u003Cbr\u003Ewait until apoapsis 60000.\u003Cbr\u003Elock steering to heading 90 by 20.\u003Cbr\u003Ewait until apoapsis \u0026gt; orbitHeight.\u003Cbr\u003E\u003Cbr\u003Erun throttleControl.\u003Cbr\u003E\u003Cbr\u003Erun circularize(orbitHeight). // Call sudo/faux function\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//throttleControl pseudo code in this example \u003Cbr\u003Eif not launched, lock throttle to full. Break\u003Cbr\u003Eif launched, check speed/altitude, adjust throttle accordingly. Break once adjusted.\u003Cbr\u003Echeck altitude, if apoapsis nearing desired altitude throttle back. Break once adjusted.\u003Cbr\u003Eif desired apoapsis altitude reached cut throttle. Break\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//circularize\u003Cbr\u003Edeclare parameter orbitHeight\u003Cbr\u003Elock steering to prograde.\u003Cbr\u003Euntil orbitHeight \u0026lt; apoapsis {\u003Cbr\u003E   if apoapsis \u0026lt; orbitHeight-40000 {lock throttle to 1.}\u003Cbr\u003E   if apoapsis \u0026gt; orbitHeight-40000 and apoapsis \u0026lt; orbitHeight-5000 {lock throttle to .5.}\u003Cbr\u003E   if apoapsis \u0026gt; orbitHeight-5000 and apoapsis \u0026lt; orbitHeight {lock throttle to .1.}\u003Cbr\u003E   if apoapsis \u0026gt; orbitHeight {lock throttle to 0.}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Ewait until eta:apoapsis \u0026lt; 20.\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Euntil orbitHeight \u0026lt; periapsis {\u003Cbr\u003E   if periapsis \u0026lt; orbitHeight-40000 {lock throttle to 1.}\u003Cbr\u003E   if periapsis \u0026gt; orbitHeight-40000 and apoapsis \u0026lt; orbitHeight-5000 {lock throttle to .5.}\u003Cbr\u003E   if periapsis \u0026gt; orbitHeight-5000 and apoapsis \u0026lt; orbitHeight {lock throttle to .1.}\u003Cbr\u003E   if periapsis \u0026gt; orbitHeight {lock throttle to 0.}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"baloan","CreatedById":91670,"CreatedDateTime":"2013-11-08T20:56:21Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022willow\u0022 data-cite=\u0022willow\u0022\u003E\u003Cdiv\u003E@Baloan,\u003Cp\u003EI think the first thing you need is a node chaser script, which simply executes a Node, then a variety of scripts to set up nodes for changing apoapsis/periapsos (=circularization) and a scripts to create nodes that do hoffman transfers. If you have those the rest should become regular math. The specific calculations of transfer windows are at the very least code documented in various mods which all are open sourced. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E@willow:\u003C/p\u003E\u003Cp\u003EThanks for your hint which got me thinking about the steps to be taken:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003E node chaser: that is part of the ascent script that I uploaded to the kOS wikia (\u003Ca href=\u0022http://kos.wikia.com/wiki/Far2\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E). Now that subroutine programs are available I should be able to refactor a standalone module.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E circularization: Needs to find the correct place for maneuver nodes in arbitrary orbits. Something like: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eestablish_orbit(periapsis, apoapsis)\u003C/span\u003Eand \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eestablish_circular_orbit(altitude)\u003C/span\u003E. And yes, the script should find a solution with good fuel economy.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E docking: you want to be able to combine parts for an interplanetary transfer. Currently no rcs thruster support for translation (forward, backward, etc. see \u003Ca href=\u0022https://github.com/Nivekk/KOS/issues/46\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E \u003Ca href=\u0022https://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u0022 rel=\u0022external nofollow\u0022\u003EHohman transfer\u003C/a\u003E: Changing orbit to Mun is easy: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eestablish_orbit(ship:periapsis, rk \u002B mun:altitude)\u003C/span\u003E. The difficult part is to hit the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Launch_window\u0022 rel=\u0022external nofollow\u0022\u003Elaunch window\u003C/a\u003E for the burn so that Mun is actually there when I arrive at apoapsis. I am playing around to find those for a Kerbin Mun transfer. The only way to find an \u0022encounter\u0022 seems to be to brute force traverse node times. This might be feasible for Kerbin-Mun, but not for interplanetary transfers where searching for an encounter will take much longer - or will be impossible due to inclination (which is currently not supported. see \u003Ca href=\u0022https://github.com/Nivekk/KOS/issues/222\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E interplanetary transfers: without planetary positions relative to their \u0022parent\u0022 body, i.e. Kerbol for planets or Kerbin for Mun/Minmus, I cannot calculate transfer windows (relative body positions are currently not supported). As mentioned above, playing around with a node parameters until finding an encounter seems unrealistic - no wonder, space is mostly void and empty; very empty.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-08T21:29:50Z\u0022 title=\u002211/08/2013 09:29  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 8, 2013\u003C/time\u003E by baloan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"balu0","CreatedById":74978,"CreatedDateTime":"2013-11-08T21:07:58Z","Content":"\n\u003Cp\u003EHmm interesting.\u003C/p\u003E\u003Cp\u003EDo variables persist? \u003C/p\u003E\u003Cp\u003ESo if I set X to 2 in 1 program, do X get set to 2 on the other ?\u003C/p\u003E\u003Cp\u003EI will have to run some test. If it works like this I can have return values for my \u0022functions\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThx\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-08T21:08:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baloan\u0022 data-cite=\u0022baloan\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003E node chaser: that is part of the ascent script that I uploaded to the kOS wikia (\u003Ca href=\u0022http://kos.wikia.com/wiki/Far2\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E). Now that subroutine programs are available I should be able to refactor a standalone module.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m going to have to try that. I grabbed parts of your code from far2 to try for later. I\u0027m trying to get a launcher with 3 komm sats for RT2 into kerbosync. I\u0027ve got my launcher above 286...blah blah...and have tried getting a node set to the exact altitude needed with not much luck. It just keeps bouncing around the altitude needed. Maybe it\u0027ll work for me. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Once I get my AP where i want, I have to try and see if I can get the PE to where I need it for a 4hr orbital period...but I\u0027ll cross that bridge once I get the AP settled. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"balu0","CreatedById":74978,"CreatedDateTime":"2013-11-08T21:21:25Z","Content":"\n\u003Cp\u003EOk done some tests.\u003C/p\u003E\u003Cp\u003ETL/DR: variables ar global across all programs, so you can \u0022simulate functions\u0022 with \u0022run\u0022 command.\u003C/p\u003E\u003Cp\u003Ehere is a quick test code to try:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EProgram:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003Eset f1return to 0.\u003Cbr\u003Eset prog1 to 0.\u003Cbr\u003Eprint \u0022P: f1return \u0022 \u002B f1return.\u003Cbr\u003Eprint \u0022P: prog1    \u0022 \u002B prog1.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022Call Function\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003E\u003Cbr\u003E[B]run function1.[/B]\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Variables from program:\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022P: f1return \u0022 \u002B f1return.\u003Cbr\u003Eprint \u0022P: prog1    \u0022 \u002B prog1.\u003Cbr\u003E[B]print \u0022X created in function, but printed from program:\u0022 \u002B x.[/B] //this can be the return value of a function for example\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u0022Function\u0022\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset f1return to 1.\u003Cbr\u003Eset prog1 to 1.\u003Cbr\u003Eset x to 99.\u003Cbr\u003Eprint \u0022variables from function:\u0022.\u003Cbr\u003Eprint \u0022 \u0022.\u003Cbr\u003Eprint \u0022F: f1return \u0022 \u002B f1return.\u003Cbr\u003Eprint \u0022F: prog1    \u0022 \u002B prog1.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"mossman","CreatedById":1259,"CreatedDateTime":"2013-11-08T21:39:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lijat\u0022 data-cite=\u0022lijat\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003Emossman:\u003C/strong\u003E I\u0027m using something similar, just out of interest, how do you calculate Isp of you craft? My method is a bit slow it seems \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDiscounting launch vehicles, none of my craft have used different engine types in the same stage so I just use the posted Isp for the engine I am using.\u003C/p\u003E\n"}]}