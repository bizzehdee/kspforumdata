{"TopicId":113706,"ForumId":29,"TopicTitle":"SolverEngine:Why I get no FX or Emissive running in my mod based on SolverEngine","CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-22T14:08:01Z","PageNum":1,"Articles":[{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-22T14:08:01Z","Content":"\n\u003Cp\u003EI\u0027m working on my mod based on SolverEngine now.I\u0027m reading AJE and RF\u0027s source codes and found that both SolverEngine and them are amazing and work perfectly.However,I don\u0027t know how to get emissive and FX running.\u003C/p\u003E\u003Cp\u003EBased on my understanding of the sources,I coded in my mod as below\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public override double GetEngineTemp() { return chamberTemp; }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        public override double GetEmissive() { return fxPower; }\u003Cbr\u003E        public override float GetFXPower() { return fxPower; }\u003Cbr\u003E        public override float GetFXRunning() { return fxPower; }\u003Cbr\u003E        public override float GetFXThrottle() { return fxPower; }\u003Cbr\u003E        public override float GetFXSpool() { return fxPower; }\u003Cbr\u003E        public override bool GetRunning() { return fuelFlow \u0026gt; 0; }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhere the fxPower is a float( 0f~1f ),and debug shows it has correct value when running.\u003C/p\u003E\u003Cp\u003EBut there is no exhaust flame or other FX.\u003C/p\u003E\u003Cp\u003EMod\u0027s Git: \u003Ca href=\u0022https://github.com/Librazy/EngineDevelopment/tree/ParamAlpha\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Librazy/EngineDevelopment/tree/ParamAlpha\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThanks for reading and helping\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-24T17:07:09Z\u0022 title=\u002206/24/2015 05:07  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 24, 2015\u003C/time\u003E by Librazy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-06-22T14:48:20Z","Content":"\n\u003Cp\u003EYour Test.cfg config does not have any EFFECT node. So the engine has no effect to display. \u003C/p\u003E\u003Cp\u003EYou need to copy an EFFECT config from an other engine.\u003C/p\u003E\n"},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-22T15:05:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EYour Test.cfg config does not have any EFFECT node. So the engine has no effect to display. \u003Cp\u003EYou need to copy an EFFECT config from an other engine.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry for my stupid\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6Gonna to try it tomorrow\u00C3\u00AF\u00C2\u00BC\u00CB\u2020UTC\u002B8here\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-22T21:10:54Z","Content":"\n\u003Cp\u003EGreat to see this get use--and let us know if you need anything else added to SolverEngines! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-24T17:41:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EYour Test.cfg config does not have any EFFECT node. So the engine has no effect to display. \u003Cp\u003EYou need to copy an EFFECT config from an other engine.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks,I writes an cfg on a KW ModuleEngineFX that has an EFFECT,and It works well^But it seems some more work needs to be done to fit an ModuleEngine part=w=\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EGreat to see this get use--and let us know if you need anything else added to SolverEngines! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI dunna to write a mod like AJE on rocket engine,but I don\u0027t know how\u0026amp;what to do until I found SolverEngines.No issue for now^(These days I was buried in my messy liquid-engine-simulation codes to ensure it won\u0027t get out-ranged results)\u003C/p\u003E\u003Cp\u003EActually I need some data from RF like fuelFraction of CalculateGamma and the exhaust gases\u0027 molar mass.\u003C/p\u003E\u003Cp\u003EAnd an issue for RF:\u003C/p\u003E\u003Cp\u003EFor an ModuleEnginesSolver part when showing RF GUI in action group, It just run once CreateEngine but Multi-GetInfo on the propellants changed to.Mine reads Isp and other data depended on propellants-in-use when CreateEngine,so it wouldn\u0027t show correct data for currect propellants.And It seems that RF runs the engine sim on every OnGUI,which I think only need to run once from the beginning when loading and changing configs(like the stock part list do.\u003C/p\u003E\u003Cp\u003EThanks for bring us a lot of wonderful mods\u00C3\u00AF\u00C2\u00BC\u00C2\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EGreat to see this get use--and let us know if you need anything else added to SolverEngines! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPS:Due to the absent of EI on 1.0.x version,I add the ullage and ignition code from EI which I\u0027d like to include in my mod...Not until today did I found the Ullage branch of MFS\u0026amp;RF..\u003C/p\u003E\u003Cp\u003EI\u0027m reading ModuleEnginesRF to find out how to write a better ModuleEnginesDev for my EngineDevelopment\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E......Then I find out we won\u0027t meet on the same part for \u003Cspan style=\u0022color:#333333;\u0022\u003EModuleEnginesRF and ModuleEnginesDev...So I will write a :Final in the cfg\u003C/span\u003E to drive away any other \u003Cspan style=\u0022color:#333333;\u0022\u003EModuleEngines* (Badness\u003C/span\u003E:sticktongue:4 joking\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-24T18:31:49Z","Content":"\n\u003Cp\u003ESolverEngines derives from ModuleEnginesFX; it would be rather hard to make it work with non-ModuleEnginesFX effects. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003ESounds like you\u0027re doing some awesome stuff! In fact, I suggest you just fork RealFuels and go from there, since that\u0027s what RF\u0027s solver aspires to do (actually calculate real liquid and solid engine performance, rather than use curves); we just haven\u0027t written that yet. And interesting you mention ullage; I just added that to RF. Check the repo. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (Sorry we duplicated effort, since it sounds like we did the same thing).\u003C/p\u003E\u003Cp\u003EExcellent point about GetInfo, I\u0027ll fix that.\u003C/p\u003E\n"},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-24T20:10:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003ESounds like you\u0027re doing some awesome stuff! In fact, I suggest you just fork RealFuels and go from there, since that\u0027s what RF\u0027s solver aspires to do \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo..when i get my simulation and calculation right I\u0027ll redo it in RF and pull to your repo.\u003C/p\u003E\u003Cp\u003EIn my mod,I\u0027d like to add some cfg node other like ModuleNozzleConfig ModuleChamberConfig to get datas needed.So the player can get some different performance using different nozzles,chamber sand powercycles--the way to change settings is just the same to change fuels.So the basic thing is a realistic calculation engine performance,which I\u0027m trying to work on now.\u003C/p\u003E\u003Cp\u003EBut I\u0027m a new-hand on both KSP plugin and engine calculation,so I had made little progress so far.I think I will do better with your and others help.\u003C/p\u003E\u003Cp\u003EMy honor to take part in the wonderful work\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EPS: 04:00 a.m. here (..I should learn the lesson not to drink too much coffee before sleep..\u003C/p\u003E\n"},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-07-06T15:35:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003ESolverEngines derives from ModuleEnginesFX; it would be rather hard to make it work with non-ModuleEnginesFX effects. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003Cp\u003ESounds like you\u0027re doing some awesome stuff! In fact, I suggest you just fork RealFuels and go from there, since that\u0027s what RF\u0027s solver aspires to do (actually calculate real liquid and solid engine performance, rather than use curves); we just haven\u0027t written that yet. And interesting you mention ullage; I just added that to RF. Check the repo. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (Sorry we duplicated effort, since it sounds like we did the same thing).\u003C/p\u003E\u003Cp\u003EExcellent point about GetInfo, I\u0027ll fix that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBasically understood how RF works,I\u00C3\u00A2\u00E2\u201A\u00AC\u00CB\u0153m trying to rewrite SolverRF for real performance calculation.Just have liquid de laval engine done yet.//Hope I\u0027d written something useful\u003C/p\u003E\u003Cp\u003ETime to consider how the cfg should be\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6Would be a big project to find out the params for lots of engines.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/Librazy/ModularFuelSystem\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Librazy/ModularFuelSystem\u003C/a\u003E\u003C/p\u003E\n"}]}