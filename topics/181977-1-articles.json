{"TopicId":181977,"ForumId":70,"TopicTitle":"Ship undergoes nongravitational acceleration in hyperbolic orbit","CreatedByName":"MrSystems","CreatedById":195047,"CreatedDateTime":"2019-02-05T23:25:00Z","PageNum":1,"Articles":[{"CreatedByName":"MrSystems","CreatedById":195047,"CreatedDateTime":"2019-02-05T23:25:00Z","Content":"\n\u003Cp\u003E\nI have noticed that my heliocentric orbit on a transfer burn from \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E never looks quite like the planned maneuver node, and I have to do a correction (sometimes a massive one) after leaving Kerbin\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E. I think it\u0027s a problem with KSP 1.6.1 and not with any of the mods I have installed. I think, further, it is a problem that can be confused for \u0022warping too fast through the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E change\u0022 and is most noticeable when changing SOIs but has nothing at all to do with changing SOIs.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ESteps to Reproduce:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nPut a ship in low kerbin orbit.\n\u003C/li\u003E\n\u003Cli\u003E\nBurn to escape velocity.\n\u003C/li\u003E\n\u003Cli\u003E\nGo to the map screen and make note of where the ship is supposed to end up in Kerbol orbit\n\u003C/li\u003E\n\u003Cli\u003E\nHit F5 to quicksave\n\u003C/li\u003E\n\u003Cli\u003E\nOpen the saved file, and make note of the orbital parameters for the ship\n\u003C/li\u003E\n\u003Cli\u003E\nWait a few in-game minutes (no need to warp)\n\u003C/li\u003E\n\u003Cli\u003E\nHit F5 to quicksave\n\u003C/li\u003E\n\u003Cli\u003E\nOpen the saved file, and notice the orbital parameters for the ship have changed\n\u003C/li\u003E\n\u003Cli\u003E\nGo to the map screen and make note of new, different orbital parameters in heliocentric orbit\n\u003C/li\u003E\n\u003Cli\u003E\nWait or warp to but not past Kerbin\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E, and repeat the above three steps\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cstrong\u003EProblem Detail\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI followed the above steps with my last launch, which was to achieve an apoapsis relative to Kerbol of ~831Gm. Immediately after the burn was completed I noted the orbital parameters in the save file, and I did so periodically later.\u00A0 No warping happened between the first three columns, and all data is from within Kerbin\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E. This is what I found:\n\u003C/p\u003E\n\u003Ctable border=\u00221\u0022 cellpadding=\u00221\u0022 cellspacing=\u00221\u0022 style=\u0022width:600px;\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\nImmediately after\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n2 minutes after\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n5 more minutes\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\nwarping \u002B5 hours\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\nwarping \u002B40 min\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nMET\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4,357\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4,499\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4,777\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n22,881\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n25,478\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nSMA\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n-232,942.2\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n-232,942.2\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n-233,004.5\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n-233,004.6\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n-233,004.6\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nECC\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4.6721\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4.6721\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4.6715\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4.6715\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n4.6715\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nINC\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n11.37787102\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n11.37787089\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n11.37787088\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n11.37787104\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n11.37787104\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nLPE\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n180.4062\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n180.4062\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n180.4072\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n180.4072\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n180.4072\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nLAN\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n78.186933\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n78.186931\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n78.186930\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n78.186926\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n78.186926\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nMNA\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n5.20\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n9.85\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n312.32\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n355.70\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n355.70\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nEPH\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n426,124,386\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n426,124,664\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n426,142,769\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n426,145,365\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n426,145,365\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd style=\u0022text-align:right;\u0022\u003E\nv at \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n3,904.455\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n3,904.455\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n3,903.936\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n3,903.935\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:right;\u0022\u003E\n3,903.935\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003Cp\u003E\nThe first 7 rows came directly out of the save file. MET= mission elapsed tIme (in seconds), SMA = semi-major axis, ECC = eccentricity, INC = inclination, LPE = argument of periapsis, LAN = longitude of ascending node, MNA = mean anomaly at epoch, EPH = epoch.\u00A0 \u0027v at \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u0027 is my calculation, using ROOT(mu*(2/\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E - 1/SMA)), of the residual Kerbin-relative velocity at the edge of the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E, which directly relates to where the craft actually ends up after it leaves the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E. The discrepancy of 0.52 m/s resulted in a 6 gigameter shift relative to my target (Plock).\n\u003C/p\u003E\n\u003Cp\u003E\nWhat can be seen is:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nAt the full 17-specific digit level used in the save file (not reproduced here) the final two columns are precisely identical in all respects, but none of the others match in any respect.\n\u003C/li\u003E\n\u003Cli\u003E\nChanges in MNA and EPH between the first four columns mean KSP was updating the ship\u0027s orbit each time (ship not \u0022on rails\u0022).\n\u003C/li\u003E\n\u003Cli\u003E\nNo changes in any variable between the last two columns mean that the ship went \u0022on rails\u0022 at some point\n\u003C/li\u003E\n\u003Cli\u003E\nMost but not all of the change happened in the first 7 minutes after the burn was completed, while the craft was under ~500km altitude\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nFrom this data I conclude 1) that the KSP engine doesn\u0027t actually put orbiting ships on rails until some time after their thrust is cut off or until some altitude above Kerbin, and 2) the game is not correctly calculating orbital motion when the craft is not on rails.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAn additional supporting data point is that, during launches, Kerbal Engineer Redux indicates slight changes in my apoapsis (on the order of a few meters) after I\u0027ve left the atmosphere on ascent.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve even had problems getting to the Mun and Minmus from \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E, where the moon-relative periapsis at altitude ~2,000,000m is much different from what the conic sections indicated at the end of the burn from \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E.\u00A0 One could perhaps blame one of my mods, such as PreciseNode, for mucking around with the conic sections, but what this data seems to show\u00A0is that imprecise transfers are not due to imprecise conic sections or to \u0022warping too fast through the edge of the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E,\u0022 but rather to imprecise tracking of ships near Kerbin. Some distinguished professors interpret \u003Ca href=\u0022https://blogs.scientificamerican.com/observations/6-strange-facts-about-the-interstellar-visitor-oumuamua/\u0022 rel=\u0022external nofollow\u0022\u003Eunexpected nongravitational acceleration\u003C/a\u003E as proof of alien intervention in the solar system.\n\u003C/p\u003E\n\u003Cp\u003E\nBecause the \u0022How To Get Support\u0022 thread asked nicely, \u003Ca href=\u0022https://drive.google.com/open?id=1Olbczn0JVTXvbR-j4Q8XdS_3Drjp6W0M\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u0027s my log\u003C/a\u003E, but there\u0027s nothing of interest there.\n\u003C/p\u003E\n"}]}