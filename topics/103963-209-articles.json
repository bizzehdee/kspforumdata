{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":209,"Articles":[{"CreatedByName":"m4ti140","CreatedById":67296,"CreatedDateTime":"2016-10-21T15:09:49Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) I noticed that in the 1.2 versions of scatterer (including the current one) the \u0022disable scaled space ambient light\u0022 option doesn\u0027t seem to fix planet rendering through the atmosphere. Below is a screenshot of the Mun in early waxing crescent phase right after sunset:\n\n![j1kunJY.png](http://i.imgur.com/j1kunJY.png)\n\nIt should be barely visible but it is illuminated on the night side as if there was another star there. Either my install is totally borked, or whatever you did to fix this in earlier versions just unfixed itself"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2016-10-21T15:19:17Z","Content":"Small issue with the ocean shaders.\n\nI\u0027m using an Asus 1080 Strix (reference, GTX 1080) GPU and an intel 4790k CPU at 4.0 GHz. And boy has the framerate taken a dump with over 200 parts. As in, noticeable lag (when I shouldn\u0027t be getting any since shaders = GPU)."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-10-21T16:49:38Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Gamel0rd1 said:\n\u003E \n\u003E \n\u003E Small issue with the ocean shaders.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m using an Asus 1080 Strix (reference, GTX 1080) GPU and an intel 4790k CPU at 4.0 GHz. And boy has the framerate taken a dump with over 200 parts. As in, noticeable lag (when I shouldn\u0027t be getting any since shaders = GPU).\n\u003E \n\nCheck your ksp.log file for error spams.\n\n\u003E \n\u003E \n\u003E 1 hour ago, m4ti140 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) I noticed that in the 1.2 versions of scatterer (including the current one) the \u0022disable scaled space ambient light\u0022 option doesn\u0027t seem to fix planet rendering through the atmosphere. Below is a screenshot of the Mun in early waxing crescent phase right after sunset:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![j1kunJY.png](http://91.68.209.8/bmi/i.imgur.com/j1kunJY.png)](http://91.68.209.8/bmi/i.imgur.com/j1kunJY.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It should be barely visible but it is illuminated on the night side as if there was another star there. Either my install is totally borked, or whatever you did to fix this in earlier versions just unfixed itself\n\u003E \n\nI mentioned somewhere that it was broken in 1.2\n\nI haven\u0027t investigated yet."},{"CreatedByName":"Vandest","CreatedById":122250,"CreatedDateTime":"2016-10-21T17:12:57Z","Content":"\u003E \n\u003E \n\u003E 11 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Ask and ye shall receive (I will do it for the next mini-update)\n\u003E \n\nVery nice !! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nThank you in advance!"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2016-10-21T17:26:44Z","Content":"\u003E \n\u003E \n\u003E 41 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Check your ksp.log file for error spams.\n\u003E \n\nNothing out of the ordinary loading. No spam, no errors. After removing and reinstalling the mod, it still causes considerable lag. I have also disabled ocean shaders. Version: 1.2"},{"CreatedByName":"Vandest","CreatedById":122250,"CreatedDateTime":"2016-10-21T17:42:41Z","Content":"Station with more of 200 parts cause lags even with KSP vanilia.  \n\nThis is the black spot of KSP 1.2. My friend with i7\u002BRAM16Gb\u002BGTX1070 is crushed by KSP for this. He love build big stations and now he can\u0027t do it.  \n\nFor me, I do with lag in hope to Squad upgrade it."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-10-21T17:51:11Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, Gamel0rd1 said:\n\u003E \n\u003E \n\u003E Nothing out of the ordinary loading. No spam, no errors. After removing and reinstalling the mod, it still causes considerable lag. I have also disabled ocean shaders. Version: 1.2\n\u003E \n\nOh btw scatterer has nothing to do with part count. If you have an issue with high part counts only it\u0027s not me."},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2016-10-21T17:51:52Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Oh btw scatterer has nothing to do with part count. If you have an issue with high part counts only it\u0027s not me.\n\u003E \n\nNot a part count issue, either. It\u0027s making me lag a lot more than expected at 1 part"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-10-21T17:53:44Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Gamel0rd1 said:\n\u003E \n\u003E \n\u003E Not a part count issue, either. It\u0027s making me lag a lot more than expected at 1 part\n\u003E \n\nPost log and I will check it when I can. Also maybe try playing with the options and see if there\u0027s a difference."},{"CreatedByName":"justspace103","CreatedById":64088,"CreatedDateTime":"2016-10-21T22:30:25Z","Content":"Still having the problem with the atmospheric halo, how do i switch it off?"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2016-10-21T23:24:29Z","Content":"\u003E \n\u003E \n\u003E 53 minutes ago, justspace103 said:\n\u003E \n\u003E \n\u003E Still having the problem with the atmospheric halo, how do i switch it off?\n\u003E \n\nThe menu that pops up on the opening screen of KSP. Bottom of the window look for a check dot with the word \u0022Fix\u0022"},{"CreatedByName":"justspace103","CreatedById":64088,"CreatedDateTime":"2016-10-22T02:07:43Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, V8jester said:\n\u003E \n\u003E \n\u003E The menu that pops up on the opening screen of KSP. Bottom of the window look for a check dot with the word \u0022Fix\u0022\n\u003E \n\nok it worked thanks"},{"CreatedByName":"Moggiog","CreatedById":112824,"CreatedDateTime":"2016-10-22T10:06:45Z","Content":"For some reason this mod doesn\u0027t work or me in 1.2. When I have it installed the ocean and atmosphere becomes invisible. I have tried it both with and without any other mods."},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2016-10-22T18:07:21Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\n\nHi sir, I was trying to add scatterer to kerbal galaxy revamped mod in a clean install, kerbal galaxy revamped \u002B kopernicus, by themselves work like charm, the moment i add scatterer, and the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E view opens, there starts a memory leak that would go up to eating all my 32 GB of ram. Unfortunatly, not me, nor the mod developer don\u0027t know what is going on and how to handle it. can you please help us? here is the mod i am talking about :\n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/131911-113-official-release-of-kerbal-galaxy-revamped/\u0026page=1\u0026do=embed\u0022\u003E\u003C/iframe\u003E\n\nhere is a glitch i see in game : [http://prnt.sc/cxlg1c](http://prnt.sc/cxlg1c)\n\nand the memory leaking from memory graph, the arrow shows the moment \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E comes up : [http://prnt.sc/cxlg75](http://prnt.sc/cxlg75)\n\nfinally link to the log file : [https://www.dropbox.com/s/lrvnnxjuw5sb7hd/output_log.zip?dl=0](https://www.dropbox.com/s/lrvnnxjuw5sb7hd/output_log.zip?dl=0)\n\nand what catches the eye in that log file :\n\nNullReferenceException: Object reference not set to an instance of an object  \n\n  at scatterer.Manager.getDirectionToSun () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at scatterer.SkyNode.InitPostprocessMaterial (UnityEngine.Material mat) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at scatterer.SkyNode.Start () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at scatterer.Manager.Awake () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at scatterer.Core.Update () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n \u003Cbr\u003E\n(Filename:  Line: -1)\n\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\n\nplease help us\n\n**Edited \u003Ctime datetime=\u00222016-10-22T18:13:55Z\u0022 title=\u002210/22/2016 06:13  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 22, 2016\u003C/time\u003E by Jiraiyah**"},{"CreatedByName":"Vinhero100","CreatedById":170677,"CreatedDateTime":"2016-10-23T01:40:52Z","Content":"Uhhh... Where the heck can I download this? I tried from spcaedock but it didnt work. The settings toolbar showed up, but it was tiny and had nothing in it. Pls someone send a link to download a version that works. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Edit: and yes, I check from space with hyperedit in orbit. It didnt work.\n\n**Edited \u003Ctime datetime=\u00222016-10-23T01:43:06Z\u0022 title=\u002210/23/2016 01:43  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 23, 2016\u003C/time\u003E by Vinhero100**\n  \nClearing a question up"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2016-10-23T02:32:29Z","Content":"\u003E \n\u003E \n\u003E 46 minutes ago, Vinhero100 said:\n\u003E \n\u003E \n\u003E Uhhh... Where the heck can I download this? I tried from spcaedock but it didnt work. The settings toolbar showed up, but it was tiny and had nothing in it. Pls someone send a link to download a version that works. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Edit: and yes, I check from space with hyperedit in orbit. It didnt work.\n\u003E \n\nThe spacedock versions works just fine.  Also,  so you know,  saying it doesn\u0027t work doesn\u0027t help anyone.  Post your logs so we can see what is going on."},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2016-10-23T10:47:19Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, Galileo said:\n\u003E \n\u003E \n\u003E The spacedock versions works just fine.  Also,  so you know,  saying it doesn\u0027t work doesn\u0027t help anyone.  Post your logs so we can see what is going on.\n\u003E \n\nI think he means that his planet mod pack is not showing scatterer or something along those lines"},{"CreatedByName":"Vinhero100","CreatedById":170677,"CreatedDateTime":"2016-10-23T12:26:02Z","Content":"no I dont have any planet-adding mods, I will show a pic of what the settings toolbar looks like."},{"CreatedByName":"Vinhero100","CreatedById":170677,"CreatedDateTime":"2016-10-23T12:38:10Z","Content":"ugh... I cant paste it for some reason I\u0027ll do my best to represnt it here\n\n                               -------------------------------------------------\n\n                              |            Scatterer: version 0.0255         |\n\n                              |                     (empty)                            |\n\n                                ------------------------------------------------\n\nEdit: wait I installed it wrong woops thx guys\n\nNote: I will try gallelioes sun flares\n\n**Edited \u003Ctime datetime=\u00222016-10-23T12:39:54Z\u0022 title=\u002210/23/2016 12:39  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 23, 2016\u003C/time\u003E by Vinhero100**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-10-23T14:21:05Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Vinhero100 said:\n\u003E \n\u003E \n\u003E ugh... I cant paste it for some reason I\u0027ll do my best to represnt it here\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E                                -------------------------------------------------\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E                               |            Scatterer: version 0.0255         |\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E                               |                     (empty)                            |\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E                                 ------------------------------------------------\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edit: wait I installed it wrong woops thx guys\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Note: I will try gallelioes sun flares\n\u003E \n\nThat\u0027s an old version.\n\n\u003E \n\u003E \n\u003E 20 hours ago, Jiraiyah said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Hi sir, I was trying to add scatterer to kerbal galaxy revamped mod in a clean install, kerbal galaxy revamped \u002B kopernicus, by themselves work like charm, the moment i add scatterer, and the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E view opens, there starts a memory leak that would go up to eating all my 32 GB of ram. Unfortunatly, not me, nor the mod developer don\u0027t know what is going on and how to handle it. can you please help us? here is the mod i am talking about :\n\u003E \n\u003E \n\u003E \u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/131911-113-official-release-of-kerbal-galaxy-revamped/\u0026page=1\u0026do=embed\u0022\u003E\u003C/iframe\u003E\n\u003E \n\u003E \n\u003E here is a glitch i see in game : [http://prnt.sc/cxlg1c](http://prnt.sc/cxlg1c)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E and the memory leaking from memory graph, the arrow shows the moment \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E comes up : [http://prnt.sc/cxlg75](http://prnt.sc/cxlg75)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E finally link to the log file : [https://www.dropbox.com/s/lrvnnxjuw5sb7hd/output_log.zip?dl=0](https://www.dropbox.com/s/lrvnnxjuw5sb7hd/output_log.zip?dl=0)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E and what catches the eye in that log file :\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E NullReferenceException: Object reference not set to an instance of an object  \n\u003E \n\u003E   at scatterer.Manager.getDirectionToSun () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n\u003E   at scatterer.SkyNode.InitPostprocessMaterial (UnityEngine.Material mat) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n\u003E   at scatterer.SkyNode.Start () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n\u003E   at scatterer.Manager.Awake () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n\u003E   at scatterer.Core.Update () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n\u003E  \u003Cbr\u003E\n\u003E (Filename:  Line: -1)\n\u003E \u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\n\u003E \n\u003E \n\u003E \n\u003E please help us\n\u003E \n\nI don\u0027t know what this mod does but, do you rename the sun using kopernicus? If so you have a variable in the scatterer settings \u0022mainSunCelestialBody\u0022 which determines which body acts as the sun.\n\n\u003E \n\u003E \n\u003E On 10/22/2016 at 0:06 PM, Moggiog said:\n\u003E \n\u003E \n\u003E For some reason this mod doesn\u0027t work or me in 1.2. When I have it installed the ocean and atmosphere becomes invisible. I have tried it both with and without any other mods.\n\u003E \n\nThis doesn\u0027t help, post a log or something."},{"CreatedByName":"Vinhero100","CreatedById":170677,"CreatedDateTime":"2016-10-23T15:20:22Z","Content":"Ok I fixed it now scatterer works!! thx"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2016-10-23T15:33:05Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Vinhero100 said:\n\u003E \n\u003E \n\u003E Note: I will try gallelioes sun flares\n\u003E \n\nGalileo\u0027s Sun Flares is not updated for 1.2 and will not work with the current scatterer.  I will update it when I get some time"},{"CreatedByName":"sneekyzeke","CreatedById":153754,"CreatedDateTime":"2016-10-23T17:23:02Z","Content":"I absolutely *love* Scatterer, the atmospheric \u0026 especially the ocean effects. But my poor little ol\u0027 PC/graphics card is running at it\u0027s (acceptable frame rate) limit with SVE LR 1.1.4, Distant objects, \u0026 Planetshine. Scatterer looks great, but pushes my system *just* over the line. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022) Could anyone give me suggestions on what edits or fixes I could make to Scatterer to enjoy some of the effects, but be lighter on my system? I would appreciate it, and post any system particulars if it would help. I apologize if this the wrong place to ask.\n\n**Edited \u003Ctime datetime=\u00222016-10-23T17:24:08Z\u0022 title=\u002210/23/2016 05:24  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 23, 2016\u003C/time\u003E by sneekyzeke**\n  \nDiction"},{"CreatedByName":"doudou","CreatedById":103127,"CreatedDateTime":"2016-10-23T18:58:47Z","Content":"@sneekyzeke\n\n  Should follow this link:\n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/150386-para-sci-high-performance-atmosphere-pack/\u0026do=embed\u0022\u003E\u003C/iframe\u003E\n\nJ hope that it will be pleasant!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-10-23T19:52:55Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, sneekyzeke said:\n\u003E \n\u003E \n\u003E I absolutely *love* Scatterer, the atmospheric \u0026 especially the ocean effects. But my poor little ol\u0027 PC/graphics card is running at it\u0027s (acceptable frame rate) limit with SVE LR 1.1.4, Distant objects, \u0026 Planetshine. Scatterer looks great, but pushes my system *just* over the line. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022) Could anyone give me suggestions on what edits or fixes I could make to Scatterer to enjoy some of the effects, but be lighter on my system? I would appreciate it, and post any system particulars if it would help. I apologize if this the wrong place to ask.\n\u003E \n\nI would just disable the ocean shader, once that\u0027s done, you can run the mod on anything that already runs KSP.\n\nAlso, depending on your specs, forcing the game to run in directx 11 might give you a performance boost. Which GPU and CPU do you have?\n\n**Edited \u003Ctime datetime=\u00222016-10-23T19:54:20Z\u0022 title=\u002210/23/2016 07:54  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 23, 2016\u003C/time\u003E by blackrack**"}]}