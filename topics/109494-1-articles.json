{"TopicId":109494,"ForumId":69,"TopicTitle":"Issue w/ -popupwindow and focus (keyboard/joystisk)","CreatedByName":"Li0n","CreatedById":142527,"CreatedDateTime":"2015-05-16T12:23:16Z","PageNum":1,"Articles":[{"CreatedByName":"Li0n","CreatedById":142527,"CreatedDateTime":"2015-05-16T12:23:16Z","Content":"\n\u003Cp\u003EHi everyone\u003C/p\u003E\u003Cp\u003EAfter being hit several times by the 32bit wall I decide to jump to Linux and unleash the power of the 64bit:cool:\u003C/p\u003E\u003Cp\u003EFor start here\u0027s my specs :\u003C/p\u003E\u003Cp\u003EOS : FedoraXfce 21\u003C/p\u003E\u003Cp\u003ECPU : Intel Core(Gen1) i7 860 @ 2.8Ghz OC @ 3.5Ghz\u003C/p\u003E\u003Cp\u003EGPU : Gygabyte AMD R9 290x with the proprietary driver 14.12\u003C/p\u003E\u003Cp\u003EKSP 1.0.2 64bit\u003C/p\u003E\u003Cp\u003EThe things is I play on 3 monitors (1920x1080) in portrait mode for a total resolution of 3500x1920, bezels include. I struggle a little to make it work at this resolution on the desktop but it does (editing the position of each screen in \u0022xorg.conf\u0022 is the trick).\u003C/p\u003E\u003Cp\u003ENow come KSP, I patch him, install the additional fonts and run it with the script below. All of this is coming from \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92231-The-Linux-Thread\u0022 rel=\u0022external nofollow\u0022\u003EThe Linux Thread\u003C/a\u003E and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/98386-The-Other-Linux-Thread\u0022 rel=\u0022external nofollow\u0022\u003EThe Other Linux Thread\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cdiv\u003E\u003Cbr\u003E\u003Cbr\u003Eexport LC_ALL=C\u003Cbr\u003Eexport LD_PRELOAD=\u0022libpthread.so.0 libGL.so.1\u0022\u003Cbr\u003Eexport __GL_THREADED_OPTIMIZATIONS=1\u003Cbr\u003Eexec taskset -c 2-3 ./KSP.x86_64\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#!/bin/sh\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EOn first launch it runs on windowed mode and I can\u0027t find my desktop resolution in the settings (2560x1800 is the higher I can select). For whatever resolution if I enable full screen KSP goes full screen but only on one monitor.\u003C/p\u003E\u003Cp\u003ESo I change the resolution in .../Kerbal Space Progam/settings.cfg and in ~/.config/unity3d/Squad/Kerbal Space Program/prefs to 3500x1920.\u003C/p\u003E\u003Cp\u003EKSP loads a window but only on one screen but if I move this window by dragging the menu bar it become a 3500x1920\u0027s window.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Almost there the only things left is get rid of this menu bar\u003C/p\u003E\u003Cp\u003EI change the script show above by adding \u0022 -popupwindow\u0022 at the last line and : it works ! ! !\u003C/p\u003E\u003Cp\u003EWell actually not, the window is drawing on all three monitors but stays in the \u0022back plan\u0022, the Xfce task bar stays on top of it and if I Alt\u002BF11 to switch full screen it is the previous used window (usually the file manager) who goes full screen (on one monitor).\u003C/p\u003E\u003Cp\u003ESecond things I can\u0027t use my keyboard, when I type somethings a little window appears (probably from the file manager, Thunar) with a text-field and the character I just type in it but KSP don\u0027t acknowledge it. The joystick is broken too, I can\u0027t assign any axes except the throttle.\u003C/p\u003E\u003Cp\u003ESo it seems to have an issue with the window focus and the \u0022 -popupwindow\u0022 option.\u003C/p\u003E\u003Cp\u003EThis may be related to the way I execute the launch script, at first when I double-click on it, it start in a text-editor so I change the \u0022open with\u0022 option to open with /usr/bin/bash and /usr/bin/sh but no luck there. I also try to execute the script with the terminal but it\u0027s the same....\u003C/p\u003E\u003Cp\u003EI am now clueless and need the wisdom of the KSP/Linux expert. I\u0027m pretty sure it\u0027s a simple things to add in the script to force the focus but what ? ....\u003C/p\u003E\u003Cp\u003EIf you have any idea or need more information please post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m a noob concerning Linux so please be patient...\u003C/p\u003E\n"},{"CreatedByName":"surge","CreatedById":136150,"CreatedDateTime":"2015-05-16T15:53:06Z","Content":"\n\u003Cp\u003E-popupwindow only works on windows (and very old versions only I think). I soooo wish it did on linux too, or used XRandR properly, I have a script to reset the config to windowed, and then I have to move the window to the correct screen and then set it to fullscreen on every start:\u003C/p\u003E\u003Cp\u003Esed -i \u0027s/^FULLSCREEN[ ]=[ ]True/FULLSCREEN = False/\u0027 settings.cfg\u003C/p\u003E\u003Cp\u003EKSP doesn\u0027t support multi-displays. The best you\u0027ll get is resizing a window across your screens as you\u0027ve already done. Unfortunately unity/mono/windows crap doesn\u0027t do standard X11 -geometry 120000x6000000\u002B0\u002B40000 arguments either - they\u0027ve never had a standard way to define window size and position.\u003C/p\u003E\u003Cp\u003EI\u0027ve not used Xfce since it was called fvwm (several decades ago), but if you don\u0027t click on the window for the screen it started from, you\u0027re likely to focus something else like the taskbar or background.\u003C/p\u003E\u003Cp\u003EIncidentally, has anyone uncovered all the cmdline arguments that work?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-16T15:57:20Z\u0022 title=\u002205/16/2015 03:57  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 16, 2015\u003C/time\u003E by surge\u003C/strong\u003E\n\u003Cbr\u003E\u0026quot;and position\u0026quot;\n\u003C/span\u003E\n"},{"CreatedByName":"Li0n","CreatedById":142527,"CreatedDateTime":"2015-05-16T18:30:08Z","Content":"\n\u003Cp\u003EHey surge, thanks for the reply. As I say I\u0027m a beginner in the Linux world, they are a few things in your post I don\u0027t understand.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022surge\u0022 data-cite=\u0022surge\u0022\u003E\u003Cdiv\u003E-popupwindow only works on windows (and very old versions only I think)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhen you say \u0022old version\u0022 you mean Windows version or KSP version ? I have KSP 1.0.2 running fine (except from the memory leaks) on Windows 7 with \u0022 -popupwindow\u0022. In Unity documentation they don\u0027t say anything about a no-compatibility with Linux (see \u003Ca href=\u0022http://docs.unity3d.com/Manual/CommandLineArguments.html\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, in the \u0022Unity Standalone Player command line arguments\u0022 section).\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022surge\u0022 data-cite=\u0022surge\u0022\u003E\u003Cdiv\u003EI soooo wish it did on linux too, or used XRandR properly\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat is XRandR ?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022surge\u0022 data-cite=\u0022surge\u0022\u003E\u003Cdiv\u003EI have a script to reset the config to windowed, and then I have to move the window to the correct screen and then set it to fullscreen on every start:\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI assume you have a multi-monitors setup but you play on one monitor ? As I say if I toggle fullscreen (via settings.cfg or ALT\u002BF11) the game goes fullscreen but on only one monitor.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022surge\u0022 data-cite=\u0022surge\u0022\u003E\u003Cdiv\u003EKSP doesn\u0027t support multi-displays. The best you\u0027ll get is resizing a window across your screens as you\u0027ve already done. Unfortunately unity/mono/windows crap doesn\u0027t do standard X11 -geometry 120000x6000000\u002B0\u002B40000 arguments either - they\u0027ve never had a standard way to define window size and position.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t understand everything you wrote but what I \u0022\u0022think\u0022\u0022 is that the problem is more from the way Linux deals with triple screen.\u003C/p\u003E\u003Cp\u003EOn Windows, once the Eyefinity is setup, there is only one big screen and no way (as far as I know) for a program to \u0022know\u0022 if and where they are other monitors.\u003C/p\u003E\u003Cp\u003EOn Linux on the other hand, programs seems to be aware of the multi monitor setup (for example each monitor show a different screen-saver) so it mess with the fullscreen.\u003C/p\u003E\u003Cp\u003EIs there a way of creating a virtual monitor of 3500x1920 containing the 3 physical one ?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022surge\u0022 data-cite=\u0022surge\u0022\u003E\u003Cdiv\u003EI\u0027ve not used Xfce since it was called fvwm (several decades ago), but if you don\u0027t click on the window for the screen it started from, you\u0027re likely to focus something else like the taskbar or background.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe things is I can actually click anywhere I want, it works, it\u0027s only for the keyboard (and the joystick) that\u0027s there an issue.\u003C/p\u003E\u003Cp\u003EI was even able to launch something by activating the engine with the right-click menu:P\u003C/p\u003E\n"},{"CreatedByName":"surge","CreatedById":136150,"CreatedDateTime":"2015-05-16T19:27:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Li0n\u0022 data-cite=\u0022Li0n\u0022\u003E\u003Cdiv\u003EHey surge, thanks for the reply. As I say I\u0027m a beginner in the Linux world, they are a few things in your post I don\u0027t understand.\u003Cp\u003EWhen you say \u0022old version\u0022 you mean Windows version or KSP version ? I have KSP 1.0.2 running fine (except from the memory leaks) on Windows 7 with \u0022 -popupwindow\u0022. In Unity documentation they don\u0027t say anything about a no-compatibility with Linux (see \u003Ca href=\u0022http://docs.unity3d.com/Manual/CommandLineArguments.html\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, in the \u0022Unity Standalone Player command line arguments\u0022 section).\u003C/p\u003E\u003Cp\u003EWhat is XRandR ?\u003C/p\u003E\u003Cp\u003EI assume you have a multi-monitors setup but you play on one monitor ? As I say if I toggle fullscreen (via settings.cfg or ALT\u002BF11) the game goes fullscreen but on only one monitor.\u003C/p\u003E\u003Cp\u003EI don\u0027t understand everything you wrote but what I \u0022\u0022think\u0022\u0022 is that the problem is more from the way Linux deals with triple screen.\u003C/p\u003E\u003Cp\u003EOn Windows, once the Eyefinity is setup, there is only one big screen and no way (as far as I know) for a program to \u0022know\u0022 if and where they are other monitors.\u003C/p\u003E\u003Cp\u003EOn Linux on the other hand, programs seems to be aware of the multi monitor setup (for example each monitor show a different screen-saver) so it mess with the fullscreen.\u003C/p\u003E\u003Cp\u003EIs there a way of creating a virtual monitor of 3500x1920 containing the 3 physical one ?\u003C/p\u003E\u003Cp\u003EThe things is I can actually click anywhere I want, it works, it\u0027s only for the keyboard (and the joystick) that\u0027s there an issue.\u003C/p\u003E\u003Cp\u003EI was even able to launch something by activating the engine with the right-click menu:P\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWindows KSP -popupwindow is dubious... there is a quite recent thread here about it. It has never worked in linux AFAIK.\u003C/p\u003E\u003Cp\u003EYou have to remember that unity is primarily a windows platform. We were lucky to get KSP on linux at all.\u003C/p\u003E\u003Cp\u003ESee \u0060man xrandr\u0060.\u003C/p\u003E\u003Cp\u003EAnd you are correct about the multi setup... you can create any desktop size you want using eyefinity/twinview or any proprietry garbage, but they all just present a standard X11 desktop called Xinerama/XRandR to programs.\u003C/p\u003E\u003Cp\u003EIt won\u0027t help you start KSP \u003Cem\u003Eat that size\u003C/em\u003E (-geometry ....) because being essentially a windows program, it has never heard of that commandline argument, even though it\u0027s standard on unix/X11.\u003C/p\u003E\u003Cp\u003EThat is why I just give up and use my little script so I can move the window to the biggest screen I have and then manually fullscreen it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-16T19:44:45Z\u0022 title=\u002205/16/2015 07:44  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 16, 2015\u003C/time\u003E by surge\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-17T14:14:52Z","Content":"\n\u003Cp\u003E-popupwindow is only \u003Cem\u003Esupposed\u003C/em\u003E to work on Windows, though it can work on Linux your results may vary.\u003C/p\u003E\u003Cp\u003ECustom resolutions can be set in the settings.cfg directly, doesn\u0027t matter if the engine failed to detect them as usable.\u003C/p\u003E\u003Cp\u003EYou can find all the command line args here, \u003Ca href=\u0022http://docs.unity3d.com/Manual/CommandLineArguments.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E[Link]\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Li0n","CreatedById":142527,"CreatedDateTime":"2015-05-17T16:38:53Z","Content":"\n\u003Cp\u003EHey sal_vager.\u003C/p\u003E\u003Cp\u003EAfter further testing I find that even if I can play in windowed mode (without \u0022-popupwindow\u0022) at the moment I move the window the game slow down a lot. Not fps/graphics, even the load screen is a lot slower.\u003C/p\u003E\u003Cp\u003EIs there a way to fix it ? It\u0027s like the cpu assign less power to ksp but in the taskmanager there isn\u0027t a difference.\u003C/p\u003E\u003Cp\u003EI try to change the affinity to maximum but no effect.\u003C/p\u003E\u003Cp\u003EWhen I hit F11 (goto fullscreen on one monitor) ksp regain its speed.\u003C/p\u003E\u003Cp\u003ESecond hope : play with -popupwindow and only the mouse. It\u0027s maybe possible, thanks to the mod \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92586-1-0-2-RKE-On-screen-Joystick-%28and-Fine-Keyboard-Controls%29-v1-2-1-May-11\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003ERKE On-screen joystick\u003C/strong\u003E\u003C/a\u003E and some others like tweakableEverythings and Action Group Extended.\u003C/p\u003E\u003Cp\u003EBut probably a lot of other issue, naming ships or doing EVA for example....\u003C/p\u003E\u003Cp\u003EI continue to looking into it and welcome any idea but...\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EHow hard can setting up a triple-monitor to play KSP on Linux can be anyway ?\u003C/em\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-17T18:56:52Z","Content":"\n\u003Cp\u003EI don\u0027t know how to set up triple monitors sorry, but your window dragging issue sounds like it\u0027s the compositor, have you tried disabling it?\u003C/p\u003E\u003Cp\u003EI suggest you post your logs somewhere and link them here for us, see the support stickies for details.\u003C/p\u003E\n"},{"CreatedByName":"Li0n","CreatedById":142527,"CreatedDateTime":"2015-05-17T19:51:31Z","Content":"\n\u003Cp\u003EHere comes the logs : \u003C/p\u003E\u003Cp\u003EKSP with \u0022 -popupwindow\u0022\u003C/p\u003E\u003Cp\u003EKSP.log : \u003Ca href=\u0022http://pastebin.com/RjK4M7vC\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/RjK4M7vC\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPlayer.log : \u003Ca href=\u0022http://pastebin.com/fwzGeE5y\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/fwzGeE5y\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EKSP windowed, I don\u0027t touch the window\u003C/p\u003E\u003Cp\u003EKSP.log : \u003Ca href=\u0022http://pastebin.com/HE2mwaNb\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/HE2mwaNb\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPlayer.log : \u003Ca href=\u0022http://pastebin.com/uwwNzLLe\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/uwwNzLLe\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EKSP windowed, I move the window (auto-rescale to fit all the screens)\u003C/p\u003E\u003Cp\u003EKSP.log : \u003Ca href=\u0022http://pastebin.com/dfqSz63G\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/dfqSz63G\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPlayer.log : \u003Ca href=\u0022http://pastebin.com/EtnwkXbZ\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/EtnwkXbZ\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI just start the game and quit it. The two first works fine (except the keyboard for the first) but the third is very slow, takes 2min to load versus 30sec for the others.\u003C/p\u003E\u003Cp\u003EI don\u0027t try disabling the compositor, as I say my experience with Linux is pretty low (I didn\u0027t know 2 minute ago what a compositor is). But I look into that direction, tomorrow.\u003C/p\u003E\u003Cp\u003EGood (insert the current moment of the day here) all and thx for the helps\u003C/p\u003E\n"},{"CreatedByName":"surge","CreatedById":136150,"CreatedDateTime":"2015-05-29T01:47:44Z","Content":"\n\u003Cp\u003EThat\u0027s just the recent clogging up your graphics board rendering the desktop in pointless 3d, when it should be rendering your desktop in 2d and the game/program you\u0027re currently using in 3d. Gnome now calls it oh... unity. How odd.\u003C/p\u003E\u003Cp\u003EI\u0027ve just switched to Xfce recently in absolute discust of this idiocy. I said before I hadn\u0027t used it for decades... I like how it isn\u0027t so complicated to configure now.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-29T04:50:08Z\u0022 title=\u002205/29/2015 04:50  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 29, 2015\u003C/time\u003E by Claw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2015-05-29T08:22:16Z","Content":"\n\u003Cp\u003E\u002B1 on the idiocy, I have no problem at all with \u003Cem\u003Eoptional\u003C/em\u003E desktop compositing, but unity won\u0027t even load a desktop without GL these days. Snookers all the decent remote desktop solutions too.\u003C/p\u003E\u003Cp\u003ENo, \u0027fallback mode\u0027 isn\u0027t an acceptable solution. Not if it cripples the DE. Hence goodbye GNOME/Unity/Buntard.\u003C/p\u003E\u003Cp\u003EThankfully KDE still has special application settings -\u0026gt; block compositing. But not for much longer... RatPoison here I come.\u003C/p\u003E\u003Cp\u003EBack on topic: How are you doing multi display? AMD proprietary whatsit or static xinerama setup?\u003C/p\u003E\u003Cp\u003EIt\u0027s been a while since I did this, and I don\u0027t actually have more than one monitor now... but I may be able to remember some xorg.conf foo. Maybe.\u003C/p\u003E\u003Cp\u003EAre there any tricks you can play with your window manager? Again, KWin has options to force size / fullscreen / stay on top etc. for specific applications... Dunno what XFWM can do though.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-29T08:40:36Z\u0022 title=\u002205/29/2015 08:40  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 29, 2015\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003C/span\u003E\n"}]}