{"TopicId":87222,"ForumId":34,"TopicTitle":"[0.90] DDSLoader 1.9 (Mar 9) - Loads DDS Texture \u0026quot;Boringly fast\u0026quot; edition","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-13T21:08:10Z","PageNum":7,"Articles":[{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-21T18:20:14Z","Content":"\n\u003Cp\u003Eshaw sent me a small patch that fix something I did not check for : the texture were not properly set as read only, so they would would eat memory instead of going to the GPU. \u003C/p\u003E\u003Cp\u003ESo here is \u003Ca href=\u0022https://ksp.sarbian.com/jenkins/job/DDSLoader/lastSuccessfulBuild/artifact/DDSLoader-1.2.0.0.zip\u0022 rel=\u0022external nofollow\u0022\u003E1.2\u003C/a\u003E with a 1 line fix \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-21T18:50:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003EWell, I was focusing on mbm files. And they seems to have their own rules regarding swizzling... I just ran some tests with TGAs, and this time Unity expect xGxR format. So you were all right about that, RGRA isn\u0027t a format Unity should use (I really don\u0027t get why this is working.)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo Lilleman, I did test mbm normal maps, I even used the very same part, the X200-16 tank.\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t matter what\u0027s in the red and blue channel. I tested it with mirrored green, with red and blue set to 1, to 0, to anything. I put different greyscale images with smilies into the red and blue channel and it didn\u0027t make the slightest difference (maybe a few more artefacts).\u003C/p\u003E\u003Cp\u003EEDIT: Here\u0027s the mbm to dds converted normal map with two different smilie images in the red and blue channel: \u003Ca href=\u0022https://www.dropbox.com/s/w3iqxng8znuvlqa/model001.dds?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/w3iqxng8znuvlqa/model001.dds?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENOTE: THIS IS FOR THE \u003Cstrong\u003EX200-16 FUEL TANK\u003C/strong\u003E!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-21T19:13:48Z\u0022 title=\u002210/21/2014 07:13  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 21, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-21T20:18:40Z","Content":"\n\u003Cp\u003EWell, as I said, I don\u0027t really understand why it works. It shouldn\u0027t. I tried different swizzling from a raw image (mbm files are 20bytes header \u002B raw data) without being able to get the \u0022correct\u0022 format to work. \u003Ca href=\u0022https://www.dropbox.com/s/gbqlv9q8h3q0xo5/model001.dds?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EHere\u003C/a\u003E is the dds my prog produce (using RGBA-\u0026gt;RGRA logic), and \u003Ca href=\u0022http://imgur.com/a/mDEvB\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E is what it looks like in-game...\u003C/p\u003E\u003Cp\u003EIf someone has any explanation to this, please let me know, I\u0027m trying to code a tool to automatize the process, and, even I got it working somehow, I want it to be working properly...\u003C/p\u003E\u003Cp\u003EEdit: this is still for the Rockomax x200-16.\u003C/p\u003E\u003Cp\u003EEdit2: This dds probably contains mipmaps, so you might get some weird results if you\u0027re zooming too far, that\u0027s just because I didn\u0027t implement the option yet (it\u0027s planned).\u003C/p\u003E\u003Cp\u003EEdit3 : Sarbian, Github is up to date, but the link for the build in front page still point to 1.1.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-21T22:35:48Z\u0022 title=\u002210/21/2014 10:35  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 21, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KevinCathcart","CreatedById":126664,"CreatedDateTime":"2014-10-21T23:44:54Z","Content":"\n\u003Cp\u003ELilleman: The correct swizzling for mbm is RGBA=\u0026gt;RGBA (I.E. no swizzling.)\u003C/p\u003E\u003Cp\u003EThat is because all mbm textures are RAW decompressed versions of DXT* textures dumped straight from the unity game engine. \u003C/p\u003E\u003Cp\u003EThat is literally how part-tools creates them. Check the source code of an older version of part-tools, it is as simple as can be. All that is needed to to simply re-compress them.\u003C/p\u003E\u003Cp\u003EI repeat that again, because it is important: After the header, MBM files are RGBA dumps of raw texture data at mip level 0.\u003C/p\u003E\u003Cp\u003EAlso since MBM are a dump textures, they should not need to be flipped in the conversion process, unlike the other formats. That is because unity already did the flipping relative to the original source format.\u003C/p\u003E\u003Cp\u003ESo basically you have \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Enon-normal map:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Enon-mbm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf 24 bit or 32 bit with all alphas zero, flip and convert to DXT1.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf it has non-zero alpha values, flip convert to DXT5.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Embm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf 24 bit or 32 bit with all alphas zero, convert to DXT1.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf it has non-zero alpha values, convert to DXT5.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Enormal maps:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Enon-mbm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003ESwizzle RGBA (XYZ-) to GGGR (-Y-X) and convert to DXT5, resulting in DXT5nm.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Embm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EDo not swizzle, but convert directly to DXT5, resulting in DXT5nm\u003C/div\u003E\n"},{"CreatedByName":"shaw","CreatedById":64788,"CreatedDateTime":"2014-10-22T00:48:52Z","Content":"\n\u003Cp\u003EThat\u0027s not correct. It should be:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinCathcart\u0022 data-cite=\u0022KevinCathcart\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Enon-normal map:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Enon-mbm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf 24 bit or 32 bit with all alphas \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E255\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E, flip and convert to DXT1 \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Ewith mipmaps (unless an UI icon)\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf it has \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Enon-255\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E alpha values, flip and convert to DXT5 \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Ewith mipmaps (unless an UI icon)\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Embm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf 24 bit or 32 bit with all alphas \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E255\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E, convert to DXT1 \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Ewith mipmaps (unless an UI icon)\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EIf it has non-\u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E255\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E alpha values, convert to DXT5 \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Ewith mipmaps (unless an UI icon)\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Enormal maps:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Enon-mbm:\u003C/div\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EFlip\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E, swizzle RGBA (XYZ-) to GGGR (-Y-X) and convert to DXT5 \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Ewith mipmaps\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E, resulting in DXT5nm.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003Embm:\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003EDo not swizzle, but convert directly to DXT5 \u003C/div\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003C/span\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003Ewith mipmaps\u003C/div\u003E\u003Cdiv style=\u0022margin-left:3px;\u0022\u003E, resulting in DXT5nm\u003C/div\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-22T01:09:21Z","Content":"\n\u003Cp\u003EThanks for the clarification, I was thinking mbm files were handled the same way as any other file, and it was driving me nuts. The RGRA thing was something I came up with after trying to reproduce nvdxt\u0027s dxt5nm files. I guess I can cut that swizzling part out of my code now. I\u0027ve spent way too much time trying to figure this out... I would like to apologize to everyone who tried to help me, somehow I tried to make things more complicated than they really were...\u003C/p\u003E\u003Cp\u003EFor the rest, I ended up with a (kind of) similar logic for conversion (sort of, I actually convert non-mbm normals to (0x80)G(0x80)R instead of GGGR, but that\u0027s not really important in this case), so fortunately I won\u0027t have to re-write anything in my code. The next tricky part will be to determine if a TGA/PNG file is a normal (I hope checking filenames and blue channel will be enough, because it\u0027s my only idea for now).\u003C/p\u003E\u003Cp\u003E@shaw: Are you sure normals should have mipmaps? I made one test, converting the av-r8 winglet normal with mipmaps and I got weird results when zooming out.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-22T01:21:36Z\u0022 title=\u002210/22/2014 01:21  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 22, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-22T02:39:05Z","Content":"\n\u003Cp\u003EExperiment with the different filtering options and try to normalize the mipmaps. Nvdxt can do all of this.\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-22T10:36:54Z","Content":"\n\u003Cp\u003EMy bad, I missed an argument when loading my normals trough D3D\u0027s TextureLoader... Apparently if you don\u0027t apply a \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/windows/desktop/bb322858%28v=vs.85%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003Efilter\u003C/a\u003E to mipmaps manually, DX decide to convert those into a blurry mess... But only for normals, regular textures mipmaps looks fine...\u003C/p\u003E\u003Cp\u003EI still got some tests to do to see wich one provide the best quality, but at least I know where the problem come from.\u003C/p\u003E\u003Cp\u003ESorry for wasting everyone\u0027s time again...\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2014-10-22T17:24:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003ESorry for wasting everyone\u0027s time again...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOn the contrary - someone needs to figure out what format KSP needs its textures in so that people can make working mods with the best visual quality. Keep up the good work \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"shaw","CreatedById":64788,"CreatedDateTime":"2014-10-23T01:37:56Z","Content":"\n\u003Cp\u003EI just discovered that DDS supports normal map flag. I noticed GIMP recognises DXT5nm-saved files apart from regular DXT5. It converts DXT5nm files back to RGB=XYZ when opened.\u003C/p\u003E\u003Cp\u003EHere\u0027s the header that defines (non-standard) DDPF_NORMAL flag used in DDS_PIXELFORMAT.dwFlags field: \u003Ca href=\u0022https://gimp-dds.googlecode.com/svn-history/r215/trunk/dds.h\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://gimp-dds.googlecode.com/svn-history/r215/trunk/dds.h\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-23T09:28:53Z","Content":"\n\u003Cp\u003EA quick search shows that blender also support this flag. Let\u0027s use that then \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI won\u0027t be able to look into it before my return on the 5th however.\u003C/p\u003E\u003Cp\u003EEdit : and it\u0027s in \u003Ca href=\u0022https://nvidia-texture-tools.googlecode.com/svn-history/r16/trunk/src/nvimage/DirectDrawSurface.cpp\u0022 rel=\u0022external nofollow\u0022\u003Enivdia tools\u003C/a\u003E too it seems. less and less non-standard\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-23T11:14:54Z","Content":"\n\u003Cp\u003ESo, just to be sure I can keep the code I already made for modifying byte#35: This time, byte#76=0x80, right?\u003C/p\u003E\u003Cp\u003EI hope it is, in this case I\u0027ll just have to modify one line. Anyway, I\u0027ve almost finished my \u003Ca href=\u0022http://i.imgur.com/3OZpD11.jpg\u0022 rel=\u0022external nofollow\u0022\u003Econverter\u003C/a\u003E, just have some cleaning to do in the source. \u003C/p\u003E\u003Cp\u003EI swear this is the last time I deal with DirectX directly, next time I\u0027ll go with an external library: I finished squeezing memory leaks at 3AM, and it still sometimes randomly crash when it load a tga or a png (that sounds familiar).\u003C/p\u003E\u003Cp\u003EFor now it\u0027s very basic: it can load a mbm, tga or png and convert it automatically into a dds, and it can do the same with a whole folder (with a list of folder/files to exclude if needed).\u003C/p\u003E\u003Cp\u003ESince I plan to release it eventually (hopefully before the end of the week), anyone think of a function I could implement while I\u0027m at it?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003EOn the contrary - someone needs to figure out what format KSP needs its textures in so that people can make working mods with the best visual quality. Keep up the good work \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know if running straight into every possible obstacle could be considered as \u0022good work\u0022, but, yeah, I guess someone had to do it...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-23T11:22:51Z\u0022 title=\u002210/23/2014 11:22  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 23, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-23T11:59:45Z","Content":"\n\u003Cp\u003Eshaw submited the patch for the DDPF_NORMAL flag, and with hte magic of github and jenkins I just built 1.4 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Urgante","CreatedById":120746,"CreatedDateTime":"2014-10-23T12:33:18Z","Content":"\n\u003Cp\u003EA million of thanks for working in that converter Lilleman , I tried a lot of converters and configurations in the nvdxt .bat without finding a universal solution, (what worked for some textures didn\u0027t work for others), so having a tool to convert all of them is just what we needed.\u003C/p\u003E\n"},{"CreatedByName":"frash23","CreatedById":69988,"CreatedDateTime":"2014-10-23T15:01:47Z","Content":"\n\u003Cp\u003EHow stable is this for a lightly modded 0.25 game?\u003C/p\u003E\u003Cp\u003EAre there any downsides? How much are loading times improved?\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-23T15:14:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESince I plan to release it eventually (hopefully before the end of the week), anyone think of a function I could implement while I\u0027m at it?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA filter for a minimum size (pixel or perhaps kB) to exclude icons or similar. Maybe with an additional converting option, as example uncompressed u888/u8888.\u003C/p\u003E\u003Cp\u003EHow do you handle rescaling of textures with block compression incompatible resolution?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003Eshaw submited the patch for the DDPF_NORMAL flag, and with hte magic of github and jenkins I just built 1.4 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd what exactly are the advantages of this?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-23T15:18:52Z\u0022 title=\u002210/23/2014 03:18  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 23, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"shaw","CreatedById":64788,"CreatedDateTime":"2014-10-23T15:27:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003EAnd what exactly are the advantages of this?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETo avoid some harmless warning messages. KSP won\u0027t try (and fail) to convert normal maps without \u0022NRM\u0022 suffix from RGB to GGGR during model loading.\u003C/p\u003E\n"},{"CreatedByName":"shand","CreatedById":57781,"CreatedDateTime":"2014-10-23T15:35:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frash23\u0022 data-cite=\u0022frash23\u0022\u003E\u003Cdiv\u003EHow stable is this for a lightly modded 0.25 game?\u003Cp\u003EAre there any downsides? How much are loading times improved?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ei\u0027ve got what i consider a heavily modded version, but its not heavy by most peoples count (NEAR, realchutes, procedural fairings, mechjeb, remotetech, RCT, contracts\u002B and a few USI mods).\u003C/p\u003E\u003Cp\u003Ewhat i\u0027ve noticed is roughly half loading time (nice on my low spec machine). my only issues have been it pretty much broke the icons for the toolbar (oh i have toolbar too), so i\u0027ve had to copy them back in the original format... that said i have only a basic understanding what i am doing and havent followed this conversation for a few pages so they may have worked out what was up and things by now)\u003C/p\u003E\u003Cp\u003ESummary: halfs load time, seems pretty damn stable to me with the exception of toolbar icons when i did it.,\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-23T16:00:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003EA filter for a minimum size (pixel or perhaps kB) to exclude icons or similar. Maybe with an additional converting option, as example uncompressed u888/u8888.\u003Cp\u003EHow do you handle rescaling of textures with block compression incompatible resolution?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor now, it only ignore 1*1pixel images, but I can add an option for a minimal resolution. Since I got most icons working properly, I don\u0027t think this will be necessary, though.\u003C/p\u003E\u003Cp\u003EBy default, the program check a text file listing every exception, it can be a single file or a whole folder. For now, it only has 1 line to exclude some kOS textures. The rest seems to be working, but I\u0027m not done testing, so I\u0027m sure this list will grow.\u003C/p\u003E\u003Cp\u003EAs for block compression, nothing is rescaled, but I didn\u0027t encountered problems yet. Any mod in particular where this is a problem? I would like to see if this works.\u003C/p\u003E\u003Cp\u003EI didn\u0027t tried uncompressed formats yet, I\u0027ll test those and see how that works.\u003C/p\u003E\u003Cp\u003EI\u0027m wondering if adding an option to reduce texture resolutions would be a good idea... It\u0027s kind of stealing ATM\u0027s work...\u003C/p\u003E\u003Cp\u003EEdit: I feel like I\u0027m polluting Sarbian\u0027s thread with all this, maybe this should go to another thread while it\u0027s not ready to be released.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-23T16:08:00Z\u0022 title=\u002210/23/2014 04:08  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 23, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"frash23","CreatedById":69988,"CreatedDateTime":"2014-10-23T17:10:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022shand\u0022 data-cite=\u0022shand\u0022\u003E\u003Cdiv\u003Ei\u0027ve got what i consider a heavily modded version, but its not heavy by most peoples count (NEAR, realchutes, procedural fairings, mechjeb, remotetech, RCT, contracts\u002B and a few USI mods).\u003Cp\u003Ewhat i\u0027ve noticed is roughly half loading time (nice on my low spec machine). my only issues have been it pretty much broke the icons for the toolbar (oh i have toolbar too), so i\u0027ve had to copy them back in the original format... that said i have only a basic understanding what i am doing and havent followed this conversation for a few pages so they may have worked out what was up and things by now)\u003C/p\u003E\u003Cp\u003ESummary: halfs load time, seems pretty damn stable to me with the exception of toolbar icons when i did it.,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAmazing. I\u0027ll have to get around that script \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Beduino","CreatedById":81326,"CreatedDateTime":"2014-10-23T20:58:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Urgante\u0022 data-cite=\u0022Urgante\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EMy current KSP loading time is 1:15 with 50 mods, some of them big, (pimp my kerbals, Better Atmospheres V5 in glorious HD, \u003C/p\u003E\u003Cp\u003EKW_Rocketry...).\u003C/p\u003E\u003Cp\u003EI actually changed to opengl due to all the mods using more of the maximum ram for 32 bits. (Less fps this way but little difference)\u003C/p\u003E\u003Cp\u003EThe ram now stays below 2gb so I will probably add even moar mods. \u003Ca href=\u0022http://i.imgur.com/KH98RHc.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/KH98RHc.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn-game loading time when change scenes seems faster.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAfter reading this.. im going to give it a go. My ksp takes like 6 minutes to load and is using too much memory recently and im not running as many mods as before, like interstellar, kw, novapunch, nearfuture, b9.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-23T21:13:16Z\u0022 title=\u002210/23/2014 09:13  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 23, 2014\u003C/time\u003E by Beduino\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Urgante","CreatedById":120746,"CreatedDateTime":"2014-10-23T21:55:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Beduino\u0022 data-cite=\u0022Beduino\u0022\u003E\u003Cdiv\u003EAfter reading this.. im going to give it a go. My ksp takes like 6 minutes to load and is using too much memory recently and im not running as many mods as before, like interstellar, kw, novapunch, nearfuture, b9.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe script I posted doesn\u0027t work with all the textures:\u003C/p\u003E\u003Cp\u003E- 8k textures just fail to convert\u003C/p\u003E\u003Cp\u003E- Textures with resolutions non multiple of 4 fail to convert.\u003C/p\u003E\u003Cp\u003E- Some normal maps are lost in the conversion, a lot of them actually. I didn\u0027t noticed the effect back then but you can see an example here. \u003Ca href=\u0022http://imgur.com/a/qkUKs#0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/qkUKs#0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E- Some textures become invisible, no idea why. (Only two as far as I know).\u003C/p\u003E\u003Cp\u003ESo I would recommend to wait for Lilleman converter unless you know how to properly convert the textures or just want to play with wrong normal maps, (not that bad actually, I didn\u0027t even noticed until I saw the example picture).\u003C/p\u003E\n"},{"CreatedByName":"Beduino","CreatedById":81326,"CreatedDateTime":"2014-10-23T22:08:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Urgante\u0022 data-cite=\u0022Urgante\u0022\u003E\u003Cdiv\u003EThe script I posted doesn\u0027t work with all the textures:\u003Cp\u003E- 8k textures just fail to convert\u003C/p\u003E\u003Cp\u003E- Textures with resolutions non multiple of 4 fail to convert.\u003C/p\u003E\u003Cp\u003E- Some normal maps are lost in the conversion, a lot of them actually. I didn\u0027t noticed the effect back then but you can see an example here. \u003Ca href=\u0022http://imgur.com/a/qkUKs#0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/qkUKs#0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E- Some textures become invisible, no idea why. (Only two as far as I know).\u003C/p\u003E\u003Cp\u003ESo I would recommend to wait for Lilleman converter unless you know how to properly convert the textures or just want to play with wrong normal maps, (not that bad actually, I didn\u0027t even noticed until I saw the example picture).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for all the details, im in the middle of the conversion right now, script is running. So im going to check load times and memory consumption at least.\u003C/p\u003E\u003Cp\u003EIm wondering though why have u used the primitive nvdxt instead of the modern version. \u003Ca href=\u0022https://developer.nvidia.com/gpu-accelerated-texture-compression\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://developer.nvidia.com/gpu-accelerated-texture-compression\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMaybe it would help with some of the problems.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-23T22:10:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Beduino\u0022 data-cite=\u0022Beduino\u0022\u003E\u003Cdiv\u003EThanks for all the details, im in the middle of the conversion right now, script is running. So im going to check load times and memory consumption at least.\u003Cp\u003EIm wondering though why have u used the primitive nvdxt instead of the modern version. \u003Ca href=\u0022https://developer.nvidia.com/gpu-accelerated-texture-compression\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://developer.nvidia.com/gpu-accelerated-texture-compression\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMaybe it would help with some of the problems.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOOOH! And it has an MIT license \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"KevinCathcart","CreatedById":126664,"CreatedDateTime":"2014-10-23T22:50:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022shaw\u0022 data-cite=\u0022shaw\u0022\u003E\u003Cdiv\u003EThat\u0027s not correct. It should be:\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDelayed reply:\u003C/p\u003E\u003Cp\u003EYou are obviously right. I forgot the flip on mbm, and I always get the alpha value backwards. I think of alpha as \u0022transparency\u0022, when it is actually \u0022opacity\u0022.\u003C/p\u003E\u003Cp\u003EAs for not specifing \u0022with mipmaps\u0022, that was because it should be obvious, and that was already covered by previous posts.\u003C/p\u003E\u003Cp\u003EThe exception being textures that get editited live like certain RasterPropMon textures, since re-calculating mipmaps each frame is too expensive. But it sounds like everything that needs to be said on this topic is now said.\u003C/p\u003E\n"}]}