{"TopicId":74482,"ForumId":29,"TopicTitle":"OnFixedUpdate and staging","CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-08T12:19:26Z","PageNum":1,"Articles":[{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-08T12:19:26Z","Content":"\n\u003Cp\u003EHello everyone,\u003C/p\u003E\u003Cp\u003EI am noticing something very weird on my PartModule\u003C/p\u003E\u003Cp\u003EFrom my logs, it appears that the OnFixedUpdate method is only called when the part it is attached to is in the active stage.\u003C/p\u003E\u003Cp\u003EIs it by design? Or am I doing something wrong?\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-06-08T12:43:17Z","Content":"\n\u003Cp\u003EYou probably want \u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/MonoBehaviour.FixedUpdate.html\u0022 rel=\u0022external nofollow\u0022\u003EMonoBehaviour.FixedUpdate\u003C/a\u003E (and other messages listed for \u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/MonoBehaviour.html\u0022 rel=\u0022external nofollow\u0022\u003EMonoBehaviours\u003C/a\u003E). OnFixedUpdate is something KSP specific and because of that probably behaves weird \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-08T12:48:34Z","Content":"\n\u003Cp\u003EThe problem is that PartModules don\u0027t have a FixedUpdate method, so of course I can\u0027t use it.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-06-08T13:22:15Z","Content":"\n\u003Cp\u003EOh sry, you didn\u0027t knew. KSP uses Unity and Unity does stuff the Unity way. Their messages don\u0027t require you to \u0022overwrite\u0022 anything. The class just needs to have a method with such a name and signature. It doesn\u0027t even have to be public. Unity will call it via evil magic you probably don\u0027t want to hear about. Check out some other mods in case you want some examples. Even usual non-part KSPAddons are MonoBehaviours, just like PartModule is.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-08T13:38:54Z","Content":"\n\u003Cp\u003EOH. MY. GOD.\u003C/p\u003E\u003Cp\u003ELike, seriously!? This really confuses me a lot, but it works \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EWell, of course now I get a huge stream of NRE because I have to initialize stuff, but as soon as I launch and they get set, it all starts working like a charm. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m a little confused on why this works (I guess that Unity actually checks via reflection if I defined a FixedUpdate() ), but nontheless, it does, and that\u0027s all I care about right now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EYou, sir, just saved my mod. Here, have some rep \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-06-09T01:02:10Z","Content":"\n\u003Cp\u003EYes, it uses Reflection. You just need to do \u0022private void FixedUpdate()\u0022 and the method will be called every physics frame. Actually it could be any member access modifier and it would work. This works for every class who inherits MonoBehaviour in some way, and PartModule does.\u003C/p\u003E\u003Cp\u003EIf you want the full list of methods you can define this way, you can find them here under \u0022Messages\u0022: \u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/MonoBehaviour.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/ScriptReference/MonoBehaviour.html\u003C/a\u003E\u003C/p\u003E\n"}]}