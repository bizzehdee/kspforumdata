{"TopicId":118430,"ForumId":36,"TopicTitle":"[1.1.2] B.R.O.K.E. - Beta 4 - 05/26/2016 - Now with gameplay!","CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-08-14T01:59:51Z","PageNum":4,"Articles":[{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-02-12T04:25:30Z","Content":"Sure can, I always try to save a log from a test fail just in case it was needed\n\n[https://www.dropbox.com/s/798xkhwiuj8xf1f/output_log.MKS-Lite.txt?dl=0](https://www.dropbox.com/s/798xkhwiuj8xf1f/output_log.MKS-Lite.txt?dl=0)"},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-12T04:34:39Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, JeffreyCor said:\n\u003E \n\u003E \n\u003E Sure can, I always try to save a log from a test fail just in case it was needed\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://www.dropbox.com/s/798xkhwiuj8xf1f/output_log.MKS-Lite.txt?dl=0](https://www.dropbox.com/s/798xkhwiuj8xf1f/output_log.MKS-Lite.txt?dl=0)\n\u003E \n\nFound the bug.  Same bug I just fixed in ShipSections. The BROKE loader code doesn\u0027t safely handle dlls with missing dependencies.  I\u0027ll add that to the list of things to fix!"},{"CreatedByName":"ThatOneBritishGuy...","CreatedById":144135,"CreatedDateTime":"2016-03-23T02:48:46Z","Content":"So I don\u0027t know how feasible this is, but how about a budget graph over time. Not strictly necessary, but seeing an in game graph of how the amount of Funds my Space Program has, has changed over the past 3 years, would be quite useful."},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-03-23T23:07:38Z","Content":"\u003E \n\u003E \n\u003E 20 hours ago, ThatOneBritishGuy... said:\n\u003E \n\u003E \n\u003E So I don\u0027t know how feasible this is, but how about a budget graph over time. Not strictly necessary, but seeing an in game graph of how the amount of Funds my Space Program has, has changed over the past 3 years, would be quite useful.\n\u003E \n\nIf we can figure out how to make a graph, then maybe."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-03-23T23:45:50Z","Content":"\u003E \n\u003E \n\u003E 36 minutes ago, jkortech said:\n\u003E \n\u003E \n\u003E If we can figure out how to make a graph, then maybe.\n\u003E \n\nA table would be easier, and we could easily make it output the data to a format like .csv for plotting in an external program. I do know other mods have made graphs before though, like the memory monitor (I think GCMonitor or something like that)."},{"CreatedByName":"monstah","CreatedById":95210,"CreatedDateTime":"2016-04-01T17:04:45Z","Content":"\u003E \n\u003E \n\u003E On 23/03/2016 at 8:45 PM, magico13 said:\n\u003E \n\u003E \n\u003E I do know other mods have made graphs before though, like the memory monitor (I think GCMonitor or something like that).\n\u003E \n\nF.A.R. has some, so does R.P.M. (kinda. It prints to a buffer image, I think, and uses that as a prop texture).\n\nJust found out about this. I play K.C.T. Like this!"},{"CreatedByName":"yorshee","CreatedById":135011,"CreatedDateTime":"2016-04-03T19:49:54Z","Content":"I found out about this mod the other day, though I don\u0027t want to install it because I\u0027m playing 1.1. Is this mod compatible with 1.1? If not I\u0027ll wait. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-04-03T20:51:58Z","Content":"\u003E \n\u003E \n\u003E 58 minutes ago, yorshee said:\n\u003E \n\u003E \n\u003E I found out about this mod the other day, though I don\u0027t want to install it because I\u0027m playing 1.1. Is this mod compatible with 1.1? If not I\u0027ll wait. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nIt\u0027s not yet and I likely won\u0027t get it updated to 1.1 until the end of April (at which point I\u0027ll be able to finish it). There\u0027s a chance that [@jkortech](https://forum.kerbalspaceprogram.com/index.php?/profile/146934-jkortech/) will update the existing code to 1.1 before then but that\u0027s up to him. All my big deadlines are toward the end of April and after them I should have considerably more time for hobbies."},{"CreatedByName":"ShotgunNinja","CreatedById":159391,"CreatedDateTime":"2016-05-07T21:24:33Z","Content":"\u003E \n\u003E \n\u003E On 3/22/2016 at 0:07 AM, jkortech said:\n\u003E \n\u003E \n\u003E If we can figure out how to make a graph, then maybe.\n\u003E \n\nYou could make a graph by creating a texture in-code and then drawing the graph inside it."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-05-08T05:22:23Z","Content":"[I\u0027ve made a new release available for KSP 1.1](https://github.com/BROKE-KSP/BROKE/releases). It\u0027s got a bunch of changes by [@jkortech](https://forum.kerbalspaceprogram.com/index.php?/profile/146934-jkortech/) and I haven\u0027t gotten to test everything. I really want to start a new career with this mod as the primary source of funds, so expect changes and new FMs in the next few weeks. Skins have been temporarily disabled as the GUI changes in 1.1 have broken things."},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2016-05-08T05:24:57Z","Content":"Awwww, yeah."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-05-08T05:31:46Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, theonegalen said:\n\u003E \n\u003E \n\u003E Awwww, yeah.\n\u003E \n\nExpect bugs. I haven\u0027t gotten past the \u0022can it make it through a single quarter\u0022 phase of testing yet. I\u0027m hoping to do some more work on it this week and next weekend especially. I\u0027m dying to start a new career with this (and my basic Life Support mod that I was working on a few months ago)."},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-05-08T19:38:40Z","Content":"Bugs you say? That sounds like a job for Tester Man ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"Venusgate","CreatedById":125730,"CreatedDateTime":"2016-05-08T23:11:25Z","Content":"With the current FM format, is there a way to factor # of Kerbonauts into income, not just expenses? (thinking space hotel rent)"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-05-09T00:37:59Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Venusgate said:\n\u003E \n\u003E \n\u003E With the current FM format, is there a way to factor # of Kerbonauts into income, not just expenses? (thinking space hotel rent)\n\u003E \n\nAbsolutely! When the FM is told to calculate income you could ask KSP for the Kerbal roster and do what toy want with it (including figure out who is on what vessel). That\u0027s only calculated once a quarter or year though. Instead you might keep a running total when the FM is told a new day has passed and just return that total each quarter. So they income would be based on each individual day, but you wouldn\u0027t see the money until the end of the quarter.\n\nObviously you\u0027d need to write a new FM for this. If you want I could come up with a basic one for you that you can expand off of."},{"CreatedByName":"Venusgate","CreatedById":125730,"CreatedDateTime":"2016-05-09T00:40:59Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, magico13 said:\n\u003E \n\u003E \n\u003E Obviously you\u0027d need to write a new FM for this. If you want I could come up with a basic one for you that you can expand off of.\n\u003E \n\nThat\u0027d be great!"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-05-09T01:57:27Z","Content":"The BROKE icon seems to be reproducing itself, creating more copies as time goes by. First starting there was two. but after going into the SPH and VAB, there is now 6. They were busy while off the screen ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\nscreen capture: [https://www.dropbox.com/s/zbdcmrgdh6zpc2d/screenshot12.png?dl=0](https://www.dropbox.com/s/zbdcmrgdh6zpc2d/screenshot12.png?dl=0)\n\nLog: [https://www.dropbox.com/s/1k0mm7a05n20ewe/output_log.txt?dl=0](https://www.dropbox.com/s/1k0mm7a05n20ewe/output_log.txt?dl=0)"},{"CreatedByName":"rasta013","CreatedById":140002,"CreatedDateTime":"2016-05-09T02:55:38Z","Content":"\u003E \n\u003E \n\u003E 56 minutes ago, JeffreyCor said:\n\u003E \n\u003E \n\u003E The BROKE icon seems to be reproducing itself, creating more copies as time goes by. First starting there was two. but after going into the SPH and VAB, there is now 6. They were busy while off the screen ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\u003E \n\nLittle did you know that they were BROKE Bunnies... ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif \u0022:sticktongue:\u0022)\n\nGood to see you\u0027ve got this mod back in action again [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/).  I really enjoyed toying with this before!"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-05-09T03:03:30Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Venusgate said:\n\u003E \n\u003E \n\u003E That\u0027d be great!\n\u003E \n\nAlright, here\u0027s something basic that gives you 100 funds per day (configurable) per Kerbal in a Hitchhiker Container. You\u0027ll need to reference BROKE, Assembly-CSharp, KSPUtil, UnityEngine, and UnityEngine.UI (all the basics \u002B BROKE).\n\n    using System;\n    using System.Collections.Generic;\n    using System.Linq;\n    using System.Text;\n    using BROKE;\n    using UnityEngine;\n    using KSP;\n    \n    namespace SpaceHotel\n    {\n        public class SpaceHotel : IFundingModifier\n        {\n            private double totalIncome = 0;\n            private double perKerbalFunds = 100;\n            public string GetName()\n            {\n                return \u0022Space Hotel\u0022;\n            }\n    \n            public string GetConfigName()\n            {\n                return \u0022SpaceHotel\u0022;\n            }\n    \n            public void OnEnabled()\n            {\n    \n            }\n    \n            public void OnDisabled()\n            {\n    \n            }\n    \n            public bool hasMainGUI()\n            {\n                //no main GUI. Could use one to show any info you wanted, like funds for each station if you tracked that\n                return false;\n            }\n    \n            public void DrawMainGUI()\n            {\n                //if there were a main GUI you would draw it here\n            }\n    \n            public bool hasSettingsGUI()\n            {\n                //It has a settings GUI\n                return true;\n            }\n    \n            public void DrawSettingsGUI()\n            {\n                //draw the setting GUI\n                GUILayout.Label(\u0022Settings:\u0022);\n                GUILayout.BeginHorizontal();\n                GUILayout.Label(\u0022Funds per Kerbal per day: \u0022);\n                perKerbalFunds = Double.Parse(GUILayout.TextField(perKerbalFunds.ToString(), 10));\n                GUILayout.EndHorizontal();\n            }\n    \n            public void DailyUpdate()\n            {\n                //get the number of Kerbals in HitchHiker containers and multiply by the perKerbalFunds\n                    //Add that to the total\n                \n                foreach (ProtoVessel pv in HighLogic.CurrentGame.flightState.protoVessels) //all vessels\n                {\n                    if (pv.protoPartSnapshots.Exists(pps =\u003E pps.partName == \u0022crewCabin\u0022))\n                    {\n                        Debug.Log(\u0022SpaceHotel: Found crewCabin on \u0022\u002Bpv.vesselName);\n                        //contains a hitchiker part\n                        foreach (ProtoPartSnapshot pps in pv.protoPartSnapshots.FindAll(pps =\u003E pps.partName == \u0022crewCabin\u0022))\n                            totalIncome \u002B= pps.protoModuleCrew.Count * perKerbalFunds;\n                    }\n                }\n                Debug.Log(\u0022SpaceHotel: QTD = \u0022 \u002B totalIncome);\n            }\n    \n            public InvoiceItem ProcessQuarterly()\n            {\n                InvoiceItem invoice = new InvoiceItem(this, totalIncome, 0);\n                totalIncome = 0;\n                return invoice;\n            }\n    \n            public InvoiceItem ProcessYearly()\n            {\n                return new InvoiceItem(this, 0, 0);\n            }\n    \n            public ConfigNode SaveData()\n            {\n                //Save the totalIncome and perKerbalFunds info to the save file\n                ConfigNode settings = new ConfigNode();\n                settings.AddValue(\u0022totalIncome\u0022, totalIncome);\n                settings.AddValue(\u0022perKerbalFunds\u0022, perKerbalFunds);\n                return settings;\n            }\n    \n            public void LoadData(ConfigNode node)\n            {\n                //Load the totalIncome and perKerbalFunds info from the save file\n                double.TryParse(node.GetValue(\u0022totalIncome\u0022), out totalIncome);\n                double.TryParse(node.GetValue(\u0022perKerbalFunds\u0022), out perKerbalFunds);\n            }\n    \n            public void OnInvoicePaid(object sender, InvoiceItem.InvoicePaidEventArgs args)\n            {\n    \n            }\n    \n            public void OnInvoiceUnpaid(object sender, EventArgs args)\n            {\n    \n            }\n        }\n    }\n\n\u003E \n\u003E \n\u003E 59 minutes ago, JeffreyCor said:\n\u003E \n\u003E \n\u003E The BROKE icon seems to be reproducing itself, creating more copies as time goes by. First starting there was two. but after going into the SPH and VAB, there is now 6. They were busy while off the screen ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E screen capture: [https://www.dropbox.com/s/zbdcmrgdh6zpc2d/screenshot12.png?dl=0](https://www.dropbox.com/s/zbdcmrgdh6zpc2d/screenshot12.png?dl=0)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Log: [https://www.dropbox.com/s/1k0mm7a05n20ewe/output_log.txt?dl=0](https://www.dropbox.com/s/1k0mm7a05n20ewe/output_log.txt?dl=0)\n\u003E \n\nI actually knew about that issue and forgot about it. There\u0027s also an issue where the GUI breaks if you aren\u0027t using autopay. So many silly bugs! ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022) I\u0027ve got a lot of work to put into this in the next few days to actually get it to a nice and playable state. I also want to rewrite the payment history code. What\u0027s in is fine but what I\u0027ve got planned is a lot more detailed and a little more useful.\n\n\u003E \n\u003E \n\u003E 1 minute ago, rasta013 said:\n\u003E \n\u003E \n\u003E Little did you know that they were BROKE Bunnies... ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif \u0022:sticktongue:\u0022)\n\u003E \n\u003E \n\u003E \n\u003E Good to see you\u0027ve got this mod back in action again [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/).  I really enjoyed toying with this before!\n\u003E \n\nAs I mentioned above, there\u0027s still a bunch of work needed before I\u0027d recommend actually using this. But if you\u0027ve got FMs in mind now\u0027s the time to start playing around with creating them!"},{"CreatedByName":"autumnalequinox","CreatedById":114782,"CreatedDateTime":"2016-05-09T16:42:13Z","Content":"I\u0027ve been using State Funding while waiting for this.  I would love to see them somehow merged but I think State Funding may conflict a bit.  (it primarily deals with giving you $ based on it\u0027s own variables based on various milestones such as sat coverage, the nation you chose, etc).  It doesn\u0027t deal with expenses however.\n\nI\u0027m dying to make a \u0022Planetary Science\u0022 sub-mod (like i\u0027ve been talking about FOREVER but i\u0027m lazy/busy/ADD all the time) to go with BROKE.  Something simple where you dedicate funding to planetary science, it compares the science gathered per-world to the total available and determines the % chance yearly of making a major discovery (with sweet rewards, maybe free levels for new scientists or big rep and free research points).  Each year a discovery brings you 1/4 the way towards a full understanding and selection from a list of Amazing Discoveries \u2122  (random per game) on each world.  So far that\u0027s about the only thing I\u0027ve hashed out, besides the formulas.  \n\n@magico:  Life support you say? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  ::intrigued::\n\nAdd:  I\u0027m going to look into the FM thing for this and see if I can figure out where the game is storing the research points per planet (I mean it knows how many you collect per world so I imagine it keeps track).  Maybe I can make this thing after all."},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2016-05-11T04:46:12Z","Content":"What would be the difficulty of making a funding config that depended on activating a certain strategy from the Administration Building, especially using something like Strategia?"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-05-11T13:04:28Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, theonegalen said:\n\u003E \n\u003E \n\u003E What would be the difficulty of making a funding config that depended on activating a certain strategy from the Administration Building, especially using something like Strategia?\n\u003E \n\nIf you\u0027re just checking that a strategy is active then that\u0027s probably pretty easy. I\u0027ve never actually done it though so I\u0027m not sure off the top of my head how easy it would be. I imagine it\u0027s just one function call to the right place.\n\nThen, based on the status of that check you can have the FM do whatever you want."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2016-05-12T02:13:15Z","Content":"\u003E \n\u003E \n\u003E 13 hours ago, magico13 said:\n\u003E \n\u003E \n\u003E If you\u0027re just checking that a strategy is active then that\u0027s probably pretty easy. I\u0027ve never actually done it though so I\u0027m not sure off the top of my head how easy it would be. I imagine it\u0027s just one function call to the right place.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Then, based on the status of that check you can have the FM do whatever you want.\n\u003E \n\n[@theonegalen](https://forum.kerbalspaceprogram.com/index.php?/profile/71012-theonegalen/) - Also, StrategyEffects only get their OnRegister hook called if it is an active strategy, so that\u0027s usually the hook to do something/turn something on.\n\nI\u0027d intended to do some stuff with BROKE stuff with Strategia, but I never got it done for the first release, and just haven\u0027t gotten a chance to circle back around to it."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-05-12T14:49:07Z","Content":"\u003E \n\u003E \n\u003E 12 hours ago, nightingale said:\n\u003E \n\u003E \n\u003E I\u0027d intended to do some stuff with BROKE stuff with Strategia, but I never got it done for the first release, and just haven\u0027t gotten a chance to circle back around to it.\n\u003E \n\nWell, figuring BROKE isn\u0027t really at a properly functioning state yet that\u0027s understandably not a priority ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"Khorso","CreatedById":106976,"CreatedDateTime":"2016-05-12T19:04:31Z","Content":"I\u0027m very interested in this mod - I\u0027d help out with it if I only knew more of programming...  \n\nThis would be a great way to teach financial literacy in a simulator! ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\nOn that note, graphs aside, it would be interesting to be able to allocate budgets into the game! Budgets for manned missions, robotic missions?\n\nInsurance is a possible idea too, for those RPers who play hardcore - insure a kerbal or mission, based off of DV, kerbal skill, etc.\n\nKeep up the good work [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) and co, I like what I see!\n\n-Khorso\n\n**Edited \u003Ctime datetime=\u00222016-05-12T19:08:42Z\u0022 title=\u002205/12/2016 07:08  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 12, 2016\u003C/time\u003E by Khorso**\n  \nMore ideas percolating like a rich coffee in the morning."}]}