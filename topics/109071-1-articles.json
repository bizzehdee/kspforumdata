{"TopicId":109071,"ForumId":36,"TopicTitle":"[1.0] EVAManager - Configurable Modules \u0026 Resources for EVA Kerbals","CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-12T23:27:57Z","PageNum":1,"Articles":[{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-12T23:27:57Z","Content":"EVAManager provides a config-based interface for adding, removing, and modifying PartModules and PartResources for EVA Kerbals. Also provided is a basic mechanism for \u0022filling\u0022 resources from the origin pod, allowing for proper conservation across missions.\n\nSomeday soon I\u0027ll improve this thread to be more like a release thread. In the meantime, it\u0027s just a conversation moved over from another thread.\n\nMy first post on the subject:\n\n\u003E \n\u003E \n\u003E toadicus said:\n\u003E \n\u003E \n\u003E **KerbMav**, my EVAManager plugin (currently only used here and by TweakableEverything) already lets you do that. For example, if you wanted to add a thermometer experiment to a Kerbal, put something like this in a .cfg file in GameData:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     EVA_MODULE\n\u003E     {name = ModuleScienceExperimentexperimentID = temperatureScanexperimentActionName = Log TemperatureresetActionName = Delete DatauseStaging = FalseuseActionGroups = TruehideUIwhenUnavailable = FalsexmitDataScalar = 0.5dataIsCollectable = Falsererunnable = TrueusageReqMaskInternal = 1usageReqMaskExternal = 8\n\u003E     }\n\u003E \n\nEVAManager is chiefly available within the TweakableEverything and AntennaRange archives, as those are the only official uses I am aware of.  If you\u0027d like it for your own use, you can also get it at the links below.\n\nSpaceDock: [[zip](http://spacedock.info/mod/290/EVAManager)]  \n\nNot A SpaceDock: [[zip](http://ksp.hawkbats.com/EVAManager/EVAManager.zip)] [[tar.gz](http://ksp.hawkbats.com/EVAManager/EVAManager.tar.gz)] [[tar.xz](http://ksp.hawkbats.com/EVAManager/EVAManager.tar.xz)]\n\n**Edited \u003Ctime datetime=\u00222016-02-27T05:02:10Z\u0022 title=\u002202/27/2016 05:02  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 27, 2016\u003C/time\u003E by toadicus**\n  \nAdded SpaceDock link"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-05-12T23:32:22Z","Content":"\u003E \n\u003E **KerbMav**, my EVAManager plugin (currently only used here and by TweakableEverything) already lets you do that.\n\n    EVA_MODULE{name = ModuleEngines...\n\nI\u0027m so tempted....\n\n**Edited \u003Ctime datetime=\u00222015-05-13T18:36:18Z\u0022 title=\u002205/13/2015 06:36  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 13, 2015\u003C/time\u003E by Red Iron Crown**"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-12T23:37:58Z","Content":"\u003E \n\u003E EVA_MODULE{\tname = ModuleEngines...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m so tempted....\n\nI\u0027m not sure what all transforms exist on EVA Kerbals, so writing that might be tough. If you find one, though, it should work. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-05-13T00:10:34Z","Content":"\u003E \n\u003E I\u0027m not sure what all transforms exist on EVA Kerbals, so writing that might be tough. If you find one, though, it should work. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\n[Funny you should say that.](https://forum.kerbalspaceprogram.com/threads/113748-Reference-Kerbal-EVA-model-transform-tree)\n\n(I know for sure that KAS and KIS use a reference to some kind of transform to place parts with respect to the Kerbal who is carrying them. Helmet, hand, and jetpack are the main options, if I recall correctly.)"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-05-13T00:54:20Z","Content":"\u003E \n\u003E .\n\nPure gold, thanks!"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-05-13T16:19:10Z","Content":"\u003E \n\u003E **KerbMav**, my EVAManager plugin (currently only used here and by TweakableEverything) already lets you do that. For example, if you wanted to add a thermometer experiment to a Kerbal, put something like this in a .cfg file in GameData:\n\u003E You can get it from the AntennaRange and TweakableEverything archives, or from [KerbalStuff](https://kerbalstuff.com/mod/726/EVAManager). Someday maybe I\u0027ll release that more officially.\n\nSorry to interrupt, but since you havent released it officially in its own thread yet ... ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nAm I doin it right, cause it aint workin ...\n\n    @EVA_MODULE[ModuleScienceExperiment]:HAS[#experimentID[surfaceSample]]{\t@xmitDataScalar = 0.0}"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-13T18:26:30Z","Content":"KerbMav, that\u0027s a ModuleManager patch, which only applies to configs already in the database. KerbalEVA parts are not in the database as such, and certainly not in the way you\u0027re accessing them; that patch would change an EVA\\_MODULE config for use by EVAManager before EVAManager processes it, which would be useful if what you were trying to do is change an EVAManager config in response to the existence of other mods, etc.\n\nSince you\u0027re trying to change a module already on the EVA Kerbal parts, and not patch a patch, you need to use the (admittedly entirely undocumented) EVAManager syntax. This is intentionally separate from ModuleManager syntax to avoid conflicts. That said... I\u0027m not actually sure we can do what you want, because I don\u0027t have HAS matching or indexing yet, and the EVA part has two ModuleScienceExperiment modules on it. I didn\u0027t need those things for what I was doing, so I just haven\u0027t written them yet!\n\nFor the sake of interest, here\u0027s basically what you would do, and might get lucky:\n\n    EDIT_EVA_MODULE[ModuleScienceExperiment]{\txmitDataScalar = 0}\n\nIf you\u0027re not lucky, that would change xmitDataScalar for EVA reports instead.\n\nAt this point, I don\u0027t have operators to distinguish between editing an existing field or adding a new one like MM does, so you don\u0027t need \u0022@\u0022 or \u0022%\u0022. I\u0027m probably not ever going to do it in quite the same way, both because for what we\u0027re doing here, in general, it shouldn\u0027t be necessary, and because I want to try to keep EVA\\_MODULE nodes generally patchable by ModuleManager itself. I\u0027ll probably require indexing for things like that, and delimit indexing differently."},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-05-13T20:10:33Z","Content":"\u003E \n\u003E For the sake of interest, here\u0027s basically what you would do, and might get lucky:\n\nGuess who got lucky ... ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n![kw8V0KQ.jpg](http://i.imgur.com/kw8V0KQ.jpg)\n\nThank you!"},{"CreatedByName":"Metanolo","CreatedById":75909,"CreatedDateTime":"2015-05-21T18:53:07Z","Content":"CKAN forces me to install EVAManager if I want to install AntennaRange. Why? I just want AntennaRange. I cant even understand what is this EVAManager for. This is what I know: going for a rescue mission I\u0027ve found the kerbal out of EVA propellant. I had to slap the door of my command pod in his face to rescue him. Could not find any way to refill his jetpack and he had to rest inside the pod all the mission long. That\u0027s not funny.\n\n\\*A quick note on AntennaRange also: I cannot selectively pick which data to send anymore (the blue -send- button on experiments is not giving any response), is it intended?"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-05-21T19:04:44Z","Content":"\u003E \n\u003E CKAN forces me to install EVAManager if I want to install AntennaRange. Why? I just want AntennaRange. I cant even understand what is this EVAManager for. This is what I know: going for a rescue mission I\u0027ve found the kerbal out of EVA propellant. I had to slap the door of my command pod in his face to rescue him. Could not find any way to refill his jetpack and he had to rest inside the pod all the mission long. That\u0027s not funny.\n\nAntennaRange applies a little transmitter module and electricity to EVA kerbals. This is done via EVAManager. As for running out of EVA propellant, that is unrelated to EVAManager - you just ran out of EVA propellant. However, it should be noted that kerbals automatically get their packs refuelled every time they enter a crew pod (this is stock behaviour)."},{"CreatedByName":"Metanolo","CreatedById":75909,"CreatedDateTime":"2015-05-21T19:15:47Z","Content":"\u003E \n\u003E [...] - you just ran out of EVA propellant. However, it should be noted that kerbals automatically get their packs refuelled every time they enter a crew pod (this is stock behaviour).\n\nSorry for my bad english, but that was a rescue mission contract, i never saw or used that kerbal before. I\u0027ve found him out of fuel already. Also, entering the command pod didnt refill his jetpack.\n\nI first thought it was becouse of EVAManager."},{"CreatedByName":"symmeclept","CreatedById":89546,"CreatedDateTime":"2015-05-22T14:08:02Z","Content":"\u003E \n\u003E ... that is unrelated to EVAManager - you just ran out of EVA propellant.\n\nI\u0027m confirming Metanolo\u0027s report here. EVAManager seems to delete EVA prop from pods spawned by rescue contracts. Is that some sick joke? I deleted EVAManager(forced install with Tweakable Everything), landed on Mun, and my pilot had no EVA prop outside the pod, even though the pod had the resource. I deleted all Toadicus mods, and will not use them again until this nonsense is fixed."},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2015-05-22T15:03:49Z","Content":"Could this be used to alter EVA Isp? (ie, nerf it to the ground)"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-22T16:23:05Z","Content":"**Metanolo, symmeclept**, it looks like I inadvertently packaged an in-house testing .cfg with EVAManager last time it went to CKAN, which requires you to track EVA propellant and fill it from pods. Since Squad starts rescue contract ships with zero resources, this means you don\u0027t have any EVA propellant. Personally, I like that change, but it\u0027s true that it doesn\u0027t play very nicely with Rescue contracts. To remove this functionality, remove EVAManager.cfg from the EVAManager folder.\n\nI\u0027ve re-uploaded EVAManager to KerbalStuff, so future versions will not include that cfg in an active format by default. I really should go put a caveat in there to make it work better with rescue contracts, because I really like it as a mechanic. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**rhoark**, it should be able to do that once I add the ability to select specific existing modules for editing. That\u0027s the biggest thing missing at this point.\n\n**Metanolo**, I tested AR just now with sending an individual experiment via the blue button and nothing went wrong. Can you please try to isolate your issue and, if successful, report it with reproduction steps and a log over in the AntennaRange thread? Link is in my sig if you need it."},{"CreatedByName":"Fraz86","CreatedById":90101,"CreatedDateTime":"2015-05-24T19:00:27Z","Content":"Is EVAManager able to edit fields other than modules and resources? For example, could I change the maxTemp of EVA Kerbals?\n\n**Edited \u003Ctime datetime=\u00222015-05-24T23:39:06Z\u0022 title=\u002205/24/2015 11:39  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 24, 2015\u003C/time\u003E by Fraz86**"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-24T23:34:58Z","Content":"**Fraz86**, not right now. That\u0027s a good idea, though!"},{"CreatedByName":"Fraz86","CreatedById":90101,"CreatedDateTime":"2015-05-27T06:15:11Z","Content":"\u003E \n\u003E **Fraz86**, not right now. That\u0027s a good idea, though!\n\nWell, if you do get the chance to implement that functionality, I would be forever grateful!"},{"CreatedByName":"Fel","CreatedById":57121,"CreatedDateTime":"2015-05-27T06:30:05Z","Content":"\u003E \n\u003E Is EVAManager able to edit fields other than modules and resources? For example, could I change the maxTemp of EVA Kerbals?\n\nI don\u0027t know why toadicus says kerbalEVA isn\u0027t in the part database (it is; but you also have to edit kerbalEVAfemale), but you can do just about anything you want with the part in code so yeah. (There may be a few issues getting it to stick, but a simple module can change that).\n\nI\u0027m on edge with dependencies though; most of this you can easily do in code, but if you\u0027re bringing things to cfg files it makes things nicer for everyone all around.\n\n- - - Updated - - -\n\n\u003E \n\u003E **Metanolo, symmeclept**, it looks like I inadvertently packaged an in-house testing .cfg with EVAManager last time it went to CKAN, which requires you to track EVA propellant and fill it from pods. Since Squad starts rescue contract ships with zero resources, this means you don\u0027t have any EVA propellant. Personally, I like that change, but it\u0027s true that it doesn\u0027t play very nicely with Rescue contracts. To remove this functionality, remove EVAManager.cfg from the EVAManager folder.\n\nAre you saying that the kerbalEVA starts with no resources? I have code laying around that (well, 0.20) forced the kerbal to initialize the resource array and allow me to add in resources."},{"CreatedByName":"Fraz86","CreatedById":90101,"CreatedDateTime":"2015-05-27T16:37:19Z","Content":"\u003E \n\u003E I don\u0027t know why toadicus says kerbalEVA isn\u0027t in the part database (it is; but you also have to edit kerbalEVAfemale), but you can do just about anything you want with the part in code so yeah. (There may be a few issues getting it to stick, but a simple module can change that).\n\nI\u0027ve never had any success using ModuleManager to edit \u0022@PART[kerbalEVA]\u0022 in the past. If you\u0027re saying it can be easily done using a plugin, well, I\u0027m afraid that\u0027s outside the scope of my knowledge. Basically, I just want ModuleManager-like ability to edit the properties of EVA Kerbals."},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-05-27T17:04:25Z","Content":"\u003E \n\u003E Well, if you do get the chance to implement that functionality, I would be forever grateful!\n\nConsider it on the roadmap. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n\u003E \n\u003E I don\u0027t know why toadicus says kerbalEVA isn\u0027t in the part database (it is; but you also have to edit kerbalEVAfemale), but you can do just about anything you want with the part in code so yeah. (There may be a few issues getting it to stick, but a simple module can change that).\n\u003E I\u0027m on edge with dependencies though; most of this you can easily do in code, but if you\u0027re bringing things to cfg files it makes things nicer for everyone all around.\n\n\u003E \n\u003E I\u0027ve never had any success using ModuleManager to edit \u0022@PART[kerbalEVA]\u0022 in the past. If you\u0027re saying it can be easily done using a plugin, well, I\u0027m afraid that\u0027s outside the scope of my knowledge. Basically, I just want ModuleManager-like ability to edit the properties of EVA Kerbals.\n\nThe Kerbal EVA parts aren\u0027t a part of the \u0022GameDatabase\u0022 funcitonality that is parsed from config files during startup, ergo ModuleManager cannot be used to add or edit modules on the Kerbal EVA parts. The intent of this mod is to fill that gap.\n\n\u003E \n\u003E - - - Updated - - -\n\u003E Are you saying that the kerbalEVA starts with no resources? I have code laying around that (well, 0.20) forced the kerbal to initialize the resource array and allow me to add in resources.\n\nEVAManager lets you define a special flag for EVA resources that require them to be filled from a pod when the EVA part is spawned instead of magically creating them from nothing. My proof-of-concept EVA Propellant patch sets that flag, so the kerbal EVA part will start with 0 EVA Propellant if he is removed from a pod containing 0 EVA Propellant. During Rescue contracts, Squad intentionally starts the parts with 0 resources, so in this case, the EVA Kerbal has no propellant and can\u0027t rescue him/herself. That\u0027s why it\u0027s not distributed by default. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"Fel","CreatedById":57121,"CreatedDateTime":"2015-05-27T19:41:14Z","Content":"\u003E \n\u003E The Kerbal EVA parts aren\u0027t a part of the \u0022GameDatabase\u0022 funcitonality that is parsed from config files during startup, ergo ModuleManager cannot be used to add or edit modules on the Kerbal EVA parts. The intent of this mod is to fill that gap.\n\nOh, using PartLoader made it a single line of code to get the prefab, haven\u0027t taken a look at module manager for sometime so... yeah.\n\n\u003E \n\u003E EVAManager lets you define a special flag for EVA resources that require them to be filled from a pod when the EVA part is spawned instead of magically creating them from nothing. My proof-of-concept EVA Propellant patch sets that flag, so the kerbal EVA part will start with 0 EVA Propellant if he is removed from a pod containing 0 EVA Propellant. During Rescue contracts, Squad intentionally starts the parts with 0 resources, so in this case, the EVA Kerbal has no propellant and can\u0027t rescue him/herself. That\u0027s why it\u0027s not distributed by default. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nHonestly, I just like tinkering in sandbox more than career; but the issue here would seem that you would have to isolate contract vessels and provide a minor supply of propellant. Doesn\u0027t seem terribly difficult but yes, it is out of the goal of this particular mod."},{"CreatedByName":"Elix","CreatedById":135044,"CreatedDateTime":"2015-06-11T14:57:37Z","Content":"Can EVAManager be used to accelerate the repacking of nearby spent/cut parachutes by an Engineer? As in possibly a button available in a right-clicked Kerbal offering \u0022Repack all chutes in range\u0022 ?"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2015-06-11T15:18:51Z","Content":"EVAManager only adds and changes modules to/on the EVA Kerbal \u0022part\u0022. If someone wrote a \u0022pack all chutes\u0022 module, they could use EVAManager to add that module to EVA Kerbals to enable its use. On its own, EVAManager provides very little user-facing functionality."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-06-11T18:24:28Z","Content":"I want to use this to have Nitrogen gas from RealFuels be converted to EVAprop upon going EVA. So I have to have N2 in my pod to get my packs filled otherwise I would have 0. How would I go about doing this? Also can I tweak the isp for the eva thrusters yet? Thanks!"},{"CreatedByName":"Sigma88","CreatedById":113260,"CreatedDateTime":"2015-06-12T00:01:12Z","Content":"hi toadicus ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nhow about tech level in career/science sandbox?\n\nis it possible to add modules depending on which nodes on the techtree are unlocked?"}]}