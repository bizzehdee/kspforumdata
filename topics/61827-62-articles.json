{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":62,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-09-30T21:42:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022foma87\u0022 data-cite=\u0022foma87\u0022\u003E\u003Cdiv\u003ERight now, the script looks like this:\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPlease use [ code ] instead of a nested [ quote ] to embed your code examples. It works much better with \u0022reply with quote\u0022 that way. Nested quoting doesn\u0027t work on this forum. Even when clicking the \u0022multi quote\u0022 button it still won\u0027t do it.\u003C/p\u003E\u003Cp\u003EI see one potential problem in that script:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif eng:ignition=\u0022true\u0022 \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEng:ignition returns a boolean. Comparing a boolean to a string is a bit of an unreliable result because of issues with case sensitivity (when eng:ignition is converted into a string for the sake of the comparison, does it use the value \u0022TRUE\u0022 or \u0022true\u0022 or \u0022True\u0022? It matters because string comparison is case sensitive).\u003C/p\u003E\u003Cp\u003EA more reliable result is to just use the boolean as-is directly. Don\u0027t add the term \u003Cstrong\u003E=\u0022true\u0022\u003C/strong\u003E when that\u0027s what using the bare boolean on its own already means anyway (and in fact is more reliable that way because of how boolean algebra works when the value isn\u0027t a boolean but is a plain number being treated like a boolean.)\u003C/p\u003E\u003Cp\u003EA boolean value can be the entire expression, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif eng:ignition  // delete the = \u0022true\u0022 part\u003Cbr\u003E{\u003Cbr\u003E.. do stuff ..\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-30T21:55:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EEng:ignition returns a boolean. Comparing a boolean to a string is a bit of an unreliable result because of issues with case sensitivity (when eng:ignition is converted into a string for the sake of the comparison, does it use the value \u0022TRUE\u0022 or \u0022true\u0022 or \u0022True\u0022? It matters because string comparison is case sensitive).]\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGood point. Doubt it\u0027s causing the divide-by-zero/\u0022tried to push infinity\u0022, though. The symptom of a bad boolean/\u0022true\u0022 comparison would be a test returning false when the boolean is true, and the test has to be passing at least once for the thrust and isp lists to have nonzero length.\u003C/p\u003E\n"},{"CreatedByName":"foma87","CreatedById":94434,"CreatedDateTime":"2014-09-30T22:57:01Z","Content":"\n\u003Cp\u003EThis part of the script is actually designed as a staging condition.\u003C/p\u003E\u003Cp\u003EThe engines are indeed flamed out when the trigger is activated. The reason for this, is that when the \u0026lt;when\u0026gt;-body is triggered, there is virtually no fuel left. I\u0060ll show you what I think why I get these error messages.\u003C/p\u003E\u003Cp\u003EAs for the boolean to string comparison:\u003C/p\u003E\u003Cp\u003EI tried running the listscript without it being embedded in a \u0026lt;when\u0026gt;-body with activated engines. It returns the correct amount of isp. So I would think that this shouldn\u0060t pose a problem. I\u00C3\u201A\u00C2\u00B4ll check again though.\u003C/p\u003E\u003Cp\u003EI\u00C3\u201A\u00C2\u00B4ve tried relisting the engines in two different ways.\u003C/p\u003E\u003Cp\u003EIn this example I tried relisting the engine in the whenblock:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen stage:liquidfuel\u0026lt;0.001 then \u003Cbr\u003E{\u003Cbr\u003Eclearscreen.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Staged!\u0022.\u003Cbr\u003E\u003Cbr\u003Eset x to 0.\u003Cbr\u003Eset y to 0.\u003Cbr\u003Eset isplist to list(). //list of engine isps\u003Cbr\u003Eset thrlist to list(). //list of engine maxthrusts.\u003Cbr\u003Eset thrtot to 0.\u003Cbr\u003Eset thrisp to 0.\u003Cbr\u003E\u003Cbr\u003Elist engines in e.\u003Cbr\u003Efor eng in e\u003Cbr\u003E\t{\u003Cbr\u003E\tif eng:ignition=\u0022true\u0022 \u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset isplist:add to eng:isp.\u003Cbr\u003E\t\t\tset thrlist:add to eng:maxthrust.\u003Cbr\u003E\t\t}.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003E\tuntil thrlist:length=x\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset thrtot to thrtot\u002Bthrlist[x].\u003Cbr\u003E\t\t\tset thrisp to thrisp\u002B(thrlist[x]/isplist[x]). \u003Cbr\u003E\t\t\tset x to x\u002B1.\u003Cbr\u003E\t\t}.\u003Cbr\u003E\u003Cbr\u003Eset isp to thrtot/thrisp.\u003Cbr\u003Eprint \u0022Cummulative ISP: \u0022\u002Bisp\u002B\u0022 sec\u0022.\u003Cbr\u003Eset t to 0.\u003Cbr\u003Ewait 0.001.\u003Cbr\u003Epreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith this configuration, I get an IPU error. Since I wanted to use this \u0026lt;when\u0026gt;-trigger for staging, I also tried manually staging the rocket with a throttle of 1 and then running the script.\u003C/p\u003E\u003Cp\u003EAs soon as the \u0026lt;when\u0026gt;-body triggered I get an IPU error again.\u003C/p\u003E\u003Cp\u003ESo I cranked up the config:IPU in order to test what would happen if there is enough IPU to go through the body. I got the errormessage described in my previous post.\u003C/p\u003E\u003Cp\u003EThe problem with this method, from what I can explain, is that when the \u0026lt;when\u0026gt;-body triggers, it creates a list based on the state of the ship at that exact moment (before staging). This means that the list will contain engines which are staged away a moment later.\u003C/p\u003E\u003Cp\u003EThe second problem is that the engines at that point in time are flamed out due to lack of fuel, which results in the isp of each engine being 0.\u003C/p\u003E\u003Cp\u003EI can see that this could cause the infinity in stack error message.\u003C/p\u003E\u003Cp\u003EIn the second configuration, I set up 2 \u0026lt;when\u0026gt;-triggers:\u003C/p\u003E\u003Cp\u003EThe first \u0026lt;when\u0026gt; stages the rocket and sets a variable t to 1:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen stage:liquidfuel\u0026lt;0.001 then \u003Cbr\u003E{\u003Cbr\u003E\tclearscreen.\u003Cbr\u003E\tstage.\u003Cbr\u003E\tprint \u0022Staged!\u0022.\u003Cbr\u003E\tset t to 1.\u003Cbr\u003E\twait 0.001.\u003Cbr\u003E\tpreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat change to t triggers the other \u0026lt;when\u0026gt;-body with the list script:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen t=1 then\u003Cbr\u003E{\u003Cbr\u003E\tset \tx \t\tto 0.\u003Cbr\u003E\tset \tisplist \tto list().\u003Cbr\u003E\tset \tthrlist \tto list().\u003Cbr\u003E\tset \tthrtot \t\tto 0.\u003Cbr\u003E\tset \tthrisp \t\tto 0.\u003Cbr\u003E\tlist \tengines \tin e.\u003Cbr\u003E\u003Cbr\u003E\tfor eng in e\u003Cbr\u003E\t{\u003Cbr\u003E\tif eng:ignition=\u0022true\u0022 \u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset isplist:add to eng:isp.\u003Cbr\u003E\t\t\tset thrlist:add to eng:maxthrust.\u003Cbr\u003E\t\t}.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003E\tuntil thrlist:length=x\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset thrtot to thrtot\u002Bthrlist[x].\u003Cbr\u003E\t\t\tset thrisp to thrisp\u002B(thrlist[x]/isplist[x]). \u003Cbr\u003E\t\t\tset x to x\u002B1.\u003Cbr\u003E\t\t}.\u003Cbr\u003E\u003Cbr\u003E\tset isp to thrtot/thrisp.\u003Cbr\u003E\tprint \u0022Cummulative ISP: \u0022\u002Bisp\u002B\u0022 sec\u0022.\u003Cbr\u003E\tset t to 0.\u003Cbr\u003E\twait 0.001.\u003Cbr\u003E\tpreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI get the same error messages as above. Either too little IPUs or trying to push infinity into stack.\u003C/p\u003E\u003Cp\u003EAfter looking over the second method, I realized that it does not help to trigger a \u0026lt;when\u0026gt; within a \u0026lt;when\u0026gt;-body. the timeframe in which both \u0026lt;when\u0026gt;-bodies are going through is the exact point in time before staging.\u003C/p\u003E\u003Cp\u003ESo what it boils down to is this:\u003C/p\u003E\u003Cp\u003EI need a trigger which activates after a staging-event. This trigger may not be connected to the event itself. Does that make sense? It sure doesn\u00C3\u201A\u00C2\u00B4t to me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E.\u003C/p\u003E\u003Cp\u003EI hope I could convey my problem without causing too much confusion. My brain hurts.\u003C/p\u003E\u003Cp\u003EPS: Thank you for the tip with the boolean value. These are things I couldn\u00C3\u201A\u00C2\u00B4t find in the doc.\u003C/p\u003E\n"},{"CreatedByName":"CjStaal","CreatedById":112518,"CreatedDateTime":"2014-10-01T00:49:08Z","Content":"\n\u003Cp\u003ECan KOS have specific launch times? Say I set it up so 3 rockets are on the pad and I want them in identical orbits but I want them launched 3 hours apart. Can I do this automatically with kOS?\u003C/p\u003E\n"},{"CreatedByName":"CjStaal","CreatedById":112518,"CreatedDateTime":"2014-10-01T01:00:14Z","Content":"\n\u003Cp\u003EAnd also, can you have it follow a curve on the ascent?\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-10-01T01:22:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CjStaal\u0022 data-cite=\u0022CjStaal\u0022\u003E\u003Cdiv\u003ECan KOS have specific launch times? Say I set it up so 3 rockets are on the pad and I want them in identical orbits but I want them launched 3 hours apart. Can I do this automatically with kOS?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, you can do math on the current time and arrange for something to run at a certain time in the future.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/time/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/structure/time/index.html\u003C/a\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CjStaal\u0022 data-cite=\u0022CjStaal\u0022\u003E\u003Cdiv\u003EAnd also, can you have it follow a curve on the ascent?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, you LOCK STEERING to a heading that\u0027s a function of your current velocity vector or altitude.\u003C/p\u003E\n"},{"CreatedByName":"CjStaal","CreatedById":112518,"CreatedDateTime":"2014-10-01T01:48:18Z","Content":"\n\u003Cp\u003EAwesome \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-10-01T05:00:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022undercoveryankee\u0022 data-cite=\u0022undercoveryankee\u0022\u003E\u003Cdiv\u003EYes, you can do math on the current time and arrange for something to run at a certain time in the future.\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/time/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/structure/time/index.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut beware that kOS only actually runs correctly while the ship parts are loaded into the full game engine, not when the ship is *elsewhere* on rails. That makes it hard to both have kOS running the launch of one vessel and at the same time have the other vessels on the pad still running their kOS software to watch for timings.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-10-01T05:18:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022foma87\u0022 data-cite=\u0022foma87\u0022\u003E\u003Cdiv\u003EI need a trigger which activates after a staging-event. This trigger may not be connected to the event itself. Does that make sense? It sure doesn\u00C3\u201A\u00C2\u00B4t to me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou have a few problems here happening at once:\u003C/p\u003E\u003Cp\u003E1 - You are trying to do a wait in a trigger body. You can\u0027t. The Wait command is just ignored there. Therefore when the first trigger sets the flag \u0022set t to 1.\u0022 it might get seen by the second trigger during the *same* update, making the two triggers still run without giving the KSP game engine time to change the state of the ship in reaction to the stage command. (In a nutshell, you can\u0027t wait during a trigger because a trigger has to end entirely within one animation frame update, and the smallest possible granularity on a wait command is that it will wait at least 1 full animation frame.) A better test to give the behavior you\u0027re looking for is to check the current elapsed time TIME:SECONDS and record it during the first trigger and then have the second trigger wait for the condition where TIME:SECONDS is now a bit after it. Like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset trigTimeStamp to 0.\u003Cbr\u003Ewhen stage:liquid fuel \u0026lt; 0.001 then\u003Cbr\u003E{\u003Cbr\u003E  // do staging code here\u003Cbr\u003E  set trigTimeStamp to TIME:SECONDS.\u003Cbr\u003E}\u003Cbr\u003Ewhen trigTimeStamp \u0026gt; 0 and TIME:SECONDS \u0026gt; trigTimeStamp \u002B 0.01 then\u003Cbr\u003E{\u003Cbr\u003E  // do ISP code here.\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat will ensure that \u003Cstrong\u003Eat least one tick of game engine time has passed\u003C/strong\u003E between the first trigger and the second, because during the same tick of game engine time, TIME:SECONDS will remain frozen at the same value.\u003C/p\u003E\u003Cp\u003E2 - The trigger body must not contain much code because it needs to finish deterministically fast within one update. Adding loops to a trigger condition can be very dodgy for this reason. You aren\u0027t showing the main body of your program here - only the triggers. I suggest that you put the looping logic that\u0027s inside your ISP calculating trigger into the mainline code instead and have it get triggered by a flag each time the mainline code iterates a loop. Presumably your main code has a loop in it that is always going during the flight. Put the check there, and trigger it like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset trigTimeStamp to 0.\u003Cbr\u003Ewhen stage:liquid fuel \u0026lt; 0.001 then\u003Cbr\u003E{\u003Cbr\u003E  // do staging code here\u003Cbr\u003E  set trigTimeStamp to TIME:SECONDS.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E// main body of code presumably has a loop in it that always runs.\u003Cbr\u003Euntil something\u003Cbr\u003E{\u003Cbr\u003E  if trigTimeStamp \u0026gt; 0 and TIME:SECONDS \u0026gt; trigTimeStamp \u002B 0.01\u003Cbr\u003E  {\u003Cbr\u003E    set trigTimeStamp to 0. // turn this back off again so it won\u0027t happen twice.\u003Cbr\u003E    // put all your ISP logic here instead of in the trigger.\u003Cbr\u003E  }\u003Cbr\u003E  else\u003Cbr\u003E  {\u003Cbr\u003E    // your normal flight control stuff here\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"TDW","CreatedById":120346,"CreatedDateTime":"2014-10-01T17:14:07Z","Content":"\n\u003Cp\u003E@\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/97015-foma87\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Efoma87\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHave you considered just moving the [wait 0.001] to between the [stage.] and [print \u0022staged\u0022.]\u003C/p\u003E\u003Cp\u003EAlso unless you are using them for something else then you probably don\u0027t need to put the isp and thrust in their own lists.\u003C/p\u003E\u003Cp\u003EYou could try something like this to make the code shorter:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E FOR eng IN e {\u003Cbr\u003E  IF eng:ignition {\u003Cbr\u003E  SET thrtot to thrtot \u002B eng:maxthrust.\u003Cbr\u003E  SET thrisp to thrisp\u002B(eng:maxthrust/eng:isp).\u003Cbr\u003E}. \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"foma87","CreatedById":94434,"CreatedDateTime":"2014-10-01T17:42:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EHave you considered just moving the [wait 0.001] to between the [stage.] and [print \u0022staged\u0022.]\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAccording to Steven, \u0026lt;wait\u0026gt; commands in triggerbodies have no effect, whom I like to thank for his insight on the \u0026lt;when\u0026gt;-mechanics.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAlso unless you are using them for something else then you probably don\u0027t need to put the isp and thrust in their own lists.\u003C/p\u003E\u003Cp\u003EYou could try something like this to make the code shorter:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E FOR eng IN e {\u003Cbr\u003E  IF eng:ignition {\u003Cbr\u003E  SET thrtot to thrtot \u002B eng:maxthrust.\u003Cbr\u003E  SET thrisp to thrisp\u002B(eng:maxthrust/eng:isp).\u003Cbr\u003E}. \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI feel stupid now. This should actually give me the same results with less code. Nice find!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EA better test to give the behavior you\u0027re looking for is to check the current elapsed time TIME:SECONDS and record it during the first trigger and then have the second trigger wait for the condition where TIME:SECONDS is now a bit after it. Like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset trigTimeStamp to 0.\u003Cbr\u003Ewhen stage:liquid fuel \u0026lt; 0.001 then\u003Cbr\u003E{\u003Cbr\u003E  // do staging code here\u003Cbr\u003E  set trigTimeStamp to TIME:SECONDS.\u003Cbr\u003E}\u003Cbr\u003Ewhen trigTimeStamp \u0026gt; 0 and TIME:SECONDS \u0026gt; trigTimeStamp \u002B 0.01 then\u003Cbr\u003E{\u003Cbr\u003E  // do ISP code here.\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u00C3\u201A\u00C2\u00B4ve tried this exact idea yesterday, the error message persists however. As you explained, you\u0060re right that the problem is running a loop in a \u0026lt;when\u0026gt;-body.\u003C/p\u003E\u003Cp\u003EAs for your suggestion with the timestamp and in the \u0026lt;until\u0026gt;-body, I think this might just do the trick! I\u0060ll try it out and report back.\u003C/p\u003E\u003Cp\u003EMuch obliged.\u003C/p\u003E\n"},{"CreatedByName":"foma87","CreatedById":94434,"CreatedDateTime":"2014-10-01T22:36:25Z","Content":"\n\u003Cp\u003EYES, I got it!\u003C/p\u003E\u003Cp\u003EIt actually worked with the timestamp in an \u0026lt;until\u0026gt;-body!!!\u003C/p\u003E\u003Cp\u003ESo now I got an orbiting script which is almost completely failsafe (when using rockets that is.). The only rule it has is no solid fuel boosters past the 1st stage.\u003C/p\u003E\u003Cp\u003EWhen using only liquidengines it will run at fuel efficient throttle given the current height. When using a combination of solid and fuel engines, it will lock the throttle to lift the weight of the rocket without the solid boosters until those are empty. After that it switches to to fuel efficient throttle again.\u003C/p\u003E\u003Cp\u003EIt will start a gravity turn at 10k meters and end it at an angle of 45\u00C3\u201A\u00C2\u00B0 at 32k meters.\u003C/p\u003E\u003Cp\u003EAnd here comes the part with th ISP calculation:\u003C/p\u003E\u003Cp\u003EThe node for circularization is calculating the exact time the engines have to fire up in order to run through the node in the most efficient manner (half the burntime before the node, and half after). In order to do that, it needs to know the combined ISP of the currently ignited engines. \u003C/p\u003E\u003Cp\u003EIf the burntime of the node is greater than the leftover burntime of the current stage, it will jettison it, fire up the next stage, AND recalculate the combined ISP of the NOW currently ignited engines.\u003C/p\u003E\u003Cp\u003EThank you guys so much for your help!!!\u003C/p\u003E\u003Cp\u003EAnd if anyone is interested (script is a whopping 3195 characters):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//lists\u003Cbr\u003E\u003Cbr\u003Eset \thAsc \t\tto list().\u003Cbr\u003Eset \thAsc:add \tto 1000.\u003Cbr\u003Eset \thAsc:add \tto 10000.\u003Cbr\u003Eset \thAsc:add \tto 20000.\u003Cbr\u003Eset \thAsc:add \tto 32000.\u003Cbr\u003E\u003Cbr\u003Eset \tacUp \t\tto list().\u003Cbr\u003Eset \tacUp:add \tto 6.05.\u003Cbr\u003Eset \tacUp:add \tto 3.32.\u003Cbr\u003Eset \tacUp:add \tto 22.04.\u003Cbr\u003Eset \tacUp:add \tto 205.23.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//vAsc\t110,\t268,\t716,\t2332\u003Cbr\u003E//hAsc\t1000,\t10000,\t20000,\t32000\u003Cbr\u003E//aAsc\t6.05,\t3.32,\t22.04,\t205.23)\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//script\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//standard variables\u003Cbr\u003E\u003Cbr\u003Eset\t\taAsca\t\tto 0.\u003Cbr\u003Elock \tv \t\t\tto verticalspeed.\u003Cbr\u003Elock \th \t\t\tto altitude.\u003Cbr\u003Elock \thApo \t\tto alt:apoapsis.\u003Cbr\u003Elock\tetaApo \t\tto eta:apoapsis.\u003Cbr\u003Eset\t\tisp \t\tto 0.\u003Cbr\u003Eset\t\tg0 \t\t\tto 9.81.\u003Cbr\u003Eset\t\taUp \t\tto 0.\u003Cbr\u003Elock \tthrMax \t\tto maxthrust.\u003Cbr\u003Elock \tmTot \t\tto ship:mass.\u003Cbr\u003Elock\tsolFor\t\tto g0*(mTot-(stage:solidfuel*7.5)).\u003Cbr\u003Elock\tsolAcc\t\tto solFor/thrMax.\u003Cbr\u003Elock \tliqFor \t\tto (g0\u002BaAsca)*mTot.\u003Cbr\u003Elock \tliqUp \t\tto liqFor/thrMax.\u003Cbr\u003Eset \tpitch \t\tto 0.\u003Cbr\u003Eset\t\tdvNode \t\tto 0.\u003Cbr\u003Eset \tt\t\t\tto 0.\u003Cbr\u003Eset\t\tthrIsp\t\tto 0.001.\u003Cbr\u003Eset\t\tthrTot\t\tto 0.001.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//staging, actiongroups, utilities, isp calculator\u003Cbr\u003E\u003Cbr\u003Ewhen stage:liquidfuel\u0026lt;0.001 and stage:solidfuel\u0026lt;0.001 then\u003Cbr\u003E{\u003Cbr\u003E\tunlock t.\u003Cbr\u003E\tclearscreen.\u003Cbr\u003E\tstage.\u003Cbr\u003E\tprint \u0022Staged!\u0022.\u003Cbr\u003E\tset t to time:seconds.\u003Cbr\u003E\twait 0.001.\u003Cbr\u003E\tpreserve.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen stage:solidfuel\u0026lt;0.001 then\u003Cbr\u003E{\u003Cbr\u003E\tclearscreen.\u003Cbr\u003E\tstage.\u003Cbr\u003E\tprint \u0022Staged!\u0022.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Ewhen h\u0026gt;70000 then \u003Cbr\u003E{\u003Cbr\u003E\tag1 on. \u003Cbr\u003E\tpanels on.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//ascension\u003Cbr\u003E\u003Cbr\u003Elock steering to up \u002B R(0,0,180).\u003Cbr\u003E\u003Cbr\u003Euntil hApo\u0026gt;125000\u003Cbr\u003E{\u003Cbr\u003E\tif stage:solidfuel\u0026gt;1\u003Cbr\u003E\t{\u003Cbr\u003E\t\tlock throttle to solacc.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003E\telse\u003Cbr\u003E\u003Cbr\u003E\t{\u003Cbr\u003E\tlock throttle to liqUp.\u003Cbr\u003E\u003Cbr\u003E\tif h\u0026lt;hAsc[0] \t\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset aAsca to acUp[0].\u003Cbr\u003E\t\t}.\u003Cbr\u003E\u003Cbr\u003E\tif h\u0026lt;hAsc[1] \tand h\u0026gt;hAsc[0]\t\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset aAsca to acUp[1].\u003Cbr\u003E\t\t}.\u003Cbr\u003E\u003Cbr\u003E\tif h\u0026lt;hAsc[2] \tand h\u0026gt;hAsc[1]\t\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset aAsca to acUp[2].\u003Cbr\u003E\t\t}.\u003Cbr\u003E\u003Cbr\u003E\tif h\u0026lt;hAsc[3] \tand h\u0026gt;hAsc[2]\t\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset aAsca to acUp[3].\u003Cbr\u003E\t\t}.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003E\tif h\u0026gt;hAsc[1]\tand pitch\u0026gt;-45\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tset pitch to -((h-hAsc[1])/488.88).\u003Cbr\u003E\t\t\tlock steering to UP \u002B R(0,0,180) \u002B R(0,pitch,0).\u003Cbr\u003E\t\t}.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Elock throttle to 0.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//node variables and ispcalculator\u003Cbr\u003E\u003Cbr\u003Elist engines in e.\u003Cbr\u003E\u003Cbr\u003Efor eng in e \u003Cbr\u003E\t{\u003Cbr\u003E\t\tif eng:ignition=\u0022True\u0022\u003Cbr\u003E\t\t{\u003Cbr\u003E  \t\t\tset thrtot to thrtot \u002B eng:maxthrust.\u003Cbr\u003E  \t\t\tset thrisp to thrisp\u002B(eng:maxthrust/eng:isp).\u003Cbr\u003E  \t\t}.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003Elock \tisp \t\tto thrtot/thrisp.\u003Cbr\u003Elock \tmDry \t\tto (mTot/(constant():e^(dvNode/(isp*g0)))).\u003Cbr\u003Elock \tfuelNeed \tto mTot-mDry.\u003Cbr\u003Elock \tfuelFlow \tto (thrMax/(isp*g0)).\u003Cbr\u003Eset\t\tburnTime \tto (fuelNeed/fuelFlow).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//apoapsis node\u003Cbr\u003E\u003Cbr\u003Eset apoNode to node(time:seconds\u002BetaApo, 0, 0, dvNode).\u003Cbr\u003Eadd apoNode.\u003Cbr\u003E\u003Cbr\u003Euntil apoNode:orbit:periapsis\u0026gt;124000\u003Cbr\u003E{\u003Cbr\u003E\tset dvNode to dvNode\u002B5.\u003Cbr\u003E\tremove apoNode.\u003Cbr\u003E\tset apoNode to node(time:seconds\u002Beta:apoapsis, 0, 0, dvNode).\u003Cbr\u003E\tadd apoNode.\u003Cbr\u003E\twait 0.001.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Elock steering to apoNode.\u003Cbr\u003Ewait 5.\u003Cbr\u003E\u003Cbr\u003Eif (stage:liquidfuel*5\u002Bstage:oxidizer*5)/1000\u0026lt;fuelNeed\u003Cbr\u003E{\u003Cbr\u003E\tunlock t.\u003Cbr\u003E\tstage.\u003Cbr\u003E\tset t to time:seconds.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Euntil apoNode:eta\u0026lt;((burntime/2)\u002B60)\u003Cbr\u003E{\u003Cbr\u003E\tset warp to 3.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Eset warp to 0.\u003Cbr\u003Ewait 0.001.\u003Cbr\u003E\u003Cbr\u003Euntil periapsis\u0026gt;120000\u003Cbr\u003E{\u003Cbr\u003E\tif t\u0026lt;time:seconds-1\u003Cbr\u003E\t{\t\u003Cbr\u003E\t\tset thrtot to 0.001.\u003Cbr\u003E\t\tset thrisp to 0.001.\u003Cbr\u003E\t\tlist engines in e.\u003Cbr\u003E\u003Cbr\u003E\t\tfor eng in e \u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tif eng:ignition=\u0022True\u0022\u003Cbr\u003E\t\t\t{\u003Cbr\u003E  \t\t\t\tset thrtot to thrtot \u002B eng:maxthrust.\u003Cbr\u003E  \t\t\t\tset thrisp to thrisp\u002B(eng:maxthrust/eng:isp).\u003Cbr\u003E  \t\t\t}.\u003Cbr\u003E\t\t}.\u003Cbr\u003E\t\tlock t to time:seconds.\u003Cbr\u003E\t\tset\t\tburnTime \tto (fuelNeed/fuelFlow).\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003E\tif apoNode:eta\u0026lt;(burntime/2) and dvNode\u0026gt;50\u003Cbr\u003E\t{\u003Cbr\u003E\t\tlock throttle to 1.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003Cbr\u003E\tif apoNode:eta\u0026lt;(burntime/2) and dvNode\u0026lt;50\u003Cbr\u003E\t{\u003Cbr\u003E\t\tlock throttle to 0.1.\u003Cbr\u003E\t}\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Done!\u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eedit: a little bug caused an error after staging a solidfuel booster. fixed hopefully.\u003C/p\u003E\u003Cp\u003Eedit: it seems like the max numer of engines you should use is 10.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-01T23:27:02Z\u0022 title=\u002210/01/2014 11:27  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 1, 2014\u003C/time\u003E by foma87\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Parallax","CreatedById":104180,"CreatedDateTime":"2014-10-02T13:35:26Z","Content":"\n\u003Cp\u003EIs there a way to use kos to activate infernal robotics hot keys? I need to loop a sequence of servo movements.... currently I\u0027m using an external script to do this, but the timing sometimes falls out sync and screws everything up.\u003C/p\u003E\n"},{"CreatedByName":"Darren9","CreatedById":58062,"CreatedDateTime":"2014-10-02T13:58:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Parallax\u0022 data-cite=\u0022Parallax\u0022\u003E\u003Cdiv\u003EIs there a way to use kos to activate infernal robotics hot keys? I need to loop a sequence of servo movements.... currently I\u0027m using an external script to do this, but the timing sometimes falls out sync and screws everything up.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is what looks like a not-compiled possibly working prototype in the kOS Git-Hub, I was waiting patiently for something to happen but maybe if there\u0027s a few of us asking it could move up the to-do list. I\u0027ve had the same trouble and integrating a \u0022return to center\u0022 action group into each loop seems the only way at the moment.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-10-02T17:01:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Darren9\u0022 data-cite=\u0022Darren9\u0022\u003E\u003Cdiv\u003EThere is what looks like a not-compiled possibly working prototype in the kOS Git-Hub, I was waiting patiently for something to happen but maybe if there\u0027s a few of us asking it could move up the to-do list. I\u0027ve had the same trouble and integrating a \u0022return to center\u0022 action group into each loop seems the only way at the moment.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s literally impossible for it to BE any higher on the TODO list than it *already* is.\u003C/p\u003E\u003Cp\u003EIt\u0027s debatable whether or not it\u0027s a good idea to announce publicly too much about the inner managing of a software project, as doing so often builds misunderstood anticipation hype in people\u0027s minds, but since people have been clamoring for this particular feature for a while now, and I\u0027ve been talking it up, I figure I owe an explanation for the delay.\u003C/p\u003E\u003Cp\u003EThe reason there\u0027s been a delay is that the feature requires adding some language infrastructure underneath that kerboscript was missing, namely the ability to use suffix terms as function calls, like this for example:\u003C/p\u003E\u003Cp\u003ESET FOO TO LIST().\u003C/p\u003E\u003Cp\u003EFOO:ADD(\u0022val0\u0022).\u003C/p\u003E\u003Cp\u003EFOO:ADD(\u0022val1\u0022).\u003C/p\u003E\u003Cp\u003EFOO:ADD(\u0022val2\u0022).\u003C/p\u003E\u003Cp\u003EFOO:ADD(\u0022val3\u0022).\u003C/p\u003E\u003Cp\u003EFOO:ADD(\u0022val4\u0022).\u003C/p\u003E\u003Cp\u003Eprint FOO:SUBLIST(1,2):LENGTH.\u003C/p\u003E\u003Cp\u003EThe work on the interface for reading part menu fields had to be halted until that underlying language feature was implemented first. Thankfully, as of late last night, I got the first potential experimental version of that language feature ready to merge in (but be warned it hasn\u0027t really been fully tested yet so there\u0027s a chance it can be found lacking and need more work).\u003C/p\u003E\u003Cp\u003EBarring any further unforeseen problems with it, I expect to be back to working on the right click menu thing probably this weekend when I\u0027ll have all of Sunday free to spend \u0022in the hacking zone\u0022 for it.\u003C/p\u003E\u003Cp\u003EBut again, be warned, that\u0027s *IF* something serious isn\u0027t found to be wrong with the suffix function call feature. I tested it fairly well myself but there may be use cases I hadn\u0027t thought of.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ELong Version, for any computer programmers out there who can follow it:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EBasically, we were missing the ability to pass arguments into the code that suffix terms run, which would allow them to behave like methods. Adding this required a major change to the grammar definition that shuffled the parse tree layout around. Anyone who\u0027s ever written parser code before knows that when you do that it has consequent effects on the code that percolate all down through the system so it\u0027s not a small task. It\u0027s the sort of change that breaks hundreds of assumptions all over the place that the code was silently making without those assumptions being documented. As the person who actually wrote the grammar parsing system in the first place no longer has free time for the project, this fell to me to do. Since I didn\u0027t know where all those secret assumptions were, many of them snuck up on me by surprise. Often a change would cause an error in a seemingly unrelated part of the system because the change violated an unstated assumption the code was making that I was unaware of, so it wasn\u0027t a quick thing getting it working.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-02T17:17:49Z\u0022 title=\u002210/02/2014 05:17  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 2, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"InvertedBlack","CreatedById":124318,"CreatedDateTime":"2014-10-03T02:59:15Z","Content":"\n\u003Cp\u003EGreetings all!\u003C/p\u003E\u003Cp\u003EMay someone ever so kindly cite simple examples of how to use \u003Cstrong\u003EWheelsteering\u003C/strong\u003E and \u003Cstrong\u003EWheelThrottle\u003C/strong\u003E?\u003C/p\u003E\u003Cp\u003EI have searched through this thread, the older thread, all of the reference material, the wiki, et all and am still in quite a desperate need of help. It appears to me that the usage of these has changed somewhat since the earlier days of kOS and this is perhaps why I am having such difficulty?\u003C/p\u003E\u003Cp\u003EAnywho, I greatly ever so muchly with a cherry on top and a can of bananas to boot appreciate anyone who can tell me how this is done. I\u0027d love to automate some of my rover processes and the like. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EP.S. Long Time Lurker and this issue has officially led me to making my first post. I think kOS is worth it!\u003C/p\u003E\u003Cp\u003E-Blake\u003C/p\u003E\n"},{"CreatedByName":"TDW","CreatedById":120346,"CreatedDateTime":"2014-10-03T13:49:47Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@\u003C/strong\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/127624-InvertedBlack\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cstrong\u003EInvertedBlack\u003C/strong\u003E\u003C/strong\u003E\u003C/a\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EGaiiden\u003C/strong\u003E has a rover script here \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/86177-kOS-12-2P3-Rover-Driver-pre-release\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/86177-kOS-12-2P3-Rover-Driver-pre-release\u003C/a\u003E .\u003C/p\u003E\u003Cp\u003EIf you want to just use lat \u0026amp; lon as way points (instead of game objects)i would suggest looking into great circle navigation. Which will give you a variable heading for the shortest path between 2 co-ordinates not essential but it helps when navigating near the poles.\u003C/p\u003E\u003Cp\u003EEdit: Here is the equation for heading (tlat \u0026amp;tlon are target latitude and target longitude respectively) \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK heading TO ARCTAN2(SIN(tLon-SHIP:LONGITUDE)*COS(tLat),(COS(SHIP:LATITUDE)*SIN(tLat))-(SIN(SHIP:LATITUDE)*COS(tLat)*COS(tLon-SHIP:LONGITUDE))). \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Egreat circle nav can also be used to find surface distance but i don\u0027t have the equation for that to hand.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-04T08:23:40Z\u0022 title=\u002210/04/2014 08:23  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 4, 2014\u003C/time\u003E by TDW\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"falken","CreatedById":17316,"CreatedDateTime":"2014-10-03T17:10:42Z","Content":"\n\u003Cp\u003EHi, someone mentioned that Infernal Robotics is usable with kOS. I have a request if this is the case.\u003C/p\u003E\u003Cp\u003EI was thinking that maybe a rotatron could be set to rotate a truss segment so that a certain side of it would face the sun when possible. Then, a pair of solar arrays could be attached top and bottom and thus they would get a full dose of the solar rays. Basically, how the ISS Solar arrays work.\u003C/p\u003E\n"},{"CreatedByName":"TDW","CreatedById":120346,"CreatedDateTime":"2014-10-03T18:54:45Z","Content":"\n\u003Cp\u003E@\u003Cstrong\u003Efalken\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIR / generic right click menu support is being worked on (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089-0-24-2-kOS-Scriptable-Autopilot-System-v0-14-2014-9-11?p=1448280\u0026amp;viewfull=1#post1448280\u0022 rel=\u0022external nofollow\u0022\u003E4 posts back\u003C/a\u003E \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E) current support is via action groups and querying part facing.\u003C/p\u003E\u003Cp\u003EAre you asking for help writing this or for someone to write it for you?\u003C/p\u003E\u003Cp\u003EIf its just a couple of pointers you want then here is how I would start out;\u003C/p\u003E\u003Cp\u003E- First you need the truss part to be identifiable, with engines you can identify by stage but the truss would need a unique(to the vessel) part in it for this.\u003C/p\u003E\u003Cp\u003E- Then the axis of rotation for the rotatron (should be the same as its facing, i think).\u003C/p\u003E\u003Cp\u003E- The vector from you to the sun.\u003C/p\u003E\u003Cp\u003E- Remove the axis of rotation component from the vector to the sun (vxcl).\u003C/p\u003E\u003Cp\u003E- Use action group to rotate rotatron until the angle between the truss facing and the flattened of the sun vector approaches 0.\u003C/p\u003E\u003Cp\u003E- If you want it more advanced then you can take the normal of the truss facing and rotatoron axis and if the angle between that and the flattened sun vector is \u0026gt;90 rotate 1 way and if it is \u0026lt; 90 rotate the other.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EThe vector maths can be can here \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/vector/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/structure/vector/index.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEdit 2:\u003C/p\u003E\u003Cp\u003EI forgot I came here to ask my own question \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E.\u003C/p\u003E\u003Cp\u003EIs there a way of forcing ROUND(var,2) to give decimal places even if there are none eg. 10.00 instead of 10? not a major thing just trying to neaten up a readout.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-03T18:59:27Z\u0022 title=\u002210/03/2014 06:59  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 3, 2014\u003C/time\u003E by TDW\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-10-03T19:49:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TDW\u0022 data-cite=\u0022TDW\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EEdit 2:\u003C/p\u003E\u003Cp\u003EI forgot I came here to ask my own question \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E.\u003C/p\u003E\u003Cp\u003EIs there a way of forcing ROUND(var,2) to give decimal places even if there are none eg. 10.00 instead of 10? not a major thing just trying to neaten up a readout.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe want to do more of those nice string manipulation features as time goes on. there is a hack i have done in the past where i print some 0s @ the location i know they might need to be, then i do some modulus math to figure out where i need to print the value i have. Its dumb \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EI will surely accept a padding PR on github \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-03T20:00:40Z\u0022 title=\u002210/03/2014 08:00  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 3, 2014\u003C/time\u003E by erendrake\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"InvertedBlack","CreatedById":124318,"CreatedDateTime":"2014-10-04T01:43:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TDW\u0022 data-cite=\u0022TDW\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E@\u003C/strong\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/127624-InvertedBlack\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cstrong\u003EInvertedBlack\u003C/strong\u003E\u003C/strong\u003E\u003C/a\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003EGaiiden\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E has a rover script here \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92945-kOS-0-13-1-Script-RCS-Thrust-Controller-%28v1-1%29-automated-maneuver-node-execution\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/92945-kOS-0-13-1-Script-RCS-Thrust-Controller-%28v1-1%29-automated-maneuver-node-execution\u003C/a\u003E.\u003Cp\u003EIf you want to just use lat \u0026amp; lon as way points (instead of game objects)i would suggest looking into great circle navigation. Which will give you a variable heading for the shortest path between 2 co-ordinates not essential but it helps when navigating near the poles.\u003C/p\u003E\u003Cp\u003EEdit: Here is the equation for heading (tlat \u0026amp;tlon are target latitude and target longitude respectively) \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK heading TO ARCTAN2(SIN(tLon-SHIP:LONGITUDE)*COS(tLat),(COS(SHIP:LATITUDE)*SIN(tLat))-(SIN(SHIP:LATITUDE)*COS(tLat)*COS(tLon-SHIP:LONGITUDE))). \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Egreat circle nav can also be used to find surface distance but i don\u0027t have the equation for that to hand.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEven the rover script (which uses game objects) is a bit complicated for me to piece through and figure out. I really want to just start from scratch and assemble something homebrew without having to reverse engineer an elaborate example. I found the reference documentation extremely helpful, but the single mention of WheelThrottle and WheelSteering contains no information whatsoever about their proper syntax and usage. I found many of Gaiden\u0027s questions about this topic earlier in this thread while they were developing that rover driver but I still for my life can\u0027t find a simple snip of code that shows the syntax for both Wheelthrottle and Wheelsteering and am quite bummed at this. \u003C/p\u003E\u003Cp\u003EApparently in Wheelsteering\u0027s history it could be locked, then at another time it was by Raw Control.... at various points in the code\u0027s life WheelSteering could actually be set to a Bearing, which sounds extremely helpful.\u003C/p\u003E\u003Cp\u003EI understand that the documentation contains gaps of information here or there as it can be difficult to find the time to draft a complete set of information but if anyone actually understands the syntax of \u003Cspan style=\u0022text-decoration:underline;\u0022\u003EWheelsteering and Wheelthrottle\u003C/span\u003E and can use each in a sentence, please oh yes please do share. \u003C/p\u003E\u003Cp\u003EThank you for your time and input everyone, I greatly appreciate it. =]\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-10-04T02:01:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TDW\u0022 data-cite=\u0022TDW\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E@\u003C/strong\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/127624-InvertedBlack\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cstrong\u003EInvertedBlack\u003C/strong\u003E\u003C/strong\u003E\u003C/a\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003EGaiiden\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/106061-Gaiiden\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E has a rover script here \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92945-kOS-0-13-1-Script-RCS-Thrust-Controller-%28v1-1%29-automated-maneuver-node-execution\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/92945-kOS-0-13-1-Script-RCS-Thrust-Controller-%28v1-1%29-automated-maneuver-node-execution\u003C/a\u003E.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWrong script. See my sig for the rover driver code. I got all my info \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/index.html\u0022 rel=\u0022external nofollow\u0022\u003Efrom the docs\u003C/a\u003E. There\u0027s really not that much difference at all between wheelsteering and steering\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-10-04T04:32:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003EWe want to do more of those nice string manipulation features as time goes on. there is a hack i have done in the past where i print some 0s @ the location i know they might need to be, then i do some modulus math to figure out where i need to print the value i have. Its dumb \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cp\u003EI will surely accept a padding PR on github \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. wrappers around the various string manipulators like substring, toupper, and so on would be nice. It might be a good idea to wait until there\u0027s such a thing as methods wrapping things in kOS (upcoming future feature) so we can make it work like it should (var.toupper() rather than toupper(var)).\u003C/p\u003E\n"},{"CreatedByName":"InvertedBlack","CreatedById":124318,"CreatedDateTime":"2014-10-04T07:02:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EWrong script. See my sig for the rover driver code. I got all my info \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/index.html\u0022 rel=\u0022external nofollow\u0022\u003Efrom the docs\u003C/a\u003E. There\u0027s really not that much difference at all between wheelsteering and steering\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, I see. Thank you muchly, Gaiiden. So assuming this, \u0027\u003Cstrong\u003ELOCK WHEELSTEERING TO HEADING( 180, 0 ).\u003C/strong\u003E\u0027 would turn the wheels in the direction it took to point at heading 180 and \u0027\u003Cstrong\u003ELOCK WHEELTHROTTLE TO 1.0.\u003C/strong\u003E\u0027 would assign full thrust? That sounds excellent. \u003C/p\u003E\u003Cp\u003EI assume if I wanted to attempt Raw Control vs Cooked with these it\u0027s not possible, but I love that I can set a heading. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027ll report back if I incur any further issue, thank you so much for the help everyone!\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-10-04T13:19:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022InvertedBlack\u0022 data-cite=\u0022InvertedBlack\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI assume if I wanted to attempt Raw Control vs Cooked with these it\u0027s not possible, but I love that I can set a heading. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027ll report back if I incur any further issue, thank you so much for the help everyone!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBeware, the last time I tried using LOCK WHEELSTEERING to a heading, I discovered a bug in the steering code that caused it to drive in circles when you try to drive exactly due north. I don\u0027t remember if the fix ever made it into the code or not, because this was way back when the project was being rearranged and moved to a new github location so it might have gotten lost on the way. Give it a try and see if it works.\u003C/p\u003E\u003Cp\u003EThe problem was, essentially, that it just tried to turn left if the current compass heading was higher than desired, or right if the current compass heading was lower than desired. When you are just a *little* bit to the left of 0 degrees, your heading is not -0.001 degrees. It\u0027s \u002B359.999 degrees. The code thought \u0022oh noes, I need to turn 359.999 degrees to the left to correct this. I\u0027m *really* far off.\u0022\u003C/p\u003E\n"}]}