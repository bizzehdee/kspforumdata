{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":71,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-06T06:08:19Z","Content":"\n\u003Cp\u003EHmmm... Oddly, the secondary material isn\u0027t showing up in the Scaled space Camera until about ~100Km up. Works in map-view though...\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-06T10:46:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EHmmm... Oddly, the secondary material isn\u0027t showing up in the Scaled space Camera until about ~100Km up. Works in map-view though...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe multiplicative blending layer? 100kms up? Sounds like PQS has something to do with it.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-06T16:03:39Z","Content":"\n\u003Cp\u003EOops. Bad queuing. The stock atmosphere was interfering. Looks like this may work. May have to re-purpose the extinction layer to kill the Alpha though.\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-06T16:06:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EMay have to re-purpose the extinction layer to kill the Alpha though.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry, what?\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-06T17:11:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003ESorry, what?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERight now it looks like the alpha may be all over the place. The extiction shader could be used to set the alpha to a known value. Is it rendered on top of or behind the sky shader?\u003C/p\u003E\u003Cp\u003EAlso:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/sbPyN3R.png\u0022 alt=\u0022sbPyN3R.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-06T17:19:45Z\u0022 title=\u002211/06/2015 05:19  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 6, 2015\u003C/time\u003E by rbray89\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-06T17:21:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003ERight now it looks like the alpha may be all over the place. The extiction shader could be used to set the alpha to a known value. Is it rendered on top of or behind the sky shader?\u003Cp\u003EAlso:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/sbPyN3R.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/sbPyN3R.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is rendered behind the sky shader. Also, what am I looking at here?\u003C/p\u003E\u003Cp\u003EEdited: now do this\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/14uwAzZ.jpg\u0022 alt=\u002214uwAzZ.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-06T17:44:43Z\u0022 title=\u002211/06/2015 05:44  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 6, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-06T18:29:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EIt is rendered behind the sky shader. Also, what am I looking at here?\u003Cp\u003EEdited: now do this\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/14uwAzZ.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/14uwAzZ.jpg\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPerfect. \u003C/p\u003E\u003Cp\u003EThat was my initial attempt at a proper terminator with a VERY overpowered multiplicative blend. I think the default sky shader over-writes the alpha values though. That or there is a bug in my atmo shader. Either way, we are getting closer. I suspect that this is entirely an issue with KSP\u0027s sky. It also seems to write to the depth buffer (no \u0022zwrite off\u0022), and seems to be on the transparent render queue. It is quite annoying; I see why you decided to eliminate it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-06T18:45:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EPerfect. \u003Cp\u003EThat was my initial attempt at a proper terminator with a VERY overpowered multiplicative blend. I think the default sky shader over-writes the alpha values though. That or there is a bug in my atmo shader. Either way, we are getting closer. I suspect that this is entirely an issue with KSP\u0027s sky. It also seems to write to the depth buffer (no \u0022zwrite off\u0022), and seems to be on the transparent render queue. It is quite annoying; I see why you decided to eliminate it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYea it\u0027s quite the pain. Try it with the scatterer sky and see if anything changes, though I\u0027m not sure if the scatterer sky writes 1 to the alpha channel, or writes it\u0027s own values from older versions where I was using alpha blending.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-07T08:18:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EYea it\u0027s quite the pain. Try it with the scatterer sky and see if anything changes, though I\u0027m not sure if the scatterer sky writes 1 to the alpha channel, or writes it\u0027s own values from older versions where I was using alpha blending.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmmm... Tried toying around with scatterer, but I don\u0027t know enough about it\u0027s workings to say if this is what I should be doing.\u003C/p\u003E\u003Cp\u003EExtinction shader goes first, extinguishes alpha, keeps color blend mode\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E/ Compiled shader for all platforms, uncompressed size: 22.5KB\u003Cbr\u003E\u003Cbr\u003EShader \u0022Proland/Atmo/SkyExtinction\u0022 {\u003Cbr\u003ESubShader { \u003Cbr\u003E Tags { \u0022QUEUE\u0022=\u0022Transparent-6\u0022 }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E // Stats for Vertex shader:\u003Cbr\u003E //       d3d11 : 10 math\u003Cbr\u003E //        d3d9 : 14 math\u003Cbr\u003E // Stats for Fragment shader:\u003Cbr\u003E //       d3d11 : 48 math, 2 branch\u003Cbr\u003E //        d3d9 : 68 math, 2 texture\u003Cbr\u003E Pass {\u003Cbr\u003E  Tags { \u0022QUEUE\u0022=\u0022Transparent-6\u0022 }\u003Cbr\u003E  ZTest False\u003Cbr\u003E  ZWrite Off\u003Cbr\u003E  Cull Front\u003Cbr\u003E  Blend DstColor Zero, Zero Zero\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlanet is re-rendered next, writing brightness to alpha.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EShader \u0022EVE/PlanetLight\u0022 {\u003Cbr\u003E\tProperties {\u003Cbr\u003E\t\t_Color (\u0022Color Tint\u0022, Color) = (1,1,1,1)\u003Cbr\u003E\t}\u003Cbr\u003E\tCategory {\u003Cbr\u003E\t   Lighting On\u003Cbr\u003E\t   ZWrite Off\u003Cbr\u003E\t   Cull Back\u003Cbr\u003E\t   Blend SrcColor SrcAlpha, One Zero\u003Cbr\u003E\t   Tags {\u003Cbr\u003E\t   \u0022Queue\u0022=\u0022Transparent-5\u0022\u003Cbr\u003E\t   \u0022RenderMode\u0022=\u0022Transparent\u0022\u003Cbr\u003E\t   \u0022IgnoreProjector\u0022=\u0022True\u0022\u003Cbr\u003E\t   }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESky is last. Now addition is dependent on framebuffer alpha. Here, we could also try reversing it to \u0022Blend One OneMinusDstAlpha\u0022 and reversing the alpha writing in the planet shader to write dark areas as \u00221\u0022.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// Compiled shader for all platforms, uncompressed size: 52.6KB\u003Cbr\u003E\u003Cbr\u003EShader \u0022Proland/Atmo/Sky\u0022 {\u003Cbr\u003ESubShader { \u003Cbr\u003E Tags { \u0022QUEUE\u0022=\u0022Transparent-3\u0022 }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E // Stats for Vertex shader:\u003Cbr\u003E //       d3d11 : 10 math\u003Cbr\u003E //        d3d9 : 14 math\u003Cbr\u003E // Stats for Fragment shader:\u003Cbr\u003E //       d3d11 : 163 math, 1 texture\u003Cbr\u003E //        d3d9 : 243 math, 11 texture\u003Cbr\u003E Pass {\u003Cbr\u003E  Tags { \u0022QUEUE\u0022=\u0022Transparent-3\u0022 }\u003Cbr\u003E  ZTest False\u003Cbr\u003E  ZWrite Off\u003Cbr\u003E  Cull Front\u003Cbr\u003E  Blend OneMinusDstAlpha One\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOk, got it. had to move my shader to Geometry\u002B1:\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/Iur0T\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is still with the queues being moved around as well, so I don\u0027t know for certain how much the new alpha changes are helping.\u003C/p\u003E\u003Cp\u003EInterestingly, Mun now glows with a slight tint of whatever the sun is. Pretty cool actually.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-07T08:39:35Z\u0022 title=\u002211/07/2015 08:39  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 7, 2015\u003C/time\u003E by rbray89\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-11-07T12:01:53Z","Content":"\n\u003Cp\u003ENot to interrupt the greek-to-me discussion about the technical details you guys are having, but those pics of the Mun viewed through the atmosphere look fantastic.\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-07T12:51:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EImages\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHoly **** that looks beautiful, especially the second image. Mun looks overblown to full white though. Can you try this with laythe and Jool?\u003C/p\u003E\u003Cp\u003EAlso, not sure what you mean with the mun glowing with a slight tint of the sun, but that is a byproduct of the extinction shader (it should get more noticeable nearing the horizon), unless you mean something else...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-07T12:57:20Z\u0022 title=\u002211/07/2015 12:57  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 7, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-11-07T13:18:57Z","Content":"\n\u003Cp\u003EDamn this looks good guys please carry on doing what you\u0027re doing! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EOne question though as it may be relevant to load orders and buffers and stuffs.. there bug with scatterer and RasterPropMonitor. I get the feeling it\u0027s something that\u0027s inherent to the way scatterer is rendered. It would seem RPM can\u0027t load multiple instances of atmosphere at different angles or in 2D while loading in the 3D main view as the RPM view\u0027s atmosphere appears as it should based on the kerbals IVA viewing angle and changes as the IVA view changes. You may well have known about this but just thought it might be worth mentioning in case there\u0027s any other changes to depth buffers or load orders that might fix/mitigate this (BTW in case you didn\u0027t notice I\u0027m like 143x less smart than you guys about the above so I probs made a number of mistakes with terminology \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E )\u003C/p\u003E\n"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-11-07T13:36:25Z","Content":"\n\u003Cp\u003EI\u0027m looking at those pics and \u003Ca href=\u0022http://replygif.net/i/603.gif\u0022 rel=\u0022external nofollow\u0022\u003EI\u0027m like...\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EYou guys rulez. Eternal kudos.\u003C/p\u003E\n"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2015-11-07T13:48:25Z","Content":"\n\u003Cp\u003EThere is a comment in that Imgur gallery:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Ezolfo: several pictures of nothing, try again -1\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh how that guy could not be more wrong. Its pretty amazing you are getting this to work so well.\u003C/p\u003E\n"},{"CreatedByName":"Wavechaser","CreatedById":125058,"CreatedDateTime":"2015-11-07T20:47:33Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThere are alias and random black bars over the edge of the terrains in far background. Not sure how to fix. \u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ELike this, especially when you zoom in a lot (second img), or even at raw resolutions.\u003C/span\u003E\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/DRUFR\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI have AVP installed with medium textures and a couple optional features (like auroras), with 8x anti-aliasing. I do have a bunch other graphics mods (HotRockets, Ven\u0027s Stock Part Revamp, Destruction FX, Engine Light, Collision FX and a couple others), but I doubt that they would have caused this.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EMy machine runs on Windows 8.1, with 4720HQ, GTX 960M and 16GB DDR3-1600. This happens in both Forced OpenGL and not Forced OpenGL (DX11, I assume?). \u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EAny idea what to do?\u003C/span\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-07T20:52:47Z\u0022 title=\u002211/07/2015 08:52  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 7, 2015\u003C/time\u003E by Wavechaser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Goddess Bhavani","CreatedById":14001,"CreatedDateTime":"2015-11-08T06:13:21Z","Content":"\n\u003Cp\u003EI\u0027ve been using Scatterer happily for a couple of months and the dawn and dusk effects are just spectacular.\u003C/p\u003E\u003Cp\u003ERecently when running DX11 I\u0027ve had a game suddenly slow down during atmospheric flight and then the clouds turned black; EVE itself works fine but whenever I run Scatterer on this instal I will see black sky above the clouds and no amount of reinstalling EVE or tweaking BoulderCO clouds settings could restore the normal sky.\u003C/p\u003E\u003Cp\u003EIs there a fix for the \u0027black sky\u0027 issue?\u003C/p\u003E\u003Cp\u003EEdit: \u003C/p\u003E\u003Cp\u003EFixed - searched the thread and confim loading a craft, zooming the camera out to orbit and back restores the normal sky.\u003C/p\u003E\u003Cp\u003EEdit 2 \u003C/p\u003E\u003Cp\u003EI do have one other request - Can i make the \u0027background fog\u0027 effect on Kerbin more prominent at midday? Currently the default settings look most glorious at dawn and dusk only.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-08T09:52:23Z\u0022 title=\u002211/08/2015 09:52  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 8, 2015\u003C/time\u003E by pandoras kitten\u003C/strong\u003E\n\u003Cbr\u003Efixed :)\n\u003C/span\u003E\n"},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2015-11-08T12:19:38Z","Content":"\n\u003Cp\u003ENo matter what I do, I still have the moire effect on OpenGL regardless if forceoffaniso is enabled or not.\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-08T16:22:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pingopete\u0022 data-cite=\u0022pingopete\u0022\u003E\u003Cdiv\u003EDamn this looks good guys please carry on doing what you\u0027re doing! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003Cp\u003EOne question though as it may be relevant to load orders and buffers and stuffs.. there bug with scatterer and RasterPropMonitor. I get the feeling it\u0027s something that\u0027s inherent to the way scatterer is rendered. It would seem RPM can\u0027t load multiple instances of atmosphere at different angles or in 2D while loading in the 3D main view as the RPM view\u0027s atmosphere appears as it should based on the kerbals IVA viewing angle and changes as the IVA view changes. You may well have known about this but just thought it might be worth mentioning in case there\u0027s any other changes to depth buffers or load orders that might fix/mitigate this (BTW in case you didn\u0027t notice I\u0027m like 143x less smart than you guys about the above so I probs made a number of mistakes with terminology \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E )\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EScatterer gets the properties of the main camera (position, view direction, field of view) and renders the effects for that particular camera. So when the effect is viewed from another camera it looks completely wrong. In the future I might make it render separately for each RPM/custom camera.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wavechaser\u0022 data-cite=\u0022Wavechaser\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThere are alias and random black bars over the edge of the terrains in far background. Not sure how to fix. \u003C/span\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ELike this, especially when you zoom in a lot (second img), or even at raw resolutions.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/a/DRUFR\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/DRUFR\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI have AVP installed with medium textures and a couple optional features (like auroras), with 8x anti-aliasing. I do have a bunch other graphics mods (HotRockets, Ven\u0027s Stock Part Revamp, Destruction FX, Engine Light, Collision FX and a couple others), but I doubt that they would have caused this.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EMy machine runs on Windows 8.1, with 4720HQ, GTX 960M and 16GB DDR3-1600. This happens in both Forced OpenGL and not Forced OpenGL (DX11, I assume?). \u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EAny idea what to do?\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe this is because the depth buffer is aliased compared to the main buffer, so when the effects are lined up they \u0022don\u0027t match\u0022. Never tried it myself but you could try disabling regular AA and using downsampling/nvidia SDR instead.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pandoras kitten\u0022 data-cite=\u0022pandoras kitten\u0022\u003E\u003Cdiv\u003EI\u0027ve been using Scatterer happily for a couple of months and the dawn and dusk effects are just spectacular.\u003Cp\u003ERecently when running DX11 I\u0027ve had a game suddenly slow down during atmospheric flight and then the clouds turned black; EVE itself works fine but whenever I run Scatterer on this instal I will see black sky above the clouds and no amount of reinstalling EVE or tweaking BoulderCO clouds settings could restore the normal sky.\u003C/p\u003E\u003Cp\u003EIs there a fix for the \u0027black sky\u0027 issue?\u003C/p\u003E\u003Cp\u003EEdit: \u003C/p\u003E\u003Cp\u003EFixed - searched the thread and confim loading a craft, zooming the camera out to orbit and back restores the normal sky.\u003C/p\u003E\u003Cp\u003EEdit 2 \u003C/p\u003E\u003Cp\u003EI do have one other request - Can i make the \u0027background fog\u0027 effect on Kerbin more prominent at midday? Currently the default settings look most glorious at dawn and dusk only.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShort answer: you can\u0027t right now. Long answer: it\u0027s complicated, sorry if I\u0027m being brief but it\u0027s supposed to be that way on dawn and dusk, however it\u0027s not completely realistic right now as it doesn\u0027t take into account whether you\u0027re looking towards the sun\u0027s direction or opposite to it.\u003C/p\u003E\u003Cp\u003EQuick example from outerra and the alps:\u003C/p\u003E\u003Cp\u003EClose to sunset, looking in the sun\u0027s direction, very prominent scattering\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/KDmnfln.jpg\u0022 alt=\u0022KDmnfln.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ELooking opposite to the sun\u0027s direction, strong light reflecting off the terrain \u0022mutes\u0022 the scattering effects\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/iEk0WFS.jpg\u0022 alt=\u0022iEk0WFS.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis isn\u0027t currently taken into account in scatterer and the alpha blending kind of negates all of these things. This is one of the reasons I wanted to try HDR, as it would achieve this effect \u0022natively\u0022, but it didn\u0027t work very well and the terrain looked really bad and reflected light in an unnatural way. I thought of some other ways of approximating this and making the effect adjustable based on time of day and viewing angle to the sun and might be doing something for this later.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022_Augustus_\u0022 data-cite=\u0022_Augustus_\u0022\u003E\u003Cdiv\u003ENo matter what I do, I still have the moire effect on OpenGL regardless if forceoffaniso is enabled or not.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMoire effect isn\u0027t supposed to be affected by forceoffaniso, moreover, since a few versions ago forceoffaniso is useless and only lowers the video quality. Hence why I removed it from the UI. It\u0027s still in the config files but there\u0027s no reason to use it.\u003C/p\u003E\n"},{"CreatedByName":"Wavechaser","CreatedById":125058,"CreatedDateTime":"2015-11-08T17:25:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EScatterer gets the properties of the main camera (position, view direction, field of view) and renders the effects for that particular camera. So when the effect is viewed from another camera it looks completely wrong. In the future I might make it render separately for each RPM/custom camera.\u003Cp\u003EI believe this is because the depth buffer is aliased compared to the main buffer, so when the effects are lined up they \u0022don\u0027t match\u0022. Never tried it myself but you could try disabling regular AA and using downsampling/nvidia SDR instead.\u003C/p\u003E\u003Cp\u003EShort answer: you can\u0027t right now. Long answer: it\u0027s complicated, sorry if I\u0027m being brief but it\u0027s supposed to be that way on dawn and dusk, however it\u0027s not completely realistic right now as it doesn\u0027t take into account whether you\u0027re looking towards the sun\u0027s direction or opposite to it.\u003C/p\u003E\u003Cp\u003EQuick example from outerra and the alps:\u003C/p\u003E\u003Cp\u003EClose to sunset, looking in the sun\u0027s direction, very prominent scattering\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/KDmnfln.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/KDmnfln.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ELooking opposite to the sun\u0027s direction, strong light reflecting off the terrain \u0022mutes\u0022 the scattering effects\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/iEk0WFS.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/iEk0WFS.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThis isn\u0027t currently taken into account in scatterer and the alpha blending kind of negates all of these things. This is one of the reasons I wanted to try HDR, as it would achieve this effect \u0022natively\u0022, but it didn\u0027t work very well and the terrain looked really bad and reflected light in an unnatural way. I thought of some other ways of approximating this and making the effect adjustable based on time of day and viewing angle to the sun and might be doing something for this later.\u003C/p\u003E\u003Cp\u003EMoire effect isn\u0027t supposed to be affected by forceoffaniso, moreover, since a few versions ago forceoffaniso is useless and only lowers the video quality. Hence why I removed it from the UI. It\u0027s still in the config files but there\u0027s no reason to use it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks. I\u0027ll try that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-08T17:51:43Z","Content":"\n\u003Cp\u003EHeads-up: For people who are interested, I just made the sky tonemapper into a separate plugin and fixed the previous problems with it.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/138701\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/138701\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-11-09T00:11:45Z","Content":"\n\u003Cp\u003EHello, I have been trying to get this to work on Ubuntu 15.04 in RSS here and there over the last couple of days and every time I try to load up the game after adding it it doesn\u0027t seem to actually load scatterer, but the framerate drops to about 1 frame every 3 seconds. My computer has always run it fine in the past on Windows so I was wondering if it was something to do with Linux? This was one of my favourite mods to use when I played on windows and I was hoping it would run even smoother on Linux in 64bit but as I have been learning the more I use Linux nothing ever works right out the box, there\u0027s always some silly difficulty to be encountered!\u003C/p\u003E\u003Cp\u003ESo yes I was wondering if anyone else is running Linux and if it works perfectly for you or not? Otherwise it could just be that RSS\u002BScatterer is too much for my computer, but I\u0027d rather explore other possibilities first because it just doesn\u0027t feel right without this mod!\u003C/p\u003E\u003Cp\u003EEdit: well I just loaded scatterer onto a fresh install of stock KSP and it worked no problems so I guess it is something to do with it not playing ball with RSS (I forgot to mention but I did extract the RSS compatability after the main Scatterer files) I still don\u0027t know if it\u0027s fixable or down to my computer not being able to handle it though\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-09T00:27:54Z\u0022 title=\u002211/09/2015 12:27  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 9, 2015\u003C/time\u003E by Squiggsy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-09T00:24:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Squiggsy\u0022 data-cite=\u0022Squiggsy\u0022\u003E\u003Cdiv\u003EHello, I have been trying to get this to work on Ubuntu 15.04 in RSS here and there over the last couple of days and every time I try to load up the game after adding it it doesn\u0027t seem to actually load scatterer, but the framerate drops to about 1 frame every 3 seconds. My computer has always run it fine in the past on Windows so I was wondering if it was something to do with Linux? This was one of my favourite mods to use when I played on windows and I was hoping it would run even smoother on Linux in 64bit but as I have been learning the more I use Linux nothing ever works right out the box, there\u0027s always some silly difficulty to be encountered!\u003Cp\u003ESo yes I was wondering if anyone else is running Linux and if it works perfectly for you or not? Otherwise it could just be that RSS\u002BScatterer is too much for my computer, but I\u0027d rather explore other possibilities first because it just doesn\u0027t feel right without this mod!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis was already reported a few pages ago by pingopete, I\u0027ll get to it as soon as I can. This problem appeared with the newest/second newest version of scatterer as far as I know. Linux probably has nothing to do with it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-09T00:27:31Z\u0022 title=\u002211/09/2015 12:27  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 9, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-11-09T09:35:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EThis was already reported a few pages ago by pingopete, I\u0027ll get to it as soon as I can. This problem appeared with the newest/second newest version of scatterer as far as I know. Linux probably has nothing to do with it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewhoops sorry I must have missed that post while looking back through the forums! thank you very much for your response \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-09T19:59:09Z","Content":"\n\u003Cp\u003EHmm what\u0027s that? Something interesting in the debug console? (disregard the Kerbin settings on duna)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Ey9ZdWo.jpg\u0022 alt=\u0022Ey9ZdWo.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-11-09T20:18:02Z","Content":"\n\u003Cp\u003EIs that multiplanet working? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://ak-hdl.buzzfed.com/static/2014-01/enhanced/webdr06/5/15/anigif_enhanced-buzz-16415-1388953880-14.gif\u0022 alt=\u0022anigif_enhanced-buzz-16415-1388953880-14.gif\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-09T20:20:07Z\u0022 title=\u002211/09/2015 08:20  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 9, 2015\u003C/time\u003E by Proot\u003C/strong\u003E\n\u003C/span\u003E\n"}]}