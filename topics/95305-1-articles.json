{"TopicId":95305,"ForumId":29,"TopicTitle":"transform.position changes after revert flight to launch","CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2015-01-01T22:09:19Z","PageNum":1,"Articles":[{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2015-01-01T22:09:19Z","Content":"\n\u003Cp\u003Ei\u0027ve run into a strange thing and i wonder if its a bug\u003C/p\u003E\u003Cp\u003Eafter launching my vessel i check the position of a partmodul\u003C/p\u003E\u003Cp\u003Eafter reverting to launch if i check the position of the same part it changes and after any amount of revert to launch will give the same position\u003C/p\u003E\u003Cp\u003Eafter reverting to VAB and relaunching i get the original position again... actually the one after launching is right but why does it give a different value after reverting to launch?\u003C/p\u003E\u003Cp\u003Ethe code is simply:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EDebug.Log(v.vesselName \u002B \u0022 - \u0022 \u002B localPos \u002B \u0022 - \u0022 \u002B this.transform.position \u002B \u0022 - \u0022 \u002B v.findWorldCenterOfMass());\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand the output is (right image after launch left image after reverting to launch):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/zHTh16F.jpg\u0022 alt=\u0022zHTh16F.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2015-01-02T19:08:50Z","Content":"\n\u003Cp\u003Eok, firstof, what i\u0027ve got is that ksp is shifting the worldcenter to the rootpart after revert to launch but dont do it at launch. i dont know if its intended or bug but a fact. what is strange in this is that \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ethis.vessel.inversetransform[B]point[/B](v.vessel.transform.position)\u003C/pre\u003E\u003Cp\u003E gives the right local coords after revert to launch but \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ethis.vessel.inversetransform[B]direction[/B](v.vessel.transform.position)\u003C/pre\u003E\u003Cp\u003E doesnt. it looks like the world turned upside down around the rootpart. nvm, what i want is working with the first one, still its strange\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-03T15:06:02Z","Content":"\n\u003Cp\u003EOkay, I don\u0027t have any answers for you, but a couple comments that may help.\u003C/p\u003E\u003Cp\u003EFirst, what I know.\u003C/p\u003E\u003Cp\u003EWhen you goto a vessel on the launchpad by switching the scene so the loading message comes up in the bottom right (Editor -\u0026gt; Flight), the vessel will spawn at world space 0,0,0\u003C/p\u003E\u003Cp\u003EI think that anytime you switch to a vessel and incur the Loading message, that vessel will be at 0,0,0 in world space.\u003C/p\u003E\u003Cp\u003ENow, based on what you are seeing, when you revert to launch, you don\u0027t incur the Loading message, so things stay in the same place, in this case Kerbin does not revert. Rather, time is rewound when you revert, but as Kerbin did not move everything is reverted relative to it. \u003C/p\u003E\u003Cp\u003ENote that due to the Kraken and the Krakensbane, World Space co-ordinates are very unreliable. When you switch to a vessel (with the Loading message), that vessel will be at 0,0,0 and will move around as you expect, but only until you hit about 700m/s second relative to world space, at that point the Krakensbane engages and the vessel stops moving in world space and everything starts moving around the vessel.\u003C/p\u003E\u003Cp\u003EIt has to do with the fact that Unity only uses floats with 7 significant figures for location numbers. With the scale KSP works at that is simply not big enough and so Squad implements these workarounds.\u003C/p\u003E\u003Cp\u003EI have not done anything extensive with world space coordinates myself so that is about all I know, but the big thing is that world space coordinates are relative and unreliable, if you are going to use them you need to refresh them often.\u003C/p\u003E\u003Cp\u003EOn the inversetransformpoint and inverseinversetransformdirection, you are getting two concepts mixed up. Vector3\u0027s can be either a location point, or a direction of movement, there are two very different things even though they look exactly the same. \u003C/p\u003E\u003Cp\u003EIf you have a PointA, PointB and TravelAB vectors, use inversetransformpoint to convert PointA and PointB location vectors from World Space to Local Space and use inversetransformdirection to convert TravelAB from World Space to Local Space.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-03T15:09:29Z\u0022 title=\u002201/03/2015 03:09  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 3, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"}]}