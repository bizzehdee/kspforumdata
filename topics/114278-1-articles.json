{"TopicId":114278,"ForumId":20,"TopicTitle":"Mods dumping files in another mod\u0027s folder","CreatedByName":"Mipe","CreatedById":109421,"CreatedDateTime":"2015-06-26T19:31:09Z","PageNum":1,"Articles":[{"CreatedByName":"Mipe","CreatedById":109421,"CreatedDateTime":"2015-06-26T19:31:09Z","Content":"That has to stop.\n\nThank you."},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2015-06-26T19:50:40Z","Content":"Usually that means one of them is a dependency of the other and without the extra files in the correct place the whole thing wouldn\u0027t work correctly."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-06-26T20:26:24Z","Content":"I\u0027m curious what examples you have and what problems you see with it. Mods don\u0027t tend to put things in other folders for no reason. Even so, I\u0027m not sure why it would be that big of a deal if they did."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-06-26T20:47:06Z","Content":"Peoples dumping post without context.\n\nThis has to stop\n\nThank you"},{"CreatedByName":"Mipe","CreatedById":109421,"CreatedDateTime":"2015-06-27T10:46:42Z","Content":"It is bad form, period. Updating the mods that have dirty files from other (dependent) mods is a pain - you can\u0027t have a clean update by deleting the folder first, because you\u0027d lose the other mods\u0027 files that way (typically configs and whatsnot) and you\u0027d have to reinstall those, but then they try to overwrite the updated mods\u0027 DLL with their own outdated DLL.\n\nCase in point: Karbonite trying to force its own Firespitter dll and dumping configs into dependencies\u0027 folders. As awesome RoverDude is, I wish he\u0027d be a little neater about things like this!\n\nHe\u0027s not the only culprit; in the course of several days, I\u0027ve found several. Those are typically mods that provide more than one folder in their package, containing other authors\u0027 dependencies. It\u0027s nice of you to want to provide an out-of-the-box install solution, but this makes things complicated (installing and maintaining dependencies separately).\n\nAnd whenever I decide to uninstall the mod, I am left baffled as to what to do with those \u0022dirty\u0022 files. Which ones are from that mod and which ones are from others? I end leaving those files alone, knowing fully well they may cause issues in the future.\n\nIs there really no way to keep your configs (EVE, etc.) in your own folder? Do you really have to bundle individual DLLs (firespitter, module manager etc.)? You can just instruct the user to install the dependency as well and maintain it.\n\nClean it up and we\u0027ll all hold hands and sing Kumbaya."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-06-27T10:56:46Z","Content":"\u003E Is there really no way to keep your configs (EVE, etc.) in your own folder? Do you really have to bundle individual DLLs (firespitter, module manager etc.)? You can just instruct the user to install the dependency as well and maintain it.\n\n- No, since most of those mods require the file to be in specific folders\n\n- No, since we get more post about users messing up dependency install than post about dependency cleaning.\n\nUse CKAN."},{"CreatedByName":"Mipe","CreatedById":109421,"CreatedDateTime":"2015-06-27T11:01:14Z","Content":"I am trying to use CKAN, honestly. But it won\u0027t let me install addons still stuck in the 1.0.2/1.0.3 limbo, so I have to do it manually. I would love to just install the Firespitter Core, but wouldn\u0027t that nuke the mod-specific files?\n\nIt\u0027s a mess, really. In fact, I\u0027m about to head to CKAN and request ability to install \u0022incompatible\u0022 mods. Perhaps they\u0027ll be quicker about it than the dozens of mod authors scrambling to update all their mod to keep up with KSP version."},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2015-06-27T11:09:46Z","Content":"Then just nuke the mod specific file. Usually modders keep themselves updated versions of their dependencies too, so it is rarely a problem, but to be sure, grab the latest version of the dependencies and override stuff. I do this for module manager and filesplitter and other things that a lot of modder uses and no problems so far despite running about 80-100 mods. They usually are backward compatible so no fear of updating. And in the case that it is not, you will get a warning."},{"CreatedByName":"Mipe","CreatedById":109421,"CreatedDateTime":"2015-06-27T11:17:44Z","Content":"And when something goes wrong, prompting you to whine to the mod author, who then chews you out for not properly installing their mod...\n\nMy original point stands: **mods should not put files in other mods\u0027 folders**. If the design doesn\u0027t allow that, then the design needs to be reviewed."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-27T13:38:50Z","Content":"That\u0027s a tough thing to accomplish, because some mods modify other mods. Take a visual pack like Astronomer\u0027s or the Renaissance Collection, they are mostly configs and textures for other mods like EVE and Texture Replacer, and EVE and TR expect the files to be within their folders at certain paths. They couldn\u0027t work currently if they couldn\u0027t put files in other mods\u0027 directories.\n\nThe only way I could see not touching another mod\u0027s directory is if you could get all modders to agree on a central directory to store cfgs and other modifyable parts, but that is an unlikely scenario and they\u0027d *still* be modifying the original mods\u0027 directory, the directory would just be another in a different place.\n\nBut maybe I\u0027m missing something. Do you have an idea of how mods-that-modify-mods could still work without putting anything in their directories?"},{"CreatedByName":"Master Tao","CreatedById":110410,"CreatedDateTime":"2015-06-27T19:03:11Z","Content":"[Ven\u0027s Stock Revamp](https://forum.kerbalspaceprogram.com/threads/92764) uses a hybrid approach: it stores all of it\u0027s own textures and models in it\u0027s own folder, but then uses scripts to rename the originals so the game does waste RAM and time loading them."},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2015-06-27T20:19:38Z","Content":"Ah! I thought my ears were burning.\n\nYou do realize that for your specific example, using KSP-AVC as recommended would solve your entire issue. It\u0027s kinda why a lot of us use it. And it\u0027s a lot easier to have someone who sees an AVC warning just grab the latest FireSpitter vs. deal with the support issues of requiring a separate install and cries of \u0027why do you want me to install biplane parts??!\u0027 \n\nSide note: The only difference in FireSpitter versions from the one you have in Karbonite and the one I just updated a day ago (as I also assist with FireSpitter) is the KSP version.\n\nSo in short, bundling will continue because some of these dependencies (CRP, FireSpitter, CTT, etc.) expect a certain folder. But the nice part is that all of these use KSP-AVC, so there\u0027s no reason to wonder whether you have the current version or not.\n\n- - - Updated - - -\n\nSide note - I do not \u0027force my own FireSpitter\u0027 - I use the one that we all share (and that I help maintain).\n\nSo when KSP-AVC warnd you, you just delete the folder, and dump in a new version. Problem solved."},{"CreatedByName":"almagnus1","CreatedById":78068,"CreatedDateTime":"2015-06-30T01:30:16Z","Content":"Another possible solution to this issue is to essentially sandbox the mods from each other in a way similar to what the Minecraft modders did with the Forge Mod Loader, which is enforce a specific structure of where things are within the mod JARs are located, and refuse to load non-compliant mods. The way this came about in Minecraft, however, was that one of the modders basically decompiled the Minecraft code, and set it up so that development using the Forge Mod Loader greatly simplifies development and loading of mod assets.\n\nUntil some KSP analog for the Forge Mod Loader exists, we\u0027re gonna continue to have this problem (either perceived or actual) of things in Gamedata folders not being right/overwriting/whatever.\n\nThe advantage to this approach is the simplification of modding KSP, as the only mod you absolutely need to install is the loader mod, then you can throw ZIPs/7Zs/RARs/whatver of all of the other mods into a single directory, and then the game structure is created dynamically. It also simplifies support, as the loader mod would be responsible for loading everything else, and you can get extremely accurate information about what is/isn\u0027t loaded because the loader mod would know everything.\n\nThe downside is that the format for the archive must be agreed upon, code written for stuff that may not be possible with KSP, and enough other mods support something like this for it to take off and become a de facto standard.\n\nThen there\u0027s the issue where the old .NET version that the older versions of Unity that KSP is using may not have key parts of the API to make this work easily (or quickly).\n\nIt\u0027s not an easy solution, but as far as the average player is concerned, it would greatly simplify the modding process as something like CKAN would just need to maintain the loader mod and throw mods in a directory, and the loader mod would take care of the rest."},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-06-30T04:45:27Z","Content":"Mods \u0022place files in another mod\u0027s folder\u0022 for two reasons.\n\n1) The mod is a using another mod as a dependency. See Firespitter, every mod that adds a part with a propeller to the game uses it (as far as I am aware). But multiple copies of Firespitter installed lead to problems as well. Therefore the Firespitter Devs say \u0022install here\u0022 and all mods that use Firespitter distribute it so that it installs there and everything works great. This means that the mod using Firespitter \u0022places files in another mod\u0027s folder\u0022 to install Firespitter correctly.\n\n2) To mod another mod. See Realism Overhaul. There are some tweaks that require changing the files in the original mod\u0027s directory to apply so that is how those tweaks are done.\n\nBoth of these are valid use cases and the scope of what mods using these methods can do makes it very much worth the slightly larger installation hassle.\n\nAnd all that hassle makes you do is check date/time stamps when your computer gives you the overwrite file warning. Are the dates different? Then you are installing a different version and you will have to take a couple minutes to check the forums if you have issues running that mod.\n\n@almagnus1: We essentially have that already in KSP, it is the Part Loader (technically just the Loader, but 99% of modding is done in the Parts section). Then ModuleManager allows a mod to interface with KSP and make the changes a mod requires. The BEFORE/FOR/AFTER/NEEDS/FINAL keywords in a ModuleManager script is how dependency across different mods is handled.\n\nSo is it a little more hassle to keep track of this issue? Yes. Is it worth it for the more complex and varied mods in allows us to have? YES!!\n\nD."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-06-30T08:03:34Z","Content":"Calling the JARs of Forge a solution is nearly a joke. Sure they need to be in a specific folder but nothing stops a mod from storing or writing data elsewhere. They exist because java include a native mechanism to easily make jar look like a directory (gross simplification here). That system has the advantage to allow mods to be mostly one file (but most are not) but kills end user customization. \n\n--- Edit---\n\nTo make it clear : Forge is a great API, not a great mod packaging.\n\n------------\n\nAs Diazo said we already have class that handle the loading and we could mod most of them but there is no real need so far. \n\nI am not saying that we have a perfect system but I think it works fine. And we have a good mod manager that handle the hassles and has reactive devs.\n\nIf we want to look for improvement we may want to look into City Skyline. They run Unity like we do and their mod loader allow from hot reloading of dll. This is the kind of things we could use to make dep easier (add version numbers to dll and use magic to have only the last one load)\n\n**Edited \u003Ctime datetime=\u00222015-06-30T08:14:04Z\u0022 title=\u002206/30/2015 08:14  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 30, 2015\u003C/time\u003E by sarbian**"},{"CreatedByName":"almagnus1","CreatedById":78068,"CreatedDateTime":"2015-06-30T16:10:53Z","Content":"Hey, I\u0027m just throwing out a possible way to deal with the issue that the OP is describing, and also clean things up as far as mods go (like building a virtual directory and \u0022extracting\u0022 stuff to it as it\u0027s needed). Is there a better approach?\n\nAnd as far as .NET goes, if we ever get to .NET 4.5, then some of the APIs at this part ot the Framework may be useful towards that end: [https://msdn.microsoft.com/en-us/library/System.IO.Compression(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/System.IO.Compression%28v=vs.110%29.aspx)"}]}