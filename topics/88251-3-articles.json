{"TopicId":88251,"ForumId":34,"TopicTitle":"[0.25] Kerbal Warp Drive! Procedural systems from a seed you choose! v1.1.0, 16 Nov.","CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-10-22T22:26:36Z","PageNum":3,"Articles":[{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-10-27T10:56:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Oafman\u0022 data-cite=\u0022Oafman\u0022\u003E\u003Cdiv\u003EI\u0027m very excited about this ambitious mod. What always stopped me getting Krag\u0027s PF was what I had read about the RAM requirements. Am I right in thinking that, because this is adjusting the existing Kerbol system, rather than generating a bunch of new planets, the RAM usage should not be too high? \u003Cp\u003EIf RAM is manageable I will definitely give this a go.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is correct! At the moment, I\u0027m not generating any new planets. If I ever do generate any planets, I will maintain a \u0022lite\u0022 version which doesn\u0027t have the planet generation, specifically for that purpose.\u003C/p\u003E\u003Cp\u003EFurthermore, all calculations are only done when you jump. I do write to the hard drive in the next update, which might slow down some absolutely ANCIENT computers, but the size of the files are so small 99.99% of people won\u0027t even notice. Even if copying over the persistence files did tax your computer, it would only happen when you jump -- between jumps, KSP will act as normal.\u003C/p\u003E\u003Cp\u003EOne more thing: Should I put in time dilation effects, or should I leave travel to and from instantaneous? It would have to be somewhat toned down from \u0022reality\u0022 (so no 100-year absences from Kerbin), but if time dilation is included it would mean more time would pass in other solar systems while you travel there than the time it takes you to get there.\u003C/p\u003E\u003Cp\u003EIf it were included, it would likely be on the scale of months to years. I\u0027m a bit hesitant about it, since I know it\u0027ll probably screw with times set up with Kerbal Alarm Clock and stuff, but it would depend on how \u0022realistic\u0022 you guys want this to be.\u003C/p\u003E\n"},{"CreatedByName":"Oafman","CreatedById":110386,"CreatedDateTime":"2014-10-27T12:00:20Z","Content":"\n\u003Cp\u003EThanks for confirming the RAM thing. I will create a new KSP folder and give this a go. \u003C/p\u003E\u003Cp\u003EMy thoughts on time dilation are that it should be an aim for the future, but because of how many implications it is bound to have on other stuff (like KAC), maybe look to introduce it when this is all closer to completion? In line with everything else in KSP it would have to be toned down I think.\u003C/p\u003E\n"},{"CreatedByName":"bigbadben","CreatedById":89458,"CreatedDateTime":"2014-10-27T19:33:48Z","Content":"\n\u003Cp\u003Eyeah, I say leave out time dilation for now, simply because of the possibility of multiplayer incorporation of what you\u0027re trying to do.\u003C/p\u003E\n"},{"CreatedByName":"TonyC","CreatedById":95836,"CreatedDateTime":"2014-10-27T22:08:01Z","Content":"\n\u003Cp\u003EI personally vote against the idea of a time dilation system. It seems too illogical to me. Sorry \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Oafman","CreatedById":110386,"CreatedDateTime":"2014-10-28T10:43:21Z","Content":"\n\u003Cp\u003EI had a brief look at this last night, and it worked very well. I warped a couple of times, and each new system generated immediately and looked good. Here\u0027s an icy world in a low solar orbit \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6nzfD6l.png\u0022 alt=\u00226nzfD6l.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EOne issue I ran into was being unable to right-click focus on certain planets and moons on the map screen. I could focus on some but not others; couldn\u0027t work out a pattern but I will try again when I have more time. \u003C/p\u003E\u003Cp\u003EAnother problem was, after warping to a new system, I clicked revert flight, back to the VAB. The next ship I launched appeared directly in orbit around the new system\u0027s star, without going to the launchpad or runway first, and I couldn\u0027t activate or do anything to the ship. Like when you\u0027re time warping. I had crew and power, but had no options in right click menus to activate things; this included the warp option, so I was effectively stuck in this new system, as I could not bring up the \u0027return to kerbol\u0027 button. I reverted flight and tried this a couple more times, with the same result every time. Maybe a temporary solution is to always remember to warp back to Kerbol before reverting flight. \u003C/p\u003E\u003Cp\u003EAside from these niggles, I was very impressed. Warp is practically instantaneous, and there was no appreciable increase in RAM use. So, this is looking good \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Lillz","CreatedById":59592,"CreatedDateTime":"2014-10-28T16:38:01Z","Content":"\n\u003Cp\u003EThis is so cool. Literally thought about coding something similar myself, but I found this instead.\u003C/p\u003E\u003Cp\u003EThat\u0027s good because I barely know how to code.\u003C/p\u003E\u003Cp\u003EIf you ever manage to get procedural generated planets to work as well... I would be so happy.\u003C/p\u003E\n"},{"CreatedByName":"bigbadben","CreatedById":89458,"CreatedDateTime":"2014-10-28T22:00:05Z","Content":"\n\u003Cp\u003Eyeah, revert button\u0027s gonna crash the game, especially if it has flightstate data that conflicts with current seed.\u003C/p\u003E\u003Cp\u003EThat would be up to English Mobster, to take the revert save for kerbol prime, and rename it and stash it away somewhere, and do the same for each different system you visit, so they all have individual revert \u0027type\u0027 saves.\u003C/p\u003E\u003Cp\u003Eor...\u003C/p\u003E\u003Cp\u003E...just jump back to kerbol prime before revertings \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-28T22:03:25Z\u0022 title=\u002210/28/2014 10:03  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 28, 2014\u003C/time\u003E by bigbadben\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-10-29T10:47:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Oafman\u0022 data-cite=\u0022Oafman\u0022\u003E\u003Cdiv\u003EI had a brief look at this last night, and it worked very well. I warped a couple of times, and each new system generated immediately and looked good. Here\u0027s an icy world in a low solar orbit \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cp\u003E\u0026lt;snip\u0026gt;\u003C/p\u003E\u003Cp\u003EOne issue I ran into was being unable to right-click focus on certain planets and moons on the map screen. I could focus on some but not others; couldn\u0027t work out a pattern but I will try again when I have more time. \u003C/p\u003E\u003Cp\u003EAnother problem was, after warping to a new system, I clicked revert flight, back to the VAB. The next ship I launched appeared directly in orbit around the new system\u0027s star, without going to the launchpad or runway first, and I couldn\u0027t activate or do anything to the ship. Like when you\u0027re time warping. I had crew and power, but had no options in right click menus to activate things; this included the warp option, so I was effectively stuck in this new system, as I could not bring up the \u0027return to kerbol\u0027 button. I reverted flight and tried this a couple more times, with the same result every time. Maybe a temporary solution is to always remember to warp back to Kerbol before reverting flight. \u003C/p\u003E\u003Cp\u003EAside from these niggles, I was very impressed. Warp is practically instantaneous, and there was no appreciable increase in RAM use. So, this is looking good \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat last bit is indeed a known bug -- I think it\u0027s fixed now, but I\u0027m not entirely sure. In any event, you can always restart KSP itself and everything will be a-okay again.\u003C/p\u003E\u003Cp\u003EAs for your first question -- does the map view keep zooming further and further out until you hit tab to focus a planet? I\u0027m not sure if that\u0027s a bug I\u0027m introducing in the next version, or if it\u0027s in the stable version.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lillz\u0022 data-cite=\u0022Lillz\u0022\u003E\u003Cdiv\u003EThis is so cool. Literally thought about coding something similar myself, but I found this instead.\u003Cp\u003EThat\u0027s good because I barely know how to code.\u003C/p\u003E\u003Cp\u003EIf you ever manage to get procedural generated planets to work as well... I would be so happy.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m taking a look at procedural planets. It looks like KSP has some sort of noise generator built-in, which I can likely repurpose to generate planet terrain. There\u0027s also a PQS class which I \u003Cem\u003Ethink\u003C/em\u003E handlles terrain generation and many, many different options for it. I honestly have no clue what it does, but I\u0027ll keep looking at other mods that modify terrain to see how they do it and imitate what they have done.\u003C/p\u003E\u003Cp\u003EIn any event, it will probably be a lot of work. Doable, but a lot of work.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bigbadben\u0022 data-cite=\u0022bigbadben\u0022\u003E\u003Cdiv\u003Eyeah, revert button\u0027s gonna crash the game, especially if it has flightstate data that conflicts with current seed.\u003Cp\u003EThat would be up to English Mobster, to take the revert save for kerbol prime, and rename it and stash it away somewhere, and do the same for each different system you visit, so they all have individual revert \u0027type\u0027 saves.\u003C/p\u003E\u003Cp\u003Eor...\u003C/p\u003E\u003Cp\u003E...just jump back to kerbol prime before revertings \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do actually have a solution to this. I have finally gotten persistence to work properly!\u003C/p\u003E\u003Cp\u003EI\u0027ve reverse-engineered the Autosave/Quicksave functionality, and I think I have a general idea of what it does. What little documentation is out there was very helpful, but I still had to do a \u003Cem\u003Elot\u003C/em\u003E of experimentation before I figured out basically how it works. But now I have successfully generated persistence files local to each system! A sattelite in orbit around Duna will no longer be in that orbit once you warp to another system, but when you warp back to Kerbol it will still be there!\u003C/p\u003E\u003Cp\u003EHere\u0027s basically a breakdown of how it works:\u003C/p\u003E\u003Cp\u003E1. Take the active vessel and remove it from the list of vessels. This makes sure that we don\u0027t get cached before warping, thus preventing duplicate ships.\u003C/p\u003E\u003Cp\u003E2. Create a new \u0022blank\u0022 FlightState. This will automatically populate the ProtoVessels used in the persisitence file using our list of vessels. Since we just removed our active vessel from that list, this will effectively be a list of inactive vessels -- vessels which will be remaining behind when we warp.\u003C/p\u003E\u003Cp\u003E3. Save the game, using GamePersistence.SaveGame(). I specify the filename to be \u0026lt;lastseed\u0026gt;_persistent.sfs. This is going to be the last \u0022snapshot\u0022 of the system we are leaving.\u003C/p\u003E\u003Cp\u003E4. Get a list of all vessels except our active vessel and destroy each one. You need to call Game.DestroyVessel() on each one in addition to Vessel.DestroyVesselComponents (). Note that this will not kill crew, and even if it did we\u0027ve already saved our game.\u003C/p\u003E\u003Cp\u003E5. Travel to the new system!\u003C/p\u003E\u003Cp\u003E6. If we do not have a persistence file already for the new system, simply give ourselves another new FlightState. Honestly, I\u0027m not sure if this part is necessary, strictly speaking, but I\u0027m too afraid of breaking things again to play around with it.\u003C/p\u003E\u003Cp\u003E7. If we \u003Cem\u003Edo\u003C/em\u003E have a persistence file already for this system, \u003Cstrong\u003EDO NOT USE THE REGULAR \u0022LOAD\u0022 FUNCTIONS.\u003C/strong\u003E I tried for ages getting them to work, and the only thing I managed to accomplish was deleting all my crafts and turning my active vessel into an asteroid somehow. Instead, we want to selectively load \u003Cem\u003Ejust the crafts\u003C/em\u003E from the persistence file.\u003C/p\u003E\u003Cp\u003E8. To do this, we get the full directory to the persistence file we want to load. Rather than using GamePersistence.Load(), create a new ConfigNode and pass it the full path to the persistence file. It will read all the lines in the persistence file for you and automatically generate a tree of nodes.\u003C/p\u003E\u003Cp\u003E9. Now, we need the root node. If you look in any persistence file, you\u0027ll see things in ALL CAPS. These are the names of a new node. To get to our FlightState, we have to navigate first to the GAME node and then to the FLIGHTSTATE node.\u003C/p\u003E\u003Cp\u003E10. Create a new instance of the FlightState class and pass in the FlightState node and a reference to the current game. This will generate the ProtoVessels for you, but it won\u0027t actually load them into the game itself (that part drove me crazy because I thought it simply wasn\u0027t reading my persistence file correctly).\u003C/p\u003E\u003Cp\u003E11. Iterate over all the ProtoVessels in the FlightState you just created and load them manually with ProtoVessel.Load().\u003C/p\u003E\u003Cp\u003E12. Update the game\u0027s FlightState with your most recent FlightState.\u003C/p\u003E\u003Cp\u003E13. Now that all the vessels are loaded in, you can add your active vessel back to the vessel list.\u003C/p\u003E\u003Cp\u003E14. I make sure at this point that the camera is still focused on the active vessel -- I\u0027m pretty sure that\u0027s redundant at this point, but better safe than sorry.\u003C/p\u003E\u003Cp\u003E15. Save the game over the old persistent.sfs file. Now the persistence file is completely localized to your present system!\u003C/p\u003E\u003Cp\u003EAt the moment I don\u0027t revert back to Kerbol when you go to KSC. That will probably come next. The big problem with that is managing the tracking station -- when I tried to bring the tracking station into all of this I managed to break everything. I do plan to have some way of managing it, but at the moment I have no clue what form that would take. I don\u0027t think I can add pretty new buttons to the tracking station, so it would have to be an ugly GUI window somewhere. Any ideas as to how the tracking station should be handled?\u003C/p\u003E\n"},{"CreatedByName":"Oafman","CreatedById":110386,"CreatedDateTime":"2014-10-29T11:12:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022English Mobster\u0022 data-cite=\u0022English Mobster\u0022\u003E\u003Cdiv\u003EAs for your first question -- does the map view keep zooming further and further out until you hit tab to focus a planet? I\u0027m not sure if that\u0027s a bug I\u0027m introducing in the next version, or if it\u0027s in the stable version.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually I didn\u0027t try tabbing around (i will test later). This was just when I right clicked on planets, then clicked to focus view, and nothing happened. I remained focused elsewhere. I really only had a couple of mins to look at this, so I\u0027ll try to be more thorough later and report back\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022English Mobster\u0022 data-cite=\u0022English Mobster\u0022\u003E\u003Cdiv\u003EI do actually have a solution to this. I have finally gotten persistence to work properly!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis sounds like a very good solution to a tricky problem \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"bigbadben","CreatedById":89458,"CreatedDateTime":"2014-10-29T21:01:25Z","Content":"\n\u003Cp\u003Econgrats on cracking the persistant issue.\u003C/p\u003E\u003Cp\u003EPersonally, I figure just dump it for now. Any modern tracking system cannot see beyond our solar system, anyways. They have a few extrasolar planets identified, but nothing like the info for Sol system. It keeps in line with the exploration mechanic of your mod, and creates less headaches for you.\u003C/p\u003E\n"},{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-10-31T08:58:55Z","Content":"\n\u003Cp\u003ETime for some more explaining of what I\u0027m up to.\u003C/p\u003E\u003Cp\u003ERight now, I\u0027m working on making things revert properly when you return to KSC. Rather than returning to the KSC equivalent in the system you jumped to, as it is currently, you return to the KSC of the Kerbol system. The first step here involved decoupling the Warp logic from the Hyperdrive PartModule itself, which was fairly easy. Reverting to Kerbin was easy as well, as I was able to repurpose a lot of code in the newly-decoupled warp drive. However, for some reason when I went to KSC everything in orbit went screwy. Part of the time I was able to attribute the issue to simply not having an active vessel, but the problems resulting from that have cascaded and resulted in all sorts of fun issues.\u003C/p\u003E\u003Cp\u003EI usually had one of a few problems:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EObject that warped away was still saved to Kerbol when I came back to KSC\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EObject that warped away was removed from Kerbol, but didn\u0027t get saved to its new system upon returning to KSC\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAll spacecraft in orbit around Kerbol were randomly deleted\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAll spacecraft in orbit around Kerbol got randomly duplicated (in the exact same positions they were, leading to massive explosions)\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve been slowly killing these problems, one-by-one, but it seems one of the other problems pops up every time I fix something. I believed I understood how persistence works (and I still think I have the general gist of it). However, I\u0027m getting very inconsistent results with saving and loading, which doesn\u0027t make sense to me.\u003C/p\u003E\u003Cp\u003EThe first bug listed was an easy fix -- remove the active vessel from FlightGlobals.Vessels, rebuild the ProtoVessel cache (by creating a new FlightState), save, delete everything in FlightGlobals.Vessels, create another FlightState, add the active vessel back again, and save once more. However, while the first save worked fine (removing our active vessel from Kerbol orbit), the second didn\u0027t save any vessel at all. Creating a FlightState seems to populate FlightState.protoVessels with all vessels in FlightGlobals.Vessels -- or so I thought. However, although it creates a perfectly good persistence file, the second save doesn\u0027t add any vessels to the flight state and I don\u0027t know why.\u003C/p\u003E\u003Cp\u003EI did fix that issue at one point. However, when I did so I would somehow wipe all of Kerbol\u0027s craft every time I jumped for no apparent reason. Finally, I managed to successfully create a \u0022snapshot\u0022 of Kerbin every time I jumped, but when I returned all the craft would be duplicated for no reason. I only load the craft once, and they are only listed once in the file I\u0027m loading from. All the print statements I use whenever I create a new craft get printed exactly once. However, every single craft got duplicated for no apparent reason.\u003C/p\u003E\u003Cp\u003EI fixed that issue by scanning all the vessels in FlightGlobals every time we entered the Tracking Station or flight mode and deleting any vessel which had a duplicate ID. However, doing this caused the same issue I mentioned earlier where crafts that warp away from Kerbol don\u0027t get saved to their new system. It\u0027s not that I\u0027m deleting them -- right now I am literally saving every single vessel in the system by using Unity\u0027s Object.FindObjectsOfType\u0026lt;T\u0026gt; function. However, for some strange reason the active vessel simply isn\u0027t being saved to the FlightState, even though the FlightState \u003Cem\u003Esays\u003C/em\u003E it should be saved. Here\u0027s what I get in my FlightState:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\tFLIGHTSTATE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tversion = 0.25.0\u003Cbr\u003E\t\tUT = 3105575.30545282\u003Cbr\u003E\t\tactiveVessel = 0\u003Cbr\u003E\t\tmapViewFiltering = -1026\u003Cbr\u003E\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis should have VESSEL tags on the inside, but for some reason it doesn\u0027t and it\u0027s driving me nuts. I\u0027m going to keep punching away at it and seeing if I can fix the problem, but I have to reverse-engineer the entire vessel activate/deactivate logic in order to work out what\u0027s going on (since I believe we can\u0027t decompile the KSP source and look at it under the EULA).\u003C/p\u003E\u003Cp\u003EThis is probably a bit of a confusing post if you don\u0027t have any experience with programming or knowledge of how KSP works, and I apologize for that. It\u0027s a bit frustrating throwing code at the wall and seeing what sticks, but once I do have something working, I\u0027ll see if I can simplify things down a bit and share my knowledge with the community at large to help others playing around with persistence.\u003C/p\u003E\u003Cp\u003EHopefully I\u0027ll get this resolved in the next couple of days and I can move on to other things. A lot of the randomization has been revamped, and I\u0027d like to randomize the radii of planets to give more obvious SOIs.\u003C/p\u003E\u003Cp\u003EI\u0027m thinking about adding in some ModuleManager support for Interstellar, but I want to keep ModuleManager optional if I can to reduce dependencies. I\u0027ll have to see what happens if I reference ModuleManager without having the mod installed -- if it\u0027s possible for me to recover from the error, I\u0027ll probably implement something involving ModuleManager and Interstellar. However, if the error is not recoverable (although I don\u0027t know why that would be the case), it would have to be Interstellar implementing stuff from this mod.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-31T09:10:35Z\u0022 title=\u002210/31/2014 09:10  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 31, 2014\u003C/time\u003E by English Mobster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"PringleMan","CreatedById":1396,"CreatedDateTime":"2014-10-31T15:20:47Z","Content":"\n\u003Cp\u003ESo I have a question.\u003C/p\u003E\u003Cp\u003EDo vessels persist in your alternate solar systems? For example, If I left a probe in orbit around a planet, then warped a mother ship back to kerbol, what happens to the probe left behind? Does it just poof with the system in question?\u003C/p\u003E\u003Cp\u003EBecause the potential here could be ridiculous for extra-kerbolar colonies.\u003C/p\u003E\n"},{"CreatedByName":"TavishThomas","CreatedById":115945,"CreatedDateTime":"2014-10-31T15:48:45Z","Content":"\n\u003Cp\u003Elooking forward to seeing how this develops. hopefully the devs change their mind on new solar systems and can integrate a non warp system so I recreate some concept craft for extrasolar exploration.\u003C/p\u003E\n"},{"CreatedByName":"pxi","CreatedById":78711,"CreatedDateTime":"2014-10-31T16:02:49Z","Content":"\n\u003Cp\u003EThis is the first time I\u0027ve felt the need to trigger the profanity filter.\u003C/p\u003E\u003Cp\u003EThis is fantastic stuff.\u003C/p\u003E\n"},{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-10-31T16:48:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022PringleMan\u0022 data-cite=\u0022PringleMan\u0022\u003E\u003Cdiv\u003ESo I have a question.\u003Cp\u003EDo vessels persist in your alternate solar systems? For example, If I left a probe in orbit around a planet, then warped a mother ship back to kerbol, what happens to the probe left behind? Does it just poof with the system in question?\u003C/p\u003E\u003Cp\u003EBecause the potential here could be ridiculous for extra-kerbolar colonies.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the currently-released version, things don\u0027t persist like that, no. They persist, but they persist across all systems -- they never go away. This was mainly because I wanted to make sure I was protecting people\u0027s save data.\u003C/p\u003E\u003Cp\u003EIn the next update, however, they will do exactly what you described. That\u0027s what I\u0027m working on at the moment. I hope to have it ready by Monday, but no promises.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-31T16:50:23Z\u0022 title=\u002210/31/2014 04:50  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 31, 2014\u003C/time\u003E by English Mobster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bigbadben","CreatedById":89458,"CreatedDateTime":"2014-10-31T21:57:17Z","Content":"\n\u003Cp\u003Ewoohoo!!!!\u003C/p\u003E\n"},{"CreatedByName":"OverloadUT","CreatedById":118121,"CreatedDateTime":"2014-11-05T04:29:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022English Mobster\u0022 data-cite=\u0022English Mobster\u0022\u003E\u003Cdiv\u003EThis should have VESSEL tags on the inside, but for some reason it doesn\u0027t and it\u0027s driving me nuts. I\u0027m going to keep punching away at it and seeing if I can fix the problem, but I have to reverse-engineer the entire vessel activate/deactivate logic in order to work out what\u0027s going on (since I believe we can\u0027t decompile the KSP source and look at it under the EULA).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is a long shot, but it sounds like your issue is with ConfigNodes which are pretty notoriously fickle. Here\u0027s something that I discovered:\u003C/p\u003E\u003Cp\u003EYou cannot serialize an object to a ConfigNode unless it contains a zero-parameter constructor (or no constructors at all). So if the VESSEL is your own object and it has its own custom constructors, try adding in one with zero parameters and see if that helps.\u003C/p\u003E\n"},{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-11-05T05:17:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OverloadUT\u0022 data-cite=\u0022OverloadUT\u0022\u003E\u003Cdiv\u003EThis is a long shot, but it sounds like your issue is with ConfigNodes which are pretty notoriously fickle. Here\u0027s something that I discovered:\u003Cp\u003EYou cannot serialize an object to a ConfigNode unless it contains a zero-parameter constructor (or no constructors at all). So if the VESSEL is your own object and it has its own custom constructors, try adding in one with zero parameters and see if that helps.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESee, the thing is this is the actual Vessel class (or rather, ProtoVessel) that KSP generates when a persistence file is saved. It\u0027s part of the stock game and not a class I\u0027ve created.\u003C/p\u003E\u003Cp\u003EI\u0027ve actually narrowed down what the issue is. I originally saved a \u0022snapshot\u0022 of the last-generated world the moment the KSC scene loaded (in the Awake() method, for those of you who know Unity). That appears to be before KSP loads in the vessels -- so I was taking a snapshot of a game with no vessels (hence the empty space where vessels should be).\u003C/p\u003E\u003Cp\u003EIf I move it to Start(), I get the vessels -- but now I\u0027m saving the vessels from Kerbin again. I\u0027m trying to work out when exactly KSP loads the vessels into the KSC scene so I can reliably manipulate it. I\u0027m considering making a class which has a log of every vessel we\u0027ve ever saved and keeps track of what seed each vessel is in, deleting the vessels that aren\u0027t in the right seed. I\u0027ve also got to seriously clean up my code, as all this experimentation and reverse-engineering has made everything messy.\u003C/p\u003E\u003Cp\u003EIdeally, I\u0027d like to save a snapshot when the flight scene gets \u003Cem\u003Eunloaded\u003C/em\u003E, as opposed to saving one after KSC is loaded. I\u0027m a bit worried about writing to file as the scene closes, however, since I have no control over what gets deleted when. I could try to save a snapshot when half the scene has already been deleted, for example. I\u0027m going to poke around a bit and see if there\u0027s anything I can hook into that\u0027s called before OnDestroy(), but I\u0027m not sure there is.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-05T05:19:53Z\u0022 title=\u002211/05/2014 05:19  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 5, 2014\u003C/time\u003E by English Mobster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"OverloadUT","CreatedById":118121,"CreatedDateTime":"2014-11-05T07:39:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022English Mobster\u0022 data-cite=\u0022English Mobster\u0022\u003E\u003Cdiv\u003EIf I move it to Start(), I get the vessels -- but now I\u0027m saving the vessels from Kerbin again. I\u0027m trying to work out when exactly KSP loads the vessels into the KSC scene so I can reliably manipulate it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou might be looking for OnVesselCreate() which is called every scene load for each vessel in the world.\u003C/p\u003E\u003Cp\u003EThe addon I am working on has been all event tracking so I\u0027ve been mucking with the order of events as well!\u003C/p\u003E\n"},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2014-11-06T06:35:22Z","Content":"\n\u003Cp\u003EOne more thing to add to the list : Saving.\u003C/p\u003E\u003Cp\u003Elike in minecraft where you save when paused.\u003C/p\u003E\n"},{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-11-07T11:31:16Z","Content":"\n\u003Cp\u003EI have some great news! I\u0027ve done it! Everything seems to be working A-OK now.\u003C/p\u003E\u003Cp\u003EWhenever you launch to other star systems, your last system is cached. If the system you are launching to already exists, then the other system\u0027s vessels are loaded.\u003C/p\u003E\u003Cp\u003EThis is mostly due to 2 handy GameEvents (thanks, OverloadUT and Joshwoo69!): onGamePause() and onGameSceneLoadRequested(). Whenever you pause the game or switch scenes, I save the current system to disk. This means when we load the next scene we can just reload Kerbol without needing to worry about saving the last system. Since KSP shouldn\u0027t require many resources while paused, I figured it couldn\u0027t hurt to save the game when we pause. The redundant onGameSceneLoadRequested() is in there just to make sure I cover the event of a rapid unplanned disassembly in-flight, where the player doesn\u0027t necessarily need to open the pause menu.\u003C/p\u003E\u003Cp\u003EI want to make sure that this release is fairly stable before, well, releasing it. I\u0027ve already found a bug which killed all my orbital velocity and sent me crashing into the sun, and I\u0027d rather not repeat it. I also want to make sure my save recovery system works in the event that the game crashes. There is also a bug right now with how far out moons orbit planets -- I tried calculating them using Hill Spheres, and the result was much too large. I also have an issue with orbital periods -- moons presently make a full rotation around their parent every minute or so.\u003C/p\u003E\u003Cp\u003EBoth of these should be easy fixes. Once I\u0027m happy with the results and kill any remaining bugs, I\u0027ll release it to you all. The next version has a lot of improvements, both visible and internal.\u003C/p\u003E\u003Cp\u003EKeep in mind that the planetary RNG system has changed a bit internally, so if you\u0027ve grown attached to a seed it\u0027s going to be completely different when you load the next version. I\u0027m going to try and minimize this effect happening on every release, but if I tweak any random variable or add in any new random stuff it\u0027s going to throw off everything just due to the nature of things.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-07T11:38:01Z\u0022 title=\u002211/07/2014 11:38  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 7, 2014\u003C/time\u003E by English Mobster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TonyC","CreatedById":95836,"CreatedDateTime":"2014-11-07T15:27:06Z","Content":"\n\u003Cp\u003EThis mod is becoming more and more mature !\u003C/p\u003E\u003Cp\u003EI see a great future ahead.\u003C/p\u003E\u003Cp\u003Ev1.0 was nice to test around with. The version you are about to release goes further.\u003C/p\u003E\u003Cp\u003ECongratulations Mob, I support your project.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cem\u003E(in case you didn\u0027t notice, I made some advertisement using my sig..shhh)\u003C/em\u003E\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"PringleMan","CreatedById":1396,"CreatedDateTime":"2014-11-07T15:41:21Z","Content":"\n\u003Cp\u003EMuch excite!\u003C/p\u003E\u003Cp\u003EI have this vision of building an MKS Kolony on some far away star, adding the module from your warp drive to the warp drives from KSPI and having sick-looking warp ships carrying material back and forth!\u003C/p\u003E\n"},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2014-11-08T00:21:02Z","Content":"\n\u003Cp\u003EDoes this break clouds?\u003C/p\u003E\u003Cp\u003EWhat does it do to asteroids?\u003C/p\u003E\u003Cp\u003EKethane?\u003C/p\u003E\u003Cp\u003EORS?\u003C/p\u003E\n"},{"CreatedByName":"English Mobster","CreatedById":92865,"CreatedDateTime":"2014-11-08T00:51:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022_Augustus_\u0022 data-cite=\u0022_Augustus_\u0022\u003E\u003Cdiv\u003EDoes this break clouds?\u003Cp\u003EWhat does it do to asteroids?\u003C/p\u003E\u003Cp\u003EKethane?\u003C/p\u003E\u003Cp\u003EORS?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAsteroids: Cleared when you warp. New asteroids will be generated around the system you jump to. Jumping back to your original system will restore your original asteroids. Think of them as very heavy space stations, since that\u0027s how the game sees them. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EKethane/ORS: Have not tested them yet, to be honest. In theory, they should be unaffected by the warp, since as far as Kethane is concerned an alternate Kerbin is still Kerbin. Kethane doesn\u0027t care (or at least it shouldn\u0027t care) what Kerbin\u0027s orbit is, what Kerbin is named, what its atmosphere is like, etc. All it cares about is that Kerbin is identified as Kerbin. This should also apply to ORS. Is Real Solar System compatible with Kethane/ORS? If it is, this mod should be, too.\u003C/p\u003E\n"}]}