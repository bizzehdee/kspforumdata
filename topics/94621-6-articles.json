{"TopicId":94621,"ForumId":36,"TopicTitle":"[1.0.2] B9 Aerospace | Procedural Parts 0.40 | Updated 09.06.15","CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2014-12-26T22:16:10Z","PageNum":6,"Articles":[{"CreatedByName":"p331083","CreatedById":57783,"CreatedDateTime":"2015-01-07T06:41:31Z","Content":"\n\u003Cp\u003EIssue;\u003C/p\u003E\u003Cp\u003EWings quickly become bugged and not able to attach to anything after a certain amount of deformation. Not only that but entire SPH becomes bugged and I am unable to select or place any other parts. Only fix is to start new but the bug quickly happens again.\u003C/p\u003E\u003Cp\u003E32bit version.\u003C/p\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-07T10:06:42Z","Content":"\n\u003Cp\u003E0.11\u003C/p\u003E\u003Cp\u003EIt was quite unusual to use the new editing approach... seemed quite inconvenient... but a couple minutes later - no problemo at all \u0026amp; totally easy!\u003C/p\u003E\u003Cp\u003EDo not experience severe memory leak with the new editing approach for now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEditing using tweakables, however, still insanely memory leaking... ~6Mb/s\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-07T10:18:27Z\u0022 title=\u002201/07/2015 10:18  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 7, 2015\u003C/time\u003E by Horus\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-07T10:11:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022p331083\u0022 data-cite=\u0022p331083\u0022\u003E\u003Cdiv\u003EIssue;\u003Cp\u003EWings quickly become bugged and not able to attach to anything after a certain amount of deformation. Not only that but entire SPH becomes bugged and I am unable to select or place any other parts. Only fix is to start new but the bug quickly happens again.\u003C/p\u003E\u003Cp\u003E32bit version.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s not enough information, I need to know what other mods you are using, at which particular point they are breaking, whether there are any errors in Alt\u002BF12 -\u0026gt; Debug log window and so on.\u003C/p\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-07T10:14:54Z","Content":"\n\u003Cp\u003EWhen using B9-PCST with new editing approach after editing Material A I receive a message for next item (switched by pressing \u0022J\u0022):\u003C/p\u003E\u003Cp\u003EEditing: Invalid properly ID\u003C/p\u003E\u003Cp\u003EWhich must be Material B settings. Then Material C also shows this message.\u003C/p\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-07T10:22:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Horus\u0022 data-cite=\u0022Horus\u0022\u003E\u003Cdiv\u003EWhen using B9-PCST with new editing approach after editing Material A I receive a message for next item (switched by pressing \u0022J\u0022):\u003Cp\u003EEditing: Invalid properly ID\u003C/p\u003E\u003Cp\u003EWhich must be Material B settings. Then Material C also shows this message.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh yeah, forgot that control surfaces have 9 and not 7 properties, so a check in a certain place was rejecting the last two. Fixed, thanks.\u003C/p\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-07T10:49:31Z","Content":"\n\u003Cp\u003ESeems that B9-PCSA breaks this new editing mode.\u003C/p\u003E\u003Cp\u003ESteps to reproduce:\u003C/p\u003E\u003Cp\u003E1. Create a craft hull\u003C/p\u003E\u003Cp\u003E2. Attach B9-PW\u003C/p\u003E\u003Cp\u003E3. New editing mode popup appears\u003C/p\u003E\u003Cp\u003E4. Attach B9-PCSA\u003C/p\u003E\u003Cp\u003E5. Editing window title becomes \u0022Inactive\u0022 and the message is \u0022Exiting edit mode...\u0022\u003C/p\u003E\u003Cp\u003E6. New editing mode is not working anymore.\u003C/p\u003E\u003Cp\u003EExtra:\u003C/p\u003E\u003Cp\u003E7. Leaving SPH/VAB and entering it again does not fix the problem.\u003C/p\u003E\u003Cp\u003ENo particular errors or warnings in in-game debug log.\u003C/p\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-07T10:57:08Z","Content":"\n\u003Cp\u003EUh, is that happening when you edit procedural wing specifically and create a new part from the catalog that is an all-moving surface specifically? Or is that happening to the wing property menu when any new part is created while editing is in progress? Or is that happening to the property menu of any procedural part with a specific new part created? Or is that happening with any procedural part when any other part is created?\u003C/p\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-07T10:59:47Z","Content":"\n\u003Cp\u003EYes. All parts are dragged from parts catalog only. No parts cloning (with Alt).\u003C/p\u003E\u003Cp\u003EPWings works perfectly. Wing control surface too (not taking textures bug into account).\u003C/p\u003E\u003Cp\u003EOnly all-moving surface breaks the thing. But weirdly... this breaks only after attach-detach-add-remove in conjunction with pwing.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-07T11:02:22Z\u0022 title=\u002201/07/2015 11:02  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 7, 2015\u003C/time\u003E by Horus\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-07T11:06:17Z","Content":"\n\u003Cp\u003EI\u0027m not sure I follow. Editing mode window (one with property hints and \u0022exiting edit mode\u0022 message on exit) never appears on it\u0027s own after just attaching a new part. Have you missed \u0022pressed G while keeping the mouse on B9-PW\u0022 step between steps 2 and 3 from the previous post?\u003C/p\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-07T12:02:54Z","Content":"\n\u003Cp\u003EUploaded video regarding this issue - \u003Ca href=\u0022https://youtu.be/I9MHfyPxZns\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://youtu.be/I9MHfyPxZns\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"AngelLestat","CreatedById":58968,"CreatedDateTime":"2015-01-07T13:00:32Z","Content":"\n\u003Cp\u003EGood Job Bac9, I will try this mod over the previous Procedural Dynamics.\u003C/p\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-07T13:44:59Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EVersion 0.12\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://bitbucket.org/bac9/b9_aerospace_plugins/downloads\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bitbucket.org/bac9/b9_aerospace_plugins/downloads\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAdded new surface type (uniform fill) by exploiting other vertex color channels in the shader - even though new texture types can not be added anymore\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed alternative UI breaking in some detachment scenarios\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPotentially fixed an issue with wing geometry being constructed only after FAR performs vessel checks in the flight scene, which was leading problems like control surfaces stalling when they shouldn\u0027t\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdded value descriptions to material properties in the alternative UI\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed some minor issues\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETo remind, stock tweakable UI stores min/max values in the craft file for some bizarre reason, which means, for example, that you will not able to make control surface cross sections wider than 1m on crafts saved before version 0.11, that you will not be able to use new material type on wings created before 0.12, and so on for any change to types and value limits. My custom UI still works, though, so you can use that to set new values on old crafts if you don\u0027t want to rebuild them, until I figure out a way to override that bizarre tweakable UI behaviour.\u003C/p\u003E\n"},{"CreatedByName":"camlost","CreatedById":57590,"CreatedDateTime":"2015-01-07T16:12:59Z","Content":"\n\u003Cp\u003EThe stall problem remains. How does KSP determine the sequence of OnStart() of multiple partmodules being called ?\u003C/p\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-07T20:02:08Z","Content":"\n\u003Cp\u003EWell, that\u0027s problematic, OnStart is still too late then. I can\u0027t use Awake because it\u0027s only called on the loading screen, same as OnAwake. What else is there to allow setup before FAR startup? I\u0027m not sure if Start event on MonoBehaviours runs before KSP OnStart.\u003C/p\u003E\u003Cp\u003EThere is no way to influence execution order of classes without access to source Unity project settings, so if I want my module to run before FAR every single time, I need a method different from OnStart.\u003C/p\u003E\n"},{"CreatedByName":"Wampa842","CreatedById":85841,"CreatedDateTime":"2015-01-07T23:55:28Z","Content":"\n\u003Cp\u003EHere\u0027s my random idea to solve it. I doubt it\u0027ll be the one that works, though. Also, it\u0027s a very cheap workaround.\u003C/p\u003E\u003Cp\u003EMaybe you could use the Procedural Dynamics method to create an invisible \u0022dummy\u0022 wing that provides the wing data, but is otherwise unnoticeable. You could then use your own procedural wings for visuals only. No lift, no drag, no weight; practically a hologram.\u003C/p\u003E\u003Cp\u003EIt of course means having to handle two objects using two different methods, which means double the required resources and twice the chance of something going haywire.\u003C/p\u003E\u003Cp\u003EI could be wrong, I don\u0027t know how FAR works.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T00:00:38Z\u0022 title=\u002201/08/2015 12:00  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by Wampa842\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2015-01-08T00:58:08Z","Content":"\n\u003Cp\u003EReally like the new UI. At first when you said it was mouse based like pWings I almost died because I HATE that system. But while yours takes a bit to get used to, it is actually really nice and easy to work with. It also has the bonus of not lagging to heck like the tweakable menu.\u003C/p\u003E\n"},{"CreatedByName":"Hektos","CreatedById":84721,"CreatedDateTime":"2015-01-08T02:06:42Z","Content":"\n\u003Cp\u003EHey bac9 (or anyone else really), I am currently using your B9 Aerospace plane parts pack. Would you say that this mod effectively replaces all the wings from that pack? Or would I be losing something by removing all of the wing parts from my B9 install?\u003C/p\u003E\u003Cp\u003EThanks for the opinions and inputs!\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-01-08T02:09:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hektos\u0022 data-cite=\u0022Hektos\u0022\u003E\u003Cdiv\u003EHey bac9 (or anyone else really), I am currently using your B9 Aerospace plane parts pack. Would you say that this mod effectively replaces all the wings from that pack? Or would I be losing something by removing all of the wing parts from my B9 install?\u003Cp\u003EThanks for the opinions and inputs!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe B9 wings have a slightly different look - IMO the B9 PWings don\u0027t quite fit visually with other B9 parts (though with S2 they look alright).\u003C/p\u003E\n"},{"CreatedByName":"kofeyh","CreatedById":39949,"CreatedDateTime":"2015-01-08T03:10:36Z","Content":"\n\u003Cp\u003EThese wings are brilliant; cautiously optimistic memory issues are fixed now, they were pretty bad.\u003C/p\u003E\u003Cp\u003EIs it too forward of me, as to inquire what priority you are placing on heat shield support, or rather, mechanics to work with Deadly Re-Entry, bac9?\u003C/p\u003E\n"},{"CreatedByName":"joebopie","CreatedById":49911,"CreatedDateTime":"2015-01-08T03:11:30Z","Content":"\n\u003Cp\u003Eignore this\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T05:57:42Z\u0022 title=\u002201/08/2015 05:57  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by joebopie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-08T10:49:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022camlost\u0022 data-cite=\u0022camlost\u0022\u003E\u003Cdiv\u003EThe stall problem remains. How does KSP determine the sequence of OnStart() of multiple partmodules being called ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDiscussing it with ferram4 now, and it looks like the issue is not with OnStart order but with fundamentally wrong sequence of actions. Implementation from pWings is incorrect too. The problem is arising from the fact that FAR StartInitialization method computes per-wing occlusion data and not craft-wide occlusion data, so calling it after setup of a particular wing is not correct - you must complete geometry setup of ALL wings in the craft before starting to call that method for every wing in the craft in a separate loop, otherwise checks those wings perform can be potentially done before their eventual neighbors take shape. Looking for a good way to implement that now.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T10:53:55Z\u0022 title=\u002201/08/2015 10:53  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by bac9\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2015-01-08T11:38:51Z","Content":"\n\u003Cp\u003EQuick question : where KSP Api Extensions DLL should be placed ?\u003C/p\u003E\u003Cp\u003EIn KSPApiExt thread author mentions that DLL should be placed along a plugin using it.\u003C/p\u003E\u003Cp\u003ECurrently, is appears to me that this pack has KSPApiExt placed in it\u0027s own folder in GameData, which is not correct ?\u003C/p\u003E\u003Cp\u003EI\u0027ve placed it in same Plugin folder as B9_Aerospace_WingStuff.dll and i did not see any problems.\u003C/p\u003E\u003Cp\u003EOh yes : and kudos for making wing design a fully numerical process, there is no room for error and discrete numerical increments eliminate guesswork.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T11:42:35Z\u0022 title=\u002201/08/2015 11:42  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by fatcargo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-08T11:50:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bac9\u0022 data-cite=\u0022bac9\u0022\u003E\u003Cdiv\u003EDiscussing it with ferram4 now, and it looks like the issue is not with OnStart order but with fundamentally wrong sequence of actions. Implementation from pWings is incorrect too. The problem is arising from the fact that FAR StartInitialization method computes per-wing occlusion data and not craft-wide occlusion data, so calling it after setup of a particular wing is not correct - you must complete geometry setup of ALL wings in the craft before starting to call that method for every wing in the craft in a separate loop, otherwise checks those wings perform can be potentially done before their eventual neighbors take shape. Looking for a good way to implement that now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell... at least you understand what you are saying \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Hope you\u0027ll come to a good way to implement it \u0026amp; fix FAR stalling issue \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EJust playing around with proper wing mechanics \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E And all this thanks to your inspiring \u0022one-weekend-evening-short\u0022 project \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T11:57:34Z\u0022 title=\u002201/08/2015 11:57  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by Horus\u003C/strong\u003E\n\u003Cbr\u003EUPD: getting more tests\n\u003C/span\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-01-08T12:02:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022fatcargo\u0022 data-cite=\u0022fatcargo\u0022\u003E\u003Cdiv\u003EQuick question : where KSP Api Extensions DLL should be placed ?\u003Cp\u003EIn KSPApiExt thread author mentions that DLL should be placed along a plugin using it.\u003C/p\u003E\u003Cp\u003ECurrently, is appears to me that this pack has KSPApiExt placed in it\u0027s own folder in GameData, which is not correct ?\u003C/p\u003E\u003Cp\u003EI\u0027ve placed it in same Plugin folder as B9_Aerospace_WingStuff.dll and i did not see any problems.\u003C/p\u003E\u003Cp\u003EOh yes : and kudos for making wing design a fully numerical process, there is no room for error and discrete numerical increments eliminate guesswork.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EKSP will load it correctly either way, - as far as I understand, that advice is only relevant for mods that fork KSP API Extensions functionality, and I\u0027m not doing that, only using custom tweakable types.\u003C/p\u003E\n"},{"CreatedByName":"Horus","CreatedById":99705,"CreatedDateTime":"2015-01-08T12:07:44Z","Content":"\n\u003Cp\u003EI don\u0027t think it\u0027s the issue of your mod, but I\u0027ve noticed that when I detached a created \u0026amp; fine-tuned wing with assigned action groups to, say, flaps - the action group will not work for the second wing when the wing is re-attached with SPH symmetry.\u003C/p\u003E\u003Cp\u003EJust a notice - always re-check AG.\u003C/p\u003E\u003Cp\u003EA funny notice: when activating (in SPH while constructing the wings) both spoiler \u0026amp; flaps for a control surface - the flap opens/closes really faster then necessary. Even when spoiler is not activated \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E This is FAR \u0022feature\u0022 I presume.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T12:20:59Z\u0022 title=\u002201/08/2015 12:20  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by Horus\u003C/strong\u003E\n\u003C/span\u003E\n"}]}