{"TopicId":16210,"ForumId":29,"TopicTitle":"Get all Active Engines?","CreatedByName":"rwhwilliam","CreatedById":12174,"CreatedDateTime":"2012-08-06T15:21:55Z","PageNum":1,"Articles":[{"CreatedByName":"rwhwilliam","CreatedById":12174,"CreatedDateTime":"2012-08-06T15:21:55Z","Content":"\n\u003Cp\u003Esorry if this has been asked 1000 times, but I can\u0027t find it via search \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EHow can I best go through and get a list of all the engines that are currently \u0027firing\u0027 ?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-08-06T15:40:27Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (part p in vessel.parts)\u003Cbr\u003E{\u003Cbr\u003Eif(p is LiquidEngine \u0026amp;\u0026amp; p.State == ACTIVE)\u003Cbr\u003E//Add to list\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis might be wrong, just wrote it down in here.\u003C/p\u003E\n"},{"CreatedByName":"l00","CreatedById":11431,"CreatedDateTime":"2012-08-06T18:39:27Z","Content":"\n\u003Cp\u003EHi!\u003C/p\u003E\u003Cp\u003EI do it like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eint NumberOfActiveEngines=0;\u003Cbr\u003E\u003Cbr\u003Efor (int i = 0; i \u0026lt;= PART.vessel.parts.Count() - 1; i\u002B\u002B)\u003Cbr\u003E    {\u003Cbr\u003E    if ((part.vessel.parts.ElementAt(i).GetType().Name == \u0022LiquidFuelEngine\u0022)\u0026amp;\u0026amp;(PART.vessel.parts.ElementAt(i).State==PartStates.ACTIVE))\u003Cbr\u003E        {\u003Cbr\u003E        uint active=0;\u003Cbr\u003E        foreach (FXGroup fx in part.vessel.parts.ElementAt(i).fxGroups)//in 0.15, l.engines no longer deactivate when they run out of fuel. This checkes if they emit particles. If so, they are active running engines.\u003Cbr\u003E            {\u003Cbr\u003E            foreach (UnityEngine.GameObject gfx in fx.fxEmitters)\u003Cbr\u003E                {\u003Cbr\u003E                if(gfx.renderer.particleEmitter.emit) active\u002B\u002B;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E        if (active\u0026gt;0)//just in case an engine has more than one emitters...\u003Cbr\u003E            {\u003Cbr\u003E            NumberOfActiveEngines\u002B\u002B;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYes, it\u0027s quite a mess, but at least it works \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"rwhwilliam","CreatedById":12174,"CreatedDateTime":"2012-08-07T13:27:16Z","Content":"\n\u003Cp\u003Ea similar question, how do I properly set thrust of engines to what I want? I figure this is partially a math phail on me, and partially me not knowing how all the engine variables work... below mainThrust is the 1 - 100 value I have the ability to set via a UI slider:\u003C/p\u003E\u003Cp\u003Eforeach (LiquidFuelEngine engine in engines)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E Vector3d v = engine.thrustVector.normalized;\u003C/p\u003E\u003Cp\u003E float val = engine.maxThrust*(mainThrust/100);\u003C/p\u003E\u003Cp\u003E v.Scale(new Vector3d(val, val, val));\u003C/p\u003E\u003Cp\u003E engine.thrustVector = v;\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\n"}]}