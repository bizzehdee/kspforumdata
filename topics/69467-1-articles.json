{"TopicId":69467,"ForumId":29,"TopicTitle":"Terrain Class Color Information","CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-04-15T20:45:37Z","PageNum":1,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-04-15T20:45:37Z","Content":"\n\u003Cp\u003EHey Guys!\u003C/p\u003E\u003Cp\u003EI have a feeling that only Squad will be able to answer this, but does anyone have any info on fetching the terrain color information?\u003C/p\u003E\u003Cp\u003EI\u0027m working on replacing the terrain and ocean shaders with something a tad more advanced, but I need the terrain class colors to be able to use the correct texture for the area. If I don\u0027t have them, I\u0027ll just have to end up guessing the colors used. I can\u0027t get them from the material unfortunately as I don\u0027t have the name for the shader property. \u003C/p\u003E\u003Cp\u003EAnyone have any info on this?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-04-16T00:11:55Z","Content":"\n\u003Cp\u003EYou could try fecthing the terrain texture directly and reading the pixels? Might want to take a look at TextureReplacer, you can probably get the textures by the same way you change them.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-04-16T00:30:57Z","Content":"\n\u003Cp\u003EDon\u0027t think terrains *have* colors set in the shader; they\u0027re assigned by PQSMod, either colormap or landclass. See \u003Ca href=\u0022https://www.dropbox.com/s/x95wxmnbd7metxs/Components.zip\u0022 rel=\u0022external nofollow\u0022\u003Ethis dump of components of PQSs ZRM made.\u003C/a\u003E. The shader just modifies those colors (and only in brightness), AFAIK.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-04-16T01:06:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EYou could try fecthing the terrain texture directly and reading the pixels? Might want to take a look at TextureReplacer, you can probably get the textures by the same way you change them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo I have debugged the PQS terrain mesh, and the only thing item available per-vertex is the color of the vertex, given that the terrain also uses land classes and textures for them, I assume it uses the color to determine what texture to use. Hence, I need a way to get those colors to mimic what the existing terrain shader does.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EDon\u0027t think terrains *have* colors set in the shader; they\u0027re assigned by PQSMod, either colormap or landclass. See \u003Ca href=\u0022https://www.dropbox.com/s/x95wxmnbd7metxs/Components.zip\u0022 rel=\u0022external nofollow\u0022\u003Ethis dump of components of PQSs ZRM made.\u003C/a\u003E. The shader just modifies those colors (and only in brightness), AFAIK.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAH! I think that is what I\u0027m looking for. I\u0027ll have to see if there is some connection to the textures used. If not, this is basically the next best thing. Thanks!\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-04-19T01:35:06Z","Content":"\n\u003Cp\u003ESo I eventually figured it out. There are only two detail textures. One for mountains, one for everything else. Looks like it uses the normal to lerp between the two.\u003C/p\u003E\n"}]}