{"TopicId":36371,"ForumId":34,"TopicTitle":"[1.2] Procedural Fairings 3.20 (November 8)","CreatedByName":"e-dog","CreatedById":73796,"CreatedDateTime":"2013-07-08T23:34:56Z","PageNum":81,"Articles":[{"CreatedByName":"Spartan-S63","CreatedById":69925,"CreatedDateTime":"2014-07-19T14:24:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bizz Keryear\u0022 data-cite=\u0022Bizz Keryear\u0022\u003E\u003Cdiv\u003EA little off topic: Since KSP x64 also has a memory leak .. uses about twice the amount of ram with less mods than X86 does ... I consider it as dead and stick to X86.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs that memory leak confirmed? Because if Squad used 64 bit data types in the 64 bit version of the game, everything checks out because the data types are larger in size. The rule of thumb is that a 64 bit program will almost always use more RAM than the 32 bit counterpart because of the technical details of 32 vs 64 bit memory addressing.\u003C/p\u003E\n"},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2014-07-19T15:20:55Z","Content":"\n\u003Cp\u003ESo how are people bypassing zero decouple force? Is there a way to attatch sepatrons to the fairings?\u003C/p\u003E\n"},{"CreatedByName":"Shiv","CreatedById":112596,"CreatedDateTime":"2014-07-19T15:22:06Z","Content":"\n\u003Cp\u003EI\u0027ve just been shaking them off. Rumor has it that seperatrons do attach though (perhaps at the base) but I\u0027ve not tried it myself.\u003C/p\u003E\n"},{"CreatedByName":"chrt","CreatedById":38723,"CreatedDateTime":"2014-07-19T16:04:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Motokid600\u0022 data-cite=\u0022Motokid600\u0022\u003E\u003Cdiv\u003ESo how are people bypassing zero decouple force? Is there a way to attatch sepatrons to the fairings?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBy decoupling the fairing outside of the atmosphere, when the rocket is not under acceleration, and waiting for them to fall away before resuming thrust.\u003C/p\u003E\n"},{"CreatedByName":"Rybec","CreatedById":76947,"CreatedDateTime":"2014-07-19T16:19:27Z","Content":"\n\u003Cp\u003EYou can always put a little spin on your rocket before detaching as well.\u003C/p\u003E\n"},{"CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2014-07-19T18:42:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Spartan-S63\u0022 data-cite=\u0022Spartan-S63\u0022\u003E\u003Cdiv\u003EIs that memory leak confirmed? Because if Squad used 64 bit data types in the 64 bit version of the game, everything checks out because the data types are larger in size. The rule of thumb is that a 64 bit program will almost always use more RAM than the 32 bit counterpart because of the technical details of 32 vs 64 bit memory addressing.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s complete nonsense, please don\u0027t spew false information about things you don\u0027t know. The size difference between 32-bits and 64-bits comes from the availability of 64-bit words, which translates directly to larger registers. Now, for \u003Cem\u003Edata\u003C/em\u003E nothing really changes. 32-bit datatypes \u003Cstrong\u003Eremain\u003C/strong\u003E to be 32-bits in size. Hell, even on an 8-bit or 128-bit platform they would still be the same size. I would expect unity\u0027s internal data structures to use a bit more memory (64-bit pointers, double the space usage). Textures, sounds, meshes and other assets will use the same amount of memory. A 32-bit PNG (24-bit color, 8-bit alpha) will never use more memory, the only thing that uses more memory is the pointer which holds the virtual memory location for the slab of memory it resides on which in this case is a 4-byte increase.\u003C/p\u003E\u003Cp\u003Etl;dr version: You are wrong, more addressing bits does not directly increase memory usage. Just storing addressing bits takes more memory.\u003C/p\u003E\n"},{"CreatedByName":"e-dog","CreatedById":73796,"CreatedDateTime":"2014-07-19T18:46:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Etl;dr version: You are wrong, more addressing bits does not directly increase memory usage. Just storing addressing bits takes more memory.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, 64-bit \u003Cstrong\u003Ecode\u003C/strong\u003E is usually larger, and since languages like C# use a lot of object addressing, there are a lot of pointers that become 64-bit vs 32-bit, so there\u0027s increase in memory needed when switching to 64-bit.\u003C/p\u003E\n"},{"CreatedByName":"rynak","CreatedById":115092,"CreatedDateTime":"2014-07-19T19:26:43Z","Content":"\n\u003Cp\u003EYeah, but unless the compiled code is a bloated piece of *censoredbadword* , burried under a mountain of dependencies (read: a lot of software nowadays), code really will not be using up much memory. It\u0027s data and logistics/organization (ESPECIALLY that), which eats up most of the memory budget.\u003C/p\u003E\u003Cp\u003EPeople seem to think that most of the memory that KSP uses is textures. I thought so as well.... after all, else its memory usage would just be ridiculous - unity can\u0027t be THAT bad, riight?\u003C/p\u003E\u003Cp\u003EActually, apparently it really is that bad. I\u0027ve spend hundreds of hours by now hand optimizing all the textures, sometimes actually tweaking them in photoshop to look better at lower resolutions, so that smaller sizes are possible. Uncompressed, i by now got my texture usage down to no more than 150mb! Yes, uncompressed - not PNG or such. Oh, i know, GPU\u0027s use an even more wasteful format to operate on them - might be, but surely KSP won\u0027t store them in RAM in that format, right? Only the GPU will do that in VRAM. So: It should make no difference to RAM usage.\u003C/p\u003E\u003Cp\u003EAnd yet, how much memory does my 32bit KSP use? About 1000mb.\u003C/p\u003E\u003Cp\u003EWhere does all that memory go? Because it ain\u0027t textures. I\u0027d say it\u0027s a combination of goddamn C#/Mono, Unity and KSP\u0027s own data structures. So in short, even on 32bit, KSP will use up about 700-800mb of memory, before even accounting for textures. Now, what if a lot of the data stored in that memory, are pointers? Endless amounts of BSTs, hashtables or even linked lists? Because you see, if yes then a switch to 64bit would double the size of all those structs.\u003C/p\u003E\u003Cp\u003EBottom line: Welcome to 64bit. And if you\u0027re now gonna say \u0022But! 64bit also is faster!\u0022, then i\u0027ll tell you a very uncomfortable story about what exactly makes 64bit-mode on x86 faster.... hint: It\u0027s not 64bit...... in fact, there isn\u0027t even a reason why it couldn\u0027t work in 32bit-mode too.... but AMD/Intel needed a justification to make you buy all new PCs and operating systems. Speaking of which: The memory limitation of 2GB also is artificial - x86-32bit can actually address more, and windowsXP and 2003 even supported it! But it was by default disabled, so that people think they have no choice but to buy 64bit OSes.\u003C/p\u003E\n"},{"CreatedByName":"Nereid","CreatedById":68815,"CreatedDateTime":"2014-07-19T19:35:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022e-dog\u0022 data-cite=\u0022e-dog\u0022\u003E\u003Cdiv\u003EActually, 64-bit \u003Cstrong\u003Ecode\u003C/strong\u003E is usually larger, and since languages like C# use a lot of object addressing, there are a lot of pointers that become 64-bit vs 32-bit, so there\u0027s increase in memory needed when switching to 64-bit.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis difference should be negligible. I don\u0027t believe that there is some kind of confirmation of a memory leak. I think some have just seen the memory usage going up. But this is no confirmation for a memory leak in a language like C# or Java. They are dependent on a garbage collector and until the garbage collector doesn\u0027t free memory, ram usage goes up. Pure memory leaks like in C\u002B\u002B are not possible in languages like C# or Java, because there is no code for freeing memory. There is a similar effect, caused by programming bugs; most of them are caused bis lists or other containers that are not used correctly and keep references of unused data forever (and prevents the GC from deleting it) or because resources are not deallocated in the finally block (the destructor in C# works different than in C\u002B\u002B; in C\u002B\u002B a programmer often uses RAII, in Java or C# RAII is not that easy to implement and should be avoided).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-19T19:58:21Z\u0022 title=\u002207/19/2014 07:58  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 19, 2014\u003C/time\u003E by Nereid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-20T00:58:52Z","Content":"\n\u003Cp\u003Erynak: so you mean you\u0027ve exported all the multiple gigabytes of SQUAD textures from the KSP_Data folder and resized them too?\u003C/p\u003E\u003Cp\u003EDon\u0027t think that all the textures KSP uses are in GameData. Where do you think the planet textures come from, for example?\u003C/p\u003E\n"},{"CreatedByName":"OwDoge","CreatedById":115764,"CreatedDateTime":"2014-07-20T02:11:58Z","Content":"\n\u003Cp\u003EI am no longer able to get Procedural Fairings to work, the \u0022procedural\u0022 part now disappears in x64KSP and x32KSP. Also, when attaching the cone or eggshaped fairings, they do not resize.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://oi62.tinypic.com/2r5qg6b.jpg\u0022 alt=\u00222r5qg6b.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso, why are you all arguing memory leaks on this page? Take it elsewhere, this is a dev form for Procedural Fairings, grow up a little.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T10:24:54Z\u0022 title=\u002207/20/2014 10:24  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by OwDoge\u003C/strong\u003E\n\u003Cbr\u003EEdit: Confirmed in x32 as well.\n\u003C/span\u003E\n"},{"CreatedByName":"lammatt","CreatedById":21777,"CreatedDateTime":"2014-07-20T02:27:58Z","Content":"\n\u003Cp\u003Ethe ejection force is way too weak,\u003C/p\u003E\u003Cp\u003Ecan anyone tell me where in the .cfg governs that?\u003C/p\u003E\n"},{"CreatedByName":"tygoo7","CreatedById":57345,"CreatedDateTime":"2014-07-20T02:29:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lammatt\u0022 data-cite=\u0022lammatt\u0022\u003E\u003Cdiv\u003Ethe ejection force is way too weak,\u003Cp\u003Ecan anyone tell me where in the .cfg governs that?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIIRC decoupler force does not work in 64-bit. That\u0027s for all decouplers.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-07-20T02:32:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tygoo7\u0022 data-cite=\u0022tygoo7\u0022\u003E\u003Cdiv\u003EIIRC decoupler force does not work in 64-bit. That\u0027s for all decouplers.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eit works sometimes. But mostly it doesn\u0027t\u003C/p\u003E\n"},{"CreatedByName":"ola","CreatedById":82138,"CreatedDateTime":"2014-07-20T08:16:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OwDoge\u0022 data-cite=\u0022OwDoge\u0022\u003E\u003Cdiv\u003EI am no longer able to get Procedural Fairings to work, the \u0022procedural\u0022 part now disappears in x64KSP. Also, when attaching the cone or eggshaped fairings, they do not resize.\u003Cp\u003EAlso, why are you all arguing memory leaks on this page? Take it elsewhere, this is a dev form for Procedural Fairings, grow up a little.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m seeing this on a Mac as well.\u003C/p\u003E\n"},{"CreatedByName":"rynak","CreatedById":115092,"CreatedDateTime":"2014-07-20T08:22:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Erynak: so you mean you\u0027ve exported all the multiple gigabytes of SQUAD textures from the KSP_Data folder and resized them too?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGood catch!\u003C/p\u003E\u003Cp\u003EThough gigabytes is an exaggeration - unless ALL those \u0022assets\u0022 are JPEGs.\u003C/p\u003E\u003Cp\u003EAnyways, as others said, this is kinda of topic, so stopping now.\u003C/p\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2014-07-20T08:57:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tygoo7\u0022 data-cite=\u0022tygoo7\u0022\u003E\u003Cdiv\u003EIIRC decoupler force does not work in 64-bit. That\u0027s for all decouplers.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you happen to remember where you heard that?\u003C/p\u003E\n"},{"CreatedByName":"Nereid","CreatedById":68815,"CreatedDateTime":"2014-07-20T09:12:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003Eit works sometimes. But mostly it doesn\u0027t\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn other words: It doesn\u0027t work. You would not call a car that can drive sometimes but most often refuses to start, \u0022working\u0022 or \u0022usable\u0022 in any way.\u003C/p\u003E\u003Cp\u003EIf I would tell my customers that they just have to try a feature it more often, because it will work sometimes, I surely would get a defect for this and they would not accept a release if a important part is broken. And yes, \u0022broken\u0022 is exactly the right term for this.\u003C/p\u003E\u003Cp\u003EBut no complaint. Squad should now know about this, KSP is still alpha and if anybody wants to use it regardless of this bug, its ok. This early release of the 64 bit version raises chances that such important bugs are solved early.\u003C/p\u003E\n"},{"CreatedByName":"Torham234","CreatedById":58574,"CreatedDateTime":"2014-07-20T09:13:11Z","Content":"\n\u003Cp\u003EDoes this still work in KSP 32 bit?\u003C/p\u003E\n"},{"CreatedByName":"ola","CreatedById":82138,"CreatedDateTime":"2014-07-20T09:27:18Z","Content":"\n\u003Cp\u003EPlease ignore if you\u0027re not a developer-minded person. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI made it work by recompiling against the new KSPAPIExtensions. I\u0027m about to create a pull request for a Makefile.\u003C/p\u003E\n"},{"CreatedByName":"tygoo7","CreatedById":57345,"CreatedDateTime":"2014-07-20T09:27:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Torham234\u0022 data-cite=\u0022Torham234\u0022\u003E\u003Cdiv\u003EDoes this still work in KSP 32 bit?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m pretty sure it does.\u003C/p\u003E\n"},{"CreatedByName":"smart013","CreatedById":106088,"CreatedDateTime":"2014-07-20T10:09:54Z","Content":"\n\u003Cp\u003EHi there. So, i\u0060m using right now 32bit KSP, updated all and everything that was mentioned here and other places to be needed to update for PF to and tweakscale work. But whatever I do, i cant get the fairings to open (relase, eject, whatever the right term is) after i change the size with tweakscale, and the payload (every payload i tested) is stuck inside. \u003C/p\u003E\u003Cp\u003EEDIT: ok, it seems to be more complicated. Sometimes it works, and i get the two separator actions in the staging, sometimes i dont get any of that. Strange.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T10:29:33Z\u0022 title=\u002207/20/2014 10:29  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by smart013\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FlexGunship","CreatedById":32705,"CreatedDateTime":"2014-07-20T13:22:51Z","Content":"\n\u003Cp\u003E========== OUTPUTING STACK TRACE ==================\u003C/p\u003E\u003Cp\u003E(0x0000000103DF0000) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x000000006D37FA8C) (Mono JIT code): (filename not available): Keramzit.PayloadScan:addPayload (UnityEngine.Collider) \u002B 0x46c (000000006D37F620 000000006D37FE07) [00000000023A4D48 - Unity Root Domain] \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x000000006D37F019) (Mono JIT code): (filename not available): Keramzit.ProceduralFairingBase:scanPayload () \u002B 0x379 (000000006D37ECA0 000000006D37F0E2) [00000000023A4D48 - Unity Root Domain] \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x000000006D37C1C5) (Mono JIT code): (filename not available): Keramzit.ProceduralFairingBase:recalcShape () \u002B 0xe5 (000000006D37C0E0 000000006D37EC14) [00000000023A4D48 - Unity Root Domain] \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x000000006D37C076) (Mono JIT code): (filename not available): Keramzit.ProceduralFairingBase:Update () \u002B 0xa6 (000000006D37BFD0 000000006D37C0A4) [00000000023A4D48 - Unity Root Domain] \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x00000000042372DB) (Mono JIT code): (filename not available): (wrapper runtime-invoke) object:runtime_invoke_void__this__ (object,intptr,intptr,intptr) \u002B 0x6b (0000000004237270 000000000423734A) [00000000023A4D48 - Unity Root Domain] \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x000007FEDDE536CA) (mono): (filename not available): mono_set_defaults \u002B 0x2b8e\u003C/p\u003E\u003Cp\u003E(0x000000000B1C6FA8) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x00000000FFFFFFFF) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003C/p\u003E\u003Cp\u003E(0x00000000023A4D48) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003C/p\u003E\u003Cp\u003E========== END OF STACKTRACE ===========\u003C/p\u003E\u003Cp\u003EI got this in the output_log after updating RealCutes this morning (was working with it before).\u003C/p\u003E\n"},{"CreatedByName":"RoboRay","CreatedById":46556,"CreatedDateTime":"2014-07-20T13:36:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022chaos_forge\u0022 data-cite=\u0022chaos_forge\u0022\u003E\u003Cdiv\u003EDo you happen to remember where you heard that?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is no need to have \u0022heard that\u0022... just try a stock decoupler in x64. The lack of ejection force should be obvious.\u003C/p\u003E\n"},{"CreatedByName":"Tangle","CreatedById":66808,"CreatedDateTime":"2014-07-20T14:01:07Z","Content":"\n\u003Cp\u003EHmmm. I\u0027m still getting ejection force perfectly.\u003C/p\u003E\n"}]}