{"TopicId":66398,"ForumId":36,"TopicTitle":"[WIP] Loading textures only as required","CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-03-21T14:47:56Z","PageNum":3,"Articles":[{"CreatedByName":"TomatoSoup","CreatedById":59394,"CreatedDateTime":"2014-03-25T02:44:41Z","Content":"\n\u003Cp\u003EI\u0027m not sure how possible this is, but could there be a companion program to this that the unused textures are loaded into such that your plugin can ask it for the textures? Basically, a hacky way to keep them in RAM without exceeding 3.5gb on KSP\u0027s thread so it doesn\u0027t keep accessing the harddrive.\u003C/p\u003E\n"},{"CreatedByName":"sidfu","CreatedById":70409,"CreatedDateTime":"2014-03-25T02:51:05Z","Content":"\n\u003Cp\u003Esigh still don get it its not picking up all the textures for example with the mods u have installed its only catching 800 of 1700 textures.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-03-25T02:53:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TomatoSoup\u0022 data-cite=\u0022TomatoSoup\u0022\u003E\u003Cdiv\u003EI\u0027m not sure how possible this is, but could there be a companion program to this that the unused textures are loaded into such that your plugin can ask it for the textures? Basically, a hacky way to keep them in RAM without exceeding 3.5gb on KSP\u0027s thread so it doesn\u0027t keep accessing the harddrive.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECould be done easily: \u003Ca href=\u0022http://forum.unity3d.com/threads/17488-Start-a-external-process\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.unity3d.com/threads/17488-Start-a-external-process\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-03-25T03:16:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sidfu\u0022 data-cite=\u0022sidfu\u0022\u003E\u003Cdiv\u003Esigh still don get it its not picking up all the textures for example with the mods u have installed its only catching 800 of 1700 textures.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHuh? The purpose of this \u003Cem\u003Eis\u003C/em\u003E to only load textures when and if they are required...\u003C/p\u003E\u003Cp\u003ESo yes, if you have mods that add up to 1700 textures and you have a craft that requires only 800 of those to be loaded, the mod\u0027s gonna load only those 800...\u003C/p\u003E\n"},{"CreatedByName":"sidfu","CreatedById":70409,"CreatedDateTime":"2014-03-25T06:20:52Z","Content":"\n\u003Cp\u003Ewhat i mean is that the mod is only seeing 800 textures where as my total is 1700.\u003C/p\u003E\u003Cp\u003Ewhen u start game it should be 0/(ever how many textures u have) for me it should be 0/1700 but its not its 0/871 which means the mod isnt seeing all the textures\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-03-25T11:27:56Z","Content":"\n\u003Cp\u003E@Non-Windows\u003C/p\u003E\u003Cp\u003EYes, one bigger problem is DirectX and the way its currently written doesn\u0027t make it easy to provide an OpenGL version as well. I hope there will be time to do so, but last time i checked Steams HW stats (currently down) Windows was by far the most frequent used gaming system, so thats where my priorities are for now. Btw, next version will use net4.0 instead of 4.5, to support WinXP as well.\u003C/p\u003E\u003Cp\u003E@sidfu / LOD does not manage all textures / non-part-textures like planets\u003C/p\u003E\u003Cp\u003EIt only handles part textures! To load and unload textures this mod have to know when textures are used. It currently does so by tracking vessels in flight / parts in editor. For anything else we would need logic to load and unload those textures. For parts it currently uses a not-that-smart directory based heuristic.\u003C/p\u003E\u003Cp\u003EFeel free to share your KSP.log, if you think LOD should manage more textures. It currently logs all textures it doesn\u0027t managed (search for \u0022REM_IMG:\u0022) so we can check what it misses and what we could/should improve.\u003C/p\u003E\u003Cp\u003E@changing texture quality\u003C/p\u003E\u003Cp\u003ENever used that feature, thus never considered it when working on LOD. Will add it to the todo list, but with a lower priority.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EHoly Crud! You just gave me a BRILLIANT idea! All this time, I\u0027ve been re-loading textures already loaded by KSP. There is no reason why I couldn\u0027t load up the TextureDB with my cached textures first right!? This could speed up loading time tremendously!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThievery! But seriously, it will be interesting how you do that without making the game appear to be crashed for a long time^^\u003C/p\u003E\u003Cp\u003E@BananaDealer\u003C/p\u003E\u003Cp\u003EAny idea what finally solved your problem? In case others have the same issue...\u003C/p\u003E\u003Cp\u003E@Bloodbunny\u003C/p\u003E\u003Cp\u003EThanks, il\u0027ll have a look.\u003C/p\u003E\u003Cp\u003E@TomatoSoup\u003C/p\u003E\u003Cp\u003EDo you have problems with this mod accessing your harddrive? It shouldn\u0027t influence your game and only take slightly longer, so creating sth like that doesn\u0027t really seem worth the effort for me for now. Apart from that use current window versions (8 for sure, duno about 7) unused RAM to cache frequently used file, so the physical drive might not be used anyway.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-25T11:38:48Z\u0022 title=\u002203/25/2014 11:38  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 25, 2014\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MK3424","CreatedById":19932,"CreatedDateTime":"2014-03-25T11:50:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EThievery! But seriously, it will be interesting how you do that without making the game appear to be crashed for a long time^^\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, thought of that as well, then he should at least credit your work.\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-03-25T13:25:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E@BananaDealer\u003C/p\u003E\u003Cp\u003EAny idea what finally solved your problem? In case others have the same issue...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot a clue... Munfry is tossing around his crazy space noodle theories again...\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-03-25T14:20:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E@Non-Windows\u003Cp\u003EYes, one bigger problem is DirectX and the way its currently written doesn\u0027t make it easy to provide an OpenGL version as well. I hope there will be time to do so, but last time i checked Steams HW stats (currently down) Windows was by far the most frequent used gaming system, so thats where my priorities are for now. Btw, next version will use net4.0 instead of 4.5, to support WinXP as well.\u003C/p\u003E\u003Cp\u003E@sidfu / LOD does not manage all textures / non-part-textures like planets\u003C/p\u003E\u003Cp\u003EIt only handles part textures! To load and unload textures this mod have to know when textures are used. It currently does so by tracking vessels in flight / parts in editor. For anything else we would need logic to load and unload those textures. For parts it currently uses a not-that-smart directory based heuristic.\u003C/p\u003E\u003Cp\u003EFeel free to share your KSP.log, if you think LOD should manage more textures. It currently logs all textures it doesn\u0027t managed (search for \u0022REM_IMG:\u0022) so we can check what it misses and what we could/should improve.\u003C/p\u003E\u003Cp\u003E@changing texture quality\u003C/p\u003E\u003Cp\u003ENever used that feature, thus never considered it when working on LOD. Will add it to the todo list, but with a lower priority.\u003C/p\u003E\u003Cp\u003EThievery! But seriously, it will be interesting how you do that without making the game appear to be crashed for a long time^^\u003C/p\u003E\u003Cp\u003E@BananaDealer\u003C/p\u003E\u003Cp\u003EAny idea what finally solved your problem? In case others have the same issue...\u003C/p\u003E\u003Cp\u003E@Bloodbunny\u003C/p\u003E\u003Cp\u003EThanks, il\u0027ll have a look.\u003C/p\u003E\u003Cp\u003E@TomatoSoup\u003C/p\u003E\u003Cp\u003EDo you have problems with this mod accessing your harddrive? It shouldn\u0027t influence your game and only take slightly longer, so creating sth like that doesn\u0027t really seem worth the effort for me for now. Apart from that use current window versions (8 for sure, duno about 7) unused RAM to cache frequently used file, so the physical drive might not be used anyway.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I was looking at that. I bet I can draw to the graphics buffer, We\u0027ll have to see.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MK3424\u0022 data-cite=\u0022MK3424\u0022\u003E\u003Cdiv\u003EYeah, thought of that as well, then he should at least credit your work.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaha of course! Though it isn\u0027t code I\u0027m borrowing, it is the concept.\u003C/p\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-03-25T14:54:01Z","Content":"\n\u003Cp\u003EHmmm, I tried using this w/o Texture Management. The major mods that eats has most appetite for ram I have are KW Rocketry, KSO and Visual Enhancements. It crashes though. I also have a lot of extra mods such as DRe, FAR, KAS, etc.\u003C/p\u003E\n"},{"CreatedByName":"Bloodbunny","CreatedById":67274,"CreatedDateTime":"2014-03-25T17:37:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackheart612\u0022 data-cite=\u0022blackheart612\u0022\u003E\u003Cdiv\u003EHmmm, I tried using this w/o Texture Management. The major mods that eats has most appetite for ram I have are KW Rocketry, KSO and Visual Enhancements. It crashes though. I also have a lot of extra mods such as DRe, FAR, KAS, etc.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhen are you getting the crashes? In the VAB/SPH? That is where 100% of my crashes occurred; seemingly at random.\u003C/p\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-03-25T17:47:40Z","Content":"\n\u003Cp\u003EThe common crash in the first loading (before the title screen) it feels like it has no improvements at all. I wonder...\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-03-25T17:57:22Z","Content":"\n\u003Cp\u003EI would expect one of the 3 most common causes:\u003C/p\u003E\u003Cp\u003E- Not properly installed / working\u003C/p\u003E\u003Cp\u003E- To many non-part Textures and thus not enough memory\u003C/p\u003E\u003Cp\u003E- Some kind of internal issues (incompatibility, crazy file, whatever)\u003C/p\u003E\u003Cp\u003ELogs would be nice to know what is actually going on.. Especially GameData\\LoadOnDemand\\LoadOnDemand.log and KSP_Data\\output_log.txt, pls.\u003C/p\u003E\n"},{"CreatedByName":"sidfu","CreatedById":70409,"CreatedDateTime":"2014-03-25T21:08:26Z","Content":"\n\u003Cp\u003Ebloodbunny i tried it again but removed all mods but the ones u showed in your ss still same thing was at 2.5gb usage and the mods are not even full modpack. ill mess around with it more later maybe something ive changed with my mods causing problems. but your mod does work i just cant get to work s well as u lol.\u003C/p\u003E\u003Cp\u003Esome things to improve on it. the window to show the files need to make it stay open when u looking at it. its praticaly impossible to verfy which textures its missing when the window dont say open.\u003C/p\u003E\u003Cp\u003Ealso having a button for it to make a txt fil listing all the textures if sees would be nice.\u003C/p\u003E\u003Cp\u003Eto make it less intrusive make it so its a square box with just the number 0/number of textures. and when u click on it it open to the veiw of it now.\u003C/p\u003E\n"},{"CreatedByName":"Bloodbunny","CreatedById":67274,"CreatedDateTime":"2014-03-25T21:17:54Z","Content":"\n\u003Cp\u003E@ sidfu: it is Faark\u0027s mod, not mine. That said, the mod didn\u0027t work for me when I first tried it; make sure you have all the required dependencies, otherwise it WILL NOT work. Are you using TextureReplacer (it was in my screenshot)? Make sure you open the config file and turn off texture compression or it will interfere with the mod.\u003C/p\u003E\u003Cp\u003E@ blackheart: if it is crashing before you get to the main menu, then most likely there is some kind of mod conflict at work, see if it works with a 100% stock setup\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-25T21:21:46Z\u0022 title=\u002203/25/2014 09:21  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 25, 2014\u003C/time\u003E by Bloodbunny\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-03-26T02:07:57Z","Content":"\n\u003Cp\u003EYeah, it works like a charm on stock setup.\u003C/p\u003E\u003Cp\u003EBut crashes after all the initial loading even if it has no errors\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E========== OUTPUTING STACK TRACE ==================\u003Cbr\u003E\u003Cbr\u003E(0x77194B32) (KERNELBASE): (filename not available): RaiseException \u002B 0x49\u003Cbr\u003E(0x74AC2A42) (clr): (filename not available): CorExeMain \u002B 0x1072d\u003Cbr\u003E(0x74A7D22D) (clr): (filename not available): DllGetClassObjectInternal \u002B 0x1fd60\u003Cbr\u003E(0x112DE050) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003Cbr\u003E(0x112DDFBA) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003Cbr\u003E(0x106BBA3C) ((module-name not available)): (filename not available): (function-name not available) \u002B 0x0\u003Cbr\u003E(0x3C8332F8) (Mono JIT code): (filename not available):  (wrapper managed-to-native) LoadOnDemand.NativeBridge:NlodRequestedUpdate (void*) \u002B 0x28 (3C8332D0 3C83331B) [03D44E70 - Unity Root Domain] \u002B 0x0\u003Cbr\u003E(0x3C8332B5) (Mono JIT code): (filename not available):  LoadOnDemand.NativeBridge:\u0026lt;OnCallbackFromKspThreadRequested\u0026gt;b__3 () \u002B 0x2d (3C833288 3C8332C3) [03D44E70 - Unity Root Domain] \u002B 0x0\u003Cbr\u003E(0x04475BD3) (Mono JIT code): (filename not available):  LoadOnDemand.Logic.WorkQueue:Update () \u002B 0xa3 (04475B30 04475CC8) [03D44E70 - Unity Root Domain] \u002B 0x0\u003Cbr\u003E(0x043BE629) (Mono JIT code): (filename not available):  (wrapper runtime-invoke) object:runtime_invoke_void__this__ (object,intptr,intptr,intptr) \u002B 0x41 (043BE5E8 043BE67D) [03D44E70 - Unity Root Domain] \u002B 0x0\u003Cbr\u003E(0x100EFCF6) (mono): (filename not available): mono_set_defaults \u002B 0x22bf\u003Cbr\u003E(0x1005D603) (mono): (filename not available): mono_runtime_invoke \u002B 0x51\u003Cbr\u003E(0x00F6BD88) (KSP): (filename not available): RaiseNullExceptionObject \u002B 0xa888\u003Cbr\u003E(0x00F6BA76) (KSP): (filename not available): RaiseNullExceptionObject \u002B 0xa576\u003Cbr\u003E(0x00F6B625) (KSP): (filename not available): RaiseNullExceptionObject \u002B 0xa125\u003Cbr\u003E(0x00F608E8) (KSP): (filename not available): GetMonoBehaviourInConstructor \u002B 0x1758\u003Cbr\u003E(0x00F60951) (KSP): (filename not available): GetMonoBehaviourInConstructor \u002B 0x17c1\u003Cbr\u003E(0x00F60967) (KSP): (filename not available): GetMonoBehaviourInConstructor \u002B 0x17d7\u003Cbr\u003E(0x00F38143) (KSP): (filename not available): QuaternionToEuler \u002B 0x31333\u003Cbr\u003E(0x00FCEA9D) (KSP): (filename not available): PlayerMainWndProc \u002B 0x5ad\u003Cbr\u003E(0x00FD01FB) (KSP): (filename not available): PlayerWinMain \u002B 0x99b\u003Cbr\u003E(0x011174E8) (KSP): (filename not available): Object::SetInstanceID \u002B 0x7d728\u003Cbr\u003E(0x01148E10) (KSP): (filename not available): Object::SetInstanceID \u002B 0xaf050\u003Cbr\u003E(0x76C6850D) (KERNEL32): (filename not available): BaseThreadInitThunk \u002B 0xe\u003Cbr\u003E(0x77DBBF39) (ntdll): (filename not available): RtlInitializeExceptionChain \u002B 0x85\u003Cbr\u003E(0x77DBBF0C) (ntdll): (filename not available): RtlInitializeExceptionChain \u002B 0x58\u003Cbr\u003E\u003Cbr\u003E========== END OF STACKTRACE ===========\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-03-26T06:12:34Z","Content":"\n\u003Cp\u003EYeah, I\u0027ve been getting all sorts of crashes, even hard CTDs with no log output with this thing running... \u003C/p\u003E\u003Cp\u003EMostly in VAB, it seems to be quite stable while on a vessel. The only problem then is having it load textures and parts for multiple vessels (i.e when they rendezvous), that can get it choking but it usually works itself out...\u003C/p\u003E\u003Cp\u003ESomething weird that\u0027s been occurring lately when using this- KSP sometimes crashes but doesn\u0027t! Like, the \u0022Game has crashed, have a log\u0022 pops up but KSP continues to run in the back...\u003C/p\u003E\u003Cp\u003EAs for what your next point of development should be- Probably look into having the textures (both thumbs and actual ones) compressed and maybe getting those pesky crashes in VAB while browsing the catalog fixed. That\u0027s what I think is the main problem right now as sometimes my game crashes almost immediately after entering VAB, loading up a craft and turning a page or two of the catalog (a total of say 4~5 minutes between loading screen finish and crash). Maybe also add a button to just unload all catalog thumb textures (or just have them unloaded between page turns and then have the new ones loaded, instead of doing the two at the same time)...\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-03-26T15:38:41Z","Content":"\n\u003Cp\u003ESo I was able to put a \u0022pre-loader\u0022 together, and it is a LOT faster. Downside, is as you predicted, there is no way to push a frame update to the screen, so KSP looks like it freezes while it is loading now.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-03-26T18:29:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackheart612\u0022 data-cite=\u0022blackheart612\u0022\u003E\u003Cdiv\u003E...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat stack trace tells me that the interesting data is in GameData\\LoadOnDemand\\LoadOnDemand.log (crash/exception details) and the remaining parts of KSP.log / output_log.txt (general info about the mods behavior).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BananaDealer\u0022 data-cite=\u0022BananaDealer\u0022\u003E\u003Cdiv\u003E...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBeside of mod incompatibility stuff i am currently \u0022know\u0022 about 2 problems. Especially in VAB can the mod attempt to load more textures then memory is available. My test version does already release textures asap, so i consider that solved. But there appear to be real \u0022random\u0022 crashes and i\u0027m afraid those are caused by one of my more dangerous design decisions leading to corrupted memory (very bad). Tracking that might take a while, i hope to have more information after next weekend.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BananaDealer\u0022 data-cite=\u0022BananaDealer\u0022\u003E\u003Cdiv\u003E(i.e when they rendezvous), that can get it choking but it usually works itself out...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou mean the game does freeze for a short time? Is it really worse than stock KSP? (i always hated that freeze/lag/whatever when approaching my larger space stations in stock KSP)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BananaDealer\u0022 data-cite=\u0022BananaDealer\u0022\u003E\u003Cdiv\u003EKSP sometimes crashes but doesn\u0027t! Like, the \u0022Game has crashed, have a log\u0022 pops up but KSP continues to run in the back...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting. Do you get a log? It might be caused by one of my threads crashing, though that usually just silently disabled my mods functionality and should just barely be possible anyway. Does LOD still load textures after that?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003ESo I was able to put a \u0022pre-loader\u0022 together, and it is a LOT faster. Downside, is as you predicted, there is no way to push a frame update to the screen, so KSP looks like it freezes while it is loading now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPlease leave me a message in case you encounter any issues i might have missed and are caused by removing those texture files from KSPs internal directory listing.\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-03-26T21:47:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EYou mean the game does freeze for a short time? Is it really worse than stock KSP? (i always hated that freeze/lag/whatever when approaching my larger space stations in stock KSP)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, it freezes like \u0022normal\u0022 but for a lot longer and sometimes just stays like that until it eventually crashes (which can be like 5 minutes after it froze). It usually works itself out and loads the textures, even if they are initially low res...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EInteresting. Do you get a log? It might be caused by one of my threads crashing, though that usually just silently disabled my mods functionality and should just barely be possible anyway. Does LOD still load textures after that?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESometimes I get a log, other times I don\u0027t even if the pop up states there\u0027s a log...\u003C/p\u003E\u003Cp\u003ELOD continues to work, along with the game for awhile after the \u0022crash\u0022 but as soon as I try to change scenes it just crashes to desktop without any notice. Note that this seems to happen only in the editor buildings (VAB/SPH).\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-03-27T02:44:20Z","Content":"\n\u003Cp\u003EThis mod really has some serious potential. Ever since I started playing KSP (all of 3 weeks ago, but still), I\u0027ve been wondering why the heck it loads all of the textures at the beginning when they could all be loaded and unloaded on an as needed basis. Installing this has dropped my RAM usage by about 1GB and is holding steady at about 2.4GB even with relatively fast VAB browsing. This is uncompressed and compared to aggressive mode of the active texture management mod. The only issue I\u0027ve noticed (other than the ones mentioned in the initial post and later in the thread) is that on loading parts in the VAB, they sometimes load an extremely low-rez / blurry texture which then updates after 10-30 seconds. That being said, I\u0027d rather have a short delay on loading than to have to bend over backwards to trim out parts and mods to keep RAM usage under 3.5GB (my crash point).\u003C/p\u003E\u003Cp\u003EThank you for this!\u003C/p\u003E\u003Cp\u003EPS: Eagerly awaiting a version that fixes StretchySRB textures.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-27T02:47:01Z\u0022 title=\u002203/27/2014 02:47  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 27, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-03-27T02:53:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EThat stack trace tells me that the interesting data is in GameData\\LoadOnDemand\\LoadOnDemand.log (crash/exception details) and the remaining parts of KSP.log / output_log.txt (general info about the mods behavior).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ELogging Started at 3/26/2014 11:03:14 AM (Async)\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\HF0DAZKR8YXOXP5T.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumb cache hit, loading D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\NHWFXPJGD3HDDE19.THUMB to 1\u003Cbr\u003E3/26/2014 11:04:34 AM: Texture prepared: 1\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\6CWSXKZUVPCRQM1V.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:34 AM: Writing cache: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\HF0DAZKR8YXOXP5T.THUMB (Texture)\u003Cbr\u003E3/26/2014 11:04:34 AM: Texture prepared: 0\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\8HX7WHDK1JCO7ESI.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:34 AM: Writing cache: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\OT270VMP8ZSRPLA4.THUMB (Texture)\u003Cbr\u003E3/26/2014 11:04:34 AM: Texture prepared: 4\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumb cache hit, loading D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\73Q5GB8BXZD2XW8N.THUMB to 5\u003Cbr\u003E3/26/2014 11:04:34 AM: Texture prepared: 5\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\ILQIB8IJAC74G729.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:34 AM: Writing cache: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\KUNE8FZQIXOBZIQN.THUMB (Texture)\u003Cbr\u003E3/26/2014 11:04:34 AM: Texture prepared: 7\u003Cbr\u003E3/26/2014 11:04:34 AM: Thumb cache hit, loading D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\VPH1B2WV70F5EU57.THUMB to 8\u003Cbr\u003E3/26/2014 11:04:35 AM: Texture prepared: 8\u003Cbr\u003E3/26/2014 11:04:35 AM: We got a AF match, a: 32x32@D3DFMT_A8R8G8B8, b: 32x32@D3DFMT_A8R8G8B8\u003Cbr\u003E3/26/2014 11:04:35 AM: success reporting?\u003Cbr\u003E3/26/2014 11:04:35 AM: No AF match, a: 32x32@D3DFMT_DXT5, b: 32x32@D3DFMT_A8R8G8B8\u003Cbr\u003E3/26/2014 11:04:35 AM: DEBUG: HORRIBLE SYNC CONVERSION IN PLACE. REMOVE THAT ASAP ONCE DEBUGGING IS DONE!\u003Cbr\u003E3/26/2014 11:04:36 AM: System.Exception: Unrecognized format: D3DFMT_DXT5\u003Cbr\u003E   at AssignableFormat.PixelFormatFromD3DFormat(_D3DFORMAT from)\u003Cbr\u003E   at FormatDatabase.GetConverterJobScope.RunConvertion(AssignableFormat expectedFormat)\u003Cbr\u003E   at ThumbnailTexture.GetAssignableData(AssignableFormat assignableFormat, Func\u00602\u0026amp; delayedCb)\u003Cbr\u003E   at GPU.AssignDataToThumbnailAsyncScope.Run(IntPtr devicePtr)\u003Cbr\u003E   at KSPThread.Update(IDirect3DTexture9* devicePtrTexture)\u003Cbr\u003E   at NlodRequestedUpdate(Void* deviceRefTexturePtr)\u003Cbr\u003E3/26/2014 11:04:38 AM: Writing cache: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\U9K2NP68YI9YQ8LZ.THUMB (Texture)\u003Cbr\u003E3/26/2014 11:04:38 AM: Texture prepared: 9\u003Cbr\u003E3/26/2014 11:04:38 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\4J03IYFS02XA5AGL.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:38 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\3XDRBW51Q4HAERC5.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:38 AM: Thumbnail cache is invalid: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\8CTYKM3AI4PX7H6G.THUMB\u003Cbr\u003EError: System.FormatException: Loaded format (32x32, FMT21) does not match expected format (32x32, FMT894720068)\u003Cbr\u003E   at TextureInitialization.ThumbTryLoadFromDisk_OnLoaded(Byte[] loaded_data)\u003Cbr\u003E3/26/2014 11:04:40 AM: Writing cache: D:\\Games\\Kerbal Space Program Ultra 23 KSO LOD\\GameData\\LoadOnDemand\\G1LS7XDEDEA8T0H8.THUMB (Normal)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s a separate ksp install to test it.\u003C/p\u003E\n"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2014-03-27T04:13:50Z","Content":"\n\u003Cp\u003ESo... Why has squad not done this already?\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-03-27T04:39:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mekan1k\u0022 data-cite=\u0022Mekan1k\u0022\u003E\u003Cdiv\u003ESo... Why has squad not done this already?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPerhaps it\u0027s on their list, but they have such a long dev list that they just haven\u0027t gotten around to it yet.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-03-27T06:49:29Z","Content":"\n\u003Cp\u003ESo, out of curiosity, how do you want to handle crash reports? I don\u0027t want to just start sending you crash logs for fear that you\u0027re going to get inundated...\u003C/p\u003E\n"}]}