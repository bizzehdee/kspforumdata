{"TopicId":199486,"ForumId":29,"TopicTitle":"Exploiting the new inventory system to add modules to parts?","CreatedByName":"Pehvbot","CreatedById":182810,"CreatedDateTime":"2021-01-10T17:40:21Z","PageNum":1,"Articles":[{"CreatedByName":"Pehvbot","CreatedById":182810,"CreatedDateTime":"2021-01-10T17:40:21Z","Content":"\n\u003Cp\u003E\nI\u0027ve been noodling around with an idea to use the new inventory system to add modules to parts by installing inventory items.\u00A0 It was inspired by the new evaExperiment, where an inventory item gatekeeps a module.\u00A0 1.11 does this in a very simple way \u00A0where having the item in inventory\u00A0simply enables an existing experiment module.\n\u003C/p\u003E\n\u003Cp\u003E\nThe full idea would basically be a way to create modular parts where a part isn\u0027t much more than an empty shell and the inventory items add the functionality you would want.\u00A0 A part would be created from the physical part (say an Octo probe shell) with a bunch of inventory slots and a volume limit.\u00A0 You would then use inventory items to add command, \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E, reaction wheel, comms, etc.\n\u003C/p\u003E\n\u003Cp\u003E\nThis would allow you to add things like science experiments to probes or \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E to capsules (assuming you can stay within the volume limits!), enable upgrading existing parts, use the tech tree to shrink the volume for inventory items to cram more stuff in a part \u0027shell\u0027, etc.\n\u003C/p\u003E\n\u003Cp\u003E\nThe only way this would work is rather than the current \u0027gatekeeper\u0027 method where the module is already on the part, you would need to be able to propagate a module \u0027upwards\u0027 from the inventory item to the host part.\n\u003C/p\u003E\n\u003Cp\u003E\nSo before I dive in I thought I would ask has anyone tried to\u00A0dynamically adding a module to a part or know if it\u0027s possible or not?\u00A0 If so is there some sample code for this?\u00A0 I would like to avoid spending time on either the impossible or on a known and solved problem.\u00A0 Also, maybe someone is already on this or it\u0027s just a stupid idea for reasons I haven\u0027t thought yet.\u00A0 I would want to hear about that as well.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks!\n\u003C/p\u003E\n"},{"CreatedByName":"ktosiu","CreatedById":153541,"CreatedDateTime":"2021-01-19T09:12:27Z","Content":"\n\u003Cp\u003E\nI\u0027ve recently explored the idea of adding partmodules at runtime and if I remember correctly, parts without backing .cfg module entries are incorrectly restored from the persistence file on load, so you\u0027ll have to write your own code to handle that. I haven\u0027t seen any examples of code though, only claims of success.\n\u003C/p\u003E\n"},{"CreatedByName":"Pehvbot","CreatedById":182810,"CreatedDateTime":"2021-01-20T03:11:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223911392\u0022 data-ipsquote-contentid=\u0022199486\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221611047547\u0022 data-ipsquote-userid=\u0022153541\u0022 data-ipsquote-username=\u0022ktosiu\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, ktosiu said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve recently explored the idea of adding partmodules at runtime and if I remember correctly, parts without backing .cfg module entries are incorrectly restored from the persistence file on load, so you\u0027ll have to write your own code to handle that. I haven\u0027t seen any examples of code though, only claims of success.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat was sort of my thinking.\u00A0 My hope is that because a module is written in the cargo part cfg, it avoids that issue.\u00A0 On load the code would simply (ha!) insert any tagged modules of cargo parts into the containing part.\u00A0 The part in effect is the module, so it automatically gets added while in inventory.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you were able to at least insert part modules dynamically that\u0027s promising.\u00A0 I know basically nothing about C# or Unity so nearly all of my KSP coding has been at the \u0027banging on it with a rock until it stops moving\u0027 phase.\u00A0 I\u0027m hoping to progress to at least the \u0027poking it with a sharp stick to get it to move in the direction I want\u0027 level.\u00A0 Knowing there\u0027s a stick is helpful.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-20T03:11:59Z\u0022 title=\u002201/20/2021 03:11  AM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 20, 2021\u003C/time\u003E by Pehvbot\u003C/strong\u003E\n\u003C/span\u003E\n"}]}