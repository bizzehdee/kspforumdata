{"TopicId":84797,"ForumId":36,"TopicTitle":"[WIP] [Discussion] Basic Jet Engine -- a realistic rebalance of air-breathing engines","CreatedByName":"camlost","CreatedById":57590,"CreatedDateTime":"2014-09-17T04:52:00Z","PageNum":1,"Articles":[{"CreatedByName":"camlost","CreatedById":57590,"CreatedDateTime":"2014-09-17T04:52:00Z","Content":"\n\u003Cp\u003EHi folks, \u003C/p\u003E\u003Cp\u003EAs you know KSP\u0027s algorithm concerning air-breathing engines is incorrect. To solve the problem and bring along a believable model I\u0027ve made the AJE mod (See signature). However AJE\u0027s algorithm from NASA EngineSim is not without its limitations. We have discussed about this with NathenKell and others and decided that a numerical model might serve a wider audience, requires less maintenance and easier to config for unorthodox things like SABRE and RAPIER. \u003C/p\u003E\u003Cp\u003EAssuming inlets are spammed, the stock engines are defined by two curves: a velocity curve that is thrust vs speed, and a Isp curve that is Isp vs altitude. However in reality it is completely wrong. \u003Ca href=\u0022http://home.anadolu.edu.tr/~mcavcar/common/Jetengine.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://home.anadolu.edu.tr/~mcavcar/common/Jetengine.pdf\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAs explained here the thrust is dependent on the speed, but also greatly depends on altitude. Air density has a huge effect on thrust, and temperature has a minor effect. We must also notice that the \u0027velocity curve\u0027 is different under various altitudes. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://upload.wikimedia.org/wikibooks/en/thumb/5/5a/Tfan-thrust-map-kk-20050824.png/640px-Tfan-thrust-map-kk-20050824.png\u0022 alt=\u0022640px-Tfan-thrust-map-kk-20050824.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe Isp curve, however, does not change a lot upon altitudes, but is mainly affected by speed. Throttle and afterburners should also have an effect. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://en.wikiversity.org/wiki/Jet_engine_performance_notes\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://en.wikiversity.org/wiki/Jet_engine_performance_notes\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe prototype I\u0027ve made is very simple at the moment. The \u0022maxThrust\u0022 corresponds to the sea level, while actual thrust is always proportional to air density. Isp is calculated using a new curve against speed, and has nothing to do with altitude. Since I want this to be low maintenance, the program also guess the Isp curve is nothing is defined. \u003C/p\u003E\u003Cp\u003EHowever after some test-flying I\u0027ve found it very difficult to balance thrust. Engines have too little thrust at high altitude due to 1) Temperature effect is neglected and 2) Thrust curve should shift toward higher speed in high altitude. As a result and due to the fact that many engines have poorly-defined curves in the first place, I had to define velocity curves for every engine and do a lot of test piloting for each one, which contradicts the point of making this mod. Also, to enable , for example, M3 flight at high altitude I have to greatly buff the speed curve to favor high speed, making the sea-level performance of the engine kind-of ridiculous.\u003C/p\u003E\u003Cp\u003EPlease share whatever your thoughts on this topic, thank you!\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-09-17T09:46:03Z","Content":"\n\u003Cp\u003EI never bothered to inform myself about engines, so please excuse my ignorance. But since you posted this on the general dev board, i just go ahead with some questions \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022camlost\u0022 data-cite=\u0022camlost\u0022\u003E\u003Cdiv\u003EHi folks, \u003Cp\u003EHowever AJE\u0027s algorithm from NASA EngineSim is not without its limitations.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat limitations?\u003C/p\u003E\u003Cp\u003EMoreover, what do you have in mind when stating \u0022might serve a wider audience\u0022? It sounds like you want to create an over performing engine so people can still build their space plane without much hassle, right?\u003C/p\u003E\u003Cp\u003EWhich leads me to my next question. You have already done AJE configs for a lot of engines. With this experience in mind, would it be possible to create an AJE configuration for a \u0022stock-like\u0022 fictional engine?\u003C/p\u003E\n"},{"CreatedByName":"camlost","CreatedById":57590,"CreatedDateTime":"2014-09-17T11:17:03Z","Content":"\n\u003Cp\u003E@DM,\u003C/p\u003E\u003Cp\u003E1. There are too many limitations really. One that could be circumvented by a numerical model is that EngineSim assumes all parameters (like pressure ratio, turbine temperature etc) remain constant at any speed and altitude. Then some kind of hard limit has to be used to nerf the performance. For example, turbojets\u0027 max speed is limited by overheating, which seems unreal and stupid, and some people don\u0027t accept that. Another reason is that the model doesn\u0027t work for SCRAMJet, SABRE and some others things. \u003C/p\u003E\u003Cp\u003E2. I\u0027m not sure what Squad had in mind when they did those engines. They are \u0027fictional\u0027 only because the algorithm is wrong. The \u0022Basic turbojet\u0022 for example, provides maximum thrust at 0m/s, meaning it is a high-bypass turbofan, but the isp is only 2000s, which is very low. Then because of the intakeAir bug, the actual Isp is 32000s. There are too many mistakes and arbitrary things. \u003C/p\u003E\u003Cp\u003EIt\u0027s also frustrating to see that some modders just copy-pasted the stock module, so I don\u0027t know what they want either. Kind of weird that although half the Spacecraft Exchange threads are about planes and FAR has been around for 2 years, few people asked questions regarding the general issue about air-breathing engines.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-17T11:24:26Z\u0022 title=\u002209/17/2014 11:24  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 17, 2014\u003C/time\u003E by camlost\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-17T14:41:29Z","Content":"\n\u003Cp\u003Efrom a simpleton\u0027s (with respect to real engine behaviours, statistics, and most of the math behind all of it) perspective... what if you simply averaged (weighted by some predefined curve perhaps, 0 defined altitude = all velocity curve; 1 defined altitude = all altitude curve) the velocity and altitude curves for thrust? wouldn\u0027t that push the actual thrust toward velocity curve at low altitudes and altitude curve at high altitudes? seems like that would allow pretty reasonable performing engines and unrealistic engines at the same time. ISP would be calculated by the plugin instead of defined in the config?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-17T22:18:38Z","Content":"\n\u003Cp\u003EI think you may be worrying too much about edge cases; I think it quite likely that the engines can be sorted into two groups.\u003C/p\u003E\u003Cp\u003E1. Engines with reasonable velocity curves (and probably done by Taverius \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_happy.png\u0022 alt=\u0022^_^\u0022\u003E )\u003C/p\u003E\u003Cp\u003E2. Engines with copy-pasted SQUAD curves.\u003C/p\u003E\u003Cp\u003EThere will probably be a few that don\u0027t fit, but really, you should be safe in simply detecting each curve and replacing it, since the number of distinct curves is low, and if the curve doesn\u0027t match one you know about, then give it some reasonable-performance curve.\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-09-18T20:04:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022camlost\u0022 data-cite=\u0022camlost\u0022\u003E\u003Cdiv\u003E@DM\u003Cp\u003E... \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh okay. I understand AJE doesn\u0027t work for SCRAMJets and SABRE at least \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003EI guess the problem with engines is much less apparent than the oddness of stock aerodynamics for instance. And i doubt that people at Squad were familiar with the workings of jet engines when they made KSP. Who is familiar with this anyway. Probably just the engineers working on them \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EBtw this assumption \u0022The \u0022maxThrust\u0022 corresponds to the sea level, while actual thrust is always proportional to air density\u0022 doesn\u0027t seem to be valid. At least at the high speed end it looks more like a logarithmic dependence on air density (very roughly linear dependence on altitude). Perhaps you can use this high-speed behavior for low speeds, too. \u003C/p\u003E\u003Cp\u003EHow about you consider to make thrust a function of both, air density and velocity? Because in science a model should be as complex as needed but not any more complex. And as you say by yourself, there are some effects missing.\u003C/p\u003E\u003Cp\u003EIn addition to what Nathan said: You can probably extract some key figures like max-thrust from the stock config and then replace the rest with more reasonable stuff.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-18T21:20:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaMichel\u0022 data-cite=\u0022DaMichel\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EHow about you consider to make thrust a function of both, air density and velocity? \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s what camlost is proposing, I believe: not replacing velocityCurve, but adding to its effect the effect of air density.\u003C/p\u003E\u003Cp\u003EAlso, you should try out AJE. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}