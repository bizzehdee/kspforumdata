{"TopicId":113206,"ForumId":16,"TopicTitle":"DeltaV calculated by KerbalEngineer seems not right??","CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T13:31:49Z","PageNum":1,"Articles":[{"CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T13:31:49Z","Content":"![1mgpEb7U](http://pan.baidu.com/s/1mgpEb7U)\n\n![1pJzHv5p](http://pan.baidu.com/s/1pJzHv5p)\n\nany ideas why adding an ion thruster with 210 unit of xenon gas adds addition 4891m/s of deltaV??\n\nI tested it and find out it\u0027s not right.\n\nCan anyone figure it out?\n\nThanks!!\n\nEdit: I send pics to #9.\n\n**Edited \u003Ctime datetime=\u00222015-06-17T18:33:51Z\u0022 title=\u002206/17/2015 06:33  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 17, 2015\u003C/time\u003E by hypersonic**"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-17T13:51:48Z","Content":"Welcome aboard!\n\nCan\u0027t see your pics, but that\u0027s a reasonable amount of dV to be added by an ion thruster to a small craft. How did you test to find out it\u0027s wrong?"},{"CreatedByName":"Dawnkeeper","CreatedById":146462,"CreatedDateTime":"2015-06-17T13:52:47Z","Content":"How did you test it? In orbit or on the surface? Without changing settings KER will display the orbital values and they greatly differ from the atmospheric ones."},{"CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T15:24:37Z","Content":"Thanks for replying! this is my first time post on this forum, can\u0027t figure out how to sent pics...\n\nI test in space of course.\n\nThe problem arise when I fly satellite with an ion thruster in the middle and liquid fuel engines attached radially, dV shown is above 10km/s, but actually feels like a few thousand...\n\nso I made up this new test prob: 1. choose a MK1 command pod. 2 connect Oscar-B fuel tank,FL-T200 and rocketmax X200-8 fuel tank 3.connect a LV-909 \u0027Terrier\u0027 engine on the bottom. so the TWR is 0.85, Dv= 4346 and burn 4m 53.2s.\n\nNext attach small Xenon container on top of MK1 pod with an ion thruster, change Xenon gas to 140 units so the two engine burn about the same time.\n\nignore the thrust direction... have no influence on KerbalEngineer calculation. the result is TWR=0.84 and Dv=9237\n\nTherefore adds additional 140 unit of Xenon gas and an ion thruster adds 4891m/s ?? It\u0027s not possible, just estimate it, using TWR and burning time.\n\nHope someone will help me, Thanks:D"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-17T15:41:38Z","Content":"\u003E \n\u003E I test in space of course.\n\nThis is a problem. Expending 1000m/s of dV rarely results in a speed change of 1000m/s. It may be more or less depending on where in the trajectory it is expended, especially so for a low TWR vessel like an ion propelled one.\n\nCan you put a pic or two of your vessel up on imgur.com? I tried looking at your pics separately but can\u0027t seem to see them in high resolution."},{"CreatedByName":"maceemiller","CreatedById":130574,"CreatedDateTime":"2015-06-17T16:31:32Z","Content":"I find that the deltaV monitor in mechjeb is better for me.....maybe worth a try?"},{"CreatedByName":"Xannari Ferrows","CreatedById":125369,"CreatedDateTime":"2015-06-17T16:51:01Z","Content":"If necessary, maybe even go by hand. If worst comes to be...\n\n**Spreadsheets...**\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u00B9"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-06-17T16:56:35Z","Content":"The usual way to include pictures is to upload them to somewhere like imgur.com and then insert the image using the URL from imgur.\n\nThere is a switch in the settings to make KER account for the thrust direction though that is unlikely to be anything to do with this issue. Without being able to see your pictures it is very difficult to tell what is going on. I will try to run a couple of tests following your description but I suspect that you tested only one of the engines at once whereas KER is simulating both engines burning at the same time and this will drastically change the results of the calculations. In the VAB KER can only (currently) simulate the normal staging process of the vessel and it has to make various assumptions about when the next stage gets fired and this is probably not how you fly it.\n\nEdit: I\u0027ve rebuilt your test craft and run a few tests and it certainly does look like there is a problem in the calculations and I also recall a similar issue being reported before with certain high ISP mod engines. I\u0027ll take a look at the code and see if I can see what is wrong...\n\nP.S. This would have been better posted in the [KER thread](https://forum.kerbalspaceprogram.com/threads/18230-1-0-2-Kerbal-Engineer-Redux-v1-0-16-6).\n\n**Edited \u003Ctime datetime=\u00222015-06-17T17:17:06Z\u0022 title=\u002206/17/2015 05:17  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 17, 2015\u003C/time\u003E by Padishar**"},{"CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T17:46:40Z","Content":"Thanks for the tips!\n\nhere\u0027re the links to the pics, hope those works.\n\n[http://imgur.com/bdIu70k\u0026hXYBsRc#0](http://imgur.com/bdIu70k\u0026hXYBsRc#0)\n\n[http://imgur.com/bdIu70k\u0026hXYBsRc#1](http://imgur.com/bdIu70k\u0026hXYBsRc#1)\n\nwhy can\u0027t just upload pics from desktop?![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\n- - - Updated - - -\n\n![bdIu70k.jpg?1](http://i.imgur.com/bdIu70k.jpg?1)\n\n- - - Updated - - -\n\n![hXYBsRc.jpg?1](http://i.imgur.com/hXYBsRc.jpg?1)\n\n- - - Updated - - -\n\nYes you\u0027re right. It confuses me when Dv drops like 40m/s but the acceleration shown is around 10m/s.\n\nI think Isp it calculates is not right. Isp=T/mdot/9.81=(2000\u002B60000)/(0.04849\u002B17.728)/9.81=355.53 (I think gravity on kerbin is same as that on Earth?)\n\nI sent the pics and it says 794.7\n\nDv calculated using -Isp\\*g\\*ln(mf/mi) is correct\n\nhow does KER and Mechjeb calculates it?"},{"CreatedByName":"Xannari Ferrows","CreatedById":125369,"CreatedDateTime":"2015-06-17T17:52:20Z","Content":"When two engines fire at the same time, Kerbal Engineer Redux doesn\u0027t take into account which direction those engines are firing. Since the Terrier engine on the bottom adds it\u0027s overall Delta-V reading to the total, while the Dawn adds it\u0027s own, those two readings are added together, per the rocket equation.\n\nWhen the Terrier burns, the vessel loses the fuel mass, therefore allowing more Delta-V for the remaining amount of fuel in the Dawn stage.\n\n...You did put them in different stages, right?"},{"CreatedByName":"FancyMouse","CreatedById":142946,"CreatedDateTime":"2015-06-17T18:00:59Z","Content":"I think his problem is not about direction of thrust - any direction of Ion should not affect Isp too much since LV 909 thrust and fuel consumption dominates - so any direction of Ion should produce an Isp value close to 345, not way off like 700-ish.\n\nAnd his picture does show they\u0027re in the same stage. Although I vaguely remember KER should show it correctly when I mix my engines in the same stage, but I do see sometimes (with multiple probes, usually) that calculation goes way off."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-17T18:01:20Z","Content":"You can see that they\u0027re in the same stage in the pics. It should use a weighted average for Isp, which it appears to be doing incorrectly. Calculating manually with a 909 at 60Kn/345s and an ion at 2Kn/4200s yields a net Isp of 355.5s."},{"CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T18:11:59Z","Content":"I built like this only for testing in VSB. the reading is same no matter how you rotates the engine. (when you actually fly it it will be different of course.)\n\nThey are in same stage, and fires at the same time.\n\nthe original problem arise when I fly satellite with an ion thruster in the middle and liquid fuel engines attached radially, dV shown is above 10km/s, but actually feels like a few thousand, so I doubt the Dv calcs."},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-06-17T18:12:12Z","Content":"\u003E \n\u003E When two engines fire at the same time, Kerbal Engineer Redux doesn\u0027t take into account which direction those engines are firing. Since the Terrier engine on the bottom adds it\u0027s overall Delta-V reading to the total, while the Dawn adds it\u0027s own, those two readings are added together, per the rocket equation.\n\u003E When the Terrier burns, the vessel loses the fuel mass, therefore allowing more Delta-V for the remaining amount of fuel in the Dawn stage.\n\u003E \n\u003E ...You did put them in different stages, right?\n\nI already mentioned the setting in KER to enable inclusion of thrust vectors and that this has nothing to do with the problem. There is a problem in the KER calculations when engines of different ISPs are fired simultaneously."},{"CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T18:22:49Z","Content":"Thanks everyone for the reply\n\nso there is a little bug in Isp calcs? Can someone report to mod coders?\n\nBTW, how to reply to a single thread instead of posting a new one? I believe I pressed the \u0027reply\u0027 from the right corner"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-06-17T18:28:41Z","Content":"I am one of the mod coders, specifically the coder that maintains the deltaV calculation code, so no need to do anything else. I will reply to your post in the KER thread that this will get looked at..."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-17T18:31:37Z","Content":"Padishar actually is one of the devs for Kerbal Engineer Redux, and works on the dV simulation code. You\u0027ve brought it to the attention of the right person. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nEdit: I got ninja\u0027d!\n\n**Edited \u003Ctime datetime=\u00222015-06-17T18:46:48Z\u0022 title=\u002206/17/2015 06:46  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 17, 2015\u003C/time\u003E by Red Iron Crown**"},{"CreatedByName":"hypersonic","CreatedById":146460,"CreatedDateTime":"2015-06-17T18:37:53Z","Content":"\u003E \n\u003E I am one of the mod coders, specifically the coder that maintains the deltaV calculation code, so no need to do anything else. I will reply to your post in the KER thread that this will get looked at...\n\nHaHa Cool, Thanks [Padishar](https://forum.kerbalspaceprogram.com/members/100092-Padishar)"}]}