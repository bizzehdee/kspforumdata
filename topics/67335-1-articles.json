{"TopicId":67335,"ForumId":15,"TopicTitle":"Bump maps look great in unity but terrible ingame","CreatedByName":"jnrobinson","CreatedById":16627,"CreatedDateTime":"2014-03-31T17:11:04Z","PageNum":1,"Articles":[{"CreatedByName":"jnrobinson","CreatedById":16627,"CreatedDateTime":"2014-03-31T17:11:04Z","Content":"\n\u003Cp\u003EHello all,\u003C/p\u003E\u003Cp\u003EI\u0027ve recently encountered a problem with my bump maps in which they look good when I place them in unity but horrendously jaggy once I put the part ingame.\u003C/p\u003E\u003Cp\u003EHere\u0027s a screenshot of the part in unity:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6ZDK2JR.png?1\u0022 alt=\u00226ZDK2JR.png?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here\u0027s the part in KSP\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/lEM5e1h.jpg?1\u0022 alt=\u0022lEM5e1h.jpg?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EMy import settings for the bump map are:\u003C/p\u003E\u003Cp\u003ECreate from greyscale checked\u003C/p\u003E\u003Cp\u003EFiltering sharp\u003C/p\u003E\u003Cp\u003EWrap mode Repeat\u003C/p\u003E\u003Cp\u003EFilter mode Trilinear\u003C/p\u003E\u003Cp\u003EAniso level 1\u003C/p\u003E\u003Cp\u003EMax size 2048\u003C/p\u003E\u003Cp\u003EFormat Compressed\u003C/p\u003E\u003Cp\u003EAnd I\u0027m writinig to KSP with MBMs (but the same problem happens with all texture formats)\u003C/p\u003E\u003Cp\u003EDoes anyone know how I can fix this?\u003C/p\u003E\u003Cp\u003EI\u0027ve tried different sized bump maps and using a different program to convert the bump to a normal, but it seems like unity is just exporting horribly compressed textures to KSP and I don\u0027t know why.\u003C/p\u003E\u003Cp\u003EI also checked inside the MBM file and the normal map portion of the data is set properly.\u003C/p\u003E\n"},{"CreatedByName":"electronicfox","CreatedById":43373,"CreatedDateTime":"2014-03-31T17:17:28Z","Content":"\n\u003Cp\u003EAre you using bump, or normal maps? Have you set them as the correct kind of map in Unity? Have you messed with any of the filtering/compression stuff in Unity?\u003C/p\u003E\n"},{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2014-03-31T17:39:07Z","Content":"\n\u003Cp\u003EAre you using a non KSP shader (as KSP has its own shaders in Unity)?\u003C/p\u003E\n"},{"CreatedByName":"jnrobinson","CreatedById":16627,"CreatedDateTime":"2014-03-31T17:55:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022electronicfox\u0022 data-cite=\u0022electronicfox\u0022\u003E\u003Cdiv\u003EAre you using bump, or normal maps? Have you set them as the correct kind of map in Unity? Have you messed with any of the filtering/compression stuff in Unity?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m importing a standard grey bump map and telling unity to create a normal map from grayscale. The only things I\u0027ve changed from default is the bumpiness of the map\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dispatcher\u0022 data-cite=\u0022Dispatcher\u0022\u003E\u003Cdiv\u003EAre you using a non KSP shader (as KSP has its own shaders in Unity)?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m using KSP/Bumped Specular\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-31T18:09:26Z","Content":"\n\u003Cp\u003EI\u0027ve not had this problem, but then I don\u0027t change any settings plus I convert my bump maps into normal maps in GIMP first.\u003C/p\u003E\u003Cp\u003EI don\u0027t know what sharp filtering does, but it kind of looks like it might be the culprit.\u003C/p\u003E\n"},{"CreatedByName":"jnrobinson","CreatedById":16627,"CreatedDateTime":"2014-03-31T18:14:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EI\u0027ve not had this problem, but then I don\u0027t change any settings plus I convert my bump maps into normal maps in GIMP first.\u003Cp\u003EI don\u0027t know what sharp filtering does, but it kind of looks like it might be the culprit.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m going to try this right now. Would you mind sharing what gimp plugin you used and any settings you changed?\u003C/p\u003E\u003Cp\u003EI tried smooth filtering too and it didn\u0027t change anything\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-31T18:21:09Z","Content":"\n\u003Ca href=\u0022http://registry.gimp.org/node/69\u0022 rel=\u0022external nofollow\u0022\u003ENormalMap\u003C/a\u003E. The only option you \u003Cem\u003Eneed\u003C/em\u003E to change, is to Invert Y. Unity seems to interpret normal maps slightly differently I guess. Other than that I only play around with Filter and Scale, to get the depth I want. Make sure you create a backup of your layers because this plugin converts, it doesn\u0027t generate a new layer.\n"},{"CreatedByName":"jnrobinson","CreatedById":16627,"CreatedDateTime":"2014-03-31T18:46:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022http://registry.gimp.org/node/69\u0022 rel=\u0022external nofollow\u0022\u003ENormalMap\u003C/a\u003E. The only option you \u003Cem\u003Eneed\u003C/em\u003E to change, is to Invert Y. Unity seems to interpret normal maps slightly differently I guess. Other than that I only play around with Filter and Scale, to get the depth I want. Make sure you create a backup of your layers because this plugin converts, it doesn\u0027t generate a new layer.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, that seems to have fixed my problem. I also deleted my entire Unity scene and started from scratch just in case it had weird exporting settings, and now the bumps ingame match the normal map perfectly.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-04-01T03:14:28Z","Content":"\n\u003Cp\u003EAlso, it\u0027s a really bad idea to compress normal maps. If you need to save the RAM, just reduce the size--a 512x512 RGB/A will look better than a 1024x1024 DXT1/5 normal map.\u003C/p\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2014-04-01T03:56:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ENathanKell\u003Cp\u003E Also, it\u0027s a really bad idea to compress normal maps. If you need to save the RAM, just reduce the size--a 512x512 RGB/A will look better than a 1024x1024 DXT1/5 normal map. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI disagree with that. The whole point of compression is to give higher resolutions at a lower cost. First kerbal uses tga or png, not dxt, and png does not create mipmaps.\u003C/p\u003E\u003Cp\u003ESecond.\u003C/p\u003E\u003Cp\u003EDXT1 and DXT5 can give you vastly different compression artifacts. If you can get away with a smaller texture then you should be using that smaller texture to start with. If half sizing your texture gives you better results than compressed. Then your not using the correct compression settings and/or your normal map does not have enough detail in it to warrant a larger texture in the first place.\u003C/p\u003E\u003Cp\u003EAll of this is subjective but a properly created compressed texture can look almost as good as its uncompressed counterpart, and be much, much lighter.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.bencloward.com/tutorials_normal_maps12.shtml\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.bencloward.com/tutorials_normal_maps12.shtml\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd more technical stuff.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.nvidia.com/object/real-time-normal-map-dxt-compression.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.nvidia.com/object/real-time-normal-map-dxt-compression.html\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-04-01T04:15:23Z","Content":"\n\u003Cp\u003EKSP will convert all PNG and MBM (if not flag \u0022leave uncompressed\u0022) to DXT1/5 (1 if no alpha present, 5 if alpha present). There\u0027s a bug (or feature?) in the loader where it *doesn\u0027t* do this automatically to TGAs, hence the Texture Compressor mod. Regarding compression: due to (IIRC) licensing issues re: DXT, all compression happens at runtime and there is but a single option (use hiquality compression yes/no) in the Unity compressor. So the options are really pretty limited.\u003C/p\u003E\u003Cp\u003EI have no doubt that properly compressed textures will work well as normal maps; but as KSP does it, they tend not to (c.f. comparison shots of your Atlas with and without compressed normals).\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2014-04-01T05:44:22Z","Content":"\n\u003Cp\u003EIf is definitely the compression setting. For now, set it to the highest quality available. It was giving me fits also. Until I did that.\u003C/p\u003E\n"}]}