{"TopicId":198663,"ForumId":20,"TopicTitle":"Testing multi-display","CreatedByName":"Xavier513","CreatedById":103114,"CreatedDateTime":"2020-12-12T09:46:12Z","PageNum":1,"Articles":[{"CreatedByName":"Xavier513","CreatedById":103114,"CreatedDateTime":"2020-12-12T09:46:12Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to play KSP on more than one monitor, with different\u00A0 content in each monitor.\n\u003C/p\u003E\n\u003Cp\u003E\nI successfully achieved this on two monitors, but I encountered an issue, and I need some help: the vessel disappears in the first monitor.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is how I enable the second monitor:\n\u003C/p\u003E\n\u003Cp\u003E\n1, Connect another monitor to the PC running KSP (via HDMI port).\n\u003C/p\u003E\n\u003Cp\u003E\n2, Compile following codes and start KSP, this addon will take effect in Flight scene.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t[KSPAddon(KSPAddon.Startup.Flight, false)]\n    public class DisplayAddon : MonoBehaviour\n    {\n        private static bool bottonClicked;\n        private static global::Vessel vessel;\n\n        private static Camera galaxyCamera;\n        private static Camera scaledSpaceCamera;\n        private static Camera camera00;\n\n        private static int SecondDisplay = 1;\n        public void Start()\n        {\n            vessel = FlightGlobals.ActiveVessel;\n\n            Display.displays[SecondDisplay].Activate(); // Activate the second display\n\t\t\t\t\n\t\t\t\t // Copy in-game cameras\n            galaxyCamera = new GameObject().AddComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Camera\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n            galaxyCamera.CopyFrom(Camera.allCameras.FirstOrDefault(cam =\u0026gt; cam.name == \u0022GalaxyCamera\u0022));\n            galaxyCamera.name = \u0022GalaxyCameraCopy\u0022;\n\n            scaledSpaceCamera = new GameObject().AddComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Camera\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n            scaledSpaceCamera.CopyFrom(Camera.allCameras.FirstOrDefault(cam =\u0026gt; cam.name == \u0022Camera ScaledSpace\u0022));\n            scaledSpaceCamera.name = \u0022scaledSpaceCameraCopy\u0022;\n\n            camera00 = new GameObject().AddComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Camera\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n            camera00.CopyFrom(Camera.allCameras.FirstOrDefault(cam =\u0026gt; cam.name == \u0022Camera 00\u0022));\n            camera00.name = \u0022camera00Copy\u0022;\n\t\t\t\t \n           // New cameras render to the second display\n            galaxyCamera.targetDisplay = SecondDisplay;\n            scaledSpaceCamera.targetDisplay = SecondDisplay;\n            camera00.targetDisplay = SecondDisplay;\n        }\n\n        public void FixedUpdate()\n        {\n            if (bottonClicked) \n            {\n                camera00.transform.position = new Vector3(-5.5f, 0.7f, -2.0f); // Place the camera at somewhere near the vessel\n                camera00.transform.LookAt(vessel.CoM);\n\n                galaxyCamera.transform.rotation = camera00.transform.rotation;\n                scaledSpaceCamera.transform.rotation = camera00.transform.rotation;\n            }\n        }\n    }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n3, Load a save, load a vessel, then enable addon.\n\u003C/p\u003E\n\u003Cp\u003E\nPlease take a look at these 4 images:\u00A0\u003Ca href=\u0022https://imgur.com/a/uiOz9pn\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/a/uiOz9pn\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe first 2 images are contents in two monitors when the addon\u003Cspan style=\u0022font-size:20px;\u0022\u003E\u003Cspan style=\u0022color:#c0392b;\u0022\u003E\u003Cstrong\u003E IS NOT\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u00A0activated.\n\u003C/p\u003E\n\u003Cp\u003E\nThe last 2 images are contents in two monitors when the addon\u003Cspan style=\u0022font-size:12px;\u0022\u003E \u003C/span\u003E\u003Cspan style=\u0022font-size:20px;\u0022\u003E\u003Cspan style=\u0022color:#c0392b;\u0022\u003E\u003Cstrong\u003EIS\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u00A0activated.\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see, in the third image, the vessel is not shown.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know how to fix this? Thanks a lot!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Xavier513","CreatedById":103114,"CreatedDateTime":"2020-12-12T11:41:46Z","Content":"\n\u003Cp\u003E\nOK, my mistake, some lines of code weren\u0027t commented out correctly.\n\u003C/p\u003E\n\u003Cp\u003E\nThe code above works fine, now.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-12-12T16:29:13Z\u0022 title=\u002212/12/2020 04:29  PM\u0022 data-short=\u00223 yr\u0022\u003EDecember 12, 2020\u003C/time\u003E by Xavier513\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2020-12-12T15:14:53Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103114-xavier513/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103114\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103114-xavier513/\u0022 rel=\u0022\u0022\u003E@Xavier513\u003C/a\u003E do you happen to have a compiled dll of this?... I would be ineterested in testing it...\n\u003C/p\u003E\n"},{"CreatedByName":"Xavier513","CreatedById":103114,"CreatedDateTime":"2020-12-12T16:28:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223892857\u0022 data-ipsquote-contentid=\u0022198663\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221607786093\u0022 data-ipsquote-userid=\u002277721\u0022 data-ipsquote-username=\u0022Stone Blue\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Stone Blue said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103114-xavier513/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103114\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103114-xavier513/\u0022 rel=\u0022\u0022\u003E@Xavier513\u003C/a\u003E do you happen to have a compiled dll of this?... I would be ineterested in testing it...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nhi, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/77721-stone-blue/\u0026amp;do=hovercard\u0022 data-mentionid=\u002277721\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/77721-stone-blue/\u0022 rel=\u0022\u0022\u003E@Stone Blue\u003C/a\u003E, thanks.\n\u003C/p\u003E\n\u003Cp\u003E\nSorry, I\u0027m testing this function along with many other WIP features in my project, so it\u0027s not quite convenient to provide a DLL.\n\u003C/p\u003E\n\u003Cp\u003E\nBut the codes above are basicly all the codes needed for this feature, for now.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYou can\n\u003C/p\u003E\n\u003Cp\u003E\n1, create a new project in Visual Studio,\n\u003C/p\u003E\n\u003Cp\u003E\n2, create a C# file with those codes.\n\u003C/p\u003E\n\u003Cp\u003E\n3, add references of\u00A0Assembly-CSharp.dll and\u00A0UnityEngine.dll to project.\n\u003C/p\u003E\n\u003Cp\u003E\n4, then you can compile it to generate a DLL,\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBesides, you have to add a button somewhere(e.g. some part\u0027s right click menu) to set \u0022bottonClicked\u0022 to true, or activate the addon in other ways.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-12-12T16:34:07Z\u0022 title=\u002212/12/2020 04:34  PM\u0022 data-short=\u00223 yr\u0022\u003EDecember 12, 2020\u003C/time\u003E by Xavier513\u003C/strong\u003E\n\u003C/span\u003E\n"}]}