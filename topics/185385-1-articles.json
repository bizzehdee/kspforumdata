{"TopicId":185385,"ForumId":69,"TopicTitle":"Orbits unstable, drift and decay gradually","CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2019-06-12T01:59:47Z","PageNum":1,"Articles":[{"CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2019-06-12T01:59:47Z","Content":"\n\u003Cp\u003E\nI\u0027m not sure if it used to do this, but I began noticing it after the update. I\u0027m noticing that my orbit is changing very slightly over time. The orbit is outside of the atmosphere, and the option \u0022Orbital Drift Compensation\u0022 is checked, but my orbit still changes gradually over time. The tendency is to lower both Apoapsis and Periapsis, but on occasion I have seen one or the other raised slightly. I have removed all mods and DLC, and I\u0027m still getting this. So it\u0027s not being caused by mods.\n\u003C/p\u003E\n\u003Cp\u003E\nOver the course of 20 minutes, I saw my space station orbit go from\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n72.6998 km, 72.6686 km | time\u00A01:01\u003Cbr\u003E\n72.6985 km, 72.6684 km | time 1:21\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll also note that when I started noticing this effect, the space station had an Apoapsis of 72.706 km.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOf course, when the vessel isn\u0027t being actively watched, it doesn\u0027t change, which is expected.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I have Kerbal Engineer, I can see this effect in much more detail. The Semi Major Axis is dropping in a herky, jerky manner. It drops a bunch when you switch in and out of map mode. Of course, I can\u0027t be sure if Kerbal Engineer is making the effect worse, but nevertheless, the effect is there without it.\n\u003C/p\u003E\n\u003Cp\u003E\nAdmittedly, it\u0027s a very minor effect. But it makes me not want to switch to my relay satellites as they\u0027re flying in a very precise orbital formation.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone else see this? Has this always been there? Has it been made worse by a recent update?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: On closer observation, the periapsis dipped and went back up. The lowest point was:\n\u003C/p\u003E\n\u003Cp\u003E\n72.6996 km, 72.6682 km | time 1:08\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT 2:\u00A0Using scatterer causes the Semi Major Axis to drop much faster. But a complex vessel with lots of parts that makes it run at a lower frame rate,\u00A0doesn\u0027t change the rate at which the SMA drops.\n\u003C/p\u003E\n\u003Cp\u003E\nSatellites that are far away from their parent body are unaffected. Strangely, my Gilly satellites are having their SMA raised. Maybe because they are orbiting slower than Gilly is rotating?\n\u003C/p\u003E\n\u003Cp\u003E\nAnother curious observation: My Eve vessel that is in low, circular, polar orbit, has a \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of 90530 and a \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E of 90520. So nearly circular. The really weird thing is that the \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E and \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E are advancing forward in orbit faster than my ship is orbiting. So the time to Periapsis is constantly increasing, and same for the Apoapsis. The SMA is changing very little, but the point of Apoapsis and Periapsis are moving rapidly.\n\u003C/p\u003E\n\u003Cp\u003E\nOn closer observation, for my Eve vessel, when it\u0027s closer to Apoapsis, the Apoapsis rapidly lowers and the Periapsis raises. When it\u0027s closer to Periapsis, the Periapsis rapidly lowers and the Apoapsis raises. Physical time warp makes the orbit change extremely rapidly. Within a few seconds of maximum physics warp, my orbit changed to something like 90730 to 90320.\n\u003C/p\u003E\n\u003Cp\u003E\nOK, simply by quickly switching physics warp from 1x to 4x back to 1x, my orbit drastically changed. It went from 90500 90500 to something like 90700 90300 in one iteration. By doing multiple iterations of this, I managed to raise my Apoapsis to 92000 and lower my periapsis to 88000. I\u0027m pretty sure it wasn\u0027t this bad before.\n\u003C/p\u003E\n\u003Cp\u003E\nA few more iterations and I changed my orbit to 98200 82900. Just by messing with physics warp. Without using any thrust. This is absurd. Can someone please try this and tell me if it\u0027s just me?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT 3:\n\u003C/p\u003E\n\u003Cp\u003E\nStarted a new sandbox mode, put a simple spacecraft in a similar orbit of Eve, and tried it. No more orbital drifting. No\u00A0problems whatsoever. I\u0027m wondering if it\u0027s because I\u0027m in year 20 of my career mode in my main save? Maybe some part is causing it?\n\u003C/p\u003E\n\u003Cp\u003E\nAh, it\u00A0has nothing to do with the time. I warped until it was 19 years in the sandbox mode. Still no orbit drifting problem.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT 4:\n\u003C/p\u003E\n\u003Cp\u003E\nOK, it does have something to do with more complex spacecraft. I loaded my career mode space vessel into a low Eve polar orbit. The orbital decay returned. Having more crew also seems to affect it. Using the \u0022interior overlay\u0022 also makes it worse.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-14T00:02:41Z\u0022 title=\u002206/14/2019 12:02  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 14, 2019\u003C/time\u003E by vwr0527\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Serenity","CreatedById":179192,"CreatedDateTime":"2019-06-12T07:25:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223616840\u0022 data-ipsquote-contentid=\u0022185385\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560304787\u0022 data-ipsquote-userid=\u0022131900\u0022 data-ipsquote-username=\u0022vwr0527\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, vwr0527 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not sure if it used to do this, but I began noticing it after the update. I\u0027m noticing that my orbit is changing very slightly over time. The orbit is outside of the atmosphere, and the option \u0022Orbital Drift Compensation\u0022 is checked, but my orbit\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you have any \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E on by any chance?Do you have the Hibernation while in warp set to auto?\n\u003C/p\u003E\n\u003Cp\u003E\nSometimes with very precise orbits i find even using \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E can flicker the numbers.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-12T07:27:53Z\u0022 title=\u002206/12/2019 07:27  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 12, 2019\u003C/time\u003E by Boyster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2019-06-12T15:52:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223616988\u0022 data-ipsquote-contentid=\u0022185385\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560324359\u0022 data-ipsquote-userid=\u0022179192\u0022 data-ipsquote-username=\u0022Boyster\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Boyster said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo you have any \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E on by any chance?Do you have the Hibernation while in warp set to auto?\n\u003C/p\u003E\n\u003Cp\u003E\nSometimes with very precise orbits i find even using \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E can flicker the numbers.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNope, \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E was off. I\u00A0just had \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E, and I didn\u0027t touch the controls.\n\u003C/p\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2019-06-16T03:28:50Z","Content":"\n\u003Cp\u003E\nYou are not the only one to see these things.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhen simulating physics, KSP lets the orbital parameters drift, roughly as much as you say in the beginning of your post.\u00A0 It looks like KSP does not explicitly enforce that the center of mass follow the orbit, but simulates physics on every part, in which case I\u0027m not surprised the center of mass is pulled a few meters per minute from\u00A0its 700km radius orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nIn physics time-warp, indicated by yellow arrows, the orbital parameters do change with every 2\u00D7 3\u00D7 4\u00D7 step in acceleration.\u00A0 \u00A0For me, the orbit \u003Cu\u003Ereturns\u003C/u\u003E to within a meter of the original dimensions when I go back to 1\u00D7 speed.\u00A0 A\u00A0few iterations of time-warp can introduce noticeable errors.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYou didn\u0027t mention maneuver nodes, but\u00A0I\u0027ve seen large drift on the post-maneuver orbit, when I switch to map mode with the maneuver node active, especially if the burn is far in the future (\u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/22022\u0022 rel=\u0022external nofollow\u0022\u003Ebug tracker link\u003C/a\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\nThese errors are worse in \u0027low orbit\u0027, \u0026lt;100km altitude around Kerbin,\u00A0where\u00A0 KSP works in a coordinate frame\u00A0that rotates with the planet.\n\u003C/p\u003E\n\u003Cp\u003E\nYou said \u0022after the\u00A0update\u0022; if that means you use version 1.7 then you have the orbital parameters in the bottom-left panel, in case you want to use that instead of \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E sometimes.\n\u003C/p\u003E\n"},{"CreatedByName":"westamastaflash","CreatedById":110546,"CreatedDateTime":"2019-06-17T03:12:05Z","Content":"\n\u003Cp\u003E\nI noticed this as well, and it really does feel *worse*.\n\u003C/p\u003E\n\u003Cp\u003E\nThis problem makes Hyper-Warping with my mod Time Control a big problem in low orbit, since with sped-up time you can see the changes to the semi-major axis happening much more quickly (even with zero reduction to the physics engine fixed delta time step). *sometimes* the changes stop completely for maybe a complete orbit or two,\u00A0but then restart again.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s an example - I tracked the\u00A0vessel\u0027s \u0027orbitalenergy\u0027 parameter over time, and it is decreasing.\u00A0I think you can derive semi-major axis from this value.\n\u003C/p\u003E\n\u003Cp\u003E\nAt\u00A022:40:57, \u003Cem\u003Eorbitalenergy\u00A0\u003C/em\u003Ewas\u00A0-2528029.48805985\u003Cbr\u003E\nAt 22:50:32, \u003Cem\u003Eorbitalenergy\u00A0\u003C/em\u003Ewas -2528030.95893785\n\u003C/p\u003E\n\u003Cp\u003E\nI think\u00A0KSP is calculating specific orbital energy using the standard equation as -\u03BC / 2a (where a is the SMA), because my SMA was around 698488.7 m at the start and\u00A0698488.3 m at the end. I\u0027m not sure if\u00A0\u03BC includes your vessel\u0027s mass or not. I\u0027m guessing not since the G of the planet is so big it would hardly make any difference.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I use very high time scales (50x) to speed up time, the vessel\u0027s SMA (and orbital energy) loses many meters over the course of a single low orbit. It has to be something screwy\u00A0with how KSP is calculating the orbital parameters with respect to the planet over time.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI might have to introduce something in my mod where the orbital parameters are captured upon entering hyper warp and \u0027adjusted\u0027 if there are no forces currently acting on the center of mass of the vessel. This can be difficult though given that if I make an adjustment, how do I know the vessel is going to be moved to the \u0027correct\u0027 place... I really don\u0027t want to try to figure out how the coordinate system in KSP works so I can basically rewrite the logic that makes a vessel orbit a planet... I guess I could simply ignore the coordinate stuff altogether and use the previous orbital parameters and basic 2-body calcs (which i guess is what on-rails does too).\n\u003C/p\u003E\n\u003Cp\u003E\nOne thing is for sure, it definitely gets much worse when I use the hyper warp functions of my mod, which mess with Unity Time.timeScale and Time.fixedDeltaTime. I wonder if there\u0027s something screwy between the on-rails planets and the vessels happening when I speed time up.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-17T03:54:24Z\u0022 title=\u002206/17/2019 03:54  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 17, 2019\u003C/time\u003E by westamastaflash\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"vwr0527","CreatedById":131900,"CreatedDateTime":"2019-06-17T17:53:38Z","Content":"\n\u003Cp\u003E\nAh, thank you\u00A0\u003Cstrong\u003E\u003Ca data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162784-ohara/\u0026amp;do=hovercard\u0026amp;referrer=https%253A%252F%252Fforum.kerbalspaceprogram.com%252Findex.php%253F%252Ftopic%252F185385-orbits-unstable-drift-and-decay-gradually%252F\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162784-ohara/\u0022 style=\u0022background-color:transparent;color:inherit;\u0022 title=\u0022Go to OHara\u0027s profile\u0022 rel=\u0022\u0022\u003EOHara\u003C/a\u003E\u00A0and\u00A0\u003Ca data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110546-westamastaflash/\u0026amp;do=hovercard\u0026amp;referrer=https%253A%252F%252Fforum.kerbalspaceprogram.com%252Findex.php%253F%252Ftopic%252F185385-orbits-unstable-drift-and-decay-gradually%252F\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110546-westamastaflash/\u0022 style=\u0022background-color:transparent;color:inherit;\u0022 title=\u0022Go to westamastaflash\u0027s profile\u0022 rel=\u0022\u0022\u003Ewestamastaflash\u003C/a\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n@OHara I haven\u0027t checked maneuver nodes, but I do see \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E and \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E nodes moving on their own\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003E, with no \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E or thruster input. Sometimes they move faster than the craft in its orbit! These errors are indeed more noticeable\u00A0in low orbit. In higher orbits, the error is nearly undetectable.\u00A0I watched some of my higher orbiting crafts for a while and saw no drifting.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003EI am using 1.7.2, and I used the widget on the bottom left to watch my orbital parameters.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003E@westamastaflash I really would like to go back and try 1.6 and see if this is as bad. I didn\u0027t notice it before, but I wasn\u0027t paying very close attention. However, I noticed it almost immediately when I started playing again,\u00A0after 1.7 dropped. From your data, your drift\u00A0seems to be less severe than mine. But yes, physical time warp makes it much worse.\u00A0Besides physical time warp, these three factors make it worse: Having a complex craft,\u00A0having scatterer, and being in a low orbit around a high gravity body. Using Environmental Visual Enhancements seems to have very minimal effect, curiously.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis issue has been a bit more than a minor annoyance. With a randomly drifting orbit, you can\u0027t have a craft that sits on the very edge of the atmosphere. That was my plan for getting atmospheric\u00A0analyzer data from Eve\u0027s upper atmosphere.\n\u003C/p\u003E\n\u003Cp\u003E\nNot to mention that I can no longer switch to communication network satellites, for fear that they start drifting once I switch to them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003EI also have to stop using scatterer. While the orbital drift is already bad without it, it\u0027s ludicrous with it. It\u0027s around 20 times worse with it.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003EI\u0027m probably just gonna wait until this gets fixed to play again.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-06-17T21:26:09Z","Content":"\n\u003Cp\u003E\nI think this is caused by numerical imprecision when you\u0027re actively flying a vessel. The issue being that the active vessel gets physics simulated in the unity rectilinear coordinate system, which doesn\u0027t maintain orbital parameters exactly, so they drift. Physics warp reduces precision so exacerbates the problem.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen you\u0027re not flying it, the ship is \u0022on rails\u0022 and uses the Keplerian elements which don\u0027t drift, so the orbit stays exact.\n\u003C/p\u003E\n\u003Cp\u003E\nThere isn\u0027t really a fix (other than using something else for physics like Principia) you\u0027ll just have to accept it is a limitation of the game.\n\u003C/p\u003E\n"},{"CreatedByName":"Gargamel","CreatedById":64714,"CreatedDateTime":"2019-07-27T03:03:32Z","Content":"\n\u003Cp\u003E\nSome OT posts were split into their own thread:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/186762-principia-and-172/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/186762-principia-and-172/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}