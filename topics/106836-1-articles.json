{"TopicId":106836,"ForumId":29,"TopicTitle":"Why not work IsPrimary","CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:03:41Z","PageNum":1,"Articles":[{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:03:41Z","Content":"\n\u003Cp\u003EHello i have this source:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ETutorialPlugin.cs:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing TutorialPlugin.Extensions;\u003Cbr\u003E\u003Cbr\u003Enamespace TutorialPlugin\u003Cbr\u003E{\u003Cbr\u003E    public class TutorialPlugin : PartModule\u003Cbr\u003E    {\u003Cbr\u003E        private Rect _windowPosition = new Rect();\u003Cbr\u003E        private GUIStyle _windowsStyle, _labelStyle;\u003Cbr\u003E        private bool _hasInitStyles = false;\u003Cbr\u003E\u003Cbr\u003E        public override void OnStart(StartState state)\u003Cbr\u003E        {\u003Cbr\u003E            if (state != StartState.Editor)\u003Cbr\u003E                if (!_hasInitStyles) InitStyles();\u003Cbr\u003E            RenderingManager.AddToPostDrawQueue(0, OnDraw);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void OnDraw()\u003Cbr\u003E        {\u003Cbr\u003E            if (this.vessel == FlightGlobals.ActiveVessel)\u003Cbr\u003E                _windowPosition = GUILayout.Window(10, _windowPosition, OnWindow, \u0022Hello v 0.0.1a Dev\u0022, _windowsStyle);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void OnWindow(int windowId)\u003Cbr\u003E        {\u003Cbr\u003E            GUILayout.BeginHorizontal();\u003Cbr\u003E            GUILayout.Label(\u0022hmmmmm\u0022, _labelStyle);\u003Cbr\u003E            GUILayout.EndHorizontal();\u003Cbr\u003E\u003Cbr\u003E            GUI.DragWindow();\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void InitStyles()\u003Cbr\u003E        {\u003Cbr\u003E            _windowsStyle = new GUIStyle(HighLogic.Skin.window);\u003Cbr\u003E            _windowsStyle.fixedWidth = 250f;\u003Cbr\u003E\u003Cbr\u003E            _labelStyle = new GUIStyle(HighLogic.Skin.label);\u003Cbr\u003E            _labelStyle.stretchWidth = true;\u003Cbr\u003E\u003Cbr\u003E            _hasInitStyles = true;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EPartExtensions.cs:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace TutorialPlugin.Extensions\u003Cbr\u003E{\u003Cbr\u003E    public static class PartExtensions\u003Cbr\u003E    {\u003Cbr\u003E        public static bool IsPrimary(this Part thisPart, List\u0026lt;Part\u0026gt; partsList, int moduleClassID)\u003Cbr\u003E        {\u003Cbr\u003E            foreach (Part part in partsList)\u003Cbr\u003E            {\u003Cbr\u003E                if (part == thisPart)\u003Cbr\u003E                    return true;\u003Cbr\u003E                else\u003Cbr\u003E                    break;\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E            return false;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhere is error, all code is on youtube tutorial ! why is not working ?\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-05-02T11:08:06Z","Content":"\n\u003Cp\u003EHave you added the module \u0022TutorialPlugin\u0022 to any parts?\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EThis looks like the sort of thing you probably want to run using the KSPAddon framework rather than a PartModule (part modules are good if you need multiple instances, KSPAddon is easier for single instances). \u003Ca href=\u0022https://github.com/Crzyrndm/SAS-Reset/blob/master/SAS%20Reset/SAS%20Reset/SASReset.cs#L7\u0022 rel=\u0022external nofollow\u0022\u003ESee this simple plugin as an example\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-02T11:12:50Z\u0022 title=\u002205/02/2015 11:12  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 2, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:15:46Z","Content":"\n\u003Cp\u003Eyes, if i ihave only TutorialPlugin.cs with out line \u0022using TutorialPlugin.Extensions\u0022 and remove file PartExtensions.cs then work. on part.cfg i add MODULE { name = TutorialPlugin }\u003C/p\u003E\n"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:16:29Z","Content":"\n\u003Cp\u003EYes: \u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E name = TutorialPlugin\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\n"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:33:36Z","Content":"\n\u003Cp\u003Eif i delete PartExtensions.cs work, if i add 2 same component erroor windows. PartExtensions.cs is bug fix on place few same component.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Ewhere i found normal documentation with examples as for php (php.net), but on KSP.\u003C/p\u003E\n"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T14:08:02Z","Content":"\n\u003Cp\u003Ewhy not work ?\u003C/p\u003E\n"},{"CreatedByName":"udk_lethal_d0se","CreatedById":62149,"CreatedDateTime":"2015-05-02T19:04:07Z","Content":"\n\u003Cp\u003EYour main class has an argument missing in one of your if statements, I think you may have missed part of the video tutorials.\u003C/p\u003E\u003Cp\u003EThis original code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E private void OnDraw()\u003Cbr\u003E        {\u003Cbr\u003E            if (this.vessel == FlightGlobals.ActiveVessel)\u003Cbr\u003E                _windowPosition = GUILayout.Window(10, _windowPosition, OnWindow, \u0022Hello v 0.0.1a Dev\u0022, _windowsStyle);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EShould be this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate void OnDraw()\u003Cbr\u003E        {\u003Cbr\u003E            if (this.vessel == FlightGlobals.ActiveVessel \u0026amp;\u0026amp; this.part.IsPrimary(this.vessel.parts, this.ClassID))\u003Cbr\u003E                _windowPosition = GUILayout.Window(10, _windowPosition, OnWindow, \u0022Hello v 0.0.1a Dev\u0022, _windowsStyle);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe section you are missing is an addition to the IF statement:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ethis.part.IsPrimary(this.vessel.parts, this.ClassID)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHope this helps, sorry if there are any typo\u0027s; go back to the video series and have a look, I\u0027ve recently watched through them and know your code is incomplete.\u003C/p\u003E\n"}]}