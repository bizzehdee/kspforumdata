{"TopicId":178370,"ForumId":29,"TopicTitle":"Drag cubes and pogo sticks.","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-09-17T22:05:39Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-09-17T22:05:39Z","Content":"\n\u003Cp\u003E\nSo, here\u0027s the code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E            part.DragCubes.Procedural = true;\n            part.DragCubes.ForceUpdate(true, true, true);\n            part.DragCubes.SetDragWeights();\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nPretty simple eh?\u00A0 Well, here\u0027s the problem.\u00A0 If, procedural is set to true and I try to SetDragWeights, attempting to\u00A0attach a part to a mirrored part takes on all the aspects of a pogo stick ride.\n\u003C/p\u003E\n\u003Cp\u003E\nI have these 3 lines running in my OnStart event.\u00A0 I place any part in the hangar.\u00A0 I then place a mirrored part with my partmodule on that one.\u00A0 I then try to attach a part to the stack node on one of those mirrored parts (also with my partmodule).\u00A0 \u00A0As I\u00A0move the stack nodes closer together they snap into position.\u00A0 That creates a new mirrored part and executes\u00A0 my OnStart. Those 3 lines then\u00A0break\u00A0the snap between the stack nodes and I assume the mirrored part vanishes.\u00A0 Then the original part tries again to snap to the node.\u00A0The mirrored part is\u00A0instantly created again, running my OnStart event causing the part to vanish... ad infinitum.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo, here\u0027s my questions\n\u003C/p\u003E\n\u003Cp\u003E\nWhat does procedural actually do?\u00A0 (ya, this is someone else\u0027s code being used with permission.)\u00A0 If it set it to false, I don\u0027t get the part hopping.\n\u003C/p\u003E\n\u003Cp\u003E\nNext, what does that SetDragWeights actually do?\u00A0 If I leave it out, I don\u0027t get the hopping.\u00A0 I spat out the array\u00A0part.DragCubes.WeightedDrag after each of those lines and at no time did I see that weighted drag array change.\u00A0 (and the part size, mass, etc\u00A0definitely changed in the process.)\n\u003C/p\u003E\n\u003Cp\u003E\nThanks.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-09-18T08:04:50Z","Content":"\n\u003Cp\u003E\nProcedural rebuilds the Drag cube from the part Geometry each frame. It is slow and\u00A0should only be used for stuff where the geometry has unlimited variation. And it most likely destroys any other info on the cube.\n\u003C/p\u003E\n\u003Cp\u003E\nSetDragWeights set how much each of your list of cube contributes. You are supposed to lerp between 2 of the cubes with it.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd I am not sure how anything dragcube related reacts in the Editor since of lot of it is related to the FlighIntegrator and it does not run in the Editor.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-09-18T12:43:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223453278\u0022 data-ipsquote-contentid=\u0022178370\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221537257890\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nProcedural rebuilds the Drag cube from the part Geometry each frame. It is slow and\u00A0should only be used for stuff where the geometry has unlimited variation. And it most likely destroys any other info on the cube.\n\u003C/p\u003E\n\u003Cp\u003E\nSetDragWeights set how much each of your list of cube contributes. You are supposed to lerp between 2 of the cubes with it.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd I am not sure how anything dragcube related reacts in the Editor since of lot of it is related to the FlighIntegrator\u003Cspan\u003E\uFEFF\u003C/span\u003E and it does not run in the Editor.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks Sarbian.\u00A0 This code is connected with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\u0027s AnisotripicPartResizer which allows part resizing in 2 dimensions.\u00A0 For now, these parts are only resized in the editor. Once the ship is launched, their size is fixed.\u00A0 Obviously, changing the drag cubes when a part gets resized will be essential.\u00A0 But from what you\u0027re saying, I\u0027m assuming 2 things.\u00A0 That DragCubes.Procedural\u00A0should be set to false since the drag on these parts won\u0027t change once launched and that this code could be run once in the OnStart if the scene is flight and have the same effect?\u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-09-18T12:50:42Z","Content":"\n\u003Cp\u003E\nYes, running it once in onStart should be enough. For a 2d resize I guess you could also just resize the cubes but I never tried it...\n\u003C/p\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2018-09-18T13:02:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223453346\u0022 data-ipsquote-contentid=\u0022178370\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221537274609\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks Sarbian.\u00A0 This code is connected with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\u0027s AnisotripicPartResizer which allows part resizing in 2 dimensions.\u00A0 For now, these parts are only resized in the editor. Once the ship is launched, their size is fixed.\u00A0 Obviously, changing the drag cubes when a part gets resized will be essential.\u00A0 But from what you\u0027re saying, I\u0027m assuming 2 things.\u00A0 That DragCubes.Procedural\u00A0should be set to false since the drag on these parts won\u0027t change once launched and that this code could be run once in the OnStart if the scene is flight and have the same effect?\u00A0\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe code in\u00A0\u003Ca href=\u0022https://github.com/allista/AnisotropicPartResizer/blob/6406c5fdd5963e76291e1c34fd94477aa105d75d/AnisotropicResizable.cs#L145\u0022 rel=\u0022external nofollow\u0022\u003EAnisotropicResizable.cs#L145\u003C/a\u003E\u00A0 does just this: recalculates drag cubes in OnStart.\n\u003C/p\u003E\n\u003Cp\u003E\nAnimations, however they\u0027re implemented, should use something like this:\u00A0\u003Ca href=\u0022https://github.com/allista/MultiAnimators/blob/master/MultiGeometryAnimator.cs\u0022 rel=\u0022external nofollow\u0022\u003EMultiGeometryAnimator.cs\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-09-19T03:08:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223453356\u0022 data-ipsquote-contentid=\u0022178370\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221537275753\u0022 data-ipsquote-userid=\u002299885\u0022 data-ipsquote-username=\u0022allista\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, allista said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe code in\u00A0\u003Ca href=\u0022https://github.com/allista/AnisotropicPartResizer/blob/6406c5fdd5963e76291e1c34fd94477aa105d75d/AnisotropicResizable.cs#L145\u0022 rel=\u0022external nofollow\u0022\u003EAnisotropicResizable.cs#L145\u003C/a\u003E\u00A0 does just this: recalculates drag cubes in OnStart.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nRight, that\u0027s where it\u0027s running now in the editor\u00A0and is creating the issue with the cloned part.\u00A0 I\u0027ll test it in flight and see how it goes.\u00A0 Thanks guys.\n\u003C/p\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2018-09-19T05:00:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223453856\u0022 data-ipsquote-contentid=\u0022178370\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221537326525\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nRight, that\u0027s where it\u0027s running now in the editor\u00A0and is creating the issue with the cloned part.\u00A0 I\u0027ll test it in flight and see how it goes.\u00A0 Thanks guys.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh... It seems I wasn\u0027t paying enough attention here. Reckon I also need to fix this now\u00A0\u003Cimg alt=\u0022:blush:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 title=\u0022:blush:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThanks)\n\u003C/p\u003E\n"}]}