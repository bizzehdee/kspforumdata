{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":360,"Articles":[{"CreatedByName":"Kerbalwings","CreatedById":206805,"CreatedDateTime":"2020-10-14T20:00:43Z","Content":"\u003E \n\u003E \n\u003E 17 hours ago, Drew Kerman said:\n\u003E \n\u003E \n\u003E Alt\u002BF11 brings up the settings. Switch over to ocean settings and use more wind or wave magnitude (be sure to click the rebuild ocean button). Whitecaps don\u0027t show up on relatively calm seas that are depicted by default\n\u003E \n\nThanks!"},{"CreatedByName":"woodbyte","CreatedById":196048,"CreatedDateTime":"2020-10-25T19:16:50Z","Content":"~~Sorry, I\u0027ve not been following this thread carefully but was wondering - have there been any regressions in regards to AA quality since last year? I\u0027m noticing lots of jaggies on the horizon when using MSAA, but I remember it being completely clean before.~~\n\nEdit: Nevermind, the issue was being caused by the ambient occlusion module of [KS3P](https://forum.kerbalspaceprogram.com/index.php?/topic/168763-17x-ks3p/). It\u0027s still a new behavior that wasn\u0027t there before, but not a bug with Scatterer per se.\n\n**Edited \u003Ctime datetime=\u00222020-10-25T19:40:04Z\u0022 title=\u002210/25/2020 07:40  PM\u0022 data-short=\u00223 yr\u0022\u003EOctober 25, 2020\u003C/time\u003E by woodbyte**"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2020-10-31T13:52:49Z","Content":"\u003E \n\u003E \n\u003E On 8/17/2020 at 2:34 PM, Entropian said:\n\u003E \n\u003E \n\u003E I just did;  the bug is still there, and the rings are buggy as well: [https://www.dropbox.com/s/wp3f4wz71xs8ysf/Buggy atmosphere 3.PNG?dl=0](https://www.dropbox.com/s/wp3f4wz71xs8ysf/Buggy%20atmosphere%203.PNG?dl=0)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Log: [https://www.dropbox.com/s/221v8oprmj60sm0/Player.log?dl=0](https://www.dropbox.com/s/221v8oprmj60sm0/Player.log?dl=0)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Could the problem be with RVE64k?\n\u003E \n\nThis is due to RVE64k not having scatterer atmosphere shaders setup for those planets yet, it\u0027s not the fault of Scatterer, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E or any other mod. This is why on the front page of RVE64k is says the mod only supports Earth Currently ![:)](//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222020-10-31T13:53:10Z\u0022 title=\u002210/31/2020 01:53  PM\u0022 data-short=\u00223 yr\u0022\u003EOctober 31, 2020\u003C/time\u003E by pingopete**"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2020-11-08T02:12:24Z","Content":"I am having these lines (watch in HD) is this a known issue? can it be solved?\n\n[https://drive.google.com/file/d/11crcGySZcYqf_kslfpc2fbOHlLvInXeH/view?usp=sharing](https://drive.google.com/file/d/11crcGySZcYqf_kslfpc2fbOHlLvInXeH/view?usp=sharing)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-08T09:46:11Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, Agustin said:\n\u003E \n\u003E \n\u003E I am having these lines (watch in HD) is this a known issue? can it be solved?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://drive.google.com/file/d/11crcGySZcYqf_kslfpc2fbOHlLvInXeH/view?usp=sharing](https://drive.google.com/file/d/11crcGySZcYqf_kslfpc2fbOHlLvInXeH/view?usp=sharing)\n\u003E \n\nYou mean the black dots? That\u0027s z-fighting, is this on dx11 or opengl?\n\n**Edited \u003Ctime datetime=\u00222020-11-08T09:46:53Z\u0022 title=\u002211/08/2020 09:46  AM\u0022 data-short=\u00223 yr\u0022\u003ENovember 8, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2020-11-08T15:28:05Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E You mean the black dots? That\u0027s z-fighting, is this on dx11 or opengl?\n\u003E \n\nIts ksp 1.10 I guess its DX11 (default)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-08T17:41:04Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Agustin said:\n\u003E \n\u003E \n\u003E Its ksp 1.10 I guess its DX11 (default)\n\u003E \n\nI see them from time to time at large distances but never that close and that many. Anything particular about your install?"},{"CreatedByName":"Drupegod02","CreatedById":205067,"CreatedDateTime":"2020-11-08T18:03:16Z","Content":"Whenever i load into the main menu for the first time, there are clouds . But if i edit my settings / enter and exit a save, scatterer reverts back to just blue atmosphere with no clouds. I am on 1.10.1  \n\nMy mods:  \n\nAlcubierre Warp Drive (Stand-alone) (AlcubierreStandalone 1.3.0.0)  \n\nBetterBurnTime (BetterBurnTime 1.10)  \n\nBetterCrewAssignment (BetterCrewAssignment 1.4)  \n\nBetterTimeWarpContinued (BetterTimeWarpCont 2.3.12.6)  \n\nBreaking Ground (BreakingGround-DLC 1.5.1)  \n\nClickThrough Blocker (ClickThroughBlocker 1:0.1.10.14)  \n\nCommNet Antennas Extension (CommNetAntennasExtension 2.1.3)  \n\nCommNet Antennas Info (CommNetAntennasInfo 3.0.2)  \n\nCommunity Tech Tree (CommunityTechTree 1:3.4.2)  \n\nDistant Object Enhancement Continued (DistantObject v2.0.1.1)  \n\nDistant Object Enhancement Continued default config (DistantObject-default v2.0.1.1)  \n\nEnvironmental Visual Enhancements (EnvironmentalVisualEnhancements 3:1.10.1-3)  \n\nHeat Control (HeatControl 0.5.2)  \n\nHide Empty Tech Tree Nodes (HideEmptyTechNodes 1.1.2)  \n\nHyperEdit (HyperEdit 1.5.8.0)  \n\nInterstellar Fuel Switch Core (InterstellarFuelSwitch-Core 3.18)  \n\nJoolBiomes (JoolBiomes 1.1)  \n\nJX2Antenna (JX2Antenna 2.0.5)  \n\nKerbal Joint Reinforcement Continued (KerbalJointReinforcementContinued v3.5.1)  \n\nKolyphemus System Continued (KolyphemusSystemContinued 0.8)  \n\nKSP ExtendedAntennaProgression (ExtendedAntennaProgression v0.1.2)  \n\nKSP Interstellar Extended (KSPInterstellarExtended 1.25.31)  \n\nMaking History (MakingHistory-DLC 1.10.1)  \n\nMechJeb 2 (MechJeb2 2.11.0.0)  \n\nPlanetShine (PlanetShine 0.2.6.3)  \n\nPlanetShine - Default configuration (PlanetShine-Config-Default 0.2.6.3)  \n\nRemoteTech Redev Antennas (RemoteTechRedevAntennas 0.1.1)  \n\nscatterer (Scatterer 3:v0.0632)  \n\nScatterer Default Config (Scatterer-config 3:v0.0632)  \n\nScatterer Sunflare (Scatterer-sunflare 3:v0.0632)  \n\nSnarkiverse (Snarkiverse 1.2)  \n\nSpaceY Heavy Lifters (SpaceY-Lifters 1.17.2)  \n\nTextureReplacer (TextureReplacer v4.2.3)  \n\nThe Janitor\u0027s Closet (JanitorsCloset 0.3.7)  \n\nToolbar Controller (ToolbarController 1:0.1.9.4)  \n\nTracking Station Evolved (TrackingStationEvolved 6.0)  \n\nTweakScale - Rescale Everything! (TweakScale v2.4.3.21)  \n\nZero MiniAVC (ZeroMiniAVC 1:1.1.0.1)  \n\nAND  \n\nGalaxies Unbound the 3rd test version\n\n**Edited \u003Ctime datetime=\u00222020-11-08T18:03:56Z\u0022 title=\u002211/08/2020 06:03  PM\u0022 data-short=\u00223 yr\u0022\u003ENovember 8, 2020\u003C/time\u003E by Drupegod02**"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2020-11-08T19:59:45Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E I see them from time to time at large distances but never that close and that many. Anything particular about your install?\n\u003E \n\nYes, I am running parallax. But removing Scatterer removed the effect. So maybe its an incompability with both mods?\n\nThis is my gamedata folder:\n\nSpoiler\n\n![YJWCVNc.png](https://i.imgur.com/YJWCVNc.png)\n\n**Edited \u003Ctime datetime=\u00222020-11-08T20:05:04Z\u0022 title=\u002211/08/2020 08:05  PM\u0022 data-short=\u00223 yr\u0022\u003ENovember 8, 2020\u003C/time\u003E by Agustin**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-08T20:51:03Z","Content":"\u003E \n\u003E \n\u003E 49 minutes ago, Agustin said:\n\u003E \n\u003E \n\u003E Yes, I am running parallax. But removing Scatterer removed the effect. So maybe its an incompability with both mods?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This is my gamedata folder:\n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E [![YJWCVNc.png](https://i.imgur.com/YJWCVNc.png)](https://i.imgur.com/YJWCVNc.png \u0022Enlarge image\u0022)\n\u003E \n\nYep it\u0027s a known issue between parallax and scatterer we haven\u0027t yet decided on a fix.\n\n\u003E \n\u003E \n\u003E 2 hours ago, Drupegod02 said:\n\u003E \n\u003E \n\u003E Whenever i load into the main menu for the first time, there are clouds . But if i edit my settings / enter and exit a save, scatterer reverts back to just blue atmosphere with no clouds. I am on 1.10.1\n\u003E \n\nSo the clouds are from \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, not scatterer. What do you mean when you edit your settings?"},{"CreatedByName":"Drupegod02","CreatedById":205067,"CreatedDateTime":"2020-11-08T22:55:15Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E So the clouds are from \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E, not scatterer. What do you mean when you edit your settings?\n\u003E \n\nI mean that whenever I open my settings, say changing my resolution"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2020-11-09T00:12:22Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Drupegod02 said:\n\u003E \n\u003E \n\u003E I mean that whenever I open my settings, say changing my resolution\n\u003E \n\nThe menu has allways been bugged in that way in my experience. Not a big deal since you don\u0027t play within the menu, you play in the actual game."},{"CreatedByName":"computercat04","CreatedById":207723,"CreatedDateTime":"2020-11-13T01:44:16Z","Content":"Is there a way to make Scatterer less GPU intensive? I\u0027m having a very low framerate."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-13T08:40:01Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, computercat04 said:\n\u003E \n\u003E \n\u003E Is there a way to make Scatterer less GPU intensive? I\u0027m having a very low framerate.\n\u003E \n\nWhich specs do you have? Disable long distance shadows and shadows on the ocean and restart the game. If it still runs slow disable the ocean shaders.\n\nFor next versions I will introduce config presets so users can directly scale quality/performance up or down without fiddling with individual settings.\n\n**Edited \u003Ctime datetime=\u00222020-11-13T09:41:18Z\u0022 title=\u002211/13/2020 09:41  AM\u0022 data-short=\u00223 yr\u0022\u003ENovember 13, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"computercat04","CreatedById":207723,"CreatedDateTime":"2020-11-13T11:31:30Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Which specs do you have? Disable long distance shadows and shadows on the ocean and restart the game. If it still runs slow disable the ocean shaders.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E For next versions I will introduce config presets so users can directly scale quality/performance up or down without fiddling with individual settings.\n\u003E \n\n**Dell Latitude E6420**\n\nIntel Core i7- 2620M\n\nIntel HD Graphics 3000 (~800 MB)\n\n6 GB RAM"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-13T12:32:30Z","Content":"\u003E \n\u003E \n\u003E 59 minutes ago, computercat04 said:\n\u003E \n\u003E \n\u003E **Dell Latitude E6420**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Intel Core i7- 2620M\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Intel HD Graphics 3000 (~800 MB)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 6 GB RAM\n\u003E \n\nHmm with integrated graphics you\u0027ll have to disable the ocean and the long distance shadows (then restart the game), let me know how it runs then, you\u0027ll just have the atmospheric scattering \u002B \u0022sunset\u0022 lighting left."},{"CreatedByName":"computercat04","CreatedById":207723,"CreatedDateTime":"2020-11-13T14:25:51Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Hmm with integrated graphics you\u0027ll have to disable the ocean and the long distance shadows (then restart the game), let me know how it runs then, you\u0027ll just have the atmospheric scattering \u002B \u0022sunset\u0022 lighting left.\n\u003E \n\nCan I disable  those on the config too?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-13T14:53:36Z","Content":"\u003E \n\u003E \n\u003E 27 minutes ago, computercat04 said:\n\u003E \n\u003E \n\u003E Can I disable  those on the config too?\n\u003E \n\nYes, this section is incomplete but you\u0027ll find here how to do it: [https://github.com/LGhassen/Scatterer/wiki/GeneralConfig](https://github.com/LGhassen/Scatterer/wiki/GeneralConfig)"},{"CreatedByName":"computercat04","CreatedById":207723,"CreatedDateTime":"2020-11-13T15:08:20Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Yes, this section is incomplete but you\u0027ll find here how to do it: [https://github.com/LGhassen/Scatterer/wiki/GeneralConfig](https://github.com/LGhassen/Scatterer/wiki/GeneralConfig)\n\u003E \n\nOk. Thanks."},{"CreatedByName":"computercat04","CreatedById":207723,"CreatedDateTime":"2020-11-13T22:19:36Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E let me know how it runs then\n\u003E \n\nStill the same. I think atmospheric scattering is the problem."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-13T23:53:34Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, computercat04 said:\n\u003E \n\u003E \n\u003E Still the same. I think atmospheric scattering is the problem.\n\u003E \n\nI never thought of scattering as expensive or slow, it\u0027s essentially just a lookup texture. But also I never tested on integrated graphics so can\u0027t tell if there is a bottleneck there somewhere or another issue. I might just fire up my old laptop and disable the mobile discrete GPU and see how it goes, it should have an intel hd 4000.\n\nWhat framerate are you getting now? Have you checked your GPU usage? Have you checked CPU usage? Have you checked your log for nullref spams?\n\n**Edited \u003Ctime datetime=\u00222020-11-13T23:59:03Z\u0022 title=\u002211/13/2020 11:59  PM\u0022 data-short=\u00223 yr\u0022\u003ENovember 13, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-14T11:02:56Z","Content":"[@computercat04](https://forum.kerbalspaceprogram.com/index.php?/profile/207723-computercat04/)As promised, I fired up the game on a hd graphics 4000. Resolution: 1366x768, testing with one pod on the launchpad.\n\nStock game: 20 fps\n\nScatterer with ocean and shadows disabled, one pod on the launchpad: 7 fps\n\nScatterer with everything disabled (leaving just the sky and scattering): 15 fps\n\nI don\u0027t think there is anything wrong with these results, but I think integrated graphics don\u0027t have much to work with. I think if you\u0027re running the base game at 20 fps you probably shouldn\u0027t be looking at graphics mods."},{"CreatedByName":"computercat04","CreatedById":207723,"CreatedDateTime":"2020-11-14T15:01:36Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E you probably shouldn\u0027t be looking at graphics mods.\n\u003E \n\nYeah. I\u0027ve been thinking of that. ![:(](//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_sad.gif \u0022:(\u0022) I should wait to get a new PC."},{"CreatedByName":"Mad17","CreatedById":208189,"CreatedDateTime":"2020-11-15T20:18:58Z","Content":"Hi, wanted to ask here before submitting a request. I\u0027m getting white atmospheres with scatter any idea on a fix?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-11-15T20:56:21Z","Content":"\u003E \n\u003E \n\u003E 36 minutes ago, Mad17 said:\n\u003E \n\u003E \n\u003E Hi, wanted to ask here before submitting a request. I\u0027m getting white atmospheres with scatter any idea on a fix?\n\u003E \n\nCheck your GameData folder for duplicate scatterer installs, or nested GameData folders. Check your log for errors."}]}