{"TopicId":116332,"ForumId":29,"TopicTitle":"TechTree nodes icons","CreatedByName":"Grimly","CreatedById":144009,"CreatedDateTime":"2015-07-19T17:12:10Z","PageNum":1,"Articles":[{"CreatedByName":"Grimly","CreatedById":144009,"CreatedDateTime":"2015-07-19T17:12:10Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003EI\u0027m looking for what, in the game, links together the \u0022icon\u0022 value of a RDNode to the real icon.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ETechTree{\u003Cbr\u003E\tRDNode\u003Cbr\u003E\t{\u003Cbr\u003E\t\tid = start\u003Cbr\u003E\t\ttitle = Start\u003Cbr\u003E\t\tdescription = The technology we started out with.\u003Cbr\u003E\t\tcost = 0\u003Cbr\u003E\t\thideEmpty = False\u003Cbr\u003E\t\tnodeName = node0_start\u003Cbr\u003E\t\tanyToUnlock = False\u003Cbr\u003E\t\ticon = RDicon_start          \u0026lt;=== How does it match \u0022R\u0026amp;D_node_icon_start.png\u0022 ???\u003Cbr\u003E\t\tpos = -2568,1199,-1\u003Cbr\u003E\t\tscale = 0.6\u003Cbr\u003E\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve found that this value is not a filename, because even if it is close for some of them, you cannot achieve the match from the value to the images stored into GameData/Squad/PartList/SimpleIcons through a simple transformation.\u003C/p\u003E\u003Cp\u003EA simple example that made me first think the icon is the filename is the \u0022Science Tech\u0022 node that uses the last icon file (by alphabetic order) RDicon_telescope.png\u003C/p\u003E\u003Cp\u003EIt matches the \u0022icon\u0022 value as \u0022RDicon_telescope\u0022. I expected then it was the filename without its expansion.\u003C/p\u003E\u003Cp\u003EThen I realized that some \u0022R\u0026amp;D_node_icon_*\u0022 files requires that \u0022R\u0026amp;D_node_icon_*\u0022 part to be replaced to \u0022RDicon_*\u0022.\u003C/p\u003E\u003Cp\u003EFinally I came to the \u0022Basic Rocketry\u0022 tech node (the first in the config not to fit my rules) and the transformation is not trivial at all. You cannot, by general operation on strings, go from \u0022RDicon_rocketry-basic\u0022 to \u0022R\u0026amp;D_node_icon_basicrocketry.png\u0022.\u003C/p\u003E\u003Cp\u003EThere must then be some kind of database that makes these matches. But I can\u0027t find where. I know it\u0027s not in any .cfg file but that\u0027s all I know.\u003C/p\u003E\u003Cp\u003EAdding a node with a matching \u0022icon\u0022 value and filename doesn\u0027t help, it changes the display to \u0022R\u0026amp;D_node_icon_generic.png\u0022\u003C/p\u003E\u003Cp\u003EDoes someone knows how to add a new icon into the tech tree ?\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-07-19T19:14:43Z","Content":"\n\u003Cp\u003ERDController.Instance.iconLoader.iconDictionary.Add(\u0022MyIcondName\u0022,new RUI.Icons.Simple.Icon(\u0022MyIcondName\u0022, texture));\u003C/p\u003E\n"},{"CreatedByName":"Grimly","CreatedById":144009,"CreatedDateTime":"2015-07-19T20:01:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003ERDController.Instance.iconLoader.iconDictionary.Add(\u0022MyIcondName\u0022,new RUI.Icons.Simple.Icon(\u0022MyIcondName\u0022, texture));\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHi.\u003C/p\u003E\u003Cp\u003ESo that means we require a plugin to add an icon ? Sounds like a good exercice to make a KSP plugin.\u003C/p\u003E\u003Cp\u003EThanks for the answer.\u003C/p\u003E\n"},{"CreatedByName":"Grimly","CreatedById":144009,"CreatedDateTime":"2015-07-22T21:21:41Z","Content":"\n\u003Cp\u003EHere I am again and I can\u0027t find a good way yet to make my plugin work.\u003C/p\u003E\u003Cp\u003EI\u0027ve managed, looking at different plugins such as module manager, tree toppler and tree loader, to come to this instance of my module : \u003Ca href=\u0022http://paste.ubuntu.com/11922597/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://paste.ubuntu.com/11922597/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt is installed with ModuleManager and the following patch : \u003Ca href=\u0022http://paste.ubuntu.com/11922606/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://paste.ubuntu.com/11922606/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe file GameData/Squad/PartList/SimpleIcons/R\u0026amp;D_node_icon_end.png is a copy of GameData/Squad/PartList/SimpleIcons/R\u0026amp;D_node_icon_start.png\u003C/p\u003E\u003Cp\u003EThis plugin changes the icon displayed at the top right part of the screen when I select the new R\u0026amp;D node (and here I found out it\u0027s ugly, it needs double the resolution) but fails at changing the display on the R\u0026amp;D tree.\u003C/p\u003E\u003Cp\u003EHere are some logs produced by my plugin : \u003Ca href=\u0022http://paste.ubuntu.com/11922640/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://paste.ubuntu.com/11922640/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe initial proposal from sarbian had either no effect or something needs an update and I have no clue about what to update.\u003C/p\u003E\u003Cp\u003EI\u0027ll accept any piece of help \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-22T21:24:43Z\u0022 title=\u002207/22/2015 09:24  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 22, 2015\u003C/time\u003E by Grimly\u003C/strong\u003E\n\u003Cbr\u003EAdded plugin logs\n\u003C/span\u003E\n"}]}