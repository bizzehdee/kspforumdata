{"TopicId":82051,"ForumId":20,"TopicTitle":"[WIN] [SCRIPT] [EXTERNAL] PMCSE - Poor Man\u0026#039;s Contract Science Eraser","CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-08-18T15:20:05Z","PageNum":1,"Articles":[{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-08-18T15:20:05Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003Cstrong\u003ETHIS DOES NOT WORK WITH FINE PRINT. YOU WILL CRY IF YOU TRY TO USE THESE TOGETHER\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know about the rest of you, but I\u0027m getting sick of having more and more ways to get science, when the tech tree can already be unlocked without even leaving Kerbin\u0027s SOI.\u003C/p\u003E\u003Cp\u003EI was hoping someone smart would have by now released a mod that would eliminate contract science gains, but so far that mod has not come forth. So I (read: someone not smart) came up with the next best thing: A little script that will - with the help of the SED utility - scrub your persistent.sfs file of science gains for you!\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EHOW TO SET UP\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EYou have to do this \u003C/em\u003E\u003Cstrong\u003E\u003Cem\u003Eone time\u003C/em\u003E\u003C/strong\u003E\u003Cem\u003E, when you first set up the mod.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003ECopy the below code into a batch file. I suggest \u003Cstrong\u003Epmcse.bat\u003C/strong\u003E. I further suggest you put this in your path or on your desktop.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EEdit the \u0022~~~~~~~~~~~~~\u0022 to be the path to your save file. You\u0027ll need to find out this path for yourself. It will probably be something similar to \u003Cstrong\u003Ec:\\ksp_win\\saves\\default\u003C/strong\u003E (Leave off the last \\ like I did there)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EDownload and install \u003Ca href=\u0022http://gnuwin32.sourceforge.net/packages/sed.htm\u0022 rel=\u0022external nofollow\u0022\u003Esed for windows\u003C/a\u003E. This has to be in your path.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETest it by running it (BACK UP YOUR PERSISTENT FILE FIRST). I suggest trying it with a brand new save. Take the first 4 contracts, exit your game, run the script, then go back in and see if the science gains are gone.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EHOW TO USE\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EOnce set up, you need to do a little work to make this work \u003C/em\u003E\u003Cstrong\u003E\u003Cem\u003Eevery time you take a contract or set of contracts that have science gains\u003C/em\u003E\u003C/strong\u003E\u003Cem\u003E:\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EExit your save game (exit to main menu, not the game)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERun the script.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERe-enter the game and check your contracts. They should not have science listed anymore.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003ENOTE: This only works for Windows! I don\u0027t have a Mac and don\u0027t play on Linux. If someone wants to make something like this that works for those, I\u0027ll happily put their code in this post.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003ENOTE 2: This is probably not for the faint of heart when it comes to fiddling with batch files, paths, and installing programs on your computer. I can\u0027t make it much easier than it is.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003ENOTE 3: This works with all 0.24.* versions up to 0.24.2. It may not work in future versions but (unless someone writes a real mod for this) I\u0027ll do my best to maintain it so it does.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003ENOTE 4: Please someone make this into a real mod for the game \u003C/em\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epushd ~~~~~~~~~~~\u003Cbr\u003Edel persistent.001\u003Cbr\u003Eren persistent.sfs persistent.001\u003Cbr\u003Esed \u0022s/\\(values = [0-9.]*,[0-9.]*,[0-9.]*,[0-9.]*,[0-9.]*\\),[0-9.]*,\\([0-9.]*,[0-9.]*,[0-9.]*,[0-9.]*,[0-9.]*,[0-9.]*\\)/\\1,0,\\2/g\u0022 persistent.001 \u0026gt; persistent.002\u003Cbr\u003Esed \u0022s/\\(^\t\t\t\t\tvalues = [0-9.]*,[0-9.]*\\),[0-9.]*,\\([0-9.]*,[0-9.]*\\)/\\1,0,\\2/g\u0022 persistent.002 \u0026gt; persistent.sfs\u003Cbr\u003Efc persistent.001 persistent.sfs\u003Cbr\u003Epause\u003Cbr\u003Epopd\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-06T03:06:52Z\u0022 title=\u002211/06/2014 03:06  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 6, 2014\u003C/time\u003E by 5thHorseman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2014-08-18T15:39:26Z","Content":"\n\u003Cp\u003EYou literally did this with sed, regex and all, in Windows... Now I feel like I need to write a plugin, but before I succumb to that I\u0027m going to have to put you out of your misery.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-08-18T15:43:51Z","Content":"\n\u003Cp\u003EIs there a better way to do this in Windows?\u003C/p\u003E\n"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2014-08-18T15:48:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u00225thHorseman\u0022 data-cite=\u00225thHorseman\u0022\u003E\u003Cdiv\u003EIs there a better way to do this in Windows?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo idea, I just know old-school Linux sysadmins and professional programmers who balk at the thought of \u003Cem\u003Etrying\u003C/em\u003E to get sed to work.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-08-18T15:49:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022regex\u0022 data-cite=\u0022regex\u0022\u003E\u003Cdiv\u003ENo idea, I just know old-school Linux sysadmins and professional programmers who balk at the thought of \u003Cem\u003Etrying\u003C/em\u003E to get sed to work.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh. Well, it\u0027s not without its quirks (For example, it\u0027s more technically correct to use \u002B than * but in my version of sed that simply does not work) but I\u0027ve been using it for... jeez has it really been almost 2 decades now? Wow I feel old. Anyway. That long.\u003C/p\u003E\u003Cp\u003E[nerd]I considered writing an awk script but this was easier and doesn\u0027t seem to cause any conflicts.[/nerd]\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-18T15:54:22Z\u0022 title=\u002208/18/2014 03:54  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 18, 2014\u003C/time\u003E by 5thHorseman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-11-06T03:08:37Z","Content":"\n\u003Cp\u003ENot that anybody should find this useful or even try it, but I updated the first post with a Fine Print warning and modified the script to account for those mutipart missions like \u0022Explore Mun.\u0022\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-11-06T03:45:02Z","Content":"\n\u003Cp\u003EThis is not even remotely tested \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E, but it might do what you\u0027re looking for. It only works for newly offered contracts. There is also a possibility that the values may revert, but I think they should only be set once. If it works I\u0027ll package up something and release it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing Contracts;\u003Cbr\u003E\u003Cbr\u003Enamespace ContractScienceKiller\u003Cbr\u003E{\u003Cbr\u003E\t[KSPAddon(KSPAddon.Startup.MainMenu, true)]\u003Cbr\u003E\tpublic class QuashContractScience : MonoBehaviour\u003Cbr\u003E\t{\u003Cbr\u003E\t\tprivate bool started;\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void Start()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tif (!started)\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tGameEvents.Contract.onOffered.Add(onContractOffer);\u003Cbr\u003E\t\t\t\tDontDestroyOnLoad(this);\u003Cbr\u003E\t\t\t\tstarted = true;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void onContractOffer(Contract c)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tc.ScienceCompletion = 0;\u003Cbr\u003E\t\t\tforeach (ContractParameter cP in c.AllParameters)\u003Cbr\u003E\t\t\t\tcP.ScienceCompletion = 0;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-11-06T04:30:40Z","Content":"\n\u003Cp\u003EThat is pretty sweet, but I gots no knowingness of how to make that into a thing.\u003C/p\u003E\n"},{"CreatedByName":"invultri","CreatedById":92101,"CreatedDateTime":"2014-11-06T05:39:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EThis is not even remotely tested \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E, but it might do what you\u0027re looking for. It only works for newly offered contracts. There is also a possibility that the values may revert, but I think they should only be set once. If it works I\u0027ll package up something and release it.\u003Cp\u003E~SNIP~ \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am willing to test this however I need 1 of 2 things:\u003C/p\u003E\u003Cp\u003E1) A compiled dll\u003C/p\u003E\u003Cp\u003E2) A guide (Is \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Plugins\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E up to date?) to compile it to a dll on linux (java guy here)\u003C/p\u003E\n"},{"CreatedByName":"invultri","CreatedById":92101,"CreatedDateTime":"2014-11-06T21:58:30Z","Content":"\n\u003Cp\u003ELooks like the guide was still current:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/o3Wicia.png\u0022 alt=\u0022o3Wicia.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI had to change the code to:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Enamespace ContractScienceKiller\u003Cbr\u003E{\u003Cbr\u003E\t[KSPAddon(KSPAddon.Startup.MainMenu, true)]\u003Cbr\u003E\tpublic class QuashContractScience : UnityEngine.MonoBehaviour\u003Cbr\u003E\t{\u003Cbr\u003E\t\tprivate bool started;\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void Start()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tif (!started)\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tGameEvents.Contract.onOffered.Add(onContractOffer);\u003Cbr\u003E\t\t\t\tDontDestroyOnLoad(this);\u003Cbr\u003E\t\t\t\tstarted = true;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void onContractOffer(Contracts.Contract c)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tc.ScienceCompletion = 0;\u003Cbr\u003E\t\t\tforeach (Contracts.ContractParameter cP in c.AllParameters)\u003Cbr\u003E\t\t\t\tcP.ScienceCompletion = 0;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOne thing I noticed was the \u0022Test TR-18A stack decoupler orbiting kerbin\u0022 was giving me 419rep points... that seems a tad on the high side ?\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-11-09T23:28:18Z","Content":"\n\u003Cp\u003EIt seems to work fine. I made a [thread=99664]release thread for it[/thread].\u003C/p\u003E\u003Cp\u003EIf there is any interest I could possibly make it more configurable, reducing science by a percentage for example, or maybe even make it save-specific.\u003C/p\u003E\n"},{"CreatedByName":"Solarspaceprobe","CreatedById":125110,"CreatedDateTime":"2014-11-10T05:46:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u00225thHorseman\u0022 data-cite=\u00225thHorseman\u0022\u003E\u003Cdiv\u003Ethe tech tree can already be unlocked without even leaving Kerbin\u0027s SOI.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUh, well(thanks to NASA) we\u0027ve never really done much outside Earth\u0027s LEO, they kind of went up to the moon and didn\u0027t like what they saw, and never went back. Most of the stuff in the tech-tree is about at our level today. Therefore, the Kerbals do MORE than we did to get that stuff. It\u0027s depressing to realize how short we\u0027ve traveled. Anyways, nice mod! Thanks for making it!\u003C/p\u003E\n"}]}