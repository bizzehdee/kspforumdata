{"TopicId":159177,"ForumId":29,"TopicTitle":"[ANSWERED] part.Resources, Remove item","CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2017-04-14T12:27:40Z","PageNum":1,"Articles":[{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2017-04-14T12:27:40Z","Content":"\n\u003Cp\u003E\nIn my mod GTI MultiMode Intakes, I am allowing switching between different intake modes. When doing this, I\u0027m also changing the resources associated with the intake, like intakeair or intakeatm. However, so far, I\u0027ve relied on \u0022part.Resources.Clear();\u0022. This removes all resources in the part, and then I can add the new resource I want back in.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, this have one mayor drawback, it removes all resources, and not just the ones I want it to, namely the ones I target.\n\u003C/p\u003E\n\u003Cp\u003E\nSo in my latest try, I used the below methods to target only relevant resources.\u00A0However, I cannot seem to get them to work.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E    public bool Remove(PartResource res);\n    public bool Remove(string resName);\n    public bool Remove(int resID);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI tried as follows (i merged the three overload methods directly into the example below, I do NOT run them at the same time, I comment out when testing). Debug messages says that I do indeed run the \u0022Remove()\u0022 method where expected and on the expected resource. The remove methods return true!!! But my engine continues to consume IntakeAir even when switched away, so that the resource should have been removed. When I use \u0022Clear()\u0022 the engine flameout immediately as it should. And listing all resources in the part after all show that the resource was not removed.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Ebool preserveResource;\nPartResource partResourceDef;\n//Evaluated all resources in part\nfor (int i = 0; i \u0026lt; currentPart.Resources.Count; i\u002B\u002B)\n{\n\tpreserveResource = true;\n\tGTIDebug.Log(\u0022Check for resource removal: \u0022 \u002B currentPart.Resources[i].resourceName, iDebugLevel.DebugInfo);\n\t//compare all resources to the target resources\n    \tfor (int j = 0; j \u0026lt; modes.Count; j\u002B\u002B)\n\t{\n\t\t//If it is a target resource, mark it for replacement\n\t\tif (modes[j].resourceName == currentPart.Resources[i].resourceName)\n\t\t{\n\t\t\t//Remove resources managed by this mod\n\t\t\tpreserveResource = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\t//Remove resource if it is marked for replacement\n\tif (!preserveResource)\n\t{\n\t\tGTIDebug.Log(\u0022Removing Resource: \u0022 \u002B currentPart.Resources[i].resourceName, iDebugLevel.DebugInfo);\n\t\t\n\t\t//try 1\n\t\tcurrentPart.Resources.Remove(currentPart.Resources[i].resourceName)\n\t\t\n\t\t//try 2\n\t\tcurrentPart.Resources.Remove(PartResourceLibrary.Instance.GetDefinition(currentPart.Resources[i].resourceName).id)\n\t\t\n\t\t//try 3\n\t\tpartResourceDef = currentPart.Resources.Get(currentPart.Resources[i].resourceName);\n\t\tcurrentPart.Resources.Remove(partResourceDef)\n\t\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSo my questions are,\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\ndoes Remove() work at all?\n\u003C/li\u003E\n\u003Cli\u003E\nif yes, then can anybody point me toward what could be wrong in my code?\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-01T17:06:54Z\u0022 title=\u002205/01/2017 05:06  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 1, 2017\u003C/time\u003E by Warezcrawler\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2017-04-14T20:20:50Z","Content":"\n\u003Cp\u003E\nI simply use\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPartResource resource = part.Resources[\u0022Atmosphere\u0022];\n\npart.Resources.Remove(resource)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nand it works.\n\u003C/p\u003E\n\u003Cp\u003E\nAll the methods you attemped will not work\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-14T20:24:27Z\u0022 title=\u002204/14/2017 08:24  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 14, 2017\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2017-04-14T22:10:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223021266\u0022 data-ipsquote-contentid=\u0022159177\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492201250\u0022 data-ipsquote-userid=\u0022117389\u0022 data-ipsquote-username=\u0022FreeThinker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, FreeThinker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI simply use\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003EPartResource resource = part.Resources[\u0022Atmosphere\u0022];\n\npart.Resources.Remove(resource)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nand it works.\n\u003C/p\u003E\n\u003Cp\u003E\nAll the methods you attemped will not work\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, that did it.\n\u003C/p\u003E\n"}]}