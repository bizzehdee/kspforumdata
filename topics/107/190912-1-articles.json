{"TopicId":190912,"ForumId":107,"TopicTitle":"KAL-1000 Issues with priority and some questions","CreatedByName":"adsffm","CreatedById":173712,"CreatedDateTime":"2020-01-08T16:01:10Z","PageNum":1,"Articles":[{"CreatedByName":"adsffm","CreatedById":173712,"CreatedDateTime":"2020-01-08T16:01:10Z","Content":"\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nBefore getting into the problems that I\u0027m having, I\u0027ll briefly explain what I\u0027m trying to do.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically, I want to be able to control throttle of an engine with yaw input. As long as yaw keys are pressed, the throttle should change but as soon as I release yaw keys, the throttle should reset to default value.\n\u003C/p\u003E\n\u003Cp\u003E\nThe way I\u0027m trying to achieve this is with two KAL controllers, named \u0022Control kal\u0022 and \u0022Default kal\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nThe Control kal, in it\u0027s\u00A0editor, has two\u00A0points at the start and end with values 0 and 100 respectively for the engine throttle, it has the priority value set to 5 and is has play position set to 2.5 initially, with the play length being 5 in total (So the position is in the middle.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe Default kal in it\u0027s editor has the Control kal\u0027s play position value assigned. What I was trying to do with this, is have two values at the start and end with both set to 2.5 and priority value set to 1. With this, I thought I would be able to change Control kal\u0027s play position as long as I\u0027m pressing yaw keys, but as soon as I would release the keys, the Default kal would take over and reset the Control kal\u0027s play position back to 2.5.\n\u003C/p\u003E\n\u003Cp\u003E\nI have ran into several issues. First of all, for some reason, KAL-1000 controllers editor does not allow for play position values of other controllers to be higher than 1.0, meaning that if you have one controller with play length of say 5 (Which is the default length), the other controller would not allow you to change first controllers play position beyond the 0.0 - 1.0 domain.\n\u003C/p\u003E\n\u003Cp\u003E\nSecond of all, I don\u0027t really understand how the priority value of KAL controllers work, seeing as if Default kal is set to play with repeat loop, it will be constantly setting the Control kal\u0027s play position to middle, as programmed, but Control kal\u0027s play position cannot be changed at all during this, not with the yaw keys\u00A0nor manually.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn conclusion, I want to achieve a control system similar to how wing Elevons are controlled. If you press pitch keys, it will pitch up or down but as soon as you release the keys, it returns to default position. Is there any way currently to achieve this or are there any tricky workarounds?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAny information will be greatly appreciated. Thank you for reading.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nP.S: I tried recording gifs of what is happening ingame, but cannot compress under 100mb without decreasing the resolution too low to see anything. Sorry.\u003Cbr\u003E\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-01-11T11:11:41Z","Content":"\n\u003Cp\u003E\nI don\u0027t really understand what you want to do. But if you set the \u0022play position\u0022 input of a KAL to the yaw axis and set that to \u0022absolute control\u0022, then the play position of that KAL will be in the center if no yaw key is pressed and will move to the start or end of the tracks when yaw keys are pressed. (It will also \u003Cstrong\u003Enot\u003C/strong\u003E be moved by \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E or manual trim due to issue \u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/22946\u0022 rel=\u0022external nofollow\u0022\u003E#22946\u003C/a\u003E.) So you can have the default value set in the center of the track on that KAL and the left or right yaw values at the start and the end of the track.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223725905\u0022 data-ipsquote-contentid=\u0022190912\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578499270\u0022 data-ipsquote-userid=\u0022173712\u0022 data-ipsquote-username=\u0022adsffm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/8/2020 at 5:01 PM, adsffm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst of all, for some reason, KAL-1000 controllers editor does not allow for play position values of other controllers to be higher than 1.0, meaning that if you have one controller with play length of say 5 (Which is the default length), the other controller would not allow you to change first controllers play position beyond the 0.0 - 1.0 domain.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat keeps you from setting the play length of the KAL that you want to control with another KAL to 1?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223725905\u0022 data-ipsquote-contentid=\u0022190912\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578499270\u0022 data-ipsquote-userid=\u0022173712\u0022 data-ipsquote-username=\u0022adsffm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/8/2020 at 5:01 PM, adsffm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSecond of all, I don\u0027t really understand how the priority value of KAL controllers work,\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you have one value that is controlled by two KAL, then the one with the higher priority will overrule one with a lower priority. E.g. if you have one KAL giving control inputs for 100% and another giving inputs for 0%, then the resulting value will be 100% if the first one has higher priority, 0% if the second one has higher priority, and 50% (the average of all KALs) if both have the same priority.\n\u003C/p\u003E\n\u003Cp\u003E\nOne more issue to note is that KAL don\u0027t always generate control signals, they only do that if their play position is set to a \u0022new\u0022 value. So if you set the \u0022play position\u0022 input of a KAL to an axis with \u0022absolute control\u0022, then this \u0022absolute control\u0022 will continuously set the play position to the current value which causes the KAL to generate control signals on all its outputs all the time. But if you set it to the same axis in \u0022incremental control\u0022 then the KAL will only generate control signals when you are actually moving this axis. When the axis isn\u0027t moving, then no control signals are generated and the setting of a target may be overwritten by e.g. a lower priority KAL that is generating control signals (for whatever reason).\n\u003C/p\u003E\n\u003Cp\u003E\nHas this answered your question(s)?\n\u003C/p\u003E\n"},{"CreatedByName":"adsffm","CreatedById":173712,"CreatedDateTime":"2020-01-11T12:06:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223726923\u0022 data-ipsquote-contentid=\u0022190912\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578741101\u0022 data-ipsquote-userid=\u0022197939\u0022 data-ipsquote-username=\u0022AHHans\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n51 minutes ago, AHHans said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHas this answered your question(s)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, everything is clear now. I am very inexperienced with robotics/advanced tweakables in KSP so I had no idea about the absolute control option.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you so much for help.\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-01-11T12:32:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223726933\u0022 data-ipsquote-contentid=\u0022190912\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578744384\u0022 data-ipsquote-userid=\u0022173712\u0022 data-ipsquote-username=\u0022adsffm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n25 minutes ago, adsffm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, everything is clear now. I am very inexperienced with robotics/advanced tweakables in KSP so I had no idea about the absolute control option.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDon\u0027t worry, we\u0027ve all been there.\u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-01-11T13:08:21Z","Content":"\n\u003Cp\u003E\nI assume you are using the KAL\u0027s because there is some sort of animation (like walking) that you are trying to accomplish.\u00A0 Correct?\n\u003C/p\u003E\n\u003Cp\u003E\n...else the KAL is\u00A0probably not\u00A0required if you are just trying to use yaw like a push-button motor controller.\u00A0 You can toggle absolute for\u00A0motor control in the action key assignment.\u00A0 I did something similar with motor servos that pan in the direction of my turns so headlights will track with my yaw inputs, and then return to standard forward position when\u00A0not turning.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-01-11T13:10:32Z\u0022 title=\u002201/11/2020 01:10  PM\u0022 data-short=\u00224 yr\u0022\u003EJanuary 11, 2020\u003C/time\u003E by XLjedi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"adsffm","CreatedById":173712,"CreatedDateTime":"2020-01-11T13:46:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223726945\u0022 data-ipsquote-contentid=\u0022190912\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578748101\u0022 data-ipsquote-userid=\u0022175658\u0022 data-ipsquote-username=\u0022XLjedi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n32 minutes ago, XLjedi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI assume you are using the KAL\u0027s because there is some sort of animation (like walking) that you are trying to accomplish.\u00A0 Correct?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nActually I\u0027m trying to build a drone and I want to control the torque on the rotors (two out of four, depending on which direction I want to turn)\u00A0with yaw keys. For some reason I thought the only way to control robotic parts was via KAL\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThanks for the info though! I appreciate it.\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-01-11T14:53:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223726956\u0022 data-ipsquote-contentid=\u0022190912\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578750361\u0022 data-ipsquote-userid=\u0022173712\u0022 data-ipsquote-username=\u0022adsffm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, adsffm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nActually I\u0027m trying to build a drone and I want to control the torque on the rotors (two out of four, depending on which direction I want to turn)\u00A0with yaw keys.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhy don\u0027t you say so? We were just discussing about quadcopters in another thread:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/190880-controlling-a-quad-copter/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/190880-controlling-a-quad-copter/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIn there you can find the discussion of (and links to) two quadcopters with different control schemes. Feel free to shamelessly copy ideas from anyone else, everyone does that. \u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"}]}