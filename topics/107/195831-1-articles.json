{"TopicId":195831,"ForumId":107,"TopicTitle":"Robotic parts cause crafts to bend out of shape more and more on every save/load cycle, and I think I know why","CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2020-07-24T07:53:48Z","PageNum":1,"Articles":[{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2020-07-24T07:53:48Z","Content":"\n\u003Cp\u003E\nI built my first craft with robotic parts a few days ago: an electric plane to explore Eve, with two counterrotating propellers on the front and the back.\n\u003C/p\u003E\n\u003Cp\u003E\nThis was fun to fly, at the beginning. Then I noticed it was getting harder to keep in level flight, and so I started investigating. And I found out why.\n\u003C/p\u003E\n\u003Cp\u003E\nEvery time the crafts gets saved and reloaded (it doesn\u0027t have to be F5/F9, it can be just switching to \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E or another distant vessel, and back), the parts that have a robotic servo between them and the root part move a little.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks to my modding experience, I found out what happens.\n\u003C/p\u003E\n\u003Cp\u003E\nA KSP craft is made of many parts. Their position respect to the root part is stored in the orgPos and orgRot Part properties, and defines the \u0022pristine\u0022 craft configuration, as it was built in the editor: when you launch the craft, its parts appear in their \u0022pristine\u0022 position. Then external forces (i.e. gravity) bend the craft a bit, because when in flight all parts behave as if they\u0027re connected by springs. If you save and reload, though, the craft is recreated using the \u0022pristine\u0022 part positions, and they didn\u0027t change while in flight, so the craft will not accumulate the \u0022bending\u0022 over save/reload cycles.\n\u003C/p\u003E\n\u003Cp\u003E\nBut if there\u0027s a robotic part in the craft, some parts may have to change their \u0022pristine\u0022 position: if for instance you extend a piston, all the parts moved by the piston change\u00A0their position respect to the root part, and this must be updated in the \u0022pristine\u0022 position information, so that if you save \u0026amp; reload the moved parts will reappear where the piston moved them, and not where they were at launch.\n\u003C/p\u003E\n\u003Cp\u003E\nIt looks like KSP updates the \u0022pristine\u0022 part position according to the \u0022real\u0022 position (i.e. bent by gravity or other forces). This adds up over time, and you find your craft more and more out of shape, until it gets practically unflyable.\n\u003C/p\u003E\n\u003Cp\u003E\nI checked it with a little part module that can log the \u0022pristine\u0022 and \u0022real\u0022 position of parts, and the \u0022real\u0022 position gets systematically copied to the \u0022pristine\u0022 position at every save.\n\u003C/p\u003E\n\u003Cp\u003E\nThis problem doesn\u0027t get mentioned a lot. I found no reports in the bug tracker, and only this in the forum:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022196456\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed4377653795\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/187276-robotics-parts-shifting-when-loading-while-on-the-ground/\u0026amp;do=embed\u0022 style=\u0022height:211px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266485\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0022 rel=\u0022\u0022\u003E@SQUAD\u003C/a\u003E, are you working on this? It could be probably be fixed with a mod, but it wouldn\u0027t be easy. Anyway, I\u0027ll file a bug soon\u2122.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2020-07-28T07:55:03Z","Content":"\n\u003Cp\u003E\nBug report: \u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/25854\u0022 rel=\u0022external nofollow\u0022\u003E#25854\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"BigFatStupidHead","CreatedById":44217,"CreatedDateTime":"2020-07-28T09:53:12Z","Content":"\n\u003Cp\u003E\nWhat an awesome bit of research.\n\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2020-07-28T15:20:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223827233\u0022 data-ipsquote-contentid=\u0022195831\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221595929992\u0022 data-ipsquote-userid=\u002244217\u0022 data-ipsquote-username=\u0022BigFatStupidHead\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, BigFatStupidHead said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat an awesome bit of research.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI just had to solve the same problem a few years ago for DockRotate\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2020-07-30T12:38:17Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/144573-peteletroll/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022144573\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/144573-peteletroll/\u0022 rel=\u0022\u0022\u003E@peteletroll\u003C/a\u003E\u00A0Great post about this issue. If that is the cause of the problem maybe its an easy fix for Squad?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EMy bug report on this issue recently:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/25841\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bugs.kerbalspaceprogram.com/issues/25841\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EThe following bug report is from a year ago:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/22928\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bugs.kerbalspaceprogram.com/issues/22928\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n#22928 was set to \u003Cstrong\u003EAcknowledged\u003C/strong\u003E and then it seems like nothing will be done about it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI have been doing a lot more robotics recently, the following video shows my forklift being reintegrated into a shipping container:\n\u003C/p\u003E\n\u003Cp\u003E\nTwo issues happen from the robotics/parts moving out of position (from scene changes):\n\u003C/p\u003E\n\u003Cp\u003E\n1. The Forklift becomes less and less useful because the pistons move down from the original point towards the ground until they are hitting the ground when under load (they drag across the ground)\n\u003C/p\u003E\n\u003Cp\u003E\n2. The reintegration needs to pull the wheels off of the ground near the end because the wheels start shaking, but it will eventually\u00A0end up on the ground shaking again because the docking port that is in contact with the middle large piston is moving a little each time.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/6M7dLgM-qPA?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nCurrent Work Around: Keep crafts in orbit for scene changes because there\u0027s no gravity.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EEJ_SA\u003C/strong\u003E\u00A0(biggest current KSP streamer\u00A0on twitch) has had major issues with this. He calls it drifting.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHes making really complicated crafts for his current career save that hes doing. Hes been trying different things to try counter the issue and realign his custom launch pads.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/70430-technicalfool/\u0026amp;do=hovercard\u0022 data-mentionid=\u002270430\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/70430-technicalfool/\u0022 rel=\u0022\u0022\u003E@technicalfool\u003C/a\u003E\u00A0or \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/160254-maxsimal/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022160254\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/160254-maxsimal/\u0022 rel=\u0022\u0022\u003E@Maxsimal\u003C/a\u003E\u00A0Is there anyway this can be revisited?\u00A0#22928 was set to Acknowledged and then nothing was done about it.\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a large push for reusuability in real space flight right now that robotics has lacking the ability to do because of this problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2020-07-30T15:37:10Z","Content":"\n\u003Cp\u003E\nJust upvoted both bugs, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/161238-anth12/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022161238\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/161238-anth12/\u0022 rel=\u0022\u0022\u003E@Anth12\u003C/a\u003E\u00A0- fingers crossed! The bug is definitely solvable.\n\u003C/p\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2020-07-30T19:15:48Z","Content":"\n\u003Cp\u003E\nOh. I see why the bug report was ignored/acknowledged now. the duplicate attached was rather aggressive.\n\u003C/p\u003E\n\u003Cp\u003E\nI feel his frustration but personal experience (more recent than one would think) has shown that handling life situations in that way doesn\u0027t get the response one would think.\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbonaut Chadald","CreatedById":208855,"CreatedDateTime":"2020-12-20T13:58:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266485\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0022 rel=\u0022\u0022\u003E@SQUAD\u003C/a\u003EWhy hasn\u0027t this issue which is on ALL platforms been fixed nor mentioned?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbonaut Chadald","CreatedById":208855,"CreatedDateTime":"2020-12-20T14:04:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223825395\u0022 data-ipsquote-contentid=\u0022195831\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221595577228\u0022 data-ipsquote-userid=\u0022144573\u0022 data-ipsquote-username=\u0022peteletroll\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 7/24/2020 at 9:53 AM, peteletroll said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI built my first craft with robotic parts a few days ago: an electric plane to explore Eve, with two counterrotating propellers on the front and the back.\n\u003C/p\u003E\n\u003Cp\u003E\nThis was fun to fly, at the beginning. Then I noticed it was getting harder to keep in level flight, and so I started investigating. And I found out why.\n\u003C/p\u003E\n\u003Cp\u003E\nEvery time the crafts gets saved and reloaded (it doesn\u0027t have to be F5/F9, it can be just switching to \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E or another distant vessel, and back), the parts that have a robotic servo between them and the root part move a little.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks to my modding experience, I found out what happens.\n\u003C/p\u003E\n\u003Cp\u003E\nA KSP craft is made of many parts. Their position respect to the root part is stored in the orgPos and orgRot Part properties, and defines the \u0022pristine\u0022 craft configuration, as it was built in the editor: when you launch the craft, its parts appear in their \u0022pristine\u0022 position. Then external forces (i.e. gravity) bend the craft a bit, because when in flight all parts behave as if they\u0027re connected by springs. If you save and reload, though, the craft is recreated using the \u0022pristine\u0022 part positions, and they didn\u0027t change while in flight, so the craft will not accumulate the \u0022bending\u0022 over save/reload cycles.\n\u003C/p\u003E\n\u003Cp\u003E\nBut if there\u0027s a robotic part in the craft, some parts may have to change their \u0022pristine\u0022 position: if for instance you extend a piston, all the parts moved by the piston change\u00A0their position respect to the root part, and this must be updated in the \u0022pristine\u0022 position information, so that if you save \u0026amp; reload the moved parts will reappear where the piston moved them, and not where they were at launch.\n\u003C/p\u003E\n\u003Cp\u003E\nIt looks like KSP updates the \u0022pristine\u0022 part position according to the \u0022real\u0022 position (i.e. bent by gravity or other forces). This adds up over time, and you find your craft more and more out of shape, until it gets practically unflyable.\n\u003C/p\u003E\n\u003Cp\u003E\nI checked it with a little part module that can log the \u0022pristine\u0022 and \u0022real\u0022 position of parts, and the \u0022real\u0022 position gets systematically copied to the \u0022pristine\u0022 position at every save.\n\u003C/p\u003E\n\u003Cp\u003E\nThis problem doesn\u0027t get mentioned a lot. I found no reports in the bug tracker, and only this in the forum:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022196456\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed6323649352\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/187276-robotics-parts-shifting-when-loading-while-on-the-ground/\u0026amp;do=embed\u0022 style=\u0022height:196px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266485\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0022 rel=\u0022\u0022\u003E@SQUAD\u003C/a\u003E, are you working on this? It could be probably be fixed with a mod, but it wouldn\u0027t be easy. Anyway, I\u0027ll file a bug soon\u2122.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nA mod could solve it, but not for us console players\n\u003C/p\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2020-12-23T08:17:41Z","Content":"\n\u003Cp\u003E\nFixing this\u00A0was my biggest wish for 1.11. Guess not....\n\u003C/p\u003E\n"},{"CreatedByName":"Gotmachine","CreatedById":163039,"CreatedDateTime":"2022-03-31T12:37:58Z","Content":"\n\u003Cp\u003E\nIn case someone stumble on that thread, a fix for that issue is available in \u003Cspan\u003E:\u003C/span\u003E\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022163039\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed9659118589\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/204002-18-112-kspcommunityfixes-bugfixes-and-qol-tweaks/\u0026amp;do=embed\u0022 style=\u0022height:197px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}