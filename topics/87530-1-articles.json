{"TopicId":87530,"ForumId":70,"TopicTitle":"FAR \u002B Tweakscale(type \u0026quot;free\u0026quot;) = Broken CoL","CreatedByName":"O-Doc","CreatedById":95453,"CreatedDateTime":"2014-10-16T14:37:46Z","PageNum":1,"Articles":[{"CreatedByName":"O-Doc","CreatedById":95453,"CreatedDateTime":"2014-10-16T14:37:46Z","Content":"\n\u003Cp\u003EHey, I\u0027ve got an interesting issue with Far \u002B Tweakscale.\u003C/p\u003E\u003Cp\u003EI\u0027m running a fresh v0.25 install of KSP and have the following added:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EModuleManager v2.5.1\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFAR v0.14.3\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETweakcale v1.44\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo, everything\u0027s the latest and up to date.\u003C/p\u003E\u003Cp\u003EWhen I use anything in Tweakscale free mode it totally borks the FAR aero. I hate to speculate, OK, I lied. I love speculating and I\u0027m thinking that Tweakscale is messing up the AttachNode size in rescaleNode() through the isFreeScale logic gate in Scale.cs. Then, FAR is taking those Attach.size values on the rescaled parts prior to raycasting all check during AttachNodeCdAdjust() FARBasicDragModel.cs, but that might be me reading the code wrong.\u003C/p\u003E\u003Cp\u003EThe video shows the bug being fully reproducable. It doesn\u0027t only happen when you load the craft. It will also happen while you are editing the craft but it\u0027s hard to know what triggers the change in the aero. Loading the craft from save always creates the problem. Watch for that one frame glitch when the CoL seems to almost be in the right position then moves. Could the ordering of the Update() function between the two be an issue?\u003C/p\u003E\u003Cp\u003EAnother interesting \u0022feature\u0022 is to load your craft onto the runway and using a data display mod, check out the vertical velocity relative to the horizontal. My craft was generating three times the negative vertical velocity as it had horizontal velocity. Even the gear suspension was groaning under the weight of a 7 ton craft.\u003C/p\u003E\u003Cp\u003EInterested parties can \u003Ca href=\u0022https://dl.dropboxusercontent.com/u/103197430/KSP/far-tweak-bug.zip\u0022 rel=\u0022external nofollow\u0022\u003Egrab the video and corresponding log file in my drop box(58MB)\u003C/a\u003E. It would be a shame to have to choose between these two great mods...\u003C/p\u003E\n"},{"CreatedByName":"O-Doc","CreatedById":95453,"CreatedDateTime":"2014-10-16T15:28:49Z","Content":"\n\u003Cp\u003EI just want to add one more thing. This bug did not exist in an older version of FAR which I had installed a week ago.\u003C/p\u003E\n"},{"CreatedByName":"tobjv","CreatedById":50269,"CreatedDateTime":"2014-10-16T15:41:28Z","Content":"\n\u003Cp\u003EFirst things first. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92229-How-To-Get-Support-%28READ-FIRST%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/92229-How-To-Get-Support-%28READ-FIRST%29\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EOperating system:\u003C/p\u003E\u003Cp\u003ERam:\u003C/p\u003E\u003Cp\u003EVersion of ksp you\u0027re using:\u003C/p\u003E\u003Cp\u003EWhen you installed far did you do it from a clean slate as Ferram warns on his posts?\u003C/p\u003E\u003Cp\u003EDid you try to replicate the bug without FAR installed?\u003C/p\u003E\u003Cp\u003EEdit:Instead of double posting just make an edit of the original post and put it like this sentence is.\u003C/p\u003E\n"},{"CreatedByName":"O-Doc","CreatedById":95453,"CreatedDateTime":"2014-10-16T17:56:12Z","Content":"\n\u003Cp\u003ESorry, Windows 32bit w/ 4gb RAM. Everything is a clean install in a fresh downloaded v0.25 of KSP. If you look at the time on the edit, it\u0027s useful to make a new post if devs are subbed to thread and you give new information.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-10-16T20:01:22Z","Content":"\n\u003Cp\u003EUnless Tweakscale specifically has code that calls FAR\u0027s recalculate geometry functions after it rescales things, it has \u003Cem\u003Enever\u003C/em\u003E been auto-updating FAR\u0027s aerodynamic characteristics in the editor. The fix has to come on the Tweakscale side, because any attempt to do it on my side will make things even more computationally intense in the editor than they already are.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-10-16T20:41:40Z","Content":"\n\u003Cp\u003EIf geometry is preserved and only size increased, could just scaling S (or the wing/control surface equivalent) do the trick? TweakScale only scales uniformly.\u003C/p\u003E\u003Cp\u003EEDIT: actually, only wings/control surfaces. You build the drag model after tweakscale scales, so non-wing parts actually work fine.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-10-16T22:35:16Z","Content":"\n\u003Cp\u003EIt\u0027ll need to rebuild everything after the rescale, since that would be needed to rebuild all of the wing interaction data and a few of the other geometry things. If it doesn\u0027t do that, it will not behave the same. No way around it.\u003C/p\u003E\u003Cp\u003EOh, and it will probably have to send that message to every wing on the vehicle to make sure that \u003Cem\u003Etheir\u003C/em\u003E wing interaction data is updated as well.\u003C/p\u003E\n"}]}