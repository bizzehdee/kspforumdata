{"TopicId":152019,"ForumId":51,"TopicTitle":"Minimal Manned Mars in RO RSS RVE add: kOS \u0026amp; Action Groups Extended","CreatedByName":"DBowman","CreatedById":122106,"CreatedDateTime":"2016-11-14T06:41:45Z","PageNum":1,"Articles":[{"CreatedByName":"DBowman","CreatedById":122106,"CreatedDateTime":"2016-11-14T06:41:45Z","Content":"\n\u003Cp\u003E\nI\u0027ve been working on a hypothetical Mars \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/127059-minimal-manned-mars-mission\u0022 rel=\u0022\u0022\u003Eflyby\u003C/a\u003E\u00A0using, as far as possible, only currently\u00A0commercially available vehicles. It turns out that it looks very possible on paper / spreadsheets - the next step is to see how it works out \u0027in real life\u0027, or at least in Realism Overhaul of\u00A0Real Solar System.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d been interested to try ROnRSS but it seemed complicated and a lot to learn; install a lot of mods (which might have who knows what issues), learn about real fuels\u00A0(fun?), ooohh often no throttling, limited ignitions, whaaa ullage, ... etc. Now I have a good reason to try it, I started,\u00A0it\u0027s fairly approachable (you can enable the reality incrementally), and the issues have been interesting / entertaining. I thought I\u0027d make \u0027the mission\u0027 be the whole trip of getting to grips with \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E in case it\u0027s handy for anyone else thinking about it. I know I\u0027ve found little comments scattered in other threads to be a real help.\n\u003C/p\u003E\n\u003Col style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\u003Cli\u003E\n1.1.3 - \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E \u0026amp; \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E are not updated yet.\n\u003C/li\u003E\n\u003Cli\u003E\nusing\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Cabbr style=\u0022border-bottom:1px dotted;\u0022 title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Ethings installed fairly smoothly\n\u003Col\u003E\u003Cli\u003E\nexcept that for Real Solar System I had to do\u00A0a second pass - but once it\u0027s in it looks fantastic\n\u003C/li\u003E\n\u003Cli\u003E\nit does make the start time long ...\n\u003C/li\u003E\n\u003C/ol\u003E\u003C/li\u003E\n\u003Cli\u003E\n16,921Module Manager patches ...\n\u003C/li\u003E\n\u003Cli\u003E\nI included Tantares,\u00A0Tantares LV,\u00A0 and\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Cabbr style=\u0022border-bottom:1px dotted;\u0022 title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E.craft files -\u00A0so I could look at/fly a Soyuz launcher\n\u003Col\u003E\u003Cli\u003E\nSoyuz-T looks great\n\u003C/li\u003E\n\u003Cli\u003E\nIt doesn\u0027t launch out of the box - \u0027failed to ignite due to insufficient resources\u0027\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 style=\u0022vertical-align:middle;border:0px;\u0022 title=\u0022:(\u0022\u003E\u003C/li\u003E\n\u003Cli\u003E\nAfter playing around I realized that the fuel loading on the tanks didn\u0027t include the High Test Peroxide needed for the turbo-pumps.\n\u003Col\u003E\u003Cli\u003E\nReal Fuels makes it easy to switch them to the correct proportions (or at least something that lets the engines light).\n\u003C/li\u003E\n\u003Cli\u003E\nThere is a GUI you can pop from the tweakables GUI.\n\u003C/li\u003E\n\u003Cli\u003E\nIt lets you assign available volume to whatever real resources\u00A0you want and looks at the connected engines to give you helpful pre-sets.\n\u003C/li\u003E\n\u003Cli\u003E\nI still haven\u0027t figured out the Soyuz orbiter maneuver\u00A0engines - insufficient fuel pressure ... later\n\u003C/li\u003E\n\u003C/ol\u003E\u003C/li\u003E\n\u003Cli\u003E\nThe Soyuz Launch Vehicle (why did they\u00A0name the LV and the spacecraft the same? does not help the googlability) is very stable in flight - but I have to look up / discover the ascent profile that will put it into orbit. InsaneDruid has \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/120548-12-proton-m-breeze-m/\u0026amp;do=findComment\u0026amp;comment=2824407\u0022 rel=\u0022\u0022\u003Esome advice on flying the Proton\u003C/a\u003E\u00A0which probably holds for Soyuz\u00A0LV also.\u00A0\n\u003C/li\u003E\n\u003C/ol\u003E\u003C/li\u003E\n\u003Cli\u003E\nI had included Raidernick\u0027s Soviet Rockets,\u00A0Tantares, \u0026amp; Tantares LV and seemed to have multiple Proton fragments (which I\u0027d expect) which I couldn\u0027t\u00A0figure out how to put together -\u00A0which I didn\u0027t expect - how hard should it be? and why does a third stage engine only have one attach node\u00A0(maybe there is some adapter thingy supposed to go between the tank and engine that is hard to find).\n\u003C/li\u003E\n\u003Cli\u003E\nAnyway those two Sov packs didn\u0027t include a Briz-M upper stage that I wanted so I tried Insane Druid\u0027s Proton-M / Breeze-M\n\u003Col\u003E\u003Cli\u003E\neasy to put together\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr style=\u0022border-bottom:1px dotted;\u0022 title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Efor Briz? the parts are there but worry about that if I can orbit something\n\u003C/li\u003E\n\u003Cli\u003E\nhas a nice Proton launch pad included\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr style=\u0022border-bottom:1px dotted;\u0022 title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Eworries include ascent path (fail so far) and vapor in the fuel\u00A0lines on the upper stage\n\u003C/li\u003E\n\u003C/ol\u003E\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\n\u00A0\u003Cimg alt=\u0022Phm3P26.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://imgur.com/Phm3P26.png\u0022 width=\u00221000\u0022\u003EI banged a Cygnus on top of a Briz on a Proton - i\u0027t doomed by mass and my piloting, but the Himalayas look great and it should give the PRC a scare. \u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-18T10:54:08Z\u0022 title=\u002211/18/2016 10:54  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 18, 2016\u003C/time\u003E by DBowman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DBowman","CreatedById":122106,"CreatedDateTime":"2016-11-15T08:08:49Z","Content":"\n\u003Cp\u003E\nTo amp up the Reality you can install \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E Visual Enhancements - \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/75157-wip105-rss-visual-enhancements-rve\u0022 rel=\u0022\u0022\u003ERVE\u003C/a\u003E\u00A0which adds clouds and atmospheric scattering. Again this one sounds complex to install because it\u0027s built on a few other mods like \u003Cem\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/em\u003E,\u00A0\u003Cem\u003EScatterer,\u003C/em\u003E and \u003Cem\u003ETexture Replacer\u003C/em\u003E. I found this\u00A0\u003Ca href=\u0022https://www.youtube.com/watch?v=SAE8TOf_Lrc\u0022 rel=\u0022external nofollow\u0022\u003Evideo\u003C/a\u003E\u00A0helpful, but for me it boiled\u00A0down to:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nuse \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003Eckan\u003C/abbr\u003E to install scatterer\n\u003C/li\u003E\n\u003Cli\u003E\nTexture Replacer was already present from \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003Eckan\u003C/abbr\u003E \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E install\n\u003C/li\u003E\n\u003Cli\u003E\ntake the \u0027any CPU\u0027 \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E release and copy from .zip to GameData\u00A0- but not the configs .zip cause that is Kerbol system\n\u003C/li\u003E\n\u003Cli\u003E\ndownload RVE for KSP 1.0.4 LInux64 from \u003Ca href=\u0022https://github.com/Pingopete/RVE-KSP-1.0.4/tree/Linux64\u0022 rel=\u0022external nofollow\u0022\u003EPingopete\u003C/a\u003E\u00A0(just hit the green button) and unzip merge the files - there is a clash on scatterer/config/PlanetsList.cfg (but for with capitalization different - so not sure what happens on linux) let RVE replace Scatterer\u00A0\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nstart her up and wait quite a while ....\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\n\u003Cimg alt=\u00220q6ZTbt.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://imgur.com/0q6ZTbt.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nflying past Buenos Aires. \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E adjust attitude lets you turn on some arrows, in this case orbit velocity vector.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00228eVD7tR.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://imgur.com/8eVD7tR.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMadagascar looks nice\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022ObpyTJg.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://imgur.com/ObpyTJg.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nthe reality upped map view. RVE is still working on the other planets...\n\u003C/p\u003E\n"},{"CreatedByName":"Kosmonaut","CreatedById":137785,"CreatedDateTime":"2016-11-15T12:45:37Z","Content":"\n\u003Cp\u003E\nMadagascar always looks nice\n\u003C/p\u003E\n"},{"CreatedByName":"TopHeavy11","CreatedById":154744,"CreatedDateTime":"2016-11-15T12:47:34Z","Content":"\n\u003Cp\u003E\nSo...moar?\n\u003C/p\u003E\n"},{"CreatedByName":"Kosmonaut","CreatedById":137785,"CreatedDateTime":"2016-11-15T12:48:04Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/154744-topheavy11/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022154744\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/154744-topheavy11/\u0022 rel=\u0022\u0022\u003E@TopHeavy11\u003C/a\u003E absolutely\n\u003C/p\u003E\n"},{"CreatedByName":"DBowman","CreatedById":122106,"CreatedDateTime":"2016-11-18T10:52:27Z","Content":"\n\u003Cp\u003E\nAGX \u0026amp; kOS\n\u003C/p\u003E\n\u003Cp\u003E\nThe realistic craft often need an \u0027ullage\u0027 burn to settle the propellant. I found some references for the Briz seems they use the verniers for 15 seconds, then light the main engine, leave some over lap, and finally \u0027tune\u0027 the burn with the verniers again. That means each burn has four regimes for computing delta-v - yuk. Anyway that\u0027s how they do it.\n\u003C/p\u003E\n\u003Cp\u003E\nI installed Action Groups Extended\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/67235-12oct3116\u0022 rel=\u0022\u0022\u003EAGX\u003C/a\u003E\u00A0- so I could set up a button panel with labeled actions like:\u00A0 toggle verniers, main, \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E (when it\u0027s part of a stack with a Soyuz I\u0027ll likely switch the 4 blocks off cause the Soyuz ones will have more leverage), etc. It works very nicely, though you have to be careful not to make \u0027overlapping toggle groups\u0027 that confuse it (or you). The panel\u00A0works fine but it\u0027s still painful to do the burns, so ...\n\u003C/p\u003E\n\u003Cp\u003E\nKerbal Operating System \u003Ca href=\u0022https://ksp-kos.github.io/KOS/\u0022 rel=\u0022external nofollow\u0022\u003EkOS\u003C/a\u003E\u00A0- which lets you write programs for your craft. It\u0027s easy to install, and you can \u0027come at it slowly sideways\u0027 if you are not a strong programmer.\n\u003C/p\u003E\n\u003Cp\u003E\nI played around learning about; tags ( https://ksp-kos.github.io/KOS/general/nametag.html\u00A0) and getting the various engines by tag, some control structures, and did some test burns. The Briz verniers\u00A0can pulse for 0.05 secs and KSP physics \u002B kOS seems to have 0.02 sec tics - but the engines take more than a tic to turn off so it ends up\u00A0pretty close to realistic \u0027delta v resolution\u0027.\n\u003C/p\u003E\n\u003Cp\u003E\nI had a look at a couple of \u0027maneuver burn\u0027 scripts:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cdiv style=\u0022color:rgb(34,34,34);font-family:arial, sans-serif;font-size:small;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;\u0022\u003E\n\u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/2nfmno/burning_for_set_amount_of_deltav/?st=ivg62ezv\u0026amp;sh=d9132254\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.reddit.com/r/Kos/comments/2nfmno/burning_for_set_amount_of_deltav/?st=ivg62ezv\u0026amp;sh=d9132254\u003C/a\u003E\n\u003C/div\u003E\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cdiv style=\u0022color:rgb(34,34,34);font-family:arial, sans-serif;font-size:small;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;\u0022\u003E\n\u003Ca href=\u0022https://web.archive.org/web/20160310064841/http://ksp.baldev.de/kos/mtkv3/exenode.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://web.archive.org/web/20160310064841/http://ksp.baldev.de/kos/mtkv3/exenode.txt\u003C/a\u003E\n\u003C/div\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cdiv style=\u0022color:rgb(34,34,34);font-family:arial, sans-serif;font-size:small;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;\u0022\u003E\nbut they all seemed to focus on getting the right delta-v - \u00A0my burns will be like 5 - 12 minutes so trying to match the impulsive maneuver delta v doesn\u0027t sound right I decided I\u0027d shoot for hitting my desired \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E and thus orbit period. I set the script up to do the ullage and overlap then burn main until the \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E is 4 * the last \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E change below the desired \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, kill main (it doesn\u0027t shut off immediately), start the verniers (about 1/10 th main thrust) and burn until \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E is 3/2 the last ApChange below the desired, and kill verniers. At 200 km it will get the \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E within a couple of meters, and within a couple kilometers out past the moon.\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:rgb(34,34,34);font-family:arial, sans-serif;font-size:small;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;\u0022\u003E\n\u003Cimg alt=\u0022grfAqkc.png\u0022 class=\u0022ipsImage\u0022 height=\u0022565\u0022 src=\u0022http://imgur.com/grfAqkc.png\u0022 width=\u00221000\u0022\u003E\u003C/div\u003E\n\u003Cdiv style=\u0022color:rgb(34,34,34);font-family:arial, sans-serif;font-size:small;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;\u0022\u003E\nit\u0027s doing the ullage burn with verniers, debug is printing per kOS tick: deltaV m/s, deltaT seconds, \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, delta \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E error (here the error is getting 5m smaller per second) the script is below in case it\u0027s useful\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:rgb(34,34,34);font-family:arial, sans-serif;font-size:small;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n// track engine burn time \u0026amp; mass for audit\u003Cbr\u003E\nset m0 to mass.\u003Cbr\u003E\nset t0Main to -1.\u003Cbr\u003E\nset tMain to 0.\u003Cbr\u003E\nset t0Ullage to -1.\u003Cbr\u003E\nset tUllage to 0.\n\u003C/p\u003E\n\u003Cp\u003E\ndeclare function onMain {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0for e in ship:partstagged(\u0022Main\u0022) { e:ACTIVATE. }.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PRINT \u0022Main ACTIVATED\u0022.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0if t0Main \u0026lt; 0 { set t0Main to TIME:SECONDS. }\u003Cbr\u003E\n}\u003Cbr\u003E\ndeclare function offMain {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0for e in ship:partstagged(\u0022Main\u0022) { e:SHUTDOWN. }.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PRINT \u0022Main SHUTDOWN\u0022.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0if t0Main \u0026gt; -1 { set tMain to tMain \u002B (TIME:SECONDS - t0Main). }\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set t0Main to -1.\u003Cbr\u003E\n}\u003Cbr\u003E\ndeclare function onUllage {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0for e in ship:partstagged(\u0022Ullage\u0022) { e:ACTIVATE. }.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PRINT \u0022Ullage ACTIVATED\u0022.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0if t0Ullage \u0026lt; 0 { set t0Ullage to TIME:SECONDS. }\u003Cbr\u003E\n}\u003Cbr\u003E\ndeclare function offUllage {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0for e in ship:partstagged(\u0022Ullage\u0022) { e:SHUTDOWN. }.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PRINT \u0022Ullage SHUTDOWN\u0022.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0if t0Ullage \u0026gt; -1 { set tUllage to tUllage \u002B (TIME:SECONDS - t0Ullage). }\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set t0Ullage to -1.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0// from \u003Ca href=\u0022http://spaceflight101.com/spacerockets/proton-m-briz-m/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://spaceflight101.com/spacerockets/proton-m-briz-m/\u003C/a\u003E 15sec \u002B a bit\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set burnUllageTime to 20.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set burnOverlapTime to 5.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0// burn control info\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set targetAp to nextnode:ORBIT:APOAPSIS.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set b0 to TIME:SECONDS.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set mA to b0 \u002BburnUllageTime-burnOverlapTime.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set uD to b0 \u002BburnUllageTime.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set mainActivated to FALSE.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set ullageShutdown to FALSE.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set tuneActivated to FALSE.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set tuneShutdown to FALSE.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0lock throttle to 1.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set pmann to R(0,0,0) * nextnode:deltav.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0lock steering to pmann.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0// loop init\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set ApEp to targetAp - ORBIT:APOAPSIS.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set tsp to TIME:SECONDS.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set dvp to nextnode:deltav:mag.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0onUllage().\u003Cbr\u003E\n\u00A0\u00A0 \u00A0until tuneShutdown {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set dvc to nextnode:deltav:mag.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set ddv to dvp - dvc.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set dvp to dvc.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set tsc to TIME:SECONDS.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set dts to tsc - tsp.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set tsp to tsc.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set ApEc to targetAp - ORBIT:APOAPSIS.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set dApE to ApEc - ApEp.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0set ApEp to ApEc.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// not every kOS tick is a physics tick - seem to be more kOS than physics\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0//if ddv \u0026gt; 0 or dts \u0026gt; 0 or dApE \u0026gt; 0 {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0if dApE \u0026lt;\u0026gt; 0 {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0PRINT round(ddv,6) \u002B\u0022 \u0022\u002B round(dts, 6) \u002B\u0022 \u0022\u002Bround(ApEc, 3)\u002B\u0022 \u0022\u002Bround(dApE,6).\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0if TIME:SECONDS \u0026gt; mA and not mainActivated { onMain(). set mainActivated to TRUE.}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0if TIME:SECONDS \u0026gt; uD and not ullageShutdown { offUllage(). set ullageShutdown to TRUE.}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0if 10*ddv \u0026gt; dvc or ORBIT:APOAPSIS \u0026gt;= (targetAp \u002B 4*dApE) and not tuneActivated {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0offMain(). set tuneActivated to TRUE. onUllage().\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// when raising \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E dApE is -ve\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0if ORBIT:APOAPSIS \u0026gt;= (targetAp \u002B 3*dApE/2) { // seems to take a tic to off it\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0offUllage(). set tuneShutdown to TRUE.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0lock throttle to 0.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PRINT \u0022ApE: \u0022\u002Bround(targetAp - ORBIT:APOAPSIS,3) \u002B \u0022 \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E: \u0022\u002B round(ORBIT:APOAPSIS,3).\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PRINT \u0022tMain: \u0022\u002B round(tMain,2) \u002B \u0022 tUllage: \u0022 \u002B round(tUllage,2) \u002B \u0022 dm: \u0022\u002B round(1000*(mass - m0)).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n"}]}