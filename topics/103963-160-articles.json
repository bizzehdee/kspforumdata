{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":160,"Articles":[{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-04-05T03:25:22Z","Content":"\u003E \n\u003E \n\u003E 32 minutes ago, Judman13 said:\n\u003E \n\u003E \n\u003E [@Arditan427](https://forum.kerbalspaceprogram.com/index.php?/profile/96857-arditan427/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Any updates on this?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I have the same issue and the only way I can get them to go away is to open up the menu and toggle post processing. It happened on 1.0.5 and now its on 1.1 just the same.\n\u003E \n\nCould you tell me your specs? It might be a gpu problem, which is what I have been suspecting."},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-04-05T03:49:57Z","Content":"\u003E \n\u003E \n\u003E 14 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E For everyone getting shader issues like ocean flooding or effects not appearing at all please try this, I\u0027ve tweaked and recompiled the shaders for unity 5, replace your shaders folder with the contents of this .zip :\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://mega.nz/#!6EwjzRLA!A_5kdS463skefHlBAcboOeBUscHEPUoag13-Q-B4hkc](https://mega.nz/#!6EwjzRLA!A_5kdS463skefHlBAcboOeBUscHEPUoag13-Q-B4hkc)\n\u003E \n\nWOO [@Judman13](https://forum.kerbalspaceprogram.com/index.php?/profile/141938-judman13/) [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) This bugfix removed the artifacts for me! (also adding other weird things, but that\u0027s fine)"},{"CreatedByName":"Judman13","CreatedById":141938,"CreatedDateTime":"2016-04-05T04:25:23Z","Content":"\u003E \n\u003E \n\u003E 34 minutes ago, Arditan427 said:\n\u003E \n\u003E \n\u003E WOO [@Judman13](https://forum.kerbalspaceprogram.com/index.php?/profile/141938-judman13/) [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) This bugfix removed the artifacts for me! (also adding other weird things, but that\u0027s fine)\n\u003E \n\nJust a i5-4670k and intel 4600 graphics. \n\nI\u0027ll have to try the fix and report back. \n\nThanks!"},{"CreatedByName":"barfing_skull","CreatedById":126825,"CreatedDateTime":"2016-04-05T05:54:25Z","Content":"\u003E \n\u003E \n\u003E 16 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E For everyone getting shader issues like ocean flooding or effects not appearing at all please try this, I\u0027ve tweaked and recompiled the shaders for unity 5, replace your shaders folder with the contents of this .zip :\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://mega.nz/#!6EwjzRLA!A_5kdS463skefHlBAcboOeBUscHEPUoag13-Q-B4hkc](https://mega.nz/#!6EwjzRLA!A_5kdS463skefHlBAcboOeBUscHEPUoag13-Q-B4hkc)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Note that this won\u0027t fix the issue with rectangles in the sky.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E They\u0027re separate issues and like selfish\\_meme said I can\u0027t do anything for OpenGL atm.\n\u003E \n\nThanks, the huge waves are gone.  The ocean is still a uniform charcoal gray and I am seeing the bars in the sky now.  I\u0027ll hold on to my britches until you get a chance to look at the OpenGL, then.\n\nThanks again for your enthusiasm for this mod....it\u0027s great!\n\nCheers,\n\n-BS"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-05T11:46:28Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) the OpenGL is all good again using your fix above, good work."},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-04-05T12:54:34Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, Judman13 said:\n\u003E \n\u003E \n\u003E Just a i5-4670k and intel 4600 graphics. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027ll have to try the fix and report back. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Thanks!\n\u003E \n\nI also run off of Intel HD graphics, so could be something with that? I\u0027m guessing that fixed it?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-05T13:14:46Z","Content":"I found a neat way to override the renderType tags, this should fix the weird rectangles in the sky when using EVE clouds or from rocket exhausts.\n\nNew version is uploading."},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2016-04-05T14:33:25Z","Content":"KSP 1.1 build id = 01183  \n\nEve v1.5.5933.38810  \n\nScatterer v1.0.5939.25400  \n\nSVE v0.58 UR  \n\nOS: Windows 7 Service Pack 1 (6.1.7601) 64bit\n\nQuick test: Scatterer release 0.0242 i can confirm it **FIX** rectangles in the sky, soo far soo good yaaay glaad to see my dear blackrack (dark soul mate ) nail problem!!!  \n\nCheer \u0026 Salute  \n\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_  \n\nsome print screen:  \n\nSpoiler\n\n![sI4wiVN.png](http://i.imgur.com/sI4wiVN.png)  \n![jVtilND.png](http://i.imgur.com/jVtilND.png)  \n![tD3M7iM.png](http://i.imgur.com/tD3M7iM.png)\n\n**Edited \u003Ctime datetime=\u00222016-04-05T15:53:29Z\u0022 title=\u002204/05/2016 03:53  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 5, 2016\u003C/time\u003E by Blacks**"},{"CreatedByName":"speedwaystar","CreatedById":153092,"CreatedDateTime":"2016-04-05T16:27:00Z","Content":"i noticed this rectangular artifact with the latest update:\n\ncamera pointing north:\n\n![YD4e0MA.png](http://i.imgur.com/YD4e0MA.png)\n\npointing NW:\n\n![DMQd6hl.png](http://i.imgur.com/DMQd6hl.png)\n\npointing W\n\n![bhXYTQB.png](http://i.imgur.com/bhXYTQB.png)\n\nwithout scatterer:\n\n![tdvNTM4.png](http://i.imgur.com/tdvNTM4.png)\n\n**Edited \u003Ctime datetime=\u00222016-04-05T16:27:51Z\u0022 title=\u002204/05/2016 04:27  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 5, 2016\u003C/time\u003E by speedwaystar**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-05T16:42:19Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, speedwaystar said:\n\u003E \n\u003E \n\u003E i noticed this rectangular artifact with the latest update:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E camera pointing north:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E pointing NW:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E pointing W\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E without scatterer:\n\u003E \n\nTest if it goes away if you disable the lens flare shader or the godrays."},{"CreatedByName":"speedwaystar","CreatedById":153092,"CreatedDateTime":"2016-04-05T16:47:58Z","Content":"hmmm... i\u0027m now having trouble reproducing it. on initial scene load it appeared briefly and then faded to invisibility and i can no longer get it to reappear. mysterious.\n\ni\u0027ll keep an eye out and if it reappears i\u0027ll do some tests.\n\n**Edited \u003Ctime datetime=\u00222016-04-05T16:49:13Z\u0022 title=\u002204/05/2016 04:49  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 5, 2016\u003C/time\u003E by speedwaystar**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-05T16:50:35Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, speedwaystar said:\n\u003E \n\u003E \n\u003E hmmm... i\u0027m now having trouble reproducing it. on initial scene load it appeared briefly and then faded to invisibility and i can no longer get it to reappear. mysterious.\n\u003E \n\nTry waiting until you\u0027re in the shadow of one of the EVE clouds, it looks like it\u0027s one of the shaders not ignoring the projector."},{"CreatedByName":"speedwaystar","CreatedById":153092,"CreatedDateTime":"2016-04-05T16:52:08Z","Content":"that seems oddly plausible. will try. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222016-04-05T16:52:25Z\u0022 title=\u002204/05/2016 04:52  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 5, 2016\u003C/time\u003E by speedwaystar**"},{"CreatedByName":"The White Guardian","CreatedById":148627,"CreatedDateTime":"2016-04-05T17:03:31Z","Content":"So E.V.E was casing the black dots on the horizon in my game... I always thought it was an issue with a mod like Kopernicus or something, I figured that adding new planets must\u0027ve messed with Scatterer somehow... anyhow, it seems as if it\u0027s fixed now, thanks for the new update, [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)!"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2016-04-05T19:47:14Z","Content":"Reporting that the *Tsunami* bug, and some other graphical weirdness seems to be gone as of the latest posted update. Many thanks. I\u0027m on OS X running the latest 1.1 pre-release."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-05T22:33:00Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Try waiting until you\u0027re in the shadow of one of the EVE clouds, it looks like it\u0027s one of the shaders not ignoring the projector.\n\u003E \n\nI actually saw this occasionally in 1.05 as well, it only appeared where the craft was launched from and stayed when the craft moved away."},{"CreatedByName":"quantumpion","CreatedById":57602,"CreatedDateTime":"2016-04-06T01:22:33Z","Content":"So... Scatterer works! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/hA1bW/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222016-04-06T01:45:46Z\u0022 title=\u002204/06/2016 01:45  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 6, 2016\u003C/time\u003E by quantumpion**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-06T03:26:20Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) just a quick report on the latest version in OpenGL, three pictures, the first shows a blue band at the horizon, some interaction with EVE I think it goes away at height, the second shows some moire patterns that are distance related (the higher the further away) and the last shows the Lens Flare not working (made sure it was turned on)\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/FH2ie/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\n[Link to log file](https://drive.google.com/open?id=0B6gbi4omighqeXYwbFA1Si1kdUk)"},{"CreatedByName":"jwenting","CreatedById":57735,"CreatedDateTime":"2016-04-06T06:35:31Z","Content":"\u003E \n\u003E \n\u003E On 4/12/2015 at 10:37 AM, blackrack said:\n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E 13 hours ago, blackrack said:\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E Test if it goes away if you disable the lens flare shader or the godrays.\n\u003E \u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E -Option to disable scaledSpace ambient light (celestial bodies appear realistically lit and will display as crescents in the sky)\n\u003E \n\nDoesn\u0027t go away without godrays, I know that much.\n\nIt\u0027s not 100% reproducable though, making it hard to pin down.\n\nI did notice something else though. Was flying behind the Mun, with the sun behind Kerbin and the Mun between me and Kerbin. Kerbin\u0027s atmosphere was ghosting through the Mun.\n\n![screenshot33.png](http://captainduckman.com/KSP/screenshot33.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-06T14:57:03Z","Content":"Do the terrain scatters not work on 1.1 or is it something wrong on my end?\n\nEdited: Seems to work after a restart.\n\n\u003E \n\u003E \n\u003E 13 hours ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) just a quick report on the latest version in OpenGL, three pictures, the first shows a blue band at the horizon, some interaction with EVE I think it goes away at height, the second shows some moire patterns that are distance related (the higher the further away) and the last shows the Lens Flare not working (made sure it was turned on)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [Link to log file](https://drive.google.com/open?id=0B6gbi4omighqeXYwbFA1Si1kdUk)\n\u003E \n\nFor the first issue I added \u0022experimental viewDir offset\u0022 in the menu to fix it, it\u0027s quite buggy though and may sometimes work the opposite of how it\u0027s supposed to work... It\u0027s weird to see the moire patterns and the lens flare not working, might just be an OpenGL thing though but I have no way to test it atm, the debug log looks fine.\n\n\u003E \n\u003E \n\u003E 9 hours ago, jwenting said:\n\u003E \n\u003E \n\u003E Doesn\u0027t go away without godrays, I know that much.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It\u0027s not 100% reproducable though, making it hard to pin down.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I did notice something else though. Was flying behind the Mun, with the sun behind Kerbin and the Mun between me and Kerbin. Kerbin\u0027s atmosphere was ghosting through the Mun.\n\u003E \n\nAlright, I think I found what was causing it anyway, I will check the ghosting issue.\n\nEdited: [@jwenting](https://forum.kerbalspaceprogram.com/index.php?/profile/57735-jwenting/) I tried to reproduce your ghosting issue but no trace of it, tried both low and high orbits, in map view and outside and it didn\u0027t happen.\n\n**Edited \u003Ctime datetime=\u00222016-04-06T16:28:33Z\u0022 title=\u002204/06/2016 04:28  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 6, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"bigshow281","CreatedById":148365,"CreatedDateTime":"2016-04-06T17:58:16Z","Content":"I don\u0027t know if this is the same problem I\u0027m having but when I launch my rocket and jettison the SRBs, there are long rays extending from the SRBs all the way to the ground. It does this even with god rays disabled. The newest update is a major improvement especially when in use with EVE, the only issue I have left is those long God rays extending down to the ground from any vehicle debris that is jettisoned. Any suggestions?\n\n**Edited \u003Ctime datetime=\u00222016-04-06T23:43:14Z\u0022 title=\u002204/06/2016 11:43  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 6, 2016\u003C/time\u003E by bigshow281**\n  \nRemoved original post quote (sorry)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-06T17:59:55Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, bigshow281 said:\n\u003E \n\u003E \n\u003E I don\u0027t know if this is the same problem I\u0027m having but when I launch my rocket and jettison the SRBs, there are long rays extending from the SRBs all the way to the ground. It does this even with god rays disabled. The newest update is a major improvement especially when in use with EVE, the only issue I have left is those long God rays extending down to the ground from any vehicle debris that is jettisoned. Any suggestions?\n\u003E \n\nIt shouldn\u0027t happen with godrays off, so post pics, maybe it\u0027s something else. Also, please don\u0027t quote the entirety of the OP.\n\nEdited:\n\nHmm what\u0027s this? A clean, artifact-less horizon-line with no pixelated black line over it? You know it\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/IEvpQ/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\nSmall note: If you use anti-aliasing there might still be some artifacts here and there due to the depth buffer not being anti-aliased, but the huge line that jitters around even when you don\u0027t do anything is gone.\n\n**Edited \u003Ctime datetime=\u00222016-04-06T21:08:36Z\u0022 title=\u002204/06/2016 09:08  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 6, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"daniel l.","CreatedById":57763,"CreatedDateTime":"2016-04-06T21:52:14Z","Content":"\u003E \n\u003E \n\u003E 20 hours ago, quantumpion said:\n\u003E \n\u003E \n\u003E So... Scatterer works! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/hA1bW/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nYou Sir are awesome at taking screenshots!"},{"CreatedByName":"sDaZe","CreatedById":111181,"CreatedDateTime":"2016-04-06T22:22:15Z","Content":"\u003E \n\u003E \n\u003E 21 hours ago, quantumpion said:\n\u003E \n\u003E \n\u003E So... Scatterer works! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nThose pics look absolutely amazing"},{"CreatedByName":"barfing_skull","CreatedById":126825,"CreatedDateTime":"2016-04-06T22:54:34Z","Content":"So, I looked a little more at my charcoal-colored ocean.  Turns out it gets brighter and bluer with altitude.  Below about 1500-2000m it\u0027s too dark to see anything but a solid, dark gray surface.  Above that, the sunlight reflections start working, getting better as altitude increases.  I played with the upwelling colors, bumping those values up, and that seemed to help a little bit making things more blue.\n\nAgain, I\u0027m under Linux, so this may be OpenGL related, as I\u0027m also seeing those atmospheric grate-like bars between about 3000 and 6000 m.  Mostly just an FYI at this point, but now that I\u0027ve flown around a bit, I\u0027m seeing more behaviors.\n\nCheers,\n\n-BS"}]}