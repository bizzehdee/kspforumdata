{"TopicId":113987,"ForumId":16,"TopicTitle":"What is the reason for jiggling orbital indicators?","CreatedByName":"cephalo","CreatedById":143148,"CreatedDateTime":"2015-06-24T13:37:53Z","PageNum":1,"Articles":[{"CreatedByName":"cephalo","CreatedById":143148,"CreatedDateTime":"2015-06-24T13:37:53Z","Content":"Sometimes the game seems to struggle with the orbital indicators in map mode. You\u0027ve probably seen it, where the game flashes rapidly between different orbital paths your craft might be on. For example, you can set a target and the ascending node is jumping around. Then when you create a maneuver node, your target indicator shakes violently so that the SAS can\u0027t find it. The effect of this comes and goes, and is mostly an annoyance but can result in inaccurate burns.\n\nIt\u0027s not SAS that causes it, but is it something about my ship design?"},{"CreatedByName":"DancesWithSquirrels","CreatedById":138267,"CreatedDateTime":"2015-06-24T13:43:21Z","Content":"Your ship may be wobbling, and a collection of parts is difficult to predict. You can \u0027lock\u0027 this by going into non-physics time acceleration, even by x2, and place your node without jitter."},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-06-24T13:44:57Z","Content":"The reason wobbling affects this is because your orbit is calculated off your ship\u0027s center of mass. If your ship wobbles, that means the positions of the parts relative to each other change, which in turn means the center of mass changes position in space, placing you in a different orbit."},{"CreatedByName":"Ferdoni","CreatedById":140765,"CreatedDateTime":"2015-06-24T13:45:54Z","Content":"It\u0027s problably the distance that\u0027s problably causing it. If your craft is turning (also with SAS) you are making very tiny course accelerations and decellerations. On a huge distance a minor change in speed can cause your apoapsis of periapsing to adjust \u0027violently\u0027. The only way to solve it is to do course corrections later on the trajectory so the minor velocity changes won\u0027t significantly influence your planned trajectory.\n\nHope this answers your question\n\ncheers"},{"CreatedByName":"cephalo","CreatedById":143148,"CreatedDateTime":"2015-06-24T13:47:37Z","Content":"The thing is, my ship does not appear to be wobbling. Even if I turn SAS off, the jiggling continues, and without SAS I can\u0027t imagine what would be acting on the ship to make it wobble."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-24T13:48:16Z","Content":"I believe it arises from the orbital calculations being done from the root part rather than the center of mass of a vessel. If the root part is not at the CoM then the orbit wobbles, and gets worse if the vessel is rotating.\n\nThe changelog for 1.0.3 mentions this being improved, \u0022Better compute various vessel values This should lower phantom orbit changing and wobble!\u0022 I haven\u0027t really paid enough attention to it to notice yet."},{"CreatedByName":"DancesWithSquirrels","CreatedById":138267,"CreatedDateTime":"2015-06-24T13:50:35Z","Content":"The wobble might be very small; even tiny displacements make the computed CoG change, which registers as acceleration. Sometimes this can be from clipping, as with overstuffed service bays, too."},{"CreatedByName":"cephalo","CreatedById":143148,"CreatedDateTime":"2015-06-24T14:16:32Z","Content":"I tend to put my root part as the command module, which is generally far from the CoM. Where else does root part placement matter? Can I just use the central fuel tank instead, or might that also cause problems?"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-24T14:31:01Z","Content":"For most things, root part doesn\u0027t matter. Some things it does affect (may be incomplete):\n\n- Fuel flow rules in multistage airbreathing vessels.\n\n- Which vessel is controlled by default after separation.\n\n- Correct operation of delta-V calculation mods, they assume a root part in the final stage.\n\n- Making subassemblies."},{"CreatedByName":"Tex_NL","CreatedById":58254,"CreatedDateTime":"2015-06-24T14:35:12Z","Content":"\u003E \n\u003E I believe it arises from the orbital calculations being done from the root part rather than the center of mass of a vessel. If the root part is not at the CoM then the orbit wobbles, and gets worse if the vessel is rotating.\n\u003E ...\n\nAs far as I know this is correct. Craft rotate around the centre of mass and orbital path is calculated from the root part. The further those are apart the bigger the error due to tiny wobbles."},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-06-24T15:53:25Z","Content":"Ooh, so that\u0027s how it works. I stand corrected, then."},{"CreatedByName":"pincushionman","CreatedById":98495,"CreatedDateTime":"2015-06-24T16:13:19Z","Content":"\u003E \n\u003E \u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6Craft rotate around the centre of mass and orbital path is calculated from the root part\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\n\nIs it the root or the \u0022control from here\u0022 node?"},{"CreatedByName":"Tex_NL","CreatedById":58254,"CreatedDateTime":"2015-06-24T16:15:46Z","Content":"\u003E \n\u003E Is it the root or the \u0022control from here\u0022 node?\n\nAs far as I know it\u0027s the root of your craft and not the control node. But I also must admit I am not entirely sure. I am not a developer nor am I a modder. I am just a KSP addict."},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2015-06-24T16:22:43Z","Content":"This is not just moving orbital indicators, its a real force capable of moving things around. It almost deorbited one of my ships."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-24T16:43:11Z","Content":"\u003E \n\u003E This is not just moving orbital indicators, its a real force capable of moving things around. It almost deorbited one of my ships.\n\nSeparate issue, I think. The \u0022jiggle\u0022 is an oscillation between slightly different orbits caused by ship rotation. The phantom force you\u0027re describing is another thing, not sure what causes it aside from kerbals on ladders."},{"CreatedByName":"Nich","CreatedById":145678,"CreatedDateTime":"2015-06-24T17:05:16Z","Content":"control from here just changes the orientation of the nav ball. I have also heard that some of the jitter is also caused by 32 bit floating point calculations"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-24T17:15:15Z","Content":"Four things here:\n\n1. If your orbit has no or almost no eccentricity, Ap and Pe will jitter around the circle.\n\n2. If your orbit has no or almost no inclination, ascending/descending nodes will jitter.\n\n3. Float imprecision: Orbital math is doubles, but Unity physics is floats. Floats aren\u0027t very precise, so just going from frame to frame when not in warp may be enough to subtly change orbit as the rounding changes\n\n4. CoM/rotation issues as described above, although 1.0.3 switched to calculating vessel CoM correct rather than via the root.\n\nNote that 1 and 2 apply always; 3 and 4 only apply when not in warp (i..e off rails).\n\n**Edited \u003Ctime datetime=\u00222015-06-24T17:17:20Z\u0022 title=\u002206/24/2015 05:17  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 24, 2015\u003C/time\u003E by NathanKell**"},{"CreatedByName":"nobodyhasthis","CreatedById":139024,"CreatedDateTime":"2015-06-24T18:57:09Z","Content":"\u003E \n\u003E I believe it arises from the orbital calculations being done from the root part rather than the center of mass of a vessel. If the root part is not at the CoM then the orbit wobbles, and gets worse if the vessel is rotating.\n\u003E The changelog for 1.0.3 mentions this being improved, \u0022Better compute various vessel values This should lower phantom orbit changing and wobble!\u0022 I haven\u0027t really paid enough attention to it to notice yet.\n\nYes, sounds right. I suspected that biggest source or wobble in 1.0.4 is occurs when the SAS is on and fighting the dodgy CoM / root. I used to get better map results with Kerbal Joint Reinforcement. Do you think this is still required?"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-24T18:59:52Z","Content":"I haven\u0027t used KJR in a stockish install since joints got strengthened in 0.23.5. I just turn timewarp on to 5x to stabilize the orbit if I need to make a node and am having troubles.\n\nI really need to try this in 1.0.4 to see how well the revised calculations work."},{"CreatedByName":"Psycix","CreatedById":76916,"CreatedDateTime":"2015-06-24T19:07:06Z","Content":"\u003E \n\u003E I believe it arises from the orbital calculations being done from the root part rather than the center of mass of a vessel. If the root part is not at the CoM then the orbit wobbles, and gets worse if the vessel is rotating.\n\u003E The changelog for 1.0.3 mentions this being improved, \u0022Better compute various vessel values This should lower phantom orbit changing and wobble!\u0022 I haven\u0027t really paid enough attention to it to notice yet.\n\nInteresting.\n\nI\u0027ve always assumed this had to do with floating point errors!\n\nThe good news is that we can tweak our crafts to minimize this effect by changing the root part. My precisely positioned commsats are going to get a revamp!"},{"CreatedByName":"Tex_NL","CreatedById":58254,"CreatedDateTime":"2015-06-24T19:15:53Z","Content":"\u003E \n\u003E ...\n\u003E I really need to try this in 1.0.4 to see how well the revised calculations work.\n\nThe orbit jiggle remains in 1.0.4!\n\nCan\u0027t say if it got better or worse as I normally don\u0027t pay much attention to it. But I know for 100% sure it\u0027s still there in 1.0.4."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-24T19:20:16Z","Content":"\u003E \n\u003E The orbit jiggle remains in 1.0.4!\n\u003E Can\u0027t say if it got better or worse as I normally don\u0027t pay much attention to it. But I know for 100% sure it\u0027s still there in 1.0.4.\n\nExpected it to remain, there are still FP errors as NathanKell mentioned. The thing I want to test is whether rotation of the vessel still exacerbates it as before, or if the revised CoM calculation has eliminated that."},{"CreatedByName":"cephalo","CreatedById":143148,"CreatedDateTime":"2015-06-24T21:24:58Z","Content":"What I have experience lately might also have something to do with fairly high part count around 200. It wasn\u0027t the usual stuff with really small angles or near circular orbits. I couldn\u0027t tell that my ship was moving, but something might have been vibrating somehow. Framerate was kind of bad at those times."}]}