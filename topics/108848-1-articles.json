{"TopicId":108848,"ForumId":36,"TopicTitle":"[HOWTO] Airbreathing Engines in KSP 1.0","CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-12T00:34:37Z","PageNum":1,"Articles":[{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-12T00:34:37Z","Content":"\n\u003Cp\u003EAs promised, albeit delayed, here is a guide on how to make airbreathing engines in KSP 1.0\u002B.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EWhat\u0027s Changed\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EA number of things have changed for airbreathers in 1.0. First of all, velocityCurve is dead and gone. ModuleEngines (and ModuleEnginesFX, which now derives from ModuleEngines) don\u0027t support it. Second, the Isp bug relating to air has been fixed. Third, airbreathers now have fuel flow (and thus thrust) proportional to density and mach, and use two new curves, atmCurve and velCurve and three new boolean variables (atmChangeFlow, useAtmCurve, useVelCurve) to tune that. Fourth, four new number variables are supported for tuning performance, machLimit and machHeatMult, flameoutBar, and CLAMP. All this means that airbreathing engines can be simulated much more realistically in KSP 1.0, but making them takes a bit more work.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EFloatCurves\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s worth noting that, if you didn\u0027t know, FloatCurves are a wrapper for AnimationCurves, which are Unity\u0027s way of implementing cubic bezier splines. FloatCurves can come in two forms: key = x y, and key = x y in out. The first mode makes Unity calculate the tangents itself, in the latter mode you specify the tangents. \u003Ca href=\u0022forum.kerbalspaceprogram.com/threads/93332-INFO-KSP-floatCurves-and-you-the-magic-of-tangents\u0022 rel=\u0022external nofollow\u0022\u003EPlease see here for more details on FloatCurves\u003C/a\u003E (though note that any reference to \u0027velocityCurve\u0027 is obsolete).\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EParameter Overview\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EatmChangeFlow\u003C/strong\u003E. The key thing to use, and that tells KSP your engine is an airbreather, is atmChangeFlow. If false, then atmospheric density has no bearing on thrust (i.e. you\u0027re no longer an airbreather). It defaults to false.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003EignoreForIsp\u003C/strong\u003E. Next, the PROPELLANT nodes have a new option. You\u0027ll see that for IntakeAir, stock airbreathers have \u0060ignoreForIsp = True\u0060 set. That means that, properly, the mass of the air you\u0027re breathing in is ignored for Isp calculations. In .90 and earlier, KSP included that number, which meant that airbreathers (with a 1:15 ratio of fuel to air) had 16x the Isp they said they did. Always use \u0060ignoreForIsp = True\u0060 when using IntakeAir or any other generated resource, \u003Cem\u003Eunless\u003C/em\u003E no other resource has a density. You\u0027ll have to leave it out if you\u0027re making an electric propeller; in that case, Isp will describe the mass flow of the engine rather than the mass flow of the fuel used.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003EuseAtmCurve and the atmCurve\u003C/strong\u003E. If atmChangeFlow is specified but useAtmCurve is false, then flow will be linearly proportional to density (1x flow at sea level, declining as density declines). If true, then the curve is used, which relates density (in kg/m^3 divided by 1.225, so 1.0 at sea level) to the flow multiplier: the x (time) value of the curve is the atmospheric density/1.225, and the y (value) value of the curve is the flow multiplier. All stock airbreathers use the curve to better control thrust at altitude. If you\u0027re designing a jet engine you probably want a curve somewhere between the basic jet engine and the turboramjet; if you\u0027re designing a scramjet, you probably want the flow to start at 0 and then go up once you get to operating altitude, so something like key = 1 0, key = 0.5 0.1, key = 0.1 1.0, key = 0 0. If you\u0027re designing a propeller aircraft, you want the curve to be much flatter, only slightly better than linear in the 4\u002Bkm region and tapering off to nothing by 12km.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003EuseVelCurve and the velCurve\u003C/strong\u003E. The velCurve relates mach number to flow multiplier, so the x (time) value is mach, and the y (value) value is flow multiplier. For high-bypass turbofans, you want a fairly linear decline from 1.0 at Mach 0 to 0 at Mach 1.05 or so. For turbojets and low-bypass turbofans, you want a roughly quadratic gain in flow past Mach 0.5, peaking somewhere around Mach 1.5 and going down to nothing by Mach 3. For afterburning jets, the peak should be Mach 2 to Mach 3, tapering off past Mach 4 or so, and for ramjets they won\u0027t have any flow until Mach 0.3 or so then climb slowly with the peak up past Mach 3, and the tapering off to nothing shouldn\u0027t be until Mach 5 (perhaps slightly past Mach 5, though Mach 5 is where ramjets usually die off). Special engines (like the combined-cycle RAPIER, which is a SABRE basically) may have slightly different parameters, and turboramjets (i.e. a turbojet \u002B ramjet combo, like the stock TRJ) will perform like turbojets with afterburners under Mach 2, and then blending into ramjet behavior past Mach 2. Scramjets, well, there really isn\u0027t any unclassified data on them, but we know they don\u0027t work at all until past Mach 5, and really only work at high altitude, and if you\u0027re \u003Cem\u003Elucky\u003C/em\u003E they might give you some thrust in the Mach 5 - Mach 10 range. Propellers should have nearly the same curve as low-bypass turbofans do, starting at 1 and declinging rapidly, although they will still produce \u003Cem\u003Esome\u003C/em\u003E thrust past Mach 1, just not very much (a multiplier of 0.1, tapering off to 0 by Mach 4, say). Note that their decline isn\u0027t very linear, and should fall somewhat slowly until Mach 0.6 or so, after which it falls rapidly until Mach 1.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003EmachLimit and machHeatMult\u003C/strong\u003E. These control the limit beyond which the engine starts producing extra heat; the extra heat produced is a multiplier to heatProduction, calculated as 1 \u002B (mach - machLimit) * machHeatMult.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003EflameoutBar and CLAMP\u003C/strong\u003E. These control how flameouts occurs. When the combined flow multiplier (product of atmCurve and velCurve) is below flameoutBar, the engine will flame out because \u0022air combustion failed\u0022. The minimum flow multiplier will never go below CLAMP (to avoid a divide by zero error). You probably never need to touch CLAMP, but if you want a lower flameout bar than 7% (0.07) you can specify it.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-16T01:46:40Z\u0022 title=\u002205/16/2015 01:46  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 16, 2015\u003C/time\u003E by NathanKell\u003C/strong\u003E\n\u003Cbr\u003Eadded more on floatcurves\n\u003C/span\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2015-05-12T06:17:13Z","Content":"\n\u003Cp\u003EStill don\u0027t understand how to use AtmCurve right. \u003C/p\u003E\u003Cp\u003ECan you please help me with electric impeller config?\u003C/p\u003E\u003Cp\u003EWas trying to use this: \u003C/p\u003E\u003Cp\u003EatmCurve\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E key = 0 0 0 0\u003C/p\u003E\u003Cp\u003E key = 0.3 0.18 0.6 0.6\u003C/p\u003E\u003Cp\u003E key = 1 0.5 0.4 0.4\u003C/p\u003E\u003Cp\u003E key = 5 1 0 0\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003EvelCurve\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E key = 0 1 0 0\u003C/p\u003E\u003Cp\u003E key = 0.5 0.8 -0.9460317 -0.9460317\u003C/p\u003E\u003Cp\u003E key = 0.8 0.3523809 -1.626984 -1.626984\u003C/p\u003E\u003Cp\u003E key = 1 0 -1.761905 -1.761905\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003EI want impeller to \u003C/p\u003E\u003Cp\u003E1) have 100% thrust at Eve sea level, 40-50% thrust at Kerbin sea level and 20-30% thrust at Duna sea level. More thrust in denser atmosphere, less thrust in thin one. \u003C/p\u003E\u003Cp\u003E2) be limited to 0.8 Mach, but able to reach it (at least at Kerbin).\u003C/p\u003E\u003Cp\u003EP.S. \u0022atmChangeFlow\u0022 parameter seems to check for oxygen. I was unable to start impeller on Duna and Eve with this on.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-12T06:33:04Z\u0022 title=\u002205/12/2015 06:33  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 12, 2015\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-12T22:00:17Z","Content":"\n\u003Cp\u003EThat looks basically right, although that means that at roughly 6km on Kerbin (where density ~= 0.35, so /1.225 it ~=0.3) you\u0027ll also get a multiplier of 0.18.\u003C/p\u003E\u003Cp\u003EatmChangeFlow has nothing to do with oxygen. However, you will need to create a ModuleResourceIntake that does not check for oxygen and creates a resource that your engine uses (intakeAir as collected by the stock intakes, well, the stock intakes check for oxygen).\u003C/p\u003E\n"},{"CreatedByName":"StevenJ","CreatedById":114626,"CreatedDateTime":"2015-05-14T06:26:44Z","Content":"\n\u003Cp\u003ENathan\u003C/p\u003E\u003Cp\u003EJust wanted to say THANKS! I had been looking for a guide to understanding the new velocity curves a few days ago and happened across your post a day ago! I figured out a lot of what you wrote here on my own such as percentage of engine power at mach value. A lot of the other things you wrote here really helped me.\u003C/p\u003E\u003Cp\u003ERegards,\u003C/p\u003E\u003Cp\u003ESteve\u003C/p\u003E\n"},{"CreatedByName":"Eskandare","CreatedById":62742,"CreatedDateTime":"2015-05-14T07:52:59Z","Content":"\n\u003Cp\u003ENathan, please pin this for our air breathing brethren, this is some important useful info.\u003C/p\u003E\n"},{"CreatedByName":"MatterBeam","CreatedById":133334,"CreatedDateTime":"2015-05-14T13:33:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eskandare\u0022 data-cite=\u0022Eskandare\u0022\u003E\u003Cdiv\u003ENathan, please pin this for our air breathing brethren, this is some important useful info.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAgreed. Please pin this.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-14T19:40:26Z","Content":"\n\u003Cp\u003EThanks folks. I\u0027ve suggested Cpt. Kipard add it to the stickied links compilation.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-14T21:20:42Z","Content":"\n\u003Cp\u003EYeah, no problem, except one. As you know this is something that becomes an issue with major changes, and that is what to do with the remaining now-false information. Some of the other engine snippets and threads contain it (not to mention everything else). I routinely come across new modders (I sometimes even get PMd) following outdated stuff because I still need to keep it linked, because no other thread contains the other relevant info. What do?\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EActually it\u0027s the floatCurve thread that still mentions velocityCurve\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-14T21:26:51Z\u0022 title=\u002205/14/2015 09:26  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 14, 2015\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-14T22:35:28Z","Content":"\n\u003Cp\u003EI\u0027d say best to PM the thread\u0027s OP and ask them to change it, and meanwhile put a note by the link stating which information is now obsolete.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-14T22:48:53Z","Content":"\n\u003Cp\u003ETaverius, who wrote the guide, hasn\u0027t been on since January.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EActually this particular instance might not be too problematic. So far I can\u0027t actually find anyone actively advising people to use the deprecated bits. Ignore me.\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-05-28T06:41:44Z","Content":"\n\u003Cp\u003EFor reference, here are the stock velCurves and atmCurves:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://s274.photobucket.com/user/blowfishpro/media/KSP/Debug/stockthrustmach_zpscgdy10rp.png.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i274.photobucket.com/albums/jj251/blowfishpro/KSP/Debug/stockthrustmach_zpscgdy10rp.png\u0022 alt=\u0022stockthrustmach_zpscgdy10rp.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://s274.photobucket.com/user/blowfishpro/media/KSP/Debug/stockthrustdensity_zps5kv7jtnu.png.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i274.photobucket.com/albums/jj251/blowfishpro/KSP/Debug/stockthrustdensity_zps5kv7jtnu.png\u0022 alt=\u0022stockthrustdensity_zps5kv7jtnu.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-09-01T03:16:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cstrong\u003EatmChangeFlow\u003C/strong\u003E. The key thing to use, and that tells KSP your engine is an airbreather, is atmChangeFlow. If false, then atmospheric density has no bearing on thrust (i.e. you\u0027re no longer an airbreather). It defaults to false.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHey NathanKell, I would like to clarify this one bit.... If this false it ignores the atmcurve completely?\u003C/p\u003E\u003Cp\u003EI wanted something a bit different... to have the fuel flow at maximum while thrust still decreases at higher altitudes, exemplifying an inefficient thin-air engine. Is it possible? And is it actually accurate or am I tripping?\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-09-01T03:50:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003EHey NathanKell, I would like to clarify this one bit.... If this false it ignores the atmcurve completely?\u003Cp\u003EI wanted something a bit different... to have the fuel flow at maximum while thrust still decreases at higher altitudes, exemplifying an inefficient thin-air engine. Is it possible? And is it actually accurate or am I tripping?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBe careful, you may be confusing atmosphereCurve, which defines Isp as a function of altitude, and atmCurve, which defines flow as a function of altitude. It is possible to do what you say, but it\u0027s not exactly accurate - if the pressure gets low enough the engine will flame out but until then, the only thing that matters for engine performance are the pressure ratios involved, and those stay the same. If anything, most jet engines will gain a bit of efficiency at higher altitudes because the temperature of the air is lower. Flow should change with altitude regardless though - the air is thinner meaning that the total mass flux entering the engine should scale with pressure.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-09-01T04:32:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003EBe careful, you may be confusing atmosphereCurve, which defines Isp as a function of altitude, and atmCurve, which defines flow as a function of altitude. It is possible to do what you say, but it\u0027s not exactly accurate - if the pressure gets low enough the engine will flame out but until then, the only thing that matters for engine performance are the pressure ratios involved, and those stay the same. If anything, most jet engines will gain a bit of efficiency at higher altitudes because the temperature of the air is lower. Flow should change with altitude regardless though - the air is thinner meaning that the total mass flux entering the engine should scale with pressure.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m trying to adjust values for a propeller engine though. They will simply lose thrust to air density with altitude, so they require to either go faster or spin faster to bite on same chunks of air sort off. Needing more throttle making them less efficient to maintain same thrust levels at higher altitudes, even though with lesser air density also means fuel consumed and thus less engine power....\u003C/p\u003E\u003Cp\u003EAnyway, there is a more pressing matter that\u0027s bugging me. This engine I\u0027m tweaking has 16 maximum power and for the life of me I can\u0027t get it to output the actual maximum, it always sits around 10 even though its supposed to be optimal, for example at the runway.\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-09-01T05:21:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003EI\u0027m trying to adjust values for a propeller engine though. They will simply lose thrust to air density with altitude, so they require to either go faster or spin faster to bite on same chunks of air sort off. Needing more throttle making them less efficient to maintain same thrust levels at higher altitudes, even though with lesser air density also means fuel consumed and thus less engine power....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut if you can do that at altitude than you can do that at sea level. It seems that what you want more is variation with throttle rather than atmosphere.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003EAnyway, there is a more pressing matter that\u0027s bugging me. This engine I\u0027m tweaking has 16 maximum power and for the life of me I can\u0027t get it to output the actual maximum, it always sits around 10 even though its supposed to be optimal, for example at the runway.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDensity is one possible factor - full flow is achieved at 1.225 kg/m^3, but it will vary with temperature, so in particular during the day the actual density is likely to be lower.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-02T01:31:14Z","Content":"\n\u003Cp\u003EIn KSP 1.0.4 there\u0027s a new variable literally just for that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EmultFlow\u003C/p\u003E\u003Cp\u003EIf true (by default) then atmCurve and velCurve multiply flow. If false, they multiply thrust.\u003C/p\u003E\u003Cp\u003ESet it to false for propeller engines.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-09-02T20:24:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EIn KSP 1.0.4 there\u0027s a new variable literally just for that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EmultFlow\u003C/p\u003E\u003Cp\u003EIf true (by default) then atmCurve and velCurve multiply flow. If false, they multiply thrust.\u003C/p\u003E\u003Cp\u003ESet it to false for propeller engines.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWuuuuuttt? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 alt=\u0022:kiss:\u0022\u003E\u003C/p\u003E\u003Cp\u003EAwesome, I\u0027m guessing this will go right inside ModuleEngineFX right? Much thanks!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003EBut if you can do that at altitude than you can do that at sea level. It seems that what you want more is variation with throttle rather than atmosphere.\u003Cp\u003EDensity is one possible factor - full flow is achieved at 1.225 kg/m^3, but it will vary with temperature, so in particular during the day the actual density is likely to be lower.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOhhh dear god, didn\u0027t know KSP was actually accounting density for variable pressure and temperature... That is awesome, but complicated. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnyway I\u0027m quite annoyed at how I\u0027m getting such low performance on this engine:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\tmaxThrust = 20\u003Cbr\u003E\t\tatmosphereCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tkey = 0 9600 0 0\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tvelCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tkey = 0 0.8\u003Cbr\u003E\t\t\tkey = 0.4 1\u003Cbr\u003E\t\t\tkey = 1.3 0\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tatmCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tkey = 0 0\u003Cbr\u003E\t\t\t//key = 0.8 1\u003Cbr\u003E\t\t\tkey = 1 1\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is what I currently have. with 20 max thrust I\u0027m getting at most 12N of thrust. And yes I\u0027ve tried with the vel curveat maximum before stopped..\u003C/p\u003E\u003Cp\u003EHaving a 50~60% of max performance seems excessive due day time variation alone. The atm curve, 1 should equal the standard 1,225 kg/m\u00C3\u201A\u00C2\u00B3 doesn\u0027t it?\u003C/p\u003E\u003Cp\u003EI\u0027m imagining getting to the poles with could air and having a beast of an engine XD\u003C/p\u003E\u003Cp\u003EAnd hints on how to fix this or should I just settle and increase max thrust?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-02T20:43:46Z","Content":"\n\u003Cp\u003EYou\u0027re not specify tangents. That can lead to unintuitive behavior. See here for details:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/93332-INFO-KSP-floatCurves-and-you-the-magic-of-tangents\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/93332-INFO-KSP-floatCurves-and-you-the-magic-of-tangents\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EatmCurve is actually normalized (as atmosphereCurve is), so key = 1 1 means at 1.225kg/m^3 density the multiplier is 1.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-09-02T22:44:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EYou\u0027re not specify tangents. That can lead to unintuitive behavior. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah I know that\u0027s why I try to keep as simple as possible... the atmcurve is only two values so should work alright.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EI\u0027m assuming that when no tangent are specified the curve will just fit the best way doesn\u0027t it? \u003C/span\u003E\u003C/p\u003E\u003Cp\u003EJust one other quicky question: \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Ethe two values are tan-in tan-out right?\u003C/span\u003E that value being sen [0\u00C3\u201A\u00C2\u00B0 ~90\u00C3\u201A\u00C2\u00B0] = 0 ~ 1 ?\u003C/p\u003E\u003Cp\u003EJust read a bit more on that thread. unfortunately I can\u0027t get that editor to try out... Doesn\u0027t work on linux.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-02T22:52:25Z\u0022 title=\u002209/02/2015 10:52  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 2, 2015\u003C/time\u003E by Gfurst\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-03T01:45:30Z","Content":"\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/124708-1-0-x-Amazing-Curve-Editor-1-1-%28June-13th%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/124708-1-0-x-Amazing-Curve-Editor-1-1-%28June-13th%29\u003C/a\u003E is a KSP plugin that will work for you. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-09-03T05:11:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/124708-1-0-x-Amazing-Curve-Editor-1-1-%28June-13th%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/124708-1-0-x-Amazing-Curve-Editor-1-1-%28June-13th%29\u003C/a\u003E is a KSP plugin that will work for you. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAwwww yeahhhh!!!\u003C/p\u003E\u003Cp\u003ENow were talking, very much thanks!\u003C/p\u003E\u003Cp\u003EActually I was figuring out it myself, it has nothing to do with sen but actually some magic with actually tangent to make some spline thing... I don\u0027t know... anyway:\u003C/p\u003E\u003Cp\u003EInside the game it self, the meta\u002Bf12 window shows a drag profile that you can edit... its far from anything intuitive but works if you place values to see how smooth the curve actually is.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EvelCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tkey = 0 0.8 2 2\u003Cbr\u003E\t\t\tkey = 0.2 1 0 0\u003Cbr\u003E\t\t\tkey = 0.9 0.2 -2 -2\u003Cbr\u003E\t\t\tkey = 1.2 0 0 0\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI polished my curve with this... I also figured that same tan-in/tan-out equals a smooth tangent line to both side of the curve on that point.\u003C/p\u003E\u003Cp\u003EI still haven\u0027t figure out why my engine isn\u0027t going any near the maximum thrust yet. I\u0027m suspecting it actually needs excess Air resource from 0.01 to 0.5, will test tomorrow.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-09-03T23:27:13Z","Content":"\n\u003Cp\u003EI have been thinking again... (I wonder why I even think in the first place)\u003C/p\u003E\u003Cp\u003Ethe new multFlow value is really cool... It allows to change Engine Isp performance based on the resulting thrust of the other curves...\u003C/p\u003E\u003Cp\u003EInteresting... but...\u003C/p\u003E\u003Cp\u003ECome to think of it, internal combustion engines will have to lean the mixture injection less and less fuel as atmosphere density lowers. So that means it should actually be more economic.\u003C/p\u003E\u003Cp\u003EOn the other hand I think jet engines are the other way, because kerosene doesn\u0027t need a perfect mixture and air is being compressed either way. Am I tripping or what?\u003C/p\u003E\u003Cp\u003EOne thing is for sure though, the rockets are the one that should take advantage on the new variable... Meaning they would have constant fuel flow independent of thrust output.\u003C/p\u003E\u003Cp\u003EElaborate with me here please.\u003C/p\u003E\n"},{"CreatedByName":"Araym","CreatedById":46343,"CreatedDateTime":"2017-03-30T06:08:56Z","Content":"\n\u003Cp\u003E\nI\u0027m doing a bit of necroing, but basically I\u0027m pretty in the same problem in which it was \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/126201-gfurst/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022126201\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/126201-gfurst/\u0022 rel=\u0022\u0022\u003E@Gfurst\u003C/a\u003E , because I\u0027m trying to make some propeller engines, and only NOW I found this thread about how to set their performances ( some help, if not too busy, from \u0022sensei\u0022 \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022 rel=\u0022\u0022\u003E@NathanKell\u003C/a\u003E or any Dev that could help me refine my toughts will be greatly apreciated because i was struggling until now \u003Cimg alt=\u0022:blush:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 title=\u0022:blush:\u0022\u003E):\n\u003C/p\u003E\n\u003Cp\u003E\nbasically, I know (on paper) that my engin has a given power at sea level (let\u0027s say 80%), then it ramps up to its 100% at 3000m, then it fades to the max altitude it can achieve (let\u0027s say 9000m), so basically (removing the tangent values, that I\u0027ll refine in a curve editor) I could have this as \u0022atmCurve\u0022:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\natmCurve\n{\nkey = 1 0.8 xxx xxx // 80% at sea level \nkey = 0.62859 1 xxx xxx // 100% at 3000m - I calculate the atmo density with samples in game made by the pressure science part :P\nkey = 0.21539 0.3 xxx xxx // basically having not enough air to push at 9000m\nkey = 0 0 xxx xxx // in space there is no air, then NO thrust\n}\u003C/pre\u003E\n\u003Cp\u003E\n... then, to complete the setting, I should add:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EatmChangeFlow = True // standard coding defining an airbreather\nuseVelCurve = True \nuseAtmCurve = True\nmultiFlow = False // the needed change to vary the actual \u0022thrust\u0022 (how many HP/kW should the engine have at a given altitude)\n\natmCurve\n{\nkey = 1 0.8 xxx xxx // 80% at sea level \nkey = 0.62859 1 xxx xxx // 100% at 3000m - I calculate the atmo density with samples in game made by the pressure science part :P\nkey = 0.21539 0.3 xxx xxx // basically having not enough air to push at 9000m\nkey = 0 0 xxx xxx // in space there is no air, then NO thrust\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nnow... how should I use the \u0022velCurve\u0022???\u003Cbr\u003E\nMy first thoughts are about a graph about its own \u0022accelleration\u0022 up to the \u0022max possible velocity\u0022 (... and if I understood correctly, in Mach numbers), until the propellers cannot push further anymore.\u003Cbr\u003E\nStarting with a low output from 0 (static), slowly going up (to recreate the propeller need to start to \u0022bite\u0022 the air to accellerate, slower than a jet engine) up to the full potential of the blades (from take-off velocity onwards), untill, reached the designed \u0022max speed\u0022, it starts to have those \u0022issues\u0022 (I\u0027m not an aircraft engineer, but I know that there are various fact that not let a propeller engine/its blades to accellerate past a given designed value) that stops it to gain more velocity...\n\u003C/p\u003E\n\u003Cp\u003E\nBasically something like (again, just an example... I\u0027ll have to figure the exact values in various manners, othar than add the full values to smooth the curve later, changing those \u0022xxx\u0022 I added with a proper curve configuration):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EvelCurve\n{\nkey = 0 0.4 xxx xxx\nkey = 0.2 0.8 xxx xxx\nkey = 0.4 1 xxx xxx\nkey = 0.6 0.2 xxx xxx\nkey = 0.8 0.1 xxx xxx\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n... is it someway correct???\u003Cbr\u003E\u003Cbr\u003E\u003Cstrong\u003EREFINING THE CONCEPT:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n... I then found (still using the \u0022fuel flow\u0022 mechanic before I\u0027ll add \u0022mutliFlow = False\u0022) that sometime, from a levelled max speed, if my plane (a fighter) goes in a dive, the engine itself, past some velocities, could eventually \u0022flame out\u0022 and turn itself \u0022off\u0022, rather than keep spinning in \u0022idle mode\u0022 (like when variable pitch blades goes \u0022feathering\u0022). How could I change/use \u0022flameoutBar\u0022 (and/or eventually \u0022CLAMP\u0022...) as I\u0027m not a genius and I do not have any practical example of them used in stock jet engine, to fine tuning the engine to have a very low thrust, but still being \u0022turned on\u0022 (basically keeping the animation of the spinning, rather than the actual mechanics that \u0022flame out\u0022 it, turning it off)?\u003Cbr\u003E\nWhat is the \u0022basic-stock\u0022 value of \u0022flameoutBar\u0022, to have that 7%? 0.07???\n\u003C/p\u003E\n\u003Cp\u003E\nUp to now, guessing, I tweaked, lower and lower, the \u0022ignitionThreshold\u0022 value in the ModuleEngine, to mitigate that behaviour, but probably I was messing with something not needed. What does this value do actually, in the synthax of a cfg? What is its \u0022basic-stock\u0022 value?\n\u003C/p\u003E\n\u003Cp\u003E\nThen... IntakeAir ratio: how much could be a someway correct value? Having as example some very different engine, in stock, from the BIG value in the larger turbofan like the J-90 Goliath, at 227, to the very small value of the turbo ram jet J-X4 Whiplash, at 8, what could be a balanced value for a \u0022piston engine\u0022 (like those in WW2) or for a more modern turboprop (that uses the turbine concept geared to a propeller)? Should an hungry but powerful air cooled, radial engine (like the P\u0026amp;W R-2800 that powered F4U Corsair and P-47 Thunderbolt) have a higher or lower value than a V12, liquid cooled, less powerful but someway more efficient engine, like the Rolls-Royce Merlin (that powered the Spitfire, and in his american builod version, the P-51 Mustang) or that Daimler-Benz DB-601/605 (that powered the Messerschmitt Bf 109)???\n\u003C/p\u003E\n\u003Cp\u003E\nAfter this wall of text, thanks to anyone that could eventually bother to answer, in advance \u003Cimg alt=\u0022^_^\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_happy.png\u0022 title=\u0022^_^\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-30T14:23:17Z\u0022 title=\u002203/30/2017 02:23  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 30, 2017\u003C/time\u003E by Araym\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2017-04-18T03:06:46Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/46343-araym/\u0026amp;do=hovercard\u0022 data-mentionid=\u002246343\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/46343-araym/\u0022 rel=\u0022\u0022\u003E@Araym\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, what\u0027s \u0027\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EmultiFlow \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nwas that added in 1.2.x?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSecond, the general gist of a prop engine is that atmCurve and velCurve represent the engine and atmCurveIsp and velCurveIsp represent the prop. So:\n\u003C/p\u003E\n\u003Cp\u003E\n1. atmCurve should be linear if it is unsuper/turbo-charged. If it\u0027s supercharged, you\u0027ll have one peak per stage. If it\u0027s turbocharged, you\u0027ll be essentially flat-rated until you hit critical alt. Broadly speaking, atmCurve should track a BHP vs Altitude graph of the engine, with altitude converted into normalized density. Note that atmCurve (and atmCurveIsp) use normalized density (i.e. density in kg/m^3 divided by 1.225).\n\u003C/p\u003E\n\u003Cp\u003E\n2. velCurve represents the effect of ram air, i.e. supercharged engines which take advantage of ram air can increase charge density above what the charger can normally grant, in static conditions, by \u0027ramming\u0027 the air in due to the velocity. So something like 1.0 at Mach 0, peaking about 1.2 or so at Mach 0.85, and then falling off sharply due to transonic weirdness.\n\u003C/p\u003E\n\u003Cp\u003E\n3. atmCurveIsp should be linear. Thrust from a propeller is linearly proportional to air density.\n\u003C/p\u003E\n\u003Cp\u003E\n4. velCurveIsp is where it gets interesting. A prop is a constant power device, so it will have its maximum thrust at 0 velocity and then taper off. However it\u0027s not at all linear because of the effect of pitch angle and tip speed. You want a generally downward sloping curve that tails off sharply once the tips start to go transonic (indeed might even go negative to represent the vastly increased drag).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHope that helps!\n\u003C/p\u003E\n"}]}