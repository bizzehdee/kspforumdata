{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":240,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-18T18:18:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223025683\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492538178\u0022 data-ipsquote-userid=\u0022150940\u0022 data-ipsquote-username=\u0022MR L A\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, MR L A said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nhuh, I\u0027ll whack it in and see what happens \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\nI\u0027ll do a bit of digging but I vaguely remember a few people saying their performance was unexpectedly (much more of a hit than Scatterer should have).\u003Cbr\u003E\u003Cbr\u003E\nI\u0027ve used a fresh install of KSP when testing scatterer \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u00A0so conflicts don\u0027t appear to be the problem.\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m not with my\u00A0PC for about a week, so I can\u0027t currently show you my config.. it should be exactly as appears on download though\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat was when people updated to the new version but kept using configs made for previous versions.\n\u003C/p\u003E\n"},{"CreatedByName":"MR L A","CreatedById":150940,"CreatedDateTime":"2017-04-18T19:31:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223025705\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492539484\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat was when people updated to the new version but kept using configs made for previous versions.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nAhh thanks \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0I\u0027ll report back soon, hopefully I won\u0027t have anything negative to report \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-19T21:38:13Z","Content":"\n\u003Cp\u003E\nYeah this is not totally what I expected when I wanted to make the water surface render from below, but it\u0027s a start\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022aB3nvs3.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/aB3nvs3.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2017-04-19T21:41:42Z","Content":"\n\u003Cp\u003E\nYou just landed upside down and flipped the camera over... you\u0027re so transparent. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-19T21:44:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027219\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492638102\u0022 data-ipsquote-userid=\u0022128643\u0022 data-ipsquote-username=\u0022Poodmund\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Poodmund said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou just landed upside down and flipped the camera over... you\u0027re so transparent. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDamn, what planet did I land on?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022AHHFm7Y.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/AHHFm7Y.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"qromodynmc","CreatedById":87139,"CreatedDateTime":"2017-04-19T22:03:57Z","Content":"\n\u003Cp\u003E\nAdd blur under water, then all set \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2017-04-19T22:18:18Z","Content":"\n\u003Cp\u003E\nThis just keeps getting better and better... \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E Blackrack is there a chance you can extinguish\u00A0the crazy underwater view distance from stock?\n\u003C/p\u003E\n"},{"CreatedByName":"JadeOfMaar","CreatedById":167617,"CreatedDateTime":"2017-04-19T22:26:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027225\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492638266\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDamn, what planet did I land on?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAssuming it\u0027s one of \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/148335-starcrusher96/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022148335\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/148335-starcrusher96/\u0022 rel=\u0022\u0022\u003E@StarCrusher96\u003C/a\u003E\u0027s many, many\u00A0\u003Cs\u003Esexy\u003C/s\u003E planets, we have no hope of guessing right so just tell us. D:\n\u003C/p\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-04-19T22:30:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027268\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492640771\u0022 data-ipsquote-userid=\u0022167617\u0022 data-ipsquote-username=\u0022JadeOfMaar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, JadeOfMaar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAssuming it\u0027s one of \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/148335-starcrusher96/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022148335\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/148335-starcrusher96/\u0022 rel=\u0022\u0022\u003E@StarCrusher96\u003C/a\u003E\u0027s many, many\u00A0\u003Cs\u003Esexy\u003C/s\u003E planets, we have no hope of guessing right so just tell us. D:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think it\u0027s kerbin but it seems so alien underwater, that\u0027s why he said that\n\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-19T23:10:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027263\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492640298\u0022 data-ipsquote-userid=\u002280363\u0022 data-ipsquote-username=\u0022Avera9eJoe\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n52 minutes ago, Avera9eJoe said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis just keeps getting better and better... \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E Blackrack is there a chance you can extinguish\u00A0the crazy underwater view distance from stock?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m trying to nail the look of the underwater surface look first, I can\u0027t put my finger on what it is exactly but something is wrong, and the view feels restricted to a very small angle, smaller than I expected. The surface seems a bit plastic-y as well.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Jy1XAEt.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/Jy1XAEt.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022FmmmFTJ.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/FmmmFTJ.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNot sure what\u0027s wrong, maybe it just doesn\u0027t pop like this\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00221.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://cdn.shutterstock.com/shutterstock/videos/6205787/thumb/1.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try again tomorrow.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027268\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492640771\u0022 data-ipsquote-userid=\u0022167617\u0022 data-ipsquote-username=\u0022JadeOfMaar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n44 minutes ago, JadeOfMaar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAssuming it\u0027s one of \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/148335-starcrusher96/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022148335\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/148335-starcrusher96/\u0022 rel=\u0022\u0022\u003E@StarCrusher96\u003C/a\u003E\u0027s many, many\u00A0\u003Cs\u003Esexy\u003C/s\u003E planets, we have no hope of guessing right so just tell us. D:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat galileo said, it\u0027s kerbin underwater.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-19T23:11:16Z\u0022 title=\u002204/19/2017 11:11  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 19, 2017\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JadeOfMaar","CreatedById":167617,"CreatedDateTime":"2017-04-19T23:12:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027326\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492643418\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat galileo said, it\u0027s kerbin underwater.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI cannot accept this! \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2017-04-20T04:28:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027326\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492643418\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to nail the look of the underwater surface look first, I can\u0027t put my finger on what it is exactly but something is wrong, and the view feels restricted to a very small angle, smaller than I expected. The surface seems a bit plastic-y as well.\n\u003C/p\u003E\n\u003Cp\u003E\nNot sure what\u0027s wrong, maybe it just doesn\u0027t pop like this\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try again tomorrow.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s too dark where the normals aren\u0027t angled right at the camera, or away from it. Spots like that should still be getting light though it would be mostly blue due to scattering.\n\u003C/p\u003E\n"},{"CreatedByName":"plonk","CreatedById":116062,"CreatedDateTime":"2017-04-20T16:44:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223027326\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492643418\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to nail the look of the underwater surface look first, I can\u0027t put my finger on what it is exactly but something is wrong, and the view feels restricted to a very small angle, smaller than I expected. The surface seems a bit plastic-y as well.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://i.imgur.com/Jy1XAEt.jpg\u0022 rel=\u0022external nofollow\u0022 title=\u0022Enlarge image\u0022\u003E\u003Cimg alt=\u0022Jy1XAEt.jpg\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/Jy1XAEt.jpg\u0022 width=\u00221024\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n[snip]\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBy looking at the image, I assume you have the intensity of the refractive component calculated according to the fresnel equations.\u003Cbr\u003E\nTo me it looks, as if the transmittant (refractive)\u00A0 component is rendered pretty good, and \u0022all that is missing\u0022 is the reflective component.\n\u003C/p\u003E\n\u003Cp\u003E\n(The observed phenomenon is called Snell\u0027s window. See \u003Ca href=\u0022https://en.wikipedia.org/wiki/Snell%27s_window\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Snell\u0027s_window\u003C/a\u003E )\n\u003C/p\u003E\n\u003Cp\u003E\nAt this point, to achieve a physically accurate model, you\u0027ll probably need to incorporate another, custom tailored mie scattering. And reflection maps. And, and... \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMaybe I\u0027ve got an idea of how to crudely, naively and inaccurately (i.e. purely visually)\u00A0 \u003Cs\u003Eapproximate\u003C/s\u003E fake the intensity values for the reflective component by taking into account 1) the distance of the camera to the surface (perpendicular) 2) the length of the view ray from camera to surface, 3) the length of the reflected view ray (clamped to a max value, length to ground otherwise) and 4) the cosine of the angle of the reflected view ray to the water surface (or sine using the normal). It\u0027s basically distance fog with additional steps to increase light intensity the nearer and more parallel the reflected view-ray is to the water surface. It\u0027s based on the assumption that there is more scattered light traveling in any direction at any point near the surface, exponentially decreasing in intensity the deeper it gets.\n\u003C/p\u003E\n\u003Cp\u003E\nJust an idea. Yours is probably already better\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-20T17:17:05Z\u0022 title=\u002204/20/2017 05:17  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 20, 2017\u003C/time\u003E by plonk\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-20T17:19:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223028058\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492706656\u0022 data-ipsquote-userid=\u0022116062\u0022 data-ipsquote-username=\u0022plonk\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, plonk said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBy looking at the image, I assume you have the intensity of the refractive component calculated according to the fresnel equations.\u003Cbr\u003E\nTo me it looks, as if the transmittant (refractive)\u00A0 component is rendered pretty good, and \u0022all that is missing\u0022 is the reflective component.\n\u003C/p\u003E\n\u003Cp\u003E\n(The observed phenomenon is called Snell\u0027s window. See \u003Ca href=\u0022https://en.wikipedia.org/wiki/Snell%27s_window\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Snell\u0027s_window\u003C/a\u003E )\n\u003C/p\u003E\n\u003Cp\u003E\nAt this point, to achieve a physically accurate model, you\u0027ll probably need to incorporate another, custom tailored mie scattering. And reflection maps. And, and... \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMaybe I\u0027ve got an idea of how to crudely, naively and inaccurately (i.e. purely visually)\u00A0 approximate the intensity values for the reflective component by taking into account 1) the distance of the camera to the surface (perpendicular) 2) the length of the view ray from camera to surface, 3) the length of the reflected view ray (clamped to a max value, length to ground otherwise) and 4) the cosine of the angle of the reflected view ray to the water surface (or sine using the normal). It\u0027s basically distance fog with additional steps to increase light intensity the nearer and more parallel the reflected view-ray is to the water surface. It\u0027s based on the assumption that there is more scattered light traveling in any direction at any point near the surface, exponentially decreasing in intensity the deeper it gets.\n\u003C/p\u003E\n\u003Cp\u003E\nJust an idea. Yours is probably already better\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m using the fresnel equations but I think there is a problem somewhere in the refracted ray calculation.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically when debugging the fresnel value visually I noticed that the \u0022snell\u0027s window\u0022 seems twice as large as in the image above, yet my refracted ray seems to be hitting maximum angle sooner. I probably messed up something stupid in the transformation from ocean\u00A0space to world space or whatever.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you look in the first image, you\u0027ll see 3 distinct zones, the center zone where you can see the sky, then the dark blue zone, then the outer,\u00A0black zone at the edge of the screen.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen debugging the fresnel value, zone 3 should be where we have total reflection and zone 1 and 2 are the same zone of refraction, where the refracted angle never reaches as low as the\u00A0horizon.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever what\u0027s happening up there is that in zone 1 the angle is refracted to go towards the sky, in zone 2 the angles are refracted towards the horizon or lower, which is why their shading is messed up, and zone 3 is total reflection.\n\u003C/p\u003E\n\u003Cp\u003E\nPlus\u00A0there are these weird white spots and the whole look is off making me think something is off with the normals or whatever\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022l8sl3Hx.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/l8sl3Hx.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027m sure it\u0027s something stupid, I was tired last night and experimenting with something new. For the reflected component I haven\u0027t really thought about it yet but probably something similar to the distance fog you mentioned and if I can figure it out, some kind of light scattering depending on the viewing direction and the angle of the sun. I\u0027ll just have to research it and experiment a bit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdited:\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what debugging the fresnel value looks like, in red transmission and blue reflection, notice how much bigger it is than the one above.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00223WCUjkc.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/3WCUjkc.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-20T17:44:26Z\u0022 title=\u002204/20/2017 05:44  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 20, 2017\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2017-04-20T17:21:56Z","Content":"\n\u003Cp\u003E\nImo it\u0027s great as is :\u0027)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-20T17:22:39Z\u0022 title=\u002204/20/2017 05:22  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 20, 2017\u003C/time\u003E by Avera9eJoe\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2017-04-20T23:20:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223028100\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492708755\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m using the fresnel equations but I think there is a problem somewhere in the refracted ray calculation.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically when debugging the fresnel value visually I noticed that the \u0022snell\u0027s window\u0022 seems twice as large as in the image above, yet my refracted ray seems to be hitting maximum angle sooner. I probably messed up something stupid in the transformation from ocean\u00A0space to world space or whatever.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you look in the first image, you\u0027ll see 3 distinct zones, the center zone where you can see the sky, then the dark blue zone, then the outer,\u00A0black zone at the edge of the screen.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen debugging the fresnel value, zone 3 should be where we have total reflection and zone 1 and 2 are the same zone of refraction, where the refracted angle never reaches as low as the\u00A0horizon.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever what\u0027s happening up there is that in zone 1 the angle is refracted to go towards the sky, in zone 2 the angles are refracted towards the horizon or lower, which is why their shading is messed up, and zone 3 is total reflection.\n\u003C/p\u003E\n\u003Cp\u003E\nPlus\u00A0there are these weird white spots and the whole look is off making me think something is off with the normals or whatever\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027m sure it\u0027s something stupid, I was tired last night and experimenting with something new. For the reflected component I haven\u0027t really thought about it yet but probably something similar to the distance fog you mentioned and if I can figure it out, some kind of light scattering depending on the viewing direction and the angle of the sun. I\u0027ll just have to research it and experiment a bit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdited:\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what debugging the fresnel value looks like, in red transmission and blue reflection, notice how much bigger it is than the one above.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSomewhere in there you\u0027re getting the dot product of the viewing angle and the normals, right? Are you using the absolute value of that? If not that could be why you\u0027re getting those results.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-04-21T11:15:19Z","Content":"\n\u003Cp\u003E\nhave you been able to get the nearClipPlane parameter back in for the next release? Just a reminder. Really missing it for IVA photos because a lot of the time the IVA model gets clipped in view of the camera under stock settings\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-21T11:44:40Z\u0022 title=\u002204/21/2017 11:44  AM\u0022 data-short=\u00227 yr\u0022\u003EApril 21, 2017\u003C/time\u003E by Drew Kerman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-21T21:11:07Z","Content":"\n\u003Cp\u003E\nBasic underwater surface \u002B distance \u0022fog\u0022 (only applied to water surface at the moment). Shading to be improved.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther ipsEmbeddedOther_limited\u0022\u003E\n\u003Ciframe data-controller=\u0022core.front.core.autosizeiframe\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=http://imgur.com/a/R95Jl\u0022 style=\u0022height:453px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223028541\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492730444\u0022 data-ipsquote-userid=\u002271262\u0022 data-ipsquote-username=\u0022Starwaster\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, Starwaster said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSomewhere in there you\u0027re getting the dot product of the viewing angle and the normals, right? Are you using the absolute value of that? If not that could be why you\u0027re getting those results.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat would be a very rookie mistake to make.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223028992\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492773319\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nhave you been able to get the nearClipPlane parameter back in for the next release? Just a reminder. Really missing it for IVA photos because a lot of the time the IVA model gets clipped in view of the camera under stock settings\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nShould I just make it a separate, minimal mod?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-21T21:11:51Z\u0022 title=\u002204/21/2017 09:11  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 21, 2017\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2017-04-21T21:33:55Z","Content":"\n\u003Cp\u003E\nWow, Kerbal Submarine Program can finally be a thing.\n\u003C/p\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2017-04-21T22:47:12Z","Content":"\n\u003Cp\u003E\nThe real question though is will the camera behave when deep underwater...\n\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-21T22:51:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223029702\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492814832\u0022 data-ipsquote-userid=\u002280363\u0022 data-ipsquote-username=\u0022Avera9eJoe\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Avera9eJoe said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe real question though is will the camera behave when deep underwater...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhy wouldn\u0027t it? What happens deep underwater?\n\u003C/p\u003E\n"},{"CreatedByName":"Halban","CreatedById":89536,"CreatedDateTime":"2017-04-21T23:01:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223029607\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492809067\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBasic underwater surface \u002B distance \u0022fog\u0022 (only applied to water surface at the moment). Shading to be improved.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCan\u0027t wait to film something in an environment like that, it looks stunning.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223029607\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492809067\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nShould I just make it a separate, minimal mod?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027d appreciate something simple like that. Given that it\u0027s rather important to me.\n\u003C/p\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2017-04-21T23:14:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223029711\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492815087\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhy wouldn\u0027t it? What happens deep underwater?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHm, it may have been fixed when they re-did water physics but it used to be that your camera would try and point straight up if you go into negative altitudes. I guess they removed that now?\n\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-04-21T23:15:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223029737\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492816445\u0022 data-ipsquote-userid=\u002280363\u0022 data-ipsquote-username=\u0022Avera9eJoe\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Avera9eJoe said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHm, it may have been fixed when they re-did water physics but it used to be that your camera would try and point straight up if you go into negative altitudes. I guess they removed that now?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI just went 1 km deep and it seems everything is working fine.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-04-22T00:24:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223029607\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221492809067\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nShould I just make it a separate, minimal mod?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t think it\u0027s worth the extra effort that would go with having to keep track of it separately, but that would be your call. From a user standpoint, I went back to 1.1.3 just so I could get one photo from an IVA using this setting and I did notice it affected the ground somewhat if it was set too low, so just having it as a value people can play with within Scatterer (since its Scatterer that would be causing any ground/water flickering) seems to make the most sense. Keeping all problems in one place and all that.\n\u003C/p\u003E\n"}]}