{"TopicId":110949,"ForumId":35,"TopicTitle":"rotate saves every 10 minutes","CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-26T22:02:58Z","PageNum":1,"Articles":[{"CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-26T22:02:58Z","Content":"hi everyone\n\nI think that might be of any help for anyone experiencing constant crashes like i do.\n\nI created a quick batch to be launched BEFORE launching KSP, and it saves your game every 10 minutes, rolling on 6 files. So at any point, you have 1 hour back with 6 save points.\n\nIn the past, I used to date the savegames, but honestly, when in life have you reloaded a 3 weeks old savegame?\n\nPRE-REQUISITES:\n\n0) this is for Windows. Linux users are smart enough, in general, to code that by themselves.\n\n1) 7zip [http://www.7-zip.org/](http://www.7-zip.org/)\n\n2) GNU sleep.exe [http://gnuwin32.sourceforge.net/downlinks/coreutils-bin-zip.php](http://gnuwin32.sourceforge.net/downlinks/coreutils-bin-zip.php)\n\n3) optional: pslist.exe [https://technet.microsoft.com/en-us/sysinternals/bb896682.aspx](https://technet.microsoft.com/en-us/sysinternals/bb896682.aspx)\n\na) Install **7zip** if you don\u0027t have it yet\n\n![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) then get **sleep.exe** from the link above and put it in the same directory that contains your savegames\n\nc) optionally, get **pslist.exe** from the link above and put it in the same directory that contains your savegames\n\nd) finally, adapt the **paths** inside the batch file bellow (call it looSave**.cmd** or whatever), that you will save in the same directory that contains your savegames\n\n- get the savegames ordered by TIME\n\n- after a crash, just get the N-1, or 2 or whatever number you need to get back before the launch that crashed your game.\n\nhope that can help someone ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n    :: loop saving system every 10 minutes for KSP by ScavengeR(c)@echo offrem put your 7z.exe full path bellow if it is not in your %PATH% variable:set SEVENzip=7z.exerem adapt the full path to your save dir:set SAVEDIR=G:\\GAMES\\KSP_win_1.0.2\\savesrem adapt the name of your zip files if you want too:set KSPLoopSave=KSPLoopSave::-----------------pushd %~dp0goto :loopgoto :END:loopset CURRENTMIN=%TIME:~3,1%echo %TIME% saving %~dp0%KSPLoopSave%_%CURRENTMIN%.zip ...%SEVENzip% a -bd -y %~dp0%KSPLoopSave%_%CURRENTMIN%.zip %SAVEDIR% \u003ENULecho %TIME% saving %~dp0%KSPLoopSave%_%CURRENTMIN%.zip ...OKsleep 600rem if you want, comment the line bellow, that test if KSP is still running.rem You then will have to close the DOS window manually:pslist KSP::---------if %ERRORLEVEL% EQU 0 goto :loopgoto :EOF:ENDexit\n\nedit: About Linux, hum, please Windows users do not misinterpret my words. And for anyone under Linux asking for, I will write the same shell with bash if u want ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n**Edited \u003Ctime datetime=\u00222015-05-30T03:43:17Z\u0022 title=\u002205/30/2015 03:43  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by scavenger**\n  \nwrong title"},{"CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-28T21:47:54Z","Content":"hmmm could smbd move this post to [KSP Fan Works](https://forum.kerbalspaceprogram.com/forums/40-KSP-Fan-Works) instead ? tx ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"rkman","CreatedById":15721,"CreatedDateTime":"2015-05-29T13:24:57Z","Content":"KSP fanworks? \n\nTools and Applications seems more appropriate. \n\n[http://forum.kerbalspaceprogram.com/forums/36-Tools-and-Applications](https://forum.kerbalspaceprogram.com/forums/36-Tools-and-Applications)"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-29T13:31:05Z","Content":"Tools and Applications it is. Nice work, scavenger. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-30T03:37:28Z","Content":"thank you, and as I said if that can be of any use to anyone, I am happy to share.\n\nbellow is another version that uses current hours too, that makes 24 \\* 6 = 144 possible rotating saves. I had to do that because of a mission that lasted 3 hours. Going one hour back was not enough.\n\n    :: loop saving system every 10 minutes every hours for KSP by ScavengeR(c):: it generates at most 24 * 6 = 144 rotating savegames:: This batch to be placed in the directory that holds the generated save zip files.@echo offrem put your 7z.exe full path bellow if it is not in your %PATH% variable:set SEVENzip=7z.exerem adapt the full path to your installed game main saves directory:set SAVEDIR=G:\\GAMES\\KSP_win_1.0.2\\savesrem adapt the name of your zip files if you want too:set KSPLoopSave=KSPLoopSave::-----------------pushd %~dp0goto :loopgoto :END:loopset CURRENTH=%TIME:~0,2%set CURRENTMIN=%TIME:~3,1%set LastShip=:: get the last modified player name:for /f \u0022delims=\u0022 %%L in (\u0027dir /b /od %SAVEDIR%\u0027) do set LastPlayer=%%L:: get the last modified ship, with underscore in front.for /f \u0022delims=\u0022 %%L in (\u0027dir /b /od %SAVEDIR%\\%LastPlayer%\\Ships\\VAB ^| findstr /p /v Auto-Saved\u0027) do set LastShip=_%%L:: delete same time savegame since the name can be different each time:if EXIST \u0022%~dp0%KSPLoopSave%_%CURRENTH%%CURRENTMIN%0_*.zip\u0022 del /q \u0022%~dp0%KSPLoopSave%_%CURRENTH%%CURRENTMIN%0_*.zip\u0022echo %TIME% saving \u0022%~dp0%KSPLoopSave%_%CURRENTH%%CURRENTMIN%0%LastShip%.zip\u0022 ...%SEVENzip% a -bd -y \u0022%~dp0%KSPLoopSave%_%CURRENTH%%CURRENTMIN%0%LastShip%.zip\u0022 %SAVEDIR% \u003ENULecho %TIME% saving \u0022%~dp0%KSPLoopSave%_%CURRENTH%%CURRENTMIN%0%LastShip%.zip\u0022 ...OKsleep 600rem if you want, comment the line bellow, that test if KSP is still running.rem You then will have to close the DOS window manually:pslist KSP \u003ENUL 2\u003E\u00261::---------if %ERRORLEVEL% EQU 0 goto :loopgoto :EOF:ENDexit\n\nedit: i added the last modified ship name to the zip files so you can recognize easily what you were doing at that time ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n**Edited \u003Ctime datetime=\u00222015-05-31T21:31:33Z\u0022 title=\u002205/31/2015 09:31  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 31, 2015\u003C/time\u003E by scavenger**"},{"CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-06-21T19:09:14Z","Content":"Here is the latest version. It still uses the timely fashion to order the saves but there is no relationship with the time anymore.\n\nThis version does 24 \\* 6 = 144 rotate saves or more, as you can customize the sleep between savegames.\n\nThis version also name the saves according to the last player used, and last ship name edited.\n\n![P4Z6Bi4.png](http://i.imgur.com/P4Z6Bi4.png)\n\n    :: loop saving system every 10 minutes every hours for KSP by ScavengeR(c):: it generates at most 24 * 6 = 144 rotating savegames:: This batch to be placed in the directory that holds the generated save zip files.@echo offMODE 120,30rem put your 7z.exe full path bellow if it is not in your %PATH% variable:set SEVENzip=7z.exerem set extention: 7z compress KSP saves usually like 5 times more than zipset ext=7zrem adapt the full path to your installed game main saves directory:set SAVEDIR=G:\\GAMES\\KSP_win_1.0.2\\savesrem adapt the name of your zip files if you want too:set KSPLoopSave=KSPLoopSaverem set the time in minutes between saves:set minutes=10::-----------------set /A seconds=minutes*60set /A maxMin=60-minutespushd %~dp0call :getLastSaveNum %KSPLoopSave%goto :loopsavegoto :END:getLastSaveNumfor /f \u0022tokens=2 delims=_\u0022 %%a in (\u0027dir /b /o-d %1_*.%ext%\u0027) do if not defined lastSaveNum set lastSaveNum=%%agoto :EOF:getLastNamesset LastPlaceName=set LastShipName=:: get the last modified player name:for /f \u0022delims=\u0022 %%L in (\u0027dir /b /od %SAVEDIR%\u0027) do set LastPlayer=%%L:: get the last place whre are modified shipsfor /f \u0022delims=\u0022 %%L in (\u0027dir /b /od %SAVEDIR%\\%LastPlayer%\\Ships\u0027) do set LastPlaceName=%%L:: get the last modified ship namefor /f \u0022delims=\u0022 %%L in (\u0027dir /b /od %SAVEDIR%\\%LastPlayer%\\Ships\\%LastPlaceName% ^| findstr /p /v Auto-Saved\u0027) do set LastShipName=%%Lgoto :EOF:getSaveNumset lastSaveNum=%1set H=%lastSaveNum:~0,2%rem INFO: To get hours that are less than 10. MSDOS treat numbers that begin by 0 as just 0rem INFO: We could use \u0022if %H% LSS 10 echo ok\u0022 but we don\u0027t know if later one day Microsoft will change the \u0022if\u0022 behaviorif %H:~0,1% == 0 set H=%H:~1,1%set M=%lastSaveNum:~2,2%if %M% GEQ %maxMin% (  set M=00  set /A H\u002B=1  ) ELSE (  set /A M\u002B=minutes  )if %H% GTR 23 set H=0if %H% LSS 10 set H=0%H%set saveNum=%H%%M%goto :EOF:loopsavecall :getLastNamescall :getSaveNum %lastSaveNum%echo LastShipName=%LastShipName%echo lastSaveNum=%lastSaveNum%echo saveNum=%saveNum%:: delete same time savegame since the name can be different each time:if EXIST \u0022%~dp0%KSPLoopSave%_%saveNum%_*.%ext%\u0022 del /q \u0022%~dp0%KSPLoopSave%_%saveNum%_*.%ext%\u0022echo %TIME% saving \u0022%~dp0%KSPLoopSave%_%saveNum%_%LastPlayer%-%LastPlaceName%-%LastShipName%.%ext%\u0022 ...%SEVENzip% a -bd -y \u0022%~dp0%KSPLoopSave%_%saveNum%_%LastPlayer%-%LastPlaceName%-%LastShipName%.%ext%\u0022 %SAVEDIR% \u003ENULecho %TIME% saving \u0022%~dp0%KSPLoopSave%_%saveNum%_%LastPlayer%-%LastPlaceName%-%LastShipName%.%ext%\u0022 ...OKset lastSaveNum=%saveNum%sleep %seconds%rem if you want, comment the line bellow, that test if KSP is still running.rem You then will have to close the DOS window manually:pslist KSP \u003ENUL 2\u003E\u00261::---------if %ERRORLEVEL% EQU 0 goto :loopsavegoto :EOF:ENDexit"},{"CreatedByName":"includao","CreatedById":145136,"CreatedDateTime":"2015-06-21T19:35:37Z","Content":"The tools that people have to create in order to play this game with mods and/or a 64bit client... I love this game, though. Thanks for your work."}]}