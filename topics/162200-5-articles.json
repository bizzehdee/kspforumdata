{"TopicId":162200,"ForumId":36,"TopicTitle":"[WIP][1.8.1, 1.9.1, 1.10.1, 1.11.0\u20132, 1.12.2\u20135] Principia\u2014version \u200E\u200EKleene, released 2024-07-05\u2014n-Body and Extended Body Gravitation","CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-05T00:19:35Z","PageNum":5,"Articles":[{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-08T22:56:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003ETweaking the masses would heavily distort the balance of the game.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo will \u003Cem\u003EN\u003C/em\u003E-body physics \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI believe the Jupiter system is stable because of orbital resonances, so adjusting the orbital periods of Vall and Tylo might work out.\u003Cp\u003EMinmus\u0027s orbit however is simply outside of Kerbin\u0027s Hill sphere - I don\u0027t see any reasonable way of getting it to orbit properly; at best, you might be able to put it in orbit around a Kerbin-Kerbol Lagrange point...\u003C/p\u003E\u003Cp\u003EExperiments will have to show whether you get a solution that stays stable for the full 80 or so years that KSP spans.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMinmus \u003Cem\u003Eis\u003C/em\u003E stable (the wobbling of the orbit as seen in-game is just the difference between an orbit around the barycenter and a an orbit around Kerbin).\u003C/p\u003E\u003Cp\u003EThe big three moons of the Jool system are in a resonance, it\u0027s just that I don\u0027t use barycentric coordinates for the initial conditions. A mess ensues. I\u0027m not sure if the system would be stable even if the resonance were properly set up though.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWell... from my computer scientist\u0027s point of view, it would eliminate the quadratic asymptotic dependency on B, but I have a hunch at why your integrators would get a lot of extra work to do.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI used to think that too, but here\u0027s a hint: a division and a square root are ~10 clock cycles each. A trigonometric function is ~100 clock cycles. In real life, the constants matter. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EFeel free to do a series of \u0060lectures\u0060, I\u0027m quite interested in the topic. I do know basic calculus, and I think you should take that as a prerequisite... I\u0027ve written a few n-body simulations myself (using the \u0027trivial\u0027 approach of v \u002B= a*dt, x\u002B= v*dt), and I have a hunch on how RK improves on that.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, I don\u0027t feel like explaining basic calculus. I can always point to Wikipedia for that. Anyway, unless you\u0027re really into topology, you don\u0027t want a math undergrad to teach you calculus (I\u0027d probably go off a tangent onto algebraic topology anyway \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E). \u003C/p\u003E\u003Cp\u003EI\u0027m rather surprised by the number of people in the \u0027I don\u0027t know what a derivative is\u0027 group. This is a good thing, KSP gets people into math.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EDecouples, docking ports and EVA jetpacks provide force, too. As do collisions between ships.\u003C/p\u003E\u003Cp\u003EI think the main cause for fluctuations in stock orbits are just due to the fact that the orbit is not calculated for the CoM, but the center of control, so the slightest rotations of the craft are displayed as g forces. While the craft is non-rotating, the stock integrator is working pretty well for me.\u003C/p\u003E\u003Cp\u003EIf you\u0027d attempt to re-do all those physics, I think you\u0027d basically end up re-writing unity\u0027s physics engine, in the process introducing an uncountable number of new bugs, so I heavily recommend against doing that\u00C3\u201A\u00C2\u00B9.\u003C/p\u003E\u003Cp\u003E\u00C3\u201A\u00C2\u00B9 I think that KSP should indeed be re-written with a from-scratch physics engine in C\u002B\u002B, preferrably using fixed-point 64-bit integers for all positions and velocities, but I think that would require an immense amount of work and is entirely unrealistic at the moment.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EAll true (sounds kinda like the On/OffRails problem), but how to fix it? What about drag? Collisions? Decoupling? Acceleration by exhaust produced by other engines? Sounds like you would have to re-implement the entire physics engine and most other stuff in KSPs. And no, i ofc can\u0027t offer any good solution. Is precision that important while the vessel is off-rails? (Yea, I\u0027m looking forward to read about the math involved as well \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are definitely some unacceptable fluctuations, just look at the peaks of .gee_immediate.\u003C/p\u003E\u003Cp\u003EYou make some really good points here (drag is not an issue in space, but collisions and decoupling are); If I could grab the calls to AddForce and the like this would be easy, but yes, otherwise I\u0027m basically talking about making my own physics engine here (which would be a good thing, but I\u0027d have to be able to dig into SQUAD\u0027s code. I\u0027m not sure C\u002B\u002B would be a good choice though, the .NET framework has its advantages. Maybe C#, interfaced with unmanaged bits for the performance-critical stuff? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Of course if I could pick a language I\u0027d say Ada, but that comes with its own set of problems.).\u003C/p\u003E\u003Cp\u003EIt would probably be trivial to just insert calls to my methods in RigidBody, but an installation process that requires the user to do disassembly/reassembly is cumbersome, not to mention legal issues (not even with SQUAD, that\u0027s Unity code).\u003C/p\u003E\u003Cp\u003EUntil I can come up with something smarter, I\u0027ll just experiment to see how far upstream I can grab the acceleration, and whether I can clamp it to kill numerical drift. Low accelerations (long-duration burns) will be specially handled anyway.\u003C/p\u003E\u003Cp\u003EWhat accelerations should be considered negligible?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-08T22:58:30Z\u0022 title=\u002202/08/2014 10:58  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 8, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003Cbr\u003EOf course of course of course here here here.\n\u003C/span\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-02-08T23:35:56Z","Content":"\n\u003Cp\u003EYou are right, Minmus\u0027s orbit should, indeed, be stable... I should have done my math before posting that assumption as a fact. Kerbin\u0027s Hill sphere has a radius of over 130 Mm, Minmus is well within that.\u003C/p\u003E\u003Cp\u003EHave you considered measuring the ship\u0027s acceleration by determining the CoM\u0027s velocity at the beginning and end of each physics frame?\u003C/p\u003E\u003Cp\u003EI\u0027m not sure there is such a thing as \u0027neglegible\u0027 accelerations... firing 4 1kN RCS thrusters on a 100t vessel should definitely have an effect... and that only be a few milli-gees...\u003C/p\u003E\u003Cp\u003EHave you checked whether the phantom gee forces produced by Unity cancel each other out?\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T00:02:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003EYou are right, Minmus\u0027s orbit should, indeed, be stable... I should have done my math before posting that assumption as a fact. Kerbin\u0027s Hill sphere has a radius of over 130 Mm, Minmus is well within that.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI didn\u0027t do the math, \u003Cstrong\u003EMattasmack\u003C/strong\u003E did the simulation, and although his integrator was not symplectic, his energy drift was low enough and his results consistent enough with mine for me to conclude that everything except the Jool system is stable for at least a century.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EHave you considered measuring the ship\u0027s acceleration by determining the CoM\u0027s velocity at the beginning and end of each physics frame?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll try that and a few other things.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m not sure there is such a thing as \u0027neglegible\u0027 accelerations... firing 4 1kN RCS thrusters on a 100t vessel should definitely have an effect... and that only be a few milli-gees...\u003C/p\u003E\u003Cp\u003EHave you checked whether the phantom gee forces produced by Unity cancel each other out?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure what you mean by \u0027cancel each other out\u0027, but I\u0027m not sure to what extent these gee forces actually exist either. They come from KSP (I\u0027m just tracing perturbation and a few other things), so maybe bad calculations on KSP\u0027s side contribute to that. Bear in mind though that Unity uses single-precision floats, so with cancellations this can explain a lot here. Small enough accelerations can be dwarfed by cancellations.\u003C/p\u003E\u003Cp\u003EMore testing is in order.\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-02-09T01:40:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003Eyes, otherwise I\u0027m basically talking about making my own physics engine here\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo offense, but I don\u0027t think you can do that without getting old in the process.....\u003C/p\u003E\u003Cp\u003EThe thing about orbits being calculated for the root part and not for the CoM is definitely true (altitude is referred to the root part, too.)\u003C/p\u003E\u003Cp\u003EAnd from a gaming point of view, I wouldn\u0027t want to COMPLETELY kill inaccuracies maybe... after all, real probes do midcourse corrections, if we could hit a 1000 m wide entry corridor from the other side of the system without a single midcourse that would be unrealistic too \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"bulletrhli","CreatedById":55960,"CreatedDateTime":"2014-02-09T01:51:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESo if you want to look at the current prototype you can pull the source from GitHub and compile it; don\u0027t expect it to be playable soon (the current state is not an alpha; it\u0027s a messy way of generating nice screenshots). Once this is done, you too can generate nice screenshots! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E(I guess you can use it to get a feeling for what \u003Cem\u003EN\u003C/em\u003E-body trajectories look like, but it\u0027s highly likely that the current plotting is a bit off.)\u003C/p\u003E\u003Cp\u003EAs far as providing the DLLs directly, configuring Git to do that without risking to accidentally publish a KSP assembly is more work than I want to do at the moment. Ask around if you don\u0027t know how to build from source.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, I didn\u0027t even think about compiling the source. I have never done that with anything KSP related. I did read the OP obviously but I could only extrapolate so much from it. I was unsure if a \u0022playable\u0022 version would be in the future; Future meaning months from now because of the understandable scope of the project.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T01:52:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003ENo offense, but I don\u0027t think you can do that without getting old in the process.....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhich is why I\u0027m trying to find a way to avoid doing that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnd from a gaming point of view, I wouldn\u0027t want to COMPLETELY kill inaccuracies maybe... after all, real probes do midcourse corrections, if we could hit a 1000 m wide entry corridor from the other side of the system without a single midcourse that would be unrealistic too \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027d like my inaccuracies to come from something I programmed (I could add radiation pressure if you want the Pioneer anomaly), rather than cancellations. At least, I\u0027d like the errors from cancellations not to impede decent trajectory planning (especially since things can be quite unstable in the \u003Cem\u003EN\u003C/em\u003E-body problem).\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-02-09T02:11:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EWhich is why I\u0027m trying to find a way to avoid doing that. \u003C/span\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI suppose the hardest thing to manage would be \u0022medium thrust\u0022 burns - i.e. if you wanted to accelerate the typical 30-minute LV-N burn beyond 4x. Too fast to treat the ship as a point mass but still annoying.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI\u0027d like my inaccuracies to come from something I programmed (I could add radiation pressure if you want the Pioneer anomaly), rather than cancellations.\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFair enough \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E But do you need it off-rails? I suppose that what you\u0027re worrying about is a tiny wiggle in the here and now making predictions after one or two close passes totally unreliable.\u003C/p\u003E\u003Cp\u003EBut then again, wouldn\u0027t that imply excessive precision in the burn and in the setting of maneuver nodes anyway? Couldn\u0027t you just low-pass the initial conditions data fed to the predictor? During high warp travel your integrator would take over and of course wou\u0027d need that to be exceedingly precise - but that can be done.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003E Of course if I could pick a language I\u0027d say Ada, but that comes with its own set of problems\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou actually have experience with that? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I thought that was an old USDoD in-house tool....\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EWhat accelerations should be considered negligible?\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou mean \u0022where should the long-duration burn regime start\u0022? I dunno, you might want to make a runtime test: before allowing transition to high warp with engines on, check that the ship has no angular acceleration and a good margin of control authority left - to avoid tricks like having a single ion engine way off center and no reaction wheels and still flying straight because at high warp the ship is a point-mass LOLOLOLOL.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-09T02:23:08Z\u0022 title=\u002202/09/2014 02:23  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 9, 2014\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T02:26:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003EYou actually have experience with that? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I thought that was an old USDoD in-house tool....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s the second language I learned (after VB6 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E) and the first one in which I wrote algorithms (in Ada 95, if you want to sort something, you write a sorting algorithm. Same goes for most useful data structures, so you can\u0027t really avoid it). The fact that my father\u0027s job at the time included defining the standard for Ada 2005 might have had something to do with it.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EYou mean \u0022where should the long-duration burn regime start\u0022? I dunno, you might want to make a runtime test: before allowing transition to high warp with engines on, check that the ship has no angular acceleration and a good margin of control authority left - to avoid tricks like having a single ion engine way off center and no reaction wheels and still flying straight because at high warp the ship is a point-mass LOLOLOLOL.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, I mean \u0022under what threshold should I clamp the accelerations and attribute them to Unity\u0027s ineptitude\u0022; long-duration burns \u003Cem\u003Ewill\u003C/em\u003E be handled by talking to the engines (I can\u0027t use Unity physics to compute the acceleration during timewarp and if I could I wouldn\u0027t want to).\u003C/p\u003E\u003Cp\u003EEDIT: It\u0027s probably not too hard to integrate the torque due to the engines in timewarp. It turns out that the hard part is doing physics when Unity is trying to do its thing, rather than when we don\u0027t use the physics engine.\u003C/p\u003E\u003Cp\u003EEDIT2: A well-known use of Ada in aerospace would be the Ariane 5 software, which was reused from Ariane 4. Ariane 5 was faster, this led to a Constraint_Error during a type conversion because they had removed a range check due to efficiency concerns. As a result, the rocket blew up. The spacecraft was \u003Ca href=\u0022https://en.wikipedia.org/wiki/Cluster_(spacecraft)\u0022 rel=\u0022external nofollow\u0022\u003ECluster\u003C/a\u003E. Turns out if you do stupid stuff, even a nice language with strong typing and range checks everywhere won\u0027t help you (also, their identifiers have terrible names).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-09T02:53:41Z\u0022 title=\u002202/09/2014 02:53  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 9, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2014-02-09T02:59:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EEDIT: It\u0027s probably not too hard to integrate the torque due to the engines in timewarp. It turns out that the hard part is doing physics when Unity is trying to do its thing, rather than when we don\u0027t use the physics engine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have the same issue with my timewarp rotation fix; I can make the ship rotate fine when it\u0027s on rails, it\u0027s making that interact correctly with Unity\u0027s physics engine when it comes out of warp where the problems come in.\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-02-09T03:16:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003ENo, I mean \u0022under what threshold should I clamp the accelerations and attribute them to Unity\u0027s ineptitude\u0022? long-duration burns \u003Cem\u003Ewill\u003C/em\u003E be handled by talking to the engines (I can\u0027t use Unity physics to compute the acceleration during timewarp and if I could I wouldn\u0027t want to)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t think I understand... because of Unity you have noise on the momentum values, the tiny residues of the Kraken, but if engines and RCS aren\u0027t on isn\u0027t any acceleration an error? Again, wouldn\u0027t a low-pass get rid of the noise?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EEDIT: It\u0027s probably not too hard to integrate the torque due to the engines in timewarp\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you think it would be useful at 100000x or the like?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EEDIT2: A well-known use of Ada in aerospace would be the Ariane 5 software, which was reused from Ariane 4.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI know that story \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E From Kernighan and Pike\u0027s \u003Cem\u003EThe practice of programming.\u003C/em\u003E But the funniest thing for me is discovering that Ada code looks very much like Pascal. I learned programming in pascal and I still miss Borland TP7, I haven\u0027t yet seen anyone replicate that ease of use in a IDE....\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-09T03:22:24Z\u0022 title=\u002202/09/2014 03:22  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 9, 2014\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T03:47:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003EI don\u0027t think I understand... because of Unity you have noise on the momentum values, the tiny residues of the Kraken, but if engines and RCS aren\u0027t on isn\u0027t any acceleration an error? Again, wouldn\u0027t a low-pass get rid of the noise?\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBrilliant! I hadn\u0027t thought of looking at it in frequency space (and I missed it in your previous post because it\u0027s 4:40; I\u0027ll go get some sleep). Trying to grab the most noise-free acceleration is probably a good idea though. I think by computing the change in momentum myself (perhaps sorting the momenta to minimize cancellations) I can avoid the double-\u0026gt;float-\u0026gt;double conversions that KSP is likely to do (I mean, FlightIntegrator exports the Coriolis force in single precision, but FlightGlobals computes it in double-precison \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E). You have to be careful though, RCS can fire frequently.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EDo you think it would be useful at 100000x or the like?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, but it would prevent the \u0022stick an ion engine on the side\u0022 technique. Automated stationkeeping (and attitude control) is on the roadmap, so that would just end up using up your ACS fuel very quickly.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI know that story \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E From Kernighan and Pike\u0027s \u003Cem\u003EThe practice of programming.\u003C/em\u003E But the funniest thing for me is discovering that Ada code looks very much like Pascal. I learned programming in pascal and I still miss Borland TP7, I haven\u0027t yet seen anyone replicate that ease of use in a IDE....\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.ti.inf.ethz.ch/ew/courses/Info1_11/real_programmers.pdf\u0022 rel=\u0022external nofollow\u0022\u003EReal programmers don\u0027t use Pascal\u003C/a\u003E. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E This article has its faults, but it does make a good point that in Pascal, there is no escape, whereas you always have unchecked options in Ada (\u0027Unchecked_Access or Ada.Unchecked_Conversion being examples). There are cases where you have to use them, and you\u0027re glad they exist. In the context of trying to escape Unity\u0027s incompetence, this is amusing...\u003C/p\u003E\u003Cp\u003EEDIT: RCS thrust probably doesn\u0027t flip its sign every other FixedUpdate, so I think I\u0027m safe.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-09T04:25:59Z\u0022 title=\u002202/09/2014 04:25  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 9, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003Cbr\u003Es.r\u0026#039;c,bilx.\u0026#039;cj\n\u003C/span\u003E\n"},{"CreatedByName":"carolyn","CreatedById":31884,"CreatedDateTime":"2014-02-09T05:50:02Z","Content":"\n\u003Cp\u003EThis is very ambitious! Like many, I\u0027ve thought about the N-body issue, but Squad seems pretty firm about keeping things on rails. Please don\u0027t throw snowballs at me, but maybe they are right -- after all, this isn\u0027t Orbiter. Going \u0022off-rails\u0022 would really complicate things like time warp.\u003C/p\u003E\u003Cp\u003EBUT.. perhaps something can be done near-term to get the one thing we sorely miss with the current patched-conic approximation -- LaGrange points. It might be possible to put LaGrange points themselves on rails, as well as the (non-elliptical) orbits around these points. Imagine each LP having a little SOI you could fly to and orbit. Sure, it wouldn\u0027t be numerically perfect, but this is KSP. The computational load would be greatly reduced vs. N-body, and time warp, etc., would still be possible, preserving the kerbally gameplay feel. Thoughts?\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-02-09T12:49:04Z","Content":"\n\u003Cp\u003EPlease, read the first posts \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E The point of much of his talk is that by using better, research grade code, you can be as fast or faster than KSP is today even with all the added n-body complexity. Also, Lagrange points (one capital, the guy came from Italy, not Chicago \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E) aren\u0027t all they\u0027re cracked up to be, it wouldn\u0027t be worth it to make an exception case just for them and hacky solutions are.... horribly hacky, no other way to put it.\u003C/p\u003E\u003Cp\u003EBy the way: \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EAutomated stationkeeping (...) is on the roadmap\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cem\u003E\u0022That\u0027s pretty arrogant... I like that in a pilot\u0022 \u003C/em\u003E(cit.)\u003C/p\u003E\u003Cp\u003EDo you have an idea of how that would work?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-09T12:54:52Z\u0022 title=\u002202/09/2014 12:54  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 9, 2014\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T13:25:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022carolyn\u0022 data-cite=\u0022carolyn\u0022\u003E\u003Cdiv\u003EThis is very ambitious! Like many, I\u0027ve thought about the N-body issue, but Squad seems pretty firm about keeping things on rails. Please don\u0027t throw snowballs at me, \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can\u0027t, it\u0027s been a \u003Cem\u003Ereally\u003C/em\u003E warm and dry winter here in Switzerland. Though it\u0027s currently sort-of-snowing-but-sunny-and-windy-and-it\u0027s-\u002B7-degrees-centigrade-so-how-is-it-snowing-anyway. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Ebut maybe they are right\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey are. The first-order approximation they have makes sense from a physical standpoint and saves them the expense learning how to do numerical integration: it\u0027s going to be several months before I get to the stage where things are playable and where I have been rewritten the integration in C\u002B\u002B for better performance, even though I have taken courses in numerical maths, received advice in numerical integration from Scott Manley and constant help from my fellow modders.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E -- after all, this isn\u0027t Orbiter. Going \u0022off-rails\u0022 would really complicate things like time warp.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt turns out time warp isn\u0027t as complicated as you\u0027d think, astrophysicists have already solved this problem for us. See the OP and my upcoming explanatory posts. I do not doubt that we can do timewarp as fast as we need it and with good accuracy.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EBUT.. perhaps something can be done near-term to get the one thing we sorely miss with the current patched-conic approximation -- LaGrange points. It might be possible to put LaGrange points themselves on rails, as well as the (non-elliptical) orbits around these points. Imagine each LP having a little SOI you could fly to and orbit. Sure, it wouldn\u0027t be numerically perfect, but this is KSP. The computational load would be greatly reduced vs. N-body, and time warp, etc., would still be possible, preserving the kerbally gameplay feel. Thoughts?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThoughts:\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EIt\u0027s Joseph-Louis Lagrange or Giuseppe Lodovico Lagrangia, not LaGrange or La Grange or Geordi La Forge. Yes, \u0022la grange\u0022 means \u0022the barn\u0022 (or \u0022the grange\u0022), but his name is written in one word without CamelCasing. Similarly, mine is Leroy, not LeRoy, Le Roy, Leroi, LeRoi nor Le Roi \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe only reason the SOI system works well (ok, it doesn\u0027t, the planets should \u003Cem\u003Ereally\u003C/em\u003E move around barycenters rather that each other, but let\u0027s assume they do) is that it\u0027s a first-order approximation of the equations of motion around the planet whose SOI you\u0027re in. In order to have this kind of approximation near Lagrange points, you\u0027d have to use the 2-body Hamiltonian anyway, so you\u0027d have to use an integrator (the solutions to the 3-body problem \u003Ca href=\u0022https://en.wikipedia.org/wiki/N-body_problem#Sundman.27s_theorem_for_the_3-body_problem\u0022 rel=\u0022external nofollow\u0022\u003Eare given by a slowly converging series useless for practical purposes\u003C/a\u003E). If you have to do numerical integration, you might as well drop the first-order approximation and do \u003Cem\u003EN\u003C/em\u003E-body physics. I\u0027ll explain this point in further detail when I get to my series of exlpanatory posts.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFrom a gameplay standpoint, SOIs might make sense, but regions around the critical points of the potential where you suddenly choose to change your approximation don\u0027t: How big would these Lagrange SOIs be? Around Lagrange points you would be integrating the 3-body problem, but when you get somewhat closer to a planet you\u0027d use the 2-body approximation. I\u0027m pretty sure your Lagrange SOIs shouldn\u0027t be spheres.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EPost-Scriptum\u003C/em\u003E:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003ELagrange points [...] aren\u0027t all they\u0027re cracked up to be\u003C/div\u003E\u003C/blockquote\u003E This is also a \u003Cem\u003Every\u003C/em\u003E good point. Lagrange points are useful landmarks when looking at trajectories in the CR3BP, but trajectories differ from the patched conics approximations in many other places (basically, anywhere except low orbits around either massive body, or in \u003Cem\u003Ereally high\u003C/em\u003E orbits around the system). If you had \u0027Lagrange SOIs\u0027 you wouldn\u0027t get horseshoe orbits.\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u0022That\u0027s pretty arrogant... I like that in a pilot\u0022 \u003C/div\u003E\u003C/blockquote\u003EI should watch this movie someday. I don\u0027t know how I will do it yet (the stationkeeping, not watching the movie). The problem is defining which orbit you want to stay in. I\u0027ll add this to the list of open problems, there are people on these fora who have experience with that sort of stuff (\u003Cstrong\u003EArrowstar\u003C/strong\u003E comes to mind, there are probably many more).\u003Cp\u003EI\u0027ll get to work on that low-pass filter! (actually, I think I\u0027ll start by logging the data and doing DFTs in \u003Cem\u003EMathematica\u003C/em\u003E to see what things look like).\u003C/p\u003E\u003Cp\u003EEDIT: come to think of it, I shouldn\u0027t get bogged down in data analysis. I\u0027ll try to do the integration without any particular preprocessing and I\u0027ll worry about filtering later.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-27T08:40:02Z\u0022 title=\u002205/27/2014 08:40  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 27, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"saharashooter","CreatedById":100677,"CreatedDateTime":"2014-02-09T18:17:07Z","Content":"\n\u003Cp\u003EHang on, I don\u0027t think anyone has noticed an important issue. In some of the N-body simulations of the Kerbol system there are collisions between celestial objects.\u003C/p\u003E\u003Cp\u003EHow will that work out?\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T18:27:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022saharashooter\u0022 data-cite=\u0022saharashooter\u0022\u003E\u003Cdiv\u003EHang on, I don\u0027t think anyone has noticed an important issue. In some of the N-body simulations of the Kerbol system there are collisions between celestial objects.\u003Cp\u003EHow will that work out?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs previously stated (though not in the OP), the unstability of the Jool system can probably be fixed by tweaking the initial conditions (actually, interpreting them differently). This would remove potential collisions.\u003C/p\u003E\u003Cp\u003EHandling collisions of celestial bodies is currently not on the roadmap.\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-02-09T21:09:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003EHandling collisions of celestial bodies is currently not on the roadmap.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAfter 0.24 comes out (so, no hurry at all \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E ) I bet you\u0027ll want to look into how to handle the asteroids that will be introduced; they should be in the thousand-ton class more or less, and N-body will be perfect for moving them around in clever ways. I can see Scott dropping one onto the Mun with a fire extinguisher and a weak stability boundary trajectory already.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-09T23:19:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003EAfter 0.24 comes out (so, no hurry at all \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E ) I bet you\u0027ll want to look into how to handle the asteroids that will be introduced; they should be in the thousand-ton class more or less, and N-body will be perfect for moving them around in clever ways. I can see Scott dropping one onto the Mun with a fire extinguisher and a weak stability boundary trajectory already.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would be interesting. \u0022Hello, I\u0027m Scott Manley. Today we\u0027ll to throw a main-belt asteroid at Eeloo by crashing a Kerbal on EVA into it. Let us first derive a closed-form expression for our trajectory.\u0022\u003C/p\u003E\u003Cp\u003EI don\u0027t think asteroids are in 0.24 though, they are in the NASA thing.\u003C/p\u003E\u003Cp\u003EInteresting conclusions from the poll results:\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EIt seems Scott\u0027s not here. Could somebody draw his Manley attenion to the remaining open astrophysics question (the one about reference frames for the ER3BP)? Answering it would do too of course. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe majority seems to know basic calculus, so I\u0027ll use that. I\u0027ll post a link to Feynman\u0027s \u003Cem\u003ELectures on Physics\u003C/em\u003E for the ~40% who don\u0027t, there\u0027s a quick introduction to calculus which doesn\u0027t involve defining the derivative at a point as a linear form on a Banach space. It\u0027s really well written (I\u0027m pretty sure that\u0027s where I first learned calculus around 2007).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThere are 6 people who checked neither of the bottom 2 options. Either they can do numerical integration but not elementary physics, or they didn\u0027t see that it was a multiple choice poll \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI think the first post I\u0027ll write will be on the integration of general ODEs with RK integrators. In later posts I\u0027ll talk about Hamiltonian mechanics, the Kepler problem and the patched conic approximation (it would be nice if people understood why SOIs make sense in their current form, but not as Lagrange point hacks or any such sort of nonsense). I\u0027ll then get to SPRK integrators, and eventually to the Saha \u0026amp; Tremaine stuff.\u003C/p\u003E\u003Cp\u003EI\u0027ll try to write the first post over the evenings of the coming week. There will be little modding this week because exams. I\u0027ll probably be more productive from Saturday onwards though.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-10T00:49:13Z\u0022 title=\u002202/10/2014 12:49  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 10, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tenneko Kazeno","CreatedById":102597,"CreatedDateTime":"2014-02-10T16:54:37Z","Content":"\n\u003Cp\u003EI don\u0027t know anything about this subject but hopefully these papers will help you.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.google.com/url?sa=t\u0026amp;rct=j\u0026amp;q=\u0026amp;esrc=s\u0026amp;source=web\u0026amp;cd=4\u0026amp;cad=rja\u0026amp;ved=0CEUQFjAD\u0026amp;url=http%3A%2F%2Fwww.iepc2013.org%2Fget%3Fid%3D414\u0026amp;ei=vgL5UqXVDePF0QH7loGoBw\u0026amp;usg=AFQjCNHHX9Mg4EyybltQNn1QCrlSSD-xQA\u0026amp;sig2=EV2CtrPVNXHwj3h3JcSWZA\u0022 rel=\u0022external nofollow\u0022\u003ELagrangian Coherent Structures in the Elliptic Restricted Three-body Problem and Space Mission Design\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://dssl.technion.ac.il/DSSL//userdata/SendFile.asp?DBID=1\u0026amp;LNGID=1\u0026amp;GID=542\u0022 rel=\u0022external nofollow\u0022\u003EStationkeeping on Unstable Orbits: Generalization to the Elliptic Restricted Three-Body Problem\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope this helps keep this project going as it looks amazing.\u003C/p\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2014-02-10T18:43:58Z","Content":"\n\u003Cp\u003EAsteroids will most likely be a new kind of debris rather than celestial bodies, from the engine\u0027s perspective.\u003C/p\u003E\n"},{"CreatedByName":"jxi24","CreatedById":102030,"CreatedDateTime":"2014-02-10T20:41:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EHow should stationkeeping be implemented? In particular, how should the user set the orbit they want to maintain?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think a good method of doing this is for the user to set a tolerance for deviations (or maximum deviation) from their current orbit (probably use the semi-major axis, or have one for both apoapsis and periapsis). Then have it use RCS to adjust the orbit back if available, or use whatever other engines are available. I do not know how you would go about implementing it without having to switch to the vessel. In the code you could just have it as a flag and have it check periodically, maybe check once every 5-10 orbits or use a given time period?\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-10T22:50:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tenneko Kazeno\u0022 data-cite=\u0022Tenneko Kazeno\u0022\u003E\u003Cdiv\u003EI don\u0027t know anything about this subject but hopefully these papers will help you.\u003Cp\u003E\u003Ca href=\u0022https://www.google.com/url?sa=t\u0026amp;rct=j\u0026amp;q=\u0026amp;esrc=s\u0026amp;source=web\u0026amp;cd=4\u0026amp;cad=rja\u0026amp;ved=0CEUQFjAD\u0026amp;url=http%3A%2F%2Fwww.iepc2013.org%2Fget%3Fid%3D414\u0026amp;ei=vgL5UqXVDePF0QH7loGoBw\u0026amp;usg=AFQjCNHHX9Mg4EyybltQNn1QCrlSSD-xQA\u0026amp;sig2=EV2CtrPVNXHwj3h3JcSWZA\u0022 rel=\u0022external nofollow\u0022\u003ELagrangian Coherent Structures in the Elliptic Restricted Three-body Problem and Space Mission Design\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://dssl.technion.ac.il/DSSL//userdata/SendFile.asp?DBID=1\u0026amp;LNGID=1\u0026amp;GID=542\u0022 rel=\u0022external nofollow\u0022\u003EStationkeeping on Unstable Orbits: Generalization to the Elliptic Restricted Three-Body Problem\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope this helps keep this project going as it looks amazing.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy question is mostly a gameplay one actually. The most sensible reference frame is the rotating-pulsating one, but I\u0027m afraid this might be a tad confusing on the map (it\u0027s not an isometry). It is also convenient to use true anomaly, rather than time, as the independent variable, which affects what the potential looks like, but I think this is less confusing than the lack of isometry induced by a pulsating map view.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jxi24\u0022 data-cite=\u0022jxi24\u0022\u003E\u003Cdiv\u003EI think a good method of doing this is for the user to set a tolerance for deviations (or maximum deviation) from their current orbit (probably use the semi-major axis, or have one for both apoapsis and periapsis).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe thing is, you \u003Cem\u003Edon\u0027t\u003C/em\u003E deviate from your predicted orbit (the prediction and the actual orbit are computed in the same way). For LKO and the like, you could do what you say with the deviation from the Keplerian orbit, thus compensating for orbital decay. The question is, how do you say you want to stay in a Lissajoux or halo orbit around a Lagrange point? Or a horseshoe orbit? Or another kind of exotic orbit? You can see from the prediction that the orbit will end up being unstable, but saying \u0022I want to make corrections to keep me in that kind of an orbit\u0022 is something complicated (this is why astrodynamicists exist \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThen have it use RCS to adjust the orbit back if available, or use whatever other engines are available. I do not know how you would go about implementing it without having to switch to the vessel. In the code you could just have it as a flag and have it check periodically, maybe check once every 5-10 orbits or use a given time period?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t need no stinkin\u0027 physics engine. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\u003Cp\u003EActually, I\u0027m trying to prevent Unity from doing too much anyway, so I\u0027ll definitely not be loading the vessel.\u003C/p\u003E\u003Cp\u003EThe idea would be to model the vessel as a rigid body (no, not an Unity RigidBody, an actual rigid body), see where the thrusters are and what torques/forces they apply, compute the resources required for the correction, perform the correction by just feeding it to the integrator and subtract the resources from the vessel.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T00:12:04Z\u0022 title=\u002202/11/2014 12:12  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-02-11T00:28:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022\\\u0022 data-cite=\u0022\\\u0022\u003E\u003Cdiv\u003EThe problem is defining which orbit you want to stay in.\u003C/div\u003E\u003C/blockquote\u003E The main problem is that there are too many differenct orbits. A few examples would be:\u003Cp\u003EKeep a satellite in an eccentric orbit from burning up due to disturbances from the mun\u003C/p\u003E\u003Cp\u003EKeep a keostationary satellite above a certain longitude\u003C/p\u003E\u003Cp\u003EKeep a satellite from drifting away from a Lagrange point\u003C/p\u003E\u003Cp\u003EKeep an Aldrin cycler on its correct trajectory\u003C/p\u003E\u003Cp\u003EI don\u0027t think you\u0027ll be able to write code that is general enough to cover any two of these cases. You\u0027ll just have to offer multiple hard-coded options, and add more as people request them (or leave it to the people to write them). For the beginning, I\u0027d simply stick to an algorithm that does maneuvers on each Ap/Pe pass, fixing Pe/Ap to their pre-set values. If the required burn d-v would be too high (say, \u0026gt; 1m/s), display a warning message and stop the stationkeeping.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T00:33:56Z\u0022 title=\u002202/11/2014 12:33  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by mic_e\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-11T00:49:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003EThe main problem is that there are too many differenct orbits. A few examples would be:\u003Cp\u003EKeep a satellite in an eccentric orbit from burning up due to disturbances from the mun\u003C/p\u003E\u003Cp\u003EKeep a keostationary satellite above a certain longitude\u003C/p\u003E\u003Cp\u003EKeep a satellite from drifting away from a Lagrange point\u003C/p\u003E\u003Cp\u003EKeep an Aldrin cycler on its correct trajectory\u003C/p\u003E\u003Cp\u003EI don\u0027t think you\u0027ll be able to write code that is general enough to cover any two of these cases. You\u0027ll just have to offer multiple hard-coded options, and add more as people request them (or leave it to the people to write them).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGood point (also, I had never heard of cyclers, thanks for mentioning that!). I guess I\u0027ll end up having a few hardcoded options.\u003C/p\u003E\u003Cp\u003ERegarding people writing their own stationkeeping, I guess something like kOS, with a proper language and extensive APIs, would be nice...\u003C/p\u003E\u003Cp\u003E*daydream mode on* contemplates making a plugin that interfaces with Ada, provides some packages for vehicle control, and integrates GNAT with a minimalistic IDE in-game. *daydream mode off* Let\u0027s get back to the current crazy idea.\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-02-11T01:00:23Z","Content":"\n\u003Cp\u003ECrazy idea: let the user define some keyhole regions along the orbit (or maybe even auto-define them with suitable artificial stupidity) and when the trajectory drifts too far from one or more of them, adjust velocity to re-center the predicted trajectory through the next keyhole(s). Of course they would have to be defined in phase space, more than in regular 3D space, BUT it might be possible.... OK, end of crazy talk for today.\u003C/p\u003E\u003Cp\u003EAnyway, I\u0027d worry about all this after the basic N-body is done \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso:\u003Ca href=\u0022http://trs-new.jpl.nasa.gov/dspace/bitstream/2014/15031/1/00-1037.pdf\u0022 rel=\u0022external nofollow\u0022\u003E Genesis probe halo stationkeeping design\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u0026lt;\u0026lt; While many options exist and have been tested, a simplified version of a target point method developed by Howell and Pernicka \u003Ca href=\u0022https://engineering.purdue.edu/people/kathleen.howell.1/Publications/Journals/1993_JGCD_HowPer.pdf\u0022 rel=\u0022external nofollow\u0022\u003E[Howell 93]\u003C/a\u003E is used to generate the results presented here. The goal of this controller is simply to apply an impulsive maneuver, or \u003Cspan style=\u0022font-family:arial;\u0022\u003E\u003Cspan style=\u0022color:#444444;\u0022\u003E\u00C3\u017D\u00E2\u20AC\u003C/span\u003E\u003C/span\u003EV, in order that the error, the deviation in position between the actual trajectory and the nominal trajectory at some target time downstream, is reduced to zero \u0026gt;\u0026gt;\u003C/p\u003E\u003Cp\u003ELAST EDIT: Hey, not so crazy talk after all then \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (at least my physical intuition still works late at night, always nice to know. Don\u0027t ask me how to minimize a cost function over a 6x6 matrix though...)\u003C/p\u003E\u003Cp\u003EFOLLOWING DAY EDIT: it would be probably better to split the task in two cases, one for \u0022weakly bound\u0022 trajectories (like L1 halos) where the thread-the-needle method is employed, and a \u0022strongly bound\u0022 case for orbits at least up to geostationary where Keplerian parameters adjustment is periodically done (with some deadband)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T12:43:57Z\u0022 title=\u002202/11/2014 12:43  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"}]}