{"TopicId":184625,"ForumId":15,"TopicTitle":"Running color animation and mesh animation at same time","CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2019-05-20T20:06:31Z","PageNum":1,"Articles":[{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2019-05-20T20:06:31Z","Content":"\n\u003Cp\u003E\nI\u0027ve managed to create a test part that includes both standard mesh animation and color animation, driving Color property of KSP/UnlitColor material on one of animated parts.\n\u003C/p\u003E\n\u003Cp\u003E\nI can execute mesh animation with ModuleAnimateGeneric, but i don\u0027t know how to also start Color animation at the same time. Is there an extra parameter that ModuleAnimateGeneric can parse ?\n\u003C/p\u003E\n\u003Cp\u003E\nOr, is there a custom plugin that can run two animations at the same time ?\n\u003C/p\u003E\n"},{"CreatedByName":"JadeOfMaar","CreatedById":167617,"CreatedDateTime":"2019-05-21T14:33:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602185\u0022 data-ipsquote-contentid=\u0022184625\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558382791\u0022 data-ipsquote-userid=\u002293302\u0022 data-ipsquote-username=\u0022fatcargo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, fatcargo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve managed to create a test part that includes both standard mesh animation and color animation, driving Color property of KSP/UnlitColor material on one of animated parts.\n\u003C/p\u003E\n\u003Cp\u003E\nI can execute mesh animation with ModuleAnimateGeneric, but i don\u0027t know how to also start Color animation at the same time. Is there an extra parameter that ModuleAnimateGeneric can parse ?\n\u003C/p\u003E\n\u003Cp\u003E\nOr, is there a custom plugin that can run two animations at the same time ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSelect the two animation objects in the file browser? panel in Unity. Right-click and do \u003Cstrong\u003EAnimation \u0026gt; Compile Selected\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nNext: click the little hamburger menu here and select \u003Cstrong\u003EDebug\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00222wlcgnr.png\u0022 class=\u0022ipsImage\u0022 height=\u002277\u0022 src=\u0022https://i.imgur.com/2wlcgnr.png\u0022 width=\u0022445\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIn the new set of properties, tick the tickbox \u003Cstrong\u003ELegacy\u003C/strong\u003E because KSP needs animations to be Unity \u003Cem\u003Elegacy\u003C/em\u003E type. Click the hamburger menu and change back to \u003Cstrong\u003ENormal\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nThis should be quite enough for your combined animation to work.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-21T14:34:11Z\u0022 title=\u002205/21/2019 02:34  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 21, 2019\u003C/time\u003E by JadeOfMaar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2019-05-21T17:36:47Z","Content":"\n\u003Cp\u003E\nTHANKS FOR THE PIC ! IT WORKED ! That small thing ... so much difference. And now i can use ModuleAnimateGeneric, no need for exotic stuff (yet \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E ).\n\u003C/p\u003E\n\u003Cp\u003E\nI have to note that info is scattered across several threads but here is what i found \u003Cspan\u003E:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EThis is useful reference to see how parts are constructed, i used \u0022light\u0022 demo to confirm my Unity install worked properly,\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed249106212\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/169578-parts-demo-%E2%80%93-blender-gimp-and-unity-files-feb-17-2019/\u0026amp;do=embed\u0022 style=\u0022height:228px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u0022Central\u0022 reference with information (there may be smaller bits of info one can miss if tired/distracted),\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed3920739631\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/135428-color-animation-editor/\u0026amp;do=embed\u0022 style=\u0022height:228px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nIn my case, my mesh was imported as FBX file with Animation component, added to GameObject that holds PartTools.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve added a plain KSP/UnlitColor material to small piece of mesh to be used as color indicator (which is child of other meshes in animation).\n\u003C/p\u003E\n\u003Cp\u003E\nThen i created a new property animation (i guess this is appropriate name for it) and in \u0022Reference\u0022 field wrote path to my color indicator mesh as first_level_child_of_imported_file/child_level_1/color_indicator_mesh. You can see this in yt video posted in Color Animation Editor thread when demonstrating Reference setup to \u0022HierarchyEmissive\u0022 part of video. Pay attention at what is going on when watching it, it is easy to miss crucial details as design process is quite quick.\n\u003C/p\u003E\n\u003Cp\u003E\nThis animation is targeting property \u0022_Color\u0022 (note the leading underscore) found in KSP/UnlitColor material assigned to color_indicator_mesh.\n\u003C/p\u003E\n\u003Cp\u003E\nThen i selected my color_indicator_mesh in scene tab and opened Animation tab (menu Window \u0026gt; Animation or CTRL\u002B6) and edited keys as needed.\n\u003C/p\u003E\n\u003Cp\u003E\nNext step was to, inside Project tab, CTRL\u002Bclick multi-select both animation imported along with FBX and a newly created property animation, then right-click on any of selected items and from menu choose Animation \u0026gt; Compile Selected.\n\u003C/p\u003E\n\u003Cp\u003E\nThis creates a new animation named \u0022CompiledAnimation\u0022 in same folder as source animations. Don\u0027t forget to set \u0022Legacy\u0022 flag as noted in previous post.\n\u003C/p\u003E\n\u003Cp\u003E\nNow i added that to a list of animations to root item where original imported animation resides. So there were three animations, original, property and freshly compiled one in animation array (i also added property animation).\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, i did the usual exporting step and copied to GameData.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter that i added CompiledAnimation to ModuleAnimateGeneric in animationName field, tested and that was it. It worked \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMore useful bits of info to ones learning : while i was trying to make it work, i had two types of failures : part compiler failed to compile part and subsequently model was not found. Not much to do here except try again.This error is visible during load. Second failure type was far more dangerous \u003Cspan\u003E\u003Cspan\u003E- it made my KSP game eat up nearly all of my RAM, it used up 6.5GB in middle of load. For several times i barely managed to end task before it turned my machine into crawling pile of mud. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E One more thing : do not be alarmed when editing keys in property animation and see property names in yellow coilor with \u0022(Missing!)\u0022 text,\u00A0 it works and it can be tested by dragging animation cursor. \u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try emissives next, they need extra step for creating textures. Which brings me to my next question \u003Cspan\u003E: \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167617-jadeofmaar/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022167617\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167617-jadeofmaar/\u0022 rel=\u0022\u0022\u003E@JadeOfMaar\u003C/a\u003E some long time ago i\u0027ve read on forums about limits for number of lights in scene. Does this apply to emissives as well ? I wouldn\u0027t want to burden player\u0027s machines with even more ultra-deluxe bang-whizz-splash \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-21T17:56:39Z\u0022 title=\u002205/21/2019 05:56  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 21, 2019\u003C/time\u003E by fatcargo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JadeOfMaar","CreatedById":167617,"CreatedDateTime":"2019-05-21T18:11:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602598\u0022 data-ipsquote-contentid=\u0022184625\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558460207\u0022 data-ipsquote-userid=\u002293302\u0022 data-ipsquote-username=\u0022fatcargo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n32 minutes ago, fatcargo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ll try emissives next, they need extra step for creating textures. Which brings me to my next question \u003Cspan\u003E: \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167617-jadeofmaar/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022167617\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167617-jadeofmaar/\u0022 rel=\u0022\u0022\u003E@JadeOfMaar\u003C/a\u003E some long time ago i\u0027ve read on forums about limits for number of lights in scene. Does this apply to emissives as well ? I wouldn\u0027t want to burden player\u0027s machines with even more ultra-deluxe bang-whizz-splash \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E \u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe spotlight limit (in the Pause menu, defaults to 8 but you can raise it) does not apply to emissives. These are merely a texture effect that: does not give off light; does not respect light and shadow cast onto them. Their brightness level is absolute when they draw.\n\u003C/p\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2019-05-21T18:27:53Z","Content":"\n\u003Cp\u003E\nOhh that\u0027s perfect ! That means i can add emissive, not worry about (too much) overhead and it will work in dark ! Yay ! Oh and update : i removed source anims, compiled anim works completely alone but i\u0027m also curious about a possibility of adding curves for animating properties with arbitrarily set animation keys, even if animation with imported mesh does not have reserved time slots for it.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is a post that hints at this,\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed6538266767\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/151277-animating-the-texture/\u0026amp;do=embed\u0026amp;comment=2833403\u0026amp;embedComment=2833403\u0026amp;embedDo=findComment\u0022 style=\u0022height:282px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-21T18:34:01Z\u0022 title=\u002205/21/2019 06:34  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 21, 2019\u003C/time\u003E by fatcargo\u003C/strong\u003E\n\u003C/span\u003E\n"}]}