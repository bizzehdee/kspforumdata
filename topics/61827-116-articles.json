{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":116,"Articles":[{"CreatedByName":"celem","CreatedById":91132,"CreatedDateTime":"2015-04-01T02:05:30Z","Content":"\n\u003Cp\u003EHmm. Do you really mean any tank?\u003C/p\u003E\u003Cp\u003EThe typical solution is \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EIF STAGE:LIQUIDFUEL \u0026lt; 0.01 {STAGE.}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis checks to see if all engines in the current stage are empty and drops if they are. The 0.01 is because KSP doesnt always empty big tanks. Im not sure how this behaves with asparagus staging, whether the radial tanks are considered same stage as the core booster. It also obviously only works on LF engines. Works well as a WHEN THEN trigger.\u003C/p\u003E\u003Cp\u003EIf you specifically want as you stated: If any LF tank anywhere on the ship is empty, then stage:\u003C/p\u003E\u003Cp\u003EYou probably need Lists. Off the top of my head something like:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E list tanks in tanklist. for t in tanklist {if t:liquidfuel \u0026lt; 0.01 {stage.}}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENot tested that one but it should walk the entire ship and check each tank, calling stage everytime it finds an empty, if you have a bunch of empty tanks this would dissassemble your ship, but you see what i mean... Set a boolean flag true when you find empties and stage when true, would work for asparagus and slack tank setups i guess.\u003C/p\u003E\u003Cp\u003EPersonally I use:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E set nO to 0.\u003Cbr\u003E\tlist engines in el.\u003Cbr\u003E\tfor e in el { \u003Cbr\u003E\tif e:flameout {\u003Cbr\u003E    set nO to nO \u002B 1.\u003Cbr\u003E\t}\u003Cbr\u003E\t}\u003Cbr\u003EIF nO \u0026gt; 0 {STAGE.}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EStages if anything is \u0027flamed-out\u0027, which includes not just jet engines but absolutely any motor that is resource starved, so works for solids/ions/any mod fuels and is immune to the residual fuel-traces which can muck with staging logic. The disadvantage of the two list methods is that they kinda need to be inside your loops and dont work as WHEN triggers, and the last one absolutely cannot handle a slack tank since its actually inspecting engines.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T02:26:54Z\u0022 title=\u002204/01/2015 02:26  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by celem\u003C/strong\u003E\n\u003Cbr\u003Etypos in code sections\n\u003C/span\u003E\n"},{"CreatedByName":"jandcando","CreatedById":66121,"CreatedDateTime":"2015-04-01T02:59:12Z","Content":"\n\u003Cp\u003EHello everyone! I\u0027m here to let you know that I just started a little project on GitHub for a Notepad\u002B\u002B language file for kOS. I\u0027m pretty sure I have the basics down already, but I know there are some holes. I would like it if people started using this so they can tell me the holes, or maybe fix them themselves.\u003C/p\u003E\u003Cp\u003EYou can try it out \u003Ca href=\u0022https://github.com/JandCandO/Notepad-Plus-Plus-Language-for-kOS\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"avi","CreatedById":68668,"CreatedDateTime":"2015-04-01T06:49:36Z","Content":"\n\u003Cp\u003EBy the way, I talked to erendrake and confirmed that LOCK STEERING does not properly use engine gimbaling, so if you intend to use this mod in say, Realism Overhaul, you\u0027re going to have to resort to using Raw Input.\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-04-01T06:56:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jandcando\u0022 data-cite=\u0022jandcando\u0022\u003E\u003Cdiv\u003EHello everyone! I\u0027m here to let you know that I just started a little project on GitHub for a Notepad\u002B\u002B language file for kOS. I\u0027m pretty sure I have the basics down already, but I know there are some holes. I would like it if people started using this so they can tell me the holes, or maybe fix them themselves.\u003Cp\u003EYou can try it out \u003Ca href=\u0022https://github.com/JandCandO/Notepad-Plus-Plus-Language-for-kOS\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt has been done in the past, but your version may be more up-to date if you keep maintaining it.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-04-01T09:04:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022avi\u0022 data-cite=\u0022avi\u0022\u003E\u003Cdiv\u003EBy the way, I talked to erendrake and confirmed that LOCK STEERING does not properly use engine gimbaling, so if you intend to use this mod in say, Realism Overhaul, you\u0027re going to have to resort to using Raw Input.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThen why do I remember over and over again seeing the engine nozzles tilting back and forth as kOS yanks the controls back and forth (in its overzealous way)? I know I\u0027ve seen it do this a lot, but then again I don\u0027t play under RO. Is it a specific thing the RO mod does to change the API for gimbals?\u003C/p\u003E\u003Cp\u003EAs far as I knew, kOS lock steering merely yanks the \u0022joystick\u0022 WASDQE controls around, and lets the main KSP game engine do whatever it will with those inputs, without making any fancy exceptions. The main game gimbals when you use WASDQE, so why doesn\u0027t kOS when it does?\u003C/p\u003E\n"},{"CreatedByName":"Kamik423","CreatedById":111881,"CreatedDateTime":"2015-04-01T09:24:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sonny_Jim\u0022 data-cite=\u0022Sonny_Jim\u0022\u003E\u003Cdiv\u003ECan anyone recommend a way to do the following:\u003Cp\u003EIf any liquid fuel tank is empty, stage.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr you could use it on combination with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64227-0-90-Smart-Parts-V1-5-1-KSP-AVC-and-AGX-Compatibility-Jan-8\u0022 rel=\u0022external nofollow\u0022\u003Esmart parts\u003C/a\u003E to take pressure off kOS.\u003C/p\u003E\n"},{"CreatedByName":"Sonny_Jim","CreatedById":103060,"CreatedDateTime":"2015-04-01T11:59:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E list tanks in tanklist. for t in tanklist {if t:liquidfuel \u0026lt; 0.01 {stage.}}.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh this was the sort of thing I was looking for, just couldn\u0027t get my head around it. Thanks. The \u0027standard\u0027 WHEN STAGE:LIQUIDFUEL \u0026lt; 0.001 only seems to work for very simple fuel setups.\u003C/p\u003E\u003Cp\u003EI\u0027m still having trouble building a tanklist that contains a list of fuel tanks. I\u0027ve tried this:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Eset TANKLIST to SHIP:MODULESNAMED(\u0022fueltank\u0022)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut it doesn\u0027t seem to match anything.\u003C/p\u003E\u003Cp\u003ESo now I\u0027ve got something like this:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESET tanklist to SHIP:PARTSDUBBED(\u0022fueltank\u0022). \u003C/p\u003E\u003Cp\u003E for t in tanklist {\u003C/p\u003E\u003Cp\u003E if t:RESOURCES:LIQUIDFUEL:AMOUNT \u0026lt; 0.01 {\u003C/p\u003E\u003Cp\u003E STAGE.\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut apparently t:RESOURCES:LIQUIDFUEL:AMOUNT is wrong. How do I get the amount of liquid fuel left in a part?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T12:42:44Z\u0022 title=\u002204/01/2015 12:42  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by Sonny_Jim\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ManTrelk","CreatedById":84942,"CreatedDateTime":"2015-04-01T12:31:11Z","Content":"\n\u003Cp\u003EI\u0027m so confused... New to kOS here. The command LOCK STEERING TO R(0,0,0) should keep the ship pointing in whatever direction it\u0027s currently facing, right? No rotation about its axis or anything as a result of that command?\u003C/p\u003E\u003Cp\u003EThe command LOCK STEERING TO HEADING (SHIP:FACING:ROLL,90) should also result in no change to roll, right? Why does it make my ship do a 360 degree roll? How can I avoid this and lock steering without changing my ship\u0027s roll??\u003C/p\u003E\u003Cp\u003EMore to the point though, is something wrong with how kOS handles changes to a ship\u0027s roll value? My vessels seem to shift on other axes when I give it a command to change its roll (which is why I\u0027m trying get it to maintain its current roll...).\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-04-01T12:43:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sonny_Jim\u0022 data-cite=\u0022Sonny_Jim\u0022\u003E\u003Cdiv\u003EAh this was the sort of thing I was looking for, just couldn\u0027t get my head around it. Thanks. The \u0027standard\u0027 WHEN STAGE:LIQUIDFUEL \u0026lt; 0.001 only seems to work for very simple fuel setups.\u003Cp\u003EI\u0027m still having trouble building a tanklist that contains a list of fuel tanks. I\u0027ve tried this:\u003C/p\u003E\u003Cp\u003EBut it doesn\u0027t seem to match anything.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are a lot of ways to trigger stages, and not all of them require resource monitoring. For example see the next snippet:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset stagemaxthrust to ship:maxthrust.\u003Cbr\u003Ewhen status \u0026lt;\u0026gt; \u0022PRELAUNCH\u0022 and (ship:maxthrust\u0026lt;stagemaxthrust or ship:maxthrust\u0026lt;1) then {\u003Cbr\u003E    print \u0022Stage!\u0022.\u003Cbr\u003E    stage.\u003Cbr\u003E    set stagemaxthrust to ship:maxthrust.\u003Cbr\u003E    preserve.\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou remember ship\u0027s maxthrust and stage when it changes (due to engine flameout). The example I provided works with asparagus staging design\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ManTrelk\u0022 data-cite=\u0022ManTrelk\u0022\u003E\u003Cdiv\u003EI\u0027m so confused... New to kOS here. The command LOCK STEERING TO R(0,0,0) should keep the ship pointing in whatever direction it\u0027s currently facing, right? No rotation about its axis or anything as a result of that command?\u003Cp\u003EThe command LOCK STEERING TO HEADING (SHIP:FACING:ROLL,90) should also result in no change to roll, right? Why does it make my ship do a 360 degree roll? How can I avoid this and lock steering without changing my ship\u0027s roll??\u003C/p\u003E\u003Cp\u003EMore to the point though, is something wrong with how kOS handles changes to a ship\u0027s roll value? My vessels seem to shift on other axes when I give it a command to change its roll (which is why I\u0027m trying get it to maintain its current roll...).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt seems you are confusing ROLL and compass. In HEADING(x,y) parameter x is the compass direction (\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/commands/flight/cooked.html?highlight=heading\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/commands/flight/cooked.html?highlight=heading\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003EIt is not kOS way of handling, but more of a how UnityEngine handles directions. \u003C/p\u003E\u003Cp\u003EIf you want your ship keep a steady roll during ascend consider the following code snippet:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock steering to lookdirup(up:vector, ship:facing:topvector).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOr as a part of the loop:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Euntil altitude \u0026gt; ha or apoapsis \u0026gt; orbitAlt {\u003Cbr\u003E    set ar to alt:radar.\u003Cbr\u003E    // control attitude\u003Cbr\u003E\u003Cbr\u003E    if ar \u0026lt; gt0 {\u003Cbr\u003E        set arr to ar / gt0.\u003Cbr\u003E        set pda to (cos(arr * 180) \u002B 1) / 2.\u003Cbr\u003E        set pitch to pitch0 * ( pda - 1 ).\u003Cbr\u003E        set pitchvector to up \u002B R(0, pitch, 0).\u003Cbr\u003E\u003Cbr\u003E        lock steering to lookdirup(pitchvector:vector, ship:facing:topvector).\u003Cbr\u003E\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T12:59:01Z\u0022 title=\u002204/01/2015 12:59  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by Ziw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JD_Tiger","CreatedById":115998,"CreatedDateTime":"2015-04-01T12:56:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022JD_Tiger\u0022 data-cite=\u0022JD_Tiger\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ETryed my script go\u003C/span\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003Et following error:\u003C/span\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EGet suffix\u0027DOEVENT\u0027 not found on objet LIST of 3 items\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EAny idea what I can do?\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EScript: \u003C/span\u003E\u003Ca href=\u0022https://drive.google.com/file/d/0BypxFvfIp362RDNFU2JoWUtJWHM/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/0BypxFvfIp362RDNFU2JoWUtJWHM/view?usp=sharing\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E*Push*\u003C/p\u003E\n"},{"CreatedByName":"Sonny_Jim","CreatedById":103060,"CreatedDateTime":"2015-04-01T12:57:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E The example I provided works with asparagus staging design\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow? From what I see it only stages when an engine flames out, not when a tank is emptied, which is what I\u0027m trying to do.\u003C/p\u003E\n"},{"CreatedByName":"ManTrelk","CreatedById":84942,"CreatedDateTime":"2015-04-01T13:03:26Z","Content":"\n\u003Cp\u003EThanks for the reply. I don\u0027t really mind changing the roll if the ship does it smoothly without deviating off its roll axis. Just to clarify, is that an artefact of UnityEngine or were you referring to the 360 degree roll I experience?\u003C/p\u003E\u003Cp\u003EThat first bit of code you posted keeps the roll steady, but locks the ship to UP. Is there a way to get one without the other?\u003C/p\u003E\u003Cp\u003EAlso, is gt0 an undefined variable in the until loop?\u003C/p\u003E\n"},{"CreatedByName":"Sonny_Jim","CreatedById":103060,"CreatedDateTime":"2015-04-01T14:02:11Z","Content":"\n\u003Cp\u003EOk, so I\u0027ve managed to figure out a way to check for resources in a partslist that\u0027s made up of fuel tanks:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESET tanklist to SHIP:PARTSDUBBED(\u0022fueltank\u0022).\u003C/p\u003E\u003Cp\u003Efor t in tanklist {if t:resources[0]:AMOUNT \u0026lt; 0.01 {STAGE.}}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat I\u0027d like to do now is to build a parts list containing all the fuel tanks by seeing if they have a LIQUIDFUEL resource, rather than finding them by a part name:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Efor i in SHIP:PARTS {\u003C/p\u003E\u003Cp\u003E if i:RESOURCES:CONTAINS (\u0022LIQUIDFUEL\u0022) {\u003C/p\u003E\u003Cp\u003E tanklist:ADD (t).\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut again I\u0027m running into syntax problems. Could someone post a way to build a list of all parts that contain liquidfuel as a resource?\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-04-01T14:19:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sonny_Jim\u0022 data-cite=\u0022Sonny_Jim\u0022\u003E\u003Cdiv\u003EHow? From what I see it only stages when an engine flames out, not when a tank is emptied, which is what I\u0027m trying to do.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry, it works not for every type of asparagus staging, but only where engine flameout means there is need to stage.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022JD_Tiger\u0022 data-cite=\u0022JD_Tiger\u0022\u003E\u003Cdiv\u003E*Push*\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBetter post code here.\u003C/p\u003E\u003Cp\u003EIn your code\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT \u0022Deploying Payload\u0022.\u003Cbr\u003ESTAGE.\u003Cbr\u003ESET ANTENNA TO SHIP:PARTSTAGGED(\u0022Comms\u0022).\u003Cbr\u003EANTENNA:DOEVENT(\u0022activate\u0022).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EANTENNA is not a PartModule, it is a Part. You need to get the PartModule corresponding to your antenna.\u003C/p\u003E\u003Cp\u003EIf you are using RemoteTech that would be accessed as \u003C/p\u003E\u003Cp\u003Eset antenna_pm to ANTENNA:getmodule(\u0022ModuleRTAntenna\u0022).\u003C/p\u003E\u003Cp\u003EAfter that you may call antenna_pm:doevent(\u0022activate\u0022).\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sonny_Jim\u0022 data-cite=\u0022Sonny_Jim\u0022\u003E\u003Cdiv\u003EOk, so I\u0027ve managed to figure out a way to check for resources in a partslist that\u0027s made up of fuel tanks:\u003Cp\u003EWhat I\u0027d like to do now is to build a parts list containing all the fuel tanks by seeing if they have a LIQUIDFUEL resource, rather than finding them by a part name:\u003C/p\u003E\u003Cp\u003EBut again I\u0027m running into syntax problems. Could someone post a way to build a list of all parts that contain liquidfuel as a resource?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/language/flow.html#for\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/language/flow.html#for\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structures/vessels/resource.html#structure:RESOURCE\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/structures/vessels/resource.html#structure:RESOURCE\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ManTrelk\u0022 data-cite=\u0022ManTrelk\u0022\u003E\u003Cdiv\u003EThanks for the reply. I don\u0027t really mind changing the roll if the ship does it smoothly without deviating off its roll axis. Just to clarify, is that an artefact of UnityEngine or were you referring to the 360 degree roll I experience?\u003Cp\u003EThat first bit of code you posted keeps the roll steady, but locks the ship to UP. Is there a way to get one without the other?\u003C/p\u003E\u003Cp\u003EAlso, is gt0 an undefined variable in the until loop?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI posted just a fraction of the ascend script as an example of how to keep the rocket pointing where you want it to, while keeping the roll stable. It is not that hard to figure out. Try finishing my second part by setting up missing variables. gt1 is the altitude of the first part of the ascend, during which you need to do the initial pitchover maneuver. It depends on your design and whether or not you\u0027re using FAR, but set it to say 5000 and set pitch0 to say 5 and see how your rocket behaves.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T14:22:59Z\u0022 title=\u002204/01/2015 02:22  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by Ziw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JD_Tiger","CreatedById":115998,"CreatedDateTime":"2015-04-01T14:25:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ziw\u0022 data-cite=\u0022Ziw\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIn your code\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT \u0022Deploying Payload\u0022.\u003Cbr\u003ESTAGE.\u003Cbr\u003ESET ANTENNA TO SHIP:PARTSTAGGED(\u0022Comms\u0022).\u003Cbr\u003EANTENNA:DOEVENT(\u0022activate\u0022).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EANTENNA is not a PartModule, it is a Part. You need to get the PartModule corresponding to your antenna.\u003C/p\u003E\u003Cp\u003EIf you are using RemoteTech that would be accessed as \u003C/p\u003E\u003Cp\u003Eset antenna_pm to ANTENNA:getmodule(\u0022ModuleRTAntenna\u0022).\u003C/p\u003E\u003Cp\u003EAfter that you may call antenna_pm:doevent(\u0022activate\u0022). \u003C/p\u003E\u003Cp\u003EOk, clear now...\u003C/p\u003E\u003Cp\u003EWill try and report...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Sonny_Jim","CreatedById":103060,"CreatedDateTime":"2015-04-01T14:37:45Z","Content":"\n\u003Cp\u003EI know how to use FOR, it\u0027s just I don\u0027t know what the syntax is to check if a part contains a liquidfuel resource.\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-04-01T14:54:45Z","Content":"\n\u003Cp\u003EUse FOR loop to look through PART:RESOURCES and set a flag if it contains the resource you need.\u003C/p\u003E\n"},{"CreatedByName":"JD_Tiger","CreatedById":115998,"CreatedDateTime":"2015-04-01T15:05:57Z","Content":"\n\u003Cp\u003EYeah! new failure:\u003C/p\u003E\u003Cp\u003ECode:\u003C/p\u003E\u003Cp\u003EPRINT \u0022Deploying Payload\u0022.\u003C/p\u003E\u003Cp\u003ESTAGE.\u003C/p\u003E\u003Cp\u003ESET ANTENNA TO SHIP:partstagged(\u0022Comms\u0022).\u003C/p\u003E\u003Cp\u003ESET ANTENNA_PM TO ANTENNA:GETMODULE(\u0022ModuleRTAntenna\u0022).\u003C/p\u003E\u003Cp\u003EANTENNA_PM:doevent(\u0022activate\u0022).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://abload.de/img/screenshot8u3ber.png\u0022 alt=\u0022screenshot8u3ber.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T15:09:43Z\u0022 title=\u002204/01/2015 03:09  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by JD_Tiger\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sonny_Jim","CreatedById":103060,"CreatedDateTime":"2015-04-01T15:09:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EUse FOR loop to look through PART:RESOURCES\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut how? I tried using CONTAINS and I got a syntax error. The closest I\u0027ve got so far is to check whether the part has more than one resource:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESET tanklist to LIST().\u003C/p\u003E\u003Cp\u003Efor i in SHIP:PARTS \u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E if i:RESOURCES:length \u0026gt; 1\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E tanklist:ADD (i).\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-04-01T15:21:19Z","Content":"\n\u003Cp\u003EThis means that Antenna in your script is not a Part, but a list of parts. \u003C/p\u003E\u003Cp\u003ETo access a particular part use ANTENNA[0] , ANTENNA[1] and etc\u003C/p\u003E\n"},{"CreatedByName":"JD_Tiger","CreatedById":115998,"CreatedDateTime":"2015-04-01T15:22:37Z","Content":"\n\u003Cp\u003ESo i have to write 3 lines to activate all right?\u003C/p\u003E\u003Cp\u003Elike so:\u003C/p\u003E\u003Cp\u003EPRINT \u0022Deploying Payload\u0022.\u003C/p\u003E\u003Cp\u003ESTAGE.\u003C/p\u003E\u003Cp\u003ESET ANTENNA TO SHIP:PARTSTAGGED(\u0022Comms\u0022).\u003C/p\u003E\u003Cp\u003ESET ANTENNA_PM TO ANTENNA[0]:GETMODULE(\u0022ModuleRTAntenna\u0022).\u003C/p\u003E\u003Cp\u003EANTENNA_PM:DOEVENT(\u0022activate\u0022).\u003C/p\u003E\u003Cp\u003ESET ANTENNA_PM TO ANTENNA[2]:GETMODULE(\u0022ModuleRTAntenna\u0022).\u003C/p\u003E\u003Cp\u003EANTENNA_PM:DOEVENT(\u0022activate\u0022).\u003C/p\u003E\u003Cp\u003ESET ANTENNA_PM TO ANTENNA[1]:GETMODULE(\u0022ModuleRTAntenna\u0022).\u003C/p\u003E\u003Cp\u003EANTENNA_PM:DOEVENT(\u0022activate\u0022).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T15:24:57Z\u0022 title=\u002204/01/2015 03:24  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by JD_Tiger\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-04-01T15:28:15Z","Content":"\n\u003Cp\u003EJD_Tiger:\u003C/p\u003E\u003Cp\u003EYes, if you have 3 antennas. But I see some of them are Dishes and you will also need to target them manually - there is no way to do it via kOS right now.\u003C/p\u003E\u003Cp\u003ESonny_Jim:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E set fuelTanks to List().\u003Cbr\u003E\u003Cbr\u003Efor i in ship:parts\u003Cbr\u003E{\u003Cbr\u003E    for i1 in i:resources\u003Cbr\u003E    {\u003Cbr\u003E        if i1:name = \u0022LIQUIDFUEL\u0022\u003Cbr\u003E        {\u003Cbr\u003E            fuelTanks:ADD(i).\u003Cbr\u003E            break.\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI spent 3.5 minutes writing this, it is not that hard to create a workaround for CONTAINS\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-01T15:39:17Z\u0022 title=\u002204/01/2015 03:39  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by Ziw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sonny_Jim","CreatedById":103060,"CreatedDateTime":"2015-04-01T15:51:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E it is not that hard to create a workaround for CONTAINS \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you know how the syntax works and have an example to work from sure it\u0027s a lot easier. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"stevehead","CreatedById":137745,"CreatedDateTime":"2015-04-01T22:55:08Z","Content":"\n\u003Cp\u003EI\u0027ve noticed today that when using STAGE:LIQUIDFUEL with an Interstage Fairing Adapter from Procedural Fairings acting as a decoupler between my stages, kOS will calculate the amount of fuel in the current stage and the stage above it. Therefore, the following staging code is never executed:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EWHEN stage:liquidfuel \u0026lt; 0.1 THEN {\u003Cbr\u003E    STAGE.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor example, say stage 1 has 500 liquid fuel and stage 2 has 100 liquid fuel... when I do PRINT STAGE:LIQUIDFUEL as soon as I launch the rocket, it will output 600, and when stage 1 has used all of its fuel, it will output 100.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-04-01T23:45:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stevehead\u0022 data-cite=\u0022stevehead\u0022\u003E\u003Cdiv\u003EI\u0027ve noticed today that when using STAGE:LIQUIDFUEL with an Interstage Fairing Adapter from Procedural Fairings acting as a decoupler between my stages, kOS will calculate the amount of fuel in the current stage and the stage above it. Therefore, the following staging code is never executed:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EWHEN stage:liquidfuel \u0026lt; 0.1 THEN {\u003Cbr\u003E    STAGE.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor example, say stage 1 has 500 liquid fuel and stage 2 has 100 liquid fuel... when I do PRINT STAGE:LIQUIDFUEL as soon as I launch the rocket, it will output 600, and when stage 1 has used all of its fuel, it will output 100.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EkOS used to use its own complex parts walk algorithm to find all the fuel. Now it just relies on KSP\u0027s own API for it. Is there a discrepancy between the fuel shown in the indicators on the side and what kOS says? I.e. when it says there\u0027s 100 units left, are the green indicators all empty, or do they also show fuel left? If they also show fuel left then there\u0027s not much we can do - that means KSP itself thinks there\u0027s fuel for some of the active engines.\u003C/p\u003E\u003Cp\u003EIf it is showing zero fuel in the indicators when kOS says 100, can you show a screenshot of the game, showing where the 100 units of fuel are coming from (highlight the tank it is counting that it shouldn\u0027t be and show the popup for it if you can)? It\u0027s hard to diagnose from just the verbal description.\u003C/p\u003E\n"}]}