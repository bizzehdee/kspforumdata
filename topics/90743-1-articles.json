{"TopicId":90743,"ForumId":70,"TopicTitle":"Lags but no bottleneck?","CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-19T20:57:06Z","PageNum":1,"Articles":[{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-19T20:57:06Z","Content":"\n\u003Cp\u003EHi guys,\u003C/p\u003E\u003Cp\u003EI am just about to build my planetary station on minimus but now that i landed about 10 ships (each about 10 parts) the game runs at about 8 frames. I got pretty decent hardware:\u003C/p\u003E\u003Cp\u003E- i5 2500k clocked to 4.8ghz\u003C/p\u003E\u003Cp\u003E- 8gb ddr3 1866mhz ram\u003C/p\u003E\u003Cp\u003E- gigabyte 760gtx a little clocked ~10%\u003C/p\u003E\u003Cp\u003E- asrock z68 pro3 gen3 (or gen3 pro3? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png\u0022 alt=\u0022:o\u0022\u003E)\u003C/p\u003E\u003Cp\u003EWhen the game lags my cpu1 is running at ~ 60% at max and the other three cpu\u0027s run at ~40%. My graka runs at 2-3% and the game uses ~ 2.2gb ram. Now i wonder where my bottleneck is. Any ideas how to fix this?\u003C/p\u003E\u003Cp\u003Efurthermore i have about 15 mods installed including kwrocketry b9 aerospace and active texture managment.\u003C/p\u003E\u003Cp\u003Egreetings crush3dice \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-19T21:27:14Z\u0022 title=\u002211/19/2014 09:27  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 19, 2014\u003C/time\u003E by crush3dice\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kinryu","CreatedById":98176,"CreatedDateTime":"2014-11-20T05:32:58Z","Content":"\n\u003Cp\u003EIt might be because you have so many mods installed, or active texture management.\u003C/p\u003E\n"},{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-20T09:48:59Z","Content":"\n\u003Cp\u003Ethanks for the reply.\u003C/p\u003E\u003Cp\u003EI just tried to play without active texturemanagement, wich had almost no effect on the lags. The only difference i noticed is that i used ~ 0.3gb more ram. I actually can\u0027t uninstall the other mods (atleast not the big mods) because i already used the parts for my aircrafts :/.\u003C/p\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-11-20T12:16:35Z","Content":"\n\u003Cp\u003EIs it persistent across all saves, or just the one save? Because you could have a corrupt save. Also, What tool are you using to measure CPU usage? Task Manager seems to give results that are a bit less than reality with KSP\u0027s physics thread switching cores so often (Though I doubt that you are getting much physics lag with a 4.8 ghz processor and such low-part ships).\u003C/p\u003E\n"},{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-20T17:54:32Z","Content":"\n\u003Cp\u003EI have only played on one savestate as far so i don\u0027t know yet if my savestate is corrupt. I measured it with msi afterbruner, cpu-z and task manager for the ram-usuage of the ksp.exe process. I i guess i will make a big ship in the sandbox and check if it is my savestate.\u003C/p\u003E\n"},{"CreatedByName":"Malah","CreatedById":96644,"CreatedDateTime":"2014-11-21T00:05:16Z","Content":"\n\u003Cp\u003EHello, if you can reproduce this bug, can you send us your log. \u003C/p\u003E\u003Cp\u003EIf you don\u0027t know where the log is located, I invite you to read this: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92229\u0022 rel=\u0022external nofollow\u0022\u003EHow To Get Support\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2014-11-21T06:26:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022crush3dice\u0022 data-cite=\u0022crush3dice\u0022\u003E\u003Cdiv\u003EI have only played on one savestate as far so i don\u0027t know yet if my savestate is corrupt. I measured it with msi afterbruner, cpu-z and task manager for the ram-usuage of the ksp.exe process. I i guess i will make a big ship in the sandbox and check if it is my savestate.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESome advise:\u003C/p\u003E\u003Cp\u003Emaking a big ship that contain A LOT of parts WILL lag the game.\u003C/p\u003E\u003Cp\u003Ealso do you have b9 and kw rockety/novapunch installed?\u003C/p\u003E\u003Cp\u003Epress alt \u002B f2 and screen shot of ship and log\u003C/p\u003E\u003Cp\u003Ebest is with red text \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-21T06:28:47Z\u0022 title=\u002211/21/2014 06:28  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 21, 2014\u003C/time\u003E by Joshwoo69\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-21T12:24:10Z","Content":"\n\u003Cp\u003EOk i made some pictures of my scenario on minimus and made a huge ship with tonns of wheels and solar pannels and tanks on an other savestate to see if my savestate is corrupt. I screenshooted everything and logged my cpu\u0027s and gpu in msi afterburner.\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003Ethe core of my base as far:\u003Cimg src=\u0022http://i.imgur.com/lHgmsd9.jpg?1\u0022 alt=\u0022lHgmsd9.jpg?1\u0022\u003E\u003C/p\u003E\u003Cp\u003Esome ships scattered around my base (each about 20 parts):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/0JbJAeH.jpg?1\u0022 alt=\u00220JbJAeH.jpg?1\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cimg src=\u0022http://i.imgur.com/JtIqdFX.jpg?1\u0022 alt=\u0022JtIqdFX.jpg?1\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cimg src=\u0022http://i.imgur.com/E4hSr7C.jpg?1\u0022 alt=\u0022E4hSr7C.jpg?1\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/KIR87Vt.jpg?1\u0022 alt=\u0022KIR87Vt.jpg?1\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003Ei usually use \u0022-force-opengl\u0022 to lower the ram usuage to ~ 2gb\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/4wDReGu.jpg?1\u0022 alt=\u00224wDReGu.jpg?1\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/GCHXrKH.jpg?1\u0022 alt=\u0022GCHXrKH.jpg?1\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003Eand an exception i permanently get on minimus near my base (no clue what it means): \u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cimg src=\u0022http://i.imgur.com/NU47u0A.jpg?1\u0022 alt=\u0022NU47u0A.jpg?1\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003EHope this might help solving the problem \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Eedit: fraps is logging the frames on the the top left corner\u003C/p\u003E\u003Cp\u003Eedit2: i noticed another strange behavior. For some reason one of the docking ports has no magnetic force and is unable to dock at all. May that have something to do with the exception? O.o\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-21T12:38:04Z\u0022 title=\u002211/21/2014 12:38  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 21, 2014\u003C/time\u003E by crush3dice\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Malah","CreatedById":96644,"CreatedDateTime":"2014-11-21T12:36:42Z","Content":"\n\u003Cp\u003EHello, can you upload the log? We can\u0027t help you without log.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThe Logs\u003Cp\u003EThese are text files that the game spits out for debugging purposes as it runs; if something broke horribly in-game, there will be something in here about it. You should upload the entire log as a file (i.e. not to pastebin); you can use dropbox or an equivalent host to upload the file. Make sure the entire file gets uploaded; you may have to zip it first, as logs can be very long. Here is where you can find the log:\u003C/p\u003E\u003Cp\u003EWindows: KSP_win\\KSP_Data\\output_log.txt (32bit) or KSP_win64\\KSP_x64_Data\\output_log.txt (64bit)\u003C/p\u003E\u003Cp\u003EMac OS X: Open Console, on the left side of the window there is a menu that says \u0027files\u0027. Scroll down the list and find the Unity drop down, under Unity there will be Player.log ( Files\u0026gt;~/Library/Logs\u0026gt;Unity\u0026gt;Player.log )\u003C/p\u003E\u003Cp\u003ELinux: ~/.config/unity3d/Squad/Kerbal\\ Space\\ Program/Player.log\u003C/p\u003E\u003Cp\u003ENOTE: These logs are not the same as KSP.log, which lacks valuable data. Do not upload KSP.log; do upload output_log.txt / Player.log\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-21T12:42:14Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022http://www./download/pu9zjdq6yl8w9t7/KSP.log\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/pu9zjdq6yl8w9t7/KSP.log\u003C/a\u003E this is my ksp.log \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Eand the output_log.txt: \u003Ca href=\u0022http://www./download/tyfqu17l1bt73io/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/tyfqu17l1bt73io/output_log.txt\u003C/a\u003E sorry for not reading carefully. I was doing something else at that moment.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-21T12:53:14Z\u0022 title=\u002211/21/2014 12:53  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 21, 2014\u003C/time\u003E by crush3dice\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-22T10:48:18Z","Content":"\n\u003Cp\u003EOk i got the exception fixed by destroying the part with the defect docking port. (a populsion tank with 2 landing leggs and 2 docking ports). But that actually didnt improve the performance. So i just destroyed every ship once and looked if it got better and there was a smallish ship with 12 parts (1 fuel, tank 4 radial engines, 3 advanced grabbing units, 1 cone, one remotecontrolpart, a seat on top of it, 1 sas wheel and a battery) wich costed me 8 frames and i had two of them. So i destroyed both and i got 25 frames now wich actually is playable ^^. I still have no clue where the bottleneck is/was but atleast i can resume building my planetary station for now.\u003C/p\u003E\u003Cp\u003Eedit: ok it seems like the advanced grabbing unit is costing me massive amounts of frames. I made a ship with 13 grabbing units and 1 fuel tank an i have 10 frames on the ground without moving. I restarted ksp.exe and ran the 64bit version now and i actually hit 60 frames. Weird but i guess my problem is more or less solved eventhough my hardware didnt actually bottleneck the game...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-22T11:16:16Z\u0022 title=\u002211/22/2014 11:16  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 22, 2014\u003C/time\u003E by crush3dice\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2014-11-22T12:56:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022crush3dice\u0022 data-cite=\u0022crush3dice\u0022\u003E\u003Cdiv\u003Eedit: ok it seems like the advanced grabbing unit is costing me massive amounts of frames. I made a ship with 13 grabbing units and 1 fuel tank an i have 10 frames on the ground without moving. I restarted ksp.exe and ran the 64bit version now and i actually hit 60 frames. Weird but i guess my problem is more or less solved eventhough my hardware didnt actually bottleneck the game...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAdvanced Grabbing Units? That would do it. A while back I posted that very same bug that you are experiencing here. Not only do they lag physics, they lag \u003Cem\u003Eeverything\u003C/em\u003E when they are in a scene. Go into the VAB, add some structural part, and start adding AGUs. You by the time you get 30, you should be experiencing at least mild framerate reductions (With me, by the time I get 30, I have around 5 fps). In fact, I recommend not using the claw altogether until they get some of the bugs worked out. But 64 bit fixes it, you say? I\u0027ll have to look into it.\u003C/p\u003E\n"},{"CreatedByName":"crush3dice","CreatedById":128763,"CreatedDateTime":"2014-11-23T13:14:59Z","Content":"\n\u003Cp\u003ENo 64bit doesn\u0027t fix it. I just deleted every ship having one of the claws and then restartet it an ran ksp in 64 bit giving me 60 frames with the same scene. 64bits gives me another 10% more frames for some reason eventhough ksp.exe never uses more than 3.75gb ram.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-23T13:19:07Z\u0022 title=\u002211/23/2014 01:19  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 23, 2014\u003C/time\u003E by crush3dice\u003C/strong\u003E\n\u003C/span\u003E\n"}]}