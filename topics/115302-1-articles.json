{"TopicId":115302,"ForumId":29,"TopicTitle":"[ANSWERED] Something very unique for a particular game","CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T16:08:19Z","PageNum":1,"Articles":[{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T16:08:19Z","Content":"\n\u003Cp\u003EDoes anyone know something very unique for a particular game started in KSP? The uniqueness must satisfy the following:\u003C/p\u003E\u003Cp\u003E1. If I start a new game the value must remain the same through out this game. It shouldn\u0027t depend on settings etc.\u003C/p\u003E\u003Cp\u003E2. If I delete a game and start a new one with the same name and settings, the value must be different.\u003C/p\u003E\u003Cp\u003EFor now I\u0027ve found only one such value: the creation date of the game\u0027s save folder. But it is not very good because a user may back his game up, moving and recreating the folder. Additionally I\u0027ll have to mention everywhere \u0022in clear form\u0022 that my mod reads outside its folder not to steal something from a user\u0027s PC.\u003C/p\u003E\u003Cp\u003EMay be there\u0027s something accessible within KSP public API?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-09T15:52:59Z\u0022 title=\u002207/09/2015 03:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 9, 2015\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003Cbr\u003Eanswered\n\u003C/span\u003E\n"},{"CreatedByName":"Grumman","CreatedById":76014,"CreatedDateTime":"2015-07-07T16:14:44Z","Content":"\n\u003Cp\u003ESo you want a random seed? Wouldn\u0027t the easiest way be to just generate a random number when campaign loads your plugin for the first time, and then save that random number?\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T16:58:16Z","Content":"\n\u003Cp\u003EYes, it is a kind of random seed. Never thought of saving random number, may be that is solution. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-07T16:59:08Z","Content":"\n\u003Cp\u003ETry this :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System.IO;\u003Cbr\u003E\u003Cbr\u003E//.....\u003Cbr\u003E\u003Cbr\u003E[KSPAddon(KSPAddon.Startup.SpaceCentre, false)]\u003Cbr\u003E    public class SpaceCentreLoading : MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        int GameValue;\u003Cbr\u003E        string persistentFileName = \u0022test.txt\u0022; // full name of the unique file including extension. The file is stored in the save folder\u003Cbr\u003E        System.Random random = new System.Random();\u003Cbr\u003E        void Start()\u003Cbr\u003E        {\u003Cbr\u003E            if (File.Exists(\u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/\u0022 \u002B persistentFileName))\u003Cbr\u003E            {\u003Cbr\u003E                StreamReader sr = new StreamReader(\u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/\u0022 \u002B persistentFileName);\u003Cbr\u003E                GameValue = int.Parse(sr.ReadLine());\u003Cbr\u003E                sr.Close();\u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                int randomValue = random.Next();\u003Cbr\u003E                TextWriter tw = new StreamWriter(\u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/\u0022 \u002B persistentFileName);\u003Cbr\u003E                tw.Write(randomValue);\u003Cbr\u003E                tw.Close();\u003Cbr\u003E                GameValue = randomValue;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe unique value is stored in GameValue as an integer.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-07T17:02:36Z\u0022 title=\u002207/07/2015 05:02  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 7, 2015\u003C/time\u003E by simon56modder\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T17:21:58Z","Content":"\n\u003Cp\u003Esimon56modder, Thanks. But why not to store it in the save file by the means of persistence API? I\u0027ll have to save my mod\u0027s state anyway.\u003C/p\u003E\n"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-07T17:41:23Z","Content":"\n\u003Cp\u003EYou mean directly in the persistent.sfs file ?\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T18:08:33Z","Content":"\n\u003Cp\u003ENo, I mean save it via ScenarioModule or whatever way the ConfigNode values are put into persistent.sfs\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-07-07T18:14:43Z","Content":"\n\u003Cp\u003EAre you looking for something that already exists or to create your own?\u003C/p\u003E\u003Cp\u003EI think the resource system random seed might work for you.\u003C/p\u003E\u003Cp\u003EResourceScenario.Instance.gameSettings.Seed\u003C/p\u003E\u003Cp\u003EYou can ask Roverdude, but I think that value is independent of anything else and persists throughout a save file.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-07-07T19:02:58Z","Content":"\n\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPScenario(ScenarioCreationOptions.AddToAllGames, GameScenes.SPACECENTER, GameScenes.EDITOR, GameScenes.FLIGHT, GameScenes.TRACKSTATION)]\u003Cbr\u003Epublic class MySeedScenario : ScenarioModule\u003Cbr\u003E{\u003Cbr\u003E\t[KSPField(isPersistant = true)]\u003Cbr\u003E\tpublic int seed = 0;\u003Cbr\u003E\u003Cbr\u003E    public Start()\u003Cbr\u003E    {\u003Cbr\u003E\t\tif (seed == 0)\u003Cbr\u003E\t\t\tseed = something;\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-08T09:14:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EAre you looking for something that already exists or to create your own?\u003Cp\u003EI think the resource system random seed might work for you.\u003C/p\u003E\u003Cp\u003EResourceScenario.Instance.gameSettings.Seed\u003C/p\u003E\u003Cp\u003EYou can ask Roverdude, but I think that value is independent of anything else and persists throughout a save file.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m looking for anything that might satisfy my requirements. I\u0027ll try that. Thanks.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E@sarbian\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThanks for the script. What are the params in [KSPScenario(ScenarioCreationOptions.AddToAllGames, GameScenes.SPACECENTER, GameScenes.EDITOR, GameScenes.FLIGHT, GameScenes.TRACKSTATION)] ?\u003C/p\u003E\n"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-08T09:22:56Z","Content":"\n\u003Cp\u003EAPI for KSPScenario : \u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html#aa3b1ced9f05a99eb9bc01046acfeecc1\u0022 rel=\u0022external nofollow\u0022\u003EKSPScenario\u003C/a\u003E (\u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/_scenario_creation_options_8cs.html#aef569c179851754ae041daaaf66454e7\u0022 rel=\u0022external nofollow\u0022\u003EScenarioCreationOptions\u003C/a\u003E \u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html#a57b699818a8097a2e4043143de1565a8\u0022 rel=\u0022external nofollow\u0022\u003EcreateOptions\u003C/a\u003E, params \u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/_game_scenes_8cs.html#a0687e907db3af3681f90377d69f32090\u0022 rel=\u0022external nofollow\u0022\u003EGameScenes\u003C/a\u003E[] \u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html#a32bc177e6134843731dcd976668ffc52\u0022 rel=\u0022external nofollow\u0022\u003EtgtScenes\u003C/a\u003E)\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-09T15:51:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EAre you looking for something that already exists or to create your own?\u003Cp\u003EI think the resource system random seed might work for you.\u003C/p\u003E\u003Cp\u003EResourceScenario.Instance.gameSettings.Seed\u003C/p\u003E\u003Cp\u003EYou can ask Roverdude, but I think that value is independent of anything else and persists throughout a save file.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve tested the method you\u0027ve advised and that\u0027s exactly what I\u0027ve been looking for.\u003C/p\u003E\n"}]}