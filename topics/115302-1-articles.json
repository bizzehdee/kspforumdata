{"TopicId":115302,"ForumId":29,"TopicTitle":"[ANSWERED] Something very unique for a particular game","CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T16:08:19Z","PageNum":1,"Articles":[{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T16:08:19Z","Content":"Does anyone know something very unique for a particular game started in KSP? The uniqueness must satisfy the following:\n\n1. If I start a new game the value must remain the same through out this game. It shouldn\u0027t depend on settings etc.\n\n2. If I delete a game and start a new one with the same name and settings, the value must be different.\n\nFor now I\u0027ve found only one such value: the creation date of the game\u0027s save folder. But it is not very good because a user may back his game up, moving and recreating the folder. Additionally I\u0027ll have to mention everywhere \u0022in clear form\u0022 that my mod reads outside its folder not to steal something from a user\u0027s PC.\n\nMay be there\u0027s something accessible within KSP public API?\n\n**Edited \u003Ctime datetime=\u00222015-07-09T15:52:59Z\u0022 title=\u002207/09/2015 03:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 9, 2015\u003C/time\u003E by Ser**\n  \nanswered"},{"CreatedByName":"Grumman","CreatedById":76014,"CreatedDateTime":"2015-07-07T16:14:44Z","Content":"So you want a random seed? Wouldn\u0027t the easiest way be to just generate a random number when campaign loads your plugin for the first time, and then save that random number?"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T16:58:16Z","Content":"Yes, it is a kind of random seed. Never thought of saving random number, may be that is solution. Thanks."},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-07T16:59:08Z","Content":"Try this :\n\n    using System.IO;//.....[KSPAddon(KSPAddon.Startup.SpaceCentre, false)]    public class SpaceCentreLoading : MonoBehaviour    {        int GameValue;        string persistentFileName = \u0022test.txt\u0022; // full name of the unique file including extension. The file is stored in the save folder        System.Random random = new System.Random();        void Start()        {            if (File.Exists(\u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/\u0022 \u002B persistentFileName))            {                StreamReader sr = new StreamReader(\u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/\u0022 \u002B persistentFileName);                GameValue = int.Parse(sr.ReadLine());                sr.Close();            }            else            {                int randomValue = random.Next();                TextWriter tw = new StreamWriter(\u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/\u0022 \u002B persistentFileName);                tw.Write(randomValue);                tw.Close();                GameValue = randomValue;            }        }    }\n\nThe unique value is stored in GameValue as an integer.\n\n**Edited \u003Ctime datetime=\u00222015-07-07T17:02:36Z\u0022 title=\u002207/07/2015 05:02  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 7, 2015\u003C/time\u003E by simon56modder**"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T17:21:58Z","Content":"simon56modder, Thanks. But why not to store it in the save file by the means of persistence API? I\u0027ll have to save my mod\u0027s state anyway."},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-07T17:41:23Z","Content":"You mean directly in the persistent.sfs file ?"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-07T18:08:33Z","Content":"No, I mean save it via ScenarioModule or whatever way the ConfigNode values are put into persistent.sfs"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-07-07T18:14:43Z","Content":"Are you looking for something that already exists or to create your own?\n\nI think the resource system random seed might work for you.\n\nResourceScenario.Instance.gameSettings.Seed\n\nYou can ask Roverdude, but I think that value is independent of anything else and persists throughout a save file."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-07-07T19:02:58Z","Content":"[KSPScenario(ScenarioCreationOptions.AddToAllGames, GameScenes.SPACECENTER, GameScenes.EDITOR, GameScenes.FLIGHT, GameScenes.TRACKSTATION)]public class MySeedScenario : ScenarioModule{\t[KSPField(isPersistant = true)]\tpublic int seed = 0;    public Start()    {\t\tif (seed == 0)\t\t\tseed = something;    }}"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-08T09:14:37Z","Content":"\u003E \n\u003E Are you looking for something that already exists or to create your own?\n\u003E I think the resource system random seed might work for you.\n\u003E \n\u003E ResourceScenario.Instance.gameSettings.Seed\n\u003E \n\u003E You can ask Roverdude, but I think that value is independent of anything else and persists throughout a save file.\n\nI\u0027m looking for anything that might satisfy my requirements. I\u0027ll try that. Thanks.\n\n**@sarbian**\n\nThanks for the script. What are the params in [KSPScenario(ScenarioCreationOptions.AddToAllGames, GameScenes.SPACECENTER, GameScenes.EDITOR, GameScenes.FLIGHT, GameScenes.TRACKSTATION)] ?"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-08T09:22:56Z","Content":"API for KSPScenario : [http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html](http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html)\n\n[KSPScenario](http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html#aa3b1ced9f05a99eb9bc01046acfeecc1) ([ScenarioCreationOptions](http://anatid.github.io/XML-Documentation-for-the-KSP-API/_scenario_creation_options_8cs.html#aef569c179851754ae041daaaf66454e7) [createOptions](http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html#a57b699818a8097a2e4043143de1565a8), params [GameScenes](http://anatid.github.io/XML-Documentation-for-the-KSP-API/_game_scenes_8cs.html#a0687e907db3af3681f90377d69f32090)[] [tgtScenes](http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_k_s_p_scenario.html#a32bc177e6134843731dcd976668ffc52))"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-09T15:51:17Z","Content":"\u003E \n\u003E Are you looking for something that already exists or to create your own?\n\u003E I think the resource system random seed might work for you.\n\u003E \n\u003E ResourceScenario.Instance.gameSettings.Seed\n\u003E \n\u003E You can ask Roverdude, but I think that value is independent of anything else and persists throughout a save file.\n\nI\u0027ve tested the method you\u0027ve advised and that\u0027s exactly what I\u0027ve been looking for."}]}