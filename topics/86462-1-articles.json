{"TopicId":86462,"ForumId":36,"TopicTitle":"Unofficial 0.25 modding info","CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2014-10-08T10:11:49Z","PageNum":1,"Articles":[{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2014-10-08T10:11:49Z","Content":"\n\u003Cp\u003EI took a look at some of the modding-related changes in 0.25 and thought I\u0027d share what I found. \u003C/p\u003E\u003Cp\u003E1. First off, here are some things mentioned in the changelog that might be of interest to modders:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E* GameDatabase code tweaked to allow modders to write their own asset loaders.\u003Cp\u003E* Added GameEvents.OnCrewTransferred, fired from CrewTransfer and EVAs leaving and boarding\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E2. Also:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E* Upgraded all parts using deprecated Winglet subclass to use ModuleLiftingSurface instead.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESome of the new wing parts have the Winglet part module names, so that\u0027s a bit weird. Either its an oversight or ModuleLiftingSurface is only designed for adding lift to lifting body shapes and not wings. Anyway this how the new ModularLiftingSurface works (comments are mine):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLiftingSurface\u003Cbr\u003E\u003Cbr\u003E\tdeflectionLiftCoeff = 0.6 //How much lift the surface generates\u003Cbr\u003E\tdragAtMaxAoA = 0.1 //The drag at maximum angle of attack (AoA is the climbing/descent angle)\u003Cbr\u003E\tdragAtMinAoA = 0.03 //The drag at minimum angle of attack\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E3. The improvements made to ModuleAnimateGeneric for the cargo bay seem to be all on the inside, so there doesn\u0027t seem to be a need to add anything to it to make it function \u00C3\u0192\u00C2\u00A0 la the Firespitter animation that SpaceplanePlus used.\u003C/p\u003E\u003Cp\u003E4. Departments are like the categories for strategies, symbolized by a certain Kerbal. This file is located in GameData/Squad/Strategies. This here\u0027s an example for Mortimer and the finances department (comments are mine):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESTRATEGY_DEPARTMENT\u003Cbr\u003E{\u003Cbr\u003E  name = Finances\u003Cbr\u003E  desc = He\u0027s an accountant, called Mortimer. He doesn\u0027t have many friends, but he likes things to be under control and arranged in right angles. This job is pretty stressful for him. // Description of the department\u003Cbr\u003E  color = 254 250 135 // The color in RGB space for the text of the headName and the name\u003Cbr\u003E  avatar = Strategy_Mortimer // Maybe the background or the internal name of the animated Kerbal figure in the department picture. Not sure.\u003Cbr\u003E  headName = Mortimer Kerman // Name of the department\u0027s head Kerbal\u003Cbr\u003E  headImage = MORTIMER_KERMAN // Maybe the background or the internal name of the animated Kerbal figure in the department picture. Not sure.\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E5. Within departments are strategies. They are located in the same folder as the departments. These are laid out as follows (comments are mine):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESTRATEGY\u003Cbr\u003E{\u003Cbr\u003E  name = AppreciationCampaignCfg //Internal name\u003Cbr\u003E\u003Cbr\u003E  title = Appreciation Campaign //In-game display title for this strategy\u003Cbr\u003E  desc = We could definitely improve our image by putting some effort into reminding Kerbals everywhere of just how great the Space Program is. Advertisement space isn\u0027t free, however. //Strategy description\u003Cbr\u003E  department = Public Relations //Department that this strategy belongs to\u003Cbr\u003E  icon = Squad/Strategies/Icons/AppreciationCampaign //Relative path to the strategies icon. File type is .png and dimensions are 50x50\u003Cbr\u003E\u003Cbr\u003E  groupTag = Basic,A // The first string (you can call it whatever you want) disables the other strategies after selecting two of them. So if you pick two \u0027Basic\u0027 strategy, the third (or more) Basic can\u0027t be used anymore (until you remove one of the enabled Basic strategies). The second string is similar, but disables the other strategies after selecting only one. So enabling one \u0027A\u0027 means the others can\u0027t be enabled until you disable the first one.\u003Cbr\u003E\u003Cbr\u003E  minLeastDuration = 60 //Not sure. Needs to be researched.\u003Cbr\u003E  maxLeastDuration = 100 //Not sure. Needs to be researched.\u003Cbr\u003E  minLongestDuration = 1200 //Not sure. Needs to be researched.\u003Cbr\u003E  maxLongestDuration = 1600 //Not sure. Needs to be researched.\u003Cbr\u003E\u003Cbr\u003E  requiredReputationMin = -500 //Lower limit on reputation needed to enable this strategy\u003Cbr\u003E  requiredReputationMax = 750 //Upper limit on reputation needed to enable this strategy\u003Cbr\u003E\u003Cbr\u003E  initialCostFundsMin = 8000.0 //Lower limit on funds needed to enable this strategy. The upper and lower limits are there because you commit between 5-100% to the strategy.\u003Cbr\u003E  initialCostFundsMax = 160000.0  //Upper limit on funds needed to enable this strategy\u003Cbr\u003E  initialCostReputation = 0.0 //Initial reputation cost\u003Cbr\u003E  initialCostScience = 0.0 //Initial science cost\u003Cbr\u003E\u003Cbr\u003E  hasFactorSlider = True //If true it uses the slider on the right of the strategy screen. If False, it\u0027s disabled.\u003Cbr\u003E  factorSliderDefault = 0.05 //The percentage where it starts. 0.05 means 5%.\u003Cbr\u003E  factorSliderSteps = 20 //How many steps you can move the slider. 100/20 means 5% per step.\u003Cbr\u003E\u003Cbr\u003E  EFFECT\u003Cbr\u003E  {\u003Cbr\u003E    SEE BELOW\u003Cbr\u003E  }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe effects or the stuff that happens when you choose a strategy come in two types. The first is the Currency Converter:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  EFFECT\u003Cbr\u003E  {\u003Cbr\u003E    name = CurrencyConverter //The CurrencyConverter takes funds, science or reputation and converts it into another of those three\u003Cbr\u003E    input = Funds //The type of input. See section on currencies for more info\u003Cbr\u003E\toutput = Reputation //The type of output. Same possibilities as with the inputs.\u003Cbr\u003E\tminShare = 0.0 //The minimum share of the input. If you have factorSliderDefault above 0, this means that the minShare starts there, so that percentages below it aren\u0027t selectable.\u003Cbr\u003E\tmaxShare = 1.0 //The maximum share of the input. 1.0 is 100%.\u003Cbr\u003E\u003Cbr\u003E\tminRate = 0.041667 //Not sure. Needs to be researched.\u003Cbr\u003E\tmaxRate = 0.0520 //Not sure. Needs to be researched.\u003Cbr\u003E\u003Cbr\u003E\tAffectReasons = ContractReward, ContractAdvance //At these points in the game the currency converter is activated\u003Cbr\u003E\u003Cbr\u003E\teffectDescription = Income //This is put after the effects numbers, to make it a sentence instead of just numbers\u003Cbr\u003E  }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe second is the Currency Operation:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  EFFECT\u003Cbr\u003E  {\u003Cbr\u003E    name = CurrencyOperation \u003Cbr\u003E    currency = Funds  //Same as above\u003Cbr\u003E\toperation = Multiply //This can do a mathematical function on an input. See section on functions for more info\u003Cbr\u003E\u003Cbr\u003E\teffectDescription = to Launch Costs  //Same as above\u003Cbr\u003E\u003Cbr\u003E\tminValue = 1.1 //The lower percentage for the value modification\u003Cbr\u003E\tmaxValue = 1.0//The upper percentage for the value modification. 1.15 translates to a 15% increase.\u003Cbr\u003E\u003Cbr\u003E\tAffectReasons = VesselRollout //Same as above\u003Cbr\u003E  }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe third is the ValueModifier.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  EFFECT\u003Cbr\u003E  {\u003Cbr\u003E    name = ValueModifier\u003Cbr\u003E\u003Cbr\u003E\tvalueId = VesselRecoveryFactor //The value that needs to be modified. See section on valueIds for more info.\u003Cbr\u003E\u003Cbr\u003E\teffectDescription = to Vessel Recovery Factor //Same as above\u003Cbr\u003E\u003Cbr\u003E\tminValue = 1.05 //Same as above\u003Cbr\u003E\tmaxValue = 1.15 //Same as above\u003Cbr\u003E\u003Cbr\u003E  }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E6. Values for use in strategies:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ECurrencies\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E*Funds\u003C/p\u003E\u003Cp\u003E*Science\u003C/p\u003E\u003Cp\u003E*Reputation\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EValueIds\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E*VesselRecoveryFactor = How much overall money you get back from recovering a vessel. This is further influence by distance from KSC, which you can\u0027t change with this\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFunctions\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E*Multiply = Number above 1 multiply, numbers below 1 and above 0 divide\u003C/p\u003E\u003Cp\u003E*Add = A positive number adds and a negative number subtracts\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EAffectReasons\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E*ContractReward = On accomplishing a contract\u003C/p\u003E\u003Cp\u003E*ContractAdvance = On accepting a contract\u003C/p\u003E\u003Cp\u003E*ScienceTransmission = On transmission of science\u003C/p\u003E\u003Cp\u003E*VesselRecovery = On recovering a vessel\u003C/p\u003E\u003Cp\u003E*RnDPartPurchase = On purchasing a part in a tech node that you\u0027ve unlocked with science\u003C/p\u003E\u003Cp\u003E*VesselRollout = On launching a rocket/spaceplane\u003C/p\u003E\u003Cp\u003EI\u0027ll edit as I discover more. If you have additions, critiques, etc. please comment below.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-15T22:51:30Z\u0022 title=\u002210/15/2014 10:51  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 15, 2014\u003C/time\u003E by CaptRobau\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-10-08T14:31:49Z","Content":"\n\u003Cp\u003Every cool. I have\u0027t noticed the new moduleliftingsurface yet. will have to take a closer look at it.\u003C/p\u003E\u003Cp\u003EModuleAnimateGeneric can work with multiple animations now and can be triggered in VAB/SPH as well as EVA. settings all appears still the same.\u003C/p\u003E\u003Cp\u003Eseems like quite a lot of things have been shifted from Assembly-CSharp-firstpass to Assembly-CSharp. if a module is referencing something from firstpass it will probably break in 0.25.\u003C/p\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2014-10-08T15:45:14Z","Content":"\n\u003Cp\u003ECare to elaborate what the difference is? I\u0027m not a coder so it just sounds like mumbo jumbo to me.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-10-08T16:00:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CaptRobau\u0022 data-cite=\u0022CaptRobau\u0022\u003E\u003Cdiv\u003ECare to elaborate what the difference is? I\u0027m not a coder so it just sounds like mumbo jumbo to me.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not a coder either. I just ran into this while checking compatibility of RPM 18.2. a few of RPM\u0027s PROP modules rely on a KSP component \u0022SpriteText\u0022 which was in Assembly-CSharp-firstpass.dll in 24.2. In .25; \u0022SpriteText\u0022 has been moved over to Assembly-CSharp; so mods that referenced KSP components in Assembly-CSharp-firstpass from .24.2 or earlier will not be able to find those references. There are many others, but I don\u0027t know which Mod uses them if any.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-08T16:11:37Z\u0022 title=\u002210/08/2014 04:11  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 8, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2014-10-08T22:50:27Z","Content":"\n\u003Cp\u003EAdded explanations about Department and Strategy editing. Not complete, but it\u0027s a start. Have fun modding!\u003C/p\u003E\n"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2014-10-09T09:25:47Z","Content":"\n\u003Cp\u003ENice, this should get sticky! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-10-10T06:32:23Z","Content":"\n\u003Cp\u003E5)\u003C/p\u003E\u003Cp\u003EThe group tag line is used atleast partially for creating mutually exclusive strategies. I have not tested if all the tags have to match, or if there is any significance to the basic/misc wording.\u003C/p\u003E\u003Cp\u003ESquad have used the effect CurrencyOperation (notably different from conversion) for the contracts from the operations division which I did not see noted.\u003C/p\u003E\u003Cp\u003E6)\u003C/p\u003E\u003Cp\u003EDivide and subtract operations are not really logical inclusions as it is only duplicating functionality (adding a negative value, multiplying by a value less than 1)\u003C/p\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2014-10-10T10:51:59Z","Content":"\n\u003Cp\u003EThese are noted.\u003C/p\u003E\n"},{"CreatedByName":"Athlonic","CreatedById":57996,"CreatedDateTime":"2014-10-10T11:36:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003E...\u003Cp\u003Eseems like quite a lot of things have been shifted from Assembly-CSharp-firstpass to Assembly-CSharp. if a module is referencing something from firstpass it will probably break in 0.25.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually it shouldn\u0027t matters and break anything as we all reference Assembly-CSharp already, so if anything were moved here it will still be available.\u003C/p\u003E\u003Cp\u003EAssembly-CSharp-firstpass was only needed when using the ApplicationLauncher toolbar (animated sprite management).\u003C/p\u003E\u003Cp\u003EI think Ram0n said in a devblog that with v0.25 we don\u0027t need to reference Assembly-CSharp-firstpass anymore because they moved a lot of these functions to Assembly-CSharp.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2014-10-15T22:51:43Z","Content":"\n\u003Cp\u003EWorked out the grouptag:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  groupTag = Basic,A // The first string (you can call it whatever you want) disables the other strategies after selecting two of them. So if you pick two \u0027Basic\u0027 strategy, the third (or more) Basic can\u0027t be used anymore (until you remove one of the enabled Basic strategies). The second string is similar, but disables the other strategies after selecting only one. So enabling one \u0027A\u0027 means the others can\u0027t be enabled until you disable the first one.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThanks to Crzyrndm for getting me on the right road with understanding that feature.\u003C/p\u003E\n"}]}