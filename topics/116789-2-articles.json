{"TopicId":116789,"ForumId":34,"TopicTitle":"[1.3, 1.4, 1.5, 1.6, 1.7, 1.8\u002B] Contract Pack: CommNet Relays 2.1.0 (2019 Jan 13)","CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-07-25T02:40:23Z","PageNum":2,"Articles":[{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2016-01-21T05:43:55Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Kerbas\\_ad\\_astra said:\n\u003E \n\u003E \n\u003E Grumble, kids these days an\u0027 their see-cans...bah, humbug!  Back in my day, we had ta\u0027 download and install our mods in 1.44 MB chunks at 300 baud, uphill both ways, and we liked it!\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I don\u0027t use it myself (I tinker too much with deleting parts I don\u0027t use, and I use a bunch of addons which predate it), so I\u0027m not wild about \u0022supporting\u0022 it.  On the other hand, the last time (the only time) someone else made a config for one of my mods, they goofed up the dependencies and recommendations.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E In any case, there\u0027s not enough time on my plate to deal with it just yet.  Big push coming up in the real solar system.  I\u0027m glad you enjoy it in its current CKAN-less state for the time being...\n\u003E \n\nSince you are doing things the right way (using KSP-AVC and releasing via GitHub), you can practically just copy one of my .netkan files (like [this one](https://github.com/KSP-CKAN/NetKAN/blob/master/NetKAN/ContractConfigurator-FieldResearch.netkan)), and change the appropriate links and such (you\u0027ll need to send it as a pull request to the NetKAN repository, but they accept those pretty quickly). Once you have it set up that way CKAN will read the .version files from your GitHub releases automatically (ie. you will never have to worry about it again).  Oh and I\u0027d also suggest updating the KSP-AVC file to have a max KSP version of 1.99.99 - giving you even less to worry about with CKAN (Contract Configurator will insulate you from 99% of the KSP version-centric issues).\n\n**Edited \u003Ctime datetime=\u00222016-01-21T05:44:30Z\u0022 title=\u002201/21/2016 05:44  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 21, 2016\u003C/time\u003E by nightingale**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-01-22T01:20:49Z","Content":"Since I\u0027m pretty sure the upcoming antenna relay system will fall within the 1% that I\u0027ll have to take on the chin and adapt to, I will leave the max version where it is.  ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Thanks for the heads-up on Netkan.\n\n**Edited \u003Ctime datetime=\u00222016-01-22T01:21:40Z\u0022 title=\u002201/22/2016 01:21  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 22, 2016\u003C/time\u003E by Kerbas\\_ad\\_astra**"},{"CreatedByName":"Buster Charlie","CreatedById":157768,"CreatedDateTime":"2016-02-20T13:59:56Z","Content":"Any chance of a spacedock/Ckan release?"},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2016-05-03T16:16:58Z","Content":"Hi, I\u0027m playing with CC, AntennaRange Relays, and a quite a few other mods, and CC is throwing some errors. Here\u0027s the log:\n\n[https://drive.google.com/open?id=0B6ZYgATQfNhBa2FGdWRmdHR6UVk](https://drive.google.com/open?id=0B6ZYgATQfNhBa2FGdWRmdHR6UVk)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-05-03T17:55:46Z","Content":"The problem is that the contract includes the Mk-V Comm-Lab (part name: MKV\\_CommPak) as an acceptable antenna for the relay, but your system doesn\u0027t have the part installed, so the exception is thrown.  From your log, it seems you have MKS Lite installed, which comes with the KolonyTools DLL which fools my contract patch into adding the Mk-V Comm-Lab when the part doesn\u0027t exist (MKS Lite comes with an identical-looking and identical-behaving part whose internal name is different).\n\nSince both MKS and MKS Lite come with the KolonyTools DLL and live in the UmbraSpaceIndustries folder in GameData, Module Manager can\u0027t tell which one is included, so I\u0027ll remove the CommPak antenna from the list.  (Arguably, it wasn\u0027t really appropriate to include it in the first place, since it\u0027s not meant for satellites.)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-05-03T18:20:56Z","Content":"**[Version 1.3 is out!](https://github.com/Kerbas-ad-astra/AntennaRange-Relays/releases/tag/v1.3)**\n\n- Moved High Gain Antenna from its own patch, now that the Asteroid Day probe parts are folded into stock.\n    - Because this will cause errors on pre-1.1 installs without Asteroid Day, **this and later versions are no longer compatible with KSP 1.0.x.**\n- Removed the USI patch, since it was causing exceptions for MKS Lite users.\n- Compatible through KSP 1.1.2."},{"CreatedByName":"ioresult","CreatedById":117573,"CreatedDateTime":"2016-05-10T13:49:27Z","Content":"Hello,\n\nthis contract pack seems to be causing interference with Kopernicus.\n\nHere\u0027s a link to the forum post I... posted a few minutes ago about that:\n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139457-112-64bits-game-stutter-with-kopernicus-and-antenna-range-relay-contract-pack/\u0026do=embed\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2016-05-10T16:24:36Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, ioresult said:\n\u003E \n\u003E \n\u003E Hello,\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E this contract pack seems to be causing interference with Kopernicus.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Here\u0027s a link to the forum post I... posted a few minutes ago about that:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139457-112-64bits-game-stutter-with-kopernicus-and-antenna-range-relay-contract-pack/\u0026do=embed\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nIs it okay without Kopernicus?  You mention it causes interference, but didn\u0027t say anything about trying it without Kopernicus."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-05-10T18:05:28Z","Content":"I\u0027m not seeing anything in the logs that suggests anything is wrong, and I haven\u0027t noticed any stuttering on my own install (which includes Kopernicus, AntennaRange Relays, and lots more besides).  If this hasn\u0027t been sorted out by this weekend, I can try it out on my test install to see if there\u0027s any performance degradation.\n\nThe expressions for figuring out which planets to offer contracts for are gnarly-looking (they certainly took me some time to work out), and I could believe that they\u0027re computationally expensive, but they shouldn\u0027t be getting called very frequently, and they should be at their fastest at the beginning of a save, as they all require achieving orbit before they\u0027ll be offered.  Nightingale, would you recommend that I simplify them?  I could cut out a couple of checks for the contract if necessary (just count ships in the SOI of each body, as opposed to also checking if they\u0027re in orbit at the right altitude)."},{"CreatedByName":"ioresult","CreatedById":117573,"CreatedDateTime":"2016-05-10T20:44:56Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, nightingale said:\n\u003E \n\u003E \n\u003E Is it okay without Kopernicus?  You mention it causes interference, but didn\u0027t say anything about trying it without Kopernicus.\n\u003E \n\nI made a few other tests, and Antenna Range Relays by itself seems ok. But it seems to get more and more computing intensive the more mods are installed.\n\nThe mods I list is the minimal install on my computer that start producing stuttering. And I agree, the logs don\u0027t say much.\n\nI was assuming interference, but it may be just that the Antenna Relays pack runs a lot of checks as Kerbas\\_ad\\_astra says.\n\nMaybe I should install that mod that examines system resources while running?"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2016-05-10T23:16:23Z","Content":"[@Kerbas_ad_astra](https://forum.kerbalspaceprogram.com/index.php?/profile/126593-kerbas_ad_astra/) - Oh yeah, took a peek and some of those expressions are pretty nasty.  When Contract Configurator is generating a contract, the minimum \u0022step\u0022 it can do is to run a single expression in a frame.  So those expressions can make it perform pretty poorly (and I\u0027m guessing the additional planet packs are making it that much worse in this case).\n\nIn general, you can break the expressions up into multiple expressions to allow it to work over several frames (look at Field Research for an example of that).  There\u0027s some specific things you can do in some of your expressions too.  Let\u0027s take a look at an example:\n\n    \t\ttargetBody1 = HomeWorld().Children().Where(b =\u003E (AllVessels().Where(v =\u003E (v.CelestialBody() == b) \u0026\u0026 (v.IsOrbiting()) \u0026\u0026 (v.Altitude() \u003C @/maxApoapsis)).Count() \u003C 5)   ).Random()\n\nSo far all moons of the homeworld, this expression will look at all vessels (which for Kerbin already means you need to look at each vessel twice).  So I\u0027d be inclined to switch this around a bit:\n\n    DATA\n    {\n        type = List\n        validBodies = HomeWorld().Children()\n        \n    }\n    DATA\n    {\n        type = List\n        bodyVessels = AllVessels().Where(v =\u003E @validBodies.Contains(v.CelestialBody()))\n        orbitingVessels = @bodyVessels.Where(v =\u003E v.IsOrbiting())\n        validVessels = @bodyVessels.Where(v =\u003E v.Altitude() \u003C @/maxApoapsis)\n    }\n    DATA\n    {\n        type = CelestialBody\n        targetBody1 = @validBodies.Where(b =\u003E (@validVessels.Where(v =\u003E (v.CelestialBody() == b)).Count() \u003C 5)).Random()\n    }\n\nSomething like that is more expensive overall, but would hopefully be less of a generation impact on the player.  If there\u0027s some new expression methods/functions that you\u0027d like for performance improvements, just let me know.  Depending on how you end up doing it, something like CelestialBody.Vessels() (get all the vessels for a body) could improve what you\u0027re doing a fair bit, as reducing the number of things to look at in a Where() expression can also be a significant performance boost.  I also have the ability to make methods specific to the List\u003Cvessel\u003E, so I could do something that allows AllVessels().WhereOrbiting(@CelestialBody).  But I\u0027m not entirely convinced that\u0027s a direction I want to go or not.\n\u003C/vessel\u003E"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-05-13T06:07:24Z","Content":"Dividing up the planet- and vessel-picking logic certainly helped me find a couple of goofs in my contract logic, so thanks for the suggestion!\n\n[@ioresult](https://forum.kerbalspaceprogram.com/index.php?/profile/117573-ioresult/), I\u0027ve made the changes per [@nightingale](https://forum.kerbalspaceprogram.com/index.php?/profile/119307-nightingale/)\u0027s suggestion.  I\u0027m going to hold off on release until I\u0027ve tested them properly in a career save, but they load correctly, and you\u0027ve seen a performance impact before they should be offered anyway.  You can grab the master copy from **[the repo](https://github.com/Kerbas-ad-astra/AntennaRange-Relays)** (via the \u0022Download ZIP\u0022 button) and see if the performance issue is resolved."},{"CreatedByName":"ioresult","CreatedById":117573,"CreatedDateTime":"2016-05-13T17:32:29Z","Content":"\u003E \n\u003E \n\u003E 11 hours ago, Kerbas\\_ad\\_astra said:\n\u003E \n\u003E \n\u003E Dividing up the planet- and vessel-picking logic certainly helped me find a couple of goofs in my contract logic, so thanks for the suggestion!\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [@ioresult](https://forum.kerbalspaceprogram.com/index.php?/profile/117573-ioresult/), I\u0027ve made the changes per [@nightingale](https://forum.kerbalspaceprogram.com/index.php?/profile/119307-nightingale/)\u0027s suggestion.  I\u0027m going to hold off on release until I\u0027ve tested them properly in a career save, but they load correctly, and you\u0027ve seen a performance impact before they should be offered anyway.  You can grab the master copy from **[the repo](https://github.com/Kerbas-ad-astra/AntennaRange-Relays)** (via the \u0022Download ZIP\u0022 button) and see if the performance issue is resolved.\n\u003E \n\nWow [@Kerbas_ad_astra](https://forum.kerbalspaceprogram.com/index.php?/profile/126593-kerbas_ad_astra/), I\u0027ve added your master copy to my full list of mods and there is no discernible change in performance. Thanks. I\u0027m looking forward to putting up relay satellites around these outer planets now!"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-06-26T13:20:24Z","Content":"**[Version 1.3.1](https://github.com/Kerbas-ad-astra/AntennaRange-Relays/releases/tag/v1.3.1)** \u0022Expression Expansion\u0022 is here!\n\n- Refactored targetbody expressions to reduce calculations-per-frame when contracts are generated.\n- Compatible through KSP 1.1.3."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-07-23T23:47:00Z","Content":"**[Version 1.4](https://github.com/Kerbas-ad-astra/AntennaRange-Relays/releases/tag/v1.4)** \u0022Mission Control\u0022 is here!\n\n- Changes to support Contract Configurator\u0027s 1.15.3 update.\n    - Because this depends on variables introduced in CC 1.15.3, **this and later versions are no longer compatible with KSP 1.0.0-2.**\n- Contracts are broken out into individual cfg files (I got tired of scrolling all over the place when editing...)\n- The license is changed to the GPL v3 (or later)."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-09-17T03:09:09Z","Content":"AntennaRange itself is largely superseded by the stock CommNet system coming in 1.2, but there doesn\u0027t seem to be a set of contracts specifically funding relay deployment, so this contract pack will continue once 1.2 is fully released and the final balance is set.  Orbit requirements may shift, and obviously the required antenna types will change to specify the new relays, and there will eventually be patches for mod antennas which identify themselves as relays."},{"CreatedByName":"Kaa253","CreatedById":68628,"CreatedDateTime":"2016-11-01T10:57:57Z","Content":"\u003E \n\u003E \n\u003E On 17/09/2016 at 1:09 PM, Kerbas\\_ad\\_astra said:\n\u003E \n\u003E \n\u003E AntennaRange itself is largely superseded by the stock CommNet system coming in 1.2, but there doesn\u0027t seem to be a set of contracts specifically funding relay deployment, so this contract pack will continue once 1.2 is fully released and the final balance is set.  Orbit requirements may shift, and obviously the required antenna types will change to specify the new relays, and there will eventually be patches for mod antennas which identify themselves as relays.\n\u003E \n\nI would dearly love to see this and including the antennas from [@akron](https://forum.kerbalspaceprogram.com/index.php?/profile/116554-akron/)\u0027s [Coatl Aerospace Probes Plus](https://forum.kerbalspaceprogram.com/index.php?/topic/131145-wip-coatl-aerospace-probesplus-dev-thread-v0142-beta-102316/\u0026page=1) would be awesome and a scalable distance factor or similar to accommodate mods such as [OPM](https://forum.kerbalspaceprogram.com/index.php?/topic/93999-112-outer-planets-mod-20-complete-overhaul-better-terrain-nicer-terrain-textures-improved-scatter-etc-21-may/). I am not asking for much am I... ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-11-02T19:09:20Z","Content":"Now that AntennaRange\u0027s capabilities are essentially stock, it will be much easier to add patches for mod parts.  (I mean, they were easy to add back then, but now, as mods update I can know for certain which antennas will be suitable for every player, as opposed to limiting patches to mods that shipped native AntennaRange patches as I did in the past.)\n\nAlso, OPM and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E don\u0027t yet ship with antenna range patches, but when they do, I will include patches here to adapt these contracts."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-11-06T00:02:15Z","Content":"Thinking further, it doesn\u0027t really matter what kinds of antennas are used -- the only thing that matters in the end is that there are enough relay antennas with the combined power to reach the homeworld from whatever body.  KSP already does the antenna-combining calculations itself, and helpfully reports the results in its API.  I\u0027m working on implementing some methods for Contract Configurator to read those APIs, so I can dispense with the part-centered approach and become compatible with all antennas from every mod without any extra patches.\n\nThat\u0027s a pretty serious change, one that I don\u0027t feel comfortable calling \u0022AntennaRange Relays 1.4\u0022 -- it would be version 2.0, since I don\u0027t think I can promise perfect save compatibility.  There\u0027s also the matter that calling these contracts \u0022AntennaRangeAnything\u0022 doesn\u0027t really make sense in the absence of AntennaRange, but if I\u0027m not trying to remain save-compatible, I might as well change the names of everything to be more sensible going forward.\n\nAntennaRange Relays will give way to CommNet Relays.  This change is requiring extra time and testing before release, but it will be more robust going forward.\n\n**Edited \u003Ctime datetime=\u00222016-11-06T00:02:42Z\u0022 title=\u002211/06/2016 12:02  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 6, 2016\u003C/time\u003E by Kerbas\\_ad\\_astra**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2016-12-17T15:09:52Z","Content":"Contract Configurator 1.22 has some new antenna parameters from yours truly, so CommNet Relays 2.0 for KSP 1.2.x is coming Soon^TM^ after some final testing. Order of magnitude: week(s)."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2017-02-25T14:10:18Z","Content":"Testing and cost-balancing is complete!  I am proud to announce **[CommNet Relays v2.0.0!](https://github.com/Kerbas-ad-astra/CommNet-Relays/releases/tag/v2.0.0)**\n\n![CommNetRelaysLogo.png](https://raw.githubusercontent.com/Kerbas-ad-astra/CommNet-Relays/master/CommNetRelaysLogo.png)\n\n- Renamed to \u0022CommNet Relays\u0022. Because it uses the new CommNet system, it is not backwards-compatible with pre-1.2 versions of KSP or 1.x versions of AntennaRange Relays.\n- Backend logic overhauled to use new CC antenna parameter. Specific parts are no longer required to complete contracts.\n- Adjusted some of the contract parameters to reduce duplication and increase available choices.\n- Max/min apoapses adjusted to CommNet balance.\n    - Adjusted \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E patch.\n    - Added OPM patch.\n- Added new \u0022Super DSN\u0022 contract to build enormous DSN relays. Why? Because we can!\n\n**Edited \u003Ctime datetime=\u00222017-02-25T14:10:54Z\u0022 title=\u002202/25/2017 02:10  PM\u0022 data-short=\u00227 yr\u0022\u003EFebruary 25, 2017\u003C/time\u003E by Kerbas\\_ad\\_astra**\n  \nImage insert didn\u0027t take the first time..."},{"CreatedByName":"Kuansenhama","CreatedById":114023,"CreatedDateTime":"2017-04-13T19:27:29Z","Content":"The \u0022Place a relay satellite with lots of dishes in orbit around Kerbin\u0022 contract fails as soon as I load a vessel on the launchpad or in orbit."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2017-04-13T21:16:02Z","Content":"I\u0027ve never encountered that issue; there\u0027s nothing special about that contract vs the others (save that it requires a stationary orbit, and has an especially high requirement for the antenna power).  Can you get me a log with the failure?"},{"CreatedByName":"garwel","CreatedById":141813,"CreatedDateTime":"2017-04-14T11:14:47Z","Content":"Just discovered this mod. Too bad it\u0027s not listed on \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E, more people (including myself) would know about it."},{"CreatedByName":"Nathangun","CreatedById":171770,"CreatedDateTime":"2017-04-19T13:10:25Z","Content":"\u003E \n\u003E \n\u003E On 4/13/2017 at 8:27 PM, Kuansenhama said:\n\u003E \n\u003E \n\u003E The \u0022Place a relay satellite with lots of dishes in orbit around Kerbin\u0022 contract fails as soon as I load a vessel on the launchpad or in orbit.\n\u003E \n\nI just came across this mod and the exact same thing happened, using Galileo\u0027s planet pack, contract configurator, and other contract packs.\n\nOne of the conditions of the new satellite is it has to have 9000000000000 of power."}]}