{"TopicId":110772,"ForumId":69,"TopicTitle":"Uneven thrust when converting and running engines","CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-05-25T11:27:40Z","PageNum":1,"Articles":[{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-05-25T11:27:40Z","Content":"\n\u003Cp\u003EI noticed something while doing an asteroid capture with a craft that was also mining the asteroid at the same time;\u003C/p\u003E\u003Cp\u003EIf you run the liquid converter while running the engines, even though there is plenty of fuel available to all engines, 1 engine starts running at a lower thrust.\u003C/p\u003E\u003Cp\u003EIn my setup the craft has 3 LV-N engines and all run evenly and have equal access to the available fuel. But if I switch on the ore converter to generate liquid fuel while the engines are running then one engine starts running at a lower thrust. I noticed this in a slightly modded install, so I quickly threw together a very simple test craft in a stock install. I confess to adding in hyper-edit to save me the time of actually launching and getting up to the asteroid. \u003C/p\u003E\u003Cp\u003EThis is the test craft running it\u0027s engines while also producing liquid fuel. Note the flame on one engine is very much smaller. (in the second pic you can see on the context menu it\u0027s output is only about 8kN, should be 60kN.)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/vCXGhGU\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/vCXGhGUl.jpg\u0022 alt=\u0022vCXGhGUl.jpg\u0022\u003E\u003C/a\u003E\u003Ca href=\u0022http://imgur.com/YavfVLu\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/YavfVLul.jpg\u0022 alt=\u0022YavfVLul.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe test craft has a central tank and 3 radial tanks which the engines are mounted to and fuel lines running from the central tank to the 3 radial.\u003C/p\u003E\u003Cp\u003E- If the fuel is all in the central tank, then running the liquid converter doesn\u0027t seem to cause a problem, but if I move the fuel to be evenly distributed in the 3 radial tanks and then run the converter then one of the engines will run at a lower thrust.\u003C/p\u003E\u003Cp\u003EHere is a save file with the test craft docked with an asteroid. It is setup so there is no fuel in the central tank and about 85l of liquid in each radial tank. All converters are switched off.\u003C/p\u003E\u003Cp\u003E- Hit Z to start running the engines at full thrust =\u0026gt; all engines work at full thrust as expected.\u003C/p\u003E\u003Cp\u003E- switch on either the liquid or liquid\u002Box converter and one of the engines will drop to about 8kN thrust\u003C/p\u003E\u003Cp\u003E- switch converter off and all engines will fire at full thrust again.\u003C/p\u003E\u003Cp\u003E(the craft is not particularly well docked so it will spin when at full thrust, so I recommend putting the camera into locked mode)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/9436261/bug%20testers/quicksave.sfs\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003EQuickSave file\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/9436261/bug%20testers/MiningBugTest.craft\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003Ecraft file\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI have seen this before, a long time ago when playing with Kethane. Exactly the same thing happened when running the kethane converters while the engines where on power. This was ages ago, like back in 0.18.\u003C/p\u003E\n"},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-05-25T12:46:52Z","Content":"\n\u003Cp\u003EYes, I\u0027ve noticed this as well.\u003C/p\u003E\n"},{"CreatedByName":"Weedlepickles","CreatedById":144922,"CreatedDateTime":"2015-05-25T20:55:53Z","Content":"\n\u003Cp\u003EI had just the same bug! It might be that the engines take fuel from the small tanks while they are evenly filling up from the generator causing some sort of trouble?\u003C/p\u003E\u003Cp\u003EI had 2 Nerv-engines on my craft, one on each side with the generator in the middle. An interesting effect I found was that if you used the thrust delimiter on the engine that worked fine the other (the faulty one) would get even lower output, suggesting that it\u0027s not necessarily that the generated fuel just goes to one engine and not the other.\u003C/p\u003E\n"},{"CreatedByName":"hazarada","CreatedById":72036,"CreatedDateTime":"2015-06-16T01:33:39Z","Content":"\n\u003Cp\u003EThis keep happening over and over on one of my crafts. The engine is KR-2L.\u003C/p\u003E\u003Cp\u003EFirst I liftoff and get carried by solid boosters and KS-25x4\u003C/p\u003E\u003Cp\u003EAt ~30km I drop the first stage and engage KR-2L, I also start the ore converter for LFO (theres 240 ore in the craft at start)\u003C/p\u003E\u003Cp\u003EAt ~100km The engine power drops to 16.7kN and thats it. There is plenty of fuel left, adjusting thrust or thrust limiter has no effect, if I shut the engine off and on again, initially the thrust jumps to the correct value and then immediately back to 16.7kN again.\u003C/p\u003E\u003Cp\u003EDoesn\u0027t happen if I don\u0027t start the ore converter but without the little extra fuel, I can\u0027t make my landing on minmus (the craft is designed to go straight there for initial refuel and then hop from moon to moon)\u003C/p\u003E\n"},{"CreatedByName":"Kaos","CreatedById":110849,"CreatedDateTime":"2015-06-16T06:18:34Z","Content":"\n\u003Cp\u003EI had a bug and found out what trigered it but thought it might be worth sharing it.\u003C/p\u003E\u003Cp\u003EI started a craft from Minmus with ISRU unit still running (full ore tanks for a little bit extra fuel). After some time the thrust completely vanished. I could increase and decrease the thrust and the fire under the rocket was shown, but no fuel was consumed and no thrust produced. Then I tried to turn of the ISRU and then everything worked fine again.\u003C/p\u003E\u003Cp\u003EKSP version: 1.03 for Linux, no mods\u003C/p\u003E\n"},{"CreatedByName":"Kaos","CreatedById":110849,"CreatedDateTime":"2015-06-16T06:20:49Z","Content":"\n\u003Cp\u003EI seem to have found the same bug, but did not find this thread before posting. My bug report is \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/125570-No-thrust-when-ISRU-is-active\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/125570-No-thrust-when-ISRU-is-active\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Capt. Hunt","CreatedById":97860,"CreatedDateTime":"2015-06-16T07:27:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hazarada\u0022 data-cite=\u0022hazarada\u0022\u003E\u003Cdiv\u003EThis keep happening over and over on one of my crafts. The engine is KR-2L.\u003Cp\u003EFirst I liftoff and get carried by solid boosters and KS-25x4\u003C/p\u003E\u003Cp\u003EAt ~30km I drop the first stage and engage KR-2L, I also start the ore converter for LFO (theres 240 ore in the craft at start)\u003C/p\u003E\u003Cp\u003EAt ~100km The engine power drops to 16.7kN and thats it. There is plenty of fuel left, adjusting thrust or thrust limiter has no effect, if I shut the engine off and on again, initially the thrust jumps to the correct value and then immediately back to 16.7kN again.\u003C/p\u003E\u003Cp\u003EDoesn\u0027t happen if I don\u0027t start the ore converter but without the little extra fuel, I can\u0027t make my landing on minmus (the craft is designed to go straight there for initial refuel and then hop from moon to moon)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewell, you could wait until you reach orbit to start the ISRU. I\u0027m not sure it\u0027ll convert fast enough to get you the fuel you need before you hit Minmus anyway.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-06-16T09:00:57Z","Content":"\n\u003Cp\u003EWell, this certainly does look like a bug to me, I\u0027m not aware of any deliberate restrictions that would cause this effect. The two threads should probably be merged as the chance of them being different bugs is vanishingly small.\u003C/p\u003E\u003Cp\u003EDo either of you have an example craft file or a quicksave from just before take off in the Minmus case?\u003C/p\u003E\n"},{"CreatedByName":"hazarada","CreatedById":72036,"CreatedDateTime":"2015-06-16T13:20:00Z","Content":"\n\u003Cp\u003EWell not anymore, I ended up re-engineering the craft to work around the issue and saved over the old one, I\u0027ll try to recreate the issue though. So far I\u0027ve figured out that 16.7kN is the amount of thrust the KR-2L can produce when limited to the amount of fuel that the ISRU can produce.\u003C/p\u003E\u003Cp\u003EEDIT: nvm, I\u0027ve reproduced the issue, test craft: \u003Ca href=\u0022https://www6.zippyshare.com/v/M2lMZVLa/file.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www6.zippyshare.com/v/M2lMZVLa/file.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E1. Start the ISRU for LFO\u003C/p\u003E\u003Cp\u003E2. Activate engine\u003C/p\u003E\u003Cp\u003Enotice how the top tank drains and bottom one isn\u0027t used as long as the ISRU remains active\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-16T13:33:32Z\u0022 title=\u002206/16/2015 01:33  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 16, 2015\u003C/time\u003E by hazarada\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-06-16T13:41:58Z","Content":"\n\u003Cp\u003EI have had this issue too (it\u0027s actually a very old issue, long pre-dating stock mining, I used to have the same thing when running Kethane converters and engines at the same time.) \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EWell, this certainly does look like a bug to me, I\u0027m not aware of any deliberate restrictions that would cause this effect. The two threads should probably be merged as the chance of them being different bugs is vanishingly small.\u003Cp\u003EDo either of you have an example craft file or a quicksave from just before take off in the Minmus case?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShould probably also merge it with this thread that I started on this same issue. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/123003-Uneven-thrust-when-converting-and-running-engines\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/123003-Uneven-thrust-when-converting-and-running-engines\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThere is a craft and quicksave in that thread. (and instructions on how to replicate) \u003C/p\u003E\u003Cp\u003ESingle engine craft don\u0027t seem to suffer this issue, seems to affect craft with radial mounted engines (possibly its the radially mounted fuel tanks that are the issue). What I found with the test craft in my thread is that if all the fuel is moved into the central tank then the problem doesn\u0027t occur, but if there is fuel in the radial tanks then running the converter will cause one engine to have a much lower thrust than the others. I have also seen setups where 2 out of 3 engines produce lower thrust.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-06-16T14:34:42Z","Content":"\n\u003Cp\u003ERight, so the engine is being deprived of fuel even though there is lots available. This sounds very much like the long-standing issue in Part.RequestResource where it often doesn\u0027t supply the full amount that is requested. This same bit of code has been implicated as the cause of several fairly serious issues now and the devs are aware of the problem so hopefully it will get fixed fairly soon.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-06-16T18:29:45Z","Content":"\n\u003Cp\u003EMarking as bug as this has happened a few times now, the only workaround is to not run engines and the ore converter simultaneously.\u003C/p\u003E\n"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-06-17T11:10:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sal_vager\u0022 data-cite=\u0022sal_vager\u0022\u003E\u003Cdiv\u003EMarking as bug as this has happened a few times now, the only workaround is to not run engines and the ore converter simultaneously.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks Sal! \u003C/p\u003E\u003Cp\u003ECould you also merge this thread with this one I made about this same thing; \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/123003-Uneven-thrust-when-converting-and-running-engines\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/123003-Uneven-thrust-when-converting-and-running-engines\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAlso, I\u0027m still a little unclear about the best way for reporting bugs; after Max\u0027s comment (sometime ago over the 1.0 release concerns) that the bug tracker had become an unmanageable mess, I\u0027ve been very reluctant to add anything to it incase I\u0027m duplicating on things. So I\u0027ve just been reporting things to this sub forum. If you mark a thread as [bug] does that mean you\u0027ve also added it to the main bug tracker, or should we do that? Should we be adding things to the tracker or is it best just to report them here and let you guys act as a filter?\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-06-17T11:38:12Z","Content":"\n\u003Cp\u003EOkay I\u0027ve merged them, as for the tracker yes it is a mess of non-bugs, duplicates, Unity issues, non-reproduceable crash reports, complaints about minor graphical glitches, issues caused by player hardware/software, solved issues never rechecked, intentional features reported as bugs and issues caused by addons.\u003C/p\u003E\u003Cp\u003EThe Exp team goes through all that and cleans up what they can, they also reproduce bugs and copy the real ones to another tracker, such as bugs like this one.\u003C/p\u003E\u003Cp\u003EI mark it as a bug here so it\u0027s known that it\u0027s not something we can fix yet, and needs patching, so if you could add it to the tracker that\u0027d be great.\u003C/p\u003E\u003Cp\u003EJust please make your bug report as clear as possible, concise is good, and it\u0027s best to add reproduction steps that have a high chance of causing the issue to appear.\u003C/p\u003E\u003Cp\u003EInclude any logs you can, pics and vids of the issue help as well but logs are most important.\u003C/p\u003E\u003Cp\u003EHere\u0027s an example of how I write mine:\u003C/p\u003E\u003Cp\u003E____\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EDescription\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EMemory use increases when a vessel overheats.\u003C/p\u003E\u003Cp\u003E____\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EReproduction\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E* Open the task manager.\u003C/p\u003E\u003Cp\u003E* In KSP, Launch the Aeris 4A.\u003C/p\u003E\u003Cp\u003E* Fly at about 12km and full speed until craft begins to show thermal effects.\u003C/p\u003E\u003Cp\u003E____\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EResult\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E* Memory use will start to increase when the craft thermal effects and gauges are active.\u003C/p\u003E\u003Cp\u003E* Memory use can continue to increase until game crashes.\u003C/p\u003E\u003Cp\u003E* Memory stops increasing when vessel cools and thermal effects end.\u003C/p\u003E\u003Cp\u003E____\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EExpected Result\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E* No increase in memory used.\u003C/p\u003E\u003Cp\u003E____\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EReproduction Attempts and Rate\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ETested 8 times, 100% reproduction of memory increase, crashed from memory exhaustion twice.\u003C/p\u003E\u003Cp\u003E____\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EWorkarounds\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EDisabling PPFX edge highlighting showed no memory increase during overheat.\u003C/p\u003E\u003Cp\u003E___\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ETested On\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ELinux x86 and x86_64, Xubuntu 15.04, with Nvidia 346 driver.\u003C/p\u003E\u003Cp\u003E___\u003C/p\u003E\u003Cp\u003EAttachments:\u003C/p\u003E\u003Cp\u003EKSP.Log\u003C/p\u003E\u003Cp\u003EPlayer.log\u003C/p\u003E\u003Cp\u003EScreenshot 1\u003C/p\u003E\u003Cp\u003EScreenshot 2\u003C/p\u003E\u003Cp\u003EScreenshot 3\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-06-17T11:44:38Z","Content":"\n\u003Cp\u003EI have run through some scenarios in my head and this bug is definitely caused by the Part.RequestResource issue I mentioned in #11. This is already in Squad\u0027s internal bug tracker and has also recently been reported in the public tracker. Please add any info to \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/5132\u0022 rel=\u0022external nofollow\u0022\u003Ethis bug\u003C/a\u003E rather than creating a new one.\u003C/p\u003E\n"}]}