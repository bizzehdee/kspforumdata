{"TopicId":104990,"ForumId":20,"TopicTitle":"[help] ModuleManager Syntax confusion","CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T01:29:24Z","PageNum":1,"Articles":[{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T01:29:24Z","Content":"So, I\u0027m trying to write a modulemanager patch to create a duplicate of the Vernor Engine that\u0027s in the propulsion category and acts like an engine rather than an RCS thruster. I got as far as replacing it\u0027s rcsthruster module block with one written as if it were any other engine in the propulsion category.\n\nMy problem is, I\u0027ve written what appears in my eyes to be a patch that should work, and yet ingame it does not appear in staging when placed, and cannot be activated and used by any means.\n\nHere\u0027s my patch:\n\n\u003E \n\u003E // Creates a duplicate of the Vernor engine and adds it to the propulsion category.  \n\u003E   \n\u003E   \n\u003E // vernorEngine (stock)  \n\u003E \u002BPART[vernierEngine]   \n\u003E {  \n\u003E  @name = vernierEngineRocket  \n\u003E  @title = Vernor Engine MicroMotor  \n\u003E  @category = Propulsion  \n\u003E  @description = A VR-N1ER Engine, refitted as a microthruster for small craft instead of an LFO burning linear RCS port. It doesn\u0027t have much thrust, but it can be placed in a lot of places other microthrusters can\u0027t.  \n\u003E   \n\u003E   \n\u003E  EFFECTS, 0  \n\u003E {  \n\u003E  running  \n\u003E  {  \n\u003E  AUDIO  \n\u003E  {  \n\u003E  channel = Ship  \n\u003E  clip = sound\\_rocket\\_mini  \n\u003E  volume = 0.0 0.0  \n\u003E  volume = 1.0 1.0  \n\u003E  pitch = 0.0 0.8  \n\u003E  pitch = 1.0 1.0  \n\u003E  loop = true  \n\u003E  }  \n\u003E  PREFAB\\_PARTICLE  \n\u003E  {  \n\u003E  prefabName = fx\\_exhaustFlame\\_yellow\\_tiny\\_Z  \n\u003E  transformName = thrustTransform  \n\u003E  emission = 0.0 0.0  \n\u003E  emission = 1.0 1.0  \n\u003E  speed = 0.0 0.8  \n\u003E  speed = 1.0 1.0  \n\u003E  }  \n\u003E  }  \n\u003E  engage  \n\u003E  {  \n\u003E  AUDIO  \n\u003E  {  \n\u003E  channel = Ship  \n\u003E  clip = sound\\_vent\\_medium  \n\u003E  loop = false  \n\u003E  }  \n\u003E  }  \n\u003E  disengage  \n\u003E  {  \n\u003E  AUDIO  \n\u003E  {  \n\u003E  channel = Ship  \n\u003E  clip = sound\\_vent\\_soft  \n\u003E  loop = false  \n\u003E  }  \n\u003E  }  \n\u003E }  \n\u003E   \n\u003E  !MODULE[ModuleRCS] {}  \n\u003E   \n\u003E  MODULE[ModuleEnginesFX], 1 {  \n\u003E  thrustVectorTransformName = thrustTransform  \n\u003E  exhaustDamage = True  \n\u003E  ignitionThreshold = 0.1  \n\u003E  minThrust = 0  \n\u003E  maxThrust = 12  \n\u003E  heatProduction = 0  \n\u003E  fxOffset = 0, 0, 1.6  \n\u003E  PROPELLANT  \n\u003E  {  \n\u003E  name = LiquidFuel  \n\u003E  ratio = 0.9  \n\u003E  DrawGauge = True  \n\u003E  }  \n\u003E  PROPELLANT  \n\u003E  {  \n\u003E  name = Oxidizer  \n\u003E  ratio = 1.1  \n\u003E  }  \n\u003E  atmosphereCurve  \n\u003E  {  \n\u003E  key = 0 260  \n\u003E  key = 1 140  \n\u003E  }  \n\u003E  }  \n\u003E   \n\u003E  MODULE, 2  \n\u003E {  \n\u003E  name = ModuleGimbal  \n\u003E  gimbalTransformName = thrustTransform  \n\u003E  gimbalRange = 1  \n\u003E }  \n\u003E   \n\u003E   \n\u003E   \n\u003E   \n\u003E MODULE, 3  \n\u003E {  \n\u003E  name = ModuleTestSubject  \n\u003E   \n\u003E  // nowhere: 0, srf: 1, ocean: 2, atmo: 4, space: 8  \n\u003E  environments = 15  \n\u003E   \n\u003E  useStaging = True  \n\u003E  useEvent = True  \n\u003E }  \n\u003E }\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\nI\u0027m pretty new to writing modulemanager patches (and modding KSP in general), so I\u0027m not sure what I need to do to make this work. I read through the documentation on github but I don\u0027t understand what I\u0027ve done wrong. Can anyone point out my mistakes so I can fix them and hopefully not make them again? Many thanks in advance. :3"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-26T01:39:58Z","Content":"Give this a Shot if it don\u0027t work will start a test install and play with it \n\n    // Creates a duplicate of the Vernor engine and adds it to the propulsion category.// vernorEngine (stock)\u002BPART[vernierEngine] {    @name = vernierEngineRocket    @title = Vernor Engine MicroMotor\t@category = Propulsion\t@description = A VR-N1ER Engine, refitted as a microthruster for small craft instead of an LFO burning linear RCS port. It doesn\u0027t have much thrust, but it can be placed in a lot of places other microthrusters can\u0027t.EFFECTS{  running  {    AUDIO    {      channel = Ship      clip = sound_rocket_mini      volume = 0.0 0.0      volume = 1.0 1.0      pitch = 0.0 0.8      pitch = 1.0 1.0      loop = true    }    PREFAB_PARTICLE    {      prefabName = fx_exhaustFlame_yellow_tiny_Z      transformName = RCSthruster      emission = 0.0 0.0      emission = 1.0 1.0      speed = 0.0 0.8      speed = 1.0 1.0    }  }  engage  {    AUDIO    {      channel = Ship      clip = sound_vent_medium      loop = false    }  }  disengage  {    AUDIO    {      channel = Ship      clip = sound_vent_soft      loop = false    }  }}       !MODULE[ModuleRCS] {}       MODULE       {        name = ModuleEnginesFX\tthrustVectorTransformName = RCSthruster\texhaustDamage = True\tignitionThreshold = 0.1\tminThrust = 0\tmaxThrust = 12\theatProduction = 0\tfxOffset = 0, 0, 1.6\tPROPELLANT\t{\t\tname = LiquidFuel        \tratio = 0.9\t\tDrawGauge = True\t}\tPROPELLANT\t{\t\tname = Oxidizer\t\tratio = 1.1\t}\tatmosphereCurve \t{   \t key = 0 260  \t key = 1 140 \t}  }MODULE{\tname = ModuleGimbal\tgimbalTransformName = RCSthruster\tgimbalRange = 1}MODULE{\tname = ModuleTestSubject\t// nowhere: 0, srf: 1, ocean: 2, atmo: 4, space: 8\tenvironments = 15\tuseStaging = True\tuseEvent = True}}\n\nEDIT- Forgot to change to thrusterTransformName = RCSthruster has to stay the same updated.\n\n**Edited \u003Ctime datetime=\u00222015-04-26T03:46:00Z\u0022 title=\u002204/26/2015 03:46  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 26, 2015\u003C/time\u003E by Mecripp2**"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T03:04:22Z","Content":"Still not working, the fuel gauges show up and so do the parts in staging, but, despite making noise when throttling up, the rockets create no thrust and no particles are rendered."},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-26T04:06:21Z","Content":"Sorry forgot to change the thrusterTransformName = RCSthruster"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T04:55:20Z","Content":"Same problem as before, the engines make noise and burn fuel but create no thrust and no particles."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-26T05:02:05Z","Content":"RCS thruster transforms use a different \u0027thrust axis\u0027 than engines do. Who knows why, they do. That means your \u0027thrust axis\u0027 is probably pointing inside the model, and thus not providing any thrust (since it\u0027s inside a collider)."},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-26T05:41:32Z","Content":"This what you want ? ![screenshot0.png](https://dl.dropboxusercontent.com/u/72893034/UFO/screenshot0.png)"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T16:00:14Z","Content":"\u003E \n\u003E This what you want ?[snip]\n\nNo, In that picture, the particles should be going in every direction pushing the thrusters into the ship. I want the thrust to come out the opposite direction of the circular black hole on the thruster."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-26T19:58:17Z","Content":"Markelius: and I just explained *you can\u0027t do that with that model.* RCS uses Y and engines use Z. You will need to add a new thrust transform to the model, oriented correctly for engine use, to get the thrust to come out of the hole."},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T20:00:23Z","Content":"And here I thought this would be a simple little mod. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-05-29T18:23:00Z","Content":"Sorry to jump in on this a month late (I was googling for something else, and came across this).\n\nOne idea is that you can create an additional \u0022model\u0022 in unity with the correct thrust vectors, and no visible meshes, and use the \u0022MODEL {}\u0022 syntax for the part to load both the old model and your \u0022model of thrust vectors\u0022. As long as the new thrust vector transforms are named differently, you can reference those in the engine settings and it might work.\n\nIt\u0027s kinda like part welding, except here you\u0027re just adding the new thrust vectors you need."}]}