{"TopicId":104990,"ForumId":20,"TopicTitle":"[help] ModuleManager Syntax confusion","CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T01:29:24Z","PageNum":1,"Articles":[{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T01:29:24Z","Content":"\n\u003Cp\u003ESo, I\u0027m trying to write a modulemanager patch to create a duplicate of the Vernor Engine that\u0027s in the propulsion category and acts like an engine rather than an RCS thruster. I got as far as replacing it\u0027s rcsthruster module block with one written as if it were any other engine in the propulsion category.\u003C/p\u003E\u003Cp\u003EMy problem is, I\u0027ve written what appears in my eyes to be a patch that should work, and yet ingame it does not appear in staging when placed, and cannot be activated and used by any means.\u003C/p\u003E\u003Cp\u003EHere\u0027s my patch:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cdiv\u003E\u003Cbr\u003E// Creates a duplicate of the Vernor engine and adds it to the propulsion category.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E// vernorEngine (stock)\u003Cbr\u003E\u002BPART[vernierEngine] \u003Cbr\u003E{\u003Cbr\u003E @name = vernierEngineRocket\u003Cbr\u003E @title = Vernor Engine MicroMotor\u003Cbr\u003E @category = Propulsion\u003Cbr\u003E @description = A VR-N1ER Engine, refitted as a microthruster for small craft instead of an LFO burning linear RCS port. It doesn\u0027t have much thrust, but it can be placed in a lot of places other microthrusters can\u0027t.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E EFFECTS, 0\u003Cbr\u003E{\u003Cbr\u003E running\u003Cbr\u003E {\u003Cbr\u003E AUDIO\u003Cbr\u003E {\u003Cbr\u003E channel = Ship\u003Cbr\u003E clip = sound_rocket_mini\u003Cbr\u003E volume = 0.0 0.0\u003Cbr\u003E volume = 1.0 1.0\u003Cbr\u003E pitch = 0.0 0.8\u003Cbr\u003E pitch = 1.0 1.0\u003Cbr\u003E loop = true\u003Cbr\u003E }\u003Cbr\u003E PREFAB_PARTICLE\u003Cbr\u003E {\u003Cbr\u003E prefabName = fx_exhaustFlame_yellow_tiny_Z\u003Cbr\u003E transformName = thrustTransform\u003Cbr\u003E emission = 0.0 0.0\u003Cbr\u003E emission = 1.0 1.0\u003Cbr\u003E speed = 0.0 0.8\u003Cbr\u003E speed = 1.0 1.0\u003Cbr\u003E }\u003Cbr\u003E }\u003Cbr\u003E engage\u003Cbr\u003E {\u003Cbr\u003E AUDIO\u003Cbr\u003E {\u003Cbr\u003E channel = Ship\u003Cbr\u003E clip = sound_vent_medium\u003Cbr\u003E loop = false\u003Cbr\u003E }\u003Cbr\u003E }\u003Cbr\u003E disengage\u003Cbr\u003E {\u003Cbr\u003E AUDIO\u003Cbr\u003E {\u003Cbr\u003E channel = Ship\u003Cbr\u003E clip = sound_vent_soft\u003Cbr\u003E loop = false\u003Cbr\u003E }\u003Cbr\u003E }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E !MODULE[ModuleRCS] {}\u003Cbr\u003E\u003Cbr\u003E MODULE[ModuleEnginesFX], 1 {\u003Cbr\u003E thrustVectorTransformName = thrustTransform\u003Cbr\u003E exhaustDamage = True\u003Cbr\u003E ignitionThreshold = 0.1\u003Cbr\u003E minThrust = 0\u003Cbr\u003E maxThrust = 12\u003Cbr\u003E heatProduction = 0\u003Cbr\u003E fxOffset = 0, 0, 1.6\u003Cbr\u003E PROPELLANT\u003Cbr\u003E {\u003Cbr\u003E name = LiquidFuel\u003Cbr\u003E ratio = 0.9\u003Cbr\u003E DrawGauge = True\u003Cbr\u003E }\u003Cbr\u003E PROPELLANT\u003Cbr\u003E {\u003Cbr\u003E name = Oxidizer\u003Cbr\u003E ratio = 1.1\u003Cbr\u003E }\u003Cbr\u003E atmosphereCurve\u003Cbr\u003E {\u003Cbr\u003E key = 0 260\u003Cbr\u003E key = 1 140\u003Cbr\u003E }\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E MODULE, 2\u003Cbr\u003E{\u003Cbr\u003E name = ModuleGimbal\u003Cbr\u003E gimbalTransformName = thrustTransform\u003Cbr\u003E gimbalRange = 1\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EMODULE, 3\u003Cbr\u003E{\u003Cbr\u003E name = ModuleTestSubject\u003Cbr\u003E\u003Cbr\u003E // nowhere: 0, srf: 1, ocean: 2, atmo: 4, space: 8\u003Cbr\u003E environments = 15\u003Cbr\u003E\u003Cbr\u003E useStaging = True\u003Cbr\u003E useEvent = True\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m pretty new to writing modulemanager patches (and modding KSP in general), so I\u0027m not sure what I need to do to make this work. I read through the documentation on github but I don\u0027t understand what I\u0027ve done wrong. Can anyone point out my mistakes so I can fix them and hopefully not make them again? Many thanks in advance. :3\u003C/p\u003E\n"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-26T01:39:58Z","Content":"\n\u003Cp\u003EGive this a Shot if it don\u0027t work will start a test install and play with it \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E// Creates a duplicate of the Vernor engine and adds it to the propulsion category.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E// vernorEngine (stock)\u003Cbr\u003E\u002BPART[vernierEngine] \u003Cbr\u003E{\u003Cbr\u003E    @name = vernierEngineRocket\u003Cbr\u003E    @title = Vernor Engine MicroMotor\u003Cbr\u003E\t@category = Propulsion\u003Cbr\u003E\t@description = A VR-N1ER Engine, refitted as a microthruster for small craft instead of an LFO burning linear RCS port. It doesn\u0027t have much thrust, but it can be placed in a lot of places other microthrusters can\u0027t.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EEFFECTS\u003Cbr\u003E{\u003Cbr\u003E  running\u003Cbr\u003E  {\u003Cbr\u003E    AUDIO\u003Cbr\u003E    {\u003Cbr\u003E      channel = Ship\u003Cbr\u003E      clip = sound_rocket_mini\u003Cbr\u003E      volume = 0.0 0.0\u003Cbr\u003E      volume = 1.0 1.0\u003Cbr\u003E      pitch = 0.0 0.8\u003Cbr\u003E      pitch = 1.0 1.0\u003Cbr\u003E      loop = true\u003Cbr\u003E    }\u003Cbr\u003E    PREFAB_PARTICLE\u003Cbr\u003E    {\u003Cbr\u003E      prefabName = fx_exhaustFlame_yellow_tiny_Z\u003Cbr\u003E      transformName = RCSthruster\u003Cbr\u003E      emission = 0.0 0.0\u003Cbr\u003E      emission = 1.0 1.0\u003Cbr\u003E      speed = 0.0 0.8\u003Cbr\u003E      speed = 1.0 1.0\u003Cbr\u003E    }\u003Cbr\u003E  }\u003Cbr\u003E  engage\u003Cbr\u003E  {\u003Cbr\u003E    AUDIO\u003Cbr\u003E    {\u003Cbr\u003E      channel = Ship\u003Cbr\u003E      clip = sound_vent_medium\u003Cbr\u003E      loop = false\u003Cbr\u003E    }\u003Cbr\u003E  }\u003Cbr\u003E  disengage\u003Cbr\u003E  {\u003Cbr\u003E    AUDIO\u003Cbr\u003E    {\u003Cbr\u003E      channel = Ship\u003Cbr\u003E      clip = sound_vent_soft\u003Cbr\u003E      loop = false\u003Cbr\u003E    }\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E       !MODULE[ModuleRCS] {}\u003Cbr\u003E\u003Cbr\u003E       MODULE\u003Cbr\u003E       {\u003Cbr\u003E        name = ModuleEnginesFX\u003Cbr\u003E\tthrustVectorTransformName = RCSthruster\u003Cbr\u003E\texhaustDamage = True\u003Cbr\u003E\tignitionThreshold = 0.1\u003Cbr\u003E\tminThrust = 0\u003Cbr\u003E\tmaxThrust = 12\u003Cbr\u003E\theatProduction = 0\u003Cbr\u003E\tfxOffset = 0, 0, 1.6\u003Cbr\u003E\tPROPELLANT\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = LiquidFuel\u003Cbr\u003E        \tratio = 0.9\u003Cbr\u003E\t\tDrawGauge = True\u003Cbr\u003E\t}\u003Cbr\u003E\tPROPELLANT\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = Oxidizer\u003Cbr\u003E\t\tratio = 1.1\u003Cbr\u003E\t}\u003Cbr\u003E\tatmosphereCurve\u003Cbr\u003E \t{\u003Cbr\u003E   \t key = 0 260\u003Cbr\u003E  \t key = 1 140\u003Cbr\u003E \t}\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleGimbal\u003Cbr\u003E\tgimbalTransformName = RCSthruster\u003Cbr\u003E\tgimbalRange = 1\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleTestSubject\u003Cbr\u003E\u003Cbr\u003E\t// nowhere: 0, srf: 1, ocean: 2, atmo: 4, space: 8\u003Cbr\u003E\tenvironments = 15\u003Cbr\u003E\u003Cbr\u003E\tuseStaging = True\u003Cbr\u003E\tuseEvent = True\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEDIT- Forgot to change to thrusterTransformName = RCSthruster has to stay the same updated.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-26T03:46:00Z\u0022 title=\u002204/26/2015 03:46  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 26, 2015\u003C/time\u003E by Mecripp2\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T03:04:22Z","Content":"\n\u003Cp\u003EStill not working, the fuel gauges show up and so do the parts in staging, but, despite making noise when throttling up, the rockets create no thrust and no particles are rendered.\u003C/p\u003E\n"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-26T04:06:21Z","Content":"\n\u003Cp\u003ESorry forgot to change the thrusterTransformName = RCSthruster\u003C/p\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T04:55:20Z","Content":"\n\u003Cp\u003ESame problem as before, the engines make noise and burn fuel but create no thrust and no particles.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-26T05:02:05Z","Content":"\n\u003Cp\u003ERCS thruster transforms use a different \u0027thrust axis\u0027 than engines do. Who knows why, they do. That means your \u0027thrust axis\u0027 is probably pointing inside the model, and thus not providing any thrust (since it\u0027s inside a collider).\u003C/p\u003E\n"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-26T05:41:32Z","Content":"\n\u003Cp\u003EThis what you want ? \u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/72893034/UFO/screenshot0.png\u0022 alt=\u0022screenshot0.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T16:00:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MeCripp\u0022 data-cite=\u0022MeCripp\u0022\u003E\u003Cdiv\u003EThis what you want ?[snip]\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, In that picture, the particles should be going in every direction pushing the thrusters into the ship. I want the thrust to come out the opposite direction of the circular black hole on the thruster.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-26T19:58:17Z","Content":"\n\u003Cp\u003EMarkelius: and I just explained \u003Cem\u003Eyou can\u0027t do that with that model.\u003C/em\u003E RCS uses Y and engines use Z. You will need to add a new thrust transform to the model, oriented correctly for engine use, to get the thrust to come out of the hole.\u003C/p\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2015-04-26T20:00:23Z","Content":"\n\u003Cp\u003EAnd here I thought this would be a simple little mod. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-05-29T18:23:00Z","Content":"\n\u003Cp\u003ESorry to jump in on this a month late (I was googling for something else, and came across this).\u003C/p\u003E\u003Cp\u003EOne idea is that you can create an additional \u0022model\u0022 in unity with the correct thrust vectors, and no visible meshes, and use the \u0022MODEL {}\u0022 syntax for the part to load both the old model and your \u0022model of thrust vectors\u0022. As long as the new thrust vector transforms are named differently, you can reference those in the engine settings and it might work.\u003C/p\u003E\u003Cp\u003EIt\u0027s kinda like part welding, except here you\u0027re just adding the new thrust vectors you need.\u003C/p\u003E\n"}]}