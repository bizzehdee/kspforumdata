{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":168,"Articles":[{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-05-27T15:08:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222602971\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464301197\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nActually it changes the very thing you talked about earlier - power.\u00A0 Now the power draw is based on how many instructions have *actually been* executed in the update, rather than how many could have been had it used the whole timeslice.\u00A0 In other words if you have a loop that does one command then does a wait 0, it won\u0027t draw nearly as much power as a busy loop that calculates pi over and over and never stops.\u00A0 So IPU does affect power draw that way too.\u00A0 Running a program at 50 IPU uses less power than running it at 2000 IPU, unless it has lots of waits so it was never really using that full 2000 IPU anyway.\n\u003C/p\u003E\n\u003Cp\u003E\nWe would like to do away with IPU as a global setting across the whole mod and instead make it a feature of the \u0022hardware\u0022.\u00A0 i.e. because you are using THIS model, your IPU is only 50, but because your later design used THAT model, your IPU was raised to 2000, etc.\n\u003C/p\u003E\n\u003Cp\u003E\nThe only question is whether or not we\u0027d also want to simulate the idea that older computers draw more power for the same IPU.\u00A0 An old clunky model pays more power to achive 1 Mhz than a modern phone does to achieve 1 Ghz.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is even better than I suggested. Since you have actualy use some checking what kind of commands are executed, can you also add checking if there is no programm runing at all, to consider as unit is shut off and does not consume any power.\n\u003C/p\u003E\n\u003Cp\u003E\nFor example, I want to include kOS CPU on each craft, even when I don\u0027t always need it, but there is a moments where manual pilot execution is much worse than something that is possible trough kOS. I wanted to try it, but I forgot to include kOS on my craft. Or, I put kOS on craft and forgot to turn it off on launching and because of that kOS drains battery.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nThat will make wish to inegrate kOS CPU in each cockpit/probe a thing even more. It should not be too hard to include it trough MM patches.\u003Cbr\u003E\nCheck to see if player is already unlocked some kOS part and always integrate best one available. There could also be a check if cockpit have enough mass, so you don\u0027t need to add mass of kOS CPU to cockpit, but rather consider that it have enough space for kOS in it.\n\u003C/p\u003E\n\u003Cp\u003E\nVery first available kOS part should not be integrated though, just fo have reminder how bulky and slow CPUs were in the past. Only new small surface attachable CPUs should be possible to integrate. But that is out of scope for kOS, I would probably do some small MM patch for personal usage when next version of kOS is released.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603667\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464353435\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKSP mentality: close enough to be realistic and challenging without being so complicated that it isn\u0027t any fun.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAgree on that. And based on Stevens answer, I think that you are close to optimal solution on this topic. Messing with memory limits will just overcomplicated everything and draw you away from more important things to solve than this.\n\u003C/p\u003E\n\u003Cp\u003E\nDifferent power drain based on executed commands as you are already included will bring some more interesting choices in game.\u003Cbr\u003E\nShould someone spamm more bateries and solar panels on craft to satisfy kOS CPU needs, or he will try to optimize code, to consume less power for the same thing ? That will encourage people to think more about coding, how to make cleaner, more optimized code, for better efficiency of whole craft (less mass = more dV).\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, nice news on progress in development.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-05-28T01:30:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603816\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464361705\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor example, I want to include kOS CPU on each craft, even when I don\u0027t always need it, but there is a moments where manual pilot execution is much worse than something that is possible trough kOS. I wanted to try it, but I forgot to include kOS on my craft. Or, I put kOS on craft and forgot to turn it off on launching and because of that kOS drains battery.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt already is the case that if the kOS CPU\u0027s power is toggled off entirely it draws no power.\u00A0 If it\u0027s on but not doing anything, it draws as much power as 1 IPU only (i.e. 1/200th of typical full power consumption.)\u00A0 You can think of this as being in \u0022sleep mode\u0022 with just enough running to be able to detect a command has been issued, and then wake up and go full speed so it can execute it.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAgree on that. And based on Stevens answer, I think that you are close to optimal solution on this topic. Messing with memory limits will just overcomplicated everything and draw you away from more important things to solve than this.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe challenge with the memory problem is for if people want to be able to replace programming with new versions of the file at runtime (a thing real probes do in fact do quite a lot as new software is beamed in from Earth).\u00A0 The problem is we don\u0027t currently have any good way to *erase* the compiled opcodes of an existing program other than to just completely end the whole parent program and dump all the way back to the interpreter.\u00A0 (Thus to get a good clean use of the new code and wipe out the old without a memory leak (a REAL one, in the actual KSP game process, as the old program is still present but nothing jumps to it anymore), you\u0027d have to reboot and have a boot script that runs things back to the point you\u0027re at now.\u00A0 \u0022Cheers Kevin\u0022 has designed a system a bit like that specifically for that purpose that he used extensively in his kOS youtube career series.)\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-05-28T08:11:55Z","Content":"\n\u003Cp\u003E\nI was apsent from KSP since 1.1.x is released, have a lot to learn to catch up with every change made, not only with kOS, bit with KSP and other mods as whole. You have probably already included something similar already, but is it possible to send data from one kOS CPU to another on the same craft ?\n\u003C/p\u003E\n\u003Cp\u003E\nIt is better to understand it on example. Upcoming GAP will going to include cargo transport contracts. I was thinking on craft that will have one main kOS CPU on vessel and other one on payload with some probe and second kOS CPU unit. Once you deploy payload from cargo bay, CPU on probe is activated and behave on it\u0027s own, but just before separation, main CPU should send some data to probe, about target area for landing etc. Probe will then do it\u0027s own thing, deploy parachutes when needed, landing legs/gears, open cargo bay, deploy solar panels, collect science research data, etc.\n\u003C/p\u003E\n\u003Cp\u003E\nOr for some more violent people, use it as guided missile/smart bomb to hit a moving target. deployed probe should act on it\u0027s own, but use info from main craft that need to remain in physical area all time for everything to work in KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nCoding wise, it should be something like this:\n\u003C/p\u003E\n\u003Cp\u003E\nOn probe we have some function running in loop:\u003Cbr\u003E\nProbe_funcion(param1,param2,param3).\n\u003C/p\u003E\n\u003Cp\u003E\nOn main vessel, we set param1,param2 and param3 values as some stuff in gaming world changes, target moved or whatever. But those info is actualy used in program running on probe CPU\n\u003C/p\u003E\n\u003Cp\u003E\nset Probe:param1 to some_value.\u003Cbr\u003E\nset Probe:param2 to some_value2.\u003Cbr\u003E\nset Probe:param1 to some_value3.\n\u003C/p\u003E\n\u003Cp\u003E\nOr even better, call whole function that is declared in Probe CPU:\n\u003C/p\u003E\n\u003Cp\u003E\nProbe:Probe_funcion( some_value , some_value2, some_value3).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t know exact kOS syntax from top of my head, but something like that. \u0022Probe\u0022 should be non active vessel name or something similar, as much as I recall info from documentation about two crafts used in docking procedure when both are in physical range.\n\u003C/p\u003E\n\u003Cp\u003E\nIs something like that already possible ?\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-05-28T08:26:24Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222604926\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464423115\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0but is it possible to send data from one kOS CPU to another on the same craft ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOn the development platform, we have a comms system in place for inter-CPU communication and inter-vessel communication.\u00A0 But it\u0027s not in public release yet.\u00A0 The next release seems like it will be rather big in scope and have lots of new stuff so it will take a bit to get it ready.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-28T08:27:21Z\u0022 title=\u002205/28/2016 08:27  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 28, 2016\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-05-28T08:39:30Z","Content":"\n\u003Cp\u003E\nThanks, take your time with this, no need to rush it. That will just give me more time to learn how to use kOS \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\nNice to know that it is already on \u0022to do\u0022 list.\n\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2016-05-28T19:38:12Z","Content":"\n\u003Cp\u003E\nHi everyone, I was hoping I could get some help with my kOS script. I\u0027m attempting script that will perform a suicide burn / SpaceX style landing, but I\u0027m having some trouble. The craft descends just fine, it slows, but here\u0027s my issues:\u003Cbr\u003E\n1. The velocity at touchdown is around 6-12 m/s. I would like it to be 1-2 m/s. I\u0027m not sure what I should do to ensure that.\u003Cbr\u003E\n2. Once the craft touches down, instead of shutting off the engine or program, sometimes it will full throttle and launch back into the air. I\u0027m not sure what is going on there, either. The script still runs, and it literally bumps the ground and flies off.\u003Cbr\u003E\n3. I\u0027m not sure how to get the program to end. Currently, if it lands correctly, I have to CTRL\u002BC out of it. I would like the program to end on its own after completing a landing.\u003Cbr\u003E\u003Cbr\u003E\nHere\u0027s my script (bare in mind, I\u0027m not a programmer so I\u0027ve tried to simplify things) :\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E//Powered landing script by Colin Thomas Nichols.\n\n//Clearscreen, set up.\nCLEARSCREEN.\nset SASMODE to \u0022STABILITYASSIST\u0022.\nRCS ON.\nPRINT \u0022SAS engaged.\u0022.\nPRINT \u0022RCS engaged.\u0022.\nPRINT \u0022Landing Gear Ready.\u0022.\nPRINT \u0022Aerobrakes Ready.\u0022.\n\nset current_throttle to 0.0.\nPRINT (SHIP:STATUS) AT (0,30).\n\n//If you assigned aerobrakes to action group BRAKES, extend them 8km above the surface.\nWHEN ALT:RADAR \u0026lt; 8000 THEN {\nBRAKES ON.\nPRINT \u0022Aerobrakes engaged.\u0022.\n}\n\n//deploy landing gear at 2km.\nWHEN ALT:RADAR \u0026lt; 2000 THEN {\nGEAR ON.\nPRINT \u0022Landing Gear engaged.\u0022.\n}\n\n//start loop. If you are 2m or more above the surface:\nUNTIL ALT:RADAR \u0026lt; 2 {\n\n\t//if you are falling faster than 1 m/s:\n\tif -verticalspeed \u0026gt; 1 {\n\t\n\t\t//retrograde so you can kill horizontal velocity...\n\t\tlock steering to SRFRETROGRADE.\n\t\t\n\t\t//time to calculate parameters and variables!\n\t\t//calculate current gravity felt by craft.\n\t\tset gravity to (BODY:MU / (BODY:RADIUS \u002B altitude)^2).\n\t\tPRINT \u0022Gravity:\u0022 AT (0,15).\n\t\tPRINT ROUND (gravity,3) AT (25,15).\n\t\t\n\t\t//Calculate how long it will take to crash.\n\t\tset Ti to (ALT:RADAR/(-verticalspeed\u002Bgravity)).\n\t\tPRINT \u0022Time until Impact:\u0022 AT (0,16).\n\t\tPRINT ROUND (Ti,3) AT (25,16).\n\t\t\n\t\t//set the throttle to our target TWR.\n\t\tset TWR to 1.8.\n\t\tset current_throttle to (TWR / (ship:availablethrust/(ship:mass*gravity))).\n\t\tPRINT \u0022Throttle:\u0022 AT (0,18).\n\t\tPRINT ROUND (current_throttle,2) AT (25,18).\n\t\t\n\t\t//using throttle position, what\u0027s our new TWR? \u002B0.01 to keep kOS from erroring.\n\t\tset target_TWR to (ship:maxthrust * current_throttle \u002B 0.01) / (ship:mass * gravity).\n\t\tPRINT \u0022Target TWR:\u0022 AT (0,19).\n\t\tPRINT ROUND (target_TWR,3) AT (25,19).\n\t\t\n\t\tset accel to (target_TWR*gravity).\n\t\tPRINT \u0022Acceleration:\u0022 AT (0,20).\n\t\tPRINT ROUND (accel,3) AT (25,20).\n\t\t\n\t\t//Calculate how long it will take to burn.\n\t\tset Tb to (-verticalspeed/accel).\n\t\tPRINT \u0022Burn Duration:\u0022 AT (0,17).\n\t\tPRINT ROUND (Tb,3) AT (25,17).\n\t\t\n  \t\t//Calculate the height at which to start the burn.\n\t\tset Db to (-verticalspeed*Tb)\u002B(0.5*accel*Tb^2).\n\t\tPRINT \u0022Burn Altitude:\u0022 AT (0,21).\n\t\tPRINT ROUND (Db,3) AT (25,21).\n\t\t\n\t\tPRINT \u0022Current Altitude:\u0022 AT (0,22).\n\t\tPRINT ROUND (ALT:RADAR,3) AT (25,22).\n\n\t\t\t//Actual landing code. If time to impact is less than the burn time and current altitude is less\n  \t\t\t//than the burn altitude, lock throttle to 1.8 TWR. If under 40m, increase throttle to 2 TWR.\n\t\t\t//If under 20m, decrease throttle to 1.4 TWR. If under 5m, decrease throttle to 1.1 TWR. \n\t\t\t//Otherwise, turn the throttle off.\n\t\t\tIF ALT:RADAR \u0026lt;= (Db*1.1) AND Ti \u0026lt;= Tb {\n\t\t\tlock throttle to current_throttle.\n\t\t\t} ELSE IF ALT:RADAR \u0026lt;= 40 {\n\t\t\tset TWR to 2.\n\t\t\t} ELSE IF ALT:RADAR \u0026lt;= 20 {\n\t\t\tset TWR to 1.4.\n\t\t\t} ELSE IF ALT:RADAR \u0026lt;= 5\n\t\t\tset TWR to 1.1.\n\t\t\t} ELSE {\n\t\t\tlock throttle to 0.0.}\n\t\t\t\n\t\t//wait for KSP to complete a physics tick.\n\t\twait 0.001.\n\t\t\tIF SHIP:STATUS = \u0022LANDED\u0022 {\n\t\t\tCLEARSCREEN.\n\t\t\tPRINT \u0022Landing executed.\u0022.\n\t\t\twait 2.0.\n\t\t\tSAS OFF.\n\t\t\tRCS OFF.\n\t\t\twait 2.0.\n\t\t\tBRAKES OFF.\n\t\t\tCLEARSCREEN.\n\t\t\tBREAK.\n\t\t\t}\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nAny help is appreciated, thank you.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"drhay53","CreatedById":150399,"CreatedDateTime":"2016-05-28T19:45:53Z","Content":"\n\u003Cp\u003E\nI\u0027ve never used KoS, but on the landing speed issue, have you tried increasing the TWR at your altitude boundaries?\n\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2016-05-28T19:49:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222605572\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464464753\u0022 data-ipsquote-userid=\u0022150399\u0022 data-ipsquote-username=\u0022drhay53\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, drhay53 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve never used KoS, but on the landing speed issue, have you tried increasing the TWR at your altitude boundaries?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI did, but if the TWR is too high, it seems to spin out of control when it reaches lower speeds (under 10m/s) because it\u0027s adding so much velocity.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"drhay53","CreatedById":150399,"CreatedDateTime":"2016-05-28T19:57:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222605575\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464464975\u0022 data-ipsquote-userid=\u0022130898\u0022 data-ipsquote-username=\u0022-ctn-\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, -ctn- said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI did, but if the TWR is too high, it seems to spin out of control when it reaches lower speeds (under 10m/s) because it\u0027s adding so much velocity.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah that\u0027ll happen. The two ways to control that are to lower the TWR or to have more control... how much RCS and/or reaction wheels does it have?\n\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2016-05-28T20:27:52Z","Content":"\n\u003Cp\u003E\nSorry, I don\u0027t have a picture at the moment. It\u0027s two of the long 1.25m fuel tanks, the \u0022Reliant\u0022 engine, landing legs, vernier RCS, 1.25m reaction wheels, air brakes, 1.25m battery\u00A0and the 1.25m kOS module. I would think it would be plenty of control? I\u0027ll try different TWR values but I fear if I lower them more, it will just land/crash at higher than 12 m/s. And still do the bouncing-after-touchdown thing.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-05-28T20:54:38Z","Content":"\n\u003Cp\u003E\nI didn\u0027t checked all of math equations, but on the first look it seems that you have miscalculated Time to impact.\u003Cbr\u003E\nI have similar working script, that is meant tu use along with SAS set to radial, to keep craft in vertical pitching, but you can easy adjust it for your personal needs.\n\u003C/p\u003E\n\u003Cp\u003E\nScript is available along with other craft files, written a lot of coments inside to help somene to start using kOS. Have also few safe checks, so it can be use with high TWR crafts on any celestial body. Here is \u003Ca href=\u0022https://www.dropbox.com/s/8qz0imkvs3a5dqd/CraftFilesKSP112.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Edownload link.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI wanted to explain it a bit more, why I did it like it is, but I didn\u0027t found time for it. Hopefully, comments inside will be enough, no need to bloat this thread with it.\n\u003C/p\u003E\n"},{"CreatedByName":"Cairol","CreatedById":145279,"CreatedDateTime":"2016-05-28T21:20:31Z","Content":"\n\u003Cp\u003E\nBe aware that the ALT:RADAR value is measured from the control part (or the instruments position?) and not from the lowest point of your craft.\u003Cbr\u003E\nSo you should offset accordingly to make sure your script will terminate upon touchdown or slightly before touchdown.\u003Cbr\u003E\nThis must be set for every craft individually.\u003Cbr\u003E\nSo best would be to measure this offset on the ground in a test flight, or otherwise you have to estimate the distance\u003Cbr\u003E\nand feed it to your script as a parameter.\n\u003C/p\u003E\n\u003Cp\u003E\nDon\u0027t use SAS in RETROGRADE mode and don\u0027t lock the steering to RETROGRADE on the last view meters,\u003Cbr\u003E\nbecause the retrograde marker will start to wander when you are about to coming to a stop.\u003Cbr\u003E\nOnly use SAS STABILITYASSIST in the final phase.\n\u003C/p\u003E\n"},{"CreatedByName":"-ctn-","CreatedById":130898,"CreatedDateTime":"2016-05-28T21:25:38Z","Content":"\n\u003Cp\u003E\nWell, that makes a lot of sense. I\u0027m guessing my craft is 12 meters high, because the control point is at the top and I keep landing around 12m/s.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try locking steering to UP or SAS stability assist and see what works best.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI was hoping it could be a script that can be used globally with crafts, but I guess I should fine tune it for the particular rocket at the time? Hmm.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nEDIT:\u003Cbr\u003E\nStill having issues. Lands at about 10-15 m/s, bounces back up with engine full throttle and just flies straight up.\u003Cbr\u003E\nNew code:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E//Powered landing script by Colin Thomas Nichols.\n\n//Cleearscreen, set up.\nCLEARSCREEN.\nset SASMODE to \u0022STABILITYASSIST\u0022.\nRCS ON.\nPRINT \u0022SAS engaged.\u0022.\nPRINT \u0022RCS engaged.\u0022.\nPRINT \u0022Landing Gear Ready.\u0022.\nPRINT \u0022Aerobrakes Ready.\u0022.\n\nset current_throttle to 0.0.\nPRINT (SHIP:STATUS) AT (0,30).\n\n//If you assigned aerobrakes to action group BRAKES, extend them 1km above the surface.\nWHEN ALT:RADAR \u0026lt; 8000 THEN {\nBRAKES ON.\nPRINT \u0022Aerobrakes engaged.\u0022.\n}\n\n//deploy landing gear at 500m.\nWHEN ALT:RADAR \u0026lt; 2000 THEN {\nGEAR ON.\nPRINT \u0022Landing Gear engaged.\u0022.\n}\n\n//start loop. If you are 1m or more above the surface:\nUNTIL ALT:RADAR \u0026lt; 7 {\n\n\t//if you are falling faster than 1 m/s:\n\tif -verticalspeed \u0026gt; 1 {\n\t\n\t\t//retrograde so you can kill horizontal velocity...\n\t\tlock steering to SRFRETROGRADE.\n\t\t\n\t\t//time to calculate parameters and variables!\n\t\t//calculate current gravity felt by craft.\n\t\tset gravity to (BODY:MU / (BODY:RADIUS \u002B altitude)^2).\n\t\tPRINT \u0022Gravity:\u0022 AT (0,15).\n\t\tPRINT ROUND (gravity,3) AT (25,15).\n\t\t\n\t\t//Calculate how long it will take to crash.\n\t\tset Ti to SQRT(2*(ALT:RADAR\u002B6)/(-verticalspeed\u002Bgravity)).\n\t\tPRINT \u0022Time until Impact:\u0022 AT (0,16).\n\t\tPRINT ROUND (Ti,3) AT (25,16).\n\t\t\n\t\t//set the throttle to our target TWR.\n\t\tset TWR to 1.8.\n\t\tset current_throttle to (TWR / (ship:availablethrust/(ship:mass*gravity))).\n\t\tPRINT \u0022Throttle:\u0022 AT (0,18).\n\t\tPRINT ROUND (current_throttle,2) AT (25,18).\n\t\t\n\t\t//using throttle position, what\u0027s our new TWR? \u002B0.01 to keep kOS from erroring.\n\t\tset target_TWR to (ship:maxthrust * current_throttle \u002B 0.01) / (ship:mass * gravity).\n\t\tPRINT \u0022Target TWR:\u0022 AT (0,19).\n\t\tPRINT ROUND (target_TWR,3) AT (25,19).\n\t\t\n\t\tset accel to (target_TWR*gravity).\n\t\tPRINT \u0022Acceleration:\u0022 AT (0,20).\n\t\tPRINT ROUND (accel,3) AT (25,20).\n\t\t\n\t\t//Calculate how long it will take to burn.\n\t\tset Tb to (-verticalspeed/accel).\n\t\tPRINT \u0022Burn Duration:\u0022 AT (0,17).\n\t\tPRINT ROUND (Tb,3) AT (25,17).\n\t\t\n\t\tset Db to (-verticalspeed*Tb)\u002B(0.5*accel*Tb^2).\n\t\tPRINT \u0022Burn Altitude:\u0022 AT (0,21).\n\t\tPRINT ROUND (Db,3) AT (25,21).\n\t\t\n\t\tPRINT \u0022Current Altitude:\u0022 AT (0,22).\n\t\tPRINT ROUND (ALT:RADAR,3) AT (25,22).\n\n\t\t\t//Actual landing code.\n\t\t\tIF ALT:RADAR \u0026lt;= (Db*1.1) AND Ti \u0026lt;= Tb {\n\t\t\tlock throttle to current_throttle.\n\t\t\t} ELSE IF -verticalspeed \u0026lt; 20 {\n\t\t\tUNLOCK STEERING.\n\t\t\t} ELSE {\n\t\t\tlock throttle to 0.0.}\n\t\t\t\n\t\t//wait for KSP to complete a physics tick.\n\t\twait 0.001.\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-28T21:53:10Z\u0022 title=\u002205/28/2016 09:53  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 28, 2016\u003C/time\u003E by -ctn-\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-05-29T00:38:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222605679\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464470431\u0022 data-ipsquote-userid=\u0022145279\u0022 data-ipsquote-username=\u0022Cairol\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Cairol said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBe aware that the ALT:RADAR value is measured from the control part (or the instruments position?) and not from the lowest point of your craft.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is incorrect. \u00A0\u0060alt:radar\u0060 and \u0060altitude\u0060 are both measured to the center of mass for the vessel. \u00A0I have gotten around this in my scripts by finding the location of the \u0022lowest\u0022 part, and then decreasing the height by the dot product between the part\u0027s position and \u0060ship:facing:vector\u0060. \u00A0An additional offset is still needed to account for the size of the part itself. \u00A0This adjustment was the single biggest improvement I made to my landing scripts.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222605679\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464470431\u0022 data-ipsquote-userid=\u0022145279\u0022 data-ipsquote-username=\u0022Cairol\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Cairol said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDon\u0027t use SAS in RETROGRADE mode and don\u0027t lock the steering to RETROGRADE on the last view meters,\u003Cbr\u003E\nbecause the retrograde marker will start to wander when you are about to coming to a stop.\u003Cbr\u003E\nOnly use SAS STABILITYASSIST in the final phase.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI never use the built in SAS for landings, only cooked, but I\u0027ve had no issues locking steering to \u0060-ship:velocity:surface\u0060 on landing, at least not after I got throttle control figured out better. \u00A0I actually usually double the horizontal component to help with landing stability. \u00A0So long as you have a steady throttle and steering control, it is usually pretty clean.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222605687\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464470738\u0022 data-ipsquote-userid=\u0022130898\u0022 data-ipsquote-username=\u0022-ctn-\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, -ctn- said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStill having issues. Lands at about 10-15 m/s, bounces back up with engine full throttle and just flies straight up.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn addition to the above changes, you may want to change your throttle calculation to be based entirely off of height, local gravity, and speed. \u00A0The iterative nature of KSP means that it will still be slightly off, but I regularly land around 1.5m/s with this throttle function:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nfunction getThrottleForHeightVf\n{\n\tparameter vel, acc, g, h, velFinal.\n\t// vel is the current vertical velocity\n\t// acc is the current available vertical acceleration based on current pitch\n\t// g is the local acceleration due to gravity\n\t// h is the height, it is very important that this is calibrated to\n\t// velFinal is the desired final velocity.\n\t// account for the offset of the bottom of the vessel from the CoM\n\t// negative values of tgtacc mean accelerating towards the body (down),\n\t// positive values mean accelerating away from the body (up).\n\tlocal tgtacc is 0.\n\tlocal thrtl is 0.\n\tset tgtacc to -1 * (velFinal ^ 2 - vel ^ 2) / 2 / max(h, 0.01).\n\tset thrtl to (tgtacc \u002B g) / max(acc, 0.01).\n\treturn thrtl.\n}\u003C/pre\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-29T00:38:58Z\u0022 title=\u002205/29/2016 12:38  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 29, 2016\u003C/time\u003E by hvacengi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Cairol","CreatedById":145279,"CreatedDateTime":"2016-05-29T07:22:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222605862\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464482318\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is incorrect. \u00A0\u0060alt:radar\u0060 and \u0060altitude\u0060 are both measured to the center of mass for the vessel.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the clarification. The documentation says nothing about this.\u003Cbr\u003E\u003Cbr\u003E\nBTW, I like to use the \u0022lock\u0022 mechanism of kOS for such things as keeping the optimal throttle throughout the landing or whatever other value\u003Cbr\u003E\nis needed during the landing loop.\u003Cbr\u003E\nIt makes the code cleaner.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-29T07:27:30Z\u0022 title=\u002205/29/2016 07:27  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 29, 2016\u003C/time\u003E by Cairol\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2016-05-29T10:46:45Z","Content":"\n\u003Cp\u003E\nScenes from our next attraction:-\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/v6ec9xoila6sw6z/ISS1_A.mp4?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/v6ec9xoila6sw6z/ISS1_A.mp4?dl=0\u003C/a\u003E (65MB)\n\u003C/p\u003E\n\u003Cp\u003E\nA revamped and refined software version of an earlier video... but now \u0027\u003Cem\u003Ewe\u0027re\u003C/em\u003E\u0027 ready to test rendezvous and docking procedures.\n\u003C/p\u003E\n\u003Cp\u003E\n:-)\n\u003C/p\u003E\n"},{"CreatedByName":"c_space","CreatedById":162543,"CreatedDateTime":"2016-05-29T11:26:49Z","Content":"\n\u003Cp\u003E\nIs it intentional that the KR 2042 b does not fit exactly to 0.625m parts? It seems to have a diameter of 0.5m or something.\n\u003C/p\u003E\n\u003Cp\u003E\nWould I get side effects if I changed the rescale factor in the part cfg?\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0I changed the rescale factor in the part.cfg to 1.25 and now it fits perfectly to mk0 parts. I played for a couple of days now and have not noticed any side effects.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-03T10:47:50Z\u0022 title=\u002206/03/2016 10:47  AM\u0022 data-short=\u00228 yr\u0022\u003EJune 3, 2016\u003C/time\u003E by c_space\u003C/strong\u003E\n\u003Cbr\u003EAdded response.\n\u003C/span\u003E\n"},{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-05-29T13:36:37Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to think of/design a rover driver script that senses terrain slope in all directions 10m away and continuously navigates to a goal LATLNG() while avoiding steep slopes. Can someone help me with this?\n\u003C/p\u003E\n"},{"CreatedByName":"RocketSquid","CreatedById":152665,"CreatedDateTime":"2016-05-29T23:56:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222606478\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464528997\u0022 data-ipsquote-userid=\u0022101780\u0022 data-ipsquote-username=\u0022MAFman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to think of/design a rover driver script that senses terrain slope in all directions 10m away and continuously navigates to a goal LATLNG() while avoiding steep slopes. Can someone help me with this?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have been trying to do something like this for a while. I think the best way would probably be to have the rover look for slopes between it and the destination and:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nIf there is a slope ahead of it, check for slopes to the left and right to find the shortest path and take it.\n\u003C/li\u003E\n\u003Cli\u003E\nIf there is not a slope ahead of it, move forward until it reaches an unsafe slope or its target.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAlso, is it possible to GET the current WHEELTHROTTLE value?\n\u003C/p\u003E\n\u003Cp\u003E\nAnother question: Can kOS get resource concentrations from scanners?\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-05-30T01:20:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222606478\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464528997\u0022 data-ipsquote-userid=\u0022101780\u0022 data-ipsquote-username=\u0022MAFman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to think of/design a rover driver script that senses terrain slope in all directions 10m away and continuously navigates to a goal LATLNG() while avoiding steep slopes. Can someone help me with this?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTo obtain the slope of an area, you first obtain the normal vector to the \u0022terrain plane\u0022 of that area.\n\u003C/p\u003E\n\u003Cp\u003E\nTo get the normal vector to the terrain plane, take 3 sample 3-D positions nearby each other (that aren\u0027t all in a straight line), labelled in clockwise order, A, B, and C.\u00A0 The normal of the terrain plane at A is:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Elocal norm is VCRS( (B - A, (C - A) ).\n\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe angle between that normal and straight up at position A is the slope angle of the terrain there.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Elocal terrain_bank_angle is VANG(norm, (A - the_body:position) ).\n\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-05-30T18:05:40Z","Content":"\n\u003Cp\u003E\nI\u0027m working on a library (\u003Ca href=\u0022https://github.com/dewiniaid/ksp-kos-scripts\u0022 rel=\u0022external nofollow\u0022\u003Elib_orbit.ks and family here\u003C/a\u003E)\u00A0to handle a bunch of orbital match. \u00A0It currently can convert either an Orbit/Orbitable or a set of position and velocity vectors into a rather lengthy Lexicon of orbital parameters (I\u0027d love proper classes or a way to construct my own Orbits!... someday), intended uses being to predict\u00A0a series of maneuvers without needing to create nodes and so forth.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve noticed a surprisingly large amount of what I assume is\u00A0floating point error in a few cases -- basically small* differences in what the game reports\u00A0vs. what my calculations show. \u00A0(This is especially prevalent in cases like ...\u00A0attempting to calculate position from an orbit rather than using \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Eobt:position-obt:body:position\u003C/span\u003E). \u00A0I know that sometimes the order of operations or whatnot can be changed to reduce floating-point error, so I\u0027d be interested in seeing if that\u0027s the case for me or not.\n\u003C/p\u003E\n\u003Cp\u003E\nBut more interestingly, I\u0027ve noticed a discrepancy between some parameters of \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Eobt\u003C/span\u003E\u00A0and corresponding parameters of \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Eship\u003C/span\u003E:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003E\u003Cstrong\u003Eprint obt:velocity:orbit - ship:velocity:orbit.\u003C/strong\u003E\u003Cbr\u003E\nV(-0.00268574888173134, -0.00161378149967106, -0.00374235661232092)\u003Cbr\u003E\u003Cstrong\u003Eprint obt:velocity:orbit - orbitat(ship, time:seconds):velocity:orbit.\u003C/strong\u003E\u003Cbr\u003E\nV(0, 0, 0)\u003Cbr\u003E\u003Cstrong\u003Eprint obt:position - ship:position.\u003C/strong\u003E\u003Cbr\u003E\nV(2.98667690483853, 4.64475975453388, 13.1080628449563)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe magnitude of these errors\u00A0increases at higher factors of timewarp, which leads me to believe it\u0027s not just floating point error due to something being calculated two different ways.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat exactly is\u00A0going on here? \u00A0I suspect that kOS\u0027s update tick is happening in between one of those values changing and the other. \u00A0So, for giggles, I ran:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003E\u003Cstrong\u003Eon time { print \u0022o: \u0022 \u002B obt:velocity:orbit:mag \u002B \u0022; v: \u0022 \u002B ship:velocity:orbit:mag. preserve. }\u003C/strong\u003E\u003Cbr\u003E\no: 671.817348836739; v: 671.820151951602\u003Cbr\u003E\no: 671.814845544989; v: 671.817648632772\u003Cbr\u003E\no: 671.811414942815; v: 671.81421800491\u003Cbr\u003E\no: 671.808185942693; v: 671.81098897715\u003C/span\u003E\u003Cbr\u003E\n[...]\n\u003C/p\u003E\n\u003Cp\u003E\n(Again, differences magnified under timewarp). \u00A0So, if I want the most accurate calculations, should I be going off the values of \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Eobt\u003C/span\u003E or \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Eship\u003C/span\u003E? \u00A0The former seems to be slightly ahead of the latter.\n\u003C/p\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2016-05-31T05:34:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222608292\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464631540\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat exactly is\u00A0going on here? \u00A0I suspect that kOS\u0027s update tick is happening in between one of those values changing and the other.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMost likely the case.\n\u003C/p\u003E\n\u003Cp\u003E\nI read a KOS vector/variable to my own variables, then use these across time ticks as these don\u0027t change.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-05-31T05:37:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222609248\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464672848\u0022 data-ipsquote-userid=\u0022137078\u0022 data-ipsquote-username=\u0022ColKlonk\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, ColKlonk said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMost likely the case.\n\u003C/p\u003E\n\u003Cp\u003E\nI read a KOS vector/variable to my own variables, then use these across time ticks as these don\u0027t change.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s not what I meant; the comparison here is happening in a single update tick.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I think is happening is something like:\n\u003C/p\u003E\n\u003Cp\u003E\n1. KSP updates orbital position.\n\u003C/p\u003E\n\u003Cp\u003E\n2. KOS does its update tick.\n\u003C/p\u003E\n\u003Cp\u003E\n3.\u00A0KSP updates physics position.\n\u003C/p\u003E\n\u003Cp\u003E\nhence the desync between obt and ship. \u00A0(Note that the every line of the\u00A0ON TIME loop corresponds to a single KOS update).\n\u003C/p\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2016-05-31T07:00:52Z","Content":"\n\u003Cp\u003E\nI saw it in here somewhere...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/general/cpu_hardware.html?highlight=tick\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/general/cpu_hardware.html?highlight=tick\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2016-05-31T11:58:59Z","Content":"\n\u003Cp\u003E\nWould it be possible sometime, in future versions, to make the terminal background transparent, or give the ability to switch the terminal graphics off completely, but leave the text.\n\u003C/p\u003E\n\u003Cp\u003E\nHere I\u0027m fiddling with the terminal textures, but cannot seem to get the alpha channel nailed\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/zgbzKVX.jpg\u0022 class=\u0022ipsImage\u0022 alt=\u0022zgbzKVX.jpg\u0022\u003E\u003C/p\u003E\n"}]}