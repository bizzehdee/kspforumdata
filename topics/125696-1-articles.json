{"TopicId":125696,"ForumId":44,"TopicTitle":"Storing really very quite big online-game universes","CreatedByName":"Findthepin1","CreatedById":139989,"CreatedDateTime":"2015-11-17T04:35:43Z","PageNum":1,"Articles":[{"CreatedByName":"Findthepin1","CreatedById":139989,"CreatedDateTime":"2015-11-17T04:35:43Z","Content":"\nSo there\u0026#39;s this game called EVE Online. It has remarkably asymmetrical spaceships and some of their Earthlike planets are over half the radius of Jupiter. Anyway, the game\u0026#39;s universe has over 5000 star systems. They seem realistically enough spread out. I don\u0026#39;t understand how they are able to store all that information, for every meter of every planet in 5000 solar systems, plus everything on them and everything in space. It would probably take up tens of terabytes at the very least, or petabytes at the most. Likely, they don\u0026#39;t have that kind of capability. What am I missing?\n"},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2015-11-17T04:44:13Z","Content":"\nProcedural generation? Just need a seed and run it through algorithms that would put things where they want them to be. So instead of storing all the data at once, they just need to keep the seed, and everything else will be loaded on demand. We have powerful enough machines to do such calculations in a flash, even if we don\u0026#39;t have the capacity to store that much data all at once. Likely they will also unload sectors that are not being used too, to reduce loads on servers.\u003Cbr\u003E\n\u003Cbr\u003E\nIt is like, instead of building a whole theme park for you to walk around, they have an army of super human moving at flash speed to build everything you are about to interact with, and dismantle everything you left behind. The actual space needed is very little.\u003Cbr\u003E\n\u003Cbr\u003E\nBut this is just my guess, I have no idea what they do there.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-17T04:47:21Z\u0022 title=\u002211/17/2015 04:47  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 17, 2015\u003C/time\u003E by RainDreamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"GeneralVeers","CreatedById":148918,"CreatedDateTime":"2015-11-17T04:48:37Z","Content":"\nThe planets could be generated the same way Minecraft worlds are. Every Minecraft world is merely the result of a seed number shoved through a fairly complex mathematical formula that spits out a three-dimensional graph as a result (Perlin noise being one of the major parts of the formula). And Minecraft only loads those parts of a world that are within sight range of a player. The entire world (which is around eight times the square footage of real-world Earth) never needs to be stored anywhere. Only the seed number, the locations of the players and their inventories, and any changes that have been made to the world.\u003Cbr\u003E\n\u003Cbr\u003E\nAs to the storage: a hard drive is around a hundred bucks a terabyte these days. Slower media (such as the optical drive that reads your DVD-ROMs) are cheaper per gigabyte. A company that invests ten thousand dollars or so can have plenty of storage.\n"},{"CreatedByName":"Jovus","CreatedById":117163,"CreatedDateTime":"2015-11-17T05:43:22Z","Content":"\nYou\u0026#39;re missing that they do have that kind of storage.\u003Cbr\u003E\n\u003Cbr\u003E\nEach system is on a different server slice. The game has literal millions of players paying $20/mo; data storage is cheap.\n"},{"CreatedByName":"Stargate525","CreatedById":53585,"CreatedDateTime":"2015-11-17T05:43:53Z","Content":"\n[quote name=\u0027WedgeAntilles\u0027]Only the seed number, the locations of the players and their inventories, and any changes that have been made to the world.[/QUOTE]\u003Cbr\u003E\nUnfortunately, Minecraft keeps firm data on any subsection of the world that has ever been loaded. It generates once, then stores the lot. That\u0026#39;s why there are worlds that are several tens of gigabytes in size.\n"},{"CreatedByName":"Yourself","CreatedById":4465,"CreatedDateTime":"2015-11-17T05:53:52Z","Content":"\n[quote name=\u0027Findthepin1\u0027]So there\u0026#39;s this game called EVE Online. It has remarkably asymmetrical spaceships and some of their Earthlike planets are over half the radius of Jupiter. Anyway, the game\u0026#39;s universe has over 5000 star systems. They seem realistically enough spread out. I don\u0026#39;t understand how they are able to store all that information, for every meter of every planet in 5000 solar systems, plus everything on them and everything in space. It would probably take up tens of terabytes at the very least, or petabytes at the most. Likely, they don\u0026#39;t have that kind of capability. What am I missing?[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nWhat you\u0026#39;re missing is that they simply don\u0026#39;t store that much data because there\u0026#39;s no need to. Interaction with planets in EVE is pretty limited. You can\u0026#39;t actually travel to the surface. In fact, you can\u0026#39;t even really get close enough to see much surface detail, so there\u0026#39;s not much data required. The distance between planets is largely irrelevant in terms of the data requirements (beyond additional memory required to store larger numbers accurately, but this memory requirement would be negligible next to literally anything else; it\u0026#39;s on the order of bytes).\u003Cbr\u003E\n\u003Cbr\u003E\nAssuming the planet surface textures aren\u0026#39;t generated procedurally and that each planet is truly unique, the memory requirements for all planets together would probably be on the order of hundreds of GB, which honestly isn\u0026#39;t that much data for servers to be working with. \u003Cbr\u003E\n\u003Cbr\u003E\nI would assume there\u0026#39;s some amount of procedural generation simply because of how expensive it would be to have artists create several thousand unique planets.\n"},{"CreatedByName":"YNM","CreatedById":98447,"CreatedDateTime":"2015-11-17T06:47:13Z","Content":"\nI guess with all the warps and whatnot it\u0026#39;s not as resource-heavy as, say, n-body KSP. After all, you don\u0026#39;t need to know where everyone else is - and centralized system should handle the whole game easily, if they use the decimals to the last place amd set that to ridiculous size.\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-11-17T07:13:14Z","Content":"\n[quote name=\u0027Stargate525\u0027]Unfortunately, Minecraft keeps firm data on any subsection of the world that has ever been loaded. It generates once, then stores the lot. That\u0026#39;s why there are worlds that are several tens of gigabytes in size.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nMinecraft is a different issue. Initial terrain generation is done using a procedural algorithm, but after that the whole thing has to be stored, because it\u0026#39;s so easily modifiable. My first thought would be to instead of storing the whole world just keep track of a delta - blocks that have been added to or removed from the procedural terrain. But no idea whether that would be more efficient or not.\u003Cbr\u003E\n\u003Cbr\u003E\nRemove the terrain deformation requirement and you can be a lot more efficient. My favourite example of procedural world generation is still the original Elite. 8 galaxies with 256 planets each, running on a BBC Micro with 32KB of RAM.\n"},{"CreatedByName":"GeneralVeers","CreatedById":148918,"CreatedDateTime":"2015-11-17T07:18:40Z","Content":"\n[quote name=\u0027Stargate525\u0027]Unfortunately, Minecraft keeps firm data on any subsection of the world that has ever been loaded. It generates once, then stores the lot. That\u0026#39;s why there are worlds that are several tens of gigabytes in size.[/QUOTE]\u003Cbr\u003E\nYup. Been there, done that. Watched Kurtjmac do it. He\u0026#39;s up to 17 gigabytes, if I recall correctly.\u003Cbr\u003E\n\u003Cbr\u003E\nThe thing is, even the parts of a Minecraft world that have never been loaded still exist in a logical sense. The same seed will always generate exactly the same planet, every single time. In fact, here\u0026#39;s a way Minecraft could save some disk space, if they desired to add it: any terrain chunk that has been generated [B]but not changed by the player[/B] can be deleted from the world files when the player leaves load range. Then re-generated when the player returns. And everything will be exactly the same.\u003Cbr\u003E\n\u003Cbr\u003E\nEve Online or any other such computer game could do the same thing, storing only those things the player changes and using the Magic Formula to create the terrain every time anybody flies, walks, or lands nearby.\n"},{"CreatedByName":"SargeRho","CreatedById":25468,"CreatedDateTime":"2015-11-17T08:16:22Z","Content":"\nWhile EVE\u0026#39;s 7600 solar systems would seem to be huge, they\u0026#39;re actually very tiny, data wise. A long-time player\u0026#39;s inventory probably takes up more space than a solar system does, since EVE\u0026#39;s systems aren\u0026#39;t particularly complex. An \u0026#39;empty\u0026#39; solar system is probably no more than an MB in size. Since planets don\u0026#39;t move in EVE, all you need to store a solar system is a list of objects in it, and unique properties. Things like player ships, containers, wrecks, quickly fill that up though.\u003Cbr\u003E\n\u003Cbr\u003E\nThere\u0026#39;s a much better example of an insane game world: Elite Dangerous, with its 400 billion star systems.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-17T08:23:10Z\u0022 title=\u002211/17/2015 08:23  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 17, 2015\u003C/time\u003E by SargeRho\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"andrewas","CreatedById":24662,"CreatedDateTime":"2015-11-17T08:56:01Z","Content":"\n[quote name=\u0027stibbons\u0027]Minecraft is a different issue. Initial terrain generation is done using a procedural algorithm, but after that the whole thing has to be stored, because it\u0026#39;s so easily modifiable. My first thought would be to instead of storing the whole world just keep track of a delta - blocks that have been added to or removed from the procedural terrain. But no idea whether that would be more efficient or not.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nIt\u0026#39;s would be, if storage were the major problem. In most worlds, most chunks are passed through, or have some trees cut down, a few blocks taken from the surface or a mining tunnel passes through. A relative handful of chunks get huge excavations or large buildings. But storage is cheap, bandwidth isn\u0026#39;t that expensive, and worldgen is surprisingly expensive.\n"},{"CreatedByName":"SomeGuy12","CreatedById":103022,"CreatedDateTime":"2015-11-17T09:34:31Z","Content":"\n[quote name=\u0027Findthepin1\u0027]So there\u0026#39;s this game called EVE Online. It has remarkably asymmetrical spaceships and some of their Earthlike planets are over half the radius of Jupiter. Anyway, the game\u0026#39;s universe has over 5000 star systems. They seem realistically enough spread out. I don\u0026#39;t understand how they are able to store all that information, for every meter of every planet in 5000 solar systems, plus everything on them and everything in space. It would probably take up tens of terabytes at the very least, or petabytes at the most. Likely, they don\u0026#39;t have that kind of capability. What am I missing?[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nFirst of all, the planets don\u0026#39;t have 1 meter detail, do they? You cannot get that close to the surface.\u003Cbr\u003E\n\u003Cbr\u003E\nAnd second, yeah, you can define a whole planet with 1 meter detail with a handful of random numbers that would fit in this sentence. You generate the actual terrain as needed, or you cache just the portions that players actually have visited. This is how minecraft does it. (notably, the minecraft world does have a practical size limit, but it has to do with the binary size of the numbers used and not the fundamental technique)\u003Cbr\u003E\n\u003Cbr\u003E\nThe real problem with this kind of random generation is that it isn\u0026#39;t very interesting. Randomly rolling terrain gets boring to explore after a while, and the ultimate limit is the actual unique resources, such as the textures for the terrain blocks and biomes and such.\n"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-11-17T11:10:18Z","Content":"\n[quote name=\u0027RainDreamer\u0027]Procedural generation? Just need a seed and run it through algorithms that would put things where they want them to be. So instead of storing all the data at once, they just need to keep the seed, and everything else will be loaded on demand. We have powerful enough machines to do such calculations in a flash, even if we don\u0026#39;t have the capacity to store that much data all at once. Likely they will also unload sectors that are not being used too, to reduce loads on servers.\u003Cbr\u003E\n\u003Cbr\u003E\nIt is like, instead of building a whole theme park for you to walk around, they have an army of super human moving at flash speed to build everything you are about to interact with, and dismantle everything you left behind. The actual space needed is very little.\u003Cbr\u003E\n\u003Cbr\u003E\nBut this is just my guess, I have no idea what they do there.[/QUOTE]\u003Cbr\u003E\nProcedural generation don\u0026#39;t require much resources. Its basically an random number with an fixed seed. \u003Cbr\u003E\nYou can also override it with fixed stuff. Mun surface details are procedural. \u003Cbr\u003E\nYou will anyway have to override with the savegame who will change stuff\n"},{"CreatedByName":"Stargate525","CreatedById":53585,"CreatedDateTime":"2015-11-17T15:43:38Z","Content":"\n[quote name=\u0027andrewas\u0027]It\u0026#39;s would be, if storage were the major problem. In most worlds, most chunks are passed through, or have some trees cut down, a few blocks taken from the surface or a mining tunnel passes through. A relative handful of chunks get huge excavations or large buildings. But storage is cheap, bandwidth isn\u0026#39;t that expensive, and worldgen is surprisingly expensive.[/QUOTE]\u003Cbr\u003E\nIt\u0026#39;s not the storage, it\u0026#39;s the read time. As the world gets bigger, the time it takes the game to look up whether it has already generated said chunk increases.\n"},{"CreatedByName":"SomeGuy12","CreatedById":103022,"CreatedDateTime":"2015-11-17T17:56:41Z","Content":"\n[quote name=\u0027Stargate525\u0027]It\u0026#39;s not the storage, it\u0026#39;s the read time. As the world gets bigger, the time it takes the game to look up whether it has already generated said chunk increases.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nMinecraft is a hacked together mess put together by a single....extremely wealthy...guy. It\u0026#39;s written in both a very slow programming language and the code itself is very slow. Notably, chunk generation is quite slow - just running around the Minecraft world, the whole game hitches and chugs as it slowly creates new chunks. Another issue is the chunks are made inefficiently - bedrock to ground level gets made, stored, and sent over the network connection for each chunk, even though the majority of the time, the player will never dig into a particular chunk and thus never see the blocks underneath the surface layer. (obvious solution is cubic chunks, a solution several clones of Minecraft have used)\u003Cbr\u003E\n\u003Cbr\u003E\nThe Windows 10/tablet version of Minecraft was written in C native code by a team of experienced programmers. If you have tried it, you\u0026#39;ll see chunks snap into being basically instantly with no noticeable hitching.\n"},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2015-11-19T20:25:39Z","Content":"\n[quote name=\u0027Findthepin1\u0027]So there\u0026#39;s this game called EVE Online. It has remarkably asymmetrical spaceships and some of their Earthlike planets are over half the radius of Jupiter. Anyway, the game\u0026#39;s universe has over 5000 star systems. They seem realistically enough spread out. I don\u0026#39;t understand how they are able to store all that information, for every meter of every planet in 5000 solar systems, plus everything on them and everything in space. It would probably take up tens of terabytes at the very least, or petabytes at the most. Likely, they don\u0026#39;t have that kind of capability. What am I missing?[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nHello,\u003Cbr\u003E\n\u003Cbr\u003E\nI have played EvE online for something like 10 years, and i have a pretty good knowledge on how games are made (used to be a game developer before selling my soul to enterprise business).\u003Cbr\u003E\n\u003Cbr\u003E\nStoring information about the EvE Online universe is a LOT simpler and less data intensive then for example a huge game map like Fallout 4, the reason is very simple and relies on these 2 concepts:\u003Cbr\u003E\n- You just scale the \u0022frame of reference\u0022 of your coordinates, for example you don\u0026#39;t need to measure the distance between 2 planets in 2 different solar systems, you just need to know where are the planets inside their \u0022frame of reference\u0022 in this case the solar system itself. You don\u0026#39;t need to know their position \u0022precisely\u0022 at all, you just need a rough estimation on where you will render them on the user client. This concept adapts to the whole EvE Universe, you just take in account the current \u0022frame of reference\u0022 and you just ignore anything else because you don\u0026#39;t need those distant things to interact with eachoter.\u003Cbr\u003E\n- The planets are very nice but they are not \u0022unique\u0022 at all :) years ago they were just a good amount of \u0022textures\u0022 for planets, now i think they have generated the textures to make them look different but there is nothing like \u0022every meter of every planet in 5000 solar systems\u0022 you just need to input a bit of \u0022variation\u0022 and you are fine :)\u003Cbr\u003E\n\u003Cbr\u003E\nAnyway the \u0022static data\u0022 (including a lot of positional information) of the EvE Online universe are available at this url: [url]http://community.eveonline.com/news/dev-blogs/eve-universe-static-data-export/[/url] and it\u0026#39;s just a few mb :D\u003Cbr\u003E\n\u003Cbr\u003E\nHave fun :)\n"}]}