{"TopicId":105424,"ForumId":16,"TopicTitle":"Reverse engineering Jet Engines - how do velCurve and atmCurve work?","CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-27T23:32:37Z","PageNum":1,"Articles":[{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-27T23:32:37Z","Content":"\n\u003Cp\u003EIn the code for the new 1.0 jetEngineTurbo.cfg part, we find this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E// Jet params\u003Cbr\u003E\t\tatmChangeFlow = True\u003Cbr\u003E\t\tuseVelCurve = True\u003Cbr\u003E\t\tuseAtmCurve = True\u003Cbr\u003E\t\tmachLimit = 2.5\u003Cbr\u003E\t\tmachHeatMult = 6.0\u003Cbr\u003E\t\tvelCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tkey = 0 1 0 0\u003Cbr\u003E\t\t\tkey = 0.2 0.98 0 0\u003Cbr\u003E\t\t\tkey = 0.8395604 1.716071 1.051736 1.051736\u003Cbr\u003E\t\t\tkey = 1.617582 3.022408 1.986082 1.986082\u003Cbr\u003E\t\t\tkey = 2.327472 4.626338 1.452677 1.452677\u003Cbr\u003E\t\t\tkey = 3.00 5.3 0.0005786046 0.0005786046\u003Cbr\u003E\t\t\tkey = 4.25422 2.495532 -4.279616 -4.279616\u003Cbr\u003E\t\t\tkey = 6 0 -0.02420209 0\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tatmCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t// definite \u0027kink\u0027 to the curve at high altitude, compared to flatter BJE curve\u003Cbr\u003E\t\t\tkey = 0 0 0 0\u003Cbr\u003E\t\t\tkey = 0.045 0.166 4.304647 4.304647\u003Cbr\u003E\t\t\tkey = 0.16 0.5 0.5779132 0.5779132\u003Cbr\u003E\t\t\tkey = 0.5 0.6 0.4809403 0.4809403\u003Cbr\u003E\t\t\tkey = 1 1 1.013946 0\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/53884-Iffn\u0022 rel=\u0022external nofollow\u0022\u003EIffn\u003C/a\u003E posted a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/82157-A-detailed-look-at-Kerbal-s-jet-engines\u0022 rel=\u0022external nofollow\u0022\u003Egreat analysis of the old jet performance\u003C/a\u003E, and Ferram \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/50522-Velocity-curve-and-atmosphere-curve\u0022 rel=\u0022external nofollow\u0022\u003Echimed in here\u003C/a\u003E. Anyone want to take a crack at the same analysis for the 1.0 New Aero?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-27T23:35:18Z\u0022 title=\u002204/27/2015 11:35  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 27, 2015\u003C/time\u003E by antbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-27T23:50:43Z","Content":"\n\u003Cp\u003EI dont know what third and forth numbers mean. First 2 I can guess. KER can already show thrust at specific speed/altitde\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-28T00:05:33Z\u0022 title=\u002204/28/2015 12:05  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 28, 2015\u003C/time\u003E by Radam\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-28T00:25:13Z","Content":"\n\u003Cp\u003EHere\u0027s my guess. How to get atmosphericpressure from altitude and mach number from velocity is TBD.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Ut6goCZ.png\u0022 alt=\u0022Ut6goCZ.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"waterlubber","CreatedById":119333,"CreatedDateTime":"2015-04-28T00:27:42Z","Content":"\n\u003Cp\u003EBingo! This is a really good discovery...now we know why in Das\u0027 spaceplane stream why things were so glitchy.\u003C/p\u003E\u003Cp\u003EIt looks like it\u0027s not \u003Cem\u003Ejust\u003C/em\u003E a function of intakeAir, but also of atmospheric pressure...\u003C/p\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2015-04-28T00:30:55Z","Content":"\n\u003Cp\u003EThe velocity curve looks like the value is Mach number and the second is thrust in kN.\u003C/p\u003E\u003Cp\u003EFor the atmosphere curve, the first should be pressure (relative Kerbin Sea Level) and the second is Isp multiplier. \u003C/p\u003E\u003Cp\u003E I don\u0027t know this for a fact, and I have no idea what the other values are.\u003C/p\u003E\u003Cp\u003EBest,\u003C/p\u003E\u003Cp\u003E-Slashy\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T00:33:37Z","Content":"\n\u003Cp\u003EOr like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/vwjD09z.jpg\u0022 alt=\u0022vwjD09z.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis is for turbojet. Altho I think its a bit off as KER shows twice as much thrust at mach 3 and 15km.\u003C/p\u003E\n"},{"CreatedByName":"waterlubber","CreatedById":119333,"CreatedDateTime":"2015-04-28T00:38:02Z","Content":"\n\u003Cp\u003EUh oh, I don\u0027t think we could SSTO like that...\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T01:16:03Z","Content":"\n\u003Cp\u003EWell not with turbojets, rapiers are the way. Altho I still dont know why KER is showing different (possibly more accurate) results.\u003C/p\u003E\n"},{"CreatedByName":"AmpsterMan","CreatedById":32671,"CreatedDateTime":"2015-04-28T01:26:12Z","Content":"\n\u003Cp\u003EAtmospheric pressure is a thing when it comes to planes now. So is air density. Engines perform better in the cold night because the air is denser and so there is more air to combust.\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T02:00:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AmpsterMan\u0022 data-cite=\u0022AmpsterMan\u0022\u003E\u003Cdiv\u003EAtmospheric pressure is a thing when it comes to planes now. So is air density. Engines perform better in the cold night because the air is denser and so there is more air to combust.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAFAIK temperature has nothing to do with it, in ksp.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T02:13:49Z","Content":"\n\u003Cp\u003ERadam: This is 1.0, not .90 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/93332\u0022 rel=\u0022external nofollow\u0022\u003EPlease see this thread on how floatcurve tangents work\u003C/a\u003E or \u003Ca href=\u0022http://answers.unity3d.com/questions/464782/t-is-the-math-behind-animationcurveevaluate.html\u0022 rel=\u0022external nofollow\u0022\u003Ehere if you want the math behind evaluating them\u003C/a\u003E. tl;dr the numbers are time, value, intangent, outtangent.\u003C/p\u003E\u003Cp\u003EatmCurve relates density (in atmospheres, so density/1.225) to a flow multiplier. velCurve relates mach to a flow multiplier. Final thrust is based on the requested flow (from throttle) times the flow multipliers times Isp times g0 (9.80665m/s^2).\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2015-04-28T02:24:44Z","Content":"\n\u003Cp\u003EIt used to be a linear interpolation between the values in the file. I hope that\u0027s not the case now.\u003C/p\u003E\n"},{"CreatedByName":"AmpsterMan","CreatedById":32671,"CreatedDateTime":"2015-04-28T02:30:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E -big braining mathy stuff- \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think Nathan is saying that, yes, Temperature DOES affect Density \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T03:20:32Z","Content":"\n\u003Cp\u003EKosmo-not: it was never linear interpolation, it was interpolation of a Unity AnimationCurve without tangents specified (i.e. autotangents). Look at that first link I gave. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso, again, atmosphereCurve uses pressure, and is for Isp. atmCurve uses density, and is for flow (i.e. thrust).\u003C/p\u003E\n"},{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-28T04:45:04Z","Content":"\n\u003Cp\u003EThanks for the insight Nathan. Pressure and mach make sense, but what pilots could really use is a thrust multiplier chart in terms of m/s and altitude. Does it take many assumptions to recalculate the curves for those measures?\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T07:23:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003ERadam: This is 1.0, not .90 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/93332\u0022 rel=\u0022external nofollow\u0022\u003EPlease see this thread on how floatcurve tangents work\u003C/a\u003E or \u003Ca href=\u0022http://answers.unity3d.com/questions/464782/t-is-the-math-behind-animationcurveevaluate.html\u0022 rel=\u0022external nofollow\u0022\u003Ehere if you want the math behind evaluating them\u003C/a\u003E. tl;dr the numbers are time, value, intangent, outtangent.\u003C/p\u003E\u003Cp\u003EatmCurve relates density (in atmospheres, so density/1.225) to a flow multiplier. velCurve relates mach to a flow multiplier. Final thrust is based on the requested flow (from throttle) times the flow multipliers times Isp times g0 (9.80665m/s^2).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI know it is 1.0 and I have been assuming its a curve. Thanks for the link to what it actually is. But even without exact tangents I have been able to get reasonably close. As jet seems to have constant isp figure, flow is directly proportional to thrust. \u003C/p\u003E\u003Cp\u003EI have also been assuming its basing the thrust off of stationary thrust value and multiplying it by both atmospheric pressure curve and velocity curve.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022antbin\u0022 data-cite=\u0022antbin\u0022\u003E\u003Cdiv\u003EThanks for the insight Nathan. Pressure and mach make sense, but what pilots could really use is a thrust multiplier chart in terms of m/s and altitude. Does it take many assumptions to recalculate the curves for those measures?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E3D graph I posted is reasonably close to the actual thrust vs both speed and altitude.\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2015-04-28T07:31:05Z","Content":"\n\u003Cp\u003EThrust/Pressure relation instead of ISP/Pressure? It would be really great in terms of atmospheric engines.\u003C/p\u003E\u003Cp\u003ENow I will be able to release experimental impeller part.\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T07:42:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dr. Jet\u0022 data-cite=\u0022Dr. Jet\u0022\u003E\u003Cdiv\u003EThrust/Pressure relation instead of ISP/Pressure? It would be really great in terms of atmospheric engines.\u003Cp\u003ENow I will be able to release experimental impeller part.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf your isp is constant, your thrust/pressure is also directly related. \u003C/p\u003E\u003Cp\u003EWhat would your impeller do?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AmpsterMan\u0022 data-cite=\u0022AmpsterMan\u0022\u003E\u003Cdiv\u003EI think Nathan is saying that, yes, Temperature DOES affect Density \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does in real life, while in ksp density is just directly modeled to altitude.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T08:28:37Z","Content":"\n\u003Cp\u003ERadam: Two things. one, atmCurve uses density, not pressure. Jet thrust (and you\u0027re right with constant Isp thrust is a linear function of flow) is related to density and mach, not pressure and mach. Two, density most certainly does take temperature into account. I invite you to grab AeroGUI and turn it on, and check how density changes between day and night.\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T08:59:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003ERadam: Two things. one, atmCurve uses density, not pressure. Jet thrust (and you\u0027re right with constant Isp thrust is a linear function of flow) is related to density and mach, not pressure and mach. Two, density most certainly does take temperature into account. I invite you to grab AeroGUI and turn it on, and check how density changes between day and night.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would explain thrust increase in upper layers, now I remember someone plotting temperature vs height a few versions back.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T09:27:12Z","Content":"\n\u003Cp\u003EThe atmosphere appears to follow an \u002280% Earth\u0022 pattern now, where the values at 8km on Kerbin are the same as 10km on Earth (modulo the temperature offset from sunlight and/or latitude).\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2015-04-28T10:23:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Radam\u0022 data-cite=\u0022Radam\u0022\u003E\u003Cdiv\u003EWhat would your impeller do?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESpin, buzz, consume electricity and provide thrust for tiniest unmanned drones. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003ESomething like this.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.der-schweighofer.at/public/files/300/104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg\u0022 alt=\u0022104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-28T10:27:32Z\u0022 title=\u002204/28/2015 10:27  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 28, 2015\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T11:07:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dr. Jet\u0022 data-cite=\u0022Dr. Jet\u0022\u003E\u003Cdiv\u003ESpin, buzz, consume electricity and provide thrust for tiniest unmanned drones. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cp\u003ESomething like this.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.der-schweighofer.at/public/files/300/104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.der-schweighofer.at/public/files/300/104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust replace liquid fuel requirement with electricity...\u003C/p\u003E\n"},{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-28T14:40:40Z","Content":"\n\u003Cp\u003ENathan, could you post the math relating altitude to density at the equator? And day/night if you like.\u003C/p\u003E\u003Cp\u003EAlso need the relationship between speed, altitude and mach.\u003C/p\u003E\n"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T15:57:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022antbin\u0022 data-cite=\u0022antbin\u0022\u003E\u003Cdiv\u003ENathan, could you post the math relating altitude to density at the equator? And day/night if you like.\u003Cp\u003EAlso need the relationship between speed, altitude and mach.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E340m/s = mach\u003C/p\u003E\u003Cp\u003ERelationship of speed altitude and thrust is a 3d graph. Like the one I made a few posts back. Might be slightly off but close enough.\u003C/p\u003E\u003Cp\u003ESeems like the SSTO ascent is now: ascent to 5km, break the sound barrier, pitch up if heat becomes too excessive. Switch to rocket mode at 1300ms...\u003C/p\u003E\n"}]}