{"TopicId":53503,"ForumId":55,"TopicTitle":"Suggestion for Improving SAS Algorithm","CreatedByName":"Jimbimbibble","CreatedById":77859,"CreatedDateTime":"2013-11-18T04:36:23Z","PageNum":1,"Articles":[{"CreatedByName":"Jimbimbibble","CreatedById":77859,"CreatedDateTime":"2013-11-18T04:36:23Z","Content":"\n\u003Cp\u003EMy experience with model helicopters has given me an idea for a revised SAS algorithm. Heading-hold heli gyros use a PID loop with proportional gain, derivative gain, and integral gain to maintain attitude very precisely. The proportional gain corresponds to angular velocity, derivative gain corresponds to angular acceleration, and integral gain corresponds to the angle between the set point and the current orientation. I\u0027m not sure if the game currently implements a PID loop, but I can say from experience that PID loops can hold a small heli dead strait on a gusty day. One important variable to consider in the analysis is the maximum angular acceleration of the spacecraft because SAS needs to know how quickly the ship responds in order to make sure it doesn\u0027t under/over compensate. Also, it would be good if SAS updated the attitude set point to the point where the ship should stop rotation when the controls are centered. This would prevent SAS from backtracking when you don\u0027t want it to. I would also highly recommend having SAS gains as tweakables, with d-gain and I-gain being advanced options because they usually don\u0027t need to be adjusted much for a stable ship.\u003C/p\u003E\u003Cp\u003EI\u0027m not sure if I\u0027m explaining this perfectly, but here is what SAS could do if it were set up to operate with adjustable d-gain, p-gain, and I-gain, like a heli gyro does.\u003C/p\u003E\u003Cp\u003E*Ships and aircraft would no longer wobble back and forth when SAS is engaged because the p-gain could be tweaked to stop this.\u003C/p\u003E\u003Cp\u003E*Accurate heading-hold on aircraft. You won\u0027t have to constantly readjust your attitude to maintain level flight because the I-gain and d-gain would work together to do this.\u003C/p\u003E\u003Cp\u003E*No more backtracking. You won\u0027t have to fiddle around with the controls to make small course changes because SAS won\u0027t try to return you to your previous position when you don\u0027t want it to.\u003C/p\u003E\u003Cp\u003E*Improved atmospheric stabilization performance. D-gain will prevent you from being blown off course, even if wind is added to the game.\u003C/p\u003E\n"},{"CreatedByName":"Andersenman","CreatedById":61273,"CreatedDateTime":"2013-11-19T12:19:18Z","Content":"\n\u003Cp\u003EI believe SAS does work like so. The values are available in the relevant config files. There is also \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/SAS\u0022 rel=\u0022external nofollow\u0022\u003Ewiki coverage\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-11-19T13:50:15Z","Content":"\n\u003Cp\u003ERight after I installed 0.22 (clean install into a new directory) the SAS was clearly malfunctioning. And not just SAS, I was having all kinds of issues with the game, most prominent being severe audio issues.\u003C/p\u003E\u003Cp\u003EAfter a few days things miraculously settled down and all issues are gone, including SAS issues, without me doing anything at all.\u003C/p\u003E\u003Cp\u003EPerhaps the game needed some time to settle down? I have no clue.\u003C/p\u003E\n"},{"CreatedByName":"turkwinif","CreatedById":84592,"CreatedDateTime":"2013-11-19T16:50:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003ERight after I installed 0.22 (clean install into a new directory) the SAS was clearly malfunctioning. And not just SAS, I was having all kinds of issues with the game, most prominent being severe audio issues.\u003Cp\u003EAfter a few days things miraculously settled down and all issues are gone, including SAS issues, without me doing anything at all.\u003C/p\u003E\u003Cp\u003EPerhaps the game needed some time to settle down? I have no clue.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I had the same exact problem the first few days after release. Whenever I would enable SAS, my ships would go bonkers! Without SAS, they would fly just fine. The problem disappeared for me after a few days, too. Huh, weird \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe audio is still weird for me, though.\u003C/p\u003E\n"},{"CreatedByName":"Jimbimbibble","CreatedById":77859,"CreatedDateTime":"2013-11-20T02:15:13Z","Content":"\n\u003Cp\u003EAhh, I see. I\u0027ll have to play around with the config files. However, taking into account the maximum angular acceleration of the ship and updating the set point to the point where the ship should stop is still something that I would recommend as a change. Also, when they implement tweakables, it would be nice to have gain as a tweakable to tailor SAS to each ship/aircraft without modding.\u003C/p\u003E\n"},{"CreatedByName":"Andersenman","CreatedById":61273,"CreatedDateTime":"2013-11-20T10:28:06Z","Content":"\n\u003Cp\u003EI also believe that the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/9923-0-22-Lazor-System-v31-%28Oct-17%29?p=149885\u0026amp;viewfull=1#post149885\u0022 rel=\u0022external nofollow\u0022\u003ELazor mod\u003C/a\u003E (See \u0022Lazor-guided Flight\u0022 feature) and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/12384-PART-0-22-Anatid-Robotics-MuMech-MechJeb-Autopilot-v2-1\u0022 rel=\u0022external nofollow\u0022\u003EMechjeb\u003C/a\u003E have \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/12384-PART-0-22-Anatid-Robotics-MuMech-MechJeb-Autopilot-v2-1?p=763861\u0026amp;viewfull=1#post763861\u0022 rel=\u0022external nofollow\u0022\u003Epages somewhere in their guts\u003C/a\u003E that allow twiddling with the values in flight. And then there is a possibly outdated mod, the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/35302-0-20-Trimmable-ASAS\u0022 rel=\u0022external nofollow\u0022\u003ETrimmable ASAS\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EFurther reading:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/49381-Mechjeb-How-to-make-SASS-chill-out-stop-wasting-RCS-and-shaking-things-apart?p=641736\u0026amp;viewfull=1#post641736\u0022 rel=\u0022external nofollow\u0022\u003EMechjeb - How to make SASS chill out, stop wasting RCS, and shaking things apart. (9th September 2013, 15:12)\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"allmappedout","CreatedById":57281,"CreatedDateTime":"2013-11-20T11:32:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003ERight after I installed 0.22 (clean install into a new directory) the SAS was clearly malfunctioning. And not just SAS, I was having all kinds of issues with the game, most prominent being severe audio issues.\u003Cp\u003EAfter a few days things miraculously settled down and all issues are gone, including SAS issues, without me doing anything at all.\u003C/p\u003E\u003Cp\u003EPerhaps the game needed some time to settle down? I have no clue.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe the game has its own PID controller \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe only issue I\u0027m still finding with the SAS is that when a ship doesn\u0027t have a huge amount of control authority (ie: it\u0027s a \u0027laggy\u0027 turner), when you move the ship to a specific heading, the PID controller doesn\u0027t seem to take the point where you stop putting input in as the point that you wish to remain at, and seems to compensate back to a point somewhere between where it started and where you stopped inputting the controls. This is obviously only really an issue with big rockets which take some time to turn, but I thought I may as well bring it up here; everything else works like a charm, and it certainly seems to work broadly in the same way as the OP describes.\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2013-11-20T13:43:20Z","Content":"\n\u003Cp\u003EActually, I\u0027m pretty sure the SAS is no longer a traditional PID controller... I\u0027m not exactly sure what it is, but I remember C7 made a blog post about what he did, back around 0.19/0.20 (I forget which). I think he said he dropped the D and it\u0027s now a P\u003Csup\u003E2\u003C/sup\u003EI controller, or whatever the heck that means. I\u0027m not familiar with the logic of it and how it works :/\u003C/p\u003E\n"}]}