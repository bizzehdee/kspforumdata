{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":41,"Articles":[{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-05-30T17:11:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DIGI_Byte\u0022 data-cite=\u0022DIGI_Byte\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIn other news I think I\u0027m trying to tackle a problem that\u0027s a bit big for an noob like me to tackle.\u003C/p\u003E\u003Cp\u003EI realized I want a list of targets for my plugin, looking at the scripts prior but can\u0027t figure out how I would use it.\u003C/p\u003E\u003Cp\u003EIdeally I would have buttons or a roll-out and a search feature that would list targets in a select-able list...\u003C/p\u003E\u003Cp\u003Ebut that\u0027s insane, I wouldn\u0027t even know where to start.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYour WIP post made it clearer what you were after. Refer to Unity GUI for related documentation. This should get you off the ground:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ERect windowRect = new Rect(120f, 120f, 300f, 500f);\u003Cbr\u003EVector2 scrollPos = Vector2.zero;\u003Cbr\u003E\u003Cbr\u003Evoid OnGUI()\u003Cbr\u003E{\u003Cbr\u003E    windowRect = GUI.Window(12345, windowRect, MyWindowFunction, \u0022Test Window\u0022);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Evoid MyWindowFunction(int winid)\u003Cbr\u003E{\u003Cbr\u003E    GUI.skin = HighLogic.Skin;\u003Cbr\u003E\u003Cbr\u003E    GUILayout.BeginVertical(GUILayout.ExpandWidth(true), GUILayout.ExpandHeight(true)); \u003Cbr\u003E\u003Cbr\u003E        // center label\u003Cbr\u003E        GUILayout.BeginHorizontal(GUILayout.ExpandWidth(true));\u003Cbr\u003E            GUILayout.FlexibleSpace();\u003Cbr\u003E                GUILayout.Label(\u0022Available Targets\u0022);\u003Cbr\u003E            GUILayout.FlexibleSpace();\u003Cbr\u003E        GUILayout.EndHorizontal();\u003Cbr\u003E\u003Cbr\u003E        // if there are a lot of vessels, it\u0027s going to make the window\u003Cbr\u003E        // stupid huge so let\u0027s make more efficient use of the space with\u003Cbr\u003E        // a scrolling section\u003Cbr\u003E\u003Cbr\u003E        scrollPos = GUILayout.BeginScrollView(scrollPos);\u003Cbr\u003E\u003Cbr\u003E            foreach (var vessel in FlightGlobals.Vessels)\u003Cbr\u003E                if (GUILayout.Button(vessel.name))\u003Cbr\u003E                {\u003Cbr\u003E                    ScreenMessages.PostScreenMessage(string.Format(\u0022Setting target to {0}\u0022, vessel.name), 3f, ScreenMessageStyle.UPPER_CENTER);\u003Cbr\u003E                    FlightGlobals.fetch.SetVesselTarget(vessel);\u003Cbr\u003E                }\u003Cbr\u003E\u003Cbr\u003E        GUILayout.EndScrollView();\u003Cbr\u003E\u003Cbr\u003E    GUILayout.EndVertical();\u003Cbr\u003E\u003Cbr\u003E    GUI.DragWindow();\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-05-30T21:29:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003ESince we are talking about resources, how can I add one to an EVA kerbal?\u003Cp\u003EI\u0027m looking at the source for TAC life support, but I don\u0027t really understand exactly how and when he does it.\u003C/p\u003E\u003Cp\u003ERight now I am doing this: if the active vessel is an eva, look for a part named \u0022kerbalEVA\u0022 and add the resource. However, I always stop at the log line telling me that it couldn\u0027t find a part with that name... what am I doing wrong?\u003C/p\u003E\u003Cp\u003EEDIT: forgot to say that I don\u0027t want the transfer to be automatic, like in TACLS, but it must happen on an event. You go to the part, activate the event, and receive your spare parts.\u003C/p\u003E\u003Cp\u003EEDIT AGAIN: ok, so after putting debug lines everywhere, I found out the source of the problem. Even when ActiveVessel.isEVA, the ActiveVessel is not the EVA kerbal, thus the code I had posted is awfully wrong.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually the name of the vessel is not KerbalEVA. KerbalEVA is a PartModule. To find an EVA, you need to find a part where part.Modules.Contains(\u0022KerbalEVA\u0022) is true.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EOk, I managed to find the active EVA and add a resource to it.\u003Cp\u003EHowever, this resource doesn\u0027t show up in the resource panel... does anybody know why this could be?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are using PartResourceList.Add(ConfigNode) for this, right?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T21:32:56Z\u0022 title=\u002205/30/2014 09:32  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-05-30T22:14:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EActually the name of the vessel is not KerbalEVA. KerbalEVA is a PartModule. To find an EVA, you need to find a part where part.Modules.Contains(\u0022KerbalEVA\u0022) is true.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI got that idea from the code of Taranis, but then after experimenting I settled for this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E int idx = FlightGlobals.Vessels.FindIndex(v =\u0026gt; ((v.vesselType == VesselType.EVA) \u0026amp;\u0026amp; v.isActiveVessel)); \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E You are using PartResourceList.Add(ConfigNode) for this, right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, specifically this code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif (!evaPart.Resources.Contains(\u0022SpareParts\u0022))\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022BANANA: the eva part doesn\u0027t contain spares, adding the config node\u0022);\u003Cbr\u003E                // Create the resource node and add it to the EVA kerbal\u003Cbr\u003E                ConfigNode node = new ConfigNode(\u0022RESOURCE\u0022);\u003Cbr\u003E                node.AddValue(\u0022name\u0022, \u0022SpareParts\u0022);\u003Cbr\u003E                node.AddValue(\u0022maxAmount\u0022, DangIt.Spares.MaxEvaAmount);\u003Cbr\u003E                node.AddValue(\u0022amount\u0022, amountTaken);\u003Cbr\u003E                evaPart.AddResource(node);   \u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022BANANA: the eva part already contains spares, editing the amount\u0022);\u003Cbr\u003E                evaPart.Resources[\u0022SpareParts\u0022].amount \u002B= amountTaken;\u003Cbr\u003E            }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(banana is very easy to find in the log file, until squad steals my idea)\u003C/p\u003E\u003Cp\u003EMaybe I missed some property in the config node?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T22:35:47Z\u0022 title=\u002205/30/2014 10:35  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by Ippo\u003C/strong\u003E\n\u003Cbr\u003EAdded a piece of code\n\u003C/span\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-05-30T22:22:20Z","Content":"\n\u003Cp\u003EOkay so for the past couple days I\u0027ve been having a thought, and I wanted to think it aloud here before making a whole thread about it.\u003C/p\u003E\u003Cp\u003EProcedural Fairings, NRAP, Stretchy [insert thing here]s, Procedural Parts, etc. exist. In fact there\u0027s even a mod now whose whole purpose is to let you arbitrarily resize the stock tanks and such. And I\u0027ve noticed that when one installs several mods, there inevitably end up being pages and pages of parts in some or all of the tabs, many of which are practically redundant.\u003C/p\u003E\u003Cp\u003ESo I\u0027ve been thinking KSP needs some kind of stock overhaul, reducing the tank selection, for instance, to only a few options (e.g. \u0022white tank\u0022, \u0022orange tank\u0022, \u0022long white tank\u0022, \u0022toroidal tank\u0022) and then having them be tweakable to any standard size. They\u0027d change fuel capacities based on size while maintaining the same fuel mass fraction (and in the interest of Career progression, perhaps tank types with different base mass fractions and collision tolerances would unlock at different levels, e.g. oil barrels unlock early while reinforced lightweight composite fuselages come later). Something similar could perhaps be applied to engines, wings, and probe cores. This would have the advantage that, for example, PFairings has over the other fairing mods as far as having only a few parts needed, and make tons of room for mod parts without making the menu overflow as easily.\u003C/p\u003E\u003Cp\u003EThe end result of this train of thought seems to be either to ask SQUAD to overhaul their whole part selection (which would be awesome, but probably an unreasonable request), or make an epic total conversion mod that is comprehensive enough to allow users to delete all (or at least most) of their SQUAD folder if they choose. What are my fellow modders\u0027 thoughts on this matter? Has anyone already tried this? Did I miss some fatal variable?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-05-31T00:00:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EI got that idea from the code of Taranis, but then after experimenting I settled for this:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E int idx = FlightGlobals.Vessels.FindIndex(v =\u0026gt; ((v.vesselType == VesselType.EVA) \u0026amp;\u0026amp; v.isActiveVessel)); \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYes, specifically this code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif (!evaPart.Resources.Contains(\u0022SpareParts\u0022))\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022BANANA: the eva part doesn\u0027t contain spares, adding the config node\u0022);\u003Cbr\u003E                // Create the resource node and add it to the EVA kerbal\u003Cbr\u003E                ConfigNode node = new ConfigNode(\u0022RESOURCE\u0022);\u003Cbr\u003E                node.AddValue(\u0022name\u0022, \u0022SpareParts\u0022);\u003Cbr\u003E                node.AddValue(\u0022maxAmount\u0022, DangIt.Spares.MaxEvaAmount);\u003Cbr\u003E                node.AddValue(\u0022amount\u0022, amountTaken);\u003Cbr\u003E                evaPart.AddResource(node);   \u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022BANANA: the eva part already contains spares, editing the amount\u0022);\u003Cbr\u003E                evaPart.Resources[\u0022SpareParts\u0022].amount \u002B= amountTaken;\u003Cbr\u003E            }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(banana is very easy to find in the log file, until squad steals my idea)\u003C/p\u003E\u003Cp\u003EMaybe I missed some property in the config node?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re using part.AddResource. I\u0027d try part.Resources.Add.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-05-31T09:50:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EYou\u0027re using part.AddResource. I\u0027d try part.Resources.Add.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame thing: both DO add the resource (if after that I print the value, the kerbal does contain the resource I added) but it\u0027s still not displayed in the panel.\u003C/p\u003E\u003Cp\u003EEDIT: I swear, I have no idea what changed but now it works. I didn\u0027t really change anything, just refactored things around, and now it works. What the...? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 alt=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-31T11:16:55Z\u0022 title=\u002205/31/2014 11:16  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 31, 2014\u003C/time\u003E by Ippo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-05-31T11:16:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003ESame thing: both DO add the resource (if after that I print the value, the kerbal does contain the resource I added) but it\u0027s still not displayed in the panel.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt might simply be a matter of the ResourceDisplay not being told to update. Have you tried calling ResourceDisplay.Instance.Refresh() (or perhaps ClearResourceList/CreateResourceList) after adding your resource to the kerbal?\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-05-31T11:36:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIt might simply be a matter of the ResourceDisplay not being told to update. Have you tried calling ResourceDisplay.Instance.Refresh() (or perhaps ClearResourceList/CreateResourceList) after adding your resource to the kerbal?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, this fixes the last issue that remains now. However, when I first posted it simply didn\u0027t show up, even when closing and reopening the panel.\u003C/p\u003E\u003Cp\u003EFor some reason, moving it around fixed it (most likely, moving things around I accidentally removed the bug I had put there).\u003C/p\u003E\n"},{"CreatedByName":"DIGI_Byte","CreatedById":62387,"CreatedDateTime":"2014-05-31T15:17:26Z","Content":"\n\u003Cp\u003E@Parameciumkid\u003C/p\u003E\u003Cp\u003EI totally agree that the parts need an overhaul, not so much that it should be deleted, but sorted. \u003C/p\u003E\u003Cp\u003Ewhat is lacking subcatagories. Squad have the system ready to go but haven\u0027t implimented it.\u003C/p\u003E\u003Cp\u003Ethey need to be organized into solid fuels, tanks, jets, etc etc. as its at a point where its a mess of items and 5 main tabs aren\u0027t enough.\u003C/p\u003E\n"},{"CreatedByName":"DIGI_Byte","CreatedById":62387,"CreatedDateTime":"2014-05-31T15:22:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003E--snip--\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHoly WOW, I would have never gotten that by myself. finding resources is one thing but how can you know something without knowing what you\u0027re looking for in the first place?\u003C/p\u003E\u003Cp\u003EReeper, you have my thanks. \u003C/p\u003E\u003Cp\u003EI spent the last 3 hours fiddling with it and learning what it does (just need to apply the skin, technical reasons but when I used \u0022GUI.skin\u0022 it actually made my GUI invisible)\u003C/p\u003E\u003Cp\u003EHere is it in action! \u003Ca href=\u0022http://steamcommunity.com/sharedfiles/filedetails/?id=265707531\u0022 rel=\u0022external nofollow\u0022\u003ELINK\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-05-31T21:13:02Z","Content":"\n\u003Cp\u003EQuick question: can fairings be included in parts other than engines? I.e. could I make a tank that has rounded ends, but has a fairing part that makes the ends flat when it gets stacked with other tanks?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-05-31T22:43:56Z","Content":"\n\u003Cp\u003EYes. Some command pods include them. Any part can have a tagged submodel and MODULE for hiding it based on a node no longer being attached.\u003C/p\u003E\n"},{"CreatedByName":"DIGI_Byte","CreatedById":62387,"CreatedDateTime":"2014-06-02T02:09:42Z","Content":"\n\u003Cp\u003Eso, I have a question that I can\u0027t find on the wiki tutorials. anyone know how to make a ship rotate using the modules like SAS? or even better specify a custom reaction wheel and make that give torque?\u003C/p\u003E\u003Cp\u003Eit needs to find the cannon module, and find its downward vector and align that towards the target, then update the difference in current angle/target angle and return that as a variable.\u003C/p\u003E\u003Cp\u003Esomething like what Mechjeb does.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-02T02:14:04Z\u0022 title=\u002206/02/2014 02:14  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 2, 2014\u003C/time\u003E by DIGI_Byte\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-06-02T18:45:46Z","Content":"\n\u003Cp\u003EOkay so I\u0027ve successfully made a tank with fairing caps, which is working spendidly in the VAB: it has round ends, and when I stick an engine on the bottom it becomes cylindrical.\u003C/p\u003E\u003Cp\u003EOnly problem now is that I can jettison the caps in flight, which seems dumb. Does anyone know a trick to disable ModuleJettison, or some alternate way to have toggleable mesh pieces? I\u0027ll write a plugin only if I absolutely have to.\u003C/p\u003E\n"},{"CreatedByName":"DIGI_Byte","CreatedById":62387,"CreatedDateTime":"2014-06-03T02:47:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022parameciumkid\u0022 data-cite=\u0022parameciumkid\u0022\u003E\u003Cdiv\u003EOkay so I\u0027ve successfully made a tank with fairing caps, which is working spendidly in the VAB: it has round ends, and when I stick an engine on the bottom it becomes cylindrical.\u003Cp\u003EOnly problem now is that I can jettison the caps in flight, which seems dumb. Does anyone know a trick to disable ModuleJettison, or some alternate way to have toggleable mesh pieces? I\u0027ll write a plugin only if I absolutely have to.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot sure exactly, but I did see some API stuff on the wiki, you would have to make a plugin if you want to disable it automatically. or disable it manually on your ship.\u003C/p\u003E\u003Cp\u003EAlternatively, you could not have the module on the part itself, instead use the plugin to attach the module type when it meets certain conditions (like being active, or landed) \u003C/p\u003E\u003Cp\u003ERead over these for a bit;\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/API:ConfigNode\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/API:ConfigNode\u003C/a\u003E \u0026amp; \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/API:Part\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/API:Part\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EReference: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Community_API_Documentation\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Community_API_Documentation\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-04T15:51:42Z","Content":"\n\u003Cp\u003EWhat is exactly the proper way to initialize my module before the flight? Right now I am doing this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic override void OnStart(PartModule.StartState state)\u003Cbr\u003E{\u003Cbr\u003E    if (state == StartState.PreLaunch)\u003Cbr\u003E    {\u003Cbr\u003E        this.Log(\u0022OnStart, performing initialization\u0022);\u003Cbr\u003E        // and other stuff\u003Cbr\u003E    }\u003Cbr\u003E    else\u003Cbr\u003E    {\u003Cbr\u003E        this.Log(\u0022OnStart, not initializing\u0022);\u003Cbr\u003E        // and other stuff\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd of course, in the log I get that it\u0027s not initializing:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EDangItBattery [-184916]: Entering OnStart: state is PreLaunch, Landed, enabled is True\u003Cbr\u003EDangItBattery [-184916]: OnStart, not initializing\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2014-06-04T16:35:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EWhat is exactly the proper way to initialize my module before the flight?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is what I\u0027ve been using:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic override void OnStart(PartModule.StartState state)\u003Cbr\u003E{\u003Cbr\u003E        if (state == StartState.Editor || state == StartState.None) return;\u003Cbr\u003E\u003Cbr\u003E        this.Log(\u0022OnStart, performing initialization\u0022);\u003Cbr\u003E        // and other stuff\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-04T16:58:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pizzaoverhead\u0022 data-cite=\u0022pizzaoverhead\u0022\u003E\u003Cdiv\u003EThis is what I\u0027ve been using:\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope, it doesn\u0027t do the trick for me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E I need to keep track of the part\u0027s age: if I re-do the init when state is, say, orbital or flight, I lose the recorded age.\u003C/p\u003E\u003Cp\u003ERight now I am trying this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif (state == (StartState.PreLaunch | StartState.Landed))\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGiven that StartState has the [Flags] attribute, in theory this means that it should only be true right before launching.\u003C/p\u003E\u003Cp\u003EIt is kinda true: the problem is that\u003C/p\u003E\u003Cp\u003E1) if you launch, fly a while, land, then go back to the space center and to the ship again, you are still getting (PreLaunch | Landed)\u003C/p\u003E\u003Cp\u003E2) when you launch a space place, the state is only Landed.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 alt=\u0022:mad:\u0022\u003E\u003C/p\u003E\u003Cp\u003EBasically, I need to run some code when the flight starts, and never again. Maybe someone has encountered this problem before?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-04T17:05:56Z\u0022 title=\u002206/04/2014 05:05  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 4, 2014\u003C/time\u003E by Ippo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-06-04T17:24:04Z","Content":"\n\u003Cp\u003ECreate a persistent variable, bool initialized = false.\u003C/p\u003E\u003Cp\u003ESet it to true the first time you start in flight, no matter the situation.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-06-04T17:30:52Z","Content":"\n\u003Cp\u003EI don\u0027t use PartModule.StartState, I really just use HighLogic.LoadedScene(IsFlight). And yeah, doing as NAthan said for a once only initialization does very good.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-04T18:24:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E...\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003E...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, it works \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Also thanks to PrivateFlip for suggesting the same via PM.\u003C/p\u003E\u003Cp\u003ENow I have to understand why everything screws up when going to an inactive vessel -.-\u003C/p\u003E\u003Cp\u003EEDIT: for the record, I found that this approach can be bugged by using the revert to launch button. You also need to store at what UniversalTime you performed the init, and if you revert to that time, re-do it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Eif (HighLogic.LoadedSceneIsFlight)\u003Cbr\u003E{\u003Cbr\u003E    if (Planetarium.GetUniversalTime() \u0026lt; timeInitted)\u003Cbr\u003E    {\u003Cbr\u003E        this.needsInit = true;\u003Cbr\u003E        this.timeInitted = (float)Planetarium.GetUniversalTime() \u002B 10;\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    if (!this.needsInit) return;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    this.Log(\u0022OnStart, performing initialization\u0022);\u003Cbr\u003E\u003Cbr\u003E    ...\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-04T19:11:14Z\u0022 title=\u002206/04/2014 07:11  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 4, 2014\u003C/time\u003E by Ippo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"clanehin","CreatedById":97937,"CreatedDateTime":"2014-06-05T02:12:54Z","Content":"\n\u003Cp\u003EHow do I just get work done efficiently?\u003C/p\u003E\u003Cp\u003EOk, where I am:\u003C/p\u003E\u003Cp\u003EI\u0027ve set up Visual Studio 2012, with .Net Framework 3.5 and I\u0027m able to copy my DLL into the GameData folder and see things like print statements. I\u0027ve also been able to create right-click pop-up menus on in-flight craft by extending PartModule, etc, and I\u0027m trying to get persistence with ConfigNodes to work.\u003C/p\u003E\u003Cp\u003EProblem:\u003C/p\u003E\u003Cp\u003EHow to I develop efficiently? Right now I have to copy the DLL, wait for KSP to start, and find a NullReferenceException and *restart*. Slllooooowwwwwwww. It builds up to where I\u0027m viscerally angry at every delay, like how long it takes the main menu text to float in (like one second). I mean, I don\u0027t want to be. I want to have fun.\u003C/p\u003E\u003Cp\u003EI tried deleting a lot of parts. This speeds up the boot process, but, I notice that I have NRE\u0027s internal to KSP that prevent me from launching ships. (The first ship launches, I land it around KSC, and then the second ship won\u0027t launch. I can go back and replicate it to get the stack trace if you want, but I didn\u0027t save it.) This happens even when I\u0027m using a fresh copy of KSP that I haven\u0027t installed my plugin into. The NREs go away if I don\u0027t delete any parts.\u003C/p\u003E\u003Cp\u003EIs there a \u0022blessed\u0022 lean configuration I can use? I can\u0027t justify the time I\u0027m spending on this if I can\u0027t work for an hour and see some incremental improvement. How does everyone else handle this?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-06-05T03:30:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022clanehin\u0022 data-cite=\u0022clanehin\u0022\u003E\u003Cdiv\u003EHow do I just get work done efficiently?\u003Cp\u003EOk, where I am:\u003C/p\u003E\u003Cp\u003EI\u0027ve set up Visual Studio 2012, with .Net Framework 3.5 and I\u0027m able to copy my DLL into the GameData folder and see things like print statements. I\u0027ve also been able to create right-click pop-up menus on in-flight craft by extending PartModule, etc, and I\u0027m trying to get persistence with ConfigNodes to work.\u003C/p\u003E\u003Cp\u003EProblem:\u003C/p\u003E\u003Cp\u003EHow to I develop efficiently? Right now I have to copy the DLL, wait for KSP to start, and find a NullReferenceException and *restart*. Slllooooowwwwwwww. It builds up to where I\u0027m viscerally angry at every delay, like how long it takes the main menu text to float in (like one second). I mean, I don\u0027t want to be. I want to have fun.\u003C/p\u003E\u003Cp\u003EI tried deleting a lot of parts. This speeds up the boot process, but, I notice that I have NRE\u0027s internal to KSP that prevent me from launching ships. (The first ship launches, I land it around KSC, and then the second ship won\u0027t launch. I can go back and replicate it to get the stack trace if you want, but I didn\u0027t save it.) This happens even when I\u0027m using a fresh copy of KSP that I haven\u0027t installed my plugin into. The NREs go away if I don\u0027t delete any parts.\u003C/p\u003E\u003Cp\u003EIs there a \u0022blessed\u0022 lean configuration I can use? I can\u0027t justify the time I\u0027m spending on this if I can\u0027t work for an hour and see some incremental improvement. How does everyone else handle this?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWelcome to coding KSP. You can write yourself a small KSPAddon to jump from main menu to flight, but that\u0027s about all else you can do to go faster. Apart from that, if you know some NRE\u0027s are internally to KSP, ignore them. There\u0027s a bunch floating around, like when launching a ship directly from the launchpad without going to the editor. But yes that\u0027s how we do. Code, build, copy, launch, wait, test, NRE, fix. Wash, rinse, repeat.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-06-05T03:44:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022clanehin\u0022 data-cite=\u0022clanehin\u0022\u003E\u003Cdiv\u003EHow do I just get work done efficiently?\u003Cp\u003E...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETheres a few things you can try, but if you are making plugins you do have to unload the game to change the dll between tests - so these are really just things to speed up the cycle. I documented up how I do stuff here: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/entries/1253-An-Adventure-in-Plugin-Coding-3-A-Fast-Dev-Environment-I-hope\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/entries/1253-An-Adventure-in-Plugin-Coding-3-A-Fast-Dev-Environment-I-hope\u003C/a\u003E and it works for me without any issues launching craft.\u003C/p\u003E\u003Cp\u003ESee how you go... of and I feel your pain\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EWelcome to coding KSP. You can write yourself a small KSPAddon to jump from main menu to flight, but that\u0027s about all else you can do to go faster. Apart from that, if you know some NRE\u0027s are internally to KSP, ignore them. There\u0027s a bunch floating around, like when launching a ship directly from the launchpad without going to the editor. But yes that\u0027s how we do. Code, build, copy, launch, wait, test, NRE, fix. Wash, rinse, repeat.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eah, washing and rinsing... I was missing those steps \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"clanehin","CreatedById":97937,"CreatedDateTime":"2014-06-07T00:22:32Z","Content":"\n\u003Cp\u003EHaha. Ok, thanks guys. I have a feeling I\u0027ve made it through the worst of it.\u003C/p\u003E\n"}]}