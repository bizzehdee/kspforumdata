{"TopicId":200745,"ForumId":109,"TopicTitle":"Loading times?","CreatedByName":"Tonas1997","CreatedById":180805,"CreatedDateTime":"2021-03-02T23:41:01Z","PageNum":1,"Articles":[{"CreatedByName":"Tonas1997","CreatedById":180805,"CreatedDateTime":"2021-03-02T23:41:01Z","Content":"\n\u003Cp\u003E\nAs we all know, KSP2 strives to improve upon the first game not only in terms of graphics, progression, customization, etc., but also in how well the game should perform - vessel physics, for instance, are an outstanding problem.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, I haven\u0027t seen much discussiom around memory usage and loading times. As many others, I play(ed) KSP with \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003E\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E\u003C/abbr\u003E/\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E, a couple of other realism mods and a \u003Cem\u003Emetric ton \u003C/em\u003Eof part and gameplay modifications that both filled the tech tree and added near-future stuff.\n\u003C/p\u003E\n\u003Cp\u003E\nAs such, I stopped playing once loading times went past 20 minutes. It was an incredibly frustrating experience because, while I couldn\u0027t really complain about FPS or ships blowing apart, I just didn\u0027t have enough free time to spend in waiting half-hour for the game to load. Essencially, KSP is quite moddable in its own right... but it doesn\u0027t scale well for large modpacks.\n\u003C/p\u003E\n\u003Cp\u003E\nThis has been blamed on both Unity limitations and some infamous bugs. ModManager managed (heh) to optimize loading times to a degree, but this issue runs deeper than that. Same thing happens with RAM usage.\n\u003C/p\u003E\n\u003Cp\u003E\nWill/could this be dramatically improve(d) in KSP2?\n\u003C/p\u003E\n"},{"CreatedByName":"TLTay","CreatedById":184633,"CreatedDateTime":"2021-03-03T02:54:02Z","Content":"\n\u003Cp\u003E\nI hope so. My old PC took around 25 minutes to load my heavily modded KSP install off of a Hard disk drive. I went to a new PC (largely because of my love for KSP) with a samsung 970 m2 ssd and it cut it down to a few minutes. The difference was massive. KSP load times are possibly the worst I\u0027ve ever seen. Many other games, I can\u0027t even read the tips on the loading screens because there isn\u0027t time, but not with KSP...\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-03-03T04:22:27Z","Content":"\n\u003Cp\u003E\nIt looks like it\u0027s parsing data from single core as well. There is definitely A LOT of room for optimization.\n\u003C/p\u003E\n"},{"CreatedByName":"mattinoz","CreatedById":118580,"CreatedDateTime":"2021-03-03T05:24:08Z","Content":"\n\u003Cp\u003E\nIt hasn\u0027t gotten extensive write ups to what it does at low level but look at Spacial Scene Graph discussion from fairly early on. Each ship exists in it own private universe subset of just enough to effect the gravity of the situation in seems.\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems like it does take away lot of the heavy lifting and might add lots streamlining to the load process, even maybe offload mods, assests not in scene for all we know so far.\n\u003C/p\u003E\n"},{"CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2021-03-03T10:47:53Z","Content":"\n\u003Cp\u003E\nWell, IIRC the core of KSP is more or less still the same as it was years ago - which can only be optimised so far.\u00A0 With KSP2 and using a clean slate, the game should be much more optimised to make use of current hardware. I am no programmer, but what bugs me the most is that KSP\u00A0 is loading ALL the assets into memory, resulting in a high memory load and long loading times until all assets have been loaded, all patches applied etc. I wonder - again: no programmer here - if it were not possible to only load, say the stock parts, visual/gameplay mods and then all further assets are only loaded once needed (i.e.\u00A0 a save is being loaded with certain ships using said parts or I select a part in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E).\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-03-03T11:37:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223934835\u0022 data-ipsquote-contentid=\u0022200745\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614768473\u0022 data-ipsquote-userid=\u0022118557\u0022 data-ipsquote-username=\u0022StarStreak2109\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, StarStreak2109 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI wonder - again: no programmer here - if it were not possible to only load, say the stock parts, visual/gameplay mods and then all further assets are only loaded once needed (i.e.\u00A0 a save is being loaded with certain ships using said parts or I select a part in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003E\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E\u003C/abbr\u003E).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s always a compromise between loading upfront and possible stalls when you\u0027re playing the game. I do suspect, however, that the big part of the problem is that Squad was basically building a resource system on top of resource system. The ship files are not-quite-JSON, which makes me concerned that it might be using custom parsers every time it\u0027s loading things, and that just doesn\u0027t naturally lead to anything you can stream.\n\u003C/p\u003E\n\u003Cp\u003E\nIn a perfect world, you do all your parsing upfront when you build assets for the game. Unity will do that with any internal assets - it\u0027s not going to just store raw models and materials. They get built into easy-to-ingest binary formats. Ideally, you want data on the disk to be byte-for-byte what you want in memory. That way, CPU doesn\u0027t even have to spend time with it. It can be streamed from drive to RAM and be used as soon as the process finished.\n\u003C/p\u003E\n\u003Cp\u003E\nWith a KSP ship, the engine doesn\u0027t have anything to signal it that it\u0027s going to need to load certain parts. There\u0027s nothing built into Unity that will have it recognize that you\u0027re approaching a station with a certain list of parts and it needs to make sure that models, textures, and materials for these parts are in memory, because none of these things are a part of the Unity scene. I\u0027m sure there\u0027s way to trigger that from the game code, but it essentially means building your own streaming system that works a step ahead of Unity\u0027s own. So doable, but not trivial.\n\u003C/p\u003E\n\u003Cp\u003E\nBut even then, I wouldn\u0027t expect the up-front loading to take quite so long. I\u0027m pretty sure a lot of the time is just spent parsing custom data. If you want to read a part file, you have to first read the text data from disk into memory, then parse it into some sort of a tree representation, and finally walk that tree to find the data you actually need. It\u0027s all the work that\u0027s normally done at build time done when the game is loading. This is very suboptimal.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere are a lot of ways Intercept can avoid all of this. They can find ways to use more native representations of resources, they can have custom build steps, they can cache intermediate data, and they can have some combination of all of these. It\u0027s hard to say whether any of this is being done, but there are definitely ways the loading times can be improved - with or without mods.\n\u003C/p\u003E\n"}]}