{"TopicId":202351,"ForumId":109,"TopicTitle":"Two Physics Questions","CreatedByName":"Darknote","CreatedById":112682,"CreatedDateTime":"2021-05-12T12:47:02Z","PageNum":1,"Articles":[{"CreatedByName":"Darknote","CreatedById":112682,"CreatedDateTime":"2021-05-12T12:47:02Z","Content":"\n\u003Cp\u003E\nDear Forumites,\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m posting this question as I did not find any references to these topics. Basically:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Any idea if the Devs plan to allow multiple simultaneous vessels with active physics in different parts of the solar system?\n\u003C/p\u003E\n\u003Cp\u003E\n2.\u00A0What method would be used to simulate physics on ship parts? Will each be simulated independently (As in KSP1 which causes lag after a certain number is reached). Or after the ship is build, the physics will be rendered for just that ship, and all other attached parts will be graphically rendered but with different graphical destruction reactions and still be a part of just one unit.\n\u003C/p\u003E\n\u003Cp\u003E\nIf these questions have not been asked/answered in the past or can\u0027t be answered yet, no stress, I understand!\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThank you for any information.\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2021-05-12T14:09:18Z","Content":"\n\u003Cp\u003E\nI think (1) would only happen in multiplayer games, with each player in their own physics bubble (unless the bubbles overlap, of course). I don\u0027t recall the devs saying anything specific about it, however.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom what they\u0027ve shown with (2) \u2013 although that was a quite a while ago, before the reset and switch from Star Theory to Intercept \u2013 it looks like the physics simulation is really similar to the one in KSP1, noodle rockets and all.\n\u003C/p\u003E\n\u003Cp\u003E\nThey have said that they\u0027ve found a way to support ships that are kilometres\u00A0long and composed of thousands of parts, without compromising performance. We\u0027re assuming that they have some kind of physics LOD/auto-weld type system, which programmatically keeps the physics part count to a manageable level regardless of the vessel part count. They haven\u0027t said anything specific about the solution they\u0027re using, however, and it\u0027s really been a long time since they showed the noodly gameplay clip, so\u00A0it could be they\u0027ve ditched the noodle rockets altogether and gone with something else.\n\u003C/p\u003E\n"},{"CreatedByName":"Kerminator K-100","CreatedById":204357,"CreatedDateTime":"2021-05-12T14:19:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223970991\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620823622\u0022 data-ipsquote-userid=\u0022112682\u0022 data-ipsquote-username=\u0022Darknote\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Darknote said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n2.\u00A0What method would be used to simulate physics on ship parts? Will each be simulated independently (As in KSP1 which causes lag after a certain number is reached). Or after the ship is build, the physics will be rendered for just that ship, and all other attached parts will be graphically rendered but with different graphical destruction reactions and still be a part of just one unit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt could be that they compute physics in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E, drag, etc... and then just simulate the ship as a whole. It would probably be more CPU efficient.\n\u003C/p\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2021-05-12T18:26:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223970991\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620823622\u0022 data-ipsquote-userid=\u0022112682\u0022 data-ipsquote-username=\u0022Darknote\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Darknote said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n1. Any idea if the Devs plan to allow multiple simultaneous vessels with active physics in different parts of the solar system?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThey do play to simulate acceleration due to \u003Cu\u003Elong burns of the engines\u003C/u\u003E, for far away craft not in the player\u0027s focus.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf I remember correctly, this was discussed in the long and interesting podcast (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/197507-*\u0022 rel=\u0022\u0022\u003Elink\u003C/a\u003E) six months ago --\u00A0as well as the idea of simulating to different \u0027levels of detail\u0027 (LOD) relevant to your second question.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223970991\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620823622\u0022 data-ipsquote-userid=\u0022112682\u0022 data-ipsquote-username=\u0022Darknote\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Darknote said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n2.\u00A0What method would be used to simulate physics on ship parts?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-05-12T21:36:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971023\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620828558\u0022 data-ipsquote-userid=\u0022167629\u0022 data-ipsquote-username=\u0022Brikoleur\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Brikoleur said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFrom what they\u0027ve shown with (2) \u2013 although that was a quite a while ago, before the reset and switch from Star Theory to Intercept \u2013 it looks like the physics simulation is really similar to the one in KSP1, noodle rockets and all.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo I\u0027ve been looking at LinkedIn profiles, and the person they\u0027ve hired to do physics has great background in FEM. I\u0027m actually cautiously optimistic about KSP2 physics for once. It sounds like they are still going for \u0022flexible\u0022 joints to keep the KSP style of rockets, but if they write a custom solver, we might see much better performance and far fewer Kraken appearances. (Or none!)\n\u003C/p\u003E\n\u003Cp\u003E\nIf Intercept also manages to optimize fuel and trajectory\u00A0solvers, this could give us the kind of performance KSP\u00A0should have had from the start. Smooth frame rates with thousands of parts? It\u0027s more likely than you think!\n\u003C/p\u003E\n\u003Cp\u003E\nThis could all be wishful thinking, of course, but getting people with right background working on a feature is half the battle.\n\u003C/p\u003E\n"},{"CreatedByName":"mattinoz","CreatedById":118580,"CreatedDateTime":"2021-05-13T05:07:46Z","Content":"\n\u003Cp\u003E\nThere was a brief and tantellising write up about the new \u0022spacial graph\u0022 system that was part of allowing 3\u002B Body Physics for the twins.\n\u003C/p\u003E\n\u003Cp\u003E\nNot a lot of details but it seemed like a central system keeps track of everything in the games on rails. Then spawns sub-processes with just the information needed for the physics bubble. I guess it has further refinement as to what engages with physiscs calculations. Would seem like that would make it easy to have multiple of the sub-processes within a game for things like constant acceleration out of current player scope and I assume multi-player when not directly interacting.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-05-13T08:12:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971292\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620855394\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I\u0027ve been looking at LinkedIn profiles, and the person \u003Cstrong\u003Ethey\u0027ve hired to do physics has great background in FEM\u003C/strong\u003E. I\u0027m actually cautiously optimistic about KSP2 physics for once. It sounds like they are still going for \u0022flexible\u0022 joints to keep the KSP style of rockets, but if they write a custom solver, we might see much better performance and far fewer Kraken appearances. (Or none!)\n\u003C/p\u003E\n\u003Cp\u003E\nIf Intercept also manages to optimize fuel and trajectory\u00A0solvers, this could give us the kind of performance KSP\u00A0should have had from the start. Smooth frame rates with thousands of parts? It\u0027s more likely than you think!\n\u003C/p\u003E\n\u003Cp\u003E\nThis could all be wishful thinking, of course, but getting people with right background working on a feature is half the battle.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo I google\u00A0 \u0022FEM\u0022 and assume you are talking about \u0022finite element method\u0022 and I am seeing a lot of images of simulation software simulating deformation.\n\u003C/p\u003E\n\u003Cp\u003E\nIn your opinion do you think that KSP 2\u00A0might even have flexible parts instead\u00A0of flexible joints? I know with high mesh count parts in simulation software it takes a while to model physical deformation. I figure even with low mesh counts something like this would take far long than game time to simulate. Possibly though this could all be conditionally dependent and prerendered somehow or maybe low enough mesh counts could be simulated in real time?\n\u003C/p\u003E\n\u003Cp\u003E\nHoping you could offer your professional opinion.\n\u003C/p\u003E\n"},{"CreatedByName":"Darknote","CreatedById":112682,"CreatedDateTime":"2021-05-13T12:03:03Z","Content":"\n\u003Cp\u003E\nThanks guys for the answers! And the interesting links/references \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162784-ohara/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022162784\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162784-ohara/\u0022 rel=\u0022\u0022\u003E@OHara\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57710-k2/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257710\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57710-k2/\u0022 rel=\u0022\u0022\u003E@K^2\u003C/a\u003E!!\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-05-13T20:16:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971524\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620893551\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I google\u00A0 \u0022FEM\u0022 and assume you are talking about \u0022finite element method\u0022 and I am seeing a lot of images of simulation software simulating deformation.\n\u003C/p\u003E\n\u003Cp\u003E\nIn your opinion do you think that KSP 2\u00A0might even have flexible parts instead\u00A0of flexible joints? I know with high mesh count parts in simulation software it takes a while to model physical deformation. I figure even with low mesh counts something like this would take far long than game time to simulate. Possibly though this could all be conditionally dependent and prerendered somehow or maybe low enough mesh counts could be simulated in real time?\n\u003C/p\u003E\n\u003Cp\u003E\nHoping you could offer your professional opinion.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nK^2 is probably more thinking that it would mean they have the mathmatical background to make KSP2s rigid body implementation far superior to KSP1.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDeformable meshes per part would absolutely crush performance without very special handling ah la Doom Eternal. And they didn\u0027t have to worry about the dismembered parts being in orbit lel\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-05-13T22:00:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971524\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620893551\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I google\u00A0 \u0022FEM\u0022 and assume you are talking about \u0022finite element method\u0022 and I am seeing a lot of images of simulation software simulating deformation.\n\u003C/p\u003E\n\u003Cp\u003E\nIn your opinion do you think that KSP 2\u00A0might even have flexible parts instead\u00A0of flexible joints? I know with high mesh count parts in simulation software it takes a while to model physical deformation. I figure even with low mesh counts something like this would take far long than game time to simulate. Possibly though this could all be conditionally dependent and prerendered somehow or maybe low enough mesh counts could be simulated in real time?\n\u003C/p\u003E\n\u003Cp\u003E\nHoping you could offer your professional opinion.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry, I usually link abbreviations, but forgot this time. But yes, that\u0027s the one.\n\u003C/p\u003E\n\u003Cp\u003E\nNo, like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/197414-incarnation-of-chaos/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022197414\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/197414-incarnation-of-chaos/\u0022 rel=\u0022\u0022\u003E@Incarnation of Chaos\u003C/a\u003E\u00A0says, it\u0027s more about relevant background. I don\u0027t think there is\u00A0\u003Cem\u003Eany\u003C/em\u003E\u00A0benefit\u00A0in trying to make parts flexible. But a person with FEM background should know how to optimize the joint solver. For a special case of a KSP rocket, where (almost) every joint is a weld, you don\u0027t have to start iterations from scratch. There is a way to get an approximate exact solution in a single matrix multiplication, at which point a single iteration over the joints can give you excellent precision to account for flex. Properly optimized, you can have stable rockets with thousands of parts at absolutely minimal computational cost. It won\u0027t help you during rapid disassembly, which will still tank your framerates, but I think that\u0027s something we can all live with.\n\u003C/p\u003E\n"},{"CreatedByName":"mattinoz","CreatedById":118580,"CreatedDateTime":"2021-05-14T06:11:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971884\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620943205\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry, I usually link abbreviations, but forgot this time. But yes, that\u0027s the one.\n\u003C/p\u003E\n\u003Cp\u003E\nNo, like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/197414-incarnation-of-chaos/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022197414\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/197414-incarnation-of-chaos/\u0022 rel=\u0022\u0022\u003E@Incarnation of Chaos\u003C/a\u003E\u00A0says, it\u0027s more about relevant background. I don\u0027t think there is\u00A0\u003Cem\u003Eany\u003C/em\u003E\u00A0benefit\u00A0in trying to make parts flexible. But a person with FEM background should know how to optimize the joint solver. For a special case of a KSP rocket, where (almost) every joint is a weld, you don\u0027t have to start iterations from scratch. There is a way to get an approximate exact solution in a single matrix multiplication, at which point a single iteration over the joints can give you excellent precision to account for flex. Properly optimized, you can have stable rockets with thousands of parts at absolutely minimal computational cost. It won\u0027t help you during rapid disassembly, which will still tank your framerates, but I think that\u0027s something we can all live with.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExploding in slowmo doesn\u0027t seem like a bad idea to me.\n\u003C/p\u003E\n\u003Cp\u003E\nDAMN!\n\u003C/p\u003E\n\u003Cp\u003E\nOOOooohhhhh.....\u00A0\u00A0 Pretty\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2021-05-14T07:21:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223972018\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620972712\u0022 data-ipsquote-userid=\u0022118580\u0022 data-ipsquote-username=\u0022mattinoz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, mattinoz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nExploding in slowmo doesn\u0027t seem like a bad idea to me.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIntentional slow-mo! To cover the drop in frames.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-05-14T23:11:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223972034\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620976912\u0022 data-ipsquote-userid=\u002268648\u0022 data-ipsquote-username=\u0022Master39\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, Master39 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIntentional slow-mo! To cover the drop in frames.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I don\u0027t think that\u0027s going away, sadly. I think, Havok physics would do a lot better, but it doesn\u0027t sound like we\u0027re getting that with KSP2. So the three options are either to re-compute all of the stress matrices on the fly as joints break and parts get destroyed, which is slow; to just give up and let PhysX do its thing, which is slow; or to re-write the physics solver completely from scratch, which is... I mean, it\u0027s actually not\u00A0\u003Cem\u003Ethat\u003C/em\u003E\u00A0difficult if you have experience with constraints solvers, but it\u0027s not something you just throw together in a month or two. You can build a prototype on this time scale, but then debugging, polishing, fixing some special cases...\u00A0It\u0027s a lot of work. So I can\u0027t imagine us seeing completely custom generic solver in KSP2, and that means that bad performance during \u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003ERUD\u003C/abbr\u003E on ships with excessive part count is unavoidable. But I\u0027ll take it if it\u0027s only during \u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003ERUD\u003C/abbr\u003E and we can get good performance during flight. And a custom solver for this special case is very much doable with the time Intercept has and, hopefully, with this particular hire leading the work. Fingers crossed.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-05-15T08:45:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223972668\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621033891\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah, I don\u0027t think that\u0027s going away, sadly. I think, Havok physics would do a lot better, but it doesn\u0027t sound like we\u0027re getting that with KSP2. So the three options are either to re-compute all of the stress matrices on the fly as joints break and parts get destroyed, which is slow; to just give up and let PhysX do its thing, which is slow; or to re-write the physics solver completely from scratch, which is... I mean, it\u0027s actually not\u00A0\u003Cem\u003Ethat\u003C/em\u003E\u00A0difficult if you have experience with constraints solvers, but it\u0027s not something you just throw together in a month or two. You can build a prototype on this time scale, but then debugging, polishing, fixing some special cases...\u00A0It\u0027s a lot of work. So I can\u0027t imagine us seeing completely custom generic solver in KSP2, and that means that bad performance during \u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003E\u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003ERUD\u003C/abbr\u003E\u003C/abbr\u003E on ships with excessive part count is unavoidable. But I\u0027ll take it if it\u0027s only during \u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003E\u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003ERUD\u003C/abbr\u003E\u003C/abbr\u003E and we can get good performance during flight. And a custom solver for this special case is very much doable with the time Intercept has and, hopefully, with this particular hire leading the work. Fingers crossed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSeeing as explosions were seemingly a focus from the start of development and they\u0027ve hired specialists in the field, do you think that they may have already re-written the physics solver?\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-05-15T09:47:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223972881\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621068334\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSeeing as explosions were seemingly a focus from the start of development and they\u0027ve hired specialists in the field, do you think that they may have already re-written the physics solver?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI mean, it\u0027s not like they hired Erin Catto. The guy Intercept hired has the background, but unless he\u0027s been writing his own game physics engine in his free time, I don\u0027t think he has the experience. Given the background, I have very little doubt he can learn all of it, but that takes time. And part of the issue here is that you can\u0027t really fall back on PhysX for anything, as it has very poor performance in the thing that really matters here - collision detection. So to get high performance out of \u003Cabbr title=\u0022Rapid unplanned disassembly\u0022\u003ERUD\u003C/abbr\u003E on large, complex craft, you\u0027d have to implement the whole physics engine. As in the sort of thing Havok does exclusively as their business model. Yeah, they have a lot of bells and whistles you don\u0027t need here, but to handle general carnage, you need collision tests between various primitives, preferably something you can farm out to multiple threads; a dynamic\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Bounding_volume_hierarchy\u0022 rel=\u0022external nofollow\u0022\u003EBVH\u003C/a\u003E to keep the test count reasonable, which also means a system that can update said BVH; to generate contact constraints for intersections in addition to any constraints that come from the structure; some way of splitting\u00A0collision groups into islands; and finally, generic constraints solver, one that respects limits.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a lot even if you know exactly what you\u0027re doing. But each of these also has a bunch of little gotchas that you wouldn\u0027t think about until you trip over them. I think I can write something like this at ship quality and fully optimized in about a year. But a) that\u0027s literally been part of my job for years and b) this isn\u0027t the only thing a physics programmer at Intercept is going to be doing. There is aerodynamics, orbital mechanics, various components that might interact with physics, and all the bugs in all the even remotely adjacent systems that are going to shake out. And this is Intercept physics programmer\u0027s first game job. Someone out of postdoc is no novice by any measure, but work at academia is very different from game studios, and it does take some adjusting.\u00A0So yeah, it might sound like he has 2\u002B years to implement good physics for rockets in KSP2, but realistically, he has a few months of work he can dedicate specifically to that. Maybe a year total if we\u0027re being generous. I\u0027m not going to say this is flat out impossible, but I would bet heavily against it.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the other hand, if we treat the rocket as a single body, things get a lot easier. You can either ignore all self-collisions or drastically reduce the number of tests you need to run. That way, you can rely on PhysX to handle collisions and any contacts generated. All you have to do, then, is reconcile any forces applied to the rocket. And again, if you start with assumption that the rocket is rigid, you can very cheaply compute approximate stress, use that to seed the undetermined multipliers, and then run one round of constraint solver specialized to weld constraints, which is a lot easier to handle. That\u0027s still a lot, but if you\u0027re experienced writing FEM code, there are a lot of similarities here. So I think they hired a person with the right background, and we\u0027ll see how much he manages to implement in the game. I think good framerate for high part count ships (~1,000 parts) in flight is a reasonable expectation and good frame rate when these ships blow up isn\u0027t. But we\u0027ll see. And we\u0027re still likely to get much, much better performance than in KSP in all situations. Both from general improvements to Unity engine and from work that Intercept\u0027s going to do to make KSP2 better. At least, there\u0027s no excuse for not making it better based on what I\u0027m seeing.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-05-15T09:53:17Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57710-k2/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257710\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57710-k2/\u0022 rel=\u0022\u0022\u003E@K^2\u003C/a\u003E\u00A0Thank you very much for your explanations, they are very helpful to understanding what may be going on and what to possibly expect \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"modus","CreatedById":207631,"CreatedDateTime":"2021-05-15T12:02:19Z","Content":"\n\u003Cp\u003E\nYeah really interesting to get more insight in this kind of stuff. Being a total layman I understood (most of) it, so good job!\u003Cimg alt=\u0022:0.0:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif\u0022 title=\u0022:0.0:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-16T08:01:37Z\u0022 title=\u002205/16/2021 08:01  AM\u0022 data-short=\u00223 yr\u0022\u003EMay 16, 2021\u003C/time\u003E by modus\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mattinoz","CreatedById":118580,"CreatedDateTime":"2021-05-16T07:34:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223972034\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620976912\u0022 data-ipsquote-userid=\u002268648\u0022 data-ipsquote-username=\u0022Master39\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/14/2021 at 5:21 PM, Master39 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIntentional slow-mo! To cover the drop in frames.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI was thinking more more physics \u0022unwrap\u0022 so the engine has time to keep up as it then have 4 or 8 seconds to render every detail of the explosion.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat is assuming that slowing it down would allow to avoid dropping frames.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-05-16T11:07:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223973415\u0022 data-ipsquote-contentid=\u0022202351\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621150440\u0022 data-ipsquote-userid=\u0022118580\u0022 data-ipsquote-username=\u0022mattinoz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, mattinoz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was thinking more more physics \u0022unwrap\u0022 so the engine has time to keep up as it then have 4 or 8 seconds to render every detail of the explosion.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat is assuming that slowing it down would allow to avoid dropping frames.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not sure that\u0027s possible with Unity, tbh. I mean, suppose, it took you 1s to compute one frame of physics, but there were not graphics stalls and you render on a separate thread. Common enough. You can probably keep rendering at 30 FPS on that thread and get 30 frames of graphics into that 1s of simulation. But until the simulation is finished, no positions are updated, so you have 30 frames of all the parts being in exact same place. At best, it looks exactly like if you simply ran at 1FPS. At worst, it looks a lot worse, because maybe the camera angles and FX are still updating, and now it looks like the rocket is just strobing from position to position in\u00A0an otherwise normal framerate world. \u003Cspan\u003E\u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt is possible to interpolate, of course, but that has to be supported at engine level and would involve special kind of update path for physics objects. That seems like a lot of work for an edge case that shouldn\u0027t happen in most games. Of course, KSP isn\u0027t like most games, but I doubt Unity would implement this feature just for the few exceptions. And maybe I\u0027m completely wrong about this, but I don\u0027t think there\u0027s a simple way to get around it without engine support.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat\u0027s usually done is that physics runs at some multiple of graphics framerate. So if you are rendering at 30Hz, physics might update at 30Hz or 60Hz. Maybe even higher for a racing sim or something. But if either rendering or physics starts to lag, the framerate will drop for both. And then you get a choice of whether the time step in simulation gets very large and you get all sorts of instabilities, or you stop running sim at 1:1 with real time, and things slow down. But you are still getting choppy framerate, because your limiting factor is literally how often you can update where everything is.\n\u003C/p\u003E\n"}]}