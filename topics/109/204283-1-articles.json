{"TopicId":204283,"ForumId":109,"TopicTitle":"Kerbals and landers sometimes floating slightly above the ground","CreatedByName":"gussi111","CreatedById":212979,"CreatedDateTime":"2021-08-09T15:10:04Z","PageNum":1,"Articles":[{"CreatedByName":"gussi111","CreatedById":212979,"CreatedDateTime":"2021-08-09T15:10:04Z","Content":"\n\u003Cp\u003E\nThis one always annoyed me and kind of ruined the immersion in KSP 1 just seeing objects or Kerbals floating slightly above ground, I hope they find a way to fix it or even better\u00A0add\u00A0a ground\u00A0effect like in the trailer when landing and walking around leaving footsteps behind.\u00A0-\u00A0\u003Ca href=\u0022https://youtube.com/clip/UgwVSDWIxSth4c8F6QN4AaABCQ\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://youtube.com/clip/UgwVSDWIxSth4c8F6QN4AaABCQ\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Black Dog","CreatedById":144087,"CreatedDateTime":"2021-08-10T10:28:31Z","Content":"\n\u003Cp\u003E\nSince KSP will be a completely new game that probably won\u0027t copy anything from the KSP 1 code, you can be pretty sure it will have a completely new Kraken with improved effects.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-08-10T21:39:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224017002\u0022 data-ipsquote-contentid=\u0022204283\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221628521804\u0022 data-ipsquote-userid=\u0022212979\u0022 data-ipsquote-username=\u0022gussi111\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/9/2021 at 8:10 AM, gussi111 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis one always annoyed me and kind of ruined the immersion in KSP 1 just seeing objects or Kerbals floating slightly above ground, I hope they find a way to fix it or even better\u00A0add\u00A0a ground\u00A0effect like in the trailer when landing and walking around leaving footsteps behind.\u00A0-\u00A0\u003Ca href=\u0022https://youtube.com/clip/UgwVSDWIxSth4c8F6QN4AaABCQ\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://youtube.com/clip/UgwVSDWIxSth4c8F6QN4AaABCQ\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGround effects are relatively easy. You can do most of this with decals. Ideally, you want to use virtual texturing for terrain, in which case, the cost of decals averages out to almost nothing, since you don\u0027t have to render them every frame. But even with traditional decal rendering, if you don\u0027t have too many, it\u0027s not a huge overhead. Displacement mapping can really sell the footprints being 3-dimensional despite being rendered as flat textures.\n\u003C/p\u003E\n\u003Cp\u003E\nThe landers not sitting on the surface is a separate issue. It has to do with how collision is built from the height map, and the rendered terrain is smoother than the physics terrain. This one\u0027s a little tougher to fix. In general, terrain LoD is not an easy problem to fix gracefully. Simple fixes invariably lead to some amount of floating. Thougn, IMO, that would be preferable. The correct fix for this is for wheels, kerbals, and lander legs to use a direct look-up into the terrain texture. Again, ideally, you\u0027d be using a virtual texture and a compute shader to probe the heights. That allows your physics to have the exact same terrain height as your rendering. You would have to handle LoDs separately, but so long as you store the exact position when lander was in highest LoD and then freeze it when you move further out, it should be fine. From the distance, it does mean the lander might hover above or sink a bit into terrain at lower LoD, but as that happens from a bit of a distance, it shouldn\u0027t be nearly as noticeable. You\u0027d also be able to expand the range at which this happens with better graphics hardware, as this is now entirely a GPU problem.\n\u003C/p\u003E\n\u003Cp\u003E\nThe real challenge is getting all of this to work under Unity. It does now come with basic virtual texture streaming support, which might be adequate. Ideally, you\u0027d want to do some custom rendering to virtual textures, so that you can add decals, etc. But even if it just handles LoDs for you, that\u0027s technically enough to have the functionality described above. All you have to do is make that texture available both to rendering and compute passes and you should be set for running pixel-perfect terrain collisions for landers, kerbals, and rovers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nP.S. The real power of virtual textures used for height maps is that you could actually do dynamic cratering. I know that Intercept said they have no plans for it now, but if they were to use virtual texturing for terrain they could introduce it in the future.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-08-10T21:41:28Z\u0022 title=\u002208/10/2021 09:41  PM\u0022 data-short=\u00222 yr\u0022\u003EAugust 10, 2021\u003C/time\u003E by K^2\u003C/strong\u003E\n\u003C/span\u003E\n"}]}