{"TopicId":44324,"ForumId":55,"TopicTitle":"Anti-Lag: Freezing Physics Of Stationary Designs","CreatedByName":"GrantZ9001","CreatedById":77691,"CreatedDateTime":"2013-08-29T22:19:24Z","PageNum":1,"Articles":[{"CreatedByName":"GrantZ9001","CreatedById":77691,"CreatedDateTime":"2013-08-29T22:19:24Z","Content":"\n\u003Cp\u003ESo, I\u0027m about to send a mission to Duna (\u003Ca href=\u0022http://oi43.tinypic.com/ivha92.jpg\u0022 rel=\u0022external nofollow\u0022\u003Epic related\u003C/a\u003E), but the one major problem I\u0027m facing is the amount of lag a full base suffers. It makes building the base and moving around the base a drag rather than an enjoyment. My suggestion to alleviate this lag would be the ability to freeze at least parts of the physics calculations of stationary modules. Not sure how hard this would be to implement, but I think it would make base building a lot more fun since you wouldn\u0027t have to blindly stare at the part count of each module.\u003C/p\u003E\u003Cp\u003EBTW most of the modules in my example are sub-130 part modules and I\u0027m running a decent rig (i5 2500K@~4,4GHz,GTX670,8GB DDR3,OCZ Agility3 120GB SSD), so hardware shouldn\u0027t really be a problem. I of course could go bare-bones with the designs, but where would the fun be with that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EWould anyone else wish to see something like this implemented?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-30T07:26:28Z\u0022 title=\u002208/30/2013 07:26  AM\u0022 data-short=\u002210 yr\u0022\u003EAugust 30, 2013\u003C/time\u003E by GrantZ9001\u003C/strong\u003E\n\u003Cbr\u003Etypos in the title lol\n\u003C/span\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2013-08-30T00:10:40Z","Content":"\n\u003Cp\u003Ei definitely would. id love to just be able to lock a part or collection of parts to the terrain.\u003C/p\u003E\n"},{"CreatedByName":"TheCanadianVendingMachine","CreatedById":59684,"CreatedDateTime":"2013-08-30T00:50:17Z","Content":"\n\u003Cp\u003EWell, nothing is stationary unless if you are in a perfect Geo Sync orbit. I mean perfect, as in 0 m/s of movement. Even then, you are orbiting the Sun.\u003C/p\u003E\n"},{"CreatedByName":"Person012345","CreatedById":33728,"CreatedDateTime":"2013-08-30T02:01:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheCanadianVendingMachine\u0022 data-cite=\u0022TheCanadianVendingMachine\u0022\u003E\u003Cdiv\u003EWell, nothing is stationary unless if you are in a perfect Geo Sync orbit. I mean perfect, as in 0 m/s of movement. Even then, you are orbiting the Sun.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr you know, on the ground like he said. Also being in orbit of the sun doesn\u0027t mean anything in KSP unless you\u0027re in it\u0027s SoI and not something elses. No sun-related physics (unless you count sunlight blocking) are calculated for an object in kerbin orbit for example.\u003C/p\u003E\n"},{"CreatedByName":"GrantZ9001","CreatedById":77691,"CreatedDateTime":"2013-08-30T07:24:31Z","Content":"\n\u003Cp\u003EYeah, I didn\u0027t bother with going into details what really stationary would mean, but I mainly meant landed objects with a 0,0m/s velocity on the surface of planets/moons. I know it would have an impact on the realism of the game, but I personally think smooth gameplay comes first in this case. Hopefully this could also get rid of the bug of solar panels often falling off upon loading in atmos. All of this should of course also be completely optional; something you\u0027d apply manually.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-30T07:42:39Z\u0022 title=\u002208/30/2013 07:42  AM\u0022 data-short=\u002210 yr\u0022\u003EAugust 30, 2013\u003C/time\u003E by GrantZ9001\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"innovine","CreatedById":76487,"CreatedDateTime":"2013-08-30T07:57:04Z","Content":"\n\u003Cp\u003EThe same kind of optimizations can be applied to space stations and zero-g vessels which are not currently being piloted. Eventually a station should dampen itself out and enter into a steady state. It may be rotating, but if you are not piloting it it\u0027s not possible (afaik) to impart a force on the station that would require physics and structural integrity calculations, at least until you collide/dock with it. I\u0027d very much favor disabling these calculations, or simplifying the whole station into a single rigid body.\u003C/p\u003E\n"},{"CreatedByName":"Bessy","CreatedById":30538,"CreatedDateTime":"2013-08-30T08:02:36Z","Content":"\n\u003Cp\u003Eeven then it could be made to lock the object unless movement Eg if something happens to knock a large collection of parts like a base the game could say ok movement physics active on this collection but it means aproaching a large station u get no lag till u start interacting with the docking port then its who cares the game will pull the ship in dock and be done lag or no lag it would be a great improvement for when I\u0027m trying to dock to my 300 part refueling station \u003C/p\u003E\u003Cp\u003EI wouldn\u0027t want it to de activate untill all movement was gone tho wobble etc but once its all gone why waste time untill something major changes\u003C/p\u003E\n"},{"CreatedByName":"Harguinxx","CreatedById":76917,"CreatedDateTime":"2013-08-30T08:37:25Z","Content":"\n\u003Cp\u003EVessels are loaded if they are at less than 2000 meters from you, I don\u0027t think that these can be improved without eliminate the beautiful physical interaction between objects. (an impact or a docking to an object can\u0027t be processed if the object is not loaded)\u003C/p\u003E\u003Cp\u003EWhat maybe can be upgraded, is to simplify automatically the structure into very schematic region, little larger than the vessel itself, so until you are very close the whole ship isn\u0027t loaded.... \u003C/p\u003E\u003Cp\u003EMaybe it would help with the gameplay experience, but it mean a lot of work from the devs, and an inevitable and not smooth decay of the fps just before collide. I think that these could really work very well in land bases.\u003C/p\u003E\u003Cp\u003EBut in fact the real problem is not the game optimization, the real problem is that modern processors and OSs are developed for being optimal in multithreading conditions, and these game is not. I know that this was posted one million times, and is in the \u0022do not suggest\u0022 list, but is still the major problem of the game optimization, in my opinion of course.\u003C/p\u003E\n"},{"CreatedByName":"Zeroignite","CreatedById":1377,"CreatedDateTime":"2013-08-30T14:25:12Z","Content":"\n\u003Cp\u003EI am in favor of this. FPS is a big limiting factor in base-building density, which seems a little silly to me since the base modules are all sitting stationary on the surface.\u003C/p\u003E\n"},{"CreatedByName":"Sean Mirrsen","CreatedById":3873,"CreatedDateTime":"2013-08-30T14:43:43Z","Content":"\n\u003Cp\u003EThere\u0027s this absolutely insane little thing called Detonate, which is entirely about constructing and blowing up buildings.\u003C/p\u003E\u003Cp\u003EThis game has a very noticeable function, wherein any connected collection of parts \u0022settles in\u0022 once it no longer experiences any changes in stress. This means that you are free to look at a complete skyscraper as it is standing, and at a partially destroyed building or pile of smoldering rubble once it\u0027s all over, but as soon as you hit the structure with enough force that it could create a change of stress, you are seeing a massive slowdown (relative to the complexity of the building) as the physics on it start up and start doing their thing.\u003C/p\u003E\u003Cp\u003ESomething very similar could be done to landed or orbiting craft in KSP. Once the craft\u0027s parts\u0027 movements fall below a certain threshold, and the force acting on the craft remains constant (i.e. gravity), the craft could \u0022lock in\u0022, turning off the part interactions and locking all parts in place for as long as no force is being applied to it. This would allow stationary structures such as bases and stations to be far less CPU intensive, as their physics would consist of only the collision meshes of the whole craft checking against any moving objects and the terrain - provided nothing is being done to them, i.e. docking.\u003C/p\u003E\n"},{"CreatedByName":"Harguinxx","CreatedById":76917,"CreatedDateTime":"2013-08-30T16:25:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sean Mirrsen\u0022 data-cite=\u0022Sean Mirrsen\u0022\u003E\u003Cdiv\u003EThere\u0027s this absolutely insane little thing called Detonate, which is entirely about constructing and blowing up buildings.\u003Cp\u003EThis game has a very noticeable function, wherein any connected collection of parts \u0022settles in\u0022 once it no longer experiences any changes in stress. This means that you are free to look at a complete skyscraper as it is standing, and at a partially destroyed building or pile of smoldering rubble once it\u0027s all over, but as soon as you hit the structure with enough force that it could create a change of stress, you are seeing a massive slowdown (relative to the complexity of the building) as the physics on it start up and start doing their thing.\u003C/p\u003E\u003Cp\u003ESomething very similar could be done to landed or orbiting craft in KSP. Once the craft\u0027s parts\u0027 movements fall below a certain threshold, and the force acting on the craft remains constant (i.e. gravity), the craft could \u0022lock in\u0022, turning off the part interactions and locking all parts in place for as long as no force is being applied to it. This would allow stationary structures such as bases and stations to be far less CPU intensive, as their physics would consist of only the collision meshes of the whole craft checking against any moving objects and the terrain - provided nothing is being done to them, i.e. docking.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot sure if it\u0027s so easy, a dev would know better than us, but how do you will count an impact if the ship borders are don\u0027t loaded??? you need to load the borders of each part of the craft in order to interact with them. \u003C/p\u003E\u003Cp\u003EThe game you mention probably takes a lots of parts in a single structure (easy when you are talking about a flat wall), and when the structure receive a force, then splice the structure in a thousand substructures and apply the force in the ones corresponding to the impact vector... \u003C/p\u003E\u003Cp\u003EIf you do the same in these game and you simplify the ship as a cylinder (for example), when the vessel isn\u0027t actually an exact cylinder, you will not collide in some places you should collide, you will receive an impact when there is nothing, the docking will be a way more buggy than now, and you will lose the part of realism that make this game awesome.\u003C/p\u003E\u003Cp\u003EIn conclusion, a dev would know better, buy I really don\u0027t see the way to apply your idea without making the interaction between ships a way less awesome, because I don\u0027t think that the system used in the game that you mention is applicable in KSP, nice idea though.\u003C/p\u003E\n"},{"CreatedByName":"Sean Mirrsen","CreatedById":3873,"CreatedDateTime":"2013-08-30T16:48:24Z","Content":"\n\u003Cp\u003ENo, the game literally freezes all of the parts in place, and unfreezes them all once a sufficient force is applied - because the building\u0027s collision is not simplified at all, but the interactions between them, including the mechanics of stress and intercollision, are no longer running - saving massive amounts of CPU time, because those inter-part physics calculations are what comprises like 90% of the physics load of the craft.\u003C/p\u003E\u003Cp\u003EBasically, once \u0022locked in\u0022, the craft becomes static. It stops in its last rest state, and does not run inter-part collisions because no parts are moving anymore. It can still run heat exchange, it can still run science gear and gather power (though gathering resources may not be so easy, as it\u0027ll force recalculations as the storage tanks filling will increase the stress on the craft), but the most taxing part of the physics - the treating of each part as a separate physics object and seeing if it collides with anything - no longer occurs.\u003C/p\u003E\n"},{"CreatedByName":"Munbeast","CreatedById":72120,"CreatedDateTime":"2013-08-30T17:25:22Z","Content":"\n\u003Cp\u003EThis would be pretty simple to do, it would require a bit of time tweaking to achieve the best results in different situations but the actual principle is an easy one to implement.\u003C/p\u003E\u003Cp\u003ESquad doesn\u0027t seem to do any optimisation at the moment, hence the crazy loading times, physics lag and memory usage. I\u0027m not sure if it\u0027s lack of experience in that area, or if they are waiting for the game to be almost complete and optimising then, which is a sort of sensible thing to do, but sucks for people playing the game in the meantime.\u003C/p\u003E\n"},{"CreatedByName":"Technical Ben","CreatedById":10512,"CreatedDateTime":"2013-08-30T19:14:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Harguinxx\u0022 data-cite=\u0022Harguinxx\u0022\u003E\u003Cdiv\u003EVessels are loaded if they are at less than 2000 meters from you, I don\u0027t think that these can be improved without eliminate the beautiful physical interaction between objects. (an impact or a docking to an object can\u0027t be processed if the object is not loaded)\u003Cp\u003EWhat maybe can be upgraded, is to simplify automatically the structure into very schematic region, little larger than the vessel itself, so until you are very close the whole ship isn\u0027t loaded.... \u003C/p\u003E\u003Cp\u003EMaybe it would help with the gameplay experience, but it mean a lot of work from the devs, and an inevitable and not smooth decay of the fps just before collide. I think that these could really work very well in land bases.\u003C/p\u003E\u003Cp\u003EBut in fact the real problem is not the game optimization, the real problem is that modern processors and OSs are developed for being optimal in multithreading conditions, and these game is not. I know that this was posted one million times, and is in the \u0022do not suggest\u0022 list, but is still the major problem of the game optimization, in my opinion of course.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGo back and read your post. I see posts like this on every consideration. There is at least 1 contradiction in your reply. \u0022Vessels are loaded if they are at less than 2000 meters from you\u0022 and \u0022but it mean a lot of work from the devs\u0022. If we already have it in game, the physics calculation could be set to a proximity of, say, 100m. Which is a single variable change and not a lot of work. (Actually it would be even better to scale depending on the speed of approach and the size of the object. While this takes a little more work, the variable can be replaced with a \u0022class\u0022 that checks first if the craft is within 2000m, then it\u0027s speed, then it\u0027s size, then outputs \u0022run physics yes/no\u0022. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ).\u003C/p\u003E\u003Cp\u003EIt\u0027s an idea, and it takes roughly the same amount of effort to implement as most ideas do. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EPS, mostly it\u0027s down to waiting till the right time to \u0022optimize\u0022. As refactoring, changing engines, changing artwork, changing levels, changing gameplay all mean new and different methods and requirements for optimization. So until more of the game is settled, it could be wasteful to polish the parts that will be replaced later on.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-30T19:18:05Z\u0022 title=\u002208/30/2013 07:18  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 30, 2013\u003C/time\u003E by Technical Ben\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sean Mirrsen","CreatedById":3873,"CreatedDateTime":"2013-08-30T19:54:19Z","Content":"\n\u003Cp\u003EThere\u0027s actually a massive difference between the \u0022lock-in\u0022 I propose and the physics packing that objects beyond physics range undergo. The difference is that a locked-in object still physically exists, and all of its parts are still distinct and can be interacted with. The only things they don\u0027t do is move or check for collisions/stress from each other. A locked-in object is also locked into its gravity-deformed position, and will not suffer additional stress from unlocking, whereas a packed object is packed into a rest state. You can even put a Kerbal into and out of a locked-in craft without unlocking it, provided it stands on the ground stably enough and the Kerbal is not smashing into it at 20m/s. The lock-in is a much more dynamic state of being, and just making the physics packing distance shorter will do nothing good - it will just increase the lag if you have to switch between several closely standing buildings.\u003C/p\u003E\n"},{"CreatedByName":"Harguinxx","CreatedById":76917,"CreatedDateTime":"2013-08-30T23:35:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sean Mirrsen\u0022 data-cite=\u0022Sean Mirrsen\u0022\u003E\u003Cdiv\u003ENo, the game literally freezes all of the parts in place, and unfreezes them all once a sufficient force is applied - because the building\u0027s collision is not simplified at all, but the interactions between them, including the mechanics of stress and intercollision, are no longer running - saving massive amounts of CPU time, because those inter-part physics calculations are what comprises like 90% of the physics load of the craft.\u003Cp\u003EBasically, once \u0022locked in\u0022, the craft becomes static. It stops in its last rest state, and does not run inter-part collisions because no parts are moving anymore. It can still run heat exchange, it can still run science gear and gather power (though gathering resources may not be so easy, as it\u0027ll force recalculations as the storage tanks filling will increase the stress on the craft), but the most taxing part of the physics - the treating of each part as a separate physics object and seeing if it collides with anything - no longer occurs.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you are sure that the 90% of the physics calculations are between parts of the same vessel, even if is totally static, I agree with you.\u003C/p\u003E\u003Cp\u003EI think these have to be implanted with caution, because maybe ruins the realism of the collisions, but yes, on paper it seems a very good idea, you have my approval (if it means anything XD).\u003C/p\u003E\u003Cp\u003E\u002B1\u003C/p\u003E\n"}]}