{"TopicId":74782,"ForumId":34,"TopicTitle":"[1.3] Smartstage, intelligent VAB reset button 2.9.7","CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-11T18:31:45Z","PageNum":1,"Articles":[{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-11T18:31:45Z","Content":"\n\u003Cp\u003E\nHave you ever tried to build a massive asparagus rocket and messed up the staging ?\n\u003C/p\u003E\n\u003Cp\u003E\nHere is SmartStage, just put many tanks, decouplers, fuel lines and engines, click the magic \u0022Smartstage\u0022 button and optimal staging is done.\n\u003C/p\u003E\n\u003Cp\u003E\nThe plugin only rearranges stages, no part is added or removed..\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EGet the plugin \u003Ca href=\u0022https://github.com/xytovl/SmartStage/releases/download/v2.9.7/SmartStage-2.9.7.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E\u003C/strong\u003E\u003Cstrong\u003E.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nExample of staging with default reset button:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00228GPM8rv.jpg\u0022 src=\u0022http://i.imgur.com/8GPM8rv.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nExample of Smart stage staging:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022qjo1XYf.png\u0022 src=\u0022http://i.imgur.com/qjo1XYf.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSources are available at \u003Ca href=\u0022https://github.com/xytovl/SmartStage\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/xytovl/SmartStage\u003C/a\u003E under GPLv3, feel free to submit improvements.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-06-20T18:18:05Z\u0022 title=\u002206/20/2017 06:18  PM\u0022 data-short=\u00227 yr\u0022\u003EJune 20, 2017\u003C/time\u003E by xytovl\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Helix935","CreatedById":71312,"CreatedDateTime":"2014-06-11T19:19:36Z","Content":"\n\u003Cp\u003Ehmm looks interesting i\u0027ll try it\u003C/p\u003E\n"},{"CreatedByName":"safarley2901","CreatedById":76497,"CreatedDateTime":"2014-06-11T19:48:45Z","Content":"\n\u003Cp\u003ENo Pics no clicks.\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-06-11T20:39:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022safarley2901\u0022 data-cite=\u0022safarley2901\u0022\u003E\u003Cdiv\u003ENo Pics no clicks.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs this a bot ? No images found, post added ? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe plugin \u003Cstrong\u003Eonly rearranges stages\u003C/strong\u003E, no part is added or removed.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat the point of having a picture showing nothing relevant and/or useful ? I think I\u0027ll put myself on top of some rockets and enjoy the peace in deep space... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks xytolv, but what is your definition of \u0022optimal\u0022 ? (it may be useful, as I usually forgot staging when I add decoupler and engines in a random order KSP don\u0027t like too much).\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-06-11T20:51:01Z","Content":"\n\u003Cp\u003EPut a picture of the button you click. I kid, I kid.\u003C/p\u003E\u003Cp\u003EMaybe out a before and after photo showing the staging.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-12T05:25:35Z","Content":"\n\u003Cp\u003EHere is the algorithm followed by the plugin:\u003C/p\u003E\u003Cp\u003EIt first activates launch clamps and all engines that have nothing attached at the bottom.\u003C/p\u003E\u003Cp\u003EThen it folloew fuel flow, as described in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64362-Fuel-Flow-Rules-%280-23-5%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/64362-Fuel-Flow-Rules-%280-23-5%29\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEach time a tank is fully depleted it checks if a decoupler only has empty children (ignoring sepratrons). If it is the case, the decoupler is fired as well as all its attached sepratrons.\u003C/p\u003E\u003Cp\u003EAvailable engines are recalculated and we loop to the fuel flow step.\u003C/p\u003E\u003Cp\u003EOnce we do not detect any tank depletion event the algoruthm terminates.\u003C/p\u003E\u003Cp\u003ETo be simple the idea is to turn on all the engines you can, and arrange the decouplers not to waste any fuel.\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-06-12T05:45:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xytovl\u0022 data-cite=\u0022xytovl\u0022\u003E\u003Cdiv\u003EHere is the algorithm followed by the plugin:\u003Cp\u003EIt first activates launch clamps and all engines that have nothing attached at the bottom.\u003C/p\u003E\u003Cp\u003EThen it folloew fuel flow, as described in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64362-Fuel-Flow-Rules-%280-23-5%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/64362-Fuel-Flow-Rules-%280-23-5%29\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEach time a tank is fully depleted it checks if a decoupler only has empty children (ignoring sepratrons). If it is the case, the decoupler is fired as well as all its attached sepratrons.\u003C/p\u003E\u003Cp\u003EAvailable engines are recalculated and we loop to the fuel flow step.\u003C/p\u003E\u003Cp\u003EOnce we do not detect any tank depletion event the algoruthm terminates.\u003C/p\u003E\u003Cp\u003ETo be simple the idea is to turn on all the engines you can, and arrange the decouplers not to waste any fuel.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell then something like Delta II with 3 SRBs that are ignited in the mid of air won\u0027t work well.\u003C/p\u003E\u003Cp\u003EI would consider taking TWR into consideration, though that will make the algorithm MUCH MUCH more complicated.\u003C/p\u003E\n"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2014-06-12T06:05:03Z","Content":"\n\u003Cp\u003EIs this done in the VAB or on the Launchpad?\u003C/p\u003E\u003Cp\u003E(EDIT) lol...didn\u0027t pay much attention to the Thread Title....DUH \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-12T06:29:17Z\u0022 title=\u002206/12/2014 06:29  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 12, 2014\u003C/time\u003E by Eleven\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KNSA Scientist","CreatedById":74995,"CreatedDateTime":"2014-06-12T06:07:55Z","Content":"\n\u003Cp\u003EIf you had a lander that had 4 engines on the side, those engines would fire with your algorithm because they have nothing connected at the bottom. You may need to change it, but I have zero knowlege of coding.\u003C/p\u003E\n"},{"CreatedByName":"goldstarstickergiver","CreatedById":93672,"CreatedDateTime":"2014-06-12T06:13:50Z","Content":"\n\u003Cp\u003ELooks cool, will give this a go. It may, as some people pointed out, mess up some situations, but it would be easy enough to check everything yourself afterwards. Hopefully this will save me some of those annoying ungroup;click the one you want;drag the crap to where it needs to go sort of thing.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-12T07:58:51Z","Content":"\n\u003Cp\u003EAs you may have noticed the project is very young, there must be bugs.\u003C/p\u003E\u003Cp\u003EIf you have any ship that misbehaves with my plugin, please open an issue on github with the craft file, the description of what staging you get and what you expect and required plugins.\u003C/p\u003E\u003Cp\u003EYou can also add feature requests but at the moment I do not plan to add any configuration, I first have to make sure the base algorithm works well.\u003C/p\u003E\n"},{"CreatedByName":"tomkpunkt","CreatedById":57738,"CreatedDateTime":"2014-06-12T08:46:01Z","Content":"\n\u003Cp\u003EInteresting mod, but don\u0027t work very well.\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2014-06-12T19:09:45Z","Content":"\n\u003Cp\u003EI see an even brighter future if you could provide a staging lock: Parts (I/we) connect are often placed in the wrong stage, sometimes in a really ridiculous way. Like you add a parachute for stage 7 and it winds up in 1 when you don \u0027t want it. \u003C/p\u003E\u003Cp\u003EI want to decide where parts go, not leave it to some tequila fuzzy logic (pun) and then have to reshuffle for minutes, every time. \u003C/p\u003E\u003Cp\u003EYour mod would be the ultimate VAB mod!\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-14T12:30:57Z","Content":"\n\u003Cp\u003EReleased v0.3 (and 0.2), see first post for changes.\u003C/p\u003E\u003Cp\u003E@tomkpunkt: what does not work? I can\u0027t fix issues if I have no description.\u003C/p\u003E\n"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2014-06-14T16:30:09Z","Content":"\n\u003Cp\u003EYou know what would be great!?!??!!?\u003C/p\u003E\u003Cp\u003EToolBar support \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-15T09:30:45Z","Content":"\n\u003Cp\u003EToolbar support done \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (v0.4)\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-18T21:19:02Z","Content":"\n\u003Cp\u003EI have just released an important bugfix in V0.5, the formula for fuel consumption was wrong and it would fail if you mixed solid and liquid or if you had too different ISPs.\u003C/p\u003E\u003Cp\u003EI think I have implemented my original idea and can start adding features, I will need some hints.\u003C/p\u003E\u003Cp\u003EI want to add the possibility to lock an item to a specific stage, but I have no idea on how to add the UI. Is it possible to add a right click menu to existing parts, or directly on the staging icons?\u003C/p\u003E\u003Cp\u003EAn even more advanced feature would be to force a part to be in the same stage as an other one, I imagine it like the fuel transfer system, where you select part 1, part 2 and say that part 1 is locked to part 2 stage. Is this possible ? Where can I find the API for this kind of features ?\u003C/p\u003E\n"},{"CreatedByName":"MarrusQ","CreatedById":75034,"CreatedDateTime":"2014-06-20T20:13:11Z","Content":"\n\u003Cp\u003EWell does it recognize upper stage engine that have nothing attached to their nozzle? Because I do engine clusters all the time, and since KSP does not understand what a proper loop is... I use girders to balance one tank atop another. If it does, I am speechless once again, if it doesn\u0027t then... well, there\u0027s only so much one can automate, right?\u003C/p\u003E\u003Cp\u003ESincerely\u003C/p\u003E\u003Cp\u003EMarrus\u003C/p\u003E\n"},{"CreatedByName":"OrbitalDebris","CreatedById":101515,"CreatedDateTime":"2014-06-20T23:42:14Z","Content":"\n\u003Cp\u003EYou could also add some heuristics, like for example assume that launch clamps should always go in the lowest stage and parachutes on the highest.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-26T06:19:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MarrusQ\u0022 data-cite=\u0022MarrusQ\u0022\u003E\u003Cdiv\u003EWell does it recognize upper stage engine that have nothing attached to their nozzle? Because I do engine clusters all the time, and since KSP does not understand what a proper loop is... I use girders to balance one tank atop another. If it does, I am speechless once again, if it doesn\u0027t then... well, there\u0027s only so much one can automate, right?\u003Cp\u003ESincerely\u003C/p\u003E\u003Cp\u003EMarrus\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am not 100% sure of what you propose, would it be to calculate exhaust damage and ignite engines only once it is safe ? I don\u0027t know how it is calculated ingame, I will have a look and see if I can add that.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EYou could also add some heuristics, like for example assume that launch clamps should always go in the lowest stage and parachutes on the highest.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELaunch clamps are already in the lowest stage, git version has parachutes on a separate 0 stage.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-27T21:03:04Z","Content":"\n\u003Cp\u003EBoth features have been implemented.\u003C/p\u003E\u003Cp\u003EI have released it as 1.0 as I don\u0027t think of any other feature I should implement for a first stable version.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-08-20T20:59:37Z","Content":"\n\u003Cp\u003ENew version released (1.2), which now takes into account thrust limiter. Very useful to make solid-only rockets, which are much cheaper.\u003C/p\u003E\n"},{"CreatedByName":"Andrew Hansen","CreatedById":82311,"CreatedDateTime":"2014-08-21T23:52:40Z","Content":"\n\u003Cp\u003EThis looks very interesting! More people need to see this. I\u0027ve downloaded and will try it out.\u003C/p\u003E\n"},{"CreatedByName":"JedTech","CreatedById":104003,"CreatedDateTime":"2014-08-22T04:12:17Z","Content":"\n\u003Cp\u003ELooks promising. I\u0027ll try it too. Kinda confused as to why this thread isn\u0027t more popular.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-09-07T14:04:35Z","Content":"\n\u003Cp\u003EI have just made an important fix in v1.2a.\u003C/p\u003E\u003Cp\u003EHas anyone actually installed the previous version ? It wasn\u0027t working at all for liquid fuel...\u003C/p\u003E\n"}]}