{"TopicId":205293,"ForumId":20,"TopicTitle":"Creating a Tech Tree Mod","CreatedByName":"MuriloMoreira","CreatedById":188149,"CreatedDateTime":"2021-10-18T06:18:43Z","PageNum":1,"Articles":[{"CreatedByName":"MuriloMoreira","CreatedById":188149,"CreatedDateTime":"2021-10-18T06:18:43Z","Content":"\n\u003Cp\u003E\nWell, I\u0027m trying to create a mod to change the game\u0027s stock tech tree, but I just realized it\u0027s not that simple, I don\u0027t understand how I can change the tech tree without messing with the original, I tried to see some other mods for understand how it works but so far I don\u0027t understand how it works, the mods use the Module Manager and the Community Tech Tree, the question is, what do these two mods do? I don\u0027t understand what they\u0027re there for, how can I start messing with this type of mod?\n\u003C/p\u003E\n\u003Cp\u003E\n(OBS \u003Cspan\u003E:\u00A0It\u0027s my first time trying to make a mod, so wait some stupid things.)\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"zer0Kerbal","CreatedById":190933,"CreatedDateTime":"2021-10-18T08:40:19Z","Content":"\n\u003Cp\u003E\nthere is an external mod (runs outside of KSP) that assists with this - this might help\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022129964\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed9752003843\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/191187-win-ted-ksp-tech-tree-editor-revived/\u0026amp;tab=comments\u0026amp;do=embed\u0026amp;comment=3732154\u0026amp;embedComment=3732154\u0026amp;embedDo=findComment#comment-3732154\u0022 style=\u0022height:292px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Pehvbot","CreatedById":182810,"CreatedDateTime":"2021-10-18T14:56:17Z","Content":"\n\u003Cp\u003E\nStart by taking a look at the stock tech tree cfg file in GameData/Squad/Resources/TechTree.cfg.\u00A0 Each node is a specific technology:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E\tRDNode\n\t{\n\t\tid = start\n\t\ttitle = #autoLOC_501020 //#autoLOC_501020 = Start\n\t\tdescription = #autoLOC_501021 //#autoLOC_501021 = The technology we started out with.\n\t\tcost = 0\n\t\thideEmpty = False\n\t\tnodeName = node0_start\n\t\tanyToUnlock = False\n\t\ticon = RDicon_start\n\t\tpos = -2568,1199,0\n\t\tscale = 0.6\n\t}\n\tRDNode\n\t{\n\t\tid = basicRocketry\n\t\ttitle = #autoLOC_501022 //#autoLOC_501022 = Basic Rocketry\n\t\tdescription = #autoLOC_501023 //#autoLOC_501023 = How hard can Rocket Science be anyway?\n\t\tcost = 5\n\t\thideEmpty = False\n\t\tnodeName = node1_basicRocketry\n\t\tanyToUnlock = False\n\t\ticon = RDicon_rocketry-basic\n\t\tpos = -2385,1257,0\n\t\tscale = 0.6\n\t\tParent\n\t\t{\n\t\t\tparentID = start\n\t\t\tlineFrom = RIGHT\n\t\t\tlineTo = LEFT\n\t\t}\n\t}\n...\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nFrom here you can do one of three things:\u00A0 Change the node, remove the node, add a new node.\u00A0 Notice the second node points backwards to its parent.\u00A0 If you want to make a simple change for example you could make your entire tech tree more expensive (it\u0027s a dumb example but it shows how this stuff works).\u00A0 You would create a ModuleManager script (\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E is pretty much required for any mods that change game mechanics)\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E@TechTree\n{\n\t@RDNode,*\n\t{\n\t\t@cost *= 2\n\t}\n}\n\n@TechTree\n{\n\t@RDNode[survivability]\n\t{\n\t\t%cost = 5\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nModuleManager scripts are a pretty big subject but the basic idea in this example is:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nLook for the thing called TechTree\n\u003C/li\u003E\n\u003Cli\u003E\nLook at all the things called RDNode (that\u0027s the comma \u002B star part)\n\u003C/li\u003E\n\u003Cli\u003E\nMultiply the cost in each of these by 2\n\u003C/li\u003E\n\u003Cli\u003E\nLook into the TechTree again\n\u003C/li\u003E\n\u003Cli\u003E\nLook for the RDNode called \u0027survivability\u0027\n\u003C/li\u003E\n\u003Cli\u003E\nSet its cost to 5, removing the previous change.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nCreating a new node is a bit more complicated.\u00A0 You need to place it somewhere on a grid (the pos =... line), make sure it points to it\u0027s parent, make sure any children point to it, give it an icon, a cost, etc.\u00A0 You can use examples you find as a template.\n\u003C/p\u003E\n\u003Cp\u003E\nOnce you change the tech tree itself you may then need to change the tech node the parts use.\u00A0 It would look something like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E@PART[bluedog_Centaur_Avionics]\n{\n\t%TechRequired = nasa_tech_4\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThis takes a Bluedog part and places it into a hypothetical \u0027NASA\u0027 tech tree branch you created so NASA and Soviet (Tantares) parts are researched separately.\n\u003C/p\u003E\n"},{"CreatedByName":"Pehvbot","CreatedById":182810,"CreatedDateTime":"2021-10-18T23:18:34Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EBEHOLD THE POWER OF MODULE MANAGER!\u003C/strong\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI kind of liked the idea idea of a Soviet, US split tree and I was bored, so I did just that with a single page of \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E scripts.\u00A0 The script takes the stock tree, makes two copies (US and SOVIET) and mirrors them ,then rotates the stock tree so it sits on top (i.e. west is the US, east is the USSR, and on top is the stock tree).\u00A0 It then looks for Bluedog and Tantares parts and moves them to the new trees.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe only piece that\u0027s missing is that I would like for unlocking either the US or SOVIET node automatically unlocks the stock node.\u00A0 The frustrating thing is I can do it, but it creates a spagettified mess in the R\u0026amp;D building since I can\u0027t figure out how to hide the lines going from parent to child (probably needs a DLL to handle this).\u00A0 \u00A0This isn\u0027t really a full mod and is quite brittle.\u00A0 Using anything but the stock tech tree is likely overflow the canvas space and probably create overlaps between the branches.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, you can see how you can manipulate the TechTree using \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E@TechTree\n{\n\t//sets the orgin to 0,0 to make it easier to manipulate\n\t@RDNode,*\n\t{\n\t\t@pos[0] \u002B= 2568\n\t\t@pos[1] -= 1199\n\t}\n\t//copies all the nodes except the start node, makes them russian!\n\t\u002BRDNode:HAS[~id[start]]\n\t{\n\t\t@id ^= :(.)$:$0_soviet:\n\t\t@title ^= :(.)$:$0 - SOVIET:\n\t\t@nodeName ^= :(.)$:$0_soviet:\n\t\t@Parent:HAS[~parentID[start]]\n\t\t{\n\t\t\t@parentID ^= :(.)$:$0_soviet:\n\t\t}\n\t}\n\t//copies all the nodes except the ruskies and the start, mirrors them and make them yankees\n\t\u002BRDNode:HAS[~id[start],~id[*_soviet]]\n\t{\n\t\t@id ^= :(.)$:$0_us:\n\t\t@title ^= :(.)$:$0 - US:\n\t\t@nodeName ^= :(.)$:$0_us:\n\t\t@pos[0] *= -1\n\t\t@Parent,*\n\t\t{\n\t\t\t%lineFrom = LEFT\n\t\t\t%lineTo = RIGHT\n\t\t}\n\t\t@Parent:HAS[~parentID[start]]\n\t\t{\n\t\t\t@parentID ^= :(.)$:$0_us:\n\t\t}\n\t}\n\t//rotates the stock nodes by 90deg\n\t@RDNode:HAS[~id[start],~id[*_us],~id[*_soviet]]\n\t{\n\t\tpos0 = #$pos[0]$\n\t\tpos1 = #$pos[1]$\n\t\t@pos[0] = #$pos1$\n\t\t@pos[0] *= -1.2\n\t\t@pos[1] = #$pos0$\n\t\t@pos[1] *= 0.8\n\t\t-pos0 = del\n\t\t-pos1 = del\n\n\t\t//This section will automatically unlock stock nodes when either of the cold\n\t\t//war nodes are selected.  But the cost is a spagettified mess of lines since\n\t\t//I don\u0027t know how to hide parent/child lines.  Probably needs to be done\n\t\t//via a DLL\n\t\t//%anyToUnlock = True\n\t\t//%cost = 0\n\t\t//!Parent,* {}\n\t\t//Parent\n\t\t//{\n\t\t//\tparentID = #$../id$\n\t\t//\t@parentID ^= :(.)$:$0_us:\n\t\t//}\n\t\t//Parent\n\t\t//{\n\t\t//\tparentID = #$../id$\n\t\t//\t@parentID ^= :(.)$:$0_soviet:\n\t\t//}\n\t\t\n\t\t@Parent,*\n\t\t{\n\t\t\t%lineFrom = TOP\n\t\t\t%lineTo = BOTTOM\n\t\t}\n\n\t}\n}\n\n//repositions everthing back to the center of the canvas\n@TechTree\n{\n\t@RDNode,*\n\t{\n\t\t@pos[0] -= 1900\n\t\t@pos[1] \u002B= 600\n\t}\n}\n\n//puts parts where they belong!\n@PART[bluedog_*]:HAS[~TechRequired[start]]\n{\n\t@TechRequired ^= :(.)$:$0_us:\n}\n@PART[*]:HAS[#manufacturer[Tantares*],~TechRequired[start]]\n{\n\t@TechRequired ^= :(.)$:$0_soviet:\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}