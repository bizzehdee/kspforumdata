{"TopicId":61834,"ForumId":36,"TopicTitle":"kOS Autopilot","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T17:34:35Z","PageNum":7,"Articles":[{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-01T18:11:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Boamere\u0022 data-cite=\u0022Boamere\u0022\u003E\u003Cdiv\u003EAs an absolute noob to KOS (and DOS \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E) is there a way to point towards manoeuvre node without coding a massive amount?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock steering to nextnode.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI usually disable SAS and re-enable it after the relevant code has run, like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Esas off.\u003Cbr\u003Elock steering to nextnode.\u003Cbr\u003E...stuff\u003Cbr\u003Eunlock steering.\u003Cbr\u003Esas on.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-01T18:14:13Z\u0022 title=\u002203/01/2014 06:14  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 1, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Boamere","CreatedById":68058,"CreatedDateTime":"2014-03-01T18:44:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock steering to nextnode.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI usually disable SAS and re-enable it after the relevant code has run, like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Esas off.\u003Cbr\u003Elock steering to nextnode.\u003Cbr\u003E...stuff\u003Cbr\u003Eunlock steering.\u003Cbr\u003Esas on.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (I\u0027m finding the whole thing a bit confusing, but I guess I have to start somewhere \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E)\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-02T20:55:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003EThat is what i was afraid of. I am actually just waiting for one of you to tell me that it is a huge pain and show me all of the crazy code it takes first \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E if it turns out to be not a big deal i might just leave it as is.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaving Matrix and trig primitives that we can invoke allows for imagined hardware acceleration. Even in the Apollo days they already had a hardware instruction on the Apollo Guidance Computer to do matrix algebra electronically in one step. So it\u0027s pretty realistic to have them as low-level primitives. The thing that should be left in userland is the knowledge of how you need to use those primitives to perform the rotations you\u0027re trying to do. It\u0027s still just one simple instruction to execute, but you need to know how to set it up, and it\u0027s the knowing of that in which the user\u0027s intelligence is involved.\u003C/p\u003E\u003Cp\u003EI\u0027m almost done with converting my Duna mission to kOS 0.11 so you have it as a testbed like you asked. After that I\u0027ll tackle docking and see if what\u0027s there already is enough to make it work. I suspect it now is if the issues of translation are fixed now.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-02T21:48:28Z","Content":"\n\u003Cp\u003EI have also encountered the save/load bug again where it crashes partway through loading the vessel from the persistence file and therefore truncates the ship at the spot where the kOS SCS part is located in the file. It\u0027s one of the reasons it\u0027s taken me longer than expected to update my Duna mission. I thought it was fixed but it\u0027s still happening, and I have narrowed it down to this:\u003C/p\u003E\u003Cp\u003EIf your variable context contains a vector, the bug triggers. If your variable context does not contain a vector, it doesn\u0027t seem to trigger.\u003C/p\u003E\u003Cp\u003EVectors are being saved in the persistence file like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EV ( 1 0 0 , \u0026amp; # 3 2 ; 5 0 , \u0026amp; # 3 2 ; 0 )\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(I spaced out all the characters because after about 10 attempts to try different ways to get the forum software to let me literal-protect the ampersands codes so it wouldn\u0027t interpret them I gave up. It kept mangling what I wrote even in [ code ] blocks.)\u003C/p\u003E\u003Cp\u003E32 is the decimal ASCII code for a space character. So I suspect it\u0027s trying to print it out to the file as:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Esomevariable = V(100, 50, 0)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand the spaces are being encoded with HTML-style protection, but then it doesn\u0027t know how to read those back in when loading the vessel.\u003C/p\u003E\u003Cp\u003EAt least that\u0027s my guess.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-02T22:02:57Z\u0022 title=\u002203/02/2014 10:02  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 2, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003EHad to protect my examples inside CODE blocks because the \u0026amp;# was being eaten by HTML formatting.\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-02T21:53:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIf your variable context contains a vector, the bug triggers. If your variable context does not contain a vector, it doesn\u0027t seem to trigger.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would definitly explain why you seem to be bothered more by this problem than others, as you have already stated that you do most navigational math with vectors.\u003C/p\u003E\u003Cp\u003EAlthough I do think I have seen the bug without using vectors, but that is very rare indeed. Barely ever happened, never could reproduce it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-02T22:01:18Z\u0022 title=\u002203/02/2014 10:01  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 2, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-02T23:00:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EThat would definitly explain why you seem to be bothered more by this problem than others, as you have already stated that you do most navigational math with vectors.\u003Cp\u003EAlthough I do think I have seen the bug without using vectors, but that is very rare indeed. Barely ever happened, never could reproduce it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m in the middle of performing tests trying to trigger the problem, using the simplest little vessel I can build, launching it a mere kilometer or so away from KSC, landing it there, and then opening up its SCS terminal and fiddling with setting variables and quitting and reloading the game to see if I can make it break.\u003C/p\u003E\u003Cp\u003EIn so doing I\u0027ve encountered several cases where even though I had a vector saved, it didn\u0027t break and loaded fine, so I\u0027m not sure that\u0027s the problem anymore.\u003C/p\u003E\u003Cp\u003EBut I have now noticed two new problems in doing this test:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EProblem 1: Some variables being changed to zero when re-loading from persistence:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn the terminal I do this:\u003C/p\u003E\u003Cp\u003Eset varA to 12.1.\u003C/p\u003E\u003Cp\u003Eset varB to 1230000000000000000.\u003C/p\u003E\u003Cp\u003Eset varC to \u0022string with spaces\u0022.\u003C/p\u003E\u003Cp\u003Eset varD to V(1,2,3).\u003C/p\u003E\u003Cp\u003EThen quit the game. The persistence file now contains this, which seems correct to me:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Econtext\u003Cbr\u003E{\u003Cbr\u003E\tvariables\u003Cbr\u003E\t{\u003Cbr\u003E\t\tvara = 12.1\u003Cbr\u003E\t\tvarb = 1.23E\u002B18\u003Cbr\u003E\t\tvarc = string(*)with(*)spaces\u003Cbr\u003E\t\tvard = V(1,(*)2,(*)3)\u003Cbr\u003E\t}\u003Cbr\u003E\tcontext\u003Cbr\u003E\t{\u003Cbr\u003E\t\tcontext-type = kOS.Interpreter.ImmediateMode\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(NOTE: Everywhere you see (*) above that\u0027s *ACTUALLY* this:\u003C/p\u003E\u003Cp\u003E\u0026amp; # 3 2 ;\u003C/p\u003E\u003Cp\u003EBut I haven\u0027t been successful at forcing the forum software to stop processing the ampersand directive when want to literally type it out like that.)\u003C/p\u003E\u003Cp\u003EAfter reloading that game, the vessel now does this:\u003C/p\u003E\u003Cp\u003Eprint varA.\u003C/p\u003E\u003Cp\u003E12.1\u003C/p\u003E\u003Cp\u003Eprint varB.\u003C/p\u003E\u003Cp\u003E0\u003C/p\u003E\u003Cp\u003Eprint varC.\u003C/p\u003E\u003Cp\u003E0\u003C/p\u003E\u003Cp\u003Eprint varD.\u003C/p\u003E\u003Cp\u003EV(1, 2, 3)\u003C/p\u003E\u003Cp\u003ESo it does seem to be able to parse in the vector correctly after all. I was wrong about that being the cause of it.\u003C/p\u003E\u003Cp\u003EBut, notice what happened to varB and varC. They got overwritten with zero values instead of what they are in the persistence file. Not the same error, but still something is wrong there.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EProblem 2: UNSET ALL bug\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EFurthermore, a tertiary bug I discovered in doing this was with the UNSET command. After printing the above, I then tried to prep for my next test by clearing everything out, as follows:\u003C/p\u003E\u003Cp\u003Eunset all.\u003C/p\u003E\u003Cp\u003Eprint varA.\u003C/p\u003E\u003Cp\u003EUnrecognized term: \u0027varA\u0027, Type:FINAL.\u003C/p\u003E\u003Cp\u003Eprint varB.\u003C/p\u003E\u003Cp\u003EUnrecognized term: \u0027varB\u0027, Type:FINAL.\u003C/p\u003E\u003Cp\u003Eprint varC.\u003C/p\u003E\u003Cp\u003EUnrecognized term: \u0027varC\u0027, Type:FINAL.\u003C/p\u003E\u003Cp\u003Eprint varD.\u003C/p\u003E\u003Cp\u003EV(1, 2, 3)\u003C/p\u003E\u003Cp\u003E\u0022unset all\u0022 cleared varA, varB, and varC, but not varD.\u003C/p\u003E\u003Cp\u003EThen I proceeded to re-set varD to the same value as it already had,\u003C/p\u003E\u003Cp\u003Eand then run unset all again:\u003C/p\u003E\u003Cp\u003Eset varD to V(1,2,3).\u003C/p\u003E\u003Cp\u003Eunset all.\u003C/p\u003E\u003Cp\u003Eprint varD.\u003C/p\u003E\u003Cp\u003EUnrecognized term: \u0027varD\u0027, Type:FINAL.\u003C/p\u003E\u003Cp\u003EThat time it worked. I have no idea what\u0027s going on there. It failed to UNSET varD after it had been populated by loading it from the persistence, but was able to do so after I populated it by the SET command in that particular run. But that can\u0027t be all there is to the problem because if that was it then it should have affected varA, varB, and varC just as much as varD.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-02T23:03:55Z\u0022 title=\u002203/02/2014 11:03  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 2, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-03-03T07:30:55Z","Content":"\n\u003Cp\u003EIm really glad i didnt push 11.1 to the spaceport now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E I have my dad visiting from out of town so i have been mostly incognito the last few days and for the next few days as well. Ill have to see if i can figure out these problems and get a new version out soon.\u003C/p\u003E\u003Cp\u003EThanks for your patience.\u003C/p\u003E\n"},{"CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2014-03-06T17:58:54Z","Content":"\n\u003Cp\u003EIf I might make a request, could either the RUN command be changed, or a new command almost the same as run be added, where it would not remove things like when commands or throttle and steering locks when the script ends. It would be useful for modularizing scripts, for example a small script to stage automatically when fuel runs out with a when command. You could do this by either changing the run command to not remove throttle locks and stuff when the run command has been used inside a script, or just add a new command.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-06T18:23:02Z\u0022 title=\u002203/06/2014 06:23  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 6, 2014\u003C/time\u003E by Xty\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-06T18:53:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xty\u0022 data-cite=\u0022Xty\u0022\u003E\u003Cdiv\u003EIf I might make a request, could either the RUN command be changed, or a new command almost the same as run be added, where it would not remove things like when commands or throttle and steering locks when the script ends. It would be useful for modularizing scripts, for example a small script to stage automatically when fuel runs out with a when command. You could do this by either changing the run command to not remove throttle locks and stuff when the run command has been used inside a script, or just add a new command.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat about solving it on your end? If you put the lock command in the central script with a variable, and update that variable in a child script that is run from the main script like a function call, you have what you want and the locks are only released when the main script ends. I think changing the final unlock will cause some trouble \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E This is probably a matter of creative coding.\u003C/p\u003E\u003Cp\u003EPseudocode of main script:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock steering to variable.\u003Cbr\u003Euntil value \u0026lt; 10 {\u003Cbr\u003E  run variableupdatescript.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EChild script:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset variable to (altitude/10).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-06T21:08:37Z\u0022 title=\u002203/06/2014 09:08  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 6, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-07T01:26:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EWhat about solving it on your end? If you put the lock command in the central script with a variable, and update that variable in a child script that is run from the main script like a function call, you have what you want and the locks are only released when the main script ends. I think changing the final unlock will cause some trouble \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E This is probably a matter of creative coding.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOf course that works but it defeats the point of having the logic in a child script, which is to make modules that \u0022just work\u0022 when used in the main program with just one call instead of having to putting half their logic in the main program.\u003C/p\u003E\u003Cp\u003EWhat\u0027s being asked for is the ability to something like this:\u003C/p\u003E\u003Cp\u003EMain program:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Erun emptyStager.\u003Cbr\u003E// go on to do other stuff.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EemptyStager program:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen stage:liquidfuel = 0 then {\u003Cbr\u003E  until stage:liquidfuel \u0026gt; 0 { stage. wait 0.5. }. // keep staging until there\u0027s some fuel.\u003Cbr\u003E  run emptyStager.  // re-run myself to make another \u0022when\u0022 hook for the next stage.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI tried doing this myself like that and ran into the same problem, that hook triggers you set up, like WHEN, are removed when the subprogram ends so you can\u0027t isolate any hook logic in subprograms, nor can you use subprograms with recursion to create a recurring hook like I show above.\u003C/p\u003E\u003Cp\u003EI can understand the logic with removing the ON and WHEN hooks when done with a program, for the same reason you don\u0027t want to leave throttle or steering locked when the program ends - because when the program ends you should go back to 100% manual control. BUT, throttle and steering locks go away only when the outermost program ends and you go back to immediate mode, NOT when a subprogram ends. I think ON and WHEN should work the same way, that they only go away on the final outermost program, not with a subprogram (*).\u003C/p\u003E\u003Cp\u003E(*) But that does mean that we\u0027d also need a way to explicitly end ONs and WHENs so that we can make them go away when we want to. Right now the only way to make them go away is to either trigger them, or end the subprogram. So if that explicit ending feature wasn\u0027t also added then we\u0027d run into a problem when running a very long term program (like my Duna mission) that hooks from previous steps can trigger way later after that step is done. I think doing that would require the ability to name the hooks so you could mention which one you meant when you want to remove it later.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-07T01:33:39Z\u0022 title=\u002203/07/2014 01:33  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 7, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-07T01:40:22Z","Content":"\n\u003Cp\u003EAlthough I do not feel that it means putting half the logic in the main program (as in reality the variable setting part would be much larger and the initial code is just one or two lines - which is pretty much the same in your proposal), I agree that selfsetting prerequisites would be a nice thing to have. I have fumbled around with that, but was disappointed by the lack of results. \u003C/p\u003E\u003Cp\u003EMy main fright is that we get all sorts of rogue bits staying in memory (or wherever) when programs do not throw everything out when ending. If we are going to keep the seperate script type functions - it seems that just happened by accident - we should have a good think how we want to solve that and whether that is going to be consistent with other behaviour.\u003C/p\u003E\u003Cp\u003EMaybe the capability of explicitly carrying such commands over to the main script is an option - although I have to ponder that a bit \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Developing discrete functions could be another option.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-07T01:49:11Z\u0022 title=\u002203/07/2014 01:49  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 7, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-03-07T04:08:24Z","Content":"\n\u003Cp\u003EI think for now my inclination would be to spend more time adding features to make impossible tasks available (docking, science, integration with other mods). rather than spend a lot of time on more complicated scope/grammar. \u003C/p\u003E\u003Cp\u003EI like this discussion and I am hoping we can find the right solution.\u003C/p\u003E\n"},{"CreatedByName":"kaesekuchen","CreatedById":90011,"CreatedDateTime":"2014-03-07T08:28:59Z","Content":"\n\u003Cp\u003EI\u0027ve got a question related to the current state of the direct flight control and flight \u0022orientation\u0022.\u003C/p\u003E\u003Cp\u003EDon\u0027t worry, i\u0027m not asking \u0022when the heck is it going to be released\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI couldn\u0027t help myself and again played around with orientation,steering and so on.\u003C/p\u003E\u003Cp\u003EWith the current implementation it is possible to directly command the vessel on the 3 rotation and 3 translation axes (Good job on this btw \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/p\u003E\u003Cp\u003EWhile testing around with this it occured to me, that we can apply these commands, but we are pretty much lost to reading out the actual results we achieve by this. Now, this might be something i missed, if so, disregard my inquiry.\u003C/p\u003E\u003Cp\u003ELet\u0027s look at this example:\u003C/p\u003E\u003Cp\u003EWe want to align our vessel to a certain rotation, let\u0027s say the \u0022target approach\u0022 indicator. With the automated steering we would simply \u0022lock steering to direction\u0022, direction in this case being \u0022(Target.GetWorldPos3D() - context.Vessel.GetWorldPos3D())\u0022.\u003C/p\u003E\u003Cp\u003ENow, if we would like to implement this with the direct steering controls, we need some orientation, since there are multiple ways of achieving the aforementioned direction.\u003C/p\u003E\u003Cp\u003EThis brings me to my question: Do we have a way to readout our current difference on a certain axis towards the target direction? \u003C/p\u003E\u003Cp\u003EWhat i\u0027m asking for, is something, that could be done on c# side like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E            Quaternion q1;\u003Cbr\u003E            Quaternion q2;\u003Cbr\u003E\u003Cbr\u003E            //our vessel\u0027s current rotation/orientation\u003Cbr\u003E             q1 = Target.transform.rotation;\u003Cbr\u003E            //our desired target rotation\u003Cbr\u003E             q2 = Quaternion.LookRotation((Target.GetWorldPos3D() - FlightGlobals.fetch.VesselTarget.GetVessel().GetWorldPos3D()) * -1) * Quaternion.Euler(90, 0, 0);\u003Cbr\u003E\u003Cbr\u003E                float angleYawPitch = Vector3.Angle(q1 * Vector3.up, q2 * Vector3.up);\u003Cbr\u003E                float angleYaw = Vector3.Angle(Vector3.Exclude(Target.transform.forward, q1 * Vector3.up), Vector3.Exclude(Target.transform.forward, q2 * Vector3.up));\u003Cbr\u003E                float anglePitch = Vector3.Angle(Vector3.Exclude(Target.transform.right, q1 * Vector3.up), Vector3.Exclude(Target.transform.right, q2 * Vector3.up));\u003Cbr\u003E                float angleRoll = Vector3.Angle(Vector3.Exclude(Target.transform.up, q1 * Vector3.right), Vector3.Exclude(Target.transform.up, q2 * Vector3.right));\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EangleYawPitch is the angle between our current orientation and the target on the yaw and pitch axes combined, while the other 3 angles (angleYaw,anglePitch,angleRoll) give us the angle on the according single axis.\u003C/p\u003E\u003Cp\u003ESo, to iterate on my question: at the current state, is it possible to achieve this in kOS? \u003C/p\u003E\u003Cp\u003Ethanks for reading \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-07T08:47:30Z\u0022 title=\u002203/07/2014 08:47  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 7, 2014\u003C/time\u003E by kaesekuchen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-03-11T04:58:28Z","Content":"\n\u003Cp\u003EAlright everyone, Buckle up. We have a pre-release of the new parser!\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/releases/tag/v12.0P1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/releases/tag/v12.0P1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPlease let us know if there are any troubles, as with any major rewrite there are bound to be some old bugs that are resolved and some new fun ones to discover, if you find a bug please speak up either here or in the new github tracker for the KOS organization \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EA BIG shoutout to marianoapp on all of his excellent work over the last few weeks, he deserves all of your cookies.\u003C/p\u003E\u003Cp\u003EI have been incognito the last week with a bunch of life stuff but i have been reading everything and i know about the challenges people have been having with v11.1 and I hope we can get all of that ironed out soon\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-11T05:00:29Z\u0022 title=\u002203/11/2014 05:00  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 11, 2014\u003C/time\u003E by erendrake\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-11T05:22:46Z","Content":"\n\u003Cp\u003EYay, free bugs for everyone! I am loving and hating you people right now, as my daily duties are going to suffer.\u003C/p\u003E\n"},{"CreatedByName":"kaesekuchen","CreatedById":90011,"CreatedDateTime":"2014-03-11T10:21:52Z","Content":"\n\u003Cp\u003EThanks to erendrake and marianoapp for the parser overhaul! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAfter a \u0022preliminary review\u0022 i have to say, that i like the changes. The threaded execution of scripts is a nice feature, so is the change to ship:facing actually returning useable values for all 3 axes of the vessel.\u003C/p\u003E\u003Cp\u003EHopefully i\u0027ll have some time later on to give it a more indepth spin.\u003C/p\u003E\u003Cp\u003EGood work.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-11T13:55:01Z","Content":"\n\u003Cp\u003EI probably won\u0027t have a chance to give it a good test until Friday, but I\u0027m looking forward to giving it a go.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-13T04:35:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003EAlright everyone, Buckle up. We have a pre-release of the new parser!\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/releases/tag/v12.0P1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/releases/tag/v12.0P1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPlease let us know if there are any troubles, as with any major rewrite there are bound to be some old bugs that are resolved and some new fun ones to discover, if you find a bug please speak up either here or in the new github tracker for the KOS organization \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI notice that this is not the same github page as you were using before. Have you and marianoapp moved to this new fork and all future development should happen there?\u003C/p\u003E\u003Cp\u003EAt any rate I added several issues about the new version to that page for a problems in the parser.\u003C/p\u003E\u003Cp\u003EBut the following problem is not related to the new parser and was there in the old version. Since I don\u0027t know if the old fork is being abandoned and everything is moving to the new one or not I\u0027ll report it here in the forum instead of on github:\u003C/p\u003E\u003Cp\u003EThe value of SHIP:SOLIDFUEL doesn\u0027t return zero when there\u0027s no solid fuel. Instead it says \u0022suffix SOLIDFUEL not found on object\u0022 and bombs out.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-13T06:15:10Z\u0022 title=\u002203/13/2014 06:15  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 13, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003E(changed \u0026quot;STAGE:\u0026quot; to \u0026quot;SHIP:\u0026quot;)\n\u003C/span\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-03-14T14:57:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI notice that this is not the same github page as you were using before. Have you and marianoapp moved to this new fork and all future development should happen there?\u003Cp\u003EAt any rate I added several issues about the new version to that page for a problems in the parser.\u003C/p\u003E\u003Cp\u003EBut the following problem is not related to the new parser and was there in the old version. Since I don\u0027t know if the old fork is being abandoned and everything is moving to the new one or not I\u0027ll report it here in the forum instead of on github:\u003C/p\u003E\u003Cp\u003EThe value of SHIP:SOLIDFUEL doesn\u0027t return zero when there\u0027s no solid fuel. Instead it says \u0022suffix SOLIDFUEL not found on object\u0022 and bombs out.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry im slow right now, All development is moving to the new Github organization, this weekend i have a big job of moving all of the links and such to the new one \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003Eill take a look at the SolidFuel problem, if you want to add it to the new tracker that would help.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-14T17:54:39Z","Content":"\n\u003Cp\u003EWill this release still make my ships and planets disappear?\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-15T00:03:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EWill this release still make my ships and planets disappear?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you elaborate? Because I have never heard of ships and planets disappearing through kOS\u0027s fault - not counting the half-ship bug.\u003C/p\u003E\n"},{"CreatedByName":"Jordansinn","CreatedById":75434,"CreatedDateTime":"2014-03-15T04:38:39Z","Content":"\n\u003Cp\u003EI previously had my command probes set up to have k-OS features, when I downloaded and installed the new version I encountered the problem of crafts and bodies diapering.\u003C/p\u003E\n"},{"CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2014-03-15T13:58:59Z","Content":"\n\u003Cp\u003EThe new version massacres my framerate \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E But only when I add the module to pods and probes. The standalone 1 m part seems to be fine.\u003C/p\u003E\u003Cp\u003EHas anyone else noticed this?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-15T14:14:24Z\u0022 title=\u002203/15/2014 02:14  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 15, 2014\u003C/time\u003E by ElasticRaven\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-15T19:27:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ElasticRaven\u0022 data-cite=\u0022ElasticRaven\u0022\u003E\u003Cdiv\u003EThe new version massacres my framerate \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E But only when I add the module to pods and probes. The standalone 1 m part seems to be fine.\u003Cp\u003EHas anyone else noticed this?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI found an issue using ModuleManager that spammed the log with exceptions but I thought it was an isolated case. I\u0027ll look into it.\u003C/p\u003E\n"},{"CreatedByName":"Jordansinn","CreatedById":75434,"CreatedDateTime":"2014-03-16T09:03:00Z","Content":"\n\u003Cp\u003ELock to prograde and lock throttle to 1 commands do not work while out of remote tech 2 range. The whole reason I downloaded this mod was to be able to do things while out of communications range.\u003C/p\u003E\n"}]}