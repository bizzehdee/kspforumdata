{"TopicId":10999,"ForumId":36,"TopicTitle":"What\u0026#039;s Wrong With KSP/Bumped Shader?","CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-20T09:19:42Z","PageNum":1,"Articles":[{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-20T09:19:42Z","Content":"\n\u003Cp\u003EThat\\\u0027s what is happening when I auto-generate normal maps in Unity, as suggested in \u003Ca href=\u0022http://unity3d.com/support/documentation/Manual/HOWTO-Normalmap.html\u0022 rel=\u0022external nofollow\u0022\u003EUnity Normal Maps Guide\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EIn editor:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://kerbalspaceprogram.com/forum/index.php?action=dlattach;topic=12641.0;attach=20176;image\u0022 alt=\u0022index.php?action=dlattach;topic=12641.0;attach=20176;image\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn game:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://kerbalspaceprogram.com/forum/index.php?action=dlattach;topic=12641.0;attach=20178;image\u0022 alt=\u0022index.php?action=dlattach;topic=12641.0;attach=20178;image\u0022\u003E\u003C/p\u003E\u003Cp\u003EOr am I doing something wrong? :\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd once again, how to read \u003Cem\u003Emodel.mu \u003C/em\u003Efiles to see how a\u003Cem\u003E proper \u003C/em\u003Enormal map should be made? :\\\u0027(\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-20T13:02:25Z","Content":"\n\u003Cp\u003EWell, everything\\\u0027s fine with \u003Cem\u003EKSP/Bumped\u003C/em\u003E shader; it\\\u0027s either \u003Cem\u003EUnity\u003C/em\u003E completely sucks in building normal maps (but it displays them properly in the editor...) or \u003Cem\u003EPart Tools\u003C/em\u003E screw them up when converting.\u003C/p\u003E\u003Cp\u003EAnyways, \u003Ca href=\u0022http://developer.nvidia.com/nvidia-texture-tools-adobe-photoshop\u0022 rel=\u0022external nofollow\u0022\u003ENVIDIA Normal Map filter for Photoshop\u003C/a\u003E totally works:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://kerbalspaceprogram.com/forum/index.php?action=dlattach;topic=12641.0;attach=20198;image\u0022 alt=\u0022index.php?action=dlattach;topic=12641.0;attach=20198;image\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd as for Gimp users... they\\\u0027re a bit out of luck today =P\u003C/p\u003E\n"},{"CreatedByName":"AdmiralStewart","CreatedById":20612,"CreatedDateTime":"2012-05-20T17:55:02Z","Content":"\n\u003Cp\u003ENever used unity; it\\\u0027s taken me a couple hours just to get my first test part displayed and in the correct orientation (without the node_collider showing up - o_O). If I might ask, how are you applying the normal maps? \u003C/p\u003E\u003Cp\u003EI\\\u0027ve got both maps imported, and their material shaders set (texture map as Diffuse, normal map as KSP/Bumped) but I seem to only be able to apply one at a time to the zTank mesh.\u003C/p\u003E\u003Cp\u003ESee pics: \u003Ca href=\u0022http://imgur.com/a/hPg5R#1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/hPg5R#1\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-20T17:57:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AdmiralStewart\u0022 data-cite=\u0022AdmiralStewart\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ENever used unity; it\\\u0027s taken me a couple hours just to get my first test part displayed and in the correct orientation (without the node_collider showing up - o_O). If I might ask, how are you applying the normal maps? \u003C/p\u003E\u003Cp\u003EI\\\u0027ve got both maps imported, and their material shaders set (texture map as Diffuse, normal map as KSP/Bumped) but I seem to only be able to apply one at a time to the zTank mesh.\u003C/p\u003E\u003Cp\u003ESee pics: \u003Ca href=\u0022http://imgur.com/a/hPg5R#1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/hPg5R#1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003ESelect\u003Cem\u003E zTank_norm \u003C/em\u003Ematerial (as shown in your first picture), and click on its name in \u003Cem\u003EInspector. \u003C/em\u003EYou\\\u0027ll see \u003Cem\u003Etwo \u003C/em\u003Etexture slots there -- one for a texture and another one for normal map \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\n"},{"CreatedByName":"AdmiralStewart","CreatedById":20612,"CreatedDateTime":"2012-05-20T18:14:06Z","Content":"\n\u003Cp\u003EAha! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E Thanks!\u003C/p\u003E\u003Cp\u003EScreenshots for other noobs:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/a/1BZTV\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/1BZTV\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-20T19:43:08Z","Content":"\n\u003Cp\u003EI have problems as well with normal maps in Unity and KSP. \u003C/p\u003E\u003Cp\u003EI have a rather flat model as a starting point, a low-poly model (here shown without diffuse texture for clarity):\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img16.imageshack.us/img16/5245/rendermaxnonormal.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://img16.imageshack.us/img16/5245/rendermaxnonormal.th.jpg\u0022 alt=\u0022rendermaxnonormal.th.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThen I generated normal maps, part by using the \u0027Render To Texture\u0027 utility of Max (I made a high poly model for that) and in part using Nvisdia plugin for Photoshop. The rendering of the new model with normal maps in Max is good:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img6.imageshack.us/img6/805/rendermax.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://img6.imageshack.us/img6/805/rendermax.th.jpg\u0022 alt=\u0022rendermax.th.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBut when imported in Unity and applied the KSP/Bumped shader, shadows are reverted in the up/down direction:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img703.imageshack.us/img703/8185/renderunity.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://img703.imageshack.us/img703/8185/renderunity.th.jpg\u0022 alt=\u0022renderunity.th.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EOther example:\u003C/p\u003E\u003Cp\u003Ein Max:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img213.imageshack.us/img213/7991/rendermax2.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://img213.imageshack.us/img213/7991/rendermax2.th.jpg\u0022 alt=\u0022rendermax2.th.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ein Unity:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img198.imageshack.us/img198/5889/renderunity2.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://img198.imageshack.us/img198/5889/renderunity2.th.jpg\u0022 alt=\u0022renderunity2.th.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003Ein game, shading is wrong as well:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img825.imageshack.us/img825/1508/screenshot9ba.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://img825.imageshack.us/img825/1508/screenshot9ba.th.png\u0022 alt=\u0022screenshot9ba.th.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope there is a way for making normal maps generated in Max and using Photoshop Nvidia plugin to be correctly displayed in Unity and in game....\u003C/p\u003E\u003Cp\u003EMaraz\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-20T20:53:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maraz\u0022 data-cite=\u0022Maraz\u0022\u003E\u003Cdiv\u003EBut when imported in Unity and applied the KSP/Bumped shader, shadows are reverted in the up/down direction:\u003C/div\u003E\u003C/blockquote\u003ECheck that texture\\\u0027s settings in Unity. \u003Cp\u003E\u003Cem\u003ETexture Type = Normal Map\u003C/em\u003E\u003C/p\u003E\u003Cp\u003Eand\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EGenerate from Grayscale = OFF \u003C/em\u003E\u003C/p\u003E\u003Cp\u003E(since you\\\u0027ve already generated a normal map using NVidia plugin).\u003C/p\u003E\u003Cp\u003EIf these settings are right, and model is still displayed wrong, PM me .DAE file and a normal map, I\\\u0027ll try to sort it out.\u003C/p\u003E\u003Cp\u003EUPD (upon closer inspection of your pictures): BTW try to setup the light in Unity exactly the same way as it\\\u0027s done in Max. The lights are quite different in 2nd and 3d pictures; it\\\u0027s hard to judge is there something wrong with normals \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-20T22:13:55Z","Content":"\n\u003Cp\u003EThanks for your help.\u003C/p\u003E\u003Cp\u003EI checked the texture settings and they are those you wrote.\u003C/p\u003E\u003Cp\u003EBy moving the light in the Unity and Max models one can see celarly that shading is wrong in the Unity model, because light seems to be coming from the bottom when instead it is over the model.\u003C/p\u003E\u003Cp\u003EI am sending you via PM the needed resources.\u003C/p\u003E\u003Cp\u003EBye\u003C/p\u003E\u003Cp\u003EMaraz\u003C/p\u003E\n"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-21T18:12:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maraz\u0022 data-cite=\u0022Maraz\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EBy moving the light in the Unity and Max models one can see celarly that shading is wrong in the Unity model, because light seems to be coming from the bottom when instead it is over the model.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks to Tosh, the problem was solved by inverting the Green channel in Photoshop, thanks Tosh!\u003C/p\u003E\u003Cp\u003EMaeaz\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-21T18:20:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maraz\u0022 data-cite=\u0022Maraz\u0022\u003E\u003Cdiv\u003EThanks to Tosh, the problem was solved by inverting the Green channel in Photoshop, thanks Tosh!\u003C/div\u003E\u003C/blockquote\u003EYou\\\u0027re welcome \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EBTW from the files you\\\u0027ve sent me I finally learned how to make bevels. Thanks a lot))\u003C/p\u003E\n"}]}