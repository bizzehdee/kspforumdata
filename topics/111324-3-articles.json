{"TopicId":111324,"ForumId":32,"TopicTitle":"Squadcast Summary (2015-05-30) - Mu Joins In!","CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-05-30T00:46:54Z","PageNum":3,"Articles":[{"CreatedByName":"Tankman101","CreatedById":144359,"CreatedDateTime":"2015-05-30T12:07:50Z","Content":"\u003E \n\u003E The U5 physics benchmarks I\u0027ve read about show significant performance improvements even when single-threaded, sometimes as much as 30%. I\u0027m expecting to see a modest performance increase for single craft and a bigger jump for multiple craft in physics range.\n\nThat\u0027s not really related to the multi-threading/multicore issue."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T12:12:44Z","Content":"\u003E \n\u003E That\u0027s not really related to the multi-threading/multicore issue.\n\nPlease reread the post I quoted, my comment is relevant to it."},{"CreatedByName":"Tankman101","CreatedById":144359,"CreatedDateTime":"2015-05-30T12:19:21Z","Content":"\u003E \n\u003E Please reread the post I quoted, my comment is relevant to it.\n\nPlease re-read the chain of posts that you replied to."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T12:25:12Z","Content":"\u003E \n\u003E Please re-read the chain of posts that you replied to.\n\nI read it. The comments are saying that multithreaded physics are likely to be one thread-per-vessel (which I suspect as well). Majorjim then said if U5 only improves performance when two or more ships are in physics range then it\u0027s not much of an improvement. So I mentioned that U5 also delivers single thread performance benefits, so we should see somewhat better performance in single ship scenarios, too. How is that not relevant?"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-05-30T12:25:42Z","Content":"Wow the dev change is huge! And multiplayer is coming sooner than I expected (I was planning to wait a few more years)"},{"CreatedByName":"Tankman101","CreatedById":144359,"CreatedDateTime":"2015-05-30T12:29:38Z","Content":"\u003E \n\u003E I read it. The comments are saying that multithreaded physics are likely to be one thread-per-vessel (which I suspect as well). Majorjim then said if U5 only improves performance when two or more ships are in physics range then it\u0027s not much of an improvement. So I mentioned that U5 also delivers single thread performance benefits, so we should see somewhat better performance in single ship scenarios, too. How is that not relevant?\n\nPretty sure the comment was about \u0022It would be a moot point for them to mention (multithreading) performence improvements\u0022\n\nEither that or the conversation switched topics without me noticing."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T12:38:19Z","Content":"\u003E \n\u003E Pretty sure the comment was about \u0022It would be a moot point for them to mention (multithreading) performence improvements\u0022\n\u003E Either that or the conversation switched topics without me noticing.\n\nRead the post I quoted again, don\u0027t paraphrase it and insert \u0022multithreading\u0022. It says (emphasis mine):\n\n\u003E \n\u003E Considering two craft are rarely, if ever flown together it would be moot for Squad to even suggest that the **change to unity 5** would result in performance increases..\n\nI am suggesting that the change to Unity 5 will increase performance, even for single craft/single thread scenarios."},{"CreatedByName":"Tankman101","CreatedById":144359,"CreatedDateTime":"2015-05-30T12:39:29Z","Content":"\u003E \n\u003E Read the post I quoted again, don\u0027t paraphrase it and insert \u0022multithreading\u0022. It says (emphasis mine):\n\u003E I am suggesting that the change to Unity 5 will increase performance, even for single craft/single thread scenarios.\n\nSo basically the conversation somehow switched from multicore/thread to general performence without me noticing.\n\nOh well."},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-30T12:46:34Z","Content":"\u003E \n\u003E If KSP is limited to use one core (affinity) it performs worse than when it is allowed to use multiple (two) cores.\n\nI was assuming that was common knowledge (and logical). Thanks for pointing it out though.\n\nAlthough that will only be true when the code supports multiple cores, (to all intents and purposes) when KSP is a true 64-bit program (unlike previous 64-bit versions which only allowed use of extra RAM). Until then it won\u0027t make any difference.\n\nIf you were replying to the next sentence and meant threads (not cores), that\u0027s technically true but the difference is small because the Physics thread dominates all the others.\n\n**Edited \u003Ctime datetime=\u00222015-05-30T12:56:24Z\u0022 title=\u002205/30/2015 12:56  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by TheMoonRover**\n  \nconfused acronyms, writing in full"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T12:49:08Z","Content":"^^ 64-bit and multicore are unrelated. There are 32-bit programs that multithread just fine (as well as multicore 32-bit processors), just as there are single-threaded 64-bit programs and single core 64-bit processors."},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2015-05-30T12:55:45Z","Content":"Here\u0027s a bunch of tests using multithreaded physx 3.3 and comparing it to 2.8.4:http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/\n\nhttp://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/\n\nTest 5 looks most like what will be used on a single vessel in KSP, and it does seem to improve slightly with the number of threads. With 3 threads, it runs almost twice as fast as the 2.8.4 test. Unfortunately, I think that using more than 3 threads causes physx to become unstable.\n\nSome of the tests show the 3.3 version being 3-4 times as fast as 2.8.4.\n\n**Edited \u003Ctime datetime=\u00222015-05-30T13:02:07Z\u0022 title=\u002205/30/2015 01:02  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by Vaporo**"},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-30T13:03:07Z","Content":"@Red Iron Crown\n\nAren\u0027t those fairly uncommon though?\n\nI mean, don\u0027t the vast majority of 32-bit programs use only a single core (multi-threading irrelevant)? And likewise aren\u0027t the vast majority of 64-bit programs capable of using multiple cores?\n\nI accidentally put \u0022i.e.\u0022 instead of \u0022to all intents and purposes\u0022, does that make more sense now?\n\nAnd we\u0027re definitely going off at a tangent now ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\n**Edited \u003Ctime datetime=\u00222015-05-30T13:09:46Z\u0022 title=\u002205/30/2015 01:09  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by TheMoonRover**"},{"CreatedByName":"The Yellow Dart","CreatedById":107172,"CreatedDateTime":"2015-05-30T13:04:19Z","Content":"In case people haven\u0027t seen it, this is the example I\u0027ve seen used to show the improvements in Unity 5\u0027s PhysX. I don\u0027t know if the example is using single thread or multithread.\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/GgpN8CMBfzU?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"Darnok","CreatedById":85708,"CreatedDateTime":"2015-05-30T13:15:06Z","Content":"\u003E \n\u003E Here\u0027s a bunch of tests using multithreaded physx 3.3 and comparing it to 2.8.4:http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/\n\u003E [http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/](http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/)\n\u003E http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/\n\u003E Test 5 looks most like what will be used on a single vessel in KSP, and it does seem to improve slightly with the number of threads. With 3 threads, it runs almost twice as fast as the 2.8.4 test. Unfortunately, I think that using more than 3 threads causes physx to become unstable.\n\u003E \n\u003E Some of the tests show the 3.3 version being 3-4 times as fast as 2.8.4.\n\nInteresting, it would be amazing if KSP would get so much improved performance (btw I am optimist)."},{"CreatedByName":"Jouni","CreatedById":97346,"CreatedDateTime":"2015-05-30T13:15:41Z","Content":"\u003E \n\u003E I mean, don\u0027t the vast majority of 32-bit programs use only a single core (multi-threading irrelevant)? And likewise aren\u0027t the vast majority of 64-bit programs capable of using multiple cores?\n\nAlmost all decent desktop software has been able to use multiple cores for decades. For example, it\u0027s a standard practice to run UI in one thread and internal logic in another thread to increase responsiveness. The program doesn\u0027t care whether the OS happens to schedule these threads on a single core or on multiple cores."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T13:16:19Z","Content":"\u003E \n\u003E I mean, don\u0027t the vast majority of 32-bit programs use only a single core (multi-threading irrelevant)? And likewise aren\u0027t the vast majority of 64-bit programs capable of using multiple cores?\n\nNot at all. An app that benefits from multithreading will likely take advantage of it in either 32 or 64-bit (and 16-bit before that); an app that is single threaded is as likely to be 64-bit as 32-bit.\n\nThere might be a bit of correlation as 64-bit and multicore arrived in the desktop space in relatively quick succession, so many software companies added support for them in the same timeframe."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-30T13:32:49Z","Content":"RE the multithreaded discussion:\n\nIf I have 1 processor (an Intel Core i7-4700HQ CPU @ 2.40GHz to be exact), does that mean I have one core or multiple cores? I\u0027m kind of confused on that. The computer is also a laptop if that matters. Would that also mean that my computer can\u0027t take full advantage of multithreaded physics or...?"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T13:39:24Z","Content":"^^ That processor has four cores and hyperthreading, so it can run up to eight threads simultaneously."},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-30T13:40:22Z","Content":"\u003E \n\u003E Not at all. An app that benefits from multithreading will likely take advantage of it in either 32 or 64-bit (and 16-bit before that); an app that is single threaded is as likely to be 64-bit as 32-bit.\n\u003E There might be a bit of correlation as 64-bit and multicore arrived in the desktop space in relatively quick succession, so many software companies added support for them in the same timeframe.\n\nHmm, I wonder what made me think that then. But thinking about it now, that makes a lot of sense.\n\n\u003E \n\u003E RE the multithreaded discussion:\n\u003E If I have 1 processor (an Intel Core i7-4700HQ CPU @ 2.40GHz to be exact), does that mean I have one core or multiple cores? I\u0027m kind of confused on that. The computer is also a laptop if that matters. Would that also mean that my computer can\u0027t take full advantage of multithreaded physics or...?\n\nA quick Google shows that that particular processor has 4 cores, with a total of eight threads (I assume 2 per core). So it should see a significant benefit from multi-threaded physics.\n\n**Edited \u003Ctime datetime=\u00222015-05-30T13:46:58Z\u0022 title=\u002205/30/2015 01:46  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by TheMoonRover**\n  \nReply AFTER the quote, not IN it!"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2015-05-30T13:40:54Z","Content":"\u003E \n\u003E RE the multithreaded discussion:\n\u003E If I have 1 processor (an Intel Core i7-4700HQ CPU @ 2.40GHz to be exact), does that mean I have one core or multiple cores? I\u0027m kind of confused on that. The computer is also a laptop if that matters. Would that also mean that my computer can\u0027t take full advantage of multithreaded physics or...?\n\nOne CPU can have many cores.\n\n[http://cpuboss.com/cpu/Intel-Core-i7-4700HQ](http://cpuboss.com/cpu/Intel-Core-i7-4700HQ)\n\nAccording to this, your cpu has 4 cores.\n\nIf you\u0027re running windows, you can open task manager and go to the performance tab to see how many cores you have by counting the number of cpu usage graphs (if you only have one graph, go to options-\u003E cpu history-\u003E one graph per cpu). If it registers 8 cores, don\u0027t be surprised. Cores can be split (I forget what it\u0027s called) so they register as 2 cores, but are actually 1. My computer has a 4-core cpu, but it registers as 8-core with task manager."},{"CreatedByName":"rkman","CreatedById":15721,"CreatedDateTime":"2015-05-30T13:44:42Z","Content":"\u003E \n\u003E I was assuming that was common knowledge (and logical). \n\u003E ..\n\u003E \n\u003E If you were replying to the next sentence and meant threads (not cores)\n\nI responded to \u0022but uses a singe core\u0022. It looks like it does not use a single core. \n\nIf it\u0027s common knowledge that it uses multiple cores, why say that it uses a single core?"},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-30T13:47:55Z","Content":"@Vaporo. I would imagine it registers as 8-core because there are eight threads. That\u0027s the splitting you mean.\n\n\u003E \n\u003E I responded to \u0022but uses a singe core\u0022. It looks like it does not use a single core. \n\u003E If it\u0027s common knowledge that it uses multiple cores, why say that it uses a single core?\n\nI was wrong about that, confusing multiple cores with 64-bit, see previous page."},{"CreatedByName":"GusTurbo","CreatedById":57552,"CreatedDateTime":"2015-05-30T14:29:13Z","Content":"\u003E \n\u003E Quoting this since people still haven\u0027t caught on.\n\u003E Fairings fixed with r**egards to thermodynamics**, not related to any other issue\n\nI don\u0027t understand what this means."},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-05-30T14:51:28Z","Content":"Just some details on multiple cores, multithreading, and hyperthreading, since there\u0027s some confusion. \n\nA \u0022thread\u0022 is basically a single program process. In the olden days, programs were all single-threads, and there was no multi-tasking. With modern operating systems, multi-tasking is normal, and programs run concurrently all the time. However, each CPU core can technically only do one thing at a time, so CPU time is sliced up (very rapidly) to give each thread time to run. How much time a thread gets in each pass depends on a lot of factors, such as what it\u0027s doing, priority level, and so on. However, threads can relinquish time if they\u0027re waiting on something external, like disk or network access, or other external calls, or by design if there are conditions they\u0027re waiting to have met. This is an important aspect. \n\nWhat that means is that, even if you only have a single CPU core, you can still see some performance gains from a \\*sensibly\\* multi-threaded program. Some threads may be waiting on something, and others can simultaneously be hard at work. However if those threads are doing nothing but hard math, you might see a performance loss from overly breaking up the work into separate threads, just because of the overhead of thread management. You might also not see any performance benefit if those threads are all spending time waiting on things and simply don\u0027t need that much CPU. Usually there is an optimal, \u0022happy medium\u0022 somewhere in there.\n\nThese days multi-core CPUs are pretty standard, which means you also have more than one core to handle threads simultaneously, competing less for CPU time slices, memory channels, and so on. To further muddy the waters, Intel CPUs have a feature called HyperThreading, which basically means that each core can run two threads through the pipeline at any given moment. However, the CPU core isn\u0027t any faster, and those threads have to compete for the same resources (CPU time, cache, memory access). If a program is specifically designed around HyperThreading so that the threads don\u0027t step on each others toes, there can be maybe upward of a 30% performance gain over not having HyperThreading enabled. However since not many programs are designed for that specifically, the performance gain may be small, or even result in a slight performance loss. So for the sake of discussion, it\u0027s best to ignore HyperThreading, and still think of each core as just a core."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-30T14:54:54Z","Content":"Further to NecroBone\u0027s (excellent) explanation, AMD also has some oddness regarding cores: There are twice as many integer units as floating point units. So an eight core processor will perform like an eight core when doing integer tasks but only a four core when doing floating point tasks. IIRC most of the physics work in KSP is floating point, so AMD users should expect threading gains to be similar to a system with half as many cores."}]}