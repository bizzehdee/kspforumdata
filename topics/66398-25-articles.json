{"TopicId":66398,"ForumId":36,"TopicTitle":"[WIP] Loading textures only as required","CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-03-21T14:47:56Z","PageNum":25,"Articles":[{"CreatedByName":"gavman420SSJ","CreatedById":128463,"CreatedDateTime":"2014-11-10T04:42:04Z","Content":"\n\u003Cp\u003E3.4 does not seem to work with active texture management mod. not getting any compression from ATM with LOD cfg set to false\u003C/p\u003E\n"},{"CreatedByName":"Kertherina","CreatedById":109293,"CreatedDateTime":"2014-11-10T13:04:40Z","Content":"\n\u003Cp\u003ESpeaking of OpenGL, i for one can \u003Cem\u003Eonly\u003C/em\u003E run it in OpenGL. When i use DirectX KSP crashes because of memory usage.\u003C/p\u003E\n"},{"CreatedByName":"sober667","CreatedById":116695,"CreatedDateTime":"2014-11-10T18:09:12Z","Content":"\n\u003Cp\u003Eeverythinks works good until one day when shoot error\u003Ca href=\u0022http://fotoo.pl/show.php?img=904863_lod.png.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ehttp://fotoo.pl/show.php?img=904863_lod.png.html\u003C/p\u003E\u003Cp\u003Eand nothing i can do dude reinstaling or something \u003C/p\u003E\u003Cp\u003Ejust a litlle seconds later crash dude to memory limit\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-11-11T05:29:49Z","Content":"\n\u003Cp\u003EI\u0027ve noticed that LOD doesn\u0027t interact with the DDS loader plugin: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-5-%28Oct-31%29-Loads-DDS-Texture-Yes-it-is-boring-edition\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-5-%28Oct-31%29-Loads-DDS-Texture-Yes-it-is-boring-edition\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ETextures converted to DDS (or ones that ship in this format) are not \u0022going through\u0022 LOD (they\u0027re loaded, but normally, at start). Could that be fixed? It\u0027d be good for LOD\u0027s \u0022response time\u0022, because DDS textures are quicker to load.\u003C/p\u003E\n"},{"CreatedByName":"sober667","CreatedById":116695,"CreatedDateTime":"2014-11-11T11:59:08Z","Content":"\n\u003Cp\u003Ei found a problem source was Origami antenas for remotetech\u003C/p\u003E\n"},{"CreatedByName":"Synthesis","CreatedById":26557,"CreatedDateTime":"2014-11-11T23:38:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaalidas\u0022 data-cite=\u0022Gaalidas\u0022\u003E\u003Cdiv\u003EFrom what I can tell, OpenGL doesn\u0027t cause nearly the problems that DirectX does when dealing with memory and processor use. LOD might not even be necessary under it. I can\u0027t even launch in OpenGL on this system though.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOpenGL definitely manages to contain memory crashes--at least at first. Some people experience bad memory leaks that eventually push it over 3.1 GB leading to crashes.\u003C/p\u003E\u003Cp\u003EFor me, OpenGL is less attractive because of shader issues and really, \u003Cem\u003Ereally\u003C/em\u003E bad performance--a FPS decline, but also simulation time is halved (so it takes 2 seconds for every second of in game time to pass, under normal acceleration). Accelerated time doesn\u0027t really fix the issue. \u003C/p\u003E\u003Cp\u003ESome people don\u0027t have this issue, so it seems to depend on how well your system handles OpenGL. I much prefer LOD even if it crashes after a few launches, since I\u0027ll get proper performance before it does.\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-11-12T20:07:52Z","Content":"\n\u003Cp\u003EAlso, LOD will allow you to get even \u003Cem\u003Emore\u003C/em\u003E mods in than OpenGL mode. I prefer LOD, it\u0027s biggest problem right now is that it doesn\u0027t handle DDS textures. Some modders are starting to use them for various reasons, and it\u0027d be great if LOD supported them.\u003C/p\u003E\n"},{"CreatedByName":"madlemur","CreatedById":116597,"CreatedDateTime":"2014-11-12T20:19:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003EAlso, LOD will allow you to get even \u003Cem\u003Emore\u003C/em\u003E mods in than OpenGL mode. I prefer LOD, it\u0027s biggest problem right now is that it doesn\u0027t handle DDS textures. Some modders are starting to use them for various reasons, and it\u0027d be great if LOD supported them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI tried to pull the source and recompile with what I thought would allow DDS textures, but I don\u0027t have the DirectX9 SDK, or the db SDK that\u0027s being used, so I abandoned my attempts at a proof of concept... I hope that DDS support does get baked into LOD. I can\u0027t go back to 5-10 minutes loads, and I\u0027d like to use LOD.\u003C/p\u003E\n"},{"CreatedByName":"Locob","CreatedById":51811,"CreatedDateTime":"2014-11-12T22:54:03Z","Content":"\n\u003Cp\u003Ecould you make that the required textures only load with the press of a button?\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-13T15:09:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sober667\u0022 data-cite=\u0022sober667\u0022\u003E\u003Cdiv\u003Ei found a problem source was Origami antenas for remotetech\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis mod indeed causes loading issues even without LOD\u003C/p\u003E\n"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2014-11-15T00:01:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sober667\u0022 data-cite=\u0022sober667\u0022\u003E\u003Cdiv\u003Eeverythinks works good until one day when shoot error\u003Ca href=\u0022http://fotoo.pl/show.php?img=904863_lod.png.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cp\u003E\u003Ca href=\u0022http://fotoo.pl/show.php?img=904863_lod.png.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://fotoo.pl/show.php?img=904863_lod.png.html\u003C/a\u003E\u003C/p\u003E\u003Ca href=\u0022http://fotoo.pl/show.php?img=904863_lod.png.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Cp\u003Eand nothing i can do dude reinstaling or something \u003C/p\u003E\u003Cp\u003Ejust a litlle seconds later crash dude to memory limit\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have the same problem, but from the very beginning. I too have ATM mod installed\u003C/p\u003E\n"},{"CreatedByName":"Dinokin","CreatedById":100097,"CreatedDateTime":"2014-11-15T01:27:26Z","Content":"\n\u003Cp\u003Ectd \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/etjks78mhns0o8x/output_log.txt?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/etjks78mhns0o8x/output_log.txt?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/m8of8lsbw6i3ckf/LoadOnDemand.log?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/m8of8lsbw6i3ckf/LoadOnDemand.log?dl=0\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"jospanner","CreatedById":125349,"CreatedDateTime":"2014-11-15T13:57:43Z","Content":"\n\u003Cp\u003EI\u0027m getting a similar crash to Dinokin, same error in the logs.\u003C/p\u003E\n"},{"CreatedByName":"Tellion","CreatedById":116794,"CreatedDateTime":"2014-11-17T11:51:11Z","Content":"\n\u003Cp\u003E*dreams of this and ddsloader working together*\u003C/p\u003E\n"},{"CreatedByName":"dreadicon","CreatedById":117295,"CreatedDateTime":"2014-11-18T00:10:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tellion\u0022 data-cite=\u0022Tellion\u0022\u003E\u003Cdiv\u003E*dreams of this and ddsloader working together*\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ecorrection: dream of this and ddsloader working together on directX 11 and/or OpenGL \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E with stock dx9, ddsloader just speeds up load times and reduces the space on your disk; there is no sizable benefit to RAM use over ATM (for this or for ddsloader) without directX 11/OpenGL, unfortunately. None the less, it\u0027s a great step forward for KSP for those who are not running more than a few modpacks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E and a step in the right direction for KSP optimization in general.\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-11-18T00:17:03Z","Content":"\n\u003Cp\u003ELOD works on DX11, I checked. So if its made to work it with DDSLoader, then DX11 should work, too.\u003C/p\u003E\n"},{"CreatedByName":"dreadicon","CreatedById":117295,"CreatedDateTime":"2014-11-18T00:25:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003ELOD works on DX11, I checked. So if its made to work it with DDSLoader, then DX11 should work, too.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting, I will have to check this out later. iirc, there was some issue with LOD on DX11, but my memory could be faulty. If that is the case, then yeah, this just has to be made compatible with dds files/ddsloader directly. A side note, DX11 is known to have some minor glitches, and isn\u0027t quite as lightweight on RAM as OpenGL, but it\u0027s still an order of magnitude better than DX9 for memory usage concerning graphics.\u003C/p\u003E\n"},{"CreatedByName":"Synthesis","CreatedById":26557,"CreatedDateTime":"2014-11-18T02:19:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dreadicon\u0022 data-cite=\u0022dreadicon\u0022\u003E\u003Cdiv\u003EInteresting, I will have to check this out later. iirc, there was some issue with LOD on DX11, but my memory could be faulty. If that is the case, then yeah, this just has to be made compatible with dds files/ddsloader directly. A side note, DX11 is known to have some minor glitches, and isn\u0027t quite as lightweight on RAM as OpenGL, but it\u0027s still an order of magnitude better than DX9 for memory usage concerning graphics.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think DirectX 11 has some graphical glitches--most obviously, shaders on the launch pad don\u0027t appear properly, instead showing up as giant black streaks. \u003C/p\u003E\u003Cp\u003EStill, it\u0027s better than crashing.\u003C/p\u003E\n"},{"CreatedByName":"Bit Fiddler","CreatedById":103108,"CreatedDateTime":"2014-11-18T11:20:37Z","Content":"\n\u003Cp\u003EWhen you say it required DX9 does this mean I need to do anything special? or if I just run KSP as is, does this use DX9, as opposed to forcing DX11 or OpenGL.\u003C/p\u003E\u003Cp\u003EI am also getting the error about the nativebridge. I do not see any mention in this forum about what it is and how to fix it. am I just missing the post or has it not been answered yet?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-18T15:05:18Z\u0022 title=\u002211/18/2014 03:05  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 18, 2014\u003C/time\u003E by Bit Fiddler\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-11-18T16:02:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Synthesis\u0022 data-cite=\u0022Synthesis\u0022\u003E\u003Cdiv\u003EI think DirectX 11 has some graphical glitches--most obviously, shaders on the launch pad don\u0027t appear properly, instead showing up as giant black streaks. \u003Cp\u003EStill, it\u0027s better than crashing.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, I hardly noticed any difference. That was on 32bit, though. DX11 is mostly notable because it stabilizes 64bit.\u003C/p\u003E\n"},{"CreatedByName":"dreadicon","CreatedById":117295,"CreatedDateTime":"2014-11-18T19:00:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003EActually, I hardly noticed any difference. That was on 32bit, though. DX11 is mostly notable because it stabilizes 64bit.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo, couple things; first, the black streaks are consistent with my experience. There is supposedly another command line option which helps with this, but I cannot recall what it is, nor can I verify that it works.\u003C/p\u003E\u003Cp\u003ESecond, I tried loading up KSP with the DX11 option last night a couple times, and LOD fails to initialize. Gives the same message I get when I run in OpenGL. However, with DX9 or no command line option, LOD initializes normally. Will double check my setup this evening. Tried with and without EVE, ATM, and Texture Replacer. Windows 7 64-bit. KSP x86.\u003C/p\u003E\u003Cp\u003E@Bit Fiddler, shouldn\u0027t have to do anything special concerning DX9. KSP on windows launches in DX9 mode by default. If you don\u0027t have the full libraries you may have to install them (as per the OP), but usually that\u0027s not an issue.\u003C/p\u003E\n"},{"CreatedByName":"madlemur","CreatedById":116597,"CreatedDateTime":"2014-11-18T19:53:20Z","Content":"\n\u003Cp\u003EI really hope that DDSLoader support will be added. I believe that all that needs to be done is to make .dds files valid in LOD. There may be other optimizations that would be handy, but I think that\u0027s be bare necessity. Now, I don\u0027t know if LOD loads the textures, then writes them back out as DDS files in its cache (in which case, there\u0027s a duplication of data that\u0027s unneeded), or if it is storing something else. Regardless, if LOD is loading textures on the fly, DDSLoader will help immensely, as those load times will shrink. The dangers of doing too much, too fast in the VAB or SPH are much reduced, since there will be a smaller window during the texture loads.\u003C/p\u003E\u003Cp\u003EAlso, unless LOD implements its own TGA loader, it\u0027s still relying on the leaky bucket Squad gives us (that ATM overrides)...\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2014-11-19T00:33:35Z","Content":"\n\u003Cp\u003EI convert all textures in my mod installs to png to avoid the tga issues. Also, for the issues with DX11, it should be noted that (as the OP states) this thing only really works in DX9. I hadn\u0027t heard anything about DX11 stabilizing 64bit. In fact, that really doesn\u0027t make a lot of sense to me. I have doubts that I could run anything in a stable DX11 on this barely-chugging laptop though.\u003C/p\u003E\n"},{"CreatedByName":"Bit Fiddler","CreatedById":103108,"CreatedDateTime":"2014-11-20T14:05:00Z","Content":"\n\u003Cp\u003Eand the native bridge error thing? what causes it and how can I fix it? I get it as a small popup on my loading screen. and yes I am running dx9. as in no -force-blablabla switch on my shortcut. I have tried with and without .dds converters and both give the same results. \u003C/p\u003E\u003Cp\u003Ejust adding my vote to have LOD support .DDS as well. that would give us the fast loading times as well as the memory reduction... any hope of this?\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003ESo, anybody else having the nativebridge problem...\u003C/p\u003E\u003Cp\u003EI finally just deleted my MSVCR120.DLL and reacquired the install package from the OP. this fixed the issue. not sure if it was an x86 vs. x64 version mismatch, or if the file was corrupted or what, but it did clear up the error message.\u003C/p\u003E\u003Cp\u003EHowever... LOD does not seem to be working. I no longer get the native bridge error, but I am not seeing any memory savings. it runs up to the 3 Gig limit and the game crashes. yes if I just run it in OpenGL mode with ATM running it sits down around 2.6 Gigs and just occasionally crashes.\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003EOk well now it seems to be doing something I have a message on the screen telling me it is preparing textures: 18/1839 and loading textures: 0/178\u003C/p\u003E\u003Cp\u003EI assume this means if I wait long enough the purple check pattern will be replaced by the real full size textures? \u003C/p\u003E\u003Cp\u003Eand it seems the cause of this not working may have been the fact I was running it with the -popwindow and -force-d3d9 tags. I have not tested this to be sure but this time around I accidentally just hit the KSP.exe file itself and not my shortcut. I will have to do more testing to verify if this was indeed the cause of LOD not working before.\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003Eafter waiting for some time It looks like indeed some of the textures I am looking at are switching out the pink checks for a real texture, however KSP is still crashing before it \u0022prepares\u0022 all the files. is there anything I can send you to assist with understanding what is going on? or is this all known already and I am just late to the game?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-22T17:41:19Z\u0022 title=\u002211/22/2014 05:41  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 22, 2014\u003C/time\u003E by Bit Fiddler\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Synthesis","CreatedById":26557,"CreatedDateTime":"2014-11-27T04:23:31Z","Content":"\n\u003Cp\u003EHas anyone else found that this doesn\u0027t agree with Kerbal Joint Reinforcement--when running LOD, KJR will occasionally drop out of time acceleration and mess up your orbit. \u003C/p\u003E\u003Cp\u003EStrange error, but nothing too bad.\u003C/p\u003E\n"}]}