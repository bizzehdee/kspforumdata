{"TopicId":100469,"ForumId":36,"TopicTitle":"KSPBlender - Blender Addon for importing .craft files (now with complete mod support!)","CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-02-22T22:45:19Z","PageNum":10,"Articles":[{"CreatedByName":"Cptman","CreatedById":101643,"CreatedDateTime":"2015-03-21T20:18:15Z","Content":"\u003E \n\u003E I actually had a much stupider way of figuring out each part name. I can\u0027t believe I didn\u0027t use the .cfg files.\n\nDoes that mean that I ninja\u0027ed you by two weeks ? Wow, slowest ninja ever ! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nOk, here it is, I\u0027ve posted it on Github:[https://github.com/Cptmann/ksp_partdic](https://github.com/Cptmann/ksp_partdic)\n\nIt surely isn\u0027t the most effcient thing ever nor the better piece of code, but it works.\n\nSome notes :\n\n-The name cheaters\\_probe is because I first intentended to make myself the function which would find the .cfg (and not look everywhere in GameData) but after a number of (half-)failed attempts I discovered that a function was already existing. So, it felt like cheating to me. But rename it to probe (or whatever) if you prefer.\n\n-It creates some quite big dictionnaries : with B9, NFT, Kethane, Interstellar, KAX, KAS, TAC, Atomic age and of course Squad, the part dictionnnary has 737 entries !! So they take quite some time to make\n\n-The cheaters\\_probe\\_large function is for the mods which do not have a \u0027Parts\u0027 folder (exeample: AIES), if you use the first function they won\u0027t be explored. The downside is that it saves other .cfg which are not for parts.\n\nYou will also need to add the \u0027Vector\u0027 thing in the script (where it\u0027s indicated), I didn\u0027t put it to for tesst not in Blender.\n\nFun fact : only two parts made by Squad do not have a scale or rescale factor parameter: JetEngine and ladder1\n\nI really hope it works correctly (I have only tested with a few parts for a few mods)\n\n**Edited \u003Ctime datetime=\u00222015-03-21T20:47:03Z\u0022 title=\u002203/21/2015 08:47  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 21, 2015\u003C/time\u003E by Cptman**"},{"CreatedByName":"Supergamervictor","CreatedById":23473,"CreatedDateTime":"2015-03-23T12:49:16Z","Content":"I keep getting an error when trying to import.I\u0027ve done everything according to the instructions in the readme file.Every time I go to file-import-KSP Craft, go to my KSP folder and try to open the stock KSP prebuilt ship it says import error-cannot import name partdic"},{"CreatedByName":"manni01","CreatedById":109903,"CreatedDateTime":"2015-03-23T22:17:34Z","Content":"I\u0027ve been here in the past to attempt this, but have failed due to my OS (mac). Has there been any major changes that might make this update compatible, without or without tweaking?"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-03-24T00:58:20Z","Content":"\u003E \n\u003E I\u0027ve been here in the past to attempt this, but have failed due to my OS (mac). Has there been any major changes that might make this update compatible, without or without tweaking?\n\nWell Python is inherently OS-agnostic so all you\u0027d have to do is change all the paths so that they use a backslash rather than a frontslash."},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-03-30T04:11:35Z","Content":"\u003E \n\u003E I keep getting an error when trying to import.I\u0027ve done everything according to the instructions in the readme file.Every time I go to file-import-KSP Craft, go to my KSP folder and try to open the stock KSP prebuilt ship it says import error-cannot import name partdic\n\nThat was an error I caused and I should not have uploaded that version. I fixed it about a day after I realized what I had done. Try downloading again, or you can just open import-craft.py and delete the line that says \u0022import partdic.\u0022 I was starting to incorporate CptMan\u0027s code and didn\u0027t finish.\n\n- - - Updated - - -\n\n\u003E \n\u003E I\u0027ve been here in the past to attempt this, but have failed due to my OS (mac). Has there been any major changes that might make this update compatible, without or without tweaking?\n\nIf you go to page... 8 or 9, Sma and I figured it out and fixed the directory problem. The issue was that Windows uses backslashes and everything else uses forward slashes, so there is just a section of the script that chooses the slashes based on what OS it detects. It should work perfectly now, so please let me know if you have issues!\n\n**Edited \u003Ctime datetime=\u00222015-03-30T04:15:15Z\u0022 title=\u002203/30/2015 04:15  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 30, 2015\u003C/time\u003E by Dasoccerguy**\n  \nmore info"},{"CreatedByName":"RandomName101","CreatedById":138529,"CreatedDateTime":"2015-04-02T13:47:17Z","Content":"I\u0027m working on an animation using not only stock parts but also B9 and BD Armory. Can someone help me tweak the script? I know nothing about programming If you need a copy of my files to get the locations I\u0027ll put them up on mediafire along with a page giving my directory leading into those files."},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-04-03T05:59:14Z","Content":"\u003E \n\u003E I\u0027m working on an animation using not only stock parts but also B9 and BD Armory. Can someone help me tweak the script? I know nothing about programming If you need a copy of my files to get the locations I\u0027ll put them up on mediafire along with a page giving my directory leading into those files.\n\nThis weekend I\u0027m going to incorporate CptMan\u0027s script into the addon, which will add support for every mod. I thought I would have to go through manually and add each file location, but CptMan found a way to do it procedurally.\n\nLook for a new version on Sunday!"},{"CreatedByName":"Cptman","CreatedById":101643,"CreatedDateTime":"2015-04-05T09:57:01Z","Content":"Glad to hear that you will incorporate it ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI modified partdic today to add a function to handle mods with a different name for the part in .cfg and the .craft (for exemple B9). For this there is an exceptions dic at the beginning of the file.\n\nI also changed the name of a few function (probe functions and make\\_dic -\u003E make\\_dic\\_aux) and I added a matser make\\_dic function to which you only have to give the path.\n\nYou will still have to add the Vector in the make\\_dic\\_aux function where it is indicated and uncomment the import mathutils.\n\nIf you only need the old partdic.py I think it will still be available in the commits tab (I new to Github so I don\u0027t really know). Anyway, I have a backup on my computer in case.\n\nIf you have any questions/problem/complaints send me a message, I\u0027ll try to check the forums a few time during the day."},{"CreatedByName":"manni01","CreatedById":109903,"CreatedDateTime":"2015-04-05T22:34:03Z","Content":"\u003E \n\u003E If you go to page... 8 or 9, Sma and I figured it out and fixed the directory problem. The issue was that Windows uses backslashes and everything else uses forward slashes, so there is just a section of the script that chooses the slashes based on what OS it detects. It should work perfectly now, so please let me know if you have issues!\n\nSorry, but I\u0027m a noob (great conversation starter btw). Do I change the all the \\\\ of every text file (and .py, you know what I mean) in your addon, or just kspdir? If I have to do it with everysingle \\\\, because there are 1,410 // in part\\_dir.py \n\n(I swear I used to be good at this sort of stuff)"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-06T00:49:43Z","Content":"\u003E \n\u003E Sorry, but I\u0027m a noob (great conversation starter btw). Do I change the all the \\\\ of every text file (and .py, you know what I mean) in your addon, or just kspdir? If I have to do it with everysingle \\\\, because there are 1,410 // in part\\_dir.py \n\u003E \n\u003E \n\u003E (I swear I used to be good at this sort of stuff)\n\nThe fix that he mentioned means you shouldn\u0027t have to change the slashes at all. Just add the directories to your specific mods and use \\\\ and it should be fine. Although he may have an update to the add on soon that if I\u0027m not mistaken means you won\u0027t have to add anything to the part directory.\n\nAlso, to change them all at once you could just do a find/replace and it should be fine."},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-04-07T02:10:22Z","Content":"\u003E \n\u003E Sorry, but I\u0027m a noob (great conversation starter btw). Do I change the all the \\\\ of every text file (and .py, you know what I mean) in your addon, or just kspdir? If I have to do it with everysingle \\\\, because there are 1,410 // in part\\_dir.py \n\u003E \n\u003E \n\u003E (I swear I used to be good at this sort of stuff)\n\nYeah, no need to change code any more. That is all in the past. Tonight I\u0027m going to wrap up this process of including Cptman\u0027s code so there will be even less of a reason to edit code (up until now you had to manually add mod support line by line).\n\nJust be sure that you use the correct slashes in kspdir.txt. Don\u0027t use double slashes there either... just as it appears in the navigator, like C:\\Users\\manni01\\Kerbal Space Program"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2015-04-07T11:32:17Z","Content":"Hey, I wanted to try this out, it looks really cool, but I am always getting this: \n\n![zhlONGw.png](http://i.imgur.com/zhlONGw.png)\n\nI tried to import the Stock Z-Map Satellite launcher. THe importing process is normal, but when it is finished and I want to rotate the camera around the imported craft file it doesn\u0027t rotate and the things you can see above happen. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)"},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-04-08T00:38:18Z","Content":"\u003E \n\u003E Hey, I wanted to try this out, it looks really cool, but I am always getting this: \n\u003E ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\u003E \n\u003E I tried to import the Stock Z-Map Satellite launcher. THe importing process is normal, but when it is finished and I want to rotate the camera around the imported craft file it doesn\u0027t rotate and the things you can see above happen. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\nIt\u0027s hard to tell what is happening, but that almost looks like a computer issue with how most of the text is messed up.\n\nCould you try this? Open up Blender again, press A (select all), press Delete (just to get rid of that cube in the middle), press Ok. Now Import the Kerbal2. That has always been my test ship so I know it will work.\n\nIf it\u0027s still weird, could you send me another screenshot?"},{"CreatedByName":"esinohio","CreatedById":57681,"CreatedDateTime":"2015-04-08T00:55:28Z","Content":"Noticed the Github updated so I gave the new version a shot a few hours ago. Stock craft still import fine but I can\u0027t seem to get mod craft to import. B9 just errors out while the Stock-alike station parts wouldn\u0027t display an error but didn\u0027t import."},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-04-08T01:16:33Z","Content":"\u003E \n\u003E Noticed the Github updated so I gave the new version a shot a few hours ago. Stock craft still import fine but I can\u0027t seem to get mod craft to import. B9 just errors out while the Stock-alike station parts wouldn\u0027t display an error but didn\u0027t import.\n\nCptman said the naming scheme of things for B9 was a bit funky. Let me try some stuff when I get home.\n\nAnd as for things not importing but giving no error, that means that it\u0027s just a naming issue. That\u0027s the mod name? Stock-alike? I\u0027ll take a look at those too."},{"CreatedByName":"esinohio","CreatedById":57681,"CreatedDateTime":"2015-04-08T01:43:35Z","Content":"\u003E \n\u003E Cptman said the naming scheme of things for B9 was a bit funky. Let me try some stuff when I get home.\n\u003E And as for things not importing but giving no error, that means that it\u0027s just a naming issue. That\u0027s the mod name? Stock-alike? I\u0027ll take a look at those too.\n\nOf course I pick the wonky one to test ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) The other random mod I tried was the Stock A like Station Parts [**here**](https://forum.kerbalspaceprogram.com/threads/91814-0-90-Stockalike-Station-Parts-Expansion-%2817-11-2014-CTT-compatibility%29). Should have linked that before, oops. I\u0027ll give a few others a go here soon.\n\n- - - Updated - - -\n\nTried a simple craft with a few KW parts on it to verify imports. Stock Mk1 command pod, KW SB-2 LFT fuel tank, and the Griffon Century engine. Results below. Thanks for your work on this!!!!!\n\n\u003E ![9tXksc2.png](http://i.imgur.com/9tXksc2.png)"},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-04-08T03:25:33Z","Content":"\u003E \n\u003E Of course I pick the wonky one to test ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) The other random mod I tried was the Stock A like Station Parts [**here**](https://forum.kerbalspaceprogram.com/threads/91814-0-90-Stockalike-Station-Parts-Expansion-%2817-11-2014-CTT-compatibility%29). Should have linked that before, oops. I\u0027ll give a few others a go here soon.\n\u003E - - - Updated - - -\n\u003E \n\u003E Tried a simple craft with a few KW parts on it to verify imports. Stock Mk1 command pod, KW SB-2 LFT fuel tank, and the Griffon Century engine. Results below. Thanks for your work on this!!!!!\n\nThanks for sharing. I guess I was a bit hasty claiming that all mods would work ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif).\n\nI\u0027ll try to fix this as soon as I can."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-08T12:03:39Z","Content":"\u003E \n\u003E 4. **I need your help with the mods, though. There are going to be bugs, so please let me know what goes wrong!**\n\nI\u0027ll give it a try, as soon as I finish up this one scene I\u0027m trying to complete....getting the uhh....not really smoke....effect just right is a pain, especially because it takes so long to render lol"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-04-08T17:30:17Z","Content":"\u003E \n\u003E I\u0027ll give it a try, as soon as I finish up this one scene I\u0027m trying to complete....getting the uhh....not really smoke....effect just right is a pain, especially because it takes so long to render lol\n\nAre you compositing the smoke in or are you using a node setup for Cycles smoke?"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2015-04-08T18:03:05Z","Content":"Jay, now it works! \n\n![F9sycYc.png](http://i.imgur.com/F9sycYc.png)\n\nBut it looks a big pixelated, did I something wrong? I just imported the craft, added a camera and a Hemi as light source and rendered it. I have really almost no experience in rendering things... :S"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-04-08T19:35:47Z","Content":"\u003E \n\u003E Jay, now it works! \n\u003E [http://i.imgur.com/F9sycYc.png](http://i.imgur.com/F9sycYc.png)\n\u003E \n\u003E But it looks a big pixelated, did I something wrong? I just imported the craft, added a camera and a Hemi as light source and rendered it. I have really almost no experience in rendering things... :S\n\nNo, that\u0027s just how Cycles works. You need to increase the number of samples to 50 to 150 in the Render menu. If you have a GTX, you can set the compute device in Preferences to that GPU and then set your sample count to 1,000."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-08T20:11:33Z","Content":"\u003E \n\u003E Are you compositing the smoke in or are you using a node setup for Cycles smoke?\n\nA little of both I guess? sort of, lol... Originally I was just rendering out the scene, background, foreground\u002Bsmoke. Then I decided to render just the background, adjusted so clouds wouldn\u0027t be where the smoke was, and I could use that over and over for different tests. Then I just rendered the foreground\u002Bsmoke with the background transparent. I am using a node setup for the cycles smoke, where the various nodes go into the volume socket of the output. Thinking about it now though it might have saved some time if I had also just rendered the foreground and saved it then just rendered the smoke, and composted the background and foreground together. Although, part of the foreground is set as collision for the smoke, so I guess I would have to leave that in, or clone it and set it to not be rendered, maybe that would work. I might try it one more time, but with a different shape for the emitter. If that doesn\u0027t work I\u0027ll just call it done for now and post what I have over at [Show off your KSP Blender Renders Page 18](https://forum.kerbalspaceprogram.com/threads/111540-Show-off-your-KSP-Blender-Renders%21/page18). I\u0027ve got another KSP project I want to move on to, which is going to take some time to finish lol.\n\nPart of what takes so much time, at least in my experience (which is all of about a week, if that), is the baking process, then rendering to see what the smoke looks like. Then of course any change to the smoke and it has to be baked again. I do save some time by only baking to the frame I want (using a cloth simulation) then stopping it.\n\n[uPDATE]\n\nAn edited version of the render I was working on. To check out the original go take a look at the KSP Blender Render thread. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n\u003E ![9K0xRyA.jpg](http://i.imgur.com/9K0xRyA.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-04-09T02:20:25Z\u0022 title=\u002204/09/2015 02:20  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 9, 2015\u003C/time\u003E by Sma**"},{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-09T05:14:48Z","Content":"I\u0027m having a problem with the setup. I\u0027m on OSX, and I\u0027m wondering how/where to copy the KSP directory. Does anyone have experience with this?"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-09T12:04:50Z","Content":"\u003E \n\u003E I\u0027m having a problem with the setup. I\u0027m on OSX, and I\u0027m wondering how/where to copy the KSP directory. Does anyone have experience with this?\n\nI don\u0027t know much about Mac, but from googling I found the KSP directory by default (if you are using steam) can be found at ***/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program***\n\nYou will need to find where you installed the addon, where ever your blender is installed, and change what is already in the kspdir.txt file to where ever your KSP is at. In my case, on linux my kspdir.txt file is located at ***/home/[myusername]/blender-2.74-linux-glibc211-x86\\_64/2.74/scripts/addons/io\\_kspblender-master***\n\nHere is an example of how mine is setup:\n\n **My KSP folder:** */home/[myusername]/Desktop/Untitled Folder/Link to Kerbal Space Program (yeah yeah, I know it\u0027s a strange folder name/link haa)*\n\n **My Blender folder:** */home/[myusername]/blender-2.74-linux-glibc211-x86\\_64/*\n\n ***The io\\_kspblender-master and io\\_object\\_mu-master addons get extracted from the zip file to the blender addons folder:*** */2.74/scripts/addons/*\n\n **In the** ***/io\\_kspblender-master/*** **folder, now in the blender addons folder, I added the path to my KSP folder to the file kspdir.txt**\n\nAfter everything is in the right place, you have to enable the plugins. Open up blender, go to the user preferences in the file menu (or alt\u002Bctrl\u002BU or the mac equivilant, option U or ctrl\u002Boption U...whatever it may be lol) click on the addons tab then do a search for ksp. Both the mu importer and ksp craft importer should show up. Click on the box to enable them, then at the bottom left click the save user preferences button, other wise the next time you open blender they won\u0027t be enabled.Hope this helps and doesn\u0027t confuse you too much. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nOh, also on a side note, I noticed there is a bolt factory addon, at least in blender 2.74. Not enabled by default though. It\u0027s kind of neat, you can make nuts (including lock nuts/nylock nuts) and bolts, with different types of heads (philips, allen) along with if its a pan head, counter sunk head, round or flat. Thought they might also have square drive, flat head, and torx but didn\u0027t see those."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-09T14:08:31Z","Content":"Just did a test using the craft I made last night for taking reference shots of KSC and this is the result. The one on the right is how it came imported. The one on the left is how it should be. Though as I remember there were some scale/position issues originally. Not sure if that is something that can be easily fixed with out causing issues else where.\n\nOh, on a positive note, everything wasn\u0027t super huge like before, at least not with this import. I haven\u0027t tried other parts yet.\n\n![FZIRsEz.jpg](http://i.imgur.com/FZIRsEz.jpg)\n\nUpdate: I imported the tests I did a while back for SCANsat, Remote Tech, and Kethane. They all imported, for the most part, except for the notes below:\n\n- **Remote Tech:** Some stuff wouldn\u0027t deploy, the gigadish had no dish, although I did find some part of it when i unhid everything. One of the antenna (the one that extends out on a scissor type truss) only part of it would deploy. The scissor truss was there, but didn\u0027t seem to want to deploy. The scale for the most part all seemed to be correct though.\n- **ScanSat:** Of the two scanners that imported (visible anyway), one of the scanners was bigger than it should be and the other was smaller. The SAR scanner I think is, was missing, it had an empty for it though.\n- **Kethane:** The two drills imported super huge, but the rest of the parts seemed to come in fine.\n\nOf course, I guess the scaling problems, and well all these problems really, are more to do with the configs of the parts and not really a problem with the importer. The scale issue is easily fixed on my side by selecting the part (and using the K menu to select all of the part) and resizing it as needed. The deploy states not working is a little trickier, but I guess they could be delt with. At least they seemed to import for the most part, and all with out me having to add to the part directory ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-04-09T14:36:13Z\u0022 title=\u002204/09/2015 02:36  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 9, 2015\u003C/time\u003E by Sma**"}]}