{"TopicId":185258,"ForumId":29,"TopicTitle":"Removing Resources in KSP 1.7.1","CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2019-06-08T10:16:12Z","PageNum":1,"Articles":[{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2019-06-08T10:16:12Z","Content":"\n\u003Cp\u003E\nBefore KSP 1.7.1 it used to work to either call part.RemoveResource()\u00A0 or part.Resources.Remove or part.Resources.Clear() to remove a resource. Although the call itself removes the part.resources list, it is not removed from the visual representation in the context menu, almost as if it isn\u0027t properly updated or refreshed. Notice that once you close the context menu and reopen it, the removed resource it correctly removed, telling me this is clearly some gui refresh issue. Anyone have an idea to refresh of removed the resoures from the part context menu\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-08T12:08:43Z\u0022 title=\u002206/08/2019 12:08  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 8, 2019\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"pap1723","CreatedById":148945,"CreatedDateTime":"2019-06-11T02:32:11Z","Content":"\n\u003Cp\u003E\nDon\u0027t know if you have your answer already, but I was told that the dirty Window call has been changed so you have to approach it differently to get an update.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2019-06-11T13:33:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223616228\u0022 data-ipsquote-contentid=\u0022185258\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560220331\u0022 data-ipsquote-userid=\u0022148945\u0022 data-ipsquote-username=\u0022pap1723\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, pap1723 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDon\u0027t know if you have your answer already, but I was told that the dirty Window call has been changed so you have to approach it differently to get an update.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo not yet. I was aware it had something to do with the window dirt state. In the past, it did\u00A0 try to get access to it but this handle through reflection bit it no longer appears to work. Would you know how?\n\u003C/p\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-06-11T14:04:29Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117389-freethinker/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022117389\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117389-freethinker/\u0022 rel=\u0022\u0022\u003E@FreeThinker\u003C/a\u003E\u00A0You might look at the changes \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125662-snark/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125662\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125662-snark/\u0022 rel=\u0022\u0022\u003E@Snark\u003C/a\u003E\u00A0had to do in the latest release of his Simple Fuel Switch. It sounds like the same problem you are running into.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis is where I reported the bug for you to see if it the same kind of problem.\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed6893449827\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/181274-171-simplefuelswitch-v131-toggle-tanks-fuel-type-in-the-editor-simple-and-lightweight/\u0026amp;do=embed\u0026amp;comment=3610065\u0026amp;embedComment=3610065\u0026amp;embedDo=findComment\u0022 style=\u0022height:305px;max-width:500px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2019-06-14T21:50:11Z","Content":"\n\u003Cp\u003E\nAlright I found the\u00A0 solution:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E        private void UpdatePartActionWindow()\n        {\n            var window = FindObjectsOfType\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;UIPartActionWindow\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E().FirstOrDefault(w =\u0026gt; w.part == part);\n            if (window != null)\n            {\n                foreach (UIPartActionWindow actionwindow in FindObjectsOfType\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;UIPartActionWindow\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E())\n                {\n                    if (window.part != part) continue;\n                    actionwindow.ClearList();\n                    actionwindow.displayDirty = true;\n                }\n            }\n        }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}