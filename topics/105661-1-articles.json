{"TopicId":105661,"ForumId":69,"TopicTitle":"Conclusions from extensive testing of drag occlusion/heating/ect (EXPLOIT FOUND!).","CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2015-04-28T15:16:08Z","PageNum":1,"Articles":[{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2015-04-28T15:16:08Z","Content":"I think ive come to the conclusion that drag occlusion doesnt work as one would expect!\n\nOcclusion ONLY works if your parts are attached by the rear or front connection node. Parts that are radially attached, and happen to be placed behind something act as if they are exposed to teh entire airflow! Now i dont know why this occurs, but it appears that its a simplification of the drag model (perhaps to save resources as dynamic vector based drag woujld be harder to work with).\n\nEDIT:\n\n**MAJOR EXPLOIT DETECTED!:**\n\nOcclusion does NOT CARE about size of part behind and will still occlude it! This means that placing a cubic strut IN FRONT OF A 3.5m tank WILL BLOCK OVER 95% of drag! WOW!\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/TrJTd)\n\nIM BLOODY SPEECHLESS!\n\nA few lessons for those making any sort of aircraft:\n\nAny part radially attached, massless or not (that isnt inside a cargo/service bay) will add a flat amount of drag based on its orientation REGARDLESS OF WHERE IT IS LOCATED! This means you can clip something all the way inside the fuselage, or have it stuck outside of the plane via offset gizmo, and it will still create a flat amount of drag period!\n\nFor prats to occlude (and actually lower another\u0027s drag), they need to be attached in line via the node at front or rear of the part you are interested to shield. This means that if you say attach a fuel tank behind a cockpit radially and then use gizmos to move it into the identical position it wouldve been had u just placed it behind the cockpit via node, itll have WAY more drag, and be affected by heat ALOT more. Basically only stuff in line shields stuff behind it.\n\nLonger fuel tanks have less drag then a stack of short ones in line (no bloody idea why, this is just what happens).\n\nCargo bays completely disable drag/aero forces on anything in them when closed (if you are into clipping, you can shove it full of other fuel tanks and those fuel tank have 0 drag period). This is kinda exploity, but sofar ive found that shoving ion engine clusters, power units, and anything that isnt essential to the fuselage/flight in a cargo/utility bay lowers drag and well offsets the extra mass.\n\nPlacing some super low drag part in front of a massive plate will STILL occlue the plate (try a cubic strut in front of a 3.5m tank, the 3.5m tank WILL BE OCCLUDED!).\n\nNow i do not want to turn this into a discussion on whether this is good/bad, im just sharing my conclusions (as i have quite a few micro-SSTOs thatr abuse clipping, and i learned to stick all that junk thats clipped into cargo bays really quick). As much as i love the new aero, it does appear that without cargo bays you are going to be suffering MASSIVE drag penaltis on anything, be it internal or external to the ship, unless its either in line with something else, or inside a bay.\n\nIm now working on making a few nice images to show the details, and ill update this post when im done! I will also post two example craft that have near identical weights/features, and the MASSIVE difference abusing utility bays gives. Its liek night and day difference here, one accelerated to 1200m/s on the ground in under 10 seconds, the other maxes out at roughly 300m/s.\n\n**Edited \u003Ctime datetime=\u00222015-04-29T15:33:45Z\u0022 title=\u002204/29/2015 03:33  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 29, 2015\u003C/time\u003E by panzer1b**"},{"CreatedByName":"rodion_herrera","CreatedById":66284,"CreatedDateTime":"2015-04-28T15:22:09Z","Content":"I always thought that visibly clipping a radially attached item was more of an aesthetics thing anyways, rather than trying to make something look streamlined (and thus misleading you to think it\u0027s being occluded), so I never assumed that clipping would reduce drag. It does look streamlined when \u0022tucked in\u0022, but the root phantom part is still radially attached and thus will be marked as \u0022an item that will produce drag\u0022.\n\n**Edited \u003Ctime datetime=\u00222015-04-28T15:30:00Z\u0022 title=\u002204/28/2015 03:30  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 28, 2015\u003C/time\u003E by rodion\\_herrera**"},{"CreatedByName":"r_rolo1","CreatedById":26192,"CreatedDateTime":"2015-04-28T15:23:32Z","Content":"Thanks for the intel, panzer1b. Some of this stuff is downright bizarre, but the stack of cans giving more drag than a longer big can actually makes sense, due to the breaking of smooth airflow in the joints between tanks."},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2015-04-28T15:26:28Z","Content":"Wow good work mate!\n\n Yup.. The new aero model leaves a lot to be desired. \n\nWell done for being the first to discover all of this. It will be of massive help to the SSTO builders. \n\nPerhaps Squad will fix the broken aero?"},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2015-04-28T15:33:33Z","Content":"\u003E \n\u003E Wow good work mate!\n\u003E  Yup.. The new aero model leaves a lot to be desired. \n\u003E \n\u003E Well done for being the first to discover all of this. It will be of massive help to the SSTO builders. \n\u003E \n\u003E Perhaps Squad will fix the broken aero?\n\nits not really broken, just simplified (im guessing to cut down resource needs), so that it doesnt actually care about stuff inside/outside.\n\nAnyways, me new ION SSTO is insanely good now, i can get it to what, 200km AP on PURE jets! Its cause i shoved the entire ion assembly into a utility bay, engines, fuel tanks, and the drag is pretty much non-existent (it goes to like 500m/s by the end of the runway with a SINGLE rapier!\n\nAlso working on a new heavy fighter, the HK-229 (you can probably guess what actual plane its somewhat inspired by, seeing those massive wings on a small fuselage made me think of one plane in particular). Its gonna use MK-2 bays, so it should have both nice ammo capacity, and ofc the whole clipped fuel in there!\n\n**Edited \u003Ctime datetime=\u00222015-04-28T15:35:47Z\u0022 title=\u002204/28/2015 03:35  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 28, 2015\u003C/time\u003E by panzer1b**"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-04-28T15:56:53Z","Content":"\u003E \n\u003E its not really broken, just simplified (im guessing to cut down resource needs), so that it doesnt actually care about stuff inside/outside.\n\nIt\u0027s a bit more than just inside/outside. As I understand if you make a ball out of radially attached parts, it is modeled as a ball for reentry heating, but as a pancake for drag (just like FAR does)."},{"CreatedByName":"Brotoro","CreatedById":57674,"CreatedDateTime":"2015-04-28T16:14:42Z","Content":"So if you build a lander protected by a larger-diameter heat shield, only the central components of the lander that are attached inline would be protected, and all the componets attached radially to those axial parts would be causing drag/getting heating even if they are fully shadowed by the heat shield? If so, this is bad news. \n\nThank you for noticing this."},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-04-28T16:34:19Z","Content":"In order to get radially clipped parts to be occluded you\u0027d need something like ferram4\u0027s new FAR code that voxelizes the craft to determine shape in atmosphere. KSP\u0027s current system is more like the old FAR\u002BDRE; it does the job well enough considering the complexity of craft you can design. Although the new service bays look really clunky (and kind of bad, IMO) they should be the premium choice for protecting those little parts.\n\nI\u0027m quite happy with the stock aero implementation now."},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2015-04-28T19:20:37Z","Content":"\u003E \n\u003E So if you build a lander protected by a larger-diameter heat shield, only the central components of the lander that are attached inline would be protected, and all the componets attached radially to those axial parts would be causing drag/getting heating even if they are fully shadowed by the heat shield? If so, this is bad news. \n\u003E Thank you for noticing this.\n\nI havent tested this all 100%, but sofar ive actually done some tests with clipped wings, as in 100% inside fuselage, they overheat 1st for some reason, so id guess the overheating also ignores stuff that isnt using classical occlusion. Right now occlusion is overly simplified, its nice that its there, but its not exactly something that id call 100% implemented, especially how radial parts for all intents and purposes are NEVER occluded at all."},{"CreatedByName":"Matt516","CreatedById":133442,"CreatedDateTime":"2015-04-28T19:58:21Z","Content":"I\u0027m fine with this, to be honest. Clipping isn\u0027t something that\u0027s physically possible, so it makes perfect sense that the games physics doesn\u0027t bother figuring out what happens when you do it. Less realistic physics is the price to be paid for mucking about with that sort of thing IMO. \n\nNot that there\u0027s anything wrong with doing that, of course. I\u0027m just neither surprised nor bothered that they made a simplification in the occlusion code that only works when you don\u0027t clip stuff inside other stuff. \n\nAs for the heat shield - I wouldn\u0027t be surprised if that works slightly differently. Haven\u0027t people reported seeing radially attached goo cans be protected by the shield during reentry?"},{"CreatedByName":"csiler2","CreatedById":62800,"CreatedDateTime":"2015-04-28T20:02:27Z","Content":"\u003E \n\u003E So if you build a lander protected by a larger-diameter heat shield, only the central components of the lander that are attached inline would be protected, and all the componets attached radially to those axial parts would be causing drag/getting heating even if they are fully shadowed by the heat shield? If so, this is bad news. \n\u003E Thank you for noticing this.\n\nThe fairings can also be used as heat-shields. Just build something a-la the Curiosity reentry capsule and you should be fine. I was thinking about running some tests later to see if you could use a heat shield for the bottom and close-up a rover with the fairings on top. You can also used a fully enclosed fairing, though they aren\u0027t as good at dealing with the heat as the heat shields are.\n\nI just tested an up-down re-entry with a simple probe with a decoupler attached heat-shield below and fairings enclosing from the top. It made it fine down from an apoapsis of 100K straight into Kerbin."},{"CreatedByName":"Brotoro","CreatedById":57674,"CreatedDateTime":"2015-04-28T20:12:30Z","Content":"It\u0027s not items clipped into tanks or fuselages or whatever that I\u0027m concerned about. For example, at one point I dumped a set of 8 probes onto Laythe (supposedly to monitor ocean conditions around the moon). I gave them little token heat shields made from structural plates, but if I was to do the same thing again, I\u0027d like to stick a heat shield (large enough to shield all the parts from the oncoming airflow) on the bottoms instead. But from what panzer1b says, all of the parts of my little probes (except for the ones axially connected to the heat shield) would NOT be protected from the oncoming air, despite being behind the heat shield. This is what concerns me. (I wouldn\u0027t mind if the little retro rocket motor on the bottom exploded during entry, since it already did its job.)\n\n![agzpml1.gif](http://i.imgur.com/agzpml1.gif)\n\n![KuCCjx9.jpg](http://i.imgur.com/KuCCjx9.jpg)"},{"CreatedByName":"Matt516","CreatedById":133442,"CreatedDateTime":"2015-04-28T20:46:14Z","Content":"\u003E \n\u003E It\u0027s not items clipped into tanks or fuselages or whatever that I\u0027m concerned about. For example, at one point I dumped a set of 8 probes onto Laythe (supposedly to monitor ocean conditions around the moon). I gave them little token heat shields made from structural plates, but if I was to do the same thing again, I\u0027d like to stick a heat shield (large enough to shield all the parts from the oncoming airflow) on the bottoms instead. But from what panzer1b says, all of the parts of my little probes (except for the ones axially connected to the heat shield) would NOT be protected from the oncoming air, despite being behind the heat shield. This is what concerns me. (I wouldn\u0027t mind if the little retro rocket motor on the bottom exploded during entry, since it already did its job.)\n\nFair enough. As far as I know though, the jury is still out as to how the heat shields protect - I could\u0027ve sworn I\u0027d seen example vehicles similar to your probes that did just fine. Haven\u0027t tested it personally though, so I\u0027m not sure."},{"CreatedByName":"Brotoro","CreatedById":57674,"CreatedDateTime":"2015-04-28T20:53:03Z","Content":"I\u0027m hoping that Squad will give us some giant inflatable heat shields (once they get the time to make them) that our ships can cower behind during interplanetary aerobreakings, because that would be so awesome... but they aren\u0027t going to work if only axially-attached components are protected in the shadow of the heat shield."},{"CreatedByName":"Jarin","CreatedById":71395,"CreatedDateTime":"2015-04-28T21:00:07Z","Content":"Also, note that drag and heat are modeled differently, so this doesn\u0027t entirely apply to heat shields. Radially-attached parachutes on the side of a Mk1 capsule are shielded from the airflow just fine, and never get any heat warnings."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T21:18:10Z","Content":"Drag occlusion != convection occlusion != the FX you see."},{"CreatedByName":"Redshift OTF","CreatedById":78679,"CreatedDateTime":"2015-04-28T21:27:33Z","Content":"Yeah, wings added radially and then moved into fuselages still function, (which is good for aesthetics)."},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2015-04-28T21:35:35Z","Content":"I have no idea if heat shields work differently (sofar ALL my tests were done with SSTOs). The one test i made (which also helped me draw conclusions on this) is placing a heat shield in front of an intake and some wings, which ONLY added drag to teh shield, and still had the intake and wings behind it (they were 100% hidden behind) explode well before the shield.\n\nIm not pretending to know everything about the heat effects, but it does APPEAR that radially attached anything has flat drag based on velocity/mach. Same with heat, while occlusion and heat transfer exists, stuff clipped 100% inside the craft can still overheat or be affected by drag.\n\ni dont actually mind the new drag model, as im now shoving EVERYTHING and i mean EVERYTHING that isnt a wing or engine (except for ions) into a carbo bay or service bay. Right now my engineering standstill revolves around being unable to fit a guided missile intop he 1.25m bay, but im actually working on a new weapons system that can fit in there!"},{"CreatedByName":"nholzric","CreatedById":7793,"CreatedDateTime":"2015-04-28T21:38:37Z","Content":"\u003E \n\u003E Also, note that drag and heat are modeled differently, so this doesn\u0027t entirely apply to heat shields. Radially-attached parachutes on the side of a Mk1 capsule are shielded from the airflow just fine, and never get any heat warnings.\n\nI had two goo containers explode off the side of a Mk1 capsule during a very tame (I think) reentry (Ap=71km Pg=20km). What\u0027s the difference between them exploding and radially-attached parachutes being shielded?"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-04-28T21:46:26Z","Content":"\u003E \n\u003E So if you build a lander protected by a larger-diameter heat shield, only the central components of the lander that are attached inline would be protected, and all the componets attached radially to those axial parts would be causing drag/getting heating even if they are fully shadowed by the heat shield? If so, this is bad news. \n\u003E Thank you for noticing this.\n\nDoubt this is true, see the stock rover with heat shield, it has loads of radial stuff. \n\nSolar panels on the MK1 pod tend to survive if hold prograde is activated. as they are in the shadow of pod and heat shield. Same with radial shutes on the MK1\n\nHowever clipping parts might very well not work."},{"CreatedByName":"moogoob","CreatedById":118251,"CreatedDateTime":"2015-04-28T23:33:25Z","Content":"I dropped a probe lander with radial legs onto Kerbin behind a size 2 heat shield, and nothing exploded. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) Didn\u0027t even spin around helplessly."},{"CreatedByName":"CalculusWarrior","CreatedById":58313,"CreatedDateTime":"2015-04-28T23:57:19Z","Content":"I\u0027ve done a few tests myself (I don\u0027t know about you guys, but I love watching the heat disperse through a vessel). One thing is that thermometers actually work now! Another is that parts seem to change their radiation specs based upon how they\u0027re configured. This mainly comes into play with cargo bays, as the doors will radiate heat away when they\u0027re open. (doesn\u0027t seem to work as much with airbrakes though).\n\nAll in all, this new heating system is an absolutely incredible addition to the game. I\u0027m sure somebody\u0027s going to exploit it in some way to make Carnot engines possible! ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2015-04-29T14:51:58Z","Content":"\u003E \n\u003E I\u0027ve done a few tests myself (I don\u0027t know about you guys, but I love watching the heat disperse through a vessel). One thing is that thermometers actually work now! Another is that parts seem to change their radiation specs based upon how they\u0027re configured. This mainly comes into play with cargo bays, as the doors will radiate heat away when they\u0027re open. (doesn\u0027t seem to work as much with airbrakes though).\n\u003E All in all, this new heating system is an absolutely incredible addition to the game. I\u0027m sure somebody\u0027s going to exploit it in some way to make Carnot engines possible! ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nI dont know how to make a stock carnot engine, but i agree its a great addition to the game when it comes to heating and aero mechanics.\n\nIts not quite far realism, but even far could be exploited to a certain degree if you knew how.\n\nToo bad my giant wall nolonger works, nothing was funnier then strapping 40 or so of the largest structural panels to the front of a craft and have them shield the entire thing, but since mass drag lol then it flew (with enough wings).\n\nreally my only annoyance is that legit non-exploity SSTOs to laythe and back are pretty much done. Not that its impossible to do (heck i have one myself), but it requires rather extensive abuse of the aero model to pull off, and abusing aero isnt quite what i call legit. Things like shoving fuel tanks and engines into cargo bays to bypass their drag, shoving clusters of ion engines into service bays (my laythe roundtrip SSTO abuses this).\n\nThe aero model is also rather weird, and does not behave as you would expect (for example parts that are radially attached are ALWAYS experiencing full drag based on orientation REGARDLESS or where they are located, be in inside the hull, or externally mounted. Based on what ive learned insanely quickly, service bays are your friend, cargo bays, ect. Even stuff like shoving fuel tank arrays inside them is a benefit.\n\nBasicaly the one rule ive found (subject to change if the aero is improved) is that you NEED to place anything that isnt part of your physical hull, an engine you are using in atmosphere, or wings inside a cargo/service bay to disable all drag on that part. Those bays are basically ESSENTIAL to making stuff fly fast and not burn alot of fuel down low. Occlusion is not the super advanced thing we all expected, all it does is partially lower the drag on something attached behind a part via its node. Radial parts have no occlusion period, so unless theyre in a bay that flags them as having no drag, you will suffer MASSIVE drag penalties from even a couple radial parts. Not what id call logical, but at least they didnt stop clipped wings/control surfaces from working (my sci-fi appearance replicas live on!).\n\nAlso one more conclusion ive come up with is that control surfaces are superior to wings when it comes to heat survivability. They are very hard to burn off for whatever reason (assuming ur using the smaller ones). Not saying you cant burn them, but ive started making planes with control surface wings, and they are capable of speeds well in excess of standard wings.\n\nMAJOR BUG FOUND!\n\nOcclusion does not care whatsoever about the size of part its shielding, so if you place a cubic strut in front of a 3.5m tank, you get the drag associated with a cubic strut AND the tank gets FULLY OCCLUDED! \n\nAs much as i hate to see this, im so abusing teh crap out of it to make dragless planes that use basically 0 fuel to get out of the soup!\n\n**Edited \u003Ctime datetime=\u00222015-04-29T15:02:22Z\u0022 title=\u002204/29/2015 03:02  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 29, 2015\u003C/time\u003E by panzer1b**"},{"CreatedByName":"Cinocal","CreatedById":54959,"CreatedDateTime":"2015-04-29T15:11:56Z","Content":"\u003E \n\u003E Occlusion does not care whatsoever about the size of part its shielding, so if you place a cubic strut in front of a 3.5m tank, you get the drag associated with a cubic strut AND the tank gets FULLY OCCLUDED! \n\u003E \n\u003E As much as i hate to see this, im so abusing teh crap out of it to make dragless planes that use basically 0 fuel to get out of the soup!\n\nThat is so broken. Can\u0027t wait for nuFAR."},{"CreatedByName":"Maolagin","CreatedById":129708,"CreatedDateTime":"2015-04-29T15:34:59Z","Content":"\u003E \n\u003E MAJOR BUG FOUND!\n\u003E \n\u003E Occlusion does not care whatsoever about the size of part its shielding, so if you place a cubic strut in front of a 3.5m tank, you get the drag associated with a cubic strut AND the tank gets FULLY OCCLUDED! \n\u003E \n\u003E As much as i hate to see this, im so abusing teh crap out of it to make dragless planes that use basically 0 fuel to get out of the soup!\n\nMeh, I\u0027m not even too worked up about that, even though it\u0027s totally an exploit. I mean, you\u0027re just abusing the simple mechanism that was put in place to make nosecones do something useful. Now they\u0027re basically mandatory. But if this bothers too many people, there\u0027s probably a flag somewhere that can be set to PartOccludesStuffBehindIt = False for things like struts."}]}