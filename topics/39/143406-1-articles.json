{"TopicId":143406,"ForumId":39,"TopicTitle":"A Very Kerbal Kontroller","CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-07-09T02:38:32Z","PageNum":1,"Articles":[{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-07-09T02:38:32Z","Content":"\n\u003Cp\u003E\nHi All\n\u003C/p\u003E\n\u003Cp\u003E\nJust wanted to share my progress on my custom controller. It all started when i found i had some useful HW laying around and found the wonderful KRPC mod by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/76528-djungelorm/\u0026amp;do=hovercard\u0022 data-mentionid=\u002276528\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/76528-djungelorm/\u0022 rel=\u0022\u0022\u003E@djungelorm\u003C/a\u003E. Being and ex flight sim developer who is relegated to management these days I miss this stuff so I thought \u0027this will be easy and fun\u0027! Turns out i was 50% right \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIn true Kerbal fashion it got out of hand quickly... I realised i had gone full Kerbal when i took the complete key binding list and tried to make a switch for everything..... Reality did dawn and a few got dropped, but not many!\n\u003C/p\u003E\n\u003Cp\u003E\nAt this point i have to say a massive thank you to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/76528-djungelorm/\u0026amp;do=hovercard\u0022 data-mentionid=\u002276528\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/76528-djungelorm/\u0022 rel=\u0022\u0022\u003E@djungelorm\u003C/a\u003E for answering my many questions and actively taking on my requests for more features in KRPC.\n\u003C/p\u003E\n\u003Cp\u003E\nSo here she is\u00A0 (p.s. can anyone tell me how to rotate images on imgur???):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/86v34/embed?background=ffffff\u0026amp;text=1a1a1a\u0026amp;link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EPhysical Layout:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe body is wood and designed to sit over the laptop with the screen still visible, and space on the right to still use the mouse. The panels are 4mm aluminium plate (yes, i know, but cheap trumps overkill) with stick on graphics and a clear stick on cover. Actually the 4mm was a pain as many switches wouldn\u0027t reach the depth and I had to machine out trenches in the back. I purposely am not going to describe my workshop practices as there may be children reading and blood was involved....\n\u003C/p\u003E\n\u003Cp\u003E\nThe light boxes on the side are hand made out of little bits of Perspex glued together with LED strips in the back... PITA x 10^343427436\n\u003C/p\u003E\n\u003Cp\u003E\nThe wiring did start to get a bit out of hand at the end, but given I was trying to use whatever I had its reasonable.\n\u003C/p\u003E\n\u003Cp\u003E\nThe space on the lower left is for a later Autopilot and perhaps \u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E/\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E area... lets get this finished first!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EArchitecture:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe is an Arduino Mega in the back talking over USB serial to a Python program on the PC. As even a Mega doesnt have anywhere near the pinouts to do this there are also a bunch of MCP23017 extenders which proved to be so super easy to use. The Mega runs the side panel and the analogue inputs (joysticks and throttles) whilst the extenders run the main panel off. This approach really minimised the wiring to this panel. The lights are driven of ULN28003 arrays and also PWM dimmed. The fan is PWM speed controlled (at max freq to stop whine) off a temperature sensor near the Arduino.\n\u003C/p\u003E\n\u003Cp\u003E\n(Originally it was mean to be an Arduino talking to a PI that ran a 10inch touch-screen taking to the PC. Then i dropped the touch-screen and moved to this approach which I think is a lot better anyway. Destruction leads to better design as Jeb likes to say!)\n\u003C/p\u003E\n\u003Cp\u003E\nThe code on the Arduino runs at a fixed 100Hz, and at the start of each frame checks for data from the Python module that drives the lights. If it receives data it will return data at the end of the frame, and if not it runs anyway but just doesn\u0027t send. This avoided a lot of timing issues and the need to synch the two programs. If the Python module pauses for some reason, the Arduino doesnt care.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EWhere am I at:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMost of the panel now works except the vessel and map focus switching, though there is a list of bugs to solve in the code and one nasty design oops in the HW that will require the extension board to come out and get modded with some diodes. I need to replace some of the rotary switches too as i mistakenly got 2x6 instead of 1x12. Also i cant yet control EVA Kerbals.\n\u003C/p\u003E\n\u003Cp\u003E\nThe arduino code is all done and just needs a final tidy. The Python code is still at \u0027just make it work\u0027 and needs a massive restructure and clean up. I will do this when I have the functionality sorted.\n\u003C/p\u003E\n\u003Cp\u003E\nThe last part will then be the graphic outputs. The idea is to use my two other monitors as info screens showing game data based on a mode selection on the panel. This is still in the conceptual design phase.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI have learnt a huge amount doing this and am happy to share my knowledge to anyone else who is crazy... err keen enough to take something like this on. I do plan at some point to document this all up too. Its very worth it, and after flying with sticks and switches i cannot go back!\n\u003C/p\u003E\n\u003Cp\u003E\nHappy crashing!\u003Cbr\u003E\nPete\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"TotallyNotHuman","CreatedById":157240,"CreatedDateTime":"2016-07-09T05:36:37Z","Content":"\n\u003Cp\u003E\n*tips hat*\n\u003C/p\u003E\n\u003Cp\u003E\nYou, sir, are a\u00A0genius. I haven\u0027t the foggiest idea how to assemble a controller, much less take the time to do exactly that. For this, I applaud you.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-07-14T13:28:37Z","Content":"\n\u003Cp\u003E\nI think this clearly shows the difference between someone who knows what he is doing and people like me. Mad props to you, may all your landings be fiery.\n\u003C/p\u003E\n\u003Cp\u003E\nOut of curiosity, how do you produce the graphics on the panel. Procured from the web?\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-07-14T14:09:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222675746\u0022 data-ipsquote-contentid=\u0022143406\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468502917\u0022 data-ipsquote-userid=\u0022111048\u0022 data-ipsquote-username=\u0022Freshmeat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, Freshmeat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOut of curiosity, how do you produce the graphics on the panel. Procured from the web?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111048\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/111048-freshmeat/\u0022 rel=\u0022\u0022\u003E@Freshmeat\u003C/a\u003E - thank you for the kind words! The graphics were painfully drawn in Open Office Draw and printed on self adhesive paper in a standard ink jet. This limited me to less that A4 so the main panel has some joins but they are not too visible.\n\u003C/p\u003E\n\u003Cp\u003E\nIts then covered with self adhesive clear A4 sheets that i will use to print the light box labels onto. It prints nicely in an inkjet as long as you are careful to let it dry which takes a while. All this stuff came from Ebay.\n\u003C/p\u003E\n\u003Cp\u003E\nI originally was going to use 2mm perspex to cover the graphics but the buttons were a PITA and then it started to crack so i binned it.\n\u003C/p\u003E\n\u003Cp\u003E\nI wish i could have used Front Panel Express who have a free design program which i used for the initial layouts. You can then upload it to them and they will machine it out for you including infills, slots etc. The cost is not cheap (the program calculates it for you on the fly) but reasonable, but postage to Australia and our great Fx rate killed that idea fast.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-07-14T16:34:00Z","Content":"\n\u003Cp\u003E\nThanks for the info. Actually, the plastic cover is what they used on several early soviet crafts, I\u00A0 happened to see them at an exhibition this spring.\n\u003C/p\u003E\n"},{"CreatedByName":"Malekal237","CreatedById":167147,"CreatedDateTime":"2016-07-28T10:12:03Z","Content":"\n\u003Cp\u003E\nPretty impressive, I wonder if you can share the code. I\u0027m trying to make a controler too but i\u0027m still new to Arduino and Python.\n\u003C/p\u003E\n\u003Cp\u003E\n(sorry for my bad english)\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-07-31T12:53:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222694447\u0022 data-ipsquote-contentid=\u0022143406\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221469700723\u0022 data-ipsquote-userid=\u0022167147\u0022 data-ipsquote-username=\u0022Malekal237\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 28/07/2016 at 8:12 PM, Malekal237 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPretty impressive, I wonder if you can share the code. I\u0027m trying to make a controler too but i\u0027m still new to Arduino and Python.\n\u003C/p\u003E\n\u003Cp\u003E\n(sorry for my bad english)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSure, would be happy too. I have no experience with GitHub though so give me a few days to figure it out as i have been meaning to set this up for a while. Will let you know when its done.\n\u003C/p\u003E\n\u003Cp\u003E\nThe python code I have is probably pretty bad, but it works. The C code for the Arduino should be better as C was always my favourite language!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Malekal237","CreatedById":167147,"CreatedDateTime":"2016-08-01T07:59:34Z","Content":"\n\u003Cp\u003E\nMany thanks, I spent 2 days to figure out it work so your help will be appreciate.\n\u003C/p\u003E\n"},{"CreatedByName":"Andem","CreatedById":155578,"CreatedDateTime":"2016-08-02T02:03:32Z","Content":"\n\u003Cp\u003E\nNice simpit!\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-08-03T12:50:00Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167147-malekal237/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022167147\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167147-malekal237/\u0022 rel=\u0022\u0022\u003E@Malekal237\u003C/a\u003E I have placed all my current code and documentation on Github here: \u003Ca href=\u0022https://github.com/PeteWasEre/Very-Kerbal-Kontroller/\u0022 rel=\u0022external nofollow\u0022\u003EGithub Repo.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI plan to update this frequently as my system grows.\n\u003C/p\u003E\n\u003Cp\u003E\nHopefully it will work, I am a Git first timer. If it doesnt work let me know, and if something doesnt make sense I am happy to answer any questions!\n\u003C/p\u003E\n\u003Cp\u003E\nPete\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-08-03T13:15:23Z","Content":"\n\u003Cp\u003E\nHi All\n\u003C/p\u003E\n\u003Cp\u003E\nStatus update time. All the functions of the controller have now been implemented and the HW oops\u0027s have been removed. The panel is essentially fully functional now. \u0027Controls Not In Agreement\u0027 logic has been implemented to prevent inadvertent switch errors on vessel change (what do you mean gear was up!?!?!?!) and it nicely uses the print on UI features of KRPC so it looks natural.\n\u003C/p\u003E\n\u003Cp\u003E\nVessel and focus switch turned out easier than i though thanks to the wonders of Python List comprehension! They are embarrassingly small lines of code now.\u00A0 A lot of bugs got squashed in the process and now I am down to a lot of out there cases that are due to the nature of KSP. Like using LOX tanks with only Liquid fuel for an air breathing engine shouldn\u0027t give fuel warnings. The lego nature of KSP makes for a lot of variation! Still it has forced me to think a lot and some elegant solutions evolved!\n\u003C/p\u003E\n\u003Cp\u003E\nA LOT of work then went into optimising the Python code. I moved the Python / Arduino relationship from serial to parallel but the real killer was the number of RPCs I would execute. However I just cannot express how awesome KRPC streams are. Set them up once and they pump data to you at no cost. So temperatures, resources, gear states etc are now all streams, and this made the output processing so fast (\u0026lt;1ms instead of 50-100ms) that paralleling the arduino was pointless. Python is waiting for the arduino now at that point.\n\u003C/p\u003E\n\u003Cp\u003E\nRemoving a lot of\u00A0 dynamic building of lists for static items also helped, and when needed are refreshed on staging. A nice part of the streams is that they don\u0027t die if a part is lost so my crashing the ship doesn\u0027t crash the program. The python module now runs under 60ms mostly with the odd spike that i cant control. It\u0027s enough.\n\u003C/p\u003E\n\u003Cp\u003E\nI also started the graphics side which runs as a separate process. After an epic and painful journey through all the python GUI addons that i couldn\u0027t get to work (i\u0027m looking at you GTK and WxPython!) , I am back at good old TK. Its boring but it works. Basic functionality of message passing and data sharing is done, and I can show panel and game data on the screen,\u00A0 so i can now proceed to build the rest.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd finally I have started documenting this by drawing up the schematics. They can be found in my \u003Ca href=\u0022https://github.com/PeteWasEre/Very-Kerbal-Kontroller/\u0022 rel=\u0022external nofollow\u0022\u003Egithub repo\u003C/a\u003E If they help anyone else then they have achieved their purpose.\n\u003C/p\u003E\n\u003Cp\u003E\nMy current todo list:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Finish the HW - graphic touch ups, labels for the indicator lights\n\u003C/p\u003E\n\u003Cp\u003E\n2. Continue documentation\n\u003C/p\u003E\n\u003Cp\u003E\n3. Continue Python graphics\n\u003C/p\u003E\n\u003Cp\u003E\n4. Bug squashing\n\u003C/p\u003E\n\u003Cp\u003E\n5. Keep working on the Atmospheric Autopilot module and panel design.\n\u003C/p\u003E\n\u003Cp\u003E\n6. Figure out Github better so i dont track everything in Excel!\n\u003C/p\u003E\n\u003Cp\u003E\nThe main system element will get a boost again when the next release of KRPC comes out as it has a few fixes and features i need to continue.\n\u003C/p\u003E\n\u003Cp\u003E\nTill next time, be good to your Kerbals.\n\u003C/p\u003E\n\u003Cp\u003E\nPete\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Malekal237","CreatedById":167147,"CreatedDateTime":"2016-08-08T13:01:45Z","Content":"\n\u003Cp\u003E\nThanks for sharing your hard work. My prototype work with nanpy in the arduino, but I feel I can learn lot of things with your code.\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-09-04T11:41:32Z","Content":"\n\u003Cp\u003E\nHouston, we have progress!\n\u003C/p\u003E\n\u003Cdiv data-role=\u0022contentPage\u0022\u003E\n\u003Cdiv data-role=\u0022contentPage\u0022\u003E\n\u003Cp\u003E\nIts amazing just how much time this takes. A few days surely and it would be done right? only out by a few orders of magnitude.... the problem is I think of new ideas faster than I think of solutions...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022zX9lrJj.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022230\u0022 src=\u0022https://i.imgur.com/zX9lrJj.jpg\u0022 width=\u0022301\u0022\u003E\u003Cimg alt=\u0022VfyS4Ih.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022233\u0022 src=\u0022https://i.imgur.com/VfyS4Ih.jpg\u0022 width=\u0022305\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022tbm2zS4.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022214\u0022 src=\u0022https://i.imgur.com/tbm2zS4.jpg\u0022 width=\u0022301\u0022\u003E\u003Cimg alt=\u0022HobpGT7.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022226\u0022 src=\u0022https://i.imgur.com/HobpGT7.jpg\u0022 width=\u0022302\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022VjdYbAm.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022226\u0022 src=\u0022https://i.imgur.com/VjdYbAm.jpg\u0022 width=\u0022302\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nOn the panel HW I tidied up the dimmer knob and the light boxes. Basically its done but I will wait to put the decals on the lights as I might change the function of some of them. However I have started cutting the Autopilot panel that you can see in the lower left of the panel image. The big rectangle is to hold the 40x2 LCD display that has also arrived (more on autopilot later) and works, proving very simple to hook up using the Arduino Liquid Crystal library. I now have to wait for the buttons to arrive as there are 21 buttons to go in to the lower area! I found some nice buttons with blue LED markings so it should look \u0027spacey\u0027. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nA lot of work has been going into the GUI SW. Getting the text going was easy enough, even the tabs with variable data like the rendezvous tab that can switch targets, or the systems tab that shows resource lists. Getting the plots going though was challenging! I started with the Launchplot based on some excellent work i found from Github user marioferpa and have since done a lot of tweaking. The orbit plots are all new work and the 3D view to get the angles right really stretched the mental muscles! They work mostly well, they don\u0027t like highly eccentric or hyperbolic orbits though, that will take more research. I made it so you can show either orbit plot, or both, so you can get a larger view and to ease load as rendering the #d plot is expensive. Need to optimise this part, with both plots is over 250ms, which with a 250ms frame rate is annoying.\u00A0 With no plots its 35.\n\u003C/p\u003E\n\u003Cp\u003E\nSo i need to do some work on the remaining tabs, but areas like the resources and temps on the systems page, and the runway ILS data will need KRPC updates to finish. Also the GUI does not handle vessel switch or scene switch well, that needs some further investigation.\n\u003C/p\u003E\n\u003Cp\u003E\nI also made it so the GUI can run without the panel,\u00A0 so even when I am KSP\u0027ing the old school keyboard way i still have my data \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe autopilot concept is taking shape in my head. 3 axes; vertical, lateral and speed. I want to divide the LCD up into 3 areas and show the mode and set point for each axis. For example for vertical modes will be pitch, altitude hold, rate of climb, and for lateral mode heading, bank angle and if i can get waypoint info then that too! Speed mode is only hold, except i am thinking hover mode for landers too?\n\u003C/p\u003E\n\u003Cp\u003E\nFor each axis i will have 6 buttons: mode up/dn, setting up/dn, set and cancel. Then a master power, engage and cancel button.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe beauty of this architecture is that i can just add one mode at a time as i figure it out.\n\u003C/p\u003E\n\u003Cp\u003E\nDocumentation is progressing. The Arduino code is fully documented now, but the python side will probably wait till i nail the architecture a bit more.\n\u003C/p\u003E\n\u003Cp\u003E\nMore than anything i need to actually PLAY KSP, rather than code, to find more bugs!\n\u003C/p\u003E\n\u003Cp\u003E\nCheers\n\u003C/p\u003E\n\u003Cp\u003E\nPete\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-06T12:04:05Z\u0022 title=\u002210/06/2016 12:04  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 6, 2016\u003C/time\u003E by PeteWasEre\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wabbit","CreatedById":110502,"CreatedDateTime":"2016-09-08T17:40:43Z","Content":"\n\u003Cp\u003E\nThis is awesome! I wish I had the patience to build something like this. Also, are the built-in controls as easy to use? Seems like spaced-out switches aren\u0027t as ideal as WASD, but I don\u0027t know.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-09-09T12:48:25Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110502-wabbit/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022110502\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110502-wabbit/\u0022 rel=\u0022\u0022\u003E@Wabbit\u003C/a\u003E\u00A0 Thanks!\n\u003C/p\u003E\n\u003Cp\u003E\nThe controls take a bit of getting used too, but once you have the muscle memory and dont have to look for switches it feels the same or better. It feels more tactile than the keyboard. You do move more (which probably isnt a bad thing \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E ) and while it wouldn\u0027t work for a fast paced game for KSP its fine.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-09T12:49:06Z\u0022 title=\u002209/09/2016 12:49  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 9, 2016\u003C/time\u003E by PeteWasEre\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-09T13:27:49Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110502-wabbit/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022110502\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110502-wabbit/\u0022 rel=\u0022\u0022\u003E@Wabbit\u003C/a\u003E While it is cut off from the picture in the view, rotational and translational movement is done by two 7cm analog joysticks, allowing for fine control of the craft. The rest of the controls are somewhat faster than keyboard to use due to their spacing and grouping.\n\u003C/p\u003E\n"},{"CreatedByName":"Wabbit","CreatedById":110502,"CreatedDateTime":"2016-09-09T15:10:01Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/161550-petewasere/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022161550\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/161550-petewasere/\u0022 rel=\u0022\u0022\u003E@PeteWasEre\u003C/a\u003E\u00A0\u0026amp; \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111048\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0022 rel=\u0022\u0022\u003E@Freshmeat\u003C/a\u003E\u00A0ah, thanks for clearing that up. Also, is that a dry-erase board for the action group center? That\u0027s awesome!\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-09-10T01:31:47Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110502-wabbit/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022110502\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/110502-wabbit/\u0022 rel=\u0022\u0022\u003E@Wabbit\u003C/a\u003E Yep, stick on dry erase. A roll of more than a meter cost a few bucks on ebay. Works a treat.\n\u003C/p\u003E\n\u003Cp\u003E\nOh and by far the nicest fine control is the throttle. Powered landings are soooooooo much easier now. I can hover at will.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-10T01:33:44Z\u0022 title=\u002209/10/2016 01:33  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 10, 2016\u003C/time\u003E by PeteWasEre\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-10T09:26:23Z","Content":"\n\u003Cp\u003E\nDefinitely agree on the throttle. My first hardware project was a rotary potmeter in an Arduino, while I used keyboard for everything else.\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-09-21T13:19:18Z","Content":"\n\u003Cp\u003E\nThat makes me wonder that it could be a nice intro tutorial for people who want to get into HW panels. I see a heap of comments on all our simpit threads about people who love the idea but dont know where to start.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am tempted to write something up, if there is interest I can then add more to it. Might have a crack this weekend if I have time.\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-10-06T11:58:04Z","Content":"\n\u003Cp\u003E\nI have an Autopilot \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E Well I have a working panel at least, still working out how to drive KRPC autopilot but it does fly and follow commands.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022AOs2MGs.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022235\u0022 src=\u0022https://i.imgur.com/AOs2MGs.jpg\u0022 width=\u0022309\u0022\u003E\u003Cimg alt=\u0022gMwfDba.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022232\u0022 src=\u0022https://i.imgur.com/gMwfDba.jpg\u0022 width=\u0022310\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe ghosting in the first pic of the LCD is me being too slow with the camera, its just about to change! (If you get the reference you are showing you are as old as me \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E )\n\u003C/p\u003E\n\u003Cp\u003E\nThe panel was a lot of fun to make, and quite different from the others.\n\u003C/p\u003E\n\u003Cp\u003E\nPhysically I previously used panel mount HW everywhere but this time the switches were board mount so i had to make and mount boards to hold it all to the panel, and that meant more visible screws on the front but the black hex heads look ok so I don\u0027t mind. The only frustrators are that the graphic printed in a slightly lighter grey (printer settings i think??) and I couldn\u0027t get the power button cap in silver or the others in black. Minor annoyances to tease my OCD only.\n\u003C/p\u003E\n\u003Cp\u003E\nThe LCD was also a difference but so damn easy to integrate I am wondering why i never used them elsewhere. Just hook it up and go, though the Liquid Crystal Library is very slow and causes an overrun at each screen refresh which is only on user input, and at 40ms its still ok. With the blue LCD and the blue lit switches I think it looks quite nice! Balancing the LED levels was a bit fiddly though, and chewed up a lot of resistors. All the lights in the switches and the LCD itself are linked to the main dimmer knob so they dim really nicely with the rest of the panel. LCD contrast is a pot on the back though, i tried a LP filter approach but it didnt work so I went old style. It shouldn\u0027t need to change much, only drift with age.\n\u003C/p\u003E\n\u003Cp\u003E\nThe code is a bit more extensive than usual as i am handling all the switching on the Arduino end and only transmitting the final result to the Python code to avoid lots of data transfer. This was compounded by the 3 axis approach I am pushing for and that I want to be able to select the next setting whilst the first is held. This took me back to good old C Structs and lots of arrays but they worked really neatly.\n\u003C/p\u003E\n\u003Cp\u003E\nSo in the photo you will the Lateral axis is on and set. In the vertical axis I am preparing the next mode and I can change this as much as I want until I am happy then press \u0027Set\u0027 and it will lock in and look like the lateral mode, or cancel to go back to the current mode setting. Finally the speed setting shows you what happens when the axis is off. The master CANCEL will turn off all 3 modes for when it goes pear shaped....\n\u003C/p\u003E\n\u003Cp\u003E\nIts built so that each axis can just add modes to a struct with their own min/max, multipliers (so I don\u0027t have to change altitude 1m at a time!) and with individual prefix and suffix for units. I can just add them whenever I like.\n\u003C/p\u003E\n\u003Cp\u003E\nTransferring to python was fun as i had to split INTs into multiple bytes and then recombine, and the out of the box doesn\u0027t handle negatives well! A custom function fixed that and now it works nicely, and the focus is working with KRPC to understand how it tunes gains as my first trials oscillated... a LOT. It seems to not like fighters with massive control ranges.... shame I do.\n\u003C/p\u003E\n\u003Cp\u003E\nNice thing is though you can overwrite the AP with the stick still and then let go and it takes over.\u00A0 \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI am still working though the docs, the schematics are done but the design doc now needs updating.\n\u003C/p\u003E\n\u003Cp\u003E\nThe plan from here is:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Get way more AP modes, will need to work with the KRPC dev to get this going\n\u003C/p\u003E\n\u003Cp\u003E\n2. Implement a queue for cautions and my new clear caution button (Cautions should flash at first till cancelled).\n\u003C/p\u003E\n\u003Cp\u003E\n3. Keep working on the Python GUI especially for atmospheric flight and rovers.\n\u003C/p\u003E\n\u003Cp\u003E\n4. MOAR DOCUMENTATION!\n\u003C/p\u003E\n\u003Cp\u003E\n5. Migrate to 1.2 and all the joy that upcoming KRPC builds are promising \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n6. Play KSP!\n\u003C/p\u003E\n\u003Cp\u003E\nTill next time!\n\u003C/p\u003E\n\u003Cp\u003E\nPete\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-06T12:05:42Z\u0022 title=\u002210/06/2016 12:05  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 6, 2016\u003C/time\u003E by PeteWasEre\u003C/strong\u003E\n\u003Cbr\u003EFix pics\n\u003C/span\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-10-06T14:12:45Z","Content":"\n\u003Cp\u003E\nSurely you can\u0027t be serious!\n\u003C/p\u003E\n\u003Cp\u003E\nThat autopilot looks fantastic, great work. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E Would love to know more about your buttons, mostly because I struggled with my little illuminated PCB mount ones as well. What sort of buttons are they, and how did you make the caps?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"tjsnh","CreatedById":108021,"CreatedDateTime":"2016-10-06T14:18:32Z","Content":"\n\u003Cp\u003E\nThis is absolutely amazing.\u003Cbr\u003E\u003Cbr\u003E\nI\u0027d LOVE to have a control board like that. You should make these and ebay them!\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-10-06T19:19:10Z","Content":"\n\u003Cp\u003E\nIt seems as if you are going to have the most advanced control unit around here. I tried to construct an altitude autopilot myself, but cannot get rid of the oscillations.\n\u003C/p\u003E\n"},{"CreatedByName":"PeteWasEre","CreatedById":161550,"CreatedDateTime":"2016-10-07T10:37:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222790316\u0022 data-ipsquote-contentid=\u0022143406\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475763165\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSurely you can\u0027t be serious!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI am serious, and don\u0027t call me Shirley! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E ah that movie never gets old!\n\u003C/p\u003E\n\u003Cp\u003E\nThanks \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E The buttons are right off eBay, caps and all. There are a bunch of vendors selling them, all in from China which means long delivery but you can\u0027t argue with the price at a buck each. The feel is nice but careful with solder temp as they are not super robust. The pin spacing is not quite 0.1\u0022 so it took some plier work to get them in, along with a good shove, then more fiddle to get them straight in the holes. There are heaps of styles of cap available (they just clip on) and colours also, and the LEDs are super bright. I had to add resistance to tone them down a few times. Here is a link to one -\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://www.ebay.com.au/itm/331584970800?_trksid=p2060353.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.ebay.com.au/itm/331584970800?_trksid=p2060353.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp style=\u0022line-height:13.5pt;background:#FFFFFF;vertical-align:top;\u0022\u003E\n\u003Cspan lang=\u0022en\u0022 style=\u0022font-size:10.5pt;font-family:Helvetica, sans-serif;color:#525252;background:#FFFFFF;\u0022 xml:lang=\u0022en\u0022\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/108021-tjsnh/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022108021\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/108021-tjsnh/\u0022 rel=\u0022\u0022\u003E@tjsnh\u003C/a\u003EThanks for the praise! and if only it were that easy... there is probably $300 in parts in this now, and hundreds of hours. Without going to a production version its just not viable as it would need to be $1k to make it worthwhile. With mass buy of parts, proper PCBs with SMD parts the cost would come way down, but I don\u0027t have the skills to do that.\u003C/span\u003E\u003C/p\u003E\n\u003Cp\u003E\u003C/p\u003E\n\u003Cp style=\u0022line-height:13.5pt;background:#FFFFFF;vertical-align:top;\u0022\u003E\n\u003Cspan lang=\u0022en\u0022 style=\u0022font-size:10.5pt;font-family:Helvetica, sans-serif;color:#525252;background:#FFFFFF;\u0022 xml:lang=\u0022en\u0022\u003EHowever the build is the most rewarding part. I think a lot more people can do this if they just have a go, and heaps of people on here will gladly help answer questions or provide guidance to get people started.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022line-height:13.5pt;background:#FFFFFF;vertical-align:top;\u0022\u003E\n\u003Cspan lang=\u0022en\u0022 style=\u0022font-size:10.5pt;font-family:Helvetica, sans-serif;color:#525252;background:#FFFFFF;\u0022 xml:lang=\u0022en\u0022\u003EI will get to that intro tutorial for a basic HW throttle up as soon as RL stops getting in the way! \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022line-height:13.5pt;background:#FFFFFF;vertical-align:top;\u0022\u003E\n\u003Cspan lang=\u0022en\u0022 style=\u0022font-size:10.5pt;font-family:Helvetica, sans-serif;color:#525252;background:#FFFFFF;\u0022 xml:lang=\u0022en\u0022\u003EOnce you have one control working the rest is cut, paste and adjust. The rest is a housing but it doesn\u0027t have to be fancy. One guy on here made one out of craft sticks, and I have made a guitar amp that\u0027s based on a cake tin before! \u003C/span\u003E\u003C/p\u003E\n\u003Cp\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111048\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0022 rel=\u0022\u0022\u003E@Freshmeat\u003C/a\u003E I\u0027m tryin\u0027 \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWould be curious to know what approach you used. I spoke to the KRPC Dev and he has no plans for higher level modes, so I need my own PID to turn altitude hold into a pitch command to give to KRPC\u0027s autopilot. I suspect similar issues when I have one PID driving another, and my control theory classes are approaching 20 years ago!\n\u003C/p\u003E\n"}]}