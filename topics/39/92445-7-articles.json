{"TopicId":92445,"ForumId":39,"TopicTitle":"My KSP control panel","CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2014-12-10T07:53:50Z","PageNum":7,"Articles":[{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-12-31T09:05:25Z","Content":"\n\u003Cp\u003E\nAfter a month of busyness at work and then Christmas shenanigans, I finally got a chance to get back to working my controller hardware. Earlier this month I did manage to laser cut a final panel for the display. Today I got almost all of the work done actually mounting it.\n\u003C/p\u003E\n\u003Cp\u003E\nStarted by soldering the arduino, controller and other bits on to protoboard. While trying to figure out how I\u0027d hold the board on to the back of the display, I discovered that I\u0027d accidentally managed to make the mounting bolts fit very closely to the 0.1\u0022 pitch on the protoboard. So I was able to just drill out a couple of holes and slip them over the bolts. Very handy!\n\u003C/p\u003E\n\u003Cp\u003E\nTesting the board after reconnecting everything was a little bit stressful. I started out running an Adafruit test sketch, which resulted in nothing but a blank screen. Took a good half hour of hair pulling and line tracing before I realised that the Adafruit library doesn\u0027t play nicely with Teensy. Switched to my other test code and the whole lot fired up first try, much to my relief.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022SSGi0Wm.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/SSGi0Wm.jpg\u0022 style=\u0022width:256px;height:143px;\u0022\u003E\u00A0\u003Cimg alt=\u0022WkdIP4Y.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/WkdIP4Y.jpg\u0022 style=\u0022width:256px;height:143px;\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThen came mounting the display panel in the controller. I used the bamboo test panel I cut last month as a template to mark mounting holes and an outline on the controller. Then, heart in mouth, drilled out the holes and finally cut a new hole through with a jigsaw. This was done without removing the other panels, which was a little bit awkward. That\u0027s why I managed to end up with some scuffs and dings in the paintwork, and some awkward MDF dust wedged under the cover of the annunciator panel. Luckily I bought\u00A0\u003Cstrong\u003Eway\u003C/strong\u003E\u00A0too much of the metallic paint - touching it up shouldn\u0027t be a problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022rUkto9x.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/rUkto9x.jpg\u0022 style=\u0022width:256px;height:143px;\u0022\u003E\u00A0\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/os9fX7c.jpg\u0022 style=\u0022width:256px;height:143px;\u0022 alt=\u0022os9fX7c.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nLooking carefully makes it pretty obvious I\u0027m getting worse at keeping my edges straight. But apart from that I\u0027m super happy with how this the controller is looking now. Can\u0027t wait to fire up the display again soon.\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/04RfgvG.jpg\u0022 alt=\u002204RfgvG.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-31T09:41:19Z\u0022 title=\u002212/31/2015 09:41  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 31, 2015\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-12-31T10:01:44Z","Content":"\n\u003Cp\u003E\nI\u0027ve had a little more time this month to work on software. Refactored a lot of the display sketch. It\u0027s a little neater, a little bit faster, and has less duplication and seedy hacks.\n\u003C/p\u003E\n\u003Cp\u003E\nI was still struggling to figure out how to reduce the size of the KSPSerialIO data packet though. Right now all of the axes that are sent (15 of them!) are 4 byte floats holding a number that can be either 0-360 or -180-180. My first thought was to convert those to a smaller fixed point representation, so I spent a fair bit of time wrapping my head around how fixed-point calculations work. Eventually got a prototype working using 10.6 fixed point numbers, but the accuracy seemed abysmal. I was getting random variations that could go to more than 0.1 away from the original floating point number, unacceptably high. So I put the problem to one side while Christmas happened.\n\u003C/p\u003E\n\u003Cp\u003E\nEventually hit upon a possible solution based on how things are done in the real world, while reading Frank O\u0027Brien\u0027s\u00A0\u003Ca href=\u0022https://books.google.com/books/about/The_Apollo_Guidance_Computer.html?id=3fKzL0HfJp4C\u0022 rel=\u0022external nofollow\u0022\u003EThe Apollo Guidance Computer: Architecture and Operation\u003C/a\u003E in a tent in an outback South Australian town over Christmas. The Inertial Measurement Unit in the PGNCS sends pulses to the AGC indicating rotation around each axis, and it\u0027s up to the AGC to count them to measure rotation. A full revolution around an axis contains 32768 pulses, which makes sense seeing as the AGC uses 15 bit data words. Essentially, angle on an axis is measured as a number between 0 - 32767.\n\u003C/p\u003E\n\u003Cp\u003E\nAt first I found it curious that the AGC\u0027s angular resolution of just over 0.1 degree was quite close to the error I was seeing in my fixed-point representation. But then I realised that if KSPSerialIO maps each axis\u0027 angle to a signed 16 bit number then I\u0027d have a range of -32767 - 32767. It\u0027ll be a constant error, much better than the variable floating-point gumpf I had to deal with before, and at twice the resolution of the 8balls the Apollo astronauts used. In your face, Neil Armstrong!\n\u003C/p\u003E\n\u003Cp\u003E\nNow that I\u0027m back home I guess I\u0027ll be spending some time reworking my vector code in KSPSerialIO again, converting it to use a standard integer rather than sending degrees. And then reworking my display code to deal with the new format. Hopefully shouldn\u0027t take long to restore functionality though.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-01-11T12:31:46Z","Content":"\n\u003Cp\u003E\nQuick update full of pretty pictures now that I\u0027ve finished assembling all of the hardware.\n\u003C/p\u003E\n\u003Cp\u003E\nStarted by cutting a bezel from thin blue cardboard, and a cover from a sheet of thin clear PVC. Took a few attempts to get this right, and a lot of fiddling around. But I\u0027m super happy with how it looks. And it was great to finally remove the protective sheet on top of the display. \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220cuA7Bl.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0cuA7Bl.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nFrom the back, my 3D printed brackets sandwich the display, bezel and cover in place. Above that, the display controller and teensy are mounted on a prototyping board, along with header pins to connect the switches, and terminals to connect power and the i2c bus hooking it up to the rest of the system. I\u0027m really really proud of how the front and back of this panel look, to be honest. Probably my favourite part of this build.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022iWpuuns.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/iWpuuns.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe final step, screwing this panel in to place and hooking it up. Boom.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Tm6RDxh.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/Tm6RDxh.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe Arduino code and my KSPSerialIO changes to drive all of this is still in a fairly broken state. I\u0027ve been putting off tying all of the pieces back together until I had the hardware fully assembled. But I\u0027ve now run out of excuses. Back to software hacking!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-11T12:32:12Z\u0022 title=\u002201/11/2016 12:32  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 11, 2016\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-01-12T12:11:57Z","Content":"\n\u003Cp\u003E\nBig gratulations on finalising your hardware. It is something to be rightly proud of, and I hope the coding will go smoothly. Looking forward to see a video of everything running.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-01-19T12:53:48Z","Content":"\n\u003Cp\u003E\nI spent a very late night\u00A0last week fixing the buttons on my navball display. I\u0027m using hardware pulldown resistors for every switch on this build, and I\u0027d forgotten to connect\u00A0the pulldowns on my navball buttons to ground. That left all of the buttons floating and some very confusing inputs to my test code. But after I fixed those I was able to implement the GUI for the mode switching to emulate the on-screen display.\n\u003C/p\u003E\n\u003Cp\u003E\nI also uncovered a bug in the\u00A0\u003Ca href=\u0022https://github.com/sumotoy/RA8875\u0022 rel=\u0022external nofollow\u0022\u003ERA8875 display library\u003C/a\u003E. Attempting to use customised fonts leads to the user icons becoming corrupted and not rendering properly. So all of my text is being written with the single built-in font. Luckily after trying it I absolutely love the single built-in font, and am very happy with the overall retro look of the navball. This is seriously one of my favourite photos from this build.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/VkWUVjD.jpg\u0022 alt=\u0022VkWUVjD.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a good chance I\u0027ll increase the navball rendering size, and probably move it to the right a little. But it looks awesome.\n\u003C/p\u003E\n\u003Cp\u003E\nThe rest of my current work lies in completely overhauling the vessel attitude code in KSPSerialIO, and adding a lot of code to send orbital vectors. The current code sends floats showing pitch, heading and roll as straight degrees. But I\u0027m trying to save space by converting all of those to unsigned integers. I\u0027ve had to tweak all of the conversions a lot to make sure I had something that was still accurate and backwards compatible with the old system with minimal effort.\n\u003C/p\u003E\n\u003Cp\u003E\nI develop both my arduino code and my plugin code on a tiny Mac Air. I have a large Linux gaming rig that I run KSP on, and the controller is plugged in to that. So the way I\u0027m verifying all of my code is to have the laptop SSHed in to the gaming rig and streaming KSP logs. At the same time, I have a serial connection from my laptop to the arduino that runs the navball rendering and it\u0027s dumping its interpretation of the KSPSerialIO data. And finally I\u0027ve started using the kOS terminal to set the orientation of my test vessel, so I\u0027m using the telnet console through my laptop as well. It\u0027s a wonderfully bizarre workflow.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/q2WIFdB.jpg\u0022 alt=\u0022q2WIFdB.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s taken a few attempts at modifying how I\u0027m converting numbers back and forth, but I think I\u0027ve finally got a system that is reliable and easily backwards compatible with the old KSPSerialIO directions. Anybody who was using the old stuff will need a new function added to their arduino code, but nothing too onerous I hope.\n\u003C/p\u003E\n\u003Cp\u003E\nThe first time these two images consistently lined up tonight was super satisfying.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/nDhJv2x.jpg\u0022 alt=\u0022nDhJv2x.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMy KSPSerialIO patch is sending prograde, normal, radial, as well as surface prograde and target direction and prograde in the same format. In theory I just need to use my existing code to transform each of those back to degree rotations, then use those to rotate a (0, 0) point to get the coordinates to draw the appropriate icon. But that\u0027s a job for next time.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-01-19T14:22:47Z","Content":"\n\u003Cp\u003E\nThat is really awesome progress you have made there. Do you and zitronen consider merging this for the main branch of KSPSerialIO?\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-01-19T14:29:01Z","Content":"\n\u003Cp\u003E\nI opened a \u003Ca href=\u0022https://github.com/zitron-git/KSPSerialIO/pull/10\u0022 rel=\u0022external nofollow\u0022\u003Epull request\u003C/a\u003E last week. \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0Still a fair bit of work to do on the plugin before it\u0027s ready, and I really want to make sure I\u0027ve got reasonable arduino-side example code to go with it before it gets merged. But it\u0027ll happen soon(ish).\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-01-23T06:25:28Z","Content":"\n\u003Cp\u003E\nI am terribad at maths.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/KKmnhtnKL_Y?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-02-08T08:35:14Z","Content":"\n\u003Cp\u003E\nI gave a short talk on some of this build at the \u003Ca href=\u0022http://www.openhardwareconf.org/wiki/Main_Page\u0022 rel=\u0022external nofollow\u0022\u003Eopen hardware miniconf\u003C/a\u003E at \u003Ca href=\u0022http://lca2016.linux.org.au/\u0022 rel=\u0022external nofollow\u0022\u003Elinux.conf.au\u003C/a\u003E last week. It was also the first time I\u0027ve been able to get some feedback on the layout from experienced KSP players having a crack at using it, which will be very useful when I get around to re-doing how the displays are organised.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.youtube.com/watch?v=AVXr9tLTQEE\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.youtube.com/watch?v=AVXr9tLTQEE\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nProgress on the navball is still slowly grinding along. I\u0027ve realised that the way I\u0027m calculating relative pitch and heading is OK for yaw/AoA readouts, but completely unsuitable for rotating a navball. Got something that I think works, but haven\u0027t really had time to properly test this stuff yet. Hopefully soon.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-02-08T08:38:20Z\u0022 title=\u002202/08/2016 08:38  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 8, 2016\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-02-08T09:12:35Z","Content":"\n\u003Cp\u003E\nThat is rather cool getting your fifteen minutes.\n\u003C/p\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2016-02-09T11:20:03Z","Content":"\n\u003Cp\u003E\nI\u0027ve been out of touch for a little while - but man, kudos! I\u0027m loving what you did with that display! Fantastic work!\n\u003C/p\u003E\n\u003Cp\u003E\nI seriously need to look into sharing the processing load with a separate arduino!\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-02-10T01:25:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222400573\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221455016803\u0022 data-ipsquote-userid=\u0022141420\u0022 data-ipsquote-username=\u0022Sputnix\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Sputnix said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI seriously need to look into sharing the processing load with a separate arduino!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI love the idea of using I2C to shunt packets off to separate display controllers. But like I said, you really,\u00A0\u003Cem\u003Ereally\u003C/em\u003E\u00A0don\u0027t want to try to use the standard Arduino libraries to do that. I really should clean up the AVR I2C libraries I\u0027ve been working with and release them properly.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, thanks. \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Vjrcr","CreatedById":158398,"CreatedDateTime":"2016-02-10T14:57:19Z","Content":"\n\u003Cp\u003E\nMy head just exploded.\n\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2016-03-03T05:00:04Z","Content":"\n\u003Cp\u003E\nThis just makes me realize how far off I am with my hardware version...\u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003Cbr\u003E\nI know how to do the hardware, but I just do not have the programming side of it down. I have a LOT to learn to get this up and running!\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\nIt is an inspiration though to keep moving forward!\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-03T05:01:18Z\u0022 title=\u002203/03/2016 05:01  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 3, 2016\u003C/time\u003E by richfiles\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-04-16T01:23:31Z","Content":"\n\u003Cp\u003E\nThis project isn\u0027t dead, it\u0027s just resting.\n\u003C/p\u003E\n\u003Cp\u003E\nReal life hasn\u0027t been leaving me with a lot of time or energy for hard hacking in my own time. So, apart from some light poking to see if KSPSerialIO will work properly in 1.1, I haven\u0027t really been involved in any development for this project at all. That\u0027s going to continue for another month or two. \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003Cimg class=\u0022ipsImage ipsAttachLink_image ipsAttachLink_right\u0022 src=\u0022http://i.imgur.com/FtSVOV9.jpg\u0022 style=\u0022width:500px;height:280px;float:right;\u0022 alt=\u0022FtSVOV9.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWhat I have been thinking about, though, is replacing my current Arduino Mega arrangement. Right now it consists of an Arduino board, with a multiplexer shield stacked on that, and a protoshield above it containing a handful of IDC sockets and a hilariously awful mass of connecting cables. It\u0027s an excellent working prototype, but gosh.\n\u003C/p\u003E\n\u003Cp\u003E\nThe multiplexer made sense when I started and didn\u0027t really know the size of what I wanted to do. But now I realise that what I\u0027ve got is well within the scope of native handling for a Mega, it makes sense to remove it from the equation. That should save me a lot of time - each multiplexer pin requires four pin writes before I can read it, and right now my input loop does this\u00A0\u003Cstrong\u003Etwenty times\u003C/strong\u003E\u00A0every few milliseconds. Using native inputs means I can read an entire port in to bitfield variable in one or two cycles, super convenient as my code is already set up to debounce and handle these bitfields.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027ve started idly working on a replacement PCB for all of this, similar to my current display controller, but embedding a bare ATmega 2560 rather than plugging in a separate Arduino board. Should be pretty fun. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Deizelpunk","CreatedById":154790,"CreatedDateTime":"2016-04-16T20:31:41Z","Content":"\n\u003Cp\u003E\nHoly love this is the coolest thing i\u0027ve ever seen man, i really wanna do something like this!\n\u003C/p\u003E\n"},{"CreatedByName":"Gemini0915","CreatedById":122158,"CreatedDateTime":"2016-05-30T16:46:38Z","Content":"\n\u003Cp\u003E\n\u003Cabbr title=\u0022what\u0022\u003Ewtf\u003C/abbr\u003E ... are you doing there ... that\u0027s exactly the same i wanted to do ... but i\u0027m just building crap :ugly: ^^ - The only thing i do not like is this eye cancer blue light irradiation \u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E ...\n\u003C/p\u003E\n\u003Cp\u003E\n... but : That\u00A0 is awesome ! ... especially the NAVball-thingy ... I WANT ! -In my project i wanted to distribute RX data to other uC\u0027s to distribute workload, just by listening to Arduino#Master DIO 0. That worked, but failed sometimes, too bad to keep.\n\u003C/p\u003E\n\u003Cp\u003E\nNow i\u0027m wondering, are you doing your whole cockpit just by one MEGA \u00BF?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-05-30T22:01:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222608161\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464626798\u0022 data-ipsquote-userid=\u0022122158\u0022 data-ipsquote-username=\u0022Gemini0915\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Gemini0915 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe only thing i do not like is this eye cancer blue light irradiation\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHah. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0I don\u0027t remember why I picked blue way back at the start of this project. I think it came down to which colours the big seven segment displays were available in, and the blue one looked nicest. I still have plans to add a display brightness control, but so far I\u0027ve found that the hard wired brightness I have set now seems to work well under all lighting conditions I play the game in.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222608161\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464626798\u0022 data-ipsquote-userid=\u0022122158\u0022 data-ipsquote-username=\u0022Gemini0915\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Gemini0915 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn my project i wanted to distribute RX data to other uC\u0027s to distribute workload, just by listening to Arduino#Master DIO 0. That worked, but failed sometimes, too bad to keep.\n\u003C/p\u003E\n\u003Cp\u003E\nNow i\u0027m wondering, are you doing your whole cockpit just by one MEGA \u00BF?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo. A single Mega would probably be OK for this many controls and LEDs, but definitely can\u0027t drive the display as well. I\u0027m using three different microcontrollers\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nAn Arduino Mega for the serial connection to my computer, and it has all of the inputs connected to it.\n\u003C/li\u003E\n\u003Cli\u003E\nAn Arduino Leonardo (a pro micro board), which controls all of the LEDs and outputs.\n\u003C/li\u003E\n\u003Cli\u003E\nA Teensy that just drives the TFT screen. Rendering the navball takes some pretty serious processing.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI\u0027m using I2C to send data to all three controllers. The Mega acts as an I2C master, and whenever it receives a data packet from the game it sends that packet to all of the slaves. The slaves then display information out of the data packet in their own time.\n\u003C/p\u003E\n"},{"CreatedByName":"Gemini0915","CreatedById":122158,"CreatedDateTime":"2016-06-01T17:59:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222608740\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464645715\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 31.5.2016 at 0:01 AM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nadd a display brightness control\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think it\u0027s quite hard to achieve that, except you are using exclusively\u00A0 matrix drivers like the MAX7219 with a digital brightness control feature. A hardware solution with a main PWM signal controlling a bunch of transistors connected by much more wires could also work ... but i think wearing sunglasses in a space capsule is the most convenient way \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222608740\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464645715\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 31.5.2016 at 0:01 AM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m using I2C to send data to all three controllers. The Mega acts as an I2C master, and whenever it receives a data packet from the game it sends that packet to all of the slaves. The slaves then display information out of the data packet in their own time.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSounds like the solution i will use too, are you using the \u0027EasyTransfer\u0027 library \u00BF?\u00A0 ... actually building a real NAV ball with 3D printed parts is my final goal for my cockpit project. This thread inspired me, has said to me build me ^^\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-06-01T22:40:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611636\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464803963\u0022 data-ipsquote-userid=\u0022122158\u0022 data-ipsquote-username=\u0022Gemini0915\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Gemini0915 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222608740\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464645715\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/31/2016 at 8:01 AM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nadd a display brightness control\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think it\u0027s quite hard to achieve that, except you are using exclusively\u00A0 matrix drivers like the MAX7219 with a digital brightness control feature. A hardware solution with a main PWM signal controlling a bunch of transistors connected by much more wires could also work\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, for the MAX7219 drivers I\u0027m already setting a very low brightness. And the other LEDs are also under digital control and driven using the FastLED library. FastLED does the hard work scaling colour values down for lower brightness.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m already driving most of the displays with quite low brightness, and then use photographic tricks to make the colours appear brighter in pictures. \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0Tempted to redesign the displays a little to include dim covers.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611636\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464803963\u0022 data-ipsquote-userid=\u0022122158\u0022 data-ipsquote-username=\u0022Gemini0915\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Gemini0915 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSounds like the solution i will use too, are you using the \u0027EasyTransfer\u0027 library \u00BF?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNope, I hadn\u0027t heard of it before, but it looks pretty nice.\n\u003C/p\u003E\n\u003Cp\u003E\nI had a lot of problems getting I2C to work, because the built in Arduino libraries for it aren\u0027t well suited to the data rates KSPSerialIO needs. I wrote my own I2C driver libraries instead. See this post for a longer explanation about how and why.\u00A0\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/92445-my-ksp-control-panel/\u0026amp;do=embed\u0026amp;embedComment=2063020\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"kiwi1960","CreatedById":81697,"CreatedDateTime":"2016-06-30T03:19:54Z","Content":"\n\u003Cp\u003E\nOH WOW.... amazing..... more so since you\u0027re an Aussie.. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nVery well done. You make KSP proud. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-07-09T15:36:50Z","Content":"\n\u003Cp\u003E\nInspiration struck this week and I started planning a new enclosure for this build. Now that I know all of the hardware that\u0027s in it, I can build something that\u0027s a lot more compact and I\u0027m planning on taking the time to do a better job of it.\n\u003C/p\u003E\n\u003Cp\u003E\nSpent some time this week sketching up ideas and figuring out a new layout for the instruments I have. Today, with required dimensions sorted out, I was able to draw up designs and attempt to start cutting them.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m planning on a split sloped and angled design. The left and right sides cut from the same MDF I used for the first enclosure, like this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/wMX00ww.png\u0022 alt=\u0022wMX00ww.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe left and right are slightly larger, and the blue lines will be cut as grooves for the other faces to slot in to. The front and top faces will almost certainly be aluminium composite (Dibond). I was impressed with the finish Mulbin was getting on his panels, and am pretty sure it\u0027s rigid enough for large panels without sagging. The back and bottom will be MDF, but much thinner than the sides. The 12mm stuff I used for the last enclosure was massive overkill.\n\u003C/p\u003E\n\u003Cp\u003E\nThe rest of the day was spent learning how to use the CNC at my maker space. These things are a lot more complicated than a laser cutter, but really really fun.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/6ia18Eu.jpg\u0022 style=\u0022width:500px;height:375px;\u0022 alt=\u00226ia18Eu.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIt... did not go especially well. A couple of failed attempts, one very nearly broken spindle motor, some creative swearing. I learned a lot though! Hoping to get the side panels cut properly in the next few days.\n\u003C/p\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2016-07-10T05:22:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222668310\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468078610\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://i.imgur.com/6ia18Eu.jpg\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u00226ia18Eu.jpg\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022http://i.imgur.com/6ia18Eu.jpg\u0022 style=\u0022width:500px;height:375px;\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt... did not go especially well. A couple of failed attempts, one very nearly broken spindle motor, some creative swearing. I learned a lot though! Hoping to get the side panels cut properly in the next few days.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLearning is the main objective of anything, especially kerbal-related\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nNow, that huge 18mm(?) MDF on the base, is that what you\u0027re carving the panel out of, or is that just there to sit your piece of wood on?\u00A0\u003Cimg alt=\u0022:huh:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 title=\u0022:huh:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-07-10T08:23:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222669262\u0022 data-ipsquote-contentid=\u002292445\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468128138\u0022 data-ipsquote-userid=\u0022141420\u0022 data-ipsquote-username=\u0022Sputnix\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Sputnix said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNow, that huge 18mm(?) MDF on the base, is that what you\u0027re carving the panel out of, or is that just there to sit your piece of wood on?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTop to bottom, there\u0027s a sheet of 12mm MDF that I was trying to cut my part from. Under that is a 3mm sheet of scrap material. The big 18mm sheet below that is the CNC\u0027s spoilboard.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-07-14T12:49:14Z","Content":"\n\u003Cp\u003E\nOn the hardware side, I\u0027ve been struggling all week to cut the parts I need for my enclosure. Have learned an awful lot about CNC milling in the process, and haven\u0027t slept nearly enough. Go figure.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the software side, I\u0027ve been reading up on how C# does serial port access, and attempting to streamline the currently fairly kludgy way the cross-platform KSPSerialIO fork polls for new data. I\u0027ve written a new asynchronous serial receiver for the plugin, that handles the serial receive side of things in a background thread\u00A0instead of polling for new data every frame. It looks like I\u0027ll be able to get that working on OS X and in Linux. But my testing in Windows 10 is currently looking super weird, so my goal of having a single serial method across all platforms is still not quite there.\n\u003C/p\u003E\n\u003Cp\u003E\nHoping to push out a new version of the KSPSerialIO cross-platform plugin by the end of the weekend.\n\u003C/p\u003E\n"}]}