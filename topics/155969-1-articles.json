{"TopicId":155969,"ForumId":29,"TopicTitle":"KSP toolbar bug","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-02-04T04:04:48Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-02-04T04:04:48Z","Content":"\n\u003Cp\u003E\nSample code designed to show a bug in KSP\n\u003C/p\u003E\n\u003Cp\u003E\nGithub source here:\u00A0\u003Ca href=\u0022https://github.com/linuxgurugamer/KSPBugDemo\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/linuxgurugamer/KSPBugDemo\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nlicense: Unlicense\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve opened a report on this on the bugtracker: \u00A0\u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/13745\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/13745\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nBug happens in the following case:\u003Cbr\u003E\u003Cbr\u003E\n1. \u00A0Monobehaviour class instantiated with following code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\u00A0\u00A0 \u00A0 [KSPAddon(KSPAddon.Startup.SpaceCentre, true)] // Determines when plugin starts.\n\u00A0 \u00A0 public class KSPBugDemo : MonoBehaviour\n{\n private void Start()\n\n        {\n            DontDestroyOnLoad(this);\n        }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n2. \u00A0Mod button added, button is NOT supposed to be visible on the main menu:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\u00A0\u00A0 \u00A0const ApplicationLauncher.AppScenes scenes =\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 ApplicationLauncher.AppScenes.FLIGHT |\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 ApplicationLauncher.AppScenes.MAPVIEW |\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 ApplicationLauncher.AppScenes.TRACKSTATION;\n\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 _appLauncherButton = applauncher.AddModApplication(\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 ToggleWindow, // onTrue\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 ToggleWindow, // onFalse\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 () =\u0026gt; { }, // onHover\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 () =\u0026gt; { }, // onHoverOut\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 () =\u0026gt; { }, // onEnable\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 () =\u0026gt; { }, // onDisable\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 scenes, // visibleInScenes\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0GameDatabase.Instance.GetTexture(TexturePath \u002B \u0022spacetux\u0022, false) );\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBug is that the button IS visible on the main menu, at least the first time through.\n\u003C/p\u003E\n\u003Cp\u003E\nA fix is in the function:\u003Cbr\u003E\n\u00A0\u00A0 \u00A0 private void FixedUpdate()\n\u003C/p\u003E\n\u003Cp\u003E\nwhich is disabled in the demo.\n\u003C/p\u003E\n\u003Cp\u003E\nMy best guess is that the button isn\u0027t properly initialized when first created in this case This can be shown by going to any other screen and then returning to the space center, the button\u00A0will be properly hidden at that point\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"}]}