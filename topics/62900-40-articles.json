{"TopicId":62900,"ForumId":36,"TopicTitle":"Kerbal Construction Time/StageRecovery Dev Thread","CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-02-11T19:11:39Z","PageNum":40,"Articles":[{"CreatedByName":"Rodhern","CreatedById":144074,"CreatedDateTime":"2015-07-20T18:55:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EFor some reason it looks like it\u0027s swapping in the KCT save and then the game is saving. That\u0027s definitely not right. If I get a chance I\u0027ll try to take a look at it myself tonight. Thanks for testing that for me. If I weren\u0027t at work I\u0027d test it myself right now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo problem. Just found this; it might or might not be related.\u003C/p\u003E\u003Cp\u003EWhen \u0027newMethod\u0027 is false it seems this line is commented out (and/or maybe missing in the newMethod=false path):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//GamePersistence.LoadGame(\u0022KCT_simulation_backup\u0022, HighLogic.SaveFolder, true, false);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAt one place in gameSceneEvent there is a line left that says this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EKCT_Utilities.LoadSimulationSave(false);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003E Edit:\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAfter some more random searching, this bit of code looks \u0027suspect\u0027:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        public void TechDisableEvent()\u003Cbr\u003E        {\u003Cbr\u003E            if (KCT_PresetManager.Instance != null \u0026amp;\u0026amp; KCT_PresetManager.Instance.ActivePreset != null)\u003Cbr\u003E            {\u003Cbr\u003E                if (KCT_PresetManager.Instance.ActivePreset.generalSettings.TechUnlockTimes \u0026amp;\u0026amp; KCT_PresetManager.Instance.ActivePreset.generalSettings.BuildTimes)\u003Cbr\u003E                {\u003Cbr\u003E                    foreach (KCT_TechItem tech in KCT_GameStates.TechList)\u003Cbr\u003E                    {\u003Cbr\u003E                        tech.DisableTech();\u003Cbr\u003E                    }\u003Cbr\u003E                    //Need to somehow update the R\u0026amp;D instance\u003Cbr\u003E                    GamePersistence.SaveGame(\u0022persistent\u0022, HighLogic.SaveFolder, SaveMode.OVERWRITE);\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-20T20:39:58Z\u0022 title=\u002207/20/2015 08:39  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 20, 2015\u003C/time\u003E by Rodhern\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"batuhantasli","CreatedById":111879,"CreatedDateTime":"2015-07-20T19:04:48Z","Content":"\n\u003Cp\u003EI am using KCT dev version along with RO dev and RP-0 pre6 for testing. However if you conduct an experiment and transmit it during a simulation KCT doesn\u0027t reverse it. So it\u0027s like you\u0027ve done the experiment in normal game.\u003C/p\u003E\u003Cp\u003EEdit: oh and it is amazing with RP-0 preset, thanks magico13 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit 2: I\u0027ve just noticed that simulation actually doesn\u0027t work at all. You can complete contracts as well as science experiments. It still has a timer and costs funds to start simulation, but apart from that it doesn\u0027t work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-20T21:30:00Z\u0022 title=\u002207/20/2015 09:30  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 20, 2015\u003C/time\u003E by batuhantasli\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Rodhern","CreatedById":144074,"CreatedDateTime":"2015-07-20T21:25:11Z","Content":"\n\u003Cp\u003EI think I got some null reference exceptions (from \u003Cem\u003EKerbalConstructionTime.KCT_Events.gameSceneEvent (GameScenes scene)\u003C/em\u003E) when visiting the KSP settings screen after exiting a career.\u003C/p\u003E\n"},{"CreatedByName":"Rodhern","CreatedById":144074,"CreatedDateTime":"2015-07-20T22:03:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022batuhantasli\u0022 data-cite=\u0022batuhantasli\u0022\u003E\u003Cdiv\u003EEdit 2: I\u0027ve just noticed that simulation actually doesn\u0027t work at all. You can complete contracts as well as science experiments. It still has a timer and costs funds to start simulation, but apart from that it doesn\u0027t work.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am reasonably convinced that what is needed is an exception to the SaveGame in TechDisableEvent() for those circumstances where the scene change is a revert after ending a simulation. All in all what happens is that you don\u0027t really revert after ended simulation because the save game is overwritten. Guess that is good news, because that probably means there is only one issue to solve :-)\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-20T22:19:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022batuhantasli\u0022 data-cite=\u0022batuhantasli\u0022\u003E\u003Cdiv\u003EI am using KCT dev version along with RO dev and RP-0 pre6 for testing. However if you conduct an experiment and transmit it during a simulation KCT doesn\u0027t reverse it. So it\u0027s like you\u0027ve done the experiment in normal game.\u003Cp\u003EEdit: oh and it is amazing with RP-0 preset, thanks magico13 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit 2: I\u0027ve just noticed that simulation actually doesn\u0027t work at all. You can complete contracts as well as science experiments. It still has a timer and costs funds to start simulation, but apart from that it doesn\u0027t work.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe current topic of discussion is actually that simulations don\u0027t appear to be working at all. When I get home from work I\u0027ll make it top priority. Thanks for the report and being patient \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs for the RP-0 Preset, that\u0027s all (mostly) NathanKell. Expect some changes to it when he gets a chance to play around with more of the settings.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rodhern\u0022 data-cite=\u0022Rodhern\u0022\u003E\u003Cdiv\u003EI think I got some null reference exceptions (from \u003Cem\u003EKerbalConstructionTime.KCT_Events.gameSceneEvent (GameScenes scene)\u003C/em\u003E) when visiting the KSP settings screen after exiting a career.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll add it to my list, hopefully related to the other issues you\u0027re seeing. Two bugs are less fun than one \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EE: The reason that save command was added was to get around the fact that when you close the RnD screen after purchasing a node, the game thinks that you still have those nodes unlocked, but KCT gives you points for the nodes that are in progress, meaning it double counts until the next save. My shortcut was to just save it manually. Apparently that has the fun side effect of breaking everything!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-20T22:21:39Z\u0022 title=\u002207/20/2015 10:21  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 20, 2015\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Rodhern","CreatedById":144074,"CreatedDateTime":"2015-07-20T22:47:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EI\u0027ll add it to my list, hopefully related to the other issues you\u0027re seeing. Two bugs are less fun than one \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI made a coarse hack on my system, adding this at the top of gameSceneEvent:\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif (scene == GameScenes.SETTINGS)\u003Cbr\u003E                return;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDon\u0027t know if it breaks everything, but it seems to fix the settings issue :-) [at least now you have an idea where the bug is].\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EE: The reason that save command was added was to get around the fact that when you close the RnD screen after purchasing a node, the game thinks that you still have those nodes unlocked, but KCT gives you points for the nodes that are in progress, meaning it double counts until the next save. My shortcut was to just save it manually. Apparently that has the fun side effect of breaking everything!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, cool. I guess that means that you can safely omit the SaveGame instruction when specifically called in the context loading a simulation save. I.e. something like this (or maybe it is just getting too late in Europe for me to think straight):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                //Check for simulation save and load it.\u003Cbr\u003E                if (System.IO.File.Exists(KSPUtil.ApplicationRootPath \u002B \u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/KCT_simulation_backup.sfs\u0022))\u003Cbr\u003E                {\u003Cbr\u003E                    KCT_Utilities.LoadSimulationSave(false);\u003Cbr\u003E                    TechDisableEvent(false);\u003Cbr\u003E                }\u003Cbr\u003E                else\u003Cbr\u003E                {\u003Cbr\u003E                    TechDisableEvent(true);\u003Cbr\u003E                }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-21T02:02:32Z","Content":"\n\u003Cp\u003EOk. Think all the mentioned issues are fixed now. Update your Presets again since I changed how reconditioning is calculated (another RP-0 request). Just need to add \u0022*abs([RE]-\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E)\u0022 to the end of the line to get it to behave how it does currently. All the KCT presets should reflect the change. The change allows rollout and reconditioning to be calculated completely separately from each other, with a bit of careful formula construction at least.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EI\u0027d like to lock things down sooner rather than later, so if there\u0027s any other suggestions make them soon! I\u0027ll probably push a release as soon as I can get the build server up and running, which will hopefully be this weekend (I\u0027m spoiled and like not having to do it manually anymore \u003C/span\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E)\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"Rodhern","CreatedById":144074,"CreatedDateTime":"2015-07-21T12:50:33Z","Content":"\n\u003Cp\u003ELet me list the status of the issues as I see them (latest commit 2b2b7bbd79).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ESimulation costs, simulation around Sun et cetera\u003C/strong\u003E - \u003Cspan style=\u0022color:#008000;\u0022\u003EFIXED (and really nice)\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe simulation cost for unlimited simulation is now (again) very expensive.\u003C/p\u003E\u003Cp\u003EYou can simulate in orbit, even around Sun, which is cool ... well hot actually.\u003C/p\u003E\u003Cp\u003EYou can simulate launch from the launch pad even if the launch pad is occupied. Neat!\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ETech nodes in progress and count of nodes\u003C/strong\u003E - \u003Cspan style=\u0022color:#008000;\u0022\u003EFIXED (unpolished)\u003C/span\u003E\u003C/p\u003E\u003Cp\u003ETech nodes are counted in the old fashioned way. Nodes currently being unlocked counts toward the total number of upgrades. The only (tiny) detail is the already known fact that the KCT upgrade screen won\u0027t show you the points for just unlocked nodes - you need to do a scene change first. It\u0027s just a visual thing though, the points are still there.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EDefault settings of KCT\u003C/strong\u003E - \u003Cspan style=\u0022color:#008000;\u0022\u003EFIXED (unpolished)\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe bug with the settings getting reset has been fixed. There is a caveat though. If you leave one career with the KCT settings window open, the next career you enter will (visually) inherit the values of the window. Just press \u0027cancel\u0027 and your new career save is unchanged though.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EKSP Settings screen\u003C/strong\u003E - \u003Cspan style=\u0022color:#ff0000;\u0022\u003EWork-around possible\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe KSP settings screen (the one you get to from the main menu) can\u0027t be used with KCT. There is a work-around possible for this issue; listed at the bottom of this post.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EReentering career (loading bug)\u003C/strong\u003E - \u003Cspan style=\u0022color:#ff0000;\u0022\u003EWork-around possible\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EIf you use the Blizzy Toolbar Mod you can enter a saved career once, then you need to restart KSP before continuing another KCT enabled career save. There is a work-around possible for this issue; listed at the bottom of this post.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ESimulation save restore\u003C/strong\u003E - \u003Cspan style=\u0022color:#008000;\u0022\u003EFIXED\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThis was the major fix of the day; works perfectly for me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ENew preset (\u003C/strong\u003E\u0022*abs([RE]-\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E)\u0022\u003C/span\u003E\u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E)\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E - \u003C/span\u003E\u003Cspan style=\u0022color:#008000;\u0022\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EDONE\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe presets are updated. I have updated the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/69310-Kerbal-Construction-Time-StageRecovery-Dev-Thread?p=2086346\u0026amp;viewfull=1#post2086346\u0022 rel=\u0022external nofollow\u0022\u003E\u0022Rodhern Low-tech\u0022\u003C/a\u003E preset as well.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003E\u003Cstrong\u003ESettings pointer work-around:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                if (KCT_PresetManager.Instance != null) // Rodhern: Work around for settings menu etc.\u003Cbr\u003E                {\u003Cbr\u003E                    KCT_PresetManager.Instance.ClearPresets();\u003Cbr\u003E                    KCT_PresetManager.Instance = null;\u003Cbr\u003E                }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn this case we need to be careful not to clear presets when it is already done.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ELoading bug work-around:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                if (KCT_GameStates.kctToolbarButton != null)\u003Cbr\u003E                {\u003Cbr\u003E                    if (!KCT_PresetManager.PresetLoaded()) // Rodhern: Work around for preset needed in constructor\u003Cbr\u003E                    {\u003Cbr\u003E                        KCT_PresetManager.Instance = new KCT_PresetManager();\u003Cbr\u003E                        KCT_PresetManager.Instance.SetActiveFromSaveData();\u003Cbr\u003E                    }\u003Cbr\u003E\u003Cbr\u003E                    if (KCT_PresetManager.PresetLoaded() \u0026amp;\u0026amp; !KCT_PresetManager.Instance.ActivePreset.generalSettings.Enabled)\u003Cbr\u003E                        KCT_GameStates.kctToolbarButton.Visibility = new GameScenesVisibility(GameScenes.SPACECENTER);\u003Cbr\u003E                    else\u003Cbr\u003E                        KCT_GameStates.kctToolbarButton.Visibility = new GameScenesVisibility(new GameScenes[] { GameScenes.SPACECENTER, GameScenes.FLIGHT, GameScenes.TRACKSTATION, GameScenes.EDITOR });\u003Cbr\u003E\u003Cbr\u003E                    KCT_GameStates.kctToolbarButton.TexturePath = KCT_Utilities.GetButtonTexture();\u003Cbr\u003E                    KCT_GameStates.kctToolbarButton.ToolTip = \u0022Kerbal Construction Time\u0022;\u003Cbr\u003E                    KCT_GameStates.kctToolbarButton.OnClick \u002B= ((e) =\u0026gt;\u003Cbr\u003E                    {\u003Cbr\u003E                        KCT_GUI.ClickToggle();\u003Cbr\u003E                    });\u003Cbr\u003E                }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn this case we need the preset manager in the constructor, before we can get on to the Start method.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-21T13:57:39Z","Content":"\n\u003Cp\u003EI\u0027ll add in those workarounds tonight, thanks for coming up with them. As for \u0022Tech nodes in progress and count of nodes\u0022 that should be fixed. KCT is now counting in-progress nodes automatically and shouldn\u0027t be double counting anymore (which is why there\u0027s a save game in the TechDisableEvent). If that\u0027s not the case, then let me know, but that should already be fixed.\u003C/p\u003E\u003Cp\u003ELooks like the thing I\u0027ll take a look at most tonight is switching saves within one KSP session. It\u0027s not something I do frequently, so I don\u0027t catch those bugs as often. There used to be some really bad bleed over, especially when creating a new save (since OnLoad isn\u0027t called because there\u0027s no preexisting save file).\u003C/p\u003E\u003Cp\u003EThere are definitely some other places that could use polished up. If you notice them, jot them down, and I can try to fix them up before release. I\u0027m thinking mostly of GUI issues. Things like the build list still having the VAB or SPH button highlighted but that sub-window no longer being open, requiring a double click to open it again. Or window sizes being off. Etc. I have a bad habit of not spending enough time on polish :/\u003C/p\u003E\n"},{"CreatedByName":"Rodhern","CreatedById":144074,"CreatedDateTime":"2015-07-21T14:40:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003E ... KCT is now counting in-progress nodes automatically and shouldn\u0027t be double counting anymore (which is why there\u0027s a save game in the TechDisableEvent). If that\u0027s not the case, then let me know, but that should already be fixed.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe GUI feature that I am referring to shows up like this:\u003C/p\u003E\u003Cp\u003EI resume a career save, I have \u003Cstrong\u003E18\u003C/strong\u003E upgrade points at this point (scene is Space Center).\u003C/p\u003E\u003Cp\u003EI go to the Research building and order a new node.\u003C/p\u003E\u003Cp\u003EI now have \u003Cstrong\u003E19\u003C/strong\u003E upgrade points (scene is Space Center).\u003C/p\u003E\u003Cp\u003EI warp to completion, and let Kerbal Alarm Clock set the speed to x1.\u003C/p\u003E\u003Cp\u003EIt now shows I have \u003Cstrong\u003E\u003Cspan style=\u0022color:#800000;\u0022\u003E18\u003C/span\u003E\u003C/strong\u003E upgrade points (scene is still Space Center).\u003C/p\u003E\u003Cp\u003EI go to Research building (or where ever) and exit the building.\u003C/p\u003E\u003Cp\u003EI correctly have \u003Cstrong\u003E19\u003C/strong\u003E upgrade points (because the scene was reloaded).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EIf you notice them, jot them down, and I can try to fix them up before release.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn that case I have a GUI request. When I first open the Build List it shows up on the right at the top, which is almost optimal. I now slide the window a little to the left to not obscure my message column. This setting is remembered as long as I keep KSP open. When I relaunch KSP (maybe tomorrow) the Build List window position is forgotten. B.t.w. I use the Blizzy Toolbar Mod.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-21T15:05:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rodhern\u0022 data-cite=\u0022Rodhern\u0022\u003E\u003Cdiv\u003EThe GUI feature that I am referring to shows up like this:\u003Cp\u003EI resume a career save, I have \u003Cstrong\u003E18\u003C/strong\u003E upgrade points at this point (scene is Space Center).\u003C/p\u003E\u003Cp\u003EI go to the Research building and order a new node.\u003C/p\u003E\u003Cp\u003EI now have \u003Cstrong\u003E19\u003C/strong\u003E upgrade points (scene is Space Center).\u003C/p\u003E\u003Cp\u003EI warp to completion, and let Kerbal Alarm Clock set the speed to x1.\u003C/p\u003E\u003Cp\u003EIt now shows I have \u003Cstrong\u003E\u003Cspan style=\u0022color:#800000;\u0022\u003E18\u003C/span\u003E\u003C/strong\u003E upgrade points (scene is still Space Center).\u003C/p\u003E\u003Cp\u003EI go to Research building (or where ever) and exit the building.\u003C/p\u003E\u003Cp\u003EI correctly have \u003Cstrong\u003E19\u003C/strong\u003E upgrade points (because the scene was reloaded).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, I think I know why. The tech tree itself hasn\u0027t updated after the nodes are enabled. I might just try to find a different way of getting which nodes are enabled, since referencing the snapshot is easy but apparently not updating frequently enough. More playing around in the Object Browser I guess :/\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rodhern\u0022 data-cite=\u0022Rodhern\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIn that case I have a GUI request. When I first open the Build List it shows up on the right at the top, which is almost optimal. I now slide the window a little to the left to not obscure my message column. This setting is remembered as long as I keep KSP open. When I relaunch KSP (maybe tomorrow) the Build List window position is forgotten. B.t.w. I use the Blizzy Toolbar Mod.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt used to save the position, but when I switched to using the Stock toolbar as the primary I forced it into the top right with the other windows (and it has exclusivity applied). Then an update or two later I made it so you could move it if, and only if, you were using Blizzy\u0027s toolbar. I can probably re-enable the position saving and just add a check for if the user has stopped using Blizzy\u0027s toolbar (otherwise the window will get stuck at wherever you put it when you still had the toolbar mod).\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-22T05:15:59Z","Content":"\n\u003Cp\u003EI think I fixed those issues. Also added the ability to have each tech node go at a different rate (so you can do FIFO or all at once). It should be that if the rates are all the same, no buttons appear. If the rates are different, buttons appear to let you reorder things.\u003C/p\u003E\u003Cp\u003EI\u0027m tired, so I didn\u0027t test everything. I didn\u0027t get around to playing with loading different saves and fixing whatever bleed over was happening, sorry \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: (7/25/2015, 12:04AM) I don\u0027t want to post three times in a row. That seems like a bad thing to do.\u003C/p\u003E\u003Cp\u003EAdded Kerbal Konstructs support. You set the launch site at build time (will probably eventually add the ability to set it at launch, but this is easier) and each launchpad has its own rollout and reconditioning queue. One caveat, resuming a save will require you to enter the editor and select any launch sites you might decide to use (just for a moment, you can just click all of them). I might be able to fix that, but I think it\u0027s semi-KK induced.\u003C/p\u003E\u003Cp\u003EThis does open up the possibility of having multiple launchpads in the Stock game now that KCT supports any number of individual launchpadIDs. May or may not make it to release. Will probably save it for next version.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-25T05:08:25Z\u0022 title=\u002207/25/2015 05:08  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 25, 2015\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-25T05:33:05Z","Content":"\n\u003Cp\u003ENew version just posted 22 minutes ago died completely on loading. Window wouldn\u0027t open and errors like crazy in the debug screen.\u003C/p\u003E\u003Cp\u003EScreen capture: \u003Ca href=\u0022https://www.dropbox.com/s/b49i3mxu7a778ox/screenshot0.png?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/b49i3mxu7a778ox/screenshot0.png?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ELog: \u003Ca href=\u0022https://www.dropbox.com/s/yohninody1i3fch/output_log.txt?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/yohninody1i3fch/output_log.txt?dl=0\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-25T15:46:52Z","Content":"\n\u003Cp\u003EWell, that wasn\u0027t in a function I expected to see a failure in. Might be because of how I\u0027m defining the type of vessel now. I\u0027m guessing you loaded an existing save? New saves likely won\u0027t have any issues since the vessels will have the additional data stored in them that I needed to add.\u003C/p\u003E\u003Cp\u003EI\u0027ll get a fix out in a minute. Gotta think of a good way to do it.\u003C/p\u003E\u003Cp\u003EEdit: Try it now. Hopefully that fix is good enough...\u003C/p\u003E\u003Cp\u003EEdit2: You can now change the launch site for any vessel at any time, instead of only at build time. I think that makes Kerbal Konstructs support pretty much done \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-25T23:26:44Z\u0022 title=\u002207/25/2015 11:26  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 25, 2015\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-26T05:42:10Z","Content":"\n\u003Cp\u003ESame problem in existing saves with newest version uploaded 4 hours prior to this message. No build numbers right now so time reference seems to be the best we can do \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-26T06:06:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022JeffreyCor\u0022 data-cite=\u0022JeffreyCor\u0022\u003E\u003Cdiv\u003ESame problem in existing saves with newest version uploaded 4 hours prior to this message. No build numbers right now so time reference seems to be the best we can do \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere\u0027s a chance that wasn\u0027t the most recent, but I think it probably messed up the ships anyway when you tried to load them previously. You\u0027ll have to open up the save file, find the ships in the KCT Data and change EditorFacility to 1 for all VAB vessels and change it to... something else... for SPH vessels (I don\u0027t know off the top of my head. I\u0027d guess either 0 or 2, you can start a new save, build something in the SPH, and then build it through KCT and check the save game to verify. I\u0027ll do that at some point).\u003C/p\u003E\u003Cp\u003EI think I\u0027ve got a save backed up where I can check if I fixed it, but I develop in Windows (and test in Windows) but play in Linux with a fairly heavily modded game, so I can\u0027t easily test that save and I can\u0027t reproduce it in Windows (since it requires pre-existing ships).\u003C/p\u003E\u003Cp\u003EE: The server won\u0027t be up for longer than I had planned. Don\u0027t have the equipment to install the hard drives into the computer I was planning on using for the server, so I\u0027m going to be using the computer I was using before. But that computer only has 3 SATA ports and I want to have the OS on a different HDD from the RAID array, meaning I need 4 drives. So I bought a 4 SATA port PCI-e expansion card thingy, but had to buy it online, meaning it won\u0027t get here until maybe Tuesday :/\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-26T06:09:05Z\u0022 title=\u002207/26/2015 06:09  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 26, 2015\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-26T06:26:25Z","Content":"\n\u003Cp\u003EI was able to load up with a previous DLL and all came up good, so not sure if they are ok or the corruption is being ignored by the earlier version. I\u0027ll also try emptying out all the ships in the lists and update to see if having nothing in them still generates the problem. \u003C/p\u003E\u003Cp\u003EBuilding computers I know all too well the frustration of waiting for parts to come in.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-26T14:11:29Z","Content":"\n\u003Cp\u003EThe \u0022corruption\u0022 is just that I have to store an extra number to reliably know which type of vessel (VAB of SPH) it is, but existing vessels don\u0027t have that number. So then it incorrectly gives it the wrong number (VAB craft were getting the SPH number) and when KCT goes to find it in the list, it can\u0027t, because it\u0027s looking in the wrong list, which makes it freak out. I think I\u0027ve got it set up now that if that number doesn\u0027t exist it will find the correct one, but if the wrong one is already set then it\u0027ll keep loading the wrong one.\u003C/p\u003E\u003Cp\u003EBack up that save and see if you can load it with the new .dll. I haven\u0027t uploaded a new version yet because I think that should be working. Can you also check if tech nodes are being counted properly for upgrades? In my save they weren\u0027t being counted at all, but when I tried testing with a new save they were fine.\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-26T17:11:29Z","Content":"\n\u003Cp\u003EThat does seem to do it and if there are no ships in the lists is also loads up fine without freaking out. New DLL up and running. Haven\u0027t done much with it yet as I wanted to report back that loading was working since without that not much more can be done \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI seem to have gotten bonus tech node points somehow in the new DLL though. I\u0027ll see how it changes with new unlocks \u003C/p\u003E\u003Cp\u003EGot some more nodes unlocked and it added points to both the total and available \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-26T18:32:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022JeffreyCor\u0022 data-cite=\u0022JeffreyCor\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI seem to have gotten bonus tech node points somehow in the new DLL though. I\u0027ll see how it changes with new unlocks \u003C/p\u003E\u003Cp\u003EGot some more nodes unlocked and it added points to both the total and available \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe total and the available should obviously increase (since available is just total-spent). I\u0027m not totally sure why it doesn\u0027t seem to be counting the tech nodes properly. I\u0027ll play around with it some more. Let me know if you notice any other weird behavior (especially with the number of upgrades).\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-26T20:36:38Z","Content":"\n\u003Cp\u003EIt is looking like it is giving the right number for new tech nodes, but too many for ones that were already unlocked on existing saves. So far anyway, as nutty as this thing can be it might change its mine \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: One weird thing, on starting a new save it starts with 37 points. I\u0027m thinking that might be a little high \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT 2: It seems other errors creep in during play. In the existing save was unable to enter the VAB due to an error, and in a new save was unable to recover craft. Went back to the release DLL to see if it might have been something else going nuts and everything started working fine with the old DLL so looking like something in the test version of KCT. What that something might be though I have no idea.\u003C/p\u003E\u003Cp\u003ELOG: \u003Ca href=\u0022https://www.dropbox.com/s/kqdilzsqxqpiorw/output_log.txt?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/kqdilzsqxqpiorw/output_log.txt?dl=0\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-26T21:37:35Z\u0022 title=\u002207/26/2015 09:37  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 26, 2015\u003C/time\u003E by JeffreyCor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-26T23:11:57Z","Content":"\n\u003Cp\u003ESame error both times. Both caused by it trying to save the game I think. Give me a sec. (both when trying to disable the tech nodes.)\u003C/p\u003E\u003Cp\u003EMight be caused by the stuff I tried to add to make it so Experimental Parts are still available to use.\u003C/p\u003E\u003Cp\u003EE: Removed the experimental parts stuff and switched to use only one method of counting tech nodes. See if that works any better \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-26T23:16:28Z\u0022 title=\u002207/26/2015 11:16  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 26, 2015\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-27T07:06:13Z","Content":"\n\u003Cp\u003EThis is indeed working better \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENew rollout time seems a little long at 10 days to roll out. Were the old times too fast and just got used to it?\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-07-27T11:37:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022JeffreyCor\u0022 data-cite=\u0022JeffreyCor\u0022\u003E\u003Cdiv\u003EThis is indeed working better \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003ENew rollout time seems a little long at 10 days to roll out. Were the old times too fast and just got used to it?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou need to update your Presets. You can now define rollout and reconditioning separately, but since your Preset isn\u0027t updated it\u0027s requiring twice the total time.\u003C/p\u003E\u003Cp\u003EEither get it from GitHub or just add \u0022*abs([RE]-\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E)\u0022 to the end of the reconditioning formula.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2015-07-27T16:22:31Z","Content":"\n\u003Cp\u003EAh ha, a plot to keep me on my toes noticing things \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"}]}