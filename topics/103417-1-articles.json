{"TopicId":103417,"ForumId":32,"TopicTitle":"Disapering Minmus SOI then you have an Mun SOI on return trajectory.","CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-04-04T23:04:47Z","PageNum":1,"Articles":[{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-04-04T23:04:47Z","Content":"Sometimes then you go to Minmus the mid course correction burn might give you an Mun SOI intercept on the way back, normally this should not matter however for unknown reason the Minmus SOI indication disappears, it looks like you will never enter Minmus SOI.\n\nIt looks good with the dotted maneuver planning trajectories but not the normal ones. \n\nThis is not only visual, neither mechjeb nor the alarm clock see it, if you add an new node doing with an small change the does not bring back the SOI change.\n\nHowever mechjeb is able to calculate closest approach to Minmus. If your correction burn was designed give you closest distance 20 km changing it to 25 km will cost the expected dV. \n\nYou will also enter in this trajectory, any error is likely to be high time warp on transit.\n\nIs this an known bug? it has hit me multiple times during many versions. \n\nIt does not only affect Minmus, you can also get it from Val and Tylo then going from Pol or Bop to Layte, here it will only show up as an map viewpoint change, speed change and the g peak then changing SOI. the gravity turn will however change your trajectory and if you set the alarm clock on Laythe SOI change it might be to late to change your trajectory for an aerobrake and you have to try again."},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-04-04T23:23:40Z","Content":"This is a known bug for the community. The devs have never acknowledged it to my knowledge but I\u0027d be a bit surprised if they weren\u0027t aware of it. I\u0027m hoping that it\u0027s fixed in 1.0 because it\u0027s \\*annoying\\*. I cannot get a close approach to Minmus from LKO without experiencing this bug."},{"CreatedByName":"Bev7787","CreatedById":136501,"CreatedDateTime":"2015-04-04T23:44:35Z","Content":"Happens to me too. But it could be that KSP is programmed to only show one SOI change. If you have a mun SOI change, the Minmus one will disappear. It should be back to normal when you enter Mun SOI"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-04-05T01:50:18Z","Content":"\u003E \n\u003E This is a known bug for the community. The devs have never acknowledged it to my knowledge but I\u0027d be a bit surprised if they weren\u0027t aware of it. I\u0027m hoping that it\u0027s fixed in 1.0 because it\u0027s \\*annoying\\*. I cannot get a close approach to Minmus from LKO without experiencing this bug.\n\nYes, if they can only handle one SOI change show the first. \n\nThe predictions after nodes can handle multiple however they don\u0027t have any error while the real values tend to drift a bit."},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2015-04-05T02:14:56Z","Content":"\u003E \n\u003E This is a known bug for the community. The devs have never acknowledged it to my knowledge but I\u0027d be a bit surprised if they weren\u0027t aware of it. I\u0027m hoping that it\u0027s fixed in 1.0 because it\u0027s \\*annoying\\*. I cannot get a close approach to Minmus from LKO without experiencing this bug.\n\nI could be misinterpreting what is being discussed in the thread, but I believe this was directly addressed by HaresteR in this devnotes :\n\n[http://forum.kerbalspaceprogram.com/threads/113920-Devnote-Tuesday-Smooth-Transitions](https://forum.kerbalspaceprogram.com/threads/113920-Devnote-Tuesday-Smooth-Transitions)\n\n\u003E \n\u003E I have been able to do one thing which I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been really wanting to do for ages now: You may have noticed when vessels cross spheres of influence at high time warp, that the resulting orbit after the transition can be quite different from what was originally estimated. This is caused not by an imprecision with the estimation itself, nor is this a floating-point inaccuracy issue for once; the problem is with the way the actual orbit component in the vessel behaves when switching reference frames. That bit of code was written much longer ago than the patched conics system, and it was less accurate than the maths used to estimate your upcoming trajectories.\n\nIf you read on through HarvesteR\u0027s comments, it sounds like he has addressed and fixed this bug for 1.0. Exciting times."},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-04-05T05:06:10Z","Content":"\u003E \n\u003E If you read on through HarvesteR\u0027s comments, it sounds like he has addressed and fixed this bug for 1.0. Exciting times.\n\nThey may be related but I don\u0027t think so. This bug is specifically while you\u0027re in LKO, you make a maneuver node, and that maneuver node crosses into Minmus\u0027 SOI. It shows a periapsis. You drag a marker on the node and see your periapsis getting closer to Minmus, and then... it vanishes. Suddenly the game thinks you\u0027re not going to encounter Minmus at all.\n\nIf you stop fiddling at this point and just time warp out to near Minmus, you WILL enter its SOI. So it\u0027s not a bug with entering the SOI, it\u0027s a bug with predicting whether or not you\u0027ll enter the SOI. And it seems to be related to how close to the target your periapsis will be. i.e., if it\u0027s far away the prediction is always good. If it\u0027s close, the prediction frequently fails. I\u0027ve even seen the game flash in and out of predicted SOI entry several times a second.\n\nIt\u0027s annoying at best and mission-endangering at worst."},{"CreatedByName":"bakanando","CreatedById":126310,"CreatedDateTime":"2015-04-05T05:27:12Z","Content":"\u003E \n\u003E I\u0027ve even seen the game flash in and out of predicted SOI entry several times a second.\n\nI have had this many times, I always feel like the SOI change will not be registered and you will just fly past your target."},{"CreatedByName":"SkyRender","CreatedById":10651,"CreatedDateTime":"2015-04-05T06:47:24Z","Content":"The bug that causes patched conics to sometimes fail to recognize an encounter despite it being assured is definitely known about by the developers; it gets mentioned often. As for the whole \u0022can\u0027t see SoI changes past 3 of \u0027em\u0022 problem, you can adjust that in the game\u0027s settings.cfg file. Change the number for CONIC\\_PATCH\\_LIMIT to something bigger (6 should be enough for anything outside of a particularly insane multi-Joolian-moon encounter)."},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2015-04-05T08:22:20Z","Content":"\u003E \n\u003E It\u0027s annoying at best and mission-endangering at worst.\n\nI once was flying to Laythe and almost ran into wall Vall. It never showed that encounter.\n\nThis one probably works this way: the game checks for encounters with every moon around the planet, but stops at the first found encounter, not checking if the trajectory intersects other moons\u0027 SOI before that.\n\nAnother annoying thing is that it fails to check encounters if the moon will make several orbits while you fly there (even is for your craft it\u0027s still one orbit). Just raise your apoapsis past Minmus and try to adjust it so that you\u0027ll meet the Mun on the way back. (the predicament may show no encounter, but if you add an empty maneuver node further away - it\u0027s there). In some cases it may even negate the first bug"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-04-05T13:51:23Z","Content":"\u003E \n\u003E I have had this many times, I always feel like the SOI change will not be registered and you will just fly past your target.\n\nSOI change happens, its just that it don\u0027t show up. \n\nThe real problem is that the first SOI who is hidden, if the game refused to show later SOI changes it would be understandable as error margins then doing an close pass would have the resulting trajectory jump around a lot.\n\nHopefully it get fixed in 1.0 with the SOI change functionality even if its not directly related"},{"CreatedByName":"bigyihsuan","CreatedById":29291,"CreatedDateTime":"2015-04-05T13:59:20Z","Content":"\u003E \n\u003E The bug that causes patched conics to sometimes fail to recognize an encounter despite it being assured is definitely known about by the developers; it gets mentioned often. As for the whole \u0022can\u0027t see SoI changes past 3 of \u0027em\u0022 problem, you can adjust that in the game\u0027s settings.cfg file. Change the number for CONIC\\_PATCH\\_LIMIT to something bigger (6 should be enough for anything outside of a particularly insane multi-Joolian-moon encounter).\n\nI think this was the thing being discussed. I have my conic patch limit set to 5 or so."},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-04-05T16:49:43Z","Content":"\u003E \n\u003E This one probably works this way: the game checks for encounters with every moon around the planet, but stops at the first found encounter, not checking if the trajectory intersects other moons\u0027 SOI before that.\n\nI\u0027ve had the flickering/vanishing SOI change prediction bug on interplanetary travels with no later encounter involved, so I don\u0027t think this hypothesis is right. It\u0027s a super annoying bug that\u0027s for sure."},{"CreatedByName":"SkyRender","CreatedById":10651,"CreatedDateTime":"2015-04-05T17:34:16Z","Content":"HarvesteR once commented on it some time ago. I don\u0027t remember the specifics, but I believed he said it was a combination of the limitation of the patched conics formula he\u0027d chosen combined with an error or two in his code."},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2015-04-07T05:22:33Z","Content":"\u003E \n\u003E They may be related but I don\u0027t think so. This bug is specifically while you\u0027re in LKO, you make a maneuver node, and that maneuver node crosses into Minmus\u0027 SOI. It shows a periapsis. You drag a marker on the node and see your periapsis getting closer to Minmus, and then... it vanishes. Suddenly the game thinks you\u0027re not going to encounter Minmus at all.\n\u003E If you stop fiddling at this point and just time warp out to near Minmus, you WILL enter its SOI. So it\u0027s not a bug with entering the SOI, it\u0027s a bug with predicting whether or not you\u0027ll enter the SOI. And it seems to be related to how close to the target your periapsis will be. i.e., if it\u0027s far away the prediction is always good. If it\u0027s close, the prediction frequently fails. I\u0027ve even seen the game flash in and out of predicted SOI entry several times a second.\n\u003E \n\u003E It\u0027s annoying at best and mission-endangering at worst.\n\n I think I am beginning to understand what is being talked about now. Does this only occur with Minmus? Because I think I\u0027ve seen it many time with the Mun also. I like trying to get everything set up for a close approach to take advantage of Oberth effects at both Kerbin and the Mun, or Minmus, and I have often seen the encounter disappear. I have always assumed it had something to do with the timing of the encounter screwing up because of the way the maneuver node set up takes place. I have often found that after the encounter disappears, I can add a radial component to the node and regain the encounter, not saying that it should have disappeared in the first place, just that the calculation of the timing of events was going out of bounds in whatever formula was being applied at the beginning of the node manipulation. WHEW. Anyway, I hope that HarvesteR has been able to fix most of these problems. I\u0027m really looking forward to the next release."},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-04-07T05:56:47Z","Content":"\u003E \n\u003E I think I am beginning to understand what is being talked about now. Does this only occur with Minmus? Because I think I\u0027ve seen it many time with the Mun also. I like trying to get everything set up for a close approach to take advantage of Oberth effects at both Kerbin and the Mun, or Minmus, and I have often seen the encounter disappear. I have always assumed it had something to do with the timing of the encounter screwing up because of the way the maneuver node set up takes place. I have often found that after the encounter disappears, I can add a radial component to the node and regain the encounter, not saying that it should have disappeared in the first place, just that the calculation of the timing of events was going out of bounds in whatever formula was being applied at the beginning of the node manipulation. WHEW. Anyway, I hope that HarvesteR has been able to fix most of these problems. I\u0027m really looking forward to the next release.\n\nIt happens MORE with Minmus, but it\u0027s not limited to Minmus. Or Mun, though I have seen it there. I think it\u0027s related to SOI size, but have no basis for that except gut feeling. It also happens with Duna. I don\u0027t know if I\u0027ve ever seen it with Eve or Kerbin. That implies a bit that it may be related to size of the world\u0027s SOI, perhaps compared to the parent\u0027s SOI."},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-04-07T06:40:26Z","Content":"\u003E \n\u003E I think I am beginning to understand what is being talked about now. Does this only occur with Minmus? Because I think I\u0027ve seen it many time with the Mun also. I like trying to get everything set up for a close approach to take advantage of Oberth effects at both Kerbin and the Mun, or Minmus, and I have often seen the encounter disappear. I have always assumed it had something to do with the timing of the encounter screwing up because of the way the maneuver node set up takes place. I have often found that after the encounter disappears, I can add a radial component to the node and regain the encounter, not saying that it should have disappeared in the first place, just that the calculation of the timing of events was going out of bounds in whatever formula was being applied at the beginning of the node manipulation. WHEW. Anyway, I hope that HarvesteR has been able to fix most of these problems. I\u0027m really looking forward to the next release.\n\nNo it does not only happens with minmus, have got it with Tylo too, you need to get two SOI changed lined up for this to happens.\n\nQuestion if you do an Mun gravity turn on way to Minmus and mun SOI disappear will not also the trajectory change by mun gravity also disapear making it looks like you miss Minmus?\n\nI might have gotten some mun invisible Mun intercepts going to minmus however as you rarely get in direct minmus intercept but has to do an correction burn midway."},{"CreatedByName":"monophonic","CreatedById":76902,"CreatedDateTime":"2015-04-07T07:22:56Z","Content":"I too have witnessed this bug. I even saw a variant where the Minmus encounter node \u0022disappeared\u0022 while the escape node did not. In fact the game showed the encounter and escape at the same point on my trajectory. It was flickering wildly between the two. Time warping stopped the flickering, but whichever trajectory was then visible was essentially random.\n\nThis tells me the algorithm used to detect the SOI transition is unstable. That means it is not guaranteed to find the first SOI transition and small changes in the starting position can cause big differences in which transition it finds. Tweaking things can make the problem more or less apparent, but to fix it completely the algorithm needs to be changed. Not knowing anything detailed about the workings of KSP I cannot say anything less obvious and generalized about it though.\n\nStill, we know HarvesteR has fixed a related issue so chances are good this has seen some improvement as well."},{"CreatedByName":"Varsi","CreatedById":120571,"CreatedDateTime":"2015-04-07T08:10:57Z","Content":"I\u0027ve had this as well. Was right in front of Minmus and it didn\u0027t show the encounter. SOI change did happen just as it should when I was close enough (Minmus caught up on me)."},{"CreatedByName":"Rune","CreatedById":52690,"CreatedDateTime":"2015-04-07T09:15:02Z","Content":"\u003E \n\u003E They may be related but I don\u0027t think so. This bug is specifically while you\u0027re in LKO, you make a maneuver node, and that maneuver node crosses into Minmus\u0027 SOI. It shows a periapsis. You drag a marker on the node and see your periapsis getting closer to Minmus, and then... it vanishes. Suddenly the game thinks you\u0027re not going to encounter Minmus at all.\n\u003E If you stop fiddling at this point and just time warp out to near Minmus, you WILL enter its SOI. So it\u0027s not a bug with entering the SOI, it\u0027s a bug with predicting whether or not you\u0027ll enter the SOI. And it seems to be related to how close to the target your periapsis will be. i.e., if it\u0027s far away the prediction is always good. If it\u0027s close, the prediction frequently fails. I\u0027ve even seen the game flash in and out of predicted SOI entry several times a second.\n\u003E \n\u003E It\u0027s annoying at best and mission-endangering at worst.\n\nYup, it\u0027s even worse if you try to nail long interplanetary transfers, like one to Jool for example. I have to intentionally miss the planet by a long shot so I can get a prediction, which is quite bothersome. Methinks it must be some floating point error (similar to the NaN on inclinations, only that one doesn\u0027t matter half as much).\n\nThough you could also be referring to the weird change of predicted orbits when you are getting close to a SoI change. For a few minutes before the actual change, your predicted trajectory will change in weird ways within the first SoI and show really wonky predictions for the next one, then everything fixes itself once you make the actual crossing and you go back to the trajectory you originally thought you had. Makes me mad every time I try to catch asteroids just outside Kerbin\u0027s SOI, but I\u0027ve learned to live with it.\n\nRune. Bottom line: if the UI says something crazy, don\u0027t freak out: throw in a (named) quicksave, timewarp forwards, and see how things actually work out."},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-04-15T09:24:49Z","Content":"It\u0027s not conics limit - I\u0027ve been flying to Minmus a lot recently \u0026 use Mun to save a hundred dv or so on the way - quite often when I leave Mun\u0027s SoI not only do I not have an intercept shown, I can\u0027t put a node down until past the current orbit\u0027s periapsis, especially if I have a second Mun intercept the next time round. That\u0027s a real problem if I\u0027m not sure I still have a Minmus intercept...\n\nCan put a node down at current peri \u0026 move it back round the orbit which sometimes works, sometimes I have to just go on faith I\u0027m still going to hit Minmus SoI. Given it\u0027s all going on that close to Kerbin I don\u0027t think it\u0027s a floating point issue, it\u0027s just a UI bug."}]}