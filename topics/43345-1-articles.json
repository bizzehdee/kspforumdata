{"TopicId":43345,"ForumId":15,"TopicTitle":"Spotlights and Cookies in Unity","CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-08-21T09:22:30Z","PageNum":1,"Articles":[{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-08-21T09:22:30Z","Content":"\n\u003Cp\u003EI\u0027m currently developing a series of docking ports with toggleable built-in lights.\u003C/p\u003E\u003Cp\u003ESo far, I\u0027ve set up the emissives that would make the lights appear to glow, but I\u0027m also interested in setting up actual light entities to illuminate nearby parts.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E1)\u003C/strong\u003E What sort of settings do folks like Lack of LLL and bac9 of B9 Aerospace use in Unity? I presume it\u0027s the Spot light option, but I\u0027m interested in knowing what ranges/spot angles/intensities they use.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E2)\u003C/strong\u003E Also, since my illuminators are depicted as 3 x 5 banks of red/white Jumbo LEDs as per my attached image (currently lacking a normal map), I\u0027ve been thinking about using \u003Ca href=\u0022http://docs.unity3d.com/Documentation/Manual/HOWTO-LightCookie.html\u0022 rel=\u0022external nofollow\u0022\u003ESpot Light Cookies\u003C/a\u003E to give the effect of the individual LEDs. Anyone have any experience working with these?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://fc04.deviantart.net/fs71/f/2013/233/9/b/ksp_fustek_iacbm_1_25m_wip_21_aug_2013_by_sumghai-d6j2nk2.png\u0022 alt=\u0022ksp_fustek_iacbm_1_25m_wip_21_aug_2013_by_sumghai-d6j2nk2.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-24T03:39:39Z\u0022 title=\u002208/24/2013 03:39  AM\u0022 data-short=\u002210 yr\u0022\u003EAugust 24, 2013\u003C/time\u003E by sumghai\u003C/strong\u003E\n\u003Cbr\u003ESolved\n\u003C/span\u003E\n"},{"CreatedByName":"BigNose","CreatedById":35713,"CreatedDateTime":"2013-08-23T09:38:30Z","Content":"\n\u003Cp\u003ELooking good so far sumghai!\u003C/p\u003E\u003Cp\u003ERegarding your question towards settings and intensities, etc. I would suggest you to simply download some lighting related mods (like the ones you listed), and take a look in the source files which should be freely available in any of them. From them, you can propably get almost everything you need, just adapt the code and use it for your needs (at least I can give you the permission regarding my source files).\u003C/p\u003E\u003Cp\u003EGreetings,\u003C/p\u003E\u003Cp\u003EBigNose\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-08-24T03:38:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BigNose\u0022 data-cite=\u0022BigNose\u0022\u003E\u003Cdiv\u003ERegarding your question towards settings and intensities, etc. I would suggest you to simply download some lighting related mods (like the ones you listed), and take a look in the source files which should be freely available in any of them. From them, you can propably get almost everything you need, just adapt the code and use it for your needs (at least I can give you the permission regarding my source files).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUnfortunately, the range and intensity values are hard-coded into the MU model files exported out of Unity - the CFGs only specify animation names. Also, the source code you\u0027ve provided is for a custom plugin-based solution rather than standard stock light behaviour. With a few exceptions, I\u0027d rather my project not be too dependent on third-party plugins.\u003C/p\u003E\u003Cp\u003EThat being said, I\u0027ve picked up some choice tips from Artyom (Bac9), which mostly answers my question. I\u0027ll be making a separate post with this info right after this, so that hoojiwana can directly link to it without the superfluous text.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-08-24T04:18:28Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E1) Light objects are NOT the same thing as emissive textures\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe former will actually cast real light and shadows onto faces/parts within its range, whilst the latter simply makes part of the texture glow without illuminating anything else nearby.\u003C/p\u003E\u003Cp\u003ETherefore, an authentic-looking illumination lamp requires a combination of both.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E2) Avoid making lights \u003C/strong\u003E\u003Cem\u003E\u003Cstrong\u003Etoo \u003C/strong\u003E\u003C/em\u003E\u003Cstrong\u003Ebright\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EShaders in KSP are twice as bright as stock Unity shaders, so its is strongly recommended that directional light intensity should not exceed 0.5 (otherwise, nearby illuminated parts would get washed out in glowing white fills).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E3) Light decay with distance is non-linear\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EReal light sources (mostly) follow the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Inverse-square_law#Light_and_other_electromagnetic_radiation\u0022 rel=\u0022external nofollow\u0022\u003EInverse-Square Law\u003C/a\u003E, which states that the intensity of the light is inversely proportional to the square of the distance from the light source. In layman\u0027s terms, this means that if you double your distance from the light, the intensity at that position is 1/4 of that at the light source itself; if you triple your distance, the intensity drops further to 1/9, and so forth.\u003C/p\u003E\u003Cp\u003EUnity does a fairly reasonable job of emulating this behaviour, so when developing illuminators to cover a distance such as headlights, it is wise to select an intensity value that is still visible at the furthest of your design range, but not so bright as to white-out anything closer. Bac9 suggests using standard Unity cubes and spheres positioned at regular intervals to help calibrate light intensity/range settings.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E4) Sample recommended settings in Unity\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EPoint (Omnidirectional) Lights \u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe light rays are cast out in all directions from a single point, much like a sphere.\u003C/p\u003E\u003Cp\u003EIntensities of up to 5.0 work well for short (1~2 m) range omni lights, such as navigation lights\u003C/p\u003E\u003Cp\u003E0.5~1.0 are preferred for longer (5~15 m) range omni lights.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003ESpot Lights\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe light rays are cast out within a fixed angle cone\u003C/p\u003E\u003Cp\u003ECone angles of 20~30 degrees are suited to focused long-range beams, while close-range illuminators work best with 45 degree cones\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E5) KSP ModuleLight configuration\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E    {\u003Cbr\u003E        name = ModuleLight\u003Cbr\u003E        lightName = someLight     // name of actual light object in Unity (multiple ones can be separated by commas e.g. someLight1, someLight2)\u003Cbr\u003E        useAnimationDim = true    // not sure what this is\u003Cbr\u003E        lightBrightenSpeed = 1     // Higher values means faster speed\u003Cbr\u003E        lightDimSpeed = 1           // Ditto\u003Cbr\u003E        resourceAmount = 0.01    // How much ElectricCharge to consume per second\u003Cbr\u003E        animationName = someAnimation /// name of animation in Unity that controls lights (may include emissives)\u003Cbr\u003E        useResources = true     // specify if light should consume ElectricCharge\u003Cbr\u003E    }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E6) Making lights toggleable (and not glowing all the time or even at the start/VAB/SPH)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThere may be other, more efficient ways of doing this, but for me:\u003C/p\u003E\u003Cp\u003E - The light objects themselves in Unity have their ranges and intensities defined to desired values\u003C/p\u003E\u003Cp\u003E - The initial color, however, is black (no light)\u003C/p\u003E\u003Cp\u003E - In the Animation timeline, I add Keyframes to actually change the RGB values of these light objects\u003C/p\u003E\u003Cp\u003E - I then reference this animation as per \u003Cstrong\u003E5)\u003C/strong\u003E above\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E7)\u003C/strong\u003E \u003Cstrong\u003EKSP (currently) does not support light cookies\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ELight cookies are essentially texture masks for light sources - this would allow for grille effects on lights, or using a single light transform to emulate multiple sets of lights pointing in the same direction.\u003C/p\u003E\u003Cp\u003EUnfortunately, as of KSP 0.23.5, the corresponding KSP PartTools 0.23 does not export light cookie textures required for this effect to work.\u003C/p\u003E\u003Cp\u003ESpecial thanks to Artyom (Bac9) for many of these pointers.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-02T00:07:02Z\u0022 title=\u002207/02/2014 12:07  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 2, 2014\u003C/time\u003E by sumghai\u003C/strong\u003E\n\u003Cbr\u003EAdded info about KSP not supporting light cookies\n\u003C/span\u003E\n"},{"CreatedByName":"Ohfive30","CreatedById":74380,"CreatedDateTime":"2013-09-06T21:22:54Z","Content":"\n\u003Cp\u003EAwesome, thanks for these lighting tips sumghai, I was a little bit stuck on where to start with the lights I need to put in, this will help greatly.\u003C/p\u003E\n"},{"CreatedByName":"Comwarrior","CreatedById":101751,"CreatedDateTime":"2014-02-07T14:38:46Z","Content":"\n\u003Cp\u003EHow do you make colored lights?\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2014-06-30T00:44:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Comwarrior\u0022 data-cite=\u0022Comwarrior\u0022\u003E\u003Cdiv\u003EHow do you make colored lights?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry for the late response - to make colored lights, you need to manually specify the RGB color values for each spotlight object.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-06-30T00:55:26Z","Content":"\n\u003Cp\u003Eany final word on using light cookies? I tried with spotlights and it doesnt\u0027 seem like cookie maps settings stick once in KSP.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2014-07-02T00:03:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eany final word on using light cookies? I tried with spotlights and it doesnt\u0027 seem like cookie maps settings stick once in KSP.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELight cookies definitely \u003Cem\u003E\u003Cstrong\u003Edon\u0027t\u003C/strong\u003E\u003C/em\u003E work in KSP 0.23.5 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EKSP PartTools 0.23 does not export the cookie textures required for the desired effect.\u003C/p\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-09-08T13:38:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E6) Making lights toggleable (and not glowing all the time or even at the start/VAB/SPH)\u003C/strong\u003E\u003Cp\u003EThere may be other, more efficient ways of doing this, but for me:\u003C/p\u003E\u003Cp\u003E - The light objects themselves in Unity have their ranges and intensities defined to desired values\u003C/p\u003E\u003Cp\u003E - The initial color, however, is black (no light)\u003C/p\u003E\u003Cp\u003E - In the Animation timeline, I add Keyframes to actually change the RGB values of these light objects\u003C/p\u003E\u003Cp\u003E - I then reference this animation as per \u003Cstrong\u003E5)\u003C/strong\u003E above\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust wanna say that if you use RGB (color) keyframes in animating the light toggling, the color tweaking won\u0027t work but if you want it to work, using intensity instead will do. Works with me.\u003C/p\u003E\n"},{"CreatedByName":"al.bebop","CreatedById":118310,"CreatedDateTime":"2014-09-19T23:50:37Z","Content":"\n\u003Cp\u003EThanks to everyone above for the help already; can anyone help with setting up the color of the emissive texture on the lamp \u0022bulb\u0022 change color in accordance with the color of the light itself? Tweaking the RGB values in VAB changes the light just fine but I\u0027m unable to figure out how to make it so the \u0022bulb\u0022 itself changes color as well.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-20T00:18:39Z","Content":"\n\u003Cp\u003Ethere\u0027s no way to change the emissive RGB values without plugins.\u003C/p\u003E\n"},{"CreatedByName":"al.bebop","CreatedById":118310,"CreatedDateTime":"2014-09-22T17:10:29Z","Content":"\n\u003Cp\u003EWow, you\u0027re totally correct! Not sure why I was under the impression that the stock headlights emissive textures changed color along with the light beam itself! Thanks for making me take another look before beating my head against this further!\u003C/p\u003E\n"}]}