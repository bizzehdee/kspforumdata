{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":49,"Articles":[{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2015-02-11T04:40:23Z","Content":"\n\u003Cp\u003EI\u0027m puzzling over an orbital problem that I can\u0027t quite get a grip on. I\u0027m trying to arrange a Kerbin-Eve-Moho journey, and I\u0027m trying to arrange to have the Eve flyby happen at the right time so that I can use the Eve flyby to change inclination and insert me into the same orbital plane as Moho. This way I use the free dV of the flyby to make the expensive maneuver.\u003C/p\u003E\u003Cp\u003EHowever, I can\u0027t figure out a good way of figuring out exactly when that flyby should happen.\u003C/p\u003E\u003Cp\u003EI can get a rough estimate by eyeballing the crossing nodes in KSP and fast-forwarding time until I see Eve at the estimated node. Add in multiple of the sidereal orbit period, and I get a number of candidate times. Check the pork chop plot and I see that 15271920 seconds UT gives me a decently cheap transfer (2.6km/s) and has the Eve fly-by occurring near where I think the node is.\u003C/p\u003E\u003Cp\u003EBut when I plug the transfer into MA, and ask it to optimize the Kerbin ejection maneuver to get me Moho\u0027s inclination and RAAN, it can\u0027t manage it. I\u0027ll get the 7\u00C3\u201A\u00C2\u00B0 inclination, but a 73\u00C3\u201A\u00C2\u00B0 RAAN (as opposed to Moho\u0027s 70\u00C3\u201A\u00C2\u00B0 RAAN).\u003C/p\u003E\u003Cp\u003ESo, how can I improve my estimate of the Eve-Moho nodes and when Eve will arrive at the nodes? Is there another way to approach the whole problem of finding the right fly-b maneuvers?\u003C/p\u003E\u003Cp\u003EMission Architect file can be found at \u003Ca href=\u0022https://www.dropbox.com/s/qxpzznnsupwzufb/Mission%20to%20Moho.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/qxpzznnsupwzufb/Mission%20to%20Moho.mat?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E-bk2w\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-02-11T04:46:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003ESo to be honest, I really don\u0027t like the MEA now that I have Mission Architect. I would say if you\u0027re looking to execute an impulsive maneuver in KSP, convert it to a finite duration maneuver by right clicking the mission script and selecting \u0022convert impulsive maneuver\u0022 (when you have the correct maneuver highlighted). Then just execute that (if you upload a finite duration maneuver, the node is created at the start time). MA does everything MEA does but without the annoyances you pointed out above. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting! I will give that a go\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-12T02:35:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bk2w\u0022 data-cite=\u0022bk2w\u0022\u003E\u003Cdiv\u003EI\u0027m puzzling over an orbital problem that I can\u0027t quite get a grip on. I\u0027m trying to arrange a Kerbin-Eve-Moho journey, and I\u0027m trying to arrange to have the Eve flyby happen at the right time so that I can use the Eve flyby to change inclination and insert me into the same orbital plane as Moho. This way I use the free dV of the flyby to make the expensive maneuver.\u003Cp\u003EHowever, I can\u0027t figure out a good way of figuring out exactly when that flyby should happen.\u003C/p\u003E\u003Cp\u003EI can get a rough estimate by eyeballing the crossing nodes in KSP and fast-forwarding time until I see Eve at the estimated node. Add in multiple of the sidereal orbit period, and I get a number of candidate times. Check the pork chop plot and I see that 15271920 seconds UT gives me a decently cheap transfer (2.6km/s) and has the Eve fly-by occurring near where I think the node is.\u003C/p\u003E\u003Cp\u003EBut when I plug the transfer into MA, and ask it to optimize the Kerbin ejection maneuver to get me Moho\u0027s inclination and RAAN, it can\u0027t manage it. I\u0027ll get the 7\u00C3\u201A\u00C2\u00B0 inclination, but a 73\u00C3\u201A\u00C2\u00B0 RAAN (as opposed to Moho\u0027s 70\u00C3\u201A\u00C2\u00B0 RAAN).\u003C/p\u003E\u003Cp\u003ESo, how can I improve my estimate of the Eve-Moho nodes and when Eve will arrive at the nodes? Is there another way to approach the whole problem of finding the right fly-b maneuvers?\u003C/p\u003E\u003Cp\u003EMission Architect file can be found at \u003Ca href=\u0022https://www.dropbox.com/s/qxpzznnsupwzufb/Mission%20to%20Moho.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/qxpzznnsupwzufb/Mission%20to%20Moho.mat?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E-bk2w\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s a bit unclear from your post. Have you tried using the flyby maneuver sequencer tool? This should, in theory, find a near-optimal flyby trajectory without you having to do all of this additional work.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-02-12T05:49:42Z","Content":"\n\u003Cp\u003ESo I tried the impulsive burn conversion and have an issue? I went 2x warp on rails, loaded orbital data from KSP, set up a circularize maneuver and checked what MA said my Ap/Pe would be - 494.123km. I changed it to proscribed and uploaded it to KSP and checked the Ap/Pe of the resulting maneuver - 494.122/494.125. Excellent. Then I converted to the finite duration and checked MA, which told me my Ap/Pe would be 495.29/492.938. When I loaded the maneuver into the game I checked the resulting plot in the map screen and it told me my Ap/Pe would be 497.333/490.911. Again, all this is on rails so the craft in the game isn\u0027t changing any of its orbital parameters. What gives?\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-12T14:28:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003ESo I tried the impulsive burn conversion and have an issue? I went 2x warp on rails, loaded orbital data from KSP, set up a circularize maneuver and checked what MA said my Ap/Pe would be - 494.123km. I changed it to proscribed and uploaded it to KSP and checked the Ap/Pe of the resulting maneuver - 494.122/494.125. Excellent. Then I converted to the finite duration and checked MA, which told me my Ap/Pe would be 495.29/492.938. When I loaded the maneuver into the game I checked the resulting plot in the map screen and it told me my Ap/Pe would be 497.333/490.911. Again, all this is on rails so the craft in the game isn\u0027t changing any of its orbital parameters. What gives?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll let you answer your own question, actually. The maneuver you uploaded was modeled as a finite duration maneuver with the uploaded maneuver node in KSP placed at the start of that maneuver. Why would KSP\u0027s map view show a different post-maneuver orbit than Mission Architect? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-02-12T17:57:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EI\u0027ll let you answer your own question, actually. The maneuver you uploaded was modeled as a finite duration maneuver with the uploaded maneuver node in KSP placed at the start of that maneuver. Why would KSP\u0027s map view show a different post-maneuver orbit than Mission Architect? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, duh. Because KSP is assuming an instantaneous change in momentum. Yea, I totally missed that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-13T20:47:17Z","Content":"\n\u003Cp\u003EGaiiden, can you let me know if this build resolves the issue you had with the mission animator?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/29126891/KSPTOT_v121_prerelease1.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/29126891/KSPTOT_v121_prerelease1.zip\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-02-14T06:51:15Z","Content":"\n\u003Cp\u003Eworks a charm!\u003C/p\u003E\u003Cp\u003ELooks like my Mun mission won\u0027t be able to do an aerobrake test coming home, due to complications. Would the MA aerobrake feature work for return trajectories or should I just head over to the Trajectories mod for that?\u003C/p\u003E\n"},{"CreatedByName":"wmvanvliet","CreatedById":103150,"CreatedDateTime":"2015-02-14T12:20:27Z","Content":"\n\u003Cp\u003EI have a fully functional MATLAB 2014b installation. Can I run KSP TOT from the source code directly? (maybe I can even help in development a bit, squash bugs when I find them). Tried running mainGUI, but it gives me errors.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-14T19:13:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003Eworks a charm!\u003Cp\u003ELooks like my Mun mission won\u0027t be able to do an aerobrake test coming home, due to complications. Would the MA aerobrake feature work for return trajectories or should I just head over to the Trajectories mod for that?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou should be able to use the MA aero code, but feel free to cross-check with Trajectories. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Just as a heads up, I\u0027ll probably put out v1.2.1 today then, get the fixes to everyone else. Thanks for the help!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022wmvanvliet\u0022 data-cite=\u0022wmvanvliet\u0022\u003E\u003Cdiv\u003EI have a fully functional MATLAB 2014b installation. Can I run KSP TOT from the source code directly? (maybe I can even help in development a bit, squash bugs when I find them). Tried running mainGUI, but it gives me errors.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can run the code however you\u0027d like, I suppose. You want to run projectMain.m, not mainGUI. However, I do recommend running the executable as it\u0027s known to work. Regardless, if you do find bugs, please report them to me here...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-14T19:16:50Z\u0022 title=\u002202/14/2015 07:16  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 14, 2015\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Snoman314","CreatedById":106370,"CreatedDateTime":"2015-02-15T00:57:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EAnd away I went! No need for any MAT file patching. Ahhh this feels good. I hate to admit it but that 2deg difference was \u003Cem\u003Ereally\u003C/em\u003E bugging me lol\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOutstanding! Thanks for both your work persisting on fixing this.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-15T02:33:53Z","Content":"\n\u003Cp\u003EI\u0027m happy to announce the release of v1.2.1:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EFixes an issue with the rotation rate of Kerbin in the bodies.ini file.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixes an issue with the way spacecraft are displayed in the Mission Animator.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixes an issue with lat/long calculations.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlease let me know if you have any questions.\u003C/p\u003E\n"},{"CreatedByName":"Snoman314","CreatedById":106370,"CreatedDateTime":"2015-02-15T03:43:51Z","Content":"\n\u003Cp\u003EHmm, the new version is giving me the following error when I try to run it. v1.2.0 seemed to be running fine before I tried v1.2.1\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/qqojNGT.png?1\u0022 alt=\u0022qqojNGT.png?1\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-15T03:45:53Z\u0022 title=\u002202/15/2015 03:45  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 15, 2015\u003C/time\u003E by Snoman314\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Snoman314","CreatedById":106370,"CreatedDateTime":"2015-02-15T04:25:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Snoman314\u0022 data-cite=\u0022Snoman314\u0022\u003E\u003Cdiv\u003EHmm, the new version is giving me the following error when I try to run it. v1.2.0 seemed to be running fine before I tried v1.2.1\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/qqojNGT.png?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/qqojNGT.png?1\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk... Never mind, out of frustration I just tried running it again, and this time it worked. Weird...\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-15T04:29:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Snoman314\u0022 data-cite=\u0022Snoman314\u0022\u003E\u003Cdiv\u003EOk... Never mind, out of frustration I just tried running it again, and this time it worked. Weird...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOld bug with MCR, never could figure what\u0027s going on. Can you make it happen again?\u003C/p\u003E\n"},{"CreatedByName":"Snoman314","CreatedById":106370,"CreatedDateTime":"2015-02-15T05:13:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EOld bug with MCR, never could figure what\u0027s going on. Can you make it happen again?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo sorry. It runs every time now. I didn\u0027t change anything either...\u003C/p\u003E\u003Cp\u003EOn a separate note, I\u0027m hoping to get some help with something else. I\u0027m having an issue with KSP and KSPTOT giving different outcomes. In the following google drive folder is my mission file, screenshots etc;\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/folderview?id=0BxfgbiRB-sRrWG00VGZlSHdMQk0\u0026amp;usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/folderview?id=0BxfgbiRB-sRrWG00VGZlSHdMQk0\u0026amp;usp=sharing\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMy KSP is pretty heavily modded, so I don\u0027t know if the persistence file will do you any good.\u003C/p\u003E\u003Cp\u003EBut here are the screenshots:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/dOZwQgl.png?1\u0022 alt=\u0022dOZwQgl.png?1\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/7A3uCGm.png?1\u0022 alt=\u00227A3uCGm.png?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs you can see, the Mission Architect says that after the last burn, the vessel never returns to the Kerbin SOI. KSP itself disagrees. ...? Why?\u003C/p\u003E\u003Cp\u003EI\u0027m trying to fly a mission to Minmus, via the Sun\u0027s SOI in order to get a little more science and most of all, to get some extra XP to level up my Kerbonauts. I used the \u0027Show SOI radii\u0027 and \u0027Show children\u0027 etc buttons to guesstimate the appropriate ejection angle from Kerbin so that shortly after leaving the SOI, a burn back along my path (relative to Kerbin) sends me back within Kerbin\u0027s SOI in the vicinity of an encounter with Minmus. From the screenshot at the top right, you can see I pulled that off (the maneuver is timed for 600 seconds after leaving Kerbin\u0027s SOI). (BTW I did this by setting a circularise node (relative to the sun), then converting back to an orbital vector node, and doubling the values that came across).\u003C/p\u003E\u003Cp\u003EMy plan from here was to optimise just the last burn to generate an encounter with Minmus, as I think it\u0027s relatively close. However as I outlined above, KSPTOT isn\u0027t showing me as entering the SOI of Kerbin.\u003C/p\u003E\u003Cp\u003ESo... what now? Any ideas?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-15T23:38:48Z\u0022 title=\u002202/15/2015 11:38  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 15, 2015\u003C/time\u003E by Snoman314\u003C/strong\u003E\n\u003Cbr\u003Efixing image links\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-02-15T06:57:05Z","Content":"\n\u003Cp\u003Eare you using Real Solar System as part of a visual enhancement mod?\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-15T07:07:56Z","Content":"\n\u003Cp\u003ESnoman314: Can you duplicate the issue with stock KSP 0.90? That\u0027ll be the only way I can really figure out what\u0027s going on. Thanks for the info thus far though, it\u0027s good.\u003C/p\u003E\u003Cp\u003EEDIT: Okay, so the issue is that you\u0027re having KSP TOT look for an SoI transition so close to the transition that just occurred (as compared to the size of the Sun\u0027s SoI, of course). MA\u0027s SoI transition finder really doesn\u0027t like doing things like that, it\u0027s mostly for safety (don\u0027t want to keep catching the same SoI transition multiple times in a row). I\u0027ll try to figure something out tomorrow, see if I can help it, though.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-15T07:26:11Z\u0022 title=\u002202/15/2015 07:26  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 15, 2015\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-02-15T09:12:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EYou can run the code however you\u0027d like, I suppose. You want to run projectMain.m, not mainGUI. However, I do recommend running the executable as it\u0027s known to work. Regardless, if you do find bugs, please report them to me here...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWill 2014a work or does it have to be 2014b? The former is apparently available at my school.\u003C/p\u003E\n"},{"CreatedByName":"Snoman314","CreatedById":106370,"CreatedDateTime":"2015-02-15T14:07:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003Eare you using Real Solar System as part of a visual enhancement mod?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope. No RSS, and I uninstalled the visual enhancement mods a while back.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003ESnoman314: Can you duplicate the issue with stock KSP 0.90? That\u0027ll be the only way I can really figure out what\u0027s going on. Thanks for the info thus far though, it\u0027s good.\u003Cp\u003EEDIT: Okay, so the issue is that you\u0027re having KSP TOT look for an SoI transition so close to the transition that just occurred (as compared to the size of the Sun\u0027s SoI, of course). MA\u0027s SoI transition finder really doesn\u0027t like doing things like that, it\u0027s mostly for safety (don\u0027t want to keep catching the same SoI transition multiple times in a row). I\u0027ll try to figure something out tomorrow, see if I can help it, though.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can try with a stock install tomorrow, but the theory about it being too close to the previous transition does fit with what I was seeing. For example I can get it to work if the transition back to Kerbin\u0027s SOI is a week or so later, but when I get the maneuver right to minimise time outside the SOI, it doesn\u0027t work. I\u0027ll try setting a coast of a few hours manually and see what happens tomorrow. \u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-15T18:11:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022skykooler\u0022 data-cite=\u0022skykooler\u0022\u003E\u003Cdiv\u003EWill 2014a work or does it have to be 2014b? The former is apparently available at my school.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt has to be R2014b, sorry. You don\u0027t need MATLAB to run the program though, just the MCR, which I make available for download in the first post of this thread.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Snoman314\u0022 data-cite=\u0022Snoman314\u0022\u003E\u003Cdiv\u003EI can try with a stock install tomorrow, but the theory about it being too close to the previous transition does fit with what I was seeing. For example I can get it to work if the transition back to Kerbin\u0027s SOI is a week or so later, but when I get the maneuver right to minimise time outside the SOI, it doesn\u0027t work. I\u0027ll try setting a coast of a few hours manually and see what happens tomorrow. \u003Cp\u003EThanks!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I will investigate more this afternoon.\u003C/p\u003E\n"},{"CreatedByName":"Snoman314","CreatedById":106370,"CreatedDateTime":"2015-02-15T23:38:03Z","Content":"\n\u003Cp\u003EOK, I\u0027ve tried replacing the second coast to Next SOI Transition node with a 5 day \u0027Go to Delta Time\u0027 coast. According to the game, by that point I\u0027d probably be back on my second escape trajectory. Not so according to KSP TOT:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/3JOuFSX.png?1\u0022 alt=\u00223JOuFSX.png?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m going to try a stock KSP later today. Will take a while to set up.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-15T23:50:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Snoman314\u0022 data-cite=\u0022Snoman314\u0022\u003E\u003Cdiv\u003EOK, I\u0027ve tried replacing the second coast to Next SOI Transition node with a 5 day \u0027Go to Delta Time\u0027 coast. According to the game, by that point I\u0027d probably be back on my second escape trajectory. Not so according to KSP TOT:\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/3JOuFSX.png?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/3JOuFSX.png?1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m going to try a stock KSP later today. Will take a while to set up.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, could you try this new build of KSP TOT? Let me know if it works for you.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/29126891/KSPTOT_v122_prerelease1.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/29126891/KSPTOT_v122_prerelease1.zip\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2015-02-16T20:09:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EIt\u0027s a bit unclear from your post. Have you tried using the flyby maneuver sequencer tool? This should, in theory, find a near-optimal flyby trajectory without you having to do all of this additional work.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, it turns out that a big part of my problem with the Flyby Tool is a bug in KSPTOT. Something isn\u0027t calculating the orbits correctly when TOT is set for Kerbin Time. The suggested burns and orbits simply don\u0027t work in KSP or MA, in addition to calling for large delta-V.\u003C/p\u003E\u003Cp\u003EEarth-Time Flyby:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/pXYIlBW.png\u0022 alt=\u0022pXYIlBW.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EKerbin-Time Flyby:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/TRpuFwf.png\u0022 alt=\u0022TRpuFwf.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve confirmed this behavior with the Windows 1.2.1 app.\u003C/p\u003E\u003Cp\u003EAvoiding this bug helps me get good flyby sequences, and I can approximately control the flyby date by narrowly constraining the departure date. The Flyby tool ends up finding a sequence that passes Eve close to when I desire, and uses Eve to change into Moho\u0027s plane. Is there a way to constrain the Flyby tool to visit Eve at a particular time, and allow it to find the best departure date?\u003C/p\u003E\u003Cp\u003EHowever, I still haven\u0027t figured out the more basic orbital question: how can I determine when one planetary body is crossing through the plane of a second planetary body?\u003C/p\u003E\u003Cp\u003E-bk2w\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T20:31:54Z\u0022 title=\u002202/16/2015 08:31  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by bk2w\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2015-02-17T02:26:08Z","Content":"\n\u003Cp\u003ECould the issue be that the definition of a day (in seconds) is different between the two? That would dictate how your flight time bounds (in units of days) are interpreted.\u003C/p\u003E\u003Cp\u003EA Kerbin day is 21600 seconds, and an Earth day is 86400 seconds. Could this be the problem?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EHowever, I still haven\u0027t figured out the more basic orbital question: how can I determine when one planetary body is crossing through the plane of a second planetary body?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStrictly speaking, you would have to compute the line of nodes between the bodies. This is a vector from the central body in the direction of the cross product of the two orbit normal vectors.The points at which that vector intersects the orbit are the ascending and descending nodes.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-17T02:28:50Z\u0022 title=\u002202/17/2015 02:28  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 17, 2015\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"}]}