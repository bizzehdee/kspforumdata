{"TopicId":96292,"ForumId":50,"TopicTitle":"Dealing with the weirdness of part rooting.","CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-01-11T00:11:36Z","PageNum":1,"Articles":[{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-01-11T00:11:36Z","Content":"\n\u003Cp\u003EThis is in response to another post dealing with rooting. In this example demonstrates how to identify and get around rooting problems. This example is a worst case example for rooting since the primary node I want to create is not a predefined node, but it is on a solid surface. Here is the stock parts cfg file:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPART\u003Cbr\u003E{\u003Cbr\u003Ename = Size3to2Adapter\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = Squad\u003Cbr\u003E\u003Cbr\u003Emesh = Size3Adapter.mu\u003Cbr\u003ErescaleFactor = 1\u003Cbr\u003E\u003Cbr\u003E[B]node_stack_top = 0.0, 1.1, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003Enode_stack_bottom = 0.0, -1.1, 0.0, 0.0, 1.0, 0.0, 3[/B]\u003Cbr\u003E\u003Cbr\u003ETechRequired = veryHeavyRocketry\u003Cbr\u003EentryCost = 8800\u003Cbr\u003Ecost = 2600\u003Cbr\u003Ecategory = Structural\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = Kerbodyne ADTP-2-3\u003Cbr\u003Emanufacturer = Kerbodyne\u003Cbr\u003Edescription = This adapter is used to bridge between Kerbodyne and Rockomax rocket bodies.\u003Cbr\u003E\u003Cbr\u003EattachRules = 1,0,1,1,0\u003Cbr\u003E\u003Cbr\u003Emass = 0.2\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.3\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 6\u003Cbr\u003EbreakingForce = 200\u003Cbr\u003EbreakingTorque = 200\u003Cbr\u003EmaxTemp = 2900\u003Cbr\u003E\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe above part would prefer to attach to the bottom node or alternatively its top node. If you added another node to the top of the bolded list it would basically ignore that node (my experience) for rooting.\u003C/p\u003E\u003Cp\u003EThis part was an ideal starting point for creating a head for a nacell such as a core rocket with three ground pointing nacells. As such it would make an good lander, with wide set feet, but also since the nacells arm would carry fuel, the entire ship can be ported and fuel from a single point (particularly convinient if one has a fuel generator), without the need for dorky looking fuel lines. \u003C/p\u003E\u003Cp\u003EI wanted to use parts top and bottom node_stack points, and I wanted to add a nacell. This is not what I arrived at however due to the limitations of configuration. This is the part I derived. If you don\u0027t want to get into part modding I will summarize, the most desired attachment node is the last one in the list. Others maybe ignored, depending on the circumstances. \u003C/p\u003E\u003Cp\u003ETo understand how to create a new node you have to understand how attachment nodes are defined. In the example above the node is coordinated on the first three coordinates ....... = X, Y, Z. The math is funky and may change with version because of scale factoring so some fiddling may be required. The next three numbers are the orientation of the node = , , , X, Y, Z. These are important in determining the default attachment angle, getting this right makes attachment easier. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPART\u003Cbr\u003E{\u003Cbr\u003Ename = FT50ThreeForthsToOneHalf\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = derived of Squad\u003Cbr\u003E\u003Cbr\u003Emesh = Size3Adapter.mu\u003Cbr\u003ErescaleFactor = 0.23\u003Cbr\u003E\u003Cbr\u003Enode_stack_bottom = 0.0, -1.1, 0.0, 0.0, 1.0, 0.0, 0\u003Cbr\u003Enode_stack_top = 0.0, 0.0, 1.6, 0.0, 0.258, 0.965, 0\u003Cbr\u003E\u003Cbr\u003ETechRequired = basicRocketry\u003Cbr\u003EentryCost = 300\u003Cbr\u003Ecost = 110\u003Cbr\u003Ecategory = Propulsion\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = Diagnonal mounted Nacell Head, Feuled \u003Cbr\u003Emanufacturer = \u003Cbr\u003Edescription =  \u003Cbr\u003E\u003Cbr\u003EattachRules = 1,0,1,1,0\u003Cbr\u003E\u003Cbr\u003Emass = 0.0270\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.3\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 8\u003Cbr\u003EbreakingForce = 75\u003Cbr\u003EbreakingTorque = 75\u003Cbr\u003EmaxTemp = 3500\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E name = LiquidFuel\u003Cbr\u003E amount = 22.5\u003Cbr\u003E maxAmount = 22.5\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E name = Oxidizer\u003Cbr\u003E amount = 27.5\u003Cbr\u003E maxAmount = 27.5\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENote that this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Enode_stack_top = 0.0, 1.1, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003Enode_stack_bottom = 0.0, -1.1, 0.0, 0.0, 1.0, 0.0, 3\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ebecame this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Enode_stack_bottom = 0.0, -1.1, 0.0, 0.0, 1.0, 0.0, 0\u003Cbr\u003Enode_stack_top = 0.0, 0.0, 1.6, 0.0, 0.258, 0.965, 0\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe most important line for directing rooting was the last line in the node_stack entry. I did fiddle around with this. I could deal without node_stack_bottom, replacing it with a node starting part, however the node_stack_bottom did not upset the part rooting. Adding another node_stack entry or node_attach disrupted or made difficult the attachment. \u003C/p\u003E\u003Cp\u003EIn this version of the part the top stack preferentially attaches to a radial node. The radial/rooting part should have a node pointing south and the part should approach the radial node from the south for convenient attachment. Fuel parts can attach to the node_stack_bottom. To create a node attachment on the CoG top one needs to use a node starter like modular girder segment (or modded equivalent) and then add nodes to top.\u003C/p\u003E\u003Cp\u003ENote the stock part copy mod needs a new name \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ename = Altwhatever\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003Eand new title\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Etitle = Alternative Whatever . . . . \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand you may wish to tweek the attach rules. \u003C/p\u003E\u003Cp\u003EYou might not wish to modify your parts, but if you know where in the KSP directory your part is, by looking at the order of entries in the node_ . . . . list you can determine whether your stuff is buggy or it simply will not root through a certain node.\u003C/p\u003E\u003Cp\u003EIf anyone knows of a better way to design this part let me know.\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2015-01-11T01:33:05Z","Content":"\n\u003Cp\u003EThis will likely be more suitable for the Tutorials section; moved. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}