{"TopicId":41737,"ForumId":29,"TopicTitle":"gimbals and transforms","CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2013-08-09T05:57:52Z","PageNum":1,"Articles":[{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2013-08-09T05:57:52Z","Content":"\n\u003Cp\u003EI decided I\u0027m sick of gimbals going the wrong way on a Goddard-style rocket, and not dealing with roll, so I\u0027m working on a smarter gimbal module. Only slight issue: I\u0027m not entirely clear on exactly how to tell KSP to point the engine appropriately once I\u0027ve calculated which way it should point.\u003C/p\u003E\u003Cp\u003ESo far what I\u0027ve done is copied the LV-T45 and changed \u0022ModuleGimbal\u0022 to \u0022ModuleSmartGimbal\u0022.\u003C/p\u003E\u003Cp\u003EI was assuming that inside that module, what I should do is find the gimbalTransformName transform and make its localRotation point according to what my math says it should point.\u003C/p\u003E\u003Cp\u003EHere is what happens when the gimbals point at Euler angles (0,0,0), which I assumed was the neutral position:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6bSnmhq.jpg\u0022 alt=\u00226bSnmhq.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo I am definitely setting the local rotation: the engines are pointing opposite each other, as you\u0027d expect on a symmetric craft. When I apply pitch or yaw, they move accordingly (I haven\u0027t implemented roll yet). But (0,0,0) is not the rest pose. Am I changing the right transform? Or is the rest pose something else?\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2013-08-10T01:12:05Z","Content":"\n\u003Cp\u003EWhy not just do the simple thing and record the initial transform as the rest pose? After all, it makes the code a bit more robust in the case where the modeler didn\u0027t make their rest position a simple \u00C3\u00A2\u00C5\u2019\u00C2\u00A9100\u00C3\u00A2\u00C5\u2019\u00C2\u00AA direction.\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-08-11T12:12:44Z","Content":"\n\u003Cp\u003EYeah, that\u0027s how the stock gimbal module works. Store the initial rotation and then each frame set the rotation to that plus maximum_gimbal * control_input (the latter being -1 to 1).\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2013-08-12T18:55:38Z","Content":"\n\u003Cp\u003ECrazy talk -- that idea is way too simple.\u003C/p\u003E\u003Cp\u003EThanks all!\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2013-08-13T02:41:29Z","Content":"\n\u003Cp\u003EAnyone want to test \u003Ca href=\u0022https://github.com/numerobis/KSP-SMRT\u0022 rel=\u0022external nofollow\u0022\u003EModuleSMRTGimbal\u003C/a\u003E?\u003C/p\u003E\u003Cp\u003EUsage: first, build. You\u0027ll need to edit the references to point to the appropriate place, and you might want to update my after-build custom step.\u003C/p\u003E\u003Cp\u003EAfterwards, in any part.cfg, replace ModuleGimbal with ModuleSMRTGimbal.\u003C/p\u003E\u003Cp\u003ENow you can fly rockets like this one (well, for the most part -- when the center of mass flips from being below to being above the T45s at the top, you lose control for a little bit):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/l6ZEJJ0.jpg\u0022 alt=\u0022l6ZEJJ0.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-08-13T09:27:35Z","Content":"\n\u003Cp\u003ENice, so i can soon use my abandoned \u0022Lander with engines on top and bottom\u0022 designs, again? And is it safe\u0026amp;stable enough to use this Module for all Engines? I don\u0027t really like editing those configs and would prefer to replace the stock gimbal modules after loading the parts. I wonder if it is even possible to make the save file compatible.\u003C/p\u003E\u003Cp\u003Eps: What about using the stock ModuleGimbal as base class? That way it might only be necessary to overwrite OnFixedUpdate and let the stock code handle everything else.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-13T09:44:32Z\u0022 title=\u002208/13/2013 09:44  AM\u0022 data-short=\u002210 yr\u0022\u003EAugust 13, 2013\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2013-08-13T19:04:17Z","Content":"\n\u003Cp\u003EWhy not subclass is that there\u0027s too little worth reusing.\u003C/p\u003E\u003Cp\u003EIt should be equally safe for use on any engine. Your action groups to toggle the gimbals aren\u0027t likely to work out of the box, but other than that it\u0027s a drop-in replacement.\u003C/p\u003E\u003Cp\u003EIt isn\u0027t 100% for me in testing last night though. Sometimes it seems to reverse the controls. It\u0027ll be a few days before I can debug it.\u003C/p\u003E\n"}]}