{"TopicId":147022,"ForumId":15,"TopicTitle":"[SOLVED] Solar Wing Animation Help - Constraining Solar Array Expansion","CreatedByName":"cxg2827","CreatedById":57380,"CreatedDateTime":"2016-09-03T18:33:32Z","PageNum":1,"Articles":[{"CreatedByName":"cxg2827","CreatedById":57380,"CreatedDateTime":"2016-09-03T18:33:32Z","Content":"\n\u003Cp\u003E\nHi all,\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027ve been having issues trying to rig up a solar array wing so the animation plays fine. My issue is with the expanding/retracting of the solar cells inside the bounds of the endpoint arms. Picture below.\n\u003C/p\u003E\n\u003Cp\u003E\nWith parenting I have it set\u00A0us as followed:\n\u003C/p\u003E\n\u003Cp\u003E\nThe endcap (B) is parented to (A).\n\u003C/p\u003E\n\u003Cp\u003E\nThe solar arm (C) is parented to the endcap (B)\n\u003C/p\u003E\n\u003Cp\u003E\nand then the rightmost solar cell\u00A0(D) is parented to the arm (C). and then the next adjacent solar cell is parented to the solar cell on the right. and so it goes all the way down the line (for 84 cells).\n\u003C/p\u003E\n\u003Cp\u003E\nSo the animation, I have the endcap (B) keyframed to change location and expand outward from the truss can (A). as the endcap extends outward, the solar cells rotate and expand towards the right since they are parented to the arm (C).\n\u003C/p\u003E\n\u003Cp\u003E\nBecause the encap animation (B) is a distance change while the solar cell animations (D) are angle-based, I am not able to get them to animate in a manner that the solar cells expand/retract properly (due to the angle based animation converts to a sine wave-based movement in the linear direction).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs there some way that i can parent the solar array so that it is bound by the left/right limits, and are driven by the animation of the boom/endcap deployment?\n\u003C/p\u003E\n\u003Cp\u003E\nI think a last resort is to merge all the cells into a single object and just have the animation be a change in scale, though i dont think it will look right, and would like to avoid this solution.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220FW94JH.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0FW94JH.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-06T04:05:39Z\u0022 title=\u002209/06/2016 04:05  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 6, 2016\u003C/time\u003E by cxg2827\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cxg2827","CreatedById":57380,"CreatedDateTime":"2016-09-06T04:04:50Z","Content":"\n\u003Cp\u003E\nSo, I decided to just merge the cells and do a scaling animation. It actually turned out OK, when using X and Z scaling. so I\u0027ll consider it solved. One day I\u0027ll figure out how to use armatures and I\u0027m sure that will solve my original question.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother observation is with having each cell its own object as part of the animation, the .MU file ended up being about 13Mb. But with merging each wing section, it reduced it to 2.5Mb.\n\u003C/p\u003E\n"},{"CreatedByName":"InsaneDruid","CreatedById":137849,"CreatedDateTime":"2016-09-06T14:18:53Z","Content":"\n\u003Cp\u003E\nYou can do this without the use of armatures by using the transformation constraint on the parts you had set up as described in your first post.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is my version of it - on a much \u0022neater to animate\u0022 setup with only 5 parts to animate per solar panel, but extending it is just adding the same settings to the rest of the parts.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022untitled-13hu6d.png\u0022 class=\u0022ipsImage\u0022 height=\u0022561\u0022 src=\u0022https://abload.de/img/untitled-13hu6d.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe round empty marked A is my \u0022animation master\u0022. It is just an empty that will rotate on it\u0027s Z-axis from 90 to -90 degrees. The rest of the parts will move according to this rotation.\n\u003C/p\u003E\n\u003Cp\u003E\nI placed empties on the \u0022hinges\u0022 between the parts of the solar array, but it will work with just putting the constraints on the actual meshes, too (which I did with the integrated radiator part just beneath the blue arrow). Part hierarchy is the same as yours, base (mesh) -\u0026gt; empty that is the pivot of the sun tracking animation -\u0026gt;empty A AND base of the folding animation -\u0026gt;empty B -\u0026gt;first solar cell (and the later added radiator) -\u0026gt;empty C-\u0026gt;second solar cell -\u0026gt;empty D-\u0026gt;third solar cell etc etc.\n\u003C/p\u003E\n\u003Cp\u003E\nAs said, The empties B, C, D (and the unmarked F on the next segment) are the parts that use transformation constraints, but you can but these constraints on the actual mesh of the solar cell segments, too.\n\u003C/p\u003E\n\u003Cp\u003E\nThe transformation constraint copies and scales the rotation of the animated empty A down to the needed range of rotation for each mesh. As the actual solar cells aren\u0027t flat the first segment has to travel 100\u00B0 from its resting pose to its fully extended pose, so the 180\u00B0 from empty A are converted in a rotation from -10 to 90 degrees on the empty B. C thus has to travel 190 instead of 180 degree, so it is set to move from \u002B180 down to -10.\n\u003C/p\u003E\n\u003Cp\u003E\nD (and F etc...) needs to only rotate 180\u00B0 as the parts are now symmetrical so they are set up accordingly (one moves from 180 down to -10 and one from -10.\n\u003C/p\u003E\n\u003Cp\u003E\nFor your object B that needs to change its location, you could also set up such an transformation constraint, but mark the LOC under destination and set up your x(?) locations accordingly.\n\u003C/p\u003E\n\u003Cp\u003E\nIts quite easy, no need for bones etc, just add one or two constraints to an object under the constraints tab, edit the numbers, done. Especially with the \u0022transformation\u0022 constraint. There is a \u0022copy rotation\u0022 one, too that I tried to use first as it sounded obvious to copy the rotation from the animated empty A to, say B, but this made problems when there where rotations with ROT\u0026gt;180 degrees that would register as 360 -ROT etc etc. I then tried \u0022track to\u0022 to let each segment track the origin of the other, but this was a hassle and gave incorrect animations, too sometimes. But the transformation constraint works fine and easy.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-06T14:37:51Z\u0022 title=\u002209/06/2016 02:37  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 6, 2016\u003C/time\u003E by InsaneDruid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RaendyLeBeau","CreatedById":146386,"CreatedDateTime":"2017-01-27T14:04:11Z","Content":"\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003EHello, I almost dare not to ask.\u003C/span\u003E \u003Cspan\u003ESince I could this time, the doku I no longer find.\u003C/span\u003E \u003Cspan\u003EJust have a 3d model.\u003C/span\u003E \u003Cspan\u003EThe panels are connected with constrains.\u003C/span\u003E\u003Cbr\u003E\u003Cspan\u003EBut I know something is still missing.\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cstrong\u003E\u003Cspan\u003EQ: for a simple panel folding you have to add armature bones?\u003C/span\u003E\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003EFor the tips many thanks in advance, raendy\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://imgur.com/gallery/m1L2i\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/gallery/m1L2i\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022BaKW2X0.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022585\u0022 src=\u0022http://i.imgur.com/BaKW2X0.jpg\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00224jbmFfH.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022570\u0022 src=\u0022http://i.imgur.com/4jbmFfH.jpg\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"InsaneDruid","CreatedById":137849,"CreatedDateTime":"2017-01-27T15:07:50Z","Content":"\n\u003Cp\u003E\nYou don\u0027t have to use armature bones. Or transformation constraints. Your setup seems fine from the screenshot. I think you have animated each of the panels individually, as the multiple nla stripes suggest. This is totally fine. The setup described in my previous post just has the single advantage that just one object is animated with keyframes, so that tweaking and changing the animation may be a bit easier (especially when many panels are connected). But animating each individual panel and using a parent-child relation is totally fine, too.\n\u003C/p\u003E\n"},{"CreatedByName":"RaendyLeBeau","CreatedById":146386,"CreatedDateTime":"2017-03-06T15:19:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222936163\u0022 data-ipsquote-contentid=\u0022147022\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221485529670\u0022 data-ipsquote-userid=\u0022137849\u0022 data-ipsquote-username=\u0022InsaneDruid\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 27.1.2017 at 4:07 PM, InsaneDruid said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBut animating each individual panel and using a parent-child relation is totally fine\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/137849-insanedruid/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022137849\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/137849-insanedruid/\u0022 rel=\u0022\u0022\u003E@InsaneDruid\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003Emany thanks for the answer !\u003C/span\u003E \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003EProblem is that I no longer know exactly how to get to the animation.\u003C/span\u003E \u003Cspan\u003EUnfortunately I forgot to document cleanly*.\u003C/span\u003E \u003Cspan\u003EI only know that the panels are connected logically with \u0022child-of\u0022 (constraint).\u003C/span\u003E\u003Cbr\u003E\u003Cspan\u003E- the results are as follows:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E(\u003Ca href=\u0022http://i.imgur.com/BaKW2X0.jpg\u0022 rel=\u0022external nofollow\u0022\u003EPicture above\u003C/a\u003E I have still found, but the blender model no longer understand the solution - *unfortunately, this can happen in a hw. Damage the external hard drive where the project files were on it.)\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003EQUESTION: what have I forgotten, what is still missing?\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://imgur.com/gallery/hmSFZ\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/gallery/hmSFZ\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022htyA9sM.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022563\u0022 src=\u0022http://i.imgur.com/htyA9sM.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022dlb3EFa.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022608\u0022 src=\u0022http://i.imgur.com/dlb3EFa.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Rp6e7h5.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022579\u0022 src=\u0022http://i.imgur.com/Rp6e7h5.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00229vyoU7z.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022623\u0022 src=\u0022http://i.imgur.com/9vyoU7z.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022YVrM61Y.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022669\u0022 src=\u0022http://i.imgur.com/YVrM61Y.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-06T15:20:47Z\u0022 title=\u002203/06/2017 03:20  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 6, 2017\u003C/time\u003E by RaendyLeBeau\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"InsaneDruid","CreatedById":137849,"CreatedDateTime":"2017-03-06T18:39:45Z","Content":"\n\u003Cp\u003E\nCan it be that in the original version, every other panel was flipped before adding the child constraint (and thus flipping its axis), so that copying the rotation resulted that the flipped ones rotated the other way around?\n\u003C/p\u003E\n\u003Cp\u003E\nMy Solution would be using the transformation constraint or a copy rotation instead of the child of constraint and making each panel the child of the other one manually \u003Cstrong\u003Eor \u003C/strong\u003Eusing the transformation constraint or copy rotation together with the child of constraint (but enabling all three location axis copying the rotation in the child of constraint)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nhere is a small demonstration set up this way:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/ke77jxljx587d33/test.blend?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ke77jxljx587d33/test.blend?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}