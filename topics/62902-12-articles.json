{"TopicId":62902,"ForumId":36,"TopicTitle":"[1.8.x to 1.12.x] kRPC: Remote Procedure Call Server (v0.5.1, 2nd March 2023)","CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2014-02-11T20:00:32Z","PageNum":12,"Articles":[{"CreatedByName":"sylink","CreatedById":54413,"CreatedDateTime":"2016-01-13T01:37:24Z","Content":"\n\u003Cp\u003E\nI am familiar with Python but have no idea how to use your mechjeb project, can you point me to some direction how to add it to the existing lib with Python 2.7?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso I\u0027ve been trying out krpc but cannot get the sas to work correctly. It never triggers and every rocket seems to fall over and never turn on the sas. Is there an example of this somehow? Setting to true does nothing as far as I can tell.\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-13T07:59:32Z","Content":"\n\u003Cp\u003E\nMy mechjeb piece isn\u0027t ready for public consumption... \u00A0I\u0027m hoping for a bit of guidance on how to work it into the larger project before I clean it up for public use. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBut... \u00A0the sas modes SHOULD be working? \u00A0I just did a quick test -\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nimport krpc\nconn=krpc.connect()\nv=conn.space_center.active_vessel\nv.control.sas=True \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 #turns on SAS\nv.control.sas_mode= conn.space_center.SASMode.prograde \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 #Sets SAS to prograde\u003C/pre\u003E\n\u003Cp\u003E\nNow, it will throw an exception if you try to set an invalid mode... for example, if you\u0027re still on the ground and order it to go prograde, that\u0027s not a valid instruction, so it will throw an error back at you.\n\u003C/p\u003E\n\u003Cp\u003E\nBut once I was in flight that example I just pasted in set the SAS to on and pointed the rocket prograde just fine? \u00A0If that doesn\u0027t help, please post your python script and I\u0027ll take a look!\n\u003C/p\u003E\n\u003Cp\u003E\nedit :\u00A0space_center.SASMode. is the enum that contains all the possible SAS modes! \u00A0I should have pointed that out in case you hadn\u0027t found it. \u00A0IDLE, at least, gets the ENUM values at runtime, so it will auto-complete the valid settings once you know where to start.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-13T08:13:48Z\u0022 title=\u002201/13/2016 08:13  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 13, 2016\u003C/time\u003E by artwhaley\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sylink","CreatedById":54413,"CreatedDateTime":"2016-01-13T12:05:04Z","Content":"\n\u003Cp\u003E\nIf I run this it works:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nimport krpc\u003Cbr\u003E\nimport time\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nconn = krpc.connect(name=\u0027Hello World\u0027)\u003Cbr\u003E\nvessel = conn.space_center.active_vessel\u003Cbr\u003E\nprint(vessel.name)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nvessel.auto_pilot.target_pitch_and_heading(90,90)\u003Cbr\u003E\nvessel.auto_pilot.engage()\u003Cbr\u003E\nvessel.control.throttle = 1\u003Cbr\u003E\nvessel.control.sas=True\u00A0\u003Cbr\u003E\nvessel.control.sas_mode= conn.space_center.SASMode.stability_assist\u003Cbr\u003E\ntime.sleep(1)\u003Cbr\u003E\nprint vessel.control.sas\u003Cbr\u003E\nprint(\u0027Launch!\u0027)\u003Cbr\u003E\nvessel.control.activate_next_stage()\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nwhile vessel.resources.amount(\u0027LiquidFuel\u0027):\u003Cbr\u003E\n\u00A0 \u00A0 flight_data=vessel.flight()\u003Cbr\u003E\n\u00A0 \u00A0 print vessel.control.sas\u003Cbr\u003E\n\u00A0 \u00A0 vessel.control.sas=True\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBut if I cut the script off and take out the final loop and leave the last command to set SAS to true it turns it off and stays set to false. It seems it has to be set in every loop or something?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSetting the mode works but the status True/False seems to get turned off by something.\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-13T20:15:45Z","Content":"\n\u003Cp\u003E\nThe problem seems to be\u00A0that you\u0027re engaging the autopilot, and then trying to use SAS. \u00A0Like with mechjeb, the kRPC autopilot disengages SAS so that it can give commands to the rocket instead!\n\u003C/p\u003E\n\u003Cp\u003E\nThis works to engage SAS, but doesn\u0027t use the autopilot to hold any particular course:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003Eimport krpc\nimport time\n\n\nconn = krpc.connect(name=\u0027Hello World\u0027)\nvessel = conn.space_center.active_vessel\nprint(vessel.name)\n\n\nvessel.control.throttle = 1\nvessel.control.sas=True \nvessel.control.sas_mode= conn.space_center.SASMode.stability_assist\ntime.sleep(1)\nprint vessel.control.sas\nprint(\u0027Launch!\u0027)\nvessel.control.activate_next_stage()\n\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAnd THIS works to have the autopilot try to keep the rocket pointed straight up no matter what:\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nimport krpc\nimport time\n\n\nconn = krpc.connect(name=\u0027Hello World\u0027)\nvessel = conn.space_center.active_vessel\nprint(vessel.name)\n\n\nvessel.auto_pilot.target_pitch_and_heading(90,90)\nvessel.auto_pilot.engage()\nvessel.control.throttle = 1\ntime.sleep(1)\nprint vessel.control.sas\nprint(\u0027Launch!\u0027)\nvessel.control.activate_next_stage()\u003C/pre\u003E\n\u003Cp\u003E\nIt\u0027s an either or situation. \u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sylink","CreatedById":54413,"CreatedDateTime":"2016-01-13T20:43:04Z","Content":"\n\u003Cp\u003E\nOk, I see how that works now. \u00A0But for me if I use that code on a rocket it launches etc then at about 1000m it always wobbles and tips over. \u00A0Is the auto pilot particularly slow/overreactive?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf I use the launch to orbit example and craft file it works perfectly but I think this is because it fits the rocket very well.\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-13T21:57:26Z","Content":"\n\u003Cp\u003E\nI haven\u0027t used it enough to know for sure. \u00A0I WOULD check first the usual cause for a rocket flipping over as it gathers speed- \u00A0make sure your rocket is aerodynamically stable to start with and that your TWR isn\u0027t too high to launch at full throttle without extreme aerodynamic forces.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe auto pilot has a lot of tunable parameters that I haven\u0027t played with so I can\u0027t give specific guidance, but if your rocket can launch by hand but not krpc, the answer is probably in some\u00A0setting of the max correction forces and pid parameters:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/python/api/space-center/auto-pilot.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://djungelorm.github.io/krpc/docs/python/api/space-center/auto-pilot.html\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-01-13T23:25:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222360511\u0022 data-ipsquote-contentid=\u002262902\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452717784\u0022 data-ipsquote-userid=\u002254413\u0022 data-ipsquote-username=\u0022sylink\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, sylink said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOk, I see how that works now. \u00A0But for me if I use that code on a rocket it launches etc then at about 1000m it always wobbles and tips over. \u00A0Is the auto pilot particularly slow/overreactive?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI suspect that the autopilot uses a PID controller (and perhaps you can even set the process variables but I haven\u0027t dug into that). It tends to react slow when your flight direction is close to what you want the autopilot to do, and more aggressively when the difference increases.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, let\u0027s say you pitch over 5\u00B0 for every km of altitude and you have a constant climb rate (I know, I know... but just to keep things simple!). In the beginning your\u0027re going straight up, now you\u0027re telling your autopilot \u0022pitch over 5\u00B0\u0022 at 1000m. Not a lot will happen. At 2000m you tell the autopilot \u0022pitch over 10\u00B0\u0022 and now the autopilot will steer a bit more aggressively, as your flight path has pitched, say, only 2\u00B0. By the time you\u0027ve pitched over 5\u00B0 you reach 3000m and you tell the autopilot \u0022Pitch 15\u00B0\u0022. By now it starts to turn rapidly, and you flip.\n\u003C/p\u003E\n\u003Cp\u003E\nThinking about that, maybe I should alter \u003Cem\u003Emy\u003C/em\u003E script with simply telling the autopilot to push a couple of degrees beyond the flight path, instead of sticking to fixed values.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Antipaten","CreatedById":108057,"CreatedDateTime":"2016-01-22T19:54:18Z","Content":"\n\u003Cp\u003E\nI don\u0027t know if I\u0027m doing something wrong, but when I started testing my control panel for real gaming I noticed that I had severe lag problems even with small rockets and it quickly became unplayable even at a modest part count.\n\u003C/p\u003E\n\u003Cp\u003E\nThe problem becomes less pronounced if I request less data from the game but it isn\u0027t until I disconnect completely from the RPC server that it becomes a noticable difference, even when I set delay between reads as high as 200ms. There is still some lag even if there are no connections at all to kRPC that is enough to make big ships unflyable.\n\u003C/p\u003E\n\u003Cp\u003E\nThis leads me to assume that something in the mod causes a delay in Unity and as it is single threaded it causes the entire game to stutter.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone else have the same problem?\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-23T07:07:33Z","Content":"\n\u003Cp\u003E\nHave you experimented with the advanced options in the control panel? I don\u0027t have it open right now but there\u0027s an option to only allow it to pass so many RPCs per game physics frame that might help you out? \u00A0Of course any code you execute in the game thread is going to slow the game thread a little, but I have found kRPC to be pretty solid even under some pretty intense load? \u00A0Way better than the other methods I\u0027ve played with to get data out. \u00A0What\u0027s your definition of a \u0027large rocket?\u0027 \u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-01-23T14:16:20Z","Content":"\n\u003Cp\u003E\nI agree with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/118388-artwhaley/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022118388\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/118388-artwhaley/\u0022\u003E@artwhaley\u003C/a\u003E, I\u0027ve not experienced (significant) delays through \u003Cem\u003EkRPC\u003C/em\u003E. You can delete the mod and see if that makes a difference, to eliminate or confirm that it\u0027s kRPC that is causing the lag.\n\u003C/p\u003E\n\u003Cp\u003E\nRunning KerboKatz, by any chance? I did when I ran KSP on my laptop as it really pushed the hardware to it\u0027s limit, and reducing framerates when KRPC is not active really helped keeping the temperature down. But at that point I did notice that, when switching to IDLE to run a launch script, KSP would run incredibly laggy... for the (once you realize it) obvious reason that the FSP limit kicks in once KSP is no longer active.\n\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2016-01-25T11:33:03Z","Content":"\n\u003Cp\u003E\nHey guys, I need a \u0022telemetry\u0022 logger, and I found kRPC which seems like it would do what I need.\n\u003C/p\u003E\n\u003Cp\u003E\nI wanna script a simple Python logger, but the question is: has anybody done that already? I don\u0027t want to duplicate efforts.\n\u003C/p\u003E\n\u003Cp\u003E\n[edit]\n\u003C/p\u003E\n\u003Cp\u003E\nOoookk, so here is a small script that can be used for logging a few values.\u003Cbr\u003E\nI used some values that are useful for \u0022reentry-debugging\u0022. I hope it\u0027s gonna be useful for someone:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://gist.github.com/fat-lobyte/4326afa551fa04dd028f\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://gist.github.com/fat-lobyte/4326afa551fa04dd028f\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-25T15:55:25Z\u0022 title=\u002201/25/2016 03:55  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 25, 2016\u003C/time\u003E by Kobymaru\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2016-01-25T15:50:50Z","Content":"\n\u003Cp\u003E\nHi, I\u0027m trying to read a flights \u0022sideslip\u0022 angle, but weirdly I get a value of about 57 (degrees?) when it has clearly no sideslip. This is more or less consistent.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this the correct value to read for sideslip? Are there any calculations to transform it into a \u0022real\u0022 value?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-25T16:15:10Z\u0022 title=\u002201/25/2016 04:15  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 25, 2016\u003C/time\u003E by Kobymaru\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-01-25T16:04:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222378563\u0022 data-ipsquote-contentid=\u002262902\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453737050\u0022 data-ipsquote-userid=\u0022107372\u0022 data-ipsquote-username=\u0022Kobymaru\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, Kobymaru said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOoookk, so here is a small script that can be used for logging a few values.\u003Cbr\u003E\nI used some values that are useful for \u0022reentry-debugging\u0022. I hope it\u0027s gonna be useful for someone:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://gist.github.com/fat-lobyte/4326afa551fa04dd028f\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://gist.github.com/fat-lobyte/4326afa551fa04dd028f\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you mind if, at one point, I take a stab at it? A lot of code is spent on writing the output, where utilizing the \u003Ci\u003Ecsv \u003C/i\u003Elibrary would be a good opportunity to cut some lines and get cleaner code.\n\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2016-01-25T16:22:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222378578\u0022 data-ipsquote-contentid=\u002262902\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453737855\u0022 data-ipsquote-userid=\u002278303\u0022 data-ipsquote-username=\u0022Kerbart\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, Kerbart said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo you mind if, at one point, I take a stab at it? A lot of code is spent on writing the output, where utilizing the \u003Ci\u003Ecsv \u003C/i\u003Elibrary would be a good opportunity to cut some lines and get cleaner code.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSure, go ahead!\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNote that if you take a closer look, \u0022a lot of code\u0022 is actually a single str.format() statement. But if there\u0027s a better way, that would be perfect.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat would be nice is \u0022user-configurable\u0022 columns, but the problem is that the values are split into vessel/flight/orbit parameters.\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-26T03:04:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222378563\u0022 data-ipsquote-contentid=\u002262902\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453737050\u0022 data-ipsquote-userid=\u0022107372\u0022 data-ipsquote-username=\u0022Kobymaru\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, Kobymaru said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi, I\u0027m trying to read a flights \u0022sideslip\u0022 angle, but weirdly I get a value of about 57 (degrees?) when it has clearly no sideslip. This is more or less consistent.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this the correct value to read for sideslip? Are there any calculations to transform it into a \u0022real\u0022 value?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think you found a minor bug! \u00A0I just submitted a pull request that I THINK fixes it. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll PM you a temporarily fixed krpcspacecenter.dll to drop into your gamedata/krpc directory and overwrite the existing one there, in case you need it before the next release and don\u0027t have a build environment setup yourself! \u00A0Of course djungleorm is smarter than me, so he may point out that mix fix isn\u0027t as clever as I think it is and come up with a better one... so... \u00A0don\u0027t shoot me if it\u0027s not brilliant, but it passed my quick test.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2016-01-26T06:11:37Z","Content":"\n\u003Cp\u003E\nYep you found a bug! I\u0027ve merged the fix, and will release it with 0.2.0 very very very soon....\n\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2016-01-26T08:10:57Z","Content":"\n\u003Cp\u003E\nVersion 0.2.0 has been released!\n\u003C/p\u003E\n\u003Cp\u003E\nThe changes are:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nA C# client. \u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/csharp/client.html\u0022 rel=\u0022external nofollow\u0022\u003ERead more here\u003C/a\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nUpdated the server and client libraries to use protobuf version 3\n\u003C/li\u003E\n\u003Cli\u003E\nLicensing changes:\n\u003Cul\u003E\u003Cli\u003E\nAll the client libraries are now LGPLv3\n\u003C/li\u003E\n\u003Cli\u003E\nThe server plugins are also LGPLv3, except KRPC.SpaceCenter.dll which is GPL (as it contains GPL\u0027d code from other mods)\n\u003C/li\u003E\n\u003Cli\u003E\nThe .proto definition files are MIT licensed, so you can use them to communicate from your own code without being forced to use a particular license\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nSupport for resource harvesters and converters (thanks \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/118388-artwhaley/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022118388\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/118388-artwhaley/\u0022\u003E@artwhaley\u003C/a\u003E!!)\n\u003C/li\u003E\n\u003Cli\u003E\nFixed bugs with:\n\u003Cul\u003E\u003Cli\u003E\nVessel.HorizontalSpeed\n\u003C/li\u003E\n\u003Cli\u003E\nFlight.SideslipAngle\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAlso, this version is not backwards compatible with 0.1.* due to the update to use protobuf version 3, hence the bump to version 0.2.\n\u003C/p\u003E\n\u003Cp\u003E\nThe build system has also been completely rewritten to use \u003Ca href=\u0022http://bazel.io\u0022 rel=\u0022external nofollow\u0022\u003EBazel\u003C/a\u003E - the Makefiles were getting too hard to maintain with the sheer number of different languages needing to be compiled and packages built (protoc, C#, C\u002B\u002B, Python, Lua, sphinx, pypi, nuget, luarocks ... the list goes on). The build instructions have been updated accordingly in the docs: \u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/compiling.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://djungelorm.github.io/krpc/docs/compiling.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-26T08:16:35Z\u0022 title=\u002201/26/2016 08:16  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 26, 2016\u003C/time\u003E by djungelorm\u003C/strong\u003E\n\u003Cbr\u003Ecomment on build system\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2016-01-26T08:48:59Z","Content":"\n\u003Cp\u003E\nI\u0027ve added a thread to the add-on release forum, here: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/130742-105-krpc-remote-control-your-ships-using-python-c-c-lua-v020-25th-jan-2016/\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/130742-105-krpc-remote-control-your-ships-using-python-c-c-lua-v020-25th-jan-2016/\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-26T09:20:45Z","Content":"\n\u003Cp\u003E\nAwesome progress! \u00A0If there\u0027s anything else I can help with, don\u0027t hesitate to ask!\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-26T11:00:53Z","Content":"\n\u003Cp\u003E\nI\u0027m having trouble with the new version? \u00A0I\u0027ve tried with both c# and then with Python.... so it\u0027s probably something I\u0027m doing wrong.\u00A0\u00A0 on C# I tried the code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nusing KRPC.Client.Services.SpaceCenter;\n\nnamespace ConsoleApplication1\n{\n    class Program\n    {\n        static void Main()\n        {\n            var connection = new KRPC.Client.Connection(name: \u0022Vessel Name\u0022);\n            var sc = connection.SpaceCenter();\n            var vessel = sc.ActiveVessel;\n            System.Console.WriteLine(vessel.Name);\n\n        }\n    }\n}\u003C/pre\u003E\n\u003Cp\u003E\nI loaded KSP, started the server and configured for auto accept connections, launched a vessel, then ran my code (attempted both with and without debugging)\u00A0And got the error:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\nUnhandled Exception: KRPC.Client.RPCException: Could not load file or assembly \u0027kRPCSpaceCenter, Version=0.1.12.0, Culture=neutral, PublicKeyToken=null\u0027 or one of its dependencies.\n   at KRPC.Client.Connection.Invoke(String service, String procedure, IList\u00601 arguments)\n   at KRPC.Client.Services.SpaceCenter.Service.get_ActiveVessel()\n   at ConsoleApplication1.Program.Main() in C:\\Users\\art\\Documents\\GitHubVisualStudio\\ksptesting\\ConsoleApplication1\\ConsoleApplication1\\Program.cs:line 16\nPress any key to continue . . .\n\n\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSo I thought I\u0027d switch to Python and double check myself, and then... \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I run the python setup script... \u00A0I get an error on line 7 about\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003ETraceback (most recent call last):\n\u00A0 File \u0022C:\\krpc-0.2.0\\setup.py\u0022, line 7, in \u003C/span\u003E\u003Cspan\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\u003Cspan\u003E\n\u00A0 \u00A0 del os.link\nAttributeError: link\n\u0026gt;\u0026gt;\u0026gt;\u00A0\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIf I comment that line out, the script runs without further error, but the first time I try to import krpc in idle I get this :\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003ETraceback (most recent call last):\n\u00A0 File \u0022\u003C/span\u003E\u003Cspan\u003E\u0026lt;pyshell\u003C/span\u003E\u003Cspan\u003E#0\u003C/span\u003E\u003Cspan\u003E\u0026gt;\u003C/span\u003E\u003Cspan\u003E\u0022, line 1, in \u003C/span\u003E\u003Cspan\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\u003Cspan\u003E\n\u00A0 \u00A0 import krpc\n\u00A0 File \u0022C:\\Python27\\lib\\site-packages\\krpc\\__init__.py\u0022, line 3, in \u003C/span\u003E\u003Cspan\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\u003Cspan\u003E\n\u00A0 \u00A0 from krpc.client import Client\n\u00A0 File \u0022C:\\Python27\\lib\\site-packages\\krpc\\client.py\u0022, line 8, in \u003C/span\u003E\u003Cspan\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\u003Cspan\u003E\n\u00A0 \u00A0 import krpc.schema.KRPC\n\u00A0 File \u0022C:\\Python27\\lib\\site-packages\\krpc\\schema\\KRPC.py\u0022, line 22, in \u003C/span\u003E\u003Cspan\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\u003Cspan\u003E\n\u00A0 \u00A0 serialized_pb=_b(\u0027\\n\\x13protobuf/krpc.proto\\x12\\x0bkrpc.schema\\\u0022W\\n\\x07Request\\x12\\x0f\\n\\x07service\\x18\\x01 \\x01(\\t\\x12\\x11\\n\\tprocedure\\x18\\x02 \\x01(\\t\\x12(\\n\\targuments\\x18\\x03 \\x03(\\x0b\\x32\\x15.krpc.schema.Argument\\\u0022\u002B\\n\\x08\\x41rgument\\x12\\x10\\n\\x08position\\x18\\x01 \\x01(\\r\\x12\\r\\n\\x05value\\x18\\x02 \\x01(\\x0c\\\u0022j\\n\\x08Response\\x12\\x0c\\n\\x04time\\x18\\x01 \\x01(\\x01\\x12\\x11\\n\\thas_error\\x18\\x02 \\x01(\\x08\\x12\\r\\n\\x05\\x65rror\\x18\\x03 \\x01(\\t\\x12\\x18\\n\\x10has_return_value\\x18\\x04 \\x01(\\x08\\x12\\x14\\n\\x0creturn_value\\x18\\x05 \\x01(\\x0c\\\u0022?\\n\\rStreamMessage\\x12.\\n\\tresponses\\x18\\x01 \\x03(\\x0b\\x32\\x1b.krpc.schema.StreamResponse\\\u0022E\\n\\x0eStreamResponse\\x12\\n\\n\\x02id\\x18\\x01 \\x01(\\r\\x12\\\u0027\\n\\x08response\\x18\\x02 \\x01(\\x0b\\x32\\x15.krpc.schema.Response\\\u00222\\n\\x08Services\\x12\u0026amp;\\n\\x08services\\x18\\x01 \\x03(\\x0b\\x32\\x14.krpc.schema.Service\\\u0022\\xaf\\x01\\n\\x07Service\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12*\\n\\nprocedures\\x18\\x02 \\x03(\\x0b\\x32\\x16.krpc.schema.Procedure\\x12#\\n\\x07\\x63lasses\\x18\\x03 \\x03(\\x0b\\x32\\x12.krpc.schema.Class\\x12.\\n\\x0c\\x65numerations\\x18\\x04 \\x03(\\x0b\\x32\\x18.krpc.schema.Enumeration\\x12\\x15\\n\\rdocumentation\\x18\\x05 \\x01(\\t\\\u0022\\x9e\\x01\\n\\tProcedure\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12*\\n\\nparameters\\x18\\x02 \\x03(\\x0b\\x32\\x16.krpc.schema.Parameter\\x12\\x17\\n\\x0fhas_return_type\\x18\\x03 \\x01(\\x08\\x12\\x13\\n\\x0breturn_type\\x18\\x04 \\x01(\\t\\x12\\x12\\n\\nattributes\\x18\\x05 \\x03(\\t\\x12\\x15\\n\\rdocumentation\\x18\\x06 \\x01(\\t\\\u0022_\\n\\tParameter\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12\\x0c\\n\\x04type\\x18\\x02 \\x01(\\t\\x12\\x1c\\n\\x14has_default_argument\\x18\\x03 \\x01(\\x08\\x12\\x18\\n\\x10\\x64\\x65\\x66\\x61ult_argument\\x18\\x04 \\x01(\\x0c\\\u0022,\\n\\x05\\x43lass\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12\\x15\\n\\rdocumentation\\x18\\x02 \\x01(\\t\\\u0022a\\n\\x0b\\x45numeration\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12-\\n\\x06values\\x18\\x02 \\x03(\\x0b\\x32\\x1d.krpc.schema.EnumerationValue\\x12\\x15\\n\\rdocumentation\\x18\\x03 \\x01(\\t\\\u0022F\\n\\x10\\x45numerationValue\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12\\r\\n\\x05value\\x18\\x02 \\x01(\\x05\\x12\\x15\\n\\rdocumentation\\x18\\x03 \\x01(\\t\\\u0022\\x15\\n\\x04List\\x12\\r\\n\\x05items\\x18\\x01 \\x03(\\x0c\\\u0022;\\n\\nDictionary\\x12-\\n\\x07\\x65ntries\\x18\\x01 \\x03(\\x0b\\x32\\x1c.krpc.schema.DictionaryEntry\\\u0022-\\n\\x0f\\x44ictionaryEntry\\x12\\x0b\\n\\x03key\\x18\\x01 \\x01(\\x0c\\x12\\r\\n\\x05value\\x18\\x02 \\x01(\\x0c\\\u0022\\x14\\n\\x03Set\\x12\\r\\n\\x05items\\x18\\x01 \\x03(\\x0c\\\u0022\\x16\\n\\x05Tuple\\x12\\r\\n\\x05items\\x18\\x01 \\x03(\\x0c\\\u0022\\xf4\\x03\\n\\x06Status\\x12\\x0f\\n\\x07version\\x18\\x01 \\x01(\\t\\x12\\x12\\n\\nbytes_read\\x18\\x02 \\x01(\\x04\\x12\\x15\\n\\rbytes_written\\x18\\x03 \\x01(\\x04\\x12\\x17\\n\\x0f\\x62ytes_read_rate\\x18\\x04 \\x01(\\x02\\x12\\x1a\\n\\x12\\x62ytes_written_rate\\x18\\x05 \\x01(\\x02\\x12\\x15\\n\\rrpcs_executed\\x18\\x06 \\x01(\\x04\\x12\\x10\\n\\x08rpc_rate\\x18\\x07 \\x01(\\x02\\x12\\x1a\\n\\x12one_rpc_per_update\\x18\\x08 \\x01(\\x08\\x12\\x1b\\n\\x13max_time_per_update\\x18\\t \\x01(\\r\\x12\\x1d\\n\\x15\\x61\\x64\\x61ptive_rate_control\\x18\\n \\x01(\\x08\\x12\\x15\\n\\rblocking_recv\\x18\\x0b \\x01(\\x08\\x12\\x14\\n\\x0crecv_timeout\\x18\\x0c \\x01(\\r\\x12\\x1b\\n\\x13time_per_rpc_update\\x18\\r \\x01(\\x02\\x12 \\n\\x18poll_time_per_rpc_update\\x18\\x0e \\x01(\\x02\\x12 \\n\\x18\\x65xec_time_per_rpc_update\\x18\\x0f \\x01(\\x02\\x12\\x13\\n\\x0bstream_rpcs\\x18\\x10 \\x01(\\r\\x12\\x1c\\n\\x14stream_rpcs_executed\\x18\\x11 \\x01(\\x04\\x12\\x17\\n\\x0fstream_rpc_rate\\x18\\x12 \\x01(\\x02\\x12\\x1e\\n\\x16time_per_stream_update\\x18\\x13 \\x01(\\x02\\x42\\x13\\xaa\\x02\\x10KRPC.Schema.KRPCb\\x06proto3\u0027)\nTypeError: __init__() got an unexpected keyword argument \u0027syntax\u0027\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI\u0027m running KSP 1.0.5 on Windows 10 64 bit with Python 2.7 and Visual Studio 2015. \u00A0I linked the c# library in via Visual Studio\u0027s \u0027manage Nuget Packages\u0027 feature, if any of that is relevant.\n\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2016-01-26T11:10:11Z","Content":"\n\u003Cp\u003E\nAre you\u00A0sure you\u0027ve updated the server to 0.2.0? The error message from the C# client mentions kRPCSpaceCenter version 0.1.12.\n\u003C/p\u003E\n\u003Cp\u003E\nFor python, what version of protobuf do you have installed? I think that is caused by using protobuf 2. You need protobuf\u00A03.0.0-beta2\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-26T11:15:00Z\u0022 title=\u002201/26/2016 11:15  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 26, 2016\u003C/time\u003E by djungelorm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Antipaten","CreatedById":108057,"CreatedDateTime":"2016-01-26T12:22:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222375382\u0022 data-ipsquote-contentid=\u002262902\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453532853\u0022 data-ipsquote-userid=\u0022118388\u0022 data-ipsquote-username=\u0022artwhaley\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2016-01-23 at 8:07 AM, artwhaley said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHave you experimented with the advanced options in the control panel? I don\u0027t have it open right now but there\u0027s an option to only allow it to pass so many RPCs per game physics frame that might help you out? \u00A0Of course any code you execute in the game thread is going to slow the game thread a little, but I have found kRPC to be pretty solid even under some pretty intense load? \u00A0Way better than the other methods I\u0027ve played with to get data out. \u00A0What\u0027s your definition of a \u0027large rocket?\u0027 \u00A0\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nA small rocket is around 30 parts and a large is around 100. I get short \u0022red lag\u0022 even without clients connected and no phys acceleration. Without the mod i can use 2x phys acceleration with green figures for the same (low part count) ship.\n\u003C/p\u003E\n\u003Cp\u003E\nHopefully this will sort itself out when KSP 1.1 is released and we get the multihreading Unity5. Single threading is a real P.I.T.A as it is virtually impossible to throw better hardware on performance problems. I just wondered if anyone had encountered it and knew if I\u0027ve done something silly in the settings. They are pretty much vanilla except for starting the server automatically and auto accepting clients. I didn\u0027t notice the lag until I really tried running the game for real using my control panel. The panel emulates joysticks for input to the game and only uses kRPC for reading fuel levels, acceleration, atmospheric density and mach number from the game every 200 ms.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-26T12:35:38Z\u0022 title=\u002201/26/2016 12:35  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 26, 2016\u003C/time\u003E by Antipaten\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-26T19:37:54Z","Content":"\n\u003Cp\u003E\nI think the problem with c# might have been that I didn\u0027t delete my krpc-mechjeb dll that was in the folder, and it was compiled against the old version? \u00A0I don\u0027t KNOW that this was the problem, but deleting the directory and then unpacking it freshly from the 2.0 .zip file DID fix my c# problem! \u00A0So, I\u0027m going to be playing with that a lot the next couple of days! \u00A0 Reinstalling the server did NOT fix my python problem? \u00A0I still have to comment out the del os.link line to make the setup script run at all, and then afterwards \u0027import krpc\u0027 throws that same massive error from before. \u00A0Is it compatible with python 2.7? \u00A0Anything you\u0027d like me to test? \u00A0Other versions of python? \u00A0Alternative install methods? \u00A0I\u0027ll download it on my linux box later tonight and see if I have the same problems there....\n\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2016-01-26T21:34:36Z","Content":"\n\u003Cp\u003E\nGlad to hear you got C# working!\n\u003C/p\u003E\n\u003Cp\u003E\nI must admit I didn\u0027t try the python client on windows. The os.link thing sounds like a windows\u00A0only problem with the installer. I added it to get the Bazel build system to work, it isn\u0027t needed otherwise so is safe to comment out.\n\u003C/p\u003E\n\u003Cp\u003E\nIt is compatible with python 2.7 (and 3). I think the issue is the version of protobuf\u00A0you have installed. The installer should update this when you use pip or setup.py but maybe it didn\u0027t...\u00A0Can you post the output of the following to check?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nimport google.protobuf\n\u003C/p\u003E\n\u003Cp\u003E\nprint google.protobuf.__version__\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYou should see 3.0.0b2\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2016-01-26T21:51:10Z","Content":"\n\u003Cp\u003E\nYou called it - \u00A0it reports \u00A0\u00223.0.0-alpha-1\u0022. \u00A0 \u00A0Do you want me to go ahead and try to update it manually and see if that fixes it, or leave it out of date so I can help test a new version of the setup script if you think it\u0027s something that needs fiddled with?\n\u003C/p\u003E\n"}]}