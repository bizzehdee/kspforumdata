{"TopicId":218457,"ForumId":200,"TopicTitle":"Vessel loses its tree structure on reroot to clamp-o-tron jr.","CreatedByName":"Haustvindr","CreatedById":218813,"CreatedDateTime":"2023-07-16T17:23:11Z","PageNum":1,"Articles":[{"CreatedByName":"Haustvindr","CreatedById":218813,"CreatedDateTime":"2023-07-16T17:23:11Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EReported Version:\u003C/strong\u003E\u00A0v0.1.3.2 (latest) |\u00A0\u003Cstrong\u003EMods:\u00A0\u003C/strong\u003Enone | \u003Cstrong\u003ECan replicate without mods?\u003C/strong\u003E Yes\u00A0\u003Cbr\u003E\n\u003Cstrong\u003EOS:\u003C/strong\u003E\u00A0Windows 10 (latest) | \u003Cstrong\u003ECPU:\u003C/strong\u003E\u00A0Intel Core i7 7700k | \u003Cstrong\u003EGPU:\u003C/strong\u003E\u00A0Asus Strix 4080 | \u003Cstrong\u003ERAM\u003Cspan\u003E:\u00A0\u003C/span\u003E\u003C/strong\u003E32gb DDR4 3600mhz\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI was fiddling around with an ion \u0022coffin\u0022 type of micro vessel. It has some amount of rotated and displaced parts. Everything is fine on its own in the editor, and can load fine from its save.\n\u003C/p\u003E\n\u003Cp\u003E\nBut, when changing the root part to a clamp-o-tron jr. docking port, it becomes disjointed in several subassemblies on load. This happens either on loading the vessel in the editor or loading the vessel for launch. When loading in the editor, the parts appear in the ground.\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems that the code path for saving or loading destroys the tree, but only if the root part is said docking port. It can save and load correctly if the root part is not changed.\n\u003C/p\u003E\n\u003Cp\u003E\nI can reproduce this bug every time with this micro vessel, it\u0027s not a one-off random one.\n\u003C/p\u003E\n\u003Cp\u003E\nAttached:\u00A0 a zip with the micro vessel with the root elsewhere, and a zip with the micro vessel rerooted to the clamp-o-tron jr.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EIncluded Attachments:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 alt=\u0022Capturadepantalla(82).png.3b0acf50c9db5217f05ea302ef302be2.png\u0022 src=\u0022https://forum.kerbalspaceprogram.com/uploads/monthly_2023_07/Capturadepantalla(82).png.3b0acf50c9db5217f05ea302ef302be2.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/cfield.php?storage=form_Fields\u0026amp;path=Strollerminitest.zip\u0026amp;fileKey=%5B!AES128GCM%5BC3bhyQ8Fh3iTc5J6pauHaQxufhu5osuoGZBxG6Y5Q1wKlGLx9Pv/oItxG3MkkDmarJte2eYG0naNgCQWiGMp1maU6uvR%5D%5B00c0fafdfbc3f23658894835%5D%5B655cecb45062412428fb5326e0ca411f%5D%5D\u0022 rel=\u0022\u0022\u003EStrollerminitest.zip\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-07-16T22:02:14Z\u0022 title=\u002207/16/2023 10:02  PM\u0022 data-short=\u0022Jul 16\u0022\u003EJuly 16, 2023\u003C/time\u003E by Anth12\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Haustvindr","CreatedById":218813,"CreatedDateTime":"2023-07-18T06:12:44Z","Content":"\n\u003Cp\u003E\nI can confirm that the parts tree gets messed even if the reroot occurs later. Say, you attach the vessel to a launcher as-is, get to orbit and then separate. Upon separation nothing seems wrong even if now the new root is the docking port, but if you save and reload at that point some parts become displaced or disconnected.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try to get some time in the weekend to test with different root parts, maybe it is related to a part family instead of a unique one (e.g. all docking ports instead of just the jr. one).\n\u003C/p\u003E\n"}]}