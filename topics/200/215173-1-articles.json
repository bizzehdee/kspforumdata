{"TopicId":215173,"ForumId":200,"TopicTitle":"Surface Rendering Fragment Shaders Are Inefficient","CreatedByName":"Timmons","CreatedById":227897,"CreatedDateTime":"2023-03-16T21:16:54Z","PageNum":1,"Articles":[{"CreatedByName":"Timmons","CreatedById":227897,"CreatedDateTime":"2023-03-16T21:16:54Z","Content":"\n\u003Cp\u003E\nI am going to link to my posts on twitter here:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther\u0022\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedid=\u0022embed7442686711\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=https://twitter.com/NicholasTimmons/status/1629522834677530625\u0022 style=\u0022height:741px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nAnd:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther\u0022\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedid=\u0022embed7443050496\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=https://twitter.com/NicholasTimmons/status/1630311732009750529\u0022 style=\u0022height:544px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThis hasn\u0027t been touched in the latest patch and it is the major bottleneck as far as I can tell when profiling.\n\u003C/p\u003E\n\u003Cp\u003E\nThere are other instances of bad expensive shaders too.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn Renderdoc for some of these, if you replace them with a fixed colour it doesn\u0027t really impact the overall look or change much (specifically the write to the big bad RGBA32 textures at the space centre which seem to not be correctly packed?)\n\u003C/p\u003E\n\u003Cp\u003E\nTried running latest patch on all low. Seeing the same problems.\n\u003C/p\u003E\n\u003Cp\u003E\nAre the devs actually aware of this?\n\u003C/p\u003E\n\u003Cp\u003E\nBecause when replace the shader in renderdoc (or hide the planet) I get a happy 120fps.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Timmons","CreatedById":227897,"CreatedDateTime":"2023-04-09T22:03:14Z","Content":"\n\u003Cp\u003E\nAny news on an update on this?\n\u003C/p\u003E\n"},{"CreatedByName":"ocelottagames","CreatedById":229535,"CreatedDateTime":"2023-08-30T19:21:03Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EReported Version:\u003C/strong\u003E\u00A0v0.1.4 (latest) |\u00A0\u003Cstrong\u003EMods:\u00A0\u003C/strong\u003Enone | \u003Cstrong\u003ECan replicate without mods?\u003C/strong\u003E Yes\u00A0\u003Cbr\u003E\n\u003Cstrong\u003EOS:\u003C/strong\u003E\u00A0Windows 10 | \u003Cstrong\u003ECPU:\u003C/strong\u003E\u00A0AMD Ryzen 5 3600 | \u003Cstrong\u003EGPU:\u003C/strong\u003E\u00A0NVIDIA GeForce GTX 1070 | \u003Cstrong\u003ERAM\u003Cspan\u003E:\u00A0\u003C/span\u003E\u003C/strong\u003E16GB\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe closer my vessel is to a celestial body, the lower my framerate is while that celestial body is in view.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-08-30T20:02:15Z\u0022 title=\u002208/30/2023 08:02  PM\u0022 data-short=\u0022Aug 30\u0022\u003EAugust 30, 2023\u003C/time\u003E by Anth12\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dandoesstuff","CreatedById":223454,"CreatedDateTime":"2023-08-31T07:21:54Z","Content":"\n\u003Cp\u003E\nthis is due to the terrain system i think. they\u0027re working on a new terrain system called CBT or something like that i forgot\n\u003C/p\u003E\n"},{"CreatedByName":"Jockel","CreatedById":131418,"CreatedDateTime":"2023-08-31T07:27:15Z","Content":"\n\u003Cp\u003E\nthis is literally the known issue in the patch notes\n\u003C/p\u003E\n"},{"CreatedByName":"Vortygont","CreatedById":223549,"CreatedDateTime":"2023-08-31T07:32:24Z","Content":"\n\u003Cp\u003E\nIt often appeared when craft gained altitude in atmosphere. It disappeared when I switched to map view and back\n\u003C/p\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2023-08-31T22:10:14Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/profile/227897-timmons/?do=hovercard\u0022 data-mentionid=\u0022227897\u0022 href=\u0022https://forum.kerbalspaceprogram.com/profile/227897-timmons/\u0022 rel=\u0022\u0022\u003E@Timmons\u003C/a\u003E\u00A0Pulled this bug report out of the archive.\n\u003C/p\u003E\n"},{"CreatedByName":"Vortygont","CreatedById":223549,"CreatedDateTime":"2023-09-01T09:34:28Z","Content":"\n\u003Cp\u003E\nThanks for research, I believe this can significaly improve game perfomance!\n\u003C/p\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2023-09-01T12:28:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224317743\u0022 data-ipsquote-contentid=\u0022219074\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221693466835\u0022 data-ipsquote-userid=\u0022131418\u0022 data-ipsquote-username=\u0022Jockel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/31/2023 at 7:27 PM, Jockel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthis is literally the known issue in the patch notes\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes. And reporting this as a bug is also a good idea, especially for upvoting purposes.\n\u003C/p\u003E\n"},{"CreatedByName":"dandoesstuff","CreatedById":223454,"CreatedDateTime":"2023-09-02T16:40:29Z","Content":"\n\u003Cp\u003E\nlets upvote this report! MOAR PERFORMANCE!\n\u003C/p\u003E\n"},{"CreatedByName":"Vortygont","CreatedById":223549,"CreatedDateTime":"2023-09-02T23:15:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224318757\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221693672829\u0022 data-ipsquote-userid=\u0022223454\u0022 data-ipsquote-username=\u0022Dandoesstuff\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Dandoesstuff said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nlets upvote this report! MOAR PERFORMANCE!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAgree\n\u003C/p\u003E\n"},{"CreatedByName":"kennyc222","CreatedById":209626,"CreatedDateTime":"2023-09-03T00:47:48Z","Content":"\n\u003Cp\u003E\nyeah! The game is still scattering every few seconds after the update 0.1.40! Before this, the game ran so smoothly! I have an NV 3060 Grahpic card with intel 10700 2.5 GHz with 32 GB of RAM\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"kennyc222","CreatedById":209626,"CreatedDateTime":"2023-09-04T04:47:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224317742\u0022 data-ipsquote-contentid=\u0022219074\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221693466514\u0022 data-ipsquote-userid=\u0022223454\u0022 data-ipsquote-username=\u0022Dandoesstuff\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/31/2023 at 5:21 PM, Dandoesstuff said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthis is due to the terrain system i think. they\u0027re working on a new terrain system called CBT or something like that i forgot\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nyeah! Before v0.1.4.0, everything goes so smooth..but after the patch, it keeps scattering everytime i play! Even if no ships in the campaign!\n\u003C/p\u003E\n"},{"CreatedByName":"Spicat","CreatedById":228085,"CreatedDateTime":"2023-09-10T16:03:40Z","Content":"\n\u003Cp\u003E\nI also like the answer to your tweet by GamesLinx (Parallax modder):\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther\u0022 contenteditable=\u0022false\u0022\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedid=\u0022embed7415913735\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=https://twitter.com/Gameslinx_/status/1629612838183370754\u0022 style=\u0022height:529px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n"},{"CreatedByName":"Vortygont","CreatedById":223549,"CreatedDateTime":"2023-09-17T10:52:16Z","Content":"\n\u003Cp\u003E\nDoes somebody think that framerate downgrade in atmosphere and in low orbit is memory leak? Because it looks like memory leek for me but I don\u0027t have evidence\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-09-17T10:54:59Z\u0022 title=\u002209/17/2023 10:54  AM\u0022 data-short=\u0022Sep 17\u0022\u003ESeptember 17, 2023\u003C/time\u003E by Vortygont\u003C/strong\u003E\n\u003Cbr\u003EReports 6 and 16 were merged\n\u003C/span\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2023-09-17T12:36:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224318059\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221693519814\u0022 data-ipsquote-userid=\u0022161238\u0022 data-ipsquote-username=\u0022Anth12\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/31/2023 at 6:10 PM, Anth12 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/profile/227897-timmons/?do=hovercard\u0022 data-mentionid=\u0022227897\u0022 href=\u0022https://forum.kerbalspaceprogram.com/profile/227897-timmons/\u0022 rel=\u0022\u0022\u003E@Timmons\u003C/a\u003E\u00A0Pulled this bug report out of the archive.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLink?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224323259\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221694947936\u0022 data-ipsquote-userid=\u0022223549\u0022 data-ipsquote-username=\u0022Vortygont\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Vortygont said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes somebody think that framerate downgrade in atmosphere and in low orbit is memory leak? Because it looks like memory leek for me but I don\u0027t have evidence\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWorse, I bet it is that nasty geometry buffer GPU memory leak.\n\u003C/p\u003E\n\u003Cp\u003E\nSlow memory leaks in the CPU-Side are often able to be cleaned up by the GC, or at worst the OS can throw them into VM.\u00A0\u003Cbr\u003E\nThe GPU typically has no such options.\u003Cbr\u003E\n\u003Cbr\u003E\nI understand if this is legacy code from a previous project and they are going to declare critical mass on this.\u00A0 They might want to hurry up if this is the case.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-09-17T12:40:18Z\u0022 title=\u002209/17/2023 12:40  PM\u0022 data-short=\u0022Sep 17\u0022\u003ESeptember 17, 2023\u003C/time\u003E by Ruedii\u003C/strong\u003E\n\u003Cbr\u003EMoar Details\n\u003C/span\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2023-09-17T21:52:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224323287\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221694954165\u0022 data-ipsquote-userid=\u002257704\u0022 data-ipsquote-username=\u0022Ruedii\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Ruedii said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLink?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt was in the Archive which is located here: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/forum/165-ksp2-bug-reports-archive/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/forum/165-ksp2-bug-reports-archive/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Infinite Aerospace","CreatedById":230192,"CreatedDateTime":"2023-09-18T16:28:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224319225\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221693802854\u0022 data-ipsquote-userid=\u0022209626\u0022 data-ipsquote-username=\u0022kennyc222\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/4/2023 at 5:47 AM, kennyc222 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nyeah! Before v0.1.4.0, everything goes so smooth..but after the patch, it keeps scattering everytime i play! Even if no ships in the campaign!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nKenny, do you get sudden and incredibly profound drops in frame rate? I\u0027m experiencing similar problem going from low 40 FPS to 1 - 4 FPS.\n\u003C/p\u003E\n"},{"CreatedByName":"kennyc222","CreatedById":209626,"CreatedDateTime":"2023-09-19T02:25:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224323591\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221695054531\u0022 data-ipsquote-userid=\u0022230192\u0022 data-ipsquote-username=\u0022Infinite Aerospace\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Infinite Aerospace said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKenny, do you get sudden and incredibly profound drops in frame rate? I\u0027m experiencing similar problem going from low 40 FPS to 1 - 4 FPS.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI know! It happens once every 10 - 20 seconds for keep frustrating between 60 - 1 FPS in the entire campaign...even if no ships around!\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Infinite Aerospace","CreatedById":230192,"CreatedDateTime":"2023-09-19T07:08:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224323685\u0022 data-ipsquote-contentid=\u0022215173\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221695090351\u0022 data-ipsquote-userid=\u0022209626\u0022 data-ipsquote-username=\u0022kennyc222\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, kennyc222 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI know! It happens once every 10 - 20 seconds for keep frustrating between 60 - 1 FPS in the entire campaign...even if no ships around!\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt doesn\u0027t happen that often for me like, I get it just on the initial ascent to orbit, it\u0027ll be fine then the frame-rate will tank, and then it\u0027ll be alright again.\n\u003C/p\u003E\n"}]}