{"TopicId":101822,"ForumId":15,"TopicTitle":"Docking ports and part triggers","CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-12T19:04:03Z","PageNum":1,"Articles":[{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-12T19:04:03Z","Content":"Hi all,\n\nI am trying to decypher docking ports. I imported the clamp-o-tron senior port into Blender and can see that I need a dockingNode transform, and I see the collider for the disk shape, but I am puzzled by the small cylinder that is perpendicular to the part. It appears to be a collider... Do docking ports need a part trigger? If so, what tag should I use in Unity, if any?"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-03-12T19:41:31Z","Content":"It may be best to post a screenshot.\n\nThat being said, based on my experiences in making docking ports, yes, that is most definitely a collider, but no, it doesn\u0027t need to be a part trigger - just make sure the collider is convex, and you\u0027ll be good to go."},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-13T03:29:10Z","Content":"Sorry about that, I was at work. Ok, I restarted Blender and re-imported the clamp-o-tron sr. This is what I see:\n\n![uNygri1.png](http://i.imgur.com/uNygri1.png)\n\nTurns out the cylinder I saw was a leftover from other part imports. But, I\u0027m definitely having trouble getting my docking port to work. What I\u0027m finding is that the port won\u0027t engage, meaning the magnets won\u0027t pull the craft together, and the two crafts won\u0027t join together. I\u0027m not sure what the issue is. Here is what the part looks like in Unity:\n\n![GbmMZ0k.png](http://i.imgur.com/GbmMZ0k.png)\n\nAnd here is the collider:\n\n![K3AFYBY.png](http://i.imgur.com/K3AFYBY.png)\n\nWhen I use MechJeb to auto-dock, the craft orients correctly (nose forward), and attempts to dock with the corresponding port. it looks like NavyFish\u0027s Docking Port Alignment Indicator agrees:\n\n![yH9lRCS.png](http://i.imgur.com/yH9lRCS.png)\n\nI\u0027m using the Module code from the clamp-o-tron sr port exactly:\n\nMODULE\n\n{\n\n name = ModuleDockingNode\n\n referenceAttachNode = top\n\n nodeType = size2\n\n}\n\nAnd my attach nodes:\n\nnode\\_stack\\_top = 0.0, 0.12, 0.0, 0.0, 1.0, 0.0, 2\n\nnode\\_stack\\_bottom = 0.0, -0.12, 0.0, 0.0, 1.0, 0.0, 2\n\nnode\\_attach = 0.0, -0.12, 0.0, 0.0, -1.0, 0.0\n\nand attach rules:\n\n// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\n\nattachRules = 1,1,1,1,0\n\nAny ideas about what I\u0027m doing wrong? Does the dockingNode transform need a particular orientation I\u0027m missing?\n\nThanks for the help! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-03-13T03:31:15Z\u0022 title=\u002203/13/2015 03:31  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 13, 2015\u003C/time\u003E by Angel-125**"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-13T05:02:40Z","Content":"dockingNode has to be slightly outside of the collider box or the collider will prevent the two dockingNode transforms from reaching each other, and game tries to pull them together forever but never fully docks. or if your dockingNode is too far inside of collider, collider will prevent the node from getting close enough for the magnetic force to kick in at all, and it just looks as if the docking port doesn\u0027t work. \n\nI find the ideal way is place the dockingNode flush with the top of visible docking ring, and position the collider slightly below the visible mesh. when the port is docked, the visible mesh clips slightly into the other port so you don\u0027t have a tiny gap between them.\n\nthere are some additional parameters you can adjust as well\n\n    nodeTransformName =           \tcontrolTransformName = \tundockEjectionForce = 10f;          //how hard the base pushes the undocking vessel when undocking. Haven\u0027t tested.\tminDistanceToReEngage = 1f;     //how far you have to back away before attempting to redock\tacquireRange = 0.5f;                 //how close before magnetic force kicks in between the ports\tacquireMinFwdDot = 0.7f;          //the max forward angle between the two port\u0027s Z axis for acquireForce to kick in. cosine of the angle, 0.7 is roughly 45 degrees\tacquireMinRollDot = -3.40282347E\u002B38f;   //not sure, haven\u0027t tested. don\u0027t think it matters since you can dock in any roll angle\tacquireForce = 2f;          //how strong the magnetic pull is\tacquireTorque = 2f;       //how strong the force is attempting to align the docking port\u0027s Z to the target port\u0027s Z axis.\tcaptureRange = 0.06f;     //how close the dockingNodes has to be before game considers them \u0022Docked\u0022\tcaptureMinFwdDot = 0.998f;         //the max angle between the two ports when docked, cosine of the angle. 1 = cosine 0 degrees\tcaptureMinRollDot = -3.40282347E\u002B38f;    \tcaptureMaxRvel = 0.3f;      //max rel. velocity to dock and not bounce off.\treferenceAttachNode = string.Empty;\tnodeType =       //two ports of the same type can dock together, can be any string, not restricted to size0, 1, 2, etc.\tdeployAnimationController = -1;    // not sure what deployAnimationController parameters do.\tdeployAnimationTarget = 1f;\n\n**Edited \u003Ctime datetime=\u00222015-03-13T05:18:51Z\u0022 title=\u002203/13/2015 05:18  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 13, 2015\u003C/time\u003E by nli2work**"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-13T06:39:59Z","Content":"\u003E \n\u003E dockingNode has to be slightly outside of the collider box or the collider will prevent the two dockingNode transforms from reaching each other, and game tries to pull them together forever but never fully docks. or if your dockingNode is too far inside of collider, collider will prevent the node from getting close enough for the magnetic force to kick in at all, and it just looks as if the docking port doesn\u0027t work. \n\u003E I find the ideal way is place the dockingNode flush with the top of visible docking ring, and position the collider slightly below the visible mesh. when the port is docked, the visible mesh clips slightly into the other port so you don\u0027t have a tiny gap between them.\n\u003E \n\u003E there are some additional parameters you can adjust as well\n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     nodeTransformName =               controlTransformName =     undockEjectionForce = 10f;          //how hard the base pushes the undocking vessel when undocking. Haven\u0027t tested.    minDistanceToReEngage = 1f;     //how far you have to back away before attempting to redock    acquireRange = 0.5f;                 //how close before magnetic force kicks in between the ports    acquireMinFwdDot = 0.7f;          //the max forward angle between the two port\u0027s Z axis for acquireForce to kick in. cosine of the angle, 0.7 is roughly 45 degrees    acquireMinRollDot = -3.40282347E\u002B38f;   //not sure, haven\u0027t tested. don\u0027t think it matters since you can dock in any roll angle    acquireForce = 2f;          //how strong the magnetic pull is    acquireTorque = 2f;       //how strong the force is attempting to align the docking port\u0027s Z to the target port\u0027s Z axis.    captureRange = 0.06f;     //how close the dockingNodes has to be before game considers them \u0022Docked\u0022    captureMinFwdDot = 0.998f;         //the max angle between the two ports when docked, cosine of the angle. 1 = cosine 0 degrees    captureMinRollDot = -3.40282347E\u002B38f;        captureMaxRvel = 0.3f;      //max rel. velocity to dock and not bounce off.    referenceAttachNode = string.Empty;    nodeType =       //two ports of the same type can dock together, can be any string, not restricted to size0, 1, 2, etc.    deployAnimationController = -1;    // not sure what deployAnimationController parameters do.    deployAnimationTarget = 1f;\n\nMuch appreciated, that definitely helped! Now it\u0027s just a matter of fine tuning the settings. Thanks again. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"}]}