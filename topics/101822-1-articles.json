{"TopicId":101822,"ForumId":15,"TopicTitle":"Docking ports and part triggers","CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-12T19:04:03Z","PageNum":1,"Articles":[{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-12T19:04:03Z","Content":"\n\u003Cp\u003EHi all,\u003C/p\u003E\u003Cp\u003EI am trying to decypher docking ports. I imported the clamp-o-tron senior port into Blender and can see that I need a dockingNode transform, and I see the collider for the disk shape, but I am puzzled by the small cylinder that is perpendicular to the part. It appears to be a collider... Do docking ports need a part trigger? If so, what tag should I use in Unity, if any?\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-03-12T19:41:31Z","Content":"\n\u003Cp\u003EIt may be best to post a screenshot.\u003C/p\u003E\u003Cp\u003EThat being said, based on my experiences in making docking ports, yes, that is most definitely a collider, but no, it doesn\u0027t need to be a part trigger - just make sure the collider is convex, and you\u0027ll be good to go.\u003C/p\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-13T03:29:10Z","Content":"\n\u003Cp\u003ESorry about that, I was at work. Ok, I restarted Blender and re-imported the clamp-o-tron sr. This is what I see:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/uNygri1.png\u0022 alt=\u0022uNygri1.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ETurns out the cylinder I saw was a leftover from other part imports. But, I\u0027m definitely having trouble getting my docking port to work. What I\u0027m finding is that the port won\u0027t engage, meaning the magnets won\u0027t pull the craft together, and the two crafts won\u0027t join together. I\u0027m not sure what the issue is. Here is what the part looks like in Unity:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/GbmMZ0k.png\u0022 alt=\u0022GbmMZ0k.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here is the collider:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/K3AFYBY.png\u0022 alt=\u0022K3AFYBY.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhen I use MechJeb to auto-dock, the craft orients correctly (nose forward), and attempts to dock with the corresponding port. it looks like NavyFish\u0027s Docking Port Alignment Indicator agrees:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/yH9lRCS.png\u0022 alt=\u0022yH9lRCS.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m using the Module code from the clamp-o-tron sr port exactly:\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleDockingNode\u003C/p\u003E\u003Cp\u003E referenceAttachNode = top\u003C/p\u003E\u003Cp\u003E nodeType = size2\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EAnd my attach nodes:\u003C/p\u003E\u003Cp\u003Enode_stack_top = 0.0, 0.12, 0.0, 0.0, 1.0, 0.0, 2\u003C/p\u003E\u003Cp\u003Enode_stack_bottom = 0.0, -0.12, 0.0, 0.0, 1.0, 0.0, 2\u003C/p\u003E\u003Cp\u003Enode_attach = 0.0, -0.12, 0.0, 0.0, -1.0, 0.0\u003C/p\u003E\u003Cp\u003Eand attach rules:\u003C/p\u003E\u003Cp\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003C/p\u003E\u003Cp\u003EattachRules = 1,1,1,1,0\u003C/p\u003E\u003Cp\u003EAny ideas about what I\u0027m doing wrong? Does the dockingNode transform need a particular orientation I\u0027m missing?\u003C/p\u003E\u003Cp\u003EThanks for the help! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-13T03:31:15Z\u0022 title=\u002203/13/2015 03:31  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 13, 2015\u003C/time\u003E by Angel-125\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-03-13T05:02:40Z","Content":"\n\u003Cp\u003EdockingNode has to be slightly outside of the collider box or the collider will prevent the two dockingNode transforms from reaching each other, and game tries to pull them together forever but never fully docks. or if your dockingNode is too far inside of collider, collider will prevent the node from getting close enough for the magnetic force to kick in at all, and it just looks as if the docking port doesn\u0027t work. \u003C/p\u003E\u003Cp\u003EI find the ideal way is place the dockingNode flush with the top of visible docking ring, and position the collider slightly below the visible mesh. when the port is docked, the visible mesh clips slightly into the other port so you don\u0027t have a tiny gap between them.\u003C/p\u003E\u003Cp\u003Ethere are some additional parameters you can adjust as well\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EnodeTransformName =           \u003Cbr\u003E\tcontrolTransformName = \u003Cbr\u003E\tundockEjectionForce = 10f;          //how hard the base pushes the undocking vessel when undocking. Haven\u0027t tested.\u003Cbr\u003E\tminDistanceToReEngage = 1f;     //how far you have to back away before attempting to redock\u003Cbr\u003E\tacquireRange = 0.5f;                 //how close before magnetic force kicks in between the ports\u003Cbr\u003E\tacquireMinFwdDot = 0.7f;          //the max forward angle between the two port\u0027s Z axis for acquireForce to kick in. cosine of the angle, 0.7 is roughly 45 degrees\u003Cbr\u003E\tacquireMinRollDot = -3.40282347E\u002B38f;   //not sure, haven\u0027t tested. don\u0027t think it matters since you can dock in any roll angle\u003Cbr\u003E\tacquireForce = 2f;          //how strong the magnetic pull is\u003Cbr\u003E\tacquireTorque = 2f;       //how strong the force is attempting to align the docking port\u0027s Z to the target port\u0027s Z axis.\u003Cbr\u003E\tcaptureRange = 0.06f;     //how close the dockingNodes has to be before game considers them \u0022Docked\u0022\u003Cbr\u003E\tcaptureMinFwdDot = 0.998f;         //the max angle between the two ports when docked, cosine of the angle. 1 = cosine 0 degrees\u003Cbr\u003E\tcaptureMinRollDot = -3.40282347E\u002B38f;    \u003Cbr\u003E\tcaptureMaxRvel = 0.3f;      //max rel. velocity to dock and not bounce off.\u003Cbr\u003E\treferenceAttachNode = string.Empty;\u003Cbr\u003E\tnodeType =       //two ports of the same type can dock together, can be any string, not restricted to size0, 1, 2, etc.\u003Cbr\u003E\tdeployAnimationController = -1;    // not sure what deployAnimationController parameters do.\u003Cbr\u003E\tdeployAnimationTarget = 1f;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-13T05:18:51Z\u0022 title=\u002203/13/2015 05:18  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 13, 2015\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-03-13T06:39:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EdockingNode has to be slightly outside of the collider box or the collider will prevent the two dockingNode transforms from reaching each other, and game tries to pull them together forever but never fully docks. or if your dockingNode is too far inside of collider, collider will prevent the node from getting close enough for the magnetic force to kick in at all, and it just looks as if the docking port doesn\u0027t work. \u003Cp\u003EI find the ideal way is place the dockingNode flush with the top of visible docking ring, and position the collider slightly below the visible mesh. when the port is docked, the visible mesh clips slightly into the other port so you don\u0027t have a tiny gap between them.\u003C/p\u003E\u003Cp\u003Ethere are some additional parameters you can adjust as well\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EnodeTransformName =           \u003Cbr\u003E    controlTransformName = \u003Cbr\u003E    undockEjectionForce = 10f;          //how hard the base pushes the undocking vessel when undocking. Haven\u0027t tested.\u003Cbr\u003E    minDistanceToReEngage = 1f;     //how far you have to back away before attempting to redock\u003Cbr\u003E    acquireRange = 0.5f;                 //how close before magnetic force kicks in between the ports\u003Cbr\u003E    acquireMinFwdDot = 0.7f;          //the max forward angle between the two port\u0027s Z axis for acquireForce to kick in. cosine of the angle, 0.7 is roughly 45 degrees\u003Cbr\u003E    acquireMinRollDot = -3.40282347E\u002B38f;   //not sure, haven\u0027t tested. don\u0027t think it matters since you can dock in any roll angle\u003Cbr\u003E    acquireForce = 2f;          //how strong the magnetic pull is\u003Cbr\u003E    acquireTorque = 2f;       //how strong the force is attempting to align the docking port\u0027s Z to the target port\u0027s Z axis.\u003Cbr\u003E    captureRange = 0.06f;     //how close the dockingNodes has to be before game considers them \u0022Docked\u0022\u003Cbr\u003E    captureMinFwdDot = 0.998f;         //the max angle between the two ports when docked, cosine of the angle. 1 = cosine 0 degrees\u003Cbr\u003E    captureMinRollDot = -3.40282347E\u002B38f;    \u003Cbr\u003E    captureMaxRvel = 0.3f;      //max rel. velocity to dock and not bounce off.\u003Cbr\u003E    referenceAttachNode = string.Empty;\u003Cbr\u003E    nodeType =       //two ports of the same type can dock together, can be any string, not restricted to size0, 1, 2, etc.\u003Cbr\u003E    deployAnimationController = -1;    // not sure what deployAnimationController parameters do.\u003Cbr\u003E    deployAnimationTarget = 1f;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMuch appreciated, that definitely helped! Now it\u0027s just a matter of fine tuning the settings. Thanks again. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}