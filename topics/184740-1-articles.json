{"TopicId":184740,"ForumId":69,"TopicTitle":"(SOLVED) Losing 300% performance after time warping","CreatedByName":"Wilds","CreatedById":193634,"CreatedDateTime":"2019-05-25T20:29:59Z","PageNum":1,"Articles":[{"CreatedByName":"Wilds","CreatedById":193634,"CreatedDateTime":"2019-05-25T20:29:59Z","Content":"\n\u003Cp\u003E\nWhenever I time warp in a vacuum to do a burn, my FPS drops. I am fine with that. The issue is my fps fails to recover even at 1x speed. The only fix is to restart the game. The issue gets worse and worse the larger my craft is. Overclocking CPU is the only fix to improve the FPS.\n\u003C/p\u003E\n\u003Cp\u003E\nIt has gotten so bad that I am avoiding time warping with physics (alt\u002B\u0026gt;). Is there a fix for this? Why does this happen? My CPU is an i7-5775C @ 4.2 GHz. The issue gets bad with part counts above 200.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNo mods!\n\u003C/p\u003E\n\u003Cp\u003E\nI can get 30 fps with a part count of around 300-500 parts. It stays at 30fps very consistently. As soon as I time warp to do a burn and go back to 1x speed, I am at 10fps. Reloading save, going to main menu does nothing. Re loading save after restarting the game fixes the FPS bug until I time warp again.\n\u003C/p\u003E\n\u003Cp\u003E\nDoing a 20 minute burn suddenly becomes a dreaded occurrence.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:24px;\u0022\u003E\u003Cstrong\u003EI solved it!\u003C/strong\u003E Someone mentioned Physics Delta Time to me. It was already set to the lowest setting, but setting PDT to max got me the FPS drop that I experience. I downloaded CheatEngine to search for 0.3 in float, found my PDT of 0.02999999933. With CheatEngine open, I was able to see my Physics Delta Time in game.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:24px;\u0022\u003EAfter using alt\u002B\u0026gt; to time warp with physics, I saw my Physics Delta Time permanently change to 0.07999999933 even after going back to 1x speed. Using CheatEngine, I forced it back to 0.02999999933. Thus putting my FPS back to how it should be. This is a bug! CheatEngine is a bandaid.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis occurs on every copy of KSP I have. Tested on 1.7, 1.6.1, and 1.6.0.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMy friend helped me make this script for CheatEngine. Because of all the negative stigma using this program, I won\u0027t link any downloads for a trainer. Now I can play the game without restarting every time I warp! All the script does is call up the PDT value without you needing to search for it on restarting the game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E{ Game   : KSP_x64.exe\n  Version:\n  Date   : 2019-05-25\n  Author : Anonymous\n\n  This script obtains the Float value of Physics Delta Time. Allowing players to force it back to the correct position\n}\n\n[ENABLE]\n\naobscanmodule(INJECT,KSP_x64.exe,89 81 F8 00 00 00 C3 CC CC CC CC CC CC CC CC CC) // should be unique\nalloc(newmem,$1000,\u0022KSP_x64.exe\u0022\u002B4E2ADC)\n\nlabel(code)\nlabel(return)\n\nalloc(pdtPtr,8)\nregistersymbol(pdtPtr)\n\nnewmem:\n\ncode:\n  mov [rcx\u002B000000F8],eax\n  mov [pdtPtr],rcx\n  jmp return\n\nINJECT:\n  jmp newmem\n  nop\nreturn:\nregistersymbol(INJECT)\n\n[DISABLE]\n\nINJECT:\n  db 89 81 F8 00 00 00\n\nunregistersymbol(INJECT)\ndealloc(newmem)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nedit #2: Setting the Freeze interval to 1ms also fixes the bug where Apoapsis and Periapsis change when time warping! It also fixes an aircraft from pitching down or up when time warping.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-26T05:58:07Z\u0022 title=\u002205/26/2019 05:58  AM\u0022 data-short=\u00225 yr\u0022\u003EMay 26, 2019\u003C/time\u003E by Wilds\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JonnyOThan","CreatedById":40902,"CreatedDateTime":"2022-09-26T00:52:54Z","Content":"\n\u003Cp\u003E\nThe fix for this bug is now available in KSP Community Fixes.\n\u003C/p\u003E\n"}]}