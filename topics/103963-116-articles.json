{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":116,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-26T14:25:00Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, \\*MajorTom\\* said:\n\u003E \n\u003E \n\u003E KSPRC, x64 , scatterer 0.02182   (in 0.021b no bugs)\n\u003E \n\nIt\u0027s stated everywhere that there\u0027s a bit of z-fighting, please don\u0027t keep reporting issues that are already reported."},{"CreatedByName":"*MajorTom*","CreatedById":144002,"CreatedDateTime":"2015-12-26T14:39:54Z","Content":"ok ,sorry, my fault. i install different version just trying to help (test).\n\nI just notice that this glitch wasn\u0027t in the previous version, then just need to find the difference between them and correct. Through the scatterer menu I\u0027ve failed to do this... (and in 0.021c it bigger effect than in 0.021b)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-26T14:58:29Z","Content":"\u003E \n\u003E \n\u003E 19 minutes ago, \\*MajorTom\\* said:\n\u003E \n\u003E \n\u003E ok ,sorry, my fault. i install different version just trying to help (test).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I just notice that this glitch wasn\u0027t in the previous version, then just need to find the difference between them and correct. Through the scatterer menu I\u0027ve failed to do this... (and in 0.021c it bigger effect than in 0.021b)\n\u003E \n\nThere\u0027s nothing to correct, I added a fake ocean in the postprocessing shader, the real ocean disappears and the simulated ocean appears instead in the postprocessing shader. This eliminates the bug where looking at the ocean from orbit causes artifact soup but has some z-fighting for now, this is all in the changelogs. Before this the previous workaround was to make the ocean disappear at an altitude of 70km, leaving the ocean floor exposed, so pick your poison. The altitude at which the ocean and fake ocean are switched is in the planetsList.cfg file, it\u0027s called either fakeOceanAltitude or OceanDeactivateAltitude, I can\u0027t remember.\n\n**Edited \u003Ctime datetime=\u00222015-12-26T14:59:36Z\u0022 title=\u002212/26/2015 02:59  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 26, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-12-26T17:38:23Z","Content":"\u003E \n\u003E \n\u003E 15 hours ago, Nhawks17 said:\n\u003E \n\u003E \n\u003E don\u0027t see blurriness in any of those ![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif \u0022:0.0:\u0022)\n\u003E \n\nIt just looks differently under dx9. Now that I looks at it again it just sdeems that Scatterer effect is often one pixel off in random direction, which gives sort of blurry looking effect."},{"CreatedByName":"Winterdavid","CreatedById":155911,"CreatedDateTime":"2015-12-27T01:08:25Z","Content":"\u003E \n\u003E \n\u003E 18 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Try going into the EmptyShader.shader file, find the two lines that say Tags, and add \u0022IgnoreProjector\u0022=\u0022True\u0022 after \u0022QUEUE\u0022=\u0022Transparent\u0022, it should look like this:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  Tags { \u0022QUEUE\u0022=\u0022Transparent\u0022 \u0022IgnoreProjector\u0022=\u0022True\u0022}  \n\u003E \n\u003E  Pass {  \n\u003E \n\u003E   Tags { \u0022QUEUE\u0022=\u0022Transparent\u0022 \u0022IgnoreProjector\u0022=\u0022True\u0022}\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This should remove the clouds on the ocean but they will still work on everything else\n\u003E \n\nThis works perfectly, thankyou!"},{"CreatedByName":"Mr C","CreatedById":129776,"CreatedDateTime":"2015-12-27T04:40:03Z","Content":"\u003E \n\u003E \n\u003E On 11/12/2015 at 7:38 AM, blackrack said:\n\u003E \n\u003E \n\u003E Not sure actually, but that website doesn\u0027t seem to convert bump/whatever to normalmap\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edited: normalmaps are working, but they\u0027re kinda weird because they are tool generated and they don\u0027t reallymake that much of a difference. The process was also a pain.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Anyway:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![MxJT87s.jpg](http://i.imgur.com/MxJT87s.jpg)](http://i.imgur.com/MxJT87s.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![WJdgaRM.jpg](http://i.imgur.com/WJdgaRM.jpg)](http://i.imgur.com/WJdgaRM.jpg \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also, reaslitically speaking, how overkill would it be to have a 16k kerbin texture? That should be about 160mb as a .dds file.\n\u003E \n\nHey Blackrack, I was wondering if you had ever finished this kerbin texture that you posted a while ago, and if so, is there anywhere I could download it? I really love it, it looks absolutely gorgeous ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222015-12-27T04:40:41Z\u0022 title=\u002212/27/2015 04:40  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 27, 2015\u003C/time\u003E by Mr C**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-27T05:35:08Z","Content":"\u003E \n\u003E \n\u003E 52 minutes ago, Mr C said:\n\u003E \n\u003E \n\u003E Hey Blackrack, I was wondering if you had ever finished this kerbin texture that you posted a while ago, and if so, is there anywhere I could download it? I really love it, it looks absolutely gorgeous ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nI never did actually, I dropped this idea as it was too much work and I wasn\u0027t that good at it. If you want good planet textures I suggest trying Proot\u0027s KSPRC mod (freshly updated), I use it myself."},{"CreatedByName":"VenomousRequiem","CreatedById":137373,"CreatedDateTime":"2015-12-27T07:08:06Z","Content":"Hehe... I decided to get some wonderful screenshots of a Titan I and Titan II GLV launch.\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/kulgd/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\nKeep up the good work, mate."},{"CreatedByName":"mreadshaw","CreatedById":135349,"CreatedDateTime":"2015-12-28T02:03:54Z","Content":"Are scatterer configs editable using MM configs?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-28T06:32:06Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, mreadshaw said:\n\u003E \n\u003E \n\u003E Are scatterer configs editable using MM configs?\n\u003E \n\nI don\u0027t really see much point in this, so no."},{"CreatedByName":"Mr C","CreatedById":129776,"CreatedDateTime":"2015-12-28T08:39:16Z","Content":"\u003E \n\u003E \n\u003E On 12/27/2015 at 6:35 PM, blackrack said:\n\u003E \n\u003E \n\u003E I never did actually, I dropped this idea as it was too much work and I wasn\u0027t that good at it. If you want good planet textures I suggest trying Proot\u0027s KSPRC mod (freshly updated), I use it myself.\n\u003E \n\nI just downloaded KSPRC and it is very pretty ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) How did create that sample texture? I\u0027m thinking about possibly giving it a go myself if I can find the time."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-28T08:48:30Z","Content":"\u003E \n\u003E \n\u003E 17 minutes ago, Mr C said:\n\u003E \n\u003E \n\u003E I just downloaded KSPRC and it is very pretty ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) How did create that sample texture? I\u0027m thinking about possibly giving it a go myself if I can find the time.\n\u003E \n\nI found this little tutorial [http://img04.deviantart.net/a266/i/2012/163/b/f/earth_like_planet__texture_tutorial_by_bonvanello-d53a0v4.png](http://img04.deviantart.net/a266/i/2012/163/b/f/earth_like_planet__texture_tutorial_by_bonvanello-d53a0v4.png) , someone linked to it in the dark days mod thread [http://forum.kerbalspaceprogram.com/index.php?/topic/120543-upcoming-dark-days-dying-of-the-light-kopernicus-mod-help-wanted-for-part-pack/\u0026page=6#comment-2236015](https://forum.kerbalspaceprogram.com/index.php?/topic/120543-upcoming-dark-days-dying-of-the-light-kopernicus-mod-help-wanted-for-part-pack/\u0026page=6#comment-2236015)\n\nI used the same panorama method to blend several satellite pictures and then overlaid them on top of an 8k texture. For normalmaps I used a tool but it was a lot harder to overlay correctly and make it match the texture, if you read back those old comments I posted when I was trying this, you\u0027ll find the name of the tool somewhere.\n\nI will try to see If I can find the sample textures I used and post them here.\n\nEdited: here are the sample textures I used: [http://imgur.com/a/awsli](http://imgur.com/a/awsli)\n\nLet me know if you come up with something.\n\n**Edited \u003Ctime datetime=\u00222015-12-28T08:56:38Z\u0022 title=\u002212/28/2015 08:56  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 28, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"gliese-aerospace","CreatedById":155819,"CreatedDateTime":"2015-12-30T09:33:07Z","Content":"Any updates? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222015-12-30T09:37:20Z\u0022 title=\u002212/30/2015 09:37  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 30, 2015\u003C/time\u003E by gliese-aerospace**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-30T12:02:56Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, gliese-aerospace said:\n\u003E \n\u003E \n\u003E Any updates? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nWon\u0027t be updating anything unless 1.1 hits and it speeds up the physics this much [https://www.youtube.com/watch?v=hYuPNmSnrB4](https://www.youtube.com/watch?v=hYuPNmSnrB4)\n\nSorry I just had to post that ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)"},{"CreatedByName":"TedwinKnockman66","CreatedById":155882,"CreatedDateTime":"2015-12-30T12:04:48Z","Content":"what happened after playing with Scatterer option.\n\n[http://imgur.com/a/0jHDi](http://imgur.com/a/0jHDi)\n\nDamn with this mod we can make 2012 the movie"},{"CreatedByName":"gliese-aerospace","CreatedById":155819,"CreatedDateTime":"2015-12-30T12:12:28Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Won\u0027t be updating anything unless 1.1 hits and it speeds up the physics this much [https://www.youtube.com/watch?v=hYuPNmSnrB4](https://www.youtube.com/watch?v=hYuPNmSnrB4)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Sorry I just had to post that ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\nI\u0027m not sure if you\u0027re totally serious but mother of all that is holy are those benchmarks even real? If they are 1.1 cannot come soon enough ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png \u0022:o\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-30T12:22:22Z","Content":"\u003E \n\u003E \n\u003E 10 minutes ago, gliese-aerospace said:\n\u003E \n\u003E \n\u003E I\u0027m not sure if you\u0027re totally serious but mother of all that is holy are those benchmarks even real? If they are 1.1 cannot come soon enough ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png \u0022:o\u0022)\n\u003E \n\nI tried the newest version of besiege and I can confirm I got similar speed-ups. I hope 1.1 is as fast with the physics, but I\u0027m a bit worried at this point as the developers didn\u0027t say a single word about performance improvements, we\u0027re pretty much in the dark.\n\n**Edited \u003Ctime datetime=\u00222015-12-30T12:23:11Z\u0022 title=\u002212/30/2015 12:23  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 30, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"gliese-aerospace","CreatedById":155819,"CreatedDateTime":"2015-12-31T02:06:48Z","Content":"\u003E \n\u003E \n\u003E 13 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E I tried the newest version of besiege and I can confirm I got similar speed-ups. I hope 1.1 is as fast with the physics, but I\u0027m a bit worried at this point as the developers didn\u0027t say a single word about performance improvements, we\u0027re pretty much in the dark.\n\u003E \n\nWouldn\u0027t a full engine upgrade including optimizations \u002B 64 bit pipeline \u002B increased VAS sort of just improve performance by default though? The Besiege speed-ups are a little insane but I think we can expect at least a modest bump in performance and enough optimization that mods don\u0027t become burdensome."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-31T03:11:01Z","Content":"\u003E \n\u003E \n\u003E 14 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E I tried the newest version of besiege and I can confirm I got similar speed-ups. I hope 1.1 is as fast with the physics, but I\u0027m a bit worried at this point as the developers didn\u0027t say a single word about performance improvements, we\u0027re pretty much in the dark.\n\u003E \n\nThey did (Max Maps) and then they backed away (developers) as it became apparent the physics for a single ship will still be single threaded, but you can have multiple threads for multiple ships, which means you could potentially park two 300 part count vessels next to each other without suffering too much of an fps drop, but as soon as you dock them back to single digits. It will be better, but not orders of magnitude like some other games that use rigid bodies.\n\n**Edited \u003Ctime datetime=\u00222015-12-31T03:11:54Z\u0022 title=\u002212/31/2015 03:11  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 31, 2015\u003C/time\u003E by selfish\\_meme**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-31T09:49:49Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, gliese-aerospace said:\n\u003E \n\u003E \n\u003E Wouldn\u0027t a full engine upgrade including optimizations \u002B 64 bit pipeline \u002B increased VAS sort of just improve performance by default though? The Besiege speed-ups are a little insane but I think we can expect at least a modest bump in performance and enough optimization that mods don\u0027t become burdensome.\n\u003E \n\n\u003E \n\u003E \n\u003E 6 hours ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E They did (Max Maps) and then they backed away (developers) as it became apparent the physics for a single ship will still be single threaded, but you can have multiple threads for multiple ships, which means you could potentially park two 300 part count vessels next to each other without suffering too much of an fps drop, but as soon as you dock them back to single digits. It will be better, but not orders of magnitude like some other games that use rigid bodies.\n\u003E \n\nI don\u0027t really get how a single ship will be single-threaded, in that besiege comparison all these contraptions are also \u0022a single ship\u0022 as in they\u0027re all connected by joints and other things. In [this physx 3.3 benchmark](http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/) (which is what is used in unity 5), if you scroll down to \u0022Scene #5 \u2013 spherical joints net\u0022, there are multiple rigid-bodies connected by joints, you can clearly see it scales (if moderately) with multiple threads and is quite a bit faster than the old physx version running in a single thread.\n\nI don\u0027t really know if there is something more here, but Is there a reason why KSP should be an exception?\n\n**Edited \u003Ctime datetime=\u00222015-12-31T09:51:04Z\u0022 title=\u002212/31/2015 09:51  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 31, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-31T11:19:46Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E I don\u0027t really get how a single ship will be single-threaded, in that besiege comparison all these contraptions are also \u0022a single ship\u0022 as in they\u0027re all connected by joints and other things. In [this physx 3.3 benchmark](http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/) (which is what is used in unity 5), if you scroll down to \u0022Scene #5 \u2013 spherical joints net\u0022, there are multiple rigid-bodies connected by joints, you can clearly see it scales (if moderately) with multiple threads and is quite a bit faster than the old physx version running in a single thread.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I don\u0027t really know if there is something more here, but Is there a reason why KSP should be an exception?\n\u003E \n\nMy understanding is that KSP is a bit unique in computing the interactions between each part with no rigid bodies, and it needs to be in a single thread for affinity. Though you possibly could parcel out resources and heat into separate threads as well. I\u0027m not an expert on realtime physics engines by any means I am just repeating conversations from dev threads. Possibly it is the joint interaction, as from my understanding physx does not really do physics, not in the way KSP does, it models interactions in a more algorythmic way to represent reality without actually getting into the nitty gritty of actually modelling the interaction of each element. So an explosion in physx looks great, pieces flying off everywhere, but it is only a representation of the explosion, physx did not actually model the parts interacting with each other, just exploded them all outwards according to some general algorythm. Not saying KSP does either, all explosions in KSP look pretty much the same, but KSP keeps track of every part, what temperature it is at, and what other parts it interacts with, physx probably lump them all together and model the outcome according to some realistic looking algorythm."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-31T11:32:53Z","Content":"\u003E \n\u003E \n\u003E 13 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E My understanding is that KSP is a bit unique in computing the interactions between each part with no rigid bodies, and it needs to be in a single thread for affinity. Though you possibly could parcel out resources and heat into separate threads as well. I\u0027m not an expert on realtime physics engines by any means I am just repeating conversations from dev threads. Possibly it is the joint interaction, as from my understanding physx does not really do physics, not in the way KSP does, it models interactions in a more algorythmic way to represent reality without actually getting into the nitty gritty of actually modelling the interaction of each element. So an explosion in physx looks great, pieces flying off everywhere, but it is only a representation of the explosion, physx did not actually model the parts interacting with each other, just exploded them all outwards according to some general algorythm. Not saying KSP does either, all explosions in KSP look pretty much the same, but KSP keeps track of every part, what temperature it is at, and what other parts it interacts with, physx probably lump them all together and model the outcome according to some realistic looking algorythm.\n\u003E \n\nSo KSP doesn\u0027t use physx? I thought it was pretty clear that KSP used whatever physics engine/SDK is used in unity by default.\n\n**Edited \u003Ctime datetime=\u00222015-12-31T11:33:39Z\u0022 title=\u002212/31/2015 11:33  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 31, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-31T11:42:09Z","Content":"It does use Physx, where possible to speed up any calculations, my understanding is that the floating point calculations KSP does are just not handled that efficiently by PhysX because it\u0027s not a reality simulator it\u0027s a reality modeller.\n\nThats not very clear, PhysX is more concerned with how it looks, rather than how it would actually work, does that make more sense?\n\n**Edited \u003Ctime datetime=\u00222015-12-31T11:45:49Z\u0022 title=\u002212/31/2015 11:45  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 31, 2015\u003C/time\u003E by selfish\\_meme**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-31T12:32:31Z","Content":"\u003E \n\u003E \n\u003E 50 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E It does use Physx, where possible to speed up any calculations, my understanding is that the floating point calculations KSP does are just not handled that efficiently by PhysX because it\u0027s not a reality simulator it\u0027s a reality modeller.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Thats not very clear, PhysX is more concerned with how it looks, rather than how it would actually work, does that make more sense?\n\u003E \n\nI get it, but it doesn\u0027t seem to me like anyone would notice the difference when it comes to collisions, explosions and different interactions between the joints and the parts. For floating point calculations it shouldn\u0027t be a problem as everything is done in a limited-size physics bubble centered around the player ship where floating point issues wouldn\u0027t really be a problem. Did the devs actually say they do it like this? Do they expand on how they do physics without PhysX?\n\n**Edited \u003Ctime datetime=\u00222015-12-31T12:33:02Z\u0022 title=\u002212/31/2015 12:33  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 31, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-31T13:18:15Z","Content":"\u003E \n\u003E \n\u003E 45 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I get it, but it doesn\u0027t seem to me like anyone would notice the difference when it comes to collisions, explosions and different interactions between the joints and the parts. For floating point calculations it shouldn\u0027t be a problem as everything is done in a limited-size physics bubble centered around the player ship where floating point issues wouldn\u0027t really be a problem. Did the devs actually say they do it like this? Do they expand on how they do physics without PhysX?\n\u003E \n\nI would ask NathanKell, I am just not familiar enough with it."}]}