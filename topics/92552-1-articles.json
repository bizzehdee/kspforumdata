{"TopicId":92552,"ForumId":29,"TopicTitle":"Removing Kerbal fron unloaded Vessel - Not working as expected","CreatedByName":"Stavell","CreatedById":75521,"CreatedDateTime":"2014-12-11T16:27:12Z","PageNum":1,"Articles":[{"CreatedByName":"Stavell","CreatedById":75521,"CreatedDateTime":"2014-12-11T16:27:12Z","Content":"\n\u003Cp\u003EI\u0027m using the following code to remove a kerbal from a unloaded vessel. Everything seems to work and when queried again the kerbal appears to be gone. But when I switch scenes he shows back up in the vessel.\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eprivate void CrewTestProto(int REASON, ProtoPartSnapshot p, double l)\u003Cbr\u003E    {\u003Cbr\u003E        int CUR_CWLS = IFICWLS;\u003Cbr\u003E        CUR_CWLS \u002B= (Convert.ToInt16(l) * 10);\u003Cbr\u003E        float rand;\u003Cbr\u003E        ProtoCrewMember iCrew;\u003Cbr\u003E        for (int i = 0; i \u0026lt; p.protoModuleCrew.Count; i\u002B\u002B)\u003Cbr\u003E        {\u003Cbr\u003E            rand = UnityEngine.Random.Range(0.0f, 100.0f);\u003Cbr\u003E            if (CUR_CWLS \u0026gt; rand)\u003Cbr\u003E            {\u003Cbr\u003E                iCrew = p.protoModuleCrew[i];\u003Cbr\u003E                p.protoModuleCrew.Remove(iCrew);// Remove crew from part\u003Cbr\u003E                iCrew.Die(); \u003Cbr\u003E\t\t\t\tIFIDebug.IFIMess(p.pVesselRef.vesselName \u002B \u0022 POD Kerbal Killed due to no LS - \u0022 \u002B iCrew.name);\u003Cbr\u003E                string message = \u0022\u0022; message \u002B= p.pVesselRef.vesselName \u002B \u0022\\n\\n\u0022; message \u002B= iCrew.name \u002B \u0022\\n Was killed due to ::\u0022;\u003Cbr\u003E                if (REASON == 1) { message \u002B= \u0022No Electric Charge Remaining\u0022; } else { message \u002B= \u0022No Life Support Remaining\u0022; }\u003Cbr\u003E                message \u002B= \u0022::\u0022;\u003Cbr\u003E\u003Cbr\u003E\t\t\t\tMessageSystem.Message m = new MessageSystem.Message(\u0022Kerbal Death from LifeSupport Failure\u0022, message, MessageSystemButton.MessageButtonColor.RED, MessageSystemButton.ButtonIcons.ALERT);\u003Cbr\u003E                MessageSystem.Instance.AddMessage(m);\u003Cbr\u003E\u003Cbr\u003E\t\t\t\tp.storePartRefs();\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-12-11T17:40:45Z","Content":"\n\u003Cp\u003EI did it this way..\u003C/p\u003E\u003Cp\u003Eeither that\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightEVA.fetch.spawnEVA(kerbal, p, p.airlock);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eor that\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E            foreach (Part part in sourceShip.Parts)\u003Cbr\u003E            {\u003Cbr\u003E                kerbal = null;\u003Cbr\u003E                foreach (ProtoCrewMember availableKerbal in part.protoModuleCrew)\u003Cbr\u003E                {\u003Cbr\u003E                    if (kerbalToMove.name == availableKerbal.name)\u003Cbr\u003E                    {\u003Cbr\u003E                        //UnityEngine.Debug.Log(\u0022ImpulseDrive Transporter ShipToShip_RemoveCrew 1 \u0022);\u003Cbr\u003E                        kerbal = availableKerbal;\u003Cbr\u003E\u003Cbr\u003E                        part.RemoveCrewmember(kerbalToMove);\u003Cbr\u003E\u003Cbr\u003E                        kerbalToMove.seat = null;\u003Cbr\u003E                        return;\u003Cbr\u003E                    }\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Edepending on it\u0027s usage\u003C/p\u003E\u003Cp\u003Emy kerbals surwived the process, so I can\u0027t say how to kill them effectively.. - sorry..\u003C/p\u003E\n"},{"CreatedByName":"Stavell","CreatedById":75521,"CreatedDateTime":"2014-12-12T12:41:52Z","Content":"\n\u003Cp\u003Ethanks \u003C/p\u003E\u003Cp\u003E part.RemoveCrewmember(kerbalToMove);\u003C/p\u003E\u003Cp\u003Eis what i missed i was just removing the crew from the part snapshot list which is updated on scene change ..\u003C/p\u003E\n"}]}