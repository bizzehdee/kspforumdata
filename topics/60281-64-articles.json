{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":64,"Articles":[{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-18T14:02:35Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/144806-mattew/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022144806\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/144806-mattew/\u0022 rel=\u0022\u0022\u003E@Mattew\u003C/a\u003E Great find, thanks for keeping on with the experiment. Just to clarify: You get a USB-TTL converter, plug it to GND, TX and RX pins on your Arduino, short VCC and \u002B5V on the module, and run the code as usual?\n\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-09-18T15:29:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222762991\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474207032\u0022 data-ipsquote-userid=\u0022168824\u0022 data-ipsquote-username=\u0022ryan00793\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, ryan00793 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat drivers did you use (I just ordered the module that you linked)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNone (or W10 found some on its own, not sure now). I didnt instal anything related to CH340. Plug n\u00A0Play \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222762996\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474207355\u0022 data-ipsquote-userid=\u0022111048\u0022 data-ipsquote-username=\u0022Freshmeat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Freshmeat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJust to clarify: You get a USB-TTL converter, plug it to GND, TX and RX pins on your Arduino, short VCC and \u002B5V on the module, and run the code as usual?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYup, exactly as you said. I just dont used arduinos usb as power source. Idk what happen if both Atmega16U2 and CH340 will be present during handshake. \u00A0For code, there are no modification at all. Technicaly this is only hardware change.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-18T17:49:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222763113\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474212545\u0022 data-ipsquote-userid=\u0022144806\u0022 data-ipsquote-username=\u0022Mattew\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Mattew said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYup, exactly as you said. I just dont used arduinos usb as power source. Idk what happen if both Atmega16U2 and CH340 will be present during handshake. \u00A0For code, there are no modification at all. Technicaly this is only hardware change.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have a PSU supplying power, and it has annoyed me to no end that the Arduino draws power from USB when i flick the power switch to \u0027off\u0027. I might install a CH340 for that reason alone.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-09-19T03:13:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222762798\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474196079\u0022 data-ipsquote-userid=\u0022144806\u0022 data-ipsquote-username=\u0022Mattew\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, Mattew said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkaaay. Just finished tests with my control panel \u002B CH340. I had no issues so far, everything works as expected. Connection is fine. Recived and transmited data are okay too. \u00A0I think we can say that problem is in Atmega16U2 chip or its drivers. That isn my expertise so I cant say why is that.\n\u003C/p\u003E\n\u003Cp\u003E\nIf anyone strugling in Win10 with his or hers custom control panel and dont want wait for fix (or maybe it wont be even possible to fix) you can get same\u00A0\u003Ca href=\u0022http://www.ebay.com/itm/131701644759?_trksid=p2057872.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u0022 rel=\u0022external nofollow\u0022\u003EUSB-TTL-Thing\u003C/a\u003E\u00A0as me.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInteresting. That does indeed seem to indicate problems with the way the original Arduino driver plays with the current serial library.\n\u003C/p\u003E\n\u003Cp\u003E\nI do have one more thing I want to try - recompiling the serial library on a Windows 10 system. And I\u0027m currently standing up Visual Studio Community on my Windows install to try it out. But apart from that I don\u0027t have any suggestions apart from just trying another serial interface.\u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2016-09-19T10:00:18Z","Content":"\n\u003Cp\u003E\nGAH! Looking for a\u00A0Mega 2560 that has the CH340G chip is excruciatingly annoying! All the listings on eBay seem to include BOTH 16U2 and CH340G, \u003Cem\u003Ejust to snag extra hits\u003C/em\u003E...\u003Cbr\u003E\nMakes searching a pain!\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u00A0Anyway,\u00A0I need to give up my search and get some sleep... Getting up for work is rapidly approaching... and my being asleep is not...\u00A0\u003Cimg alt=\u0022:huh:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 title=\u0022:huh:\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m running on Mac OS, but I\u0027d rather have a unit that CAN run on Windows 10. I\u0027d like that incase\u00A0I ever need to test with my Win 10 (dual boot), or if I travel to some event (like a maker faire, etc)\u00A0with my controller and tablet... It\u0027s a dual core i5, and I can still launch small craft just fine)\n\u003C/p\u003E\n"},{"CreatedByName":"hawk_za","CreatedById":59433,"CreatedDateTime":"2016-09-27T19:48:27Z","Content":"\n\u003Cp\u003E\ncan anyone tell me if this is working for version 1.2 and which folder i must put it in\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-27T19:54:12Z","Content":"\n\u003Cp\u003E\nIt is not working for 1.2, but will be updated when it comes around.\n\u003C/p\u003E\n"},{"CreatedByName":"hawk_za","CreatedById":59433,"CreatedDateTime":"2016-09-27T20:32:15Z","Content":"\n\u003Cp\u003E\nthanks fresh meat may i further impose and ask if there are specific folders for plugins for 64 bit versions or can i use default folders in the root\n\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-09-27T21:01:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222776852\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475005707\u0022 data-ipsquote-userid=\u002259433\u0022 data-ipsquote-username=\u0022hawk_za\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, hawk_za said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ncan anyone tell me if this is working for version 1.2 and which folder i must put it in\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nwait a minute, we have new ksp version,\u00A0why nobody told me?:D\u00A0 Behold of more broken mods \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-27T23:41:21Z","Content":"\n\u003Cp\u003E\nJust waiting for 1.2 to release.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-28T04:46:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222777167\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475019681\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJust waiting for 1.2 to release.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDon\u0027t we all \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnswering \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/59433-hawk_za/\u0026amp;do=hovercard\u0022 data-mentionid=\u002259433\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/59433-hawk_za/\u0022 rel=\u0022\u0022\u003E@hawk_za\u003C/a\u003E: No, there is no difference between 32 and 64 bit installation. Unzip into gamedata. You might want to check the settings in the config file in the plugin folder, so KSP does not override your input.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-28T04:49:34Z\u0022 title=\u002209/28/2016 04:49  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 28, 2016\u003C/time\u003E by Freshmeat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffSergeant","CreatedById":74291,"CreatedDateTime":"2016-10-01T10:53:26Z","Content":"\n\u003Cp\u003E\nIf it helps anyone:\u00A0I \u00A0was having the issue on Win10\u00A0where the Arduino worked for a few\u00A0seconds then just stopped,\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI only need to use this to get data out for a display panel, so I\u0027ve disabled handshake in the config.xml, and commented out //output() in the main loop in the example Arduino file and it seems to be stable.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe problema appears to be with\u00A0the Arduino sending data, not KSP trying to read it; \u00A0I took all of the port.read() statements out of the KSP plugin and it made no difference.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: and here\u0027s my prototype display! \u00A0 I also modified MNDeltaV to show remaining deltav not total. \u00A0\u003Ca href=\u0022https://youtu.be/h_E09jtD0vg\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://youtu.be/h_E09jtD0vg\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-02T10:03:33Z\u0022 title=\u002210/02/2016 10:03  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 2, 2016\u003C/time\u003E by JeffSergeant\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Benji","CreatedById":116398,"CreatedDateTime":"2016-10-03T20:57:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222758656\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473975451\u0022 data-ipsquote-userid=\u0022144806\u0022 data-ipsquote-username=\u0022Mattew\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 15.9.2016 at 11:37 PM, Mattew said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJust sit tight with me and have fingers crossed. I ordered from ebay \u00A0that USB-TTL module with CH340 chip and REALY hoping it\u00A0will work. I am guessing 10-14 days until it arrives so lets wait.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT:\n\u003C/p\u003E\n\u003Cp\u003E\nSo today i got a little surprise from ebay. That USB-TTL module actualy come TODAY! unbeliveable. But sadly i am not home and cant do serious testing. Buuuut i made quick test (Uno with KSPIODemo13) and comunication was handled by CH340 convertor insted of Uno\u0060s on board Atmega16U2. And guess what? IT WORKS ABSOLUTLY PERFECT! Yes, \u003Cstrong\u003EKSP IO pluggin is working under Win10 with no issues\u003C/strong\u003E (kind of). I got communication both ways, in and out. I got throttle from uno board even when there werent any controler (probably getting false signals on unconnected analog input) and it was seen in game on actual throttle. From those few short test I didnt lost comunication with board and seem absolutly fine. I will get home tomorow and ll be able to run some full test, especialy connect my full control panel using CH340 and see how it goes. Probably run some quick Mun mission and see if it will held up whole time with no issues (I guess it will be ok).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#ff0000;\u0022\u003E\u003Cu\u003E\u003Cstrong\u003ESo long story short, Win10 have issues comunicate over Atmega16U2 but CH340 run fine\u003C/strong\u003E\u003C/u\u003E\u003C/span\u003E. \u00A0I hope it will some of you more experianced guys (or girls) some idea how to fix code insted of telling ppl to go buy CH340 TTL module.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSadly they don\u0027t ship to germany, so I tried one of them: \u003Ca href=\u0022http://www.ebay.de/itm/112103375411?_trksid=p2057872.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.ebay.de/itm/112103375411?_trksid=p2057872.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\navrdude: no programmer has been specified on the command line or the config file\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 Specify a programmer using the -c option and try again\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s what the arduino ide says when I try uploading to the board. The internet refuses to help. Do you have any idea?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI think it\u0027s because I\u0027m uploading on the mega2560 via the usb-ttl. What\u0027s the solution to this? \u003Cstrong\u003ENO, \u003C/strong\u003Eusb directly into the mega 2560 brings the same result.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-10-04T11:14:27Z","Content":"\n\u003Cp\u003E\nIf it does not work with either the CH130 nor the usb cable it must be something else. The error message sounds as if the IDE is set up wrong. Can you try on a win 7 machine?\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-10-04T15:54:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222782393\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475319206\u0022 data-ipsquote-userid=\u002274291\u0022 data-ipsquote-username=\u0022JeffSergeant\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 01/10/2016 at 11:53 AM, JeffSergeant said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf it helps anyone:\u00A0I \u00A0was having the issue on Win10\u00A0where the Arduino worked for a few\u00A0seconds then just stopped,\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI only need to use this to get data out for a display panel, so I\u0027ve disabled handshake in the config.xml, and commented out //output() in the main loop in the example Arduino file and it seems to be stable.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe problema appears to be with\u00A0the Arduino sending data, not KSP trying to read it; \u00A0I took all of the port.read() statements out of the KSP plugin and it made no difference.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: and here\u0027s my prototype display! \u00A0 I also modified MNDeltaV to show remaining deltav not total. \u00A0\u003Ca href=\u0022https://youtu.be/h_E09jtD0vg\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://youtu.be/h_E09jtD0vg\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey can you share which variable from KSP gives you delta V remaining?\n\u003C/p\u003E\n"},{"CreatedByName":"Benji","CreatedById":116398,"CreatedDateTime":"2016-10-04T21:43:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222786657\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475579667\u0022 data-ipsquote-userid=\u0022111048\u0022 data-ipsquote-username=\u0022Freshmeat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 hours ago, Freshmeat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf it does not work with either the CH130 nor the usb cable it must be something else. The error message sounds as if the IDE is set up wrong. Can you try on a win 7 machine?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI reinstalled the ide.\n\u003C/p\u003E\n\u003Cp\u003E\nNow I can upload the code through the \u0022normal usb connection delivered by the mega2560.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd it runs with the usb-\u0026gt;ttl CH340. The serial monitor gets data from the board. So next step, let\u0027s see what KSP has to say about this.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-05T07:44:29Z\u0022 title=\u002210/05/2016 07:44  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 5, 2016\u003C/time\u003E by Benji\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffSergeant","CreatedById":74291,"CreatedDateTime":"2016-10-05T21:29:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222786953\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475596493\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10/4/2016 at 4:54 PM, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey can you share which variable from KSP gives you delta V remaining?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nsure, I found it by looking at the source for KRPC (\u003Ca href=\u0022https://github.com/krpc/krpc\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/krpc/krpc\u003C/a\u003E) , a goldmine for this sort of thing! \u00A0I made this change in the update() function of KSPSerialO, no idea if it\u0027s the\u00A0right way of doing it but it seems to work\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eif (ActiveVessel.patchedConicSolver.maneuverNodes.Count \u0026gt; 0)\n                            {\n                                KSPSerialPort.VData.MNTime = (UInt32)Math.Round(ActiveVessel.patchedConicSolver.maneuverNodes[0].UT - Planetarium.GetUniversalTime());\n                                //KSPSerialPort.VData.MNDeltaV = (float)ActiveVessel.patchedConicSolver.maneuverNodes[0].DeltaV.magnitude; //removed JS\n                                KSPSerialPort.VData.MNDeltaV = (float)ActiveVessel.patchedConicSolver.maneuverNodes[0].GetBurnVector(ActiveVessel.patchedConicSolver.maneuverNodes[0].patch).magnitude; //Added JS\n                                \n                            }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve also since upgraded my instrument panel to a project box. \u00A0It\u0027s doing the job for now \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u00A0 \u003Ca href=\u0022http://i.imgur.com/TNvZcfM.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/TNvZcfM.jpg\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-05T21:35:53Z\u0022 title=\u002210/05/2016 09:35  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 5, 2016\u003C/time\u003E by JeffSergeant\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-10-06T14:11:21Z","Content":"\n\u003Cp\u003E\nOh wow that\u0027s pretty simple. If no one objects, I\u0027ll add \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/74291-jeffsergeant/\u0026amp;do=hovercard\u0022 data-mentionid=\u002274291\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/74291-jeffsergeant/\u0022 rel=\u0022\u0022\u003E@JeffSergeant\u003C/a\u003E\u0027s implementation to the next update. I think delta V remaining is what everyone really wanted?\n\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-10-08T19:01:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222790312\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475763081\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6. 10. 2016 at 4:11 PM, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nis what everyone really wanted?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh yes, its someting realy missing \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0But isnt we running out of space in data packet?\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Anyone else already got CH340 module and test it? So we can finaly for 100% said where is issue with W10 and KSPIo\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-09T08:15:04Z\u0022 title=\u002210/09/2016 08:15  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 9, 2016\u003C/time\u003E by Mattew\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-10-10T18:49:46Z","Content":"\n\u003Cp\u003E\nI would simply replace the old node delta V value with delta V remaining. I would also like to add target speed and distance though.\n\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2016-10-11T05:38:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222796003\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476125386\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI would simply replace the old node delta V value with delta V remaining. I would also like to add target speed and distance though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI must have missed a memo... What did\u00A0node delta V even do? was it just a static\u00A0value of the total of a maneuver node? I mean, that\u0027s really only useful when paired\u00A0\u003Cem\u003Ewith\u003C/em\u003E remaining \u2206V, to calculate the percentage of a burn remaining.\u003Cbr\u003E\u003Cbr\u003E\nSeems to me like node \u2206V and remaining \u2206V could be used to recreate the analog \u0022burn meter\u0022 that\u0027s on the left of the in game navball... Or am I missing something?\u003Cbr\u003E\nI was planning on constructing the assembly below. It\u00A0displays maneuver node \u2206V remaining, time to burn, and displays via mechanical positioning, the percentage of the total burn remaining. It\u0027s a steel bar and a threaded rod, in a mechanism much like that of a floppy drive or optical drive head assembly.\u00A0It\u0027d read out the \u2206V remaining value,\u00A0and I figured I\u0027d have to manually set the node total \u2206V with a manual button to \u0022lock\u0022 the node in. Node remaining \u2206V is definitely the important one.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022KerbalCM_NodeDispaly.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://richfiles.solarbotics.net/eb/KerbalCM_NodeDispaly.png\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n(Spoilered to reduce clutter)\u003Cbr\u003E\nCurrent method of operation would be to set up a maneuver node in the game. When it\u0027s where I want, I\u0027d press a Maneuver Lock button on my controller, and the meter carriage would slide to the top position, and the maneuver node remaining \u2206V would be stored in a total \u2206V variable. The time to node and \u2206V will display on the meter carriage.\u00A0If remaining \u2206V drops, it\u0027ll read the numeric value live, and the carriage will drop lower based on the percentage of the remaining \u2206V out of the stored total \u2206V, from when the Maneuver Lock button is pressed. When it gets to 0 \u2206V, the meter carriage would be at the bottom of it\u0027s scale.\u003Cbr\u003E\u003Cbr\u003E\nTarget Speed and Distance is a big deal though. Most \u003Cem\u003Ecertainly\u003C/em\u003E need those... **Scratches head** Hmm... do we have maneuver and target vectors too? I don\u0027t recall.\u003Cbr\u003E\u003Cbr\u003E\nAnyone else feel like Arduinos are sitting right at the edge of just barely performing\u00A0all the stuff we \u003Cem\u003Ewant\u003C/em\u003E\u00A0them to do...\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-10-11T14:38:45Z","Content":"\n\u003Cp\u003E\nHmm.. can you not just save the delta V remaining at the start of the burn for your meter? \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257865\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0022 rel=\u0022\u0022\u003E@stibbons\u003C/a\u003E was working on the vector stuff.\n\u003C/p\u003E\n\u003Cp\u003E\nWe definitely are getting to the limit of what arduinos can handle. And to think when I started this I thought surely 255 bytes should be enough for everybody...\n\u003C/p\u003E\n\u003Cp\u003E\nMy long term plan is to make KSP send packets through UDP, and have a C# program that converts these to serial and sends the different packets to different \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E ports. This way you can have multiple arduinos plugged in the same computer and it should also solve the windows 10 problem. Seems like a lot of work though, probably will take a while I get around to doing it.\n\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2016-10-11T21:35:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222797247\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476196725\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHmm.. can you not just save the delta V remaining at the start of the burn for your meter? ...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s actually what I have planned... I\u0027m just \u003Cs\u003E\u00A0 confused \u00A0\u003C/s\u003E curious (naw, still confused\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u00A0) what the \u003Cem\u003Eold behavior\u003C/em\u003E\u00A0of node \u2206V was... Cause I\u0027d always assumed it worked like \u2206V remaining. As I said... Must have missed the memo, crossed the lines, etc, etc.\u003Cbr\u003E\u003Cbr\u003E\nI look forward to whatever Stibbons figures out!\u00A0\u003Cimg alt=\u0022:prograde:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/prograde3.png\u0022 title=\u0022:prograde:\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\nI don\u0027t know how the software you described would work to split\u00A0everything off, but if you ever achieve a piece of software that can indeed do just that, You\u0027ll have my respect and gratitude!\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-10-11T21:43:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222797247\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476196725\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0when I started this I thought surely 255 bytes should be enough for everybody...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNow littla noob question from me since I am not expert on these communications, we cant just add another 255 bytes? like send two packets ot something like that?\n\u003C/p\u003E\n\u003Cp\u003E\nOn that splitting data to diferent arduinos, I did and I am using kind of such thing. More hardware based.\u00A0My Mega2560 is acting as main board and there is little instruction that take speed data, save it as unit_32 value and then send over RX1,TX1 to UNO board which is acting as control procesor for nixie tubes. I like that concept so much that Iy plan to create for each function (displays, nixies, controls) to have its\u00A0own processor . Sound good.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-10-11T21:51:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222797247\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476196725\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257865\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0022 rel=\u0022\u0022\u003E@stibbons\u003C/a\u003E was working on the vector stuff.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nVery, very slowly. Last update, I was trying to get a decent handle on how vectors and quaternions work in Unity3D. That\u0027s painful to my brain that rarely has to write code more complex than Puppet manifests, and it\u0027s been taking a back seat to Real Life lately.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy long term plan is to make KSP send packets through UDP, and have a C# program that converts these to serial and sends the different packets to different \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E ports. This way you can have multiple arduinos plugged in the same computer and it should also solve the windows 10 problem. Seems like a lot of work though, probably will take a while I get around to doing it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027d been looking at how other flight sims implement their serial interfaces, particularly FlightGear and Objects in Space. On the one hand, I\u0027m not especially fond of introducing more latency with a network hop, even if it\u0027s over the loopback interface. But on the other hand, pulling the serial code out of KSP itself should address all of the weird cross-platform woes we experience using the Unity version of mono.\n\u003C/p\u003E\n"}]}