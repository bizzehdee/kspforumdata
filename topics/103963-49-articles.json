{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":49,"Articles":[{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2015-07-22T04:04:02Z","Content":"Hello\n\nSearching for more info about how is made a 3d planet to be pretty if found some interesting place what can be found for study, hope it help, there are for diferite section rendering, texture \u0026 many\n\n[http://vterrain.org/](http://vterrain.org/) a greath place were it can be found a lot info about rendering, maping, terain \u0026 many other thing, some link my be they will be broke or not work but is a good place for study\n\na place with how other was aprouch rendering cloud, sky, light\n\n[https://github.com/GameTechDev](https://github.com/GameTechDev)\n\nChapter 16. Accurate Atmospheric Scattering \u0026 other nice info\n\n[http://http.developer.nvidia.com/GPU...chapter16.html](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter16.html)\n\n[http://wiki.unity3d.com/index.php/Category:Cg_shaders](http://wiki.unity3d.com/index.php/Category:Cg_shaders)\n\n[http://wiki.unity3d.com/index.php/Shaders](http://wiki.unity3d.com/index.php/Shaders)\n\np.s. is not in my intention to make some false advertise but sharing info i guess it will benefit for all\n\ncheer"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-22T16:33:28Z","Content":"\u003E \n\u003E Are they here to stay or do you see a possibility to get rid of them some time in the future?\n\nIt\u0027s hard to tell, I don\u0027t have anything in mind right now otherwise I would have tried it already. Pretty sure it\u0027s the anisotropic filtering messing with the rendertextures used for storing the precomputed scattering tables but disabling anisotropic filtering on them only doesn\u0027t seem to do anything. I might find a solution later on, I learned a lot since I started this mod and I\u0027m still learning.\n\n\u003E \n\u003E Hello\n\u003E Searching for more info about how is made a 3d planet to be pretty if found some interesting place what can be found for study, hope it help, there are for diferite section rendering, texture \u0026 many\n\u003E \n\u003E [http://vterrain.org/](http://vterrain.org/) a greath place were it can be found a lot info about rendering, maping, terain \u0026 many other thing, some link my be they will be broke or not work but is a good place for study\n\u003E \n\u003E a place with how other was aprouch rendering cloud, sky, light\n\u003E \n\u003E [https://github.com/GameTechDev](https://github.com/GameTechDev)\n\u003E \n\u003E Chapter 16. Accurate Atmospheric Scattering \u0026 other nice info\n\u003E \n\u003E [http://http.developer.nvidia.com/GPU...chapter16.html](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter16.html)\n\u003E \n\u003E [http://wiki.unity3d.com/index.php/Category:Cg_shaders](http://wiki.unity3d.com/index.php/Category:Cg_shaders)\n\u003E \n\u003E [http://wiki.unity3d.com/index.php/Shaders](http://wiki.unity3d.com/index.php/Shaders)\n\u003E \n\u003E p.s. is not in my intention to make some false advertise but sharing info i guess it will benefit for all\n\u003E \n\u003E cheer\n\nI\u0027m familiar for most of these already except for the github link. Definitely some good stuff in there but I already have my hands full as is.\n\nFor the next version of scatterer I decided to do a quick wrapper for creating a scatterer instance within a certain radius of a planet and deleting it when leaving. This isn\u0027t the \u0022clean\u0022 way to do it but it will give multiple planet compatibility for people to play with while I work on doing it the clean way or working on fixing OpenGL or the oceans. This has the advantage of being really simple and quick to implement. The only two disadvantages I can think of is multiple instances of scatterer conflicting so there will only be one scatterer instance at one time (stock system should be fine but mods that have two planets with atmospheres in direct visibility of each other will have to only use the effect one planet at a time or lower the activation radius). The second disadvantage is that the effects will also be disabled in map view except for the planet you are close enough to to have scatterer active on it. Performance should be the same as the current build and there won\u0027t be any additional memory overhead. I\u0027ll have to create configs for Duna, Eve and laythe (shame we don\u0027t have more bodies with atmospheres in KSP), Jool probably won\u0027t work well or will have to rely on EVE clouds for it\u0027s gas giant look.\n\nAlso there will be a 300-400mb drop in memory usage when leaving a planet\u0027s \u0022scatterer activation radius\u0022 but also a 300-400mb spike in memory usage when you approach one (I expect lots of people\u0027s games will crash when approaching planets after a long, memory-consuming trip in interplanetary space) as well as a 2-second freeze like the one you get when pressing alt-enter or worse.\n\nWhy I decided to do this before OpenGL? Because this shouldn\u0027t take long at all to do and will provide plenty of stuff to play with and for other modders to experiment with while I work on the features that should take longer.\n\n**Edited \u003Ctime datetime=\u00222015-07-22T16:38:14Z\u0022 title=\u002207/22/2015 04:38  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 22, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-07-22T18:50:34Z","Content":"hey ...\n\nAre there any known graphical glitches when forcing DX11? Currently my oceans are spazzing the hell out and I don\u0027t know why (I can deal, i\u0027m not epileptic).\n\nEDIT:\n\nSpecifically they\u0027re giving me a rapidly oscillating circular moire pattern during rocket ascent (never seen this with planes)\n\n**Edited \u003Ctime datetime=\u00222015-07-22T18:52:51Z\u0022 title=\u002207/22/2015 06:52  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 22, 2015\u003C/time\u003E by Captain Sierra**"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-07-22T18:54:03Z","Content":"\u003E \n\u003E hey ...\n\u003E Are there any known graphical glitches when forcing DX11? Currently my oceans are spazzing the hell out and I don\u0027t know why (I can deal, i\u0027m not epileptic).\n\u003E \n\u003E EDIT:\n\u003E \n\u003E Specifically they\u0027re giving me a rapidly oscillating circular moire pattern during rocket ascent (never seen this with planes)\n\n Are you using v0.0171? Blackrack had to do a compatibility fix for DX11"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-07-22T18:54:45Z","Content":"\u003E \n\u003E Are you using v0.0171? Blackrack had to do a compatibility fix for DX11\n\nI should be yes.\n\nEDIT: redownloading just in case.\n\n**Edited \u003Ctime datetime=\u00222015-07-22T18:58:12Z\u0022 title=\u002207/22/2015 06:58  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 22, 2015\u003C/time\u003E by Captain Sierra**"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-07-22T19:13:18Z","Content":"\u003E \n\u003E hey ...\n\u003E Are there any known graphical glitches when forcing DX11? Currently my oceans are spazzing the hell out and I don\u0027t know why (I can deal, i\u0027m not epileptic).\n\u003E \n\u003E EDIT:\n\u003E \n\u003E Specifically they\u0027re giving me a rapidly oscillating circular moire pattern during rocket ascent (never seen this with planes)\n\nPsychedelic man... ![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif) xD I hope that goes away with a new download. lol"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-07-22T21:20:30Z","Content":"Blackrack I can\u0027t tell you enough just how great this mod is. The view from space is amazing! No more blue soup indeed. But any hardware upgrades my box undergoes, I\u0027m going to blame on you ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Castun","CreatedById":4581,"CreatedDateTime":"2015-07-23T00:04:16Z","Content":"\u003E \n\u003E Thanks, OpenGL is hit and miss for scatterer, for some it works fine but for most people it doesn\u0027t, I\u0027d say win64 is a better idea.\n\nYeah, I\u0027ve noticed regular crashes after short periods when using Scatterer in OpenGL. It looks pretty, but sometimes it only lasts 10 minutes."},{"CreatedByName":"Teylo","CreatedById":122967,"CreatedDateTime":"2015-07-23T02:31:35Z","Content":"First of all, thanks for this amazing piece of work!\n\nSecondly, is there a way to get the \u0027haze\u0027 to work in the orbit map with mods like Kscale2 or 64K? It seems like the haze only covers the \u0027normal\u0027 sized Kerbin, and nothing else. Any way to get this to work or disable the normal sized haze in the orbit map is much appreciated! Sorry if this has been asked before, i searched a bit but the thread is quite long ;p"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-07-23T03:44:59Z","Content":"Is it possible to add scatterer effects to Eve, Duna, Jool, and Laythe?"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-07-23T04:13:35Z","Content":"\u003E \n\u003E Is it possible to add scatterer effects to Eve, Duna, Jool, and Laythe?\n\nYep! I think it\u0027s in the making right now. Don\u0027t quote me on that tho."},{"CreatedByName":"Flef","CreatedById":131935,"CreatedDateTime":"2015-07-23T08:36:29Z","Content":"I wonder if it \u0027ll be possible to add a haze to any planet independently it has an atmosphere or not."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-23T08:55:29Z","Content":"\u003E \n\u003E First of all, thanks for this amazing piece of work!\n\u003E Secondly, is there a way to get the \u0027haze\u0027 to work in the orbit map with mods like Kscale2 or 64K? It seems like the haze only covers the \u0027normal\u0027 sized Kerbin, and nothing else. Any way to get this to work or disable the normal sized haze in the orbit map is much appreciated! Sorry if this has been asked before, i searched a bit but the thread is quite long ;p\n\nThis was literally reported 2 pages back. There will be a fix when I get around to it.\n\n\u003E \n\u003E hey ...\n\u003E Are there any known graphical glitches when forcing DX11? Currently my oceans are spazzing the hell out and I don\u0027t know why (I can deal, i\u0027m not epileptic).\n\u003E \n\u003E EDIT:\n\u003E \n\u003E Specifically they\u0027re giving me a rapidly oscillating circular moire pattern during rocket ascent (never seen this with planes)\n\nThe shader works on dx11 but it\u0027s buggy and not recommended, I only recommend using dx9.\n\n\u003E \n\u003E I wonder if it \u0027ll be possible to add a haze to any planet independently it has an atmosphere or not.\n\nIt will be possible, though I have no idea why you\u0027d want to do that. If you want to simulate a very very thin atmosphere it\u0027s probably not worth the memory cost. On a related note I thought adding an atmosphere to Eeeloo would make it look like the ice planet from interstellar, at least from orbit.\n\nEdited: started work on multiplanets\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/p5Lhe)\n\nbtw I only just noticed that duna\u0027s surface is pretty boring, not a single interesting feature in sight.\n\n**Edited \u003Ctime datetime=\u00222015-07-24T09:41:38Z\u0022 title=\u002207/24/2015 09:41  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 24, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"SmallFatFetus","CreatedById":137860,"CreatedDateTime":"2015-07-23T20:03:43Z","Content":"\u003E \n\u003E This was literally reported 2 pages back. There will be a fix when I get around to it.\n\u003E Edited: started work on multiplanets\n\u003E \n\u003E [http://imgur.com/a/p5Lhe](http://imgur.com/a/p5Lhe)\n\nHmm. I like the atmosphere color, but I feel like it could be much denser and less black when you look up. Mars has an actual sky, and its atmospheric pressure is 0.6% of earths. Duna\u0027s pressure is 20% of Kerbin\n\n. \n\n![K4ztt2Q.jpg](http://i.imgur.com/K4ztt2Q.jpg)\n\nHere\u0027s a picture of Martian clouds as well. They ought to be very white and very thin on Duna. (I know Rbray is the EVE dev. I just wanted to put my opinion out there) The black is a little weird looking.\n\nAlso, do we have nice blue/grey sunsets? ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)\n\nThanks for all of your work on this, blackrack. It\u0027s beautiful. Can\u0027t wait for Jool and Laythe.\n\n**Edited \u003Ctime datetime=\u00222015-07-23T20:06:16Z\u0022 title=\u002207/23/2015 08:06  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 23, 2015\u003C/time\u003E by SmallFatFetus**\n  \nfixed image"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-07-23T20:50:01Z","Content":"\u003E \n\u003E This was literally reported 2 pages back. There will be a fix when I get around to it.\n\u003E The shader works on dx11 but it\u0027s buggy and not recommended, I only recommend using dx9.\n\u003E \n\u003E It will be possible, though I have no idea why you\u0027d want to do that. If you want to simulate a very very thin atmosphere it\u0027s probably not worth the memory cost. On a related note I thought adding an atmosphere to Eeeloo would make it look like the ice planet from interstellar, at least from orbit.\n\u003E \n\u003E Edited: started work on multiplanets\n\u003E \n\u003E [http://imgur.com/a/p5Lhe](http://imgur.com/a/p5Lhe)\n\nO\\_O Gorgeous."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-23T21:50:23Z","Content":"\u003E \n\u003E Hmm. I like the atmosphere color, but I feel like it could be much denser and less black when you look up. Mars has an actual sky, and its atmospheric pressure is 0.6% of earths. Duna\u0027s pressure is 20% of Kerbin\n\u003E . \n\u003E \n\u003E [http://i.imgur.com/K4ztt2Q.jpg](http://i.imgur.com/K4ztt2Q.jpg)\n\u003E \n\u003E Here\u0027s a picture of Martian clouds as well. They ought to be very white and very thin on Duna. (I know Rbray is the EVE dev. I just wanted to put my opinion out there) The black is a little weird looking.\n\u003E \n\u003E Also, do we have nice blue/grey sunsets? ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)\n\u003E \n\u003E Thanks for all of your work on this, blackrack. It\u0027s beautiful. Can\u0027t wait for Jool and Laythe.\n\nDon\u0027t worry, that was a first try without changing the atmospheric height. You can already see it\u0027s too small for the planet because in the orbit pic you can see mountains outside the atmosphere. I\u0027m just working on getting the atmosphere\u0027s color right for now\n\nI didn\u0027t take screens of them earlier but the blue/grey sunsets are absolutely gorgeous.\n\nEdited: Your pic seems to be showing a bit of black though, but only a bit."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-07-23T22:11:30Z","Content":"\u003E \n\u003E Don\u0027t worry, that was a first try without changing the atmospheric height. You can already see it\u0027s too small for the planet because in the orbit pic you can see mountains outside the atmosphere. I\u0027m just working on getting the atmosphere\u0027s color right for now\n\u003E I didn\u0027t take screens of them earlier but the blue/grey sunsets are absolutely gorgeous.\n\u003E \n\u003E Edited: Your pic seems to be showing a bit of black though, but only a bit.\n\nI\u0027m very excited for this."},{"CreatedByName":"SmallFatFetus","CreatedById":137860,"CreatedDateTime":"2015-07-24T01:59:00Z","Content":"\u003E \n\u003E I didn\u0027t take screens of them earlier but the blue/grey sunsets are absolutely gorgeous.\n\nOHBOYOHBOYOHBOYOHBOYOHBOYOHBOY!\n\nuncaps"},{"CreatedByName":"fatbrother","CreatedById":123353,"CreatedDateTime":"2015-07-24T10:20:23Z","Content":"On Linux, the picture is horrible: weird colors, concentric circles all over the screen.\n\nOn win7 with similar graphic settings and same set of other plugins the picture is very good."},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-07-24T10:25:00Z","Content":"\u003E \n\u003E On Linux, the picture is horrible: weird colors, concentric circles all over the screen.\n\u003E On win7 with similar graphic settings and same set of other plugins the picture is very good.\n\n1, Linux uses OpenGL\n\n2, Read the OP."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-07-24T10:28:20Z","Content":"\u003E \n\u003E On Linux, the picture is horrible: weird colors, concentric circles all over the screen.\n\u003E On win7 with similar graphic settings and same set of other plugins the picture is very good.\n\nFrom the OP: \u0022Postprocessing in OpenGL seems to be messed up because of the new method for reconstructing world positions from depth buffer, I\u0027ll fix this as soon as I can.\u0022 As I understand it DX9 is the only fully working version right now, you\u0027ll have to be patient for better OpenGL support.\n\nEdit: Ninja\u0027d."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-07-24T10:43:31Z","Content":"OpenGL, Blackrack suggests turning off anisotropic filtering might help with the circles and lines. Maybe."},{"CreatedByName":"Blowout","CreatedById":106845,"CreatedDateTime":"2015-07-24T18:17:39Z","Content":"\u003E \n\u003E This was literally reported 2 pages back. There will be a fix when I get around to it.\n\u003E The shader works on dx11 but it\u0027s buggy and not recommended, I only recommend using dx9.\n\u003E \n\u003E It will be possible, though I have no idea why you\u0027d want to do that. If you want to simulate a very very thin atmosphere it\u0027s probably not worth the memory cost. On a related note I thought adding an atmosphere to Eeeloo would make it look like the ice planet from interstellar, at least from orbit.\n\u003E \n\u003E Edited: started work on multiplanets\n\u003E \n\u003E [http://imgur.com/a/p5Lhe](http://imgur.com/a/p5Lhe)\n\u003E \n\u003E btw I only just noticed that duna\u0027s surface is pretty boring, not a single interesting feature in sight.\n\nLooks absolutely amazing. I can\u0027t wait to start mashing this together with EVE overhaul!"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-07-24T19:39:21Z","Content":"Hey Blackrack, what do Rim Blend and Power do?, also how can I alter the height of the horizon atmosphere, it\u0027s goes a bit too high above the horizon line in RSS giving earth an unrealistically thick looking atmosphere.\n\nThanks again for this amazing mod, it has brought a world of change to RVE visuals ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-07-24T20:49:58Z\u0022 title=\u002207/24/2015 08:49  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 24, 2015\u003C/time\u003E by pingopete**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-25T12:59:03Z","Content":"Magic hour on Duna:\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/S0kSC)\n\nLots of horizon artifacts to fix.\n\n![9J5qTDl.jpg](http://i.imgur.com/9J5qTDl.jpg)\n\ncompare with a real image:\n\n![pia19400-16.jpg](http://www.jpl.nasa.gov/images/msl/20150508b/pia19400-16.jpg)\n\n\u003E \n\u003E Hey Blackrack, what do Rim Blend and Power do?, also how can I alter the height of the horizon atmosphere, it\u0027s goes a bit too high above the horizon line in RSS giving earth an unrealistically thick looking atmosphere.\n\u003E Thanks again for this amazing mod, it has brought a world of change to RVE visuals ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nRim blend and rim power do control the \u0022edge glow\u0022 effect, they are actually a component of the stock atmosphere shader but I kept it because it looked good with scatterer. If they don\u0027t seem to do anything maybe you have the stock shader completely disabled in RSS.\n\nUnfortunately the horizon line issue starts arising when you change the atmosphere height too much, I just ran into the same issue with my Duna config and will start looking for a fix soon."}]}