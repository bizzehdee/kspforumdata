{"TopicId":117992,"ForumId":34,"TopicTitle":"[1.7-1.9] SMURFF: Simple Module adjUstments for Real-ish Fuel-mass Fractions 1.9.1 (02019 Nov 12)","CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-08T22:30:00Z","PageNum":15,"Articles":[{"CreatedByName":"Flavio hc16","CreatedById":183153,"CreatedDateTime":"2018-03-13T10:15:24Z","Content":"\u003E \n\u003E \n\u003E On 12/3/2018 at 3:36 AM, Kerbas\\_ad\\_astra said:\n\u003E \n\u003E \n\u003E The \u0022full\u0022 version of Interstellar Fuel Switch comes with a patch (InterstellarFuelSwitch/PatchManager/ActiveMMPatches/IntegrationLiquidFuelOxidizer.cfg) that adds a fuel switcher module to all parts.  SMURFF has code which should handle that, though.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Unfortunately, I need to ask you to sort through your mods and figure out exactly which ones are causing the issue.  I use most of those mods myself, and don\u0027t have this issue.\n\u003E \n\nis a problem with IFS, but changing the parameters of dry/wet ratio in the configs of that mod in patch manager/activeMMpatches, for the integration liquid fuel and integration liquid fuel-oxidizer solved my problem. Thanks for help still"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-03-21T14:57:28Z","Content":"I realize that major solar system mods are not yet released for KSP 1.4, but I\u0027ve got a little spare time right now, so I\u0027ll pre-emptively release **[SMURFF version 1.8.0 \u0022Kerbal Equinox\u0022](https://github.com/Kerbas-ad-astra/SMURFF/releases/tag/v1.8.0)**!\n\n- Updated xenon patches to new balance of stock tanks. Because those changes were made in KSP 1.4.0, **this version and later versions are not compatible with KSP 1.3.1**."},{"CreatedByName":"Seio","CreatedById":115785,"CreatedDateTime":"2018-05-22T23:46:22Z","Content":"Any tweaks for realistic settings for stock planets?\n\nI think it\u0027s a lot smarter to adjust settings based on Kerbins size, so we don\u0027t have to end up with 2 fps for a rocket barely able to get to \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-05-23T12:42:40Z","Content":"If you\u0027re playing on 10X, then everything\u0027s about the size of our solar system and leaving all the levers at \u00221\u0022 should be fine.  Maybe try 0.5 or so for 6.4X, 0.2 or 0.3 for 2X or 3.2X (or maybe 0, since that\u0027s kind of the point of doubling or tripling the size of the system, to make it harder but not impossible with stock parts).  I only use stock and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, so unfortunately I don\u0027t have any guidance from experience."},{"CreatedByName":"Seio","CreatedById":115785,"CreatedDateTime":"2018-05-23T17:18:19Z","Content":"Basically I want fuel to be heavier. Engines be lighter, and command pods etc to be lighter.\n\nHow would I go about to add a filter to make engines 11.5% (engine weight\\*0.115) of their weight and increase both fuel/oxifider and tank weights by 20%(liquidfuel\u0026oxifizer\u0026tank weight\\*1.2)? Might make everything too easy, so then maybe a slider to increase the weight by everything, by say 5%, or even up to 10%.\n\n**Edited \u003Ctime datetime=\u00222018-05-24T04:26:27Z\u0022 title=\u002205/24/2018 04:26  AM\u0022 data-short=\u00226 yr\u0022\u003EMay 24, 2018\u003C/time\u003E by Seio**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-05-24T16:20:10Z","Content":"I\u0027m not sure why you would want fuel to be heavier, but making engines and command pods lighter is one of the things that SMURFF does.  You can change the values of \u0022enginelever\u0022 and \u0022podlever\u0022 to adjust the degree of lightening.  (0 means no change from stock, 1 is good for \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E and similarly-sized systems, and in-between is in-between.)"},{"CreatedByName":"Seio","CreatedById":115785,"CreatedDateTime":"2018-05-24T17:35:01Z","Content":"It\u0027s to keep the weight relatively normal for stock kerbin. If engines are ligther then something else has to be heavier, and I think fuel tanks and fuel take up the vast majority of rocket mass."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-05-24T18:06:40Z","Content":"Well, setting the tanklever to be negative should do what you want, but I haven\u0027t tested it under circumstances like that, so you\u0027re on your own if the math gets weird."},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2018-05-25T14:09:58Z","Content":"[@Kerbas_ad_astra](https://forum.kerbalspaceprogram.com/index.php?/profile/126593-kerbas_ad_astra/) some question, just your humble opinion needed:\n\nPlaying stock system \u002B OPM \u002B ExtraSolar, but 10x Rescale (no Resize!) - so the planets and moons have the same sizes but 10x the semi-major axes.\n\nThis is kinda \u0022dumb and weird\u0022 from some perspective, because the orbital speed is stock (so roughly ~2,300 m/s at Kerbin), but for \u0022fuel efficient\u0022 transfers to another planets a lot more time is needed because the initial body-relative speed during eject is lower plus the distance is higher.\n\nI\u0027m not sure if I should set all SMURFF levers to 1.0 or to 0.5 or even set different values to tanklever, enginelever and podlever.\n\nWhat is your suggestion?"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-05-26T01:16:26Z","Content":"I\u0027m not sure I\u0027d use SMURFF at all.  Your interplanetary transfer burns will be a few kilometers per second, but that\u0027s comparable to the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E requirement to \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E, which stock parts are well-balanced to handle.\n\nIf you must use SMURFF, I wouldn\u0027t set the podlever at all, have tanklever and enginelever no more than 0.5, and maybe even less."},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2018-07-10T14:14:59Z","Content":"[@Kerbas_ad_astra](https://forum.kerbalspaceprogram.com/index.php?/profile/126593-kerbas_ad_astra/) actually I\u0027m testing with a 10.625x resize and rescale.\n\nI created this additional patch:  \n\nGameData\\zFinal\\zzz\\_SMURFF.cfg\n\n    @SMURFFCONFIG:NEEDS[SMURFF,Kerbalism,!SigmaDimensions,!RealismOverhaul]:BEFORE[zzz_SMURFF]\n    {// 1 = real-ish performance (\u0022classic\u0022 SMURFF), 0 = stock, and anything in between is in between.  Probably shouldn\u0027t go beyond 1, since strange things might happen if too much mass gets subtracted.@tanklever = 0@enginelever = 0@podlever = 0.3\n    }\n    \n    @SMURFFCONFIG:NEEDS[SMURFF,SigmaDimensions,!RealismOverhaul]:BEFORE[zzz_SMURFF]\n    {systemScale = #$@SigmaDimensions/Resize$@tanklever = 1@enginelever = 1@podlever = 1@tanklever *= #$systemScale$@enginelever *= #$systemScale$@podlever *= #$systemScale$@tanklever /= 10.625@enginelever /= 10.625@podlever /= 10.625!systemScale = delete\n    }\n    \n    @SMURFFCONFIG:NEEDS[SMURFF,Kerbalism,SigmaDimensions,!RealismOverhaul]:BEFORE[zzz_SMURFF]\n    {@podlever \u002B= 0.3\n    }\n    \n    @SMURFFCONFIG:NEEDS[SMURFF,SigmaDimensions,!RealismOverhaul]:HAS[#tanklever[\u003E1]]:BEFORE[zzz_SMURFF]\n    {@tanklever = 1\n    }\n    \n    @SMURFFCONFIG:NEEDS[SMURFF,SigmaDimensions,!RealismOverhaul]:HAS[#enginelever[\u003E1]]:BEFORE[zzz_SMURFF]\n    {@enginelever = 1\n    }\n    \n    @SMURFFCONFIG:NEEDS[SMURFF,SigmaDimensions,!RealismOverhaul]:HAS[#podlever[\u003E1]]:BEFORE[zzz_SMURFF]\n    {@podlever = 1\n    }\n\ntechnically it works, but at that scale I cannot just use the same vessel to get into orbit at all, right?\n\nI mean even not when rebuilding it from scratch with fresh parts from the part list.\n\nFor example a Bluedog DB Vanguard setup with a payload of a few kg does not exceed a \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of likely ~ 6,000 m/s what is less than a third of what is needed.\n\nYou say \u0022Probably shouldn\u0027t go beyond 1, since strange things might happen if too much mass gets subtracted.\u0022 ...\n\nHow could I achieve that I get about 66% more \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E without having higher lever values than 1 ?\n\nCould I patch internal values of the main SMURFF config?  \n\nAnd if yes, which ones and how?\n\nI do this crazy tinkering because the ROMini.cfg does not fit, it creates weird overlapping at fairings and even more weirdness at Procedural Fairings.\n\nI just hoped that SMURFF is capable of working with a \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E comparable scaling.\n\nEdit:\n\nI forgot\u2122 that BDB uses the %SMURFFExclude = true ...\n\nSo to avoid that one inside the BDB patches:\n\n    @BDBRESCALECONFIG:HAS[#systemScale[\u003E6.4]]:BEFORE[zzzBluedog_DB_1]\n    {@systemScale = 6.4 // Adjustments are not valid beyond this scale\n    }\n\nI had to add this to my patch:\n\n    @PART[bluedog*,Bluedog*]:NEEDS[SigmaDimensions,Bluedog_DB]:AFTER[zzzBluedog_DB_1]\n    {%bdbSystemScale = #$@SigmaDimensions/Resize$\n    }\n\nI will test if that is enough to fix...\n\nEdit:\n\nThat didn\u0027t work so I try it with this instead:\n\n    @PART[*]:HAS[@MODULE[ModuleEngines*]]:NEEDS[SMURFF,SigmaDimensions,!RealismOverhaul]:AFTER[zzz_SMURFF]\n    {@MODULE,*:HAS[#name[ModuleEngines*]]{\ttempx = #$@SigmaDimensions/Resize$\t@tempx *= 0.056470588235294117647058823529412\t@tempx \u002B= 1\t@maxThrust *= #$tempx$\t!tempx = delete}\n    } \n    \n    @BDBRESCALECONFIG:NEEDS[SigmaDimensions,Bluedog_DB]:BEFORE[zzzBluedog_DB_1]\n    {@systemScale = #$@SigmaDimensions/Resize$%scaleFactor = #$systemScale$@scaleFactor -= 1tempz = #$systemScale$@tempz /= 1.4143094841930116472545757071547@scaleFactor /= #$tempz$!tempz = delete\n    }\n\n**Edited \u003Ctime datetime=\u00222018-07-10T17:09:51Z\u0022 title=\u002207/10/2018 05:09  PM\u0022 data-short=\u00226 yr\u0022\u003EJuly 10, 2018\u003C/time\u003E by Gordon Dry**\n  \nhow crank will it become?"},{"CreatedByName":"Nightside","CreatedById":150244,"CreatedDateTime":"2018-07-17T13:21:23Z","Content":"[@Gordon Dry](https://forum.kerbalspaceprogram.com/index.php?/profile/163177-gordon-dry/), if I understand correctly you are playing in a real-sized system, with BDB parts - but have those parts been resized to real-life sizes? \n\nSMURFF will give you realistic mass ratios, but all your tanks will still be at kerbal scale (~5/8 = 0.625:1).\n\nThis means that the tanks will only have approximately 0.625^3^ = 0.24 the volume of the real-sized tank and your delta-v will be too low.\n\nI have tried to address this in the Transmogrifer\\* mod (link in my sig), which increases the size of all models to a realish size and increases tank capacity as well. Then it  SMURFF applies realistic mass ratios for the new volume. \n\n\\*Transmogrifier it is still a work in progress and not tested in current KSP, I just graduated and started a new job so I haven\u0027t been working at it much lately."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-07-17T18:37:57Z","Content":"Or use larger parts, such as from SpaceY Expanded or Near Future Launch Vehicles, which include 7.5/10 meter parts (the size of Saturn V and SLS)."},{"CreatedByName":"Marandil","CreatedById":191504,"CreatedDateTime":"2018-09-01T19:22:09Z","Content":"Hey guys, I\u0027ve installed SMURFF today and I\u0027m getting a single ModuleManager error:\n\n    [WRN 20:56:45.255] [ModuleManager] Cannot find key addedMass in SUBTYPE\n    [ERR 20:56:45.256] [ModuleManager] Error - Cannot parse variable search when inserting new key modMass = #$/MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LH2]]/SUBTYPE[LH2]/addedMass$\n\nAFAICT, that\u0027s caused by the line #1022 in SMURFF.cfg.\n\nIs it caused by an error in config, or is something else interfering here? I don\u0027t know \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E syntax well enough to understand what\u0027s the root cause ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-09-02T00:03:58Z","Content":"Could you please give me a list of mods you\u0027re using, and if possible a log file?"},{"CreatedByName":"Marandil","CreatedById":191504,"CreatedDateTime":"2018-09-02T09:21:06Z","Content":"[@Kerbas_ad_astra](https://forum.kerbalspaceprogram.com/index.php?/profile/126593-kerbas_ad_astra/) here you go:   \n[https://gist.github.com/Marandil/4cb3afa381a10503c3923d8d25365a85](https://gist.github.com/Marandil/4cb3afa381a10503c3923d8d25365a85)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-09-02T11:41:36Z","Content":"That log doesn\u0027t reach the part where ModuleManager does its thing, and to help you, I need to see what part it was patching when the error occurred."},{"CreatedByName":"Marandil","CreatedById":191504,"CreatedDateTime":"2018-09-02T11:46:22Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, Kerbas\\_ad\\_astra said:\n\u003E \n\u003E \n\u003E That log doesn\u0027t reach the part where ModuleManager does its thing, and to help you, I need to see what part it was patching when the error occurred.\n\u003E \n\nIn Gist, click on \u0022view the full file\u0022 or \u0022Raw\u0022, it\u0027s there (search for [ERR 21:27:47.064])\n\nDirect RAW links:  \n[https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/KSP.log](https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/KSP.log)  \n[https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003Eckan\u003C/abbr\u003E.list](https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/ckan.list)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-09-02T16:35:49Z","Content":"The direct issue is that Tundra Exploration\u0027s B9 tank switching patch is not using the \u0027addedMass\u0027 variable, but line 1020 should be checking that the addedMass variable is used, so the patch shouldn\u0027t be acting on that part.  I\u0027ll have to test if that check is actually working as intended."},{"CreatedByName":"Walker","CreatedById":103329,"CreatedDateTime":"2018-09-05T09:02:19Z","Content":"Hello,\n\nIt\u0027s not really a big deal, but it seems that SMURFF does not work with Universal Storage II mod - it does not affect mass of tanks added by this mod. I wrote about it in US II thread and Daishi directed me here ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-09-13T05:09:16Z","Content":"\u003E \n\u003E \n\u003E On 9/5/2018 at 5:02 AM, Walker said:\n\u003E \n\u003E \n\u003E Hello,\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It\u0027s not really a big deal, but it seems that SMURFF does not work with Universal Storage II mod - it does not affect mass of tanks added by this mod. I wrote about it in US II thread and Daishi directed me here ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nThanks for the heads-up; I\u0027ll take a look at it for the next release."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-09-16T21:01:31Z","Content":"\u003E \n\u003E \n\u003E On 9/2/2018 at 7:46 AM, Marandil said:\n\u003E \n\u003E \n\u003E In Gist, click on \u0022view the full file\u0022 or \u0022Raw\u0022, it\u0027s there (search for [ERR 21:27:47.064])\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Direct RAW links:  \n\u003E [https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/KSP.log](https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/KSP.log)  \n\u003E [https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003Eckan\u003C/abbr\u003E.list](https://gist.githubusercontent.com/Marandil/4cb3afa381a10503c3923d8d25365a85/raw/43f31265743215e11bb99946eec918ef432a94a9/ckan.list)\n\u003E \n\nI\u0027ve figured it out!\n\nThe issue is that the TE\\_F9\\_S1\\_Tank part has a patch (Extra\\_B9Tanks.cfg) which adds a B9 fuel-switching module, but then CryoTanks adds another fuel-switching module because the TE\\_F9\\_S1\\_Tank has standalone LiquidFuel and Oxidizer resources (lines 39-50).  The fuel-switching module from CryoTanks has an addedMass variable defined, so the check in SMURFF.cfg line 1020 passes, but when SMURFF tries to grab that variable in line 1022, it looks in Tundra\u0027s fuel-switching patch (since it was added first), which does not have addedMass defined, and so the error occurs.\n\nSince none of the other TE fuel tanks have RESOURCE blocks like TE\\_F9\\_S1\\_Tank does, I think that\u0027s an error on the part of tygoo7 and/or damonvv.  If they remove those RESOURCE blocks, the issue is resolved."},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2018-09-29T18:02:55Z","Content":"darn, wrong thread, where is my coffee?\n\n**Edited \u003Ctime datetime=\u00222018-09-29T18:06:15Z\u0022 title=\u002209/29/2018 06:06  PM\u0022 data-short=\u00225 yr\u0022\u003ESeptember 29, 2018\u003C/time\u003E by Gordon Dry**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2018-10-03T18:51:57Z","Content":"I haven\u0027t used it myself, but SMURFF has a check at the end to make sure nothing gets a negative mass, so at a minimum nothing should \u0027break\u0027, and OhioBob says he used the Kickback \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E as a performance baseline, which is also the one that I used when setting SMURFF\u0027s balance factors, so I expect things should work out well."},{"CreatedByName":"slaintemaith","CreatedById":14568,"CreatedDateTime":"2018-10-12T23:47:40Z","Content":"Anyone had any luck heaving this into orbit with SMURFF?  \n\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed4815627905\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/176505-12x13x14x-saturnv-v103-d160718/\u0026do=embed\u0022 style=\u0022height:227px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\nI\u0027m at my wit\u0027s end.  \n\nI know that\u0027s not saying much.  \n\nI didn\u0027t have that much from the outset."}]}