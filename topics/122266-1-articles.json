{"TopicId":122266,"ForumId":29,"TopicTitle":"Reversing Gravity and Attracting Objects Towards Each Other","CreatedByName":"gurntmaster1","CreatedById":151906,"CreatedDateTime":"2015-10-04T01:41:24Z","PageNum":1,"Articles":[{"CreatedByName":"gurntmaster1","CreatedById":151906,"CreatedDateTime":"2015-10-04T01:41:24Z","Content":"\n\u003Cp\u003EI wanted to implement some new devices fueled by space magic, but as I am new to KSP modding and ended Physics at 10th grade, figuring out the proper areas and variables to alter has been a bit hard.\u003C/p\u003E\u003Cp\u003EFor now I have added an (almost) functional velocity negater.\u003C/p\u003E\u003Cp\u003EMy questions are for some other devices though. One device is an accelerator ring that applies thrust (or what the proper term would be for this case) to itself and either a specific, or all nearby vessels. In practice it will function as a form of rail gun, applying \u0022free\u0022 thrust to another vessel, but having to correct its orbit due to having the \u0022thrust\u0022 also applied to itself.\u003C/p\u003E\u003Cp\u003EMy main questions are: 1. how to locate the nearby vessel(-s). 2. check the distance between the Accelerator Ring and the vessels. 3. How to perform the attraction between them.\u003C/p\u003E\u003Cp\u003EThe second device is a repulsion system that works by inversing the force of the main body\u0027s gravity. I am a bit stuck here on how to aproach it. Is there a variable defining the force applied to the vessel by gravity that can be altered? Should a velocity vector be altered based on current altitude (please include formulars \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)? Or is there some other aproach.\u003C/p\u003E\n"},{"CreatedByName":"gurntmaster1","CreatedById":151906,"CreatedDateTime":"2015-10-04T17:54:02Z","Content":"\n\u003Cp\u003EI apologise if this against forum rules, but I felt it was better to post an answer in a seperate post for future reference.\u003C/p\u003E\u003Cp\u003ESo, I actually found an answer to the Gravity Inverter, which I had thought would be the hardes/impossible one. Sadly, I can\u0027t take much credit for it as it was mostly copy pasting from one of the anti-gravity mods with some slight tweaking to it. You can find the mod here: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/9618-PLUGIN-PARTS-0-16-Gravity-Canceller-v1-1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/9618-PLUGIN-PARTS-0-16-Gravity-Canceller-v1-1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHere is the final code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace MyKSPProject\u003Cbr\u003E{\u003Cbr\u003E    class GravityInverter : PartModule\u003Cbr\u003E    {\u003Cbr\u003E        [KSPField(isPersistant=true)]\u003Cbr\u003E        public bool isActive=false;\u003Cbr\u003E\u003Cbr\u003E        private const float geeForceAtKerbin = 9.81F;\u003Cbr\u003E        private const float maxGee = 5F;\u003Cbr\u003E        private float torque = 0F;\u003Cbr\u003E\u003Cbr\u003E        public override void OnFixedUpdate()\u003Cbr\u003E        {\u003Cbr\u003E            base.OnFixedUpdate();\u003Cbr\u003E\u003Cbr\u003E            if (!isActive)\u003Cbr\u003E                return;\u003Cbr\u003E\u003Cbr\u003E            if (rigidbody != null)\u003Cbr\u003E            {\u003Cbr\u003E                Vector3 gee = FlightGlobals.getGeeForceAtPosition(transform.position);\u003Cbr\u003E                float velocity = Vector3.Dot(gee.normalized, rigidbody.velocity);\u003Cbr\u003E\u003Cbr\u003E                torque = FlightInputHandler.state.mainThrottle * 2;\u003Cbr\u003E\u003Cbr\u003E                foreach (Part p in vessel.parts)\u003Cbr\u003E                    if ((p.physicalSignificance == Part.PhysicalSignificance.FULL) \u0026amp;\u0026amp;\u003Cbr\u003E                        (p.rigidbody != null))\u003Cbr\u003E                        p.rigidbody.AddForce(-gee * p.rigidbody.mass * torque);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        [KSPEvent(guiActive= true, guiName=\u0022Activate\u0022)]\u003Cbr\u003E        public void ActivateEvent()\u003Cbr\u003E        {\u003Cbr\u003E            isActive = true;\u003Cbr\u003E\u003Cbr\u003E            Events[\u0022ActivateEvent\u0022].active = false;\u003Cbr\u003E            Events[\u0022DeactivateEvent\u0022].active = true;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        [KSPEvent(guiActive = true, guiName = \u0022Deactivate\u0022, active = false)]\u003Cbr\u003E        public void DeactivateEvent()\u003Cbr\u003E        {\u003Cbr\u003E            isActive = false;\u003Cbr\u003E\u003Cbr\u003E            Events[\u0022ActivateEvent\u0022].active = true;\u003Cbr\u003E            Events[\u0022DeactivateEvent\u0022].active = false;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen activated, it will cancel gravity at 50 % throttle, reduce it below 50 % and invert it above 50 %.\u003C/p\u003E\n"}]}