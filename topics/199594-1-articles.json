{"TopicId":199594,"ForumId":109,"TopicTitle":"PhysX, CPU or GPU?","CreatedByName":"Jeq","CreatedById":172375,"CreatedDateTime":"2021-01-14T15:38:09Z","PageNum":1,"Articles":[{"CreatedByName":"Jeq","CreatedById":172375,"CreatedDateTime":"2021-01-14T15:38:09Z","Content":"\n\u003Cp\u003E\nDoes it support\u00A0GPU based physX instead of forced CPU? I am trying to guess how smooth gameplay we will have.\n\u003C/p\u003E\n"},{"CreatedByName":"shdwlrd","CreatedById":113880,"CreatedDateTime":"2021-01-14T17:39:08Z","Content":"\n\u003Cp\u003E\nDon\u0027t know. Nothing has been said about that.\n\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2021-01-14T20:50:25Z","Content":"\n\u003Cp\u003E\nIt seems unlikely that they\u0027ll work on integrating the CUDA branch of PhysX over the integrated CPU-only branch of PhysX as this would only benefit PC players, and then only those with suitable\u00A0nvidia cards\n\u003C/p\u003E\n\u003Cp\u003E\nCould get \u003Ca href=\u0022https://blogs.unity3d.com/2019/11/06/havok-physics-in-unity/\u0022 rel=\u0022external nofollow\u0022\u003EHAVOK \u003C/a\u003Ethough?\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-01-15T02:00:28Z","Content":"\n\u003Cp\u003E\nCPU PhysX only, but we might get some of the multithreading optimizations from recent Unity versions.\n\u003C/p\u003E\n\u003Cp\u003E\nHavok\u0027s unlikely, as that requires ECS/DOTS setup, and it sounds like Intercept is building KSP2 on GameObjects, same as original KSP. It would be amazing for both stability and performance, but seems unlikely.\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-01-15T10:31:59Z","Content":"\n\u003Cp\u003E\nUnity\u0027s implementation of PhysX is CPU only, so absolutely no on GPU accelerated physics.\n\u003C/p\u003E\n\u003Cp\u003E\nBut they have plenty of other ways to get it smooth.\n\u003C/p\u003E\n"},{"CreatedByName":"Jeq","CreatedById":172375,"CreatedDateTime":"2021-01-15T12:38:55Z","Content":"\n\u003Cp\u003E\nSounds like we get same or worse performance as original KSP. Worse if physx is same as now and there will be more calculations done. Physics needs be totally rewritten or this will be disappointing\u00A0sequel.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-15T12:39:59Z\u0022 title=\u002201/15/2021 12:39  PM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 15, 2021\u003C/time\u003E by Jeq\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-01-15T12:50:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223909332\u0022 data-ipsquote-contentid=\u0022199594\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221610714335\u0022 data-ipsquote-userid=\u0022172375\u0022 data-ipsquote-username=\u0022Jeq\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Jeq said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSounds like we get same or worse performance as original KSP. Worse if physx is same as now and there will be more calculations done. Physics needs be totally rewritten or this will be disappointing\u00A0sequel.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t know why everyone thinks the only approach is to either put it on the GPU or multiple threads.....\n\u003C/p\u003E\n\u003Cp\u003E\nThey\u0027ve spoken at length about a physics LOD system that will take large numbers of parts that aren\u0027t changing much between cycles and \u0022Weld\u0022 them into a single part for the purpose of those calculations until each one individually is needed for the calculations again (Like a collision). That alone will massively reduce the CPU load, as the amount of calculations needed as part count increases isn\u0027t linear.\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s also much, much they can do just from the backend, and reducing the amount of poorly optimized code that\u0027s updating when it isn\u0027t needed or likewise.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically, there\u0027s no reason to think KSP2 will be a performance hog unless they absolutely fail on all counts. We\u0027ll know for sure once it releases.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-01-15T21:34:01Z","Content":"\n\u003Cp\u003E\nWell, nobody actually\u00A0\u003Cem\u003Ereally\u003C/em\u003E\u00A0does physics on GPU anyways. Yes, I know that was supposed to be one of the big selling points of PhysX, but nobody wants to use GPU resources for it, and most of the stuff you\u0027d want to do massively in parallel for physics, GPUs weren\u0027t terribly good at. With RTX, that can actually change quite a bit, because BVH accelerators for RT can be used for collision checks as well. But if your options are to have ray tracing or GPU physics, which one are you going to chose? Pretty much every game out there goes with more graphics and does all the physics on CPU as that\u0027s usually enough anyways.\n\u003C/p\u003E\n\u003Cp\u003E\nEven KSP isn\u0027t bound so much by the amount of physics that needs to be done as by how bad Unity is at physics. Newer versions of Unity are better at utilizing CPU resources, so we should see improvements in physics even just from that. And yes, there are a lot of optimizations that can be taken. I am a bit concerned about how these optimizations were talked about early on, because that was happening at the same time Intercept had an opening for a senior physics engineer, and we haven\u0027t heard anything about it since that position got filled, but even replicating what KSP did with some Unity improvements they get \u0022for free\u0022 should be a good start. If they can combine some modules into larger rigid bodies, that will help a lot, and shouldn\u0027t be too difficult to do, so fingers crossed.\n\u003C/p\u003E\n\u003Cp\u003E\nJust please, remember to use parallel axis theorem correctly. If I had a nickel for every time I have to go into a physics engine and fix how the moment of inertia tensor is built, I\u0027d have a few nickels, which isn\u0027t a lot, but it\u0027s weird\u00A0that this keeps happening.\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-01-16T05:17:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223909612\u0022 data-ipsquote-contentid=\u0022199594\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221610746441\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EWell, nobody actually\u00A0\u003Cem\u003Ereally\u003C/em\u003E\u00A0does physics on GPU anyways\u003C/strong\u003E. Yes, I know that was supposed to be one of the big selling points of PhysX, but nobody wants to use GPU resources for it, and most of the stuff you\u0027d want to do massively in parallel for physics, GPUs weren\u0027t terribly good at. With RTX, that can actually change quite a bit, because BVH accelerators for RT can be used for collision checks as well. But if your options are to have ray tracing or GPU physics, which one are you going to chose? Pretty much every game out there goes with more graphics and does all the physics on CPU as that\u0027s usually enough anyways.\n\u003C/p\u003E\n\u003Cp\u003E\nEven KSP isn\u0027t bound so much by the amount of physics that needs to be done as by how bad Unity is at physics. Newer versions of Unity are better at utilizing CPU resources, so we should see improvements in physics even just from that. And yes, there are a lot of optimizations that can be taken. I am a bit concerned about how these optimizations were talked about early on, because that was happening at the same time Intercept had an opening for a senior physics engineer, and we haven\u0027t heard anything about it since that position got filled, but even replicating what KSP did with some Unity improvements they get \u0022for free\u0022 should be a good start. If they can combine some modules into larger rigid bodies, that will help a lot, and shouldn\u0027t be too difficult to do, so fingers crossed.\n\u003C/p\u003E\n\u003Cp\u003E\nJust please, remember to use parallel axis theorem correctly. If I had a nickel for every time I have to go into a physics engine and fix how the moment of inertia tensor is built, I\u0027d have a few nickels, which isn\u0027t a lot, but it\u0027s weird\u00A0that this keeps happening.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, last time i saw it was Borderlands 2.....\n\u003C/p\u003E\n\u003Cp\u003E\nAnd it only helped performance if you were massively CPU bound....\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2021-01-16T08:30:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIntercept had an opening for a senior physics engineer\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnd I\u0027m pretty sure that Squad, the Mexican multimedia company, didn\u0027t have access to that kind of resources when they developed the physics of KSP1.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m no expert and there\u0027s probably some bottleneck down the road on how much you can optimize KSP2 physics, but I bet that KSP1 is nowhere near that level of optimization.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-01-16T10:00:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223909864\u0022 data-ipsquote-contentid=\u0022199594\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221610785803\u0022 data-ipsquote-userid=\u002268648\u0022 data-ipsquote-username=\u0022Master39\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n52 minutes ago, Master39 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd I\u0027m pretty sure that Squad, the Mexican multimedia company, didn\u0027t have access to that kind of resources when they developed the physics of KSP1.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m no expert and there\u0027s probably some bottleneck down the road on how much you can optimize KSP2 physics, but I bet that KSP1 is nowhere near that level of optimization.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nA lot of the work that HarvesteR did would fall under the responsibilities of physics programmer, so I would argue that Squad did, in fact, have these kind\u00A0of resources. Availability of said resources to focus on physics tasks is a separate matter, however.\n\u003C/p\u003E\n\u003Cp\u003E\nKSP physics performance was abysmal. Part of it was certainly due to Squad having to work with limited resources, and part due to just the state of physics on Unity being in a really bad place, especially, at the time. KSP2 is in a better starting place just from having a more up-to-date version of Unity. So we should have better physics performance right away. However, Squad also spent a lot of time tuning joints to get stability, and the only footage I\u0027ve seen of KSP2 where you can see physics shows they haven\u0027t replicated that at that point. It\u0027s been a few months, and hopefully, they\u0027re further along, but it does point to the fact that they haven\u0027t even began core physics improvements. And that doesn\u0027t leave a lot of time to actually work on such features. So I\u0027m concerned about how much optimization will actually get done. Does it have to be done to ship the game? Not really. So long as they at least do the same stability pass that was done on KSP to reduce cases of Kraken, it\u0027ll be fine on PC and next gen. PS4/XB1 performance is where it\u0027s really going to hurt. It\u0027s also going to put some limits on how big we could build on any given hardware. But since I don\u0027t expect KSP2 to be\u00A0\u003Cem\u003Ethat\u003C/em\u003E\u00A0much heavier on physics, maybe that\u0027s good enough?\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-01-16T12:34:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223909879\u0022 data-ipsquote-contentid=\u0022199594\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221610791203\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA lot of the work that HarvesteR did would fall under the responsibilities of physics programmer, so I would argue that Squad did, in fact, have these kind\u00A0of resources. Availability of said resources to focus on physics tasks is a separate matter, however.\n\u003C/p\u003E\n\u003Cp\u003E\nKSP physics performance was abysmal. Part of it was certainly due to Squad having to work with limited resources, and part due to just the state of physics on Unity being in a really bad place, especially, at the time. KSP2 is in a better starting place just from having a more up-to-date version of Unity. So we should have better physics performance right away. However, Squad also spent a lot of time tuning joints to get stability, and the only footage I\u0027ve seen of KSP2 where you can see physics shows they haven\u0027t replicated that at that point. It\u0027s been a few months, and hopefully, they\u0027re further along, but it does point to the fact that they haven\u0027t even began core physics improvements. And that doesn\u0027t leave a lot of time to actually work on such features. So I\u0027m concerned about how much optimization will actually get done. Does it have to be done to ship the game? Not really. So long as they at least do the same stability pass that was done on KSP to reduce cases of Kraken, it\u0027ll be fine on PC and next gen. PS4/XB1 performance is where it\u0027s really going to hurt. It\u0027s also going to put some limits on how big we could build on any given hardware. But since I don\u0027t expect KSP2 to be\u00A0\u003Cem\u003Ethat\u003C/em\u003E\u00A0much heavier on physics, maybe that\u0027s good enough?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ntbh if they haven\u0027t gotten Physics LOD working, then that\u0027s going to severely limit the scope of their game.\n\u003C/p\u003E\n\u003Cp\u003E\nThey could work around it by using much larger, single parts to replicate the functionality of multiple, smaller ones. But if that was absent on launch, I\u0027d be tempted to not buy KSP2. And it doesn\u0027t seem like something they could patch in later with how deeply that would be ingrained into the game itself. PS4/XB1 Performance was always going to blow chunks, the question was just how many.\n\u003C/p\u003E\n\u003Cp\u003E\nIt comes back to where I\u0027ve been the entire time, if they\u0027ve spent the majority of the time on the CORE of the game then KSP2 will likely be a mess on launch....but fixable. If instead they never managed to get these enabling features/optimizations working? Well then it\u0027s never coming back after they go live.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s why I\u0027ve repeatedly said i don\u0027t give a **** about fancy graphics, or clouds or anything much else in KSP2 for that matter. Because before i can admire the surroundings of the game, they need to make sure it can actually sustain the demand placed on it. Do i think they can pull it off? They might already have, we don\u0027t know what internal builds they\u0027re working with. But could it also be a massive dumpster fire? Yep\n\u003C/p\u003E\n\u003Cp\u003E\nI will say; either way it\u0027ll be fun to see the post mortem.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-01-16T22:21:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223909913\u0022 data-ipsquote-contentid=\u0022199594\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221610800448\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u0027s why I\u0027ve repeatedly said i don\u0027t give a **** about fancy graphics, or clouds or anything much else in KSP2 for that matter. Because before i can admire the surroundings of the game, they need to make sure it can actually sustain the demand placed on it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s not an either-or, regardless. It takes very different people to work on these tasks. It looks like Intercept got a good amount of art and tech art people from Star Theory, so they\u0027re running with what they have. I can\u0027t quite tell what the situation was at Star Theory, but as of formation of Intercept, they needed a physics engineer, and it took them a while to find one. And it\u0027s still not clear if they got somebody senior enough to make anything like the LoD system they\u0027ve talked about.\n\u003C/p\u003E\n\u003Cp\u003E\nNaturally, it\u0027s all limitation of budget. You can sink enough money into the search to guarantee you\u0027ll find people who will handle the work that needs to be done, but if it costs you as much as hiring five engineers, you\u0027re not going to ship on budget.\n\u003C/p\u003E\n"}]}