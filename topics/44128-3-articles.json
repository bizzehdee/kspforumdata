{"TopicId":44128,"ForumId":36,"TopicTitle":"Working Multiplayer Proof of Concept with video proof [No Longer In Production]","CreatedByName":"Pwolf","CreatedById":75262,"CreatedDateTime":"2013-08-28T04:32:40Z","PageNum":3,"Articles":[{"CreatedByName":"SolarLiner","CreatedById":41047,"CreatedDateTime":"2013-08-30T12:02:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swiftgates24\u0022 data-cite=\u0022swiftgates24\u0022\u003E\u003Cdiv\u003EThe biggest problem is the floating point/kraken, which I don\u0027t even fully understand, but at least I know timewarp isn\u0027t an issue.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUnity uses floats for the the transform values handling. A floating point precision number allows less and less precision on the decimal side to let bigger number stored. So the farthest you go from the center, the less precise the number will get. And then arrives the point where you don\u0027t have enough precision to precisely hold pieces together; they \u0022detaches\u0022 from the ship. Deep Space Kraken has waken up for ya.\u003C/p\u003E\u003Cp\u003ETo put this into perspective, let say you have a random position vector with X=150.052713635694. Really precise number, right? Now let\u0027s go and leave the solar system. Your X position will grow to big numbers, and arrives as X=2984135412384.25; which is only a 2-digits decimal number, compared to the first one.\u003C/p\u003E\u003Cp\u003ENow, to return to the multiplayer discussion here, let me quote an other post I wrote on it (and sorry to bring timewarp problems here):\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MySelf\u0022 data-cite=\u0022MySelf\u0022\u003E\u003Cdiv\u003EThe first thing to do is add a tag on the server to control the mods needed. You will need all the mods requied to enter. And you will not be able to use other mods to play in multiplayer. Then you will be able to show all aircrafts in the visual range (with physics disabled it will save a lot of FPS for other\u0027s big object) and without mod compatibility because everyone will have the same configuration.\u003Cp\u003EBut how to actually see each other, internet-wise? Update cycles will come every 1/2 or 1 second. Sent data will contain reference body, orbital parameters, thrust percent, attitude and angular velocity. Thrust and angular velocity will come for the \u0022continuous movement\u0022, ie when there is no data, the craft will follow these current parameters to predict next position on the render frame.\u003C/p\u003E\u003Cp\u003ENow comes the problems: first collisions. Collision will be handled by the game itself. That\u0027s right, then we \u0022resync\u0022 the debris. That can cause problems with trollers who will kamikaze into other\u0027s stations. The owner can choose to force the object to go on-rails. Danny2462\u0027s researches proved that collision is disabled when on rails. Docking too, so be sure to disable the on-rails \u0022hack\u0022 before contact.\u003C/p\u003E\u003Cp\u003EBTW, docking is the second problem. The way KSP works is by merging ships into one. I may have to find a \u0022hack\u0022 for that but that\u0027s an other option on the object: let docks or not, and to what users. That way you will blame only yourself if something bad happens to the station \u003C/p\u003E\u003Cp\u003EBut the most known problem to multiplayer is time warp. The ship will disappear from other players when time wrapped. When returned to x1, its position will be changed to fit the result of the time-warp. If it has an encounter, the orbit will be moved for everyone to see the encounter properly.\u003C/p\u003E\u003Cp\u003ENow, there is still some things to implement. Event triggers will be sent immediately: stage activation, action triggers, deployment of landing gear, EVAs, etc...\u003C/p\u003E\u003Cp\u003ENow, I only speak in theorical, as I don\u0027t have looked completely in the KSP API yet, and I may not have the right skills for all that. But I think it is a great, structured idea I have for KSP MultiPlayer. I\u0027ll be proud if I can help anyone in the process of making such an addon, and if this mod com to everyone\u0027s life, it\u0027ll be a complete game changer.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"swiftgates24","CreatedById":22280,"CreatedDateTime":"2013-08-30T13:37:30Z","Content":"\n\u003Cp\u003EAh, thank you for explaining. And the reason I don\u0027t like ideas on timewarp, is because it is already \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/35310-The-L-O-G-Multiplayer-Project\u0022 rel=\u0022external nofollow\u0022\u003Esolved\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EQuote from that thread: \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MarkusA380\u0022 data-cite=\u0022MarkusA380\u0022\u003E\u003Cdiv\u003E- You will be able to timewarp like usual! You will start at a server time (Which counts in realtime, like the usual singleplayer KSP time does when timewarp isn\u0027t activated) launching your vessel,\u003Cp\u003Ewhen you timewarp you will go faster than the server time, when going back to the Space Center your time will be set to the server time again.\u003C/p\u003E\u003Cp\u003E- Your timewarped flights are \u0022recorded\u0022 on a log (The name of this project comes from this).\u003C/p\u003E\u003Cp\u003E- The server now shows everyone your vessel doing everything like you did with timewarp, but without. For example, if you do a mission to Laythe, and it needs 30 mins. in realtime, but it takes 400 days in timewarped time, other players will see your ship cruise for 400 days in realtime!\u003C/p\u003E\u003Cp\u003E- Of course, because noone wants to wait for 400 days, the server time will be updated to the highest vessel-time when noone is controlling a vessel. (Spacecenter, VAB, SPH, Telescope or just offline)\u003C/p\u003E\u003Cp\u003E- When you timewarped and another player does something in realtime (or maybe in timewarp-time, too, but lower than yours) you will see his future position at your point of time updated for every burn he does. You will see a sign above his vessel when he does a burn so you know that the course he has on your map will not stay the same.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-30T13:40:51Z\u0022 title=\u002208/30/2013 01:40  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 30, 2013\u003C/time\u003E by swiftgates24\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"oggylt","CreatedById":57214,"CreatedDateTime":"2013-08-30T20:20:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EInteresting mod you have going here. I\u0027m wondering how you\u0027re going to fix the deep space kraken and other errors associated with being far from the center of the in game universe.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI would say why bother having 1 shared universe, instead each client is center of his own universe and problem solved\u003C/p\u003E\n"},{"CreatedByName":"Pwolf","CreatedById":75262,"CreatedDateTime":"2013-08-30T20:49:38Z","Content":"\n\u003Cp\u003EThat\u0027s sort of how it is already and why there is a problem to begin with... How do you determine where client A is in client B\u0027s universe without having a universal reference point?\u003C/p\u003E\n"},{"CreatedByName":"gl0ryh0und","CreatedById":63038,"CreatedDateTime":"2013-08-30T21:00:19Z","Content":"\n\u003Cp\u003EForgive me for keeping this alive, but how is the disposition of heavenly bodies handled? Ships aren\u0027t the only things moving and frames of reference to planetary bodies from your point of origin will vary from person to person. This solution in my humble opinion is flawed and unworkable.. so it either ignores other player\u0027s frames of reference and planetary disposition or is only a visual representation of other player\u0027s apparent movements. You would get something similar to what you see in the KLF mod, not at all \u0027multiplayer\u0027 but a nice social addition. In addition cranking the server time back or forth to adjust the position of planets to syncronize client times would have dire affects on ships in deep space. I think the problem of full space program immersion from multiple players is still not solved.\u003C/p\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2013-08-31T11:13:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swiftgates24\u0022 data-cite=\u0022swiftgates24\u0022\u003E\u003Cdiv\u003EAh, thank you for explaining. And the reason I don\u0027t like ideas on timewarp, is because it is already \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/35310-The-L-O-G-Multiplayer-Project\u0022 rel=\u0022external nofollow\u0022\u003Esolved\u003C/a\u003E.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOne problem with the update time theory, is it would mess up any transfer windows that other players had planed.\u003C/p\u003E\u003Cp\u003ESolar liner\u0027s idea, where it updates the orbit of other players, relative to the body they have an encounter with, sounds like a better solution. \u003C/p\u003E\u003Cp\u003EOne thing I was wondering, would it be possible to just not load a missing mod part, and have a gap where it would be? Only the other parts, arranged as they are on that player\u0027s computer would be shown. Or would that not be feasible?\u003C/p\u003E\n"},{"CreatedByName":"SolarLiner","CreatedById":41047,"CreatedDateTime":"2013-08-31T11:26:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tw1\u0022 data-cite=\u0022Tw1\u0022\u003E\u003Cdiv\u003EOne thing I was wondering, would it be possible to just not load a missing mod part, and have a gap where it would be? Only the other parts, arranged as they are on that player\u0027s computer would be shown. Or would that not be feasible?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, if other parts are attached to it, it might cause problems. Or maybe if there\u0027s something to get global part position ... but then we will quickly arrive at a few hundreds of kb/s for large ships.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-08-31T11:27:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tw1\u0022 data-cite=\u0022Tw1\u0022\u003E\u003Cdiv\u003EOne thing I was wondering, would it be possible to just not load a missing mod part, and have a gap where it would be? Only the other parts, arranged as they are on that player\u0027s computer would be shown. Or would that not be feasible?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u0022Primitive\u0022 mod parts are not really a big issues, since you can already check on connecting that the client has all necessary mods. Yes, you could also try to generate a part at runtime. But that isn\u0027t easy, especially when there are multiple parts missing. And, well... for some part packages you might not have any parts left all \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EWe should start with a \u0022you miss mods [...]\u0022, preferable with a spaceport link. Maybe even some kind of automatic download \u0026amp; if possible Mp-Only-Install/-Loading.\u003C/p\u003E\n"},{"CreatedByName":"swiftgates24","CreatedById":22280,"CreatedDateTime":"2013-08-31T13:25:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tw1\u0022 data-cite=\u0022Tw1\u0022\u003E\u003Cdiv\u003EOne thing I was wondering, would it be possible to just not load a missing mod part, and have a gap where it would be? Only the other parts, arranged as they are on that player\u0027s computer would be shown. Or would that not be feasible?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut what if someone was to make a whole mod ship...that would be...kinda invisible? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2013-08-31T16:05:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swiftgates24\u0022 data-cite=\u0022swiftgates24\u0022\u003E\u003Cdiv\u003EBut what if someone was to make a whole mod ship...that would be...kinda invisible? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EKerbal space program, stealth mode!\u003C/p\u003E\u003Cp\u003EWhat inspired my suggestion, was one time when I had too much delta-V in a booster, I turned around to eliminate it with the lasers, as some parts blew up, other parts kept floating in position. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/jZC8rCd.png\u0022 alt=\u0022jZC8rCd.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe same thing happened on Kerbin too, when I was clearing up debris at KSC.\u003C/p\u003E\u003Cp\u003EI recon such a system would work best along with having several of the most common mod parts loaded, to reduce the chance of invisible ships. If such a system is even possible, that is.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-31T16:08:48Z\u0022 title=\u002208/31/2013 04:08  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 31, 2013\u003C/time\u003E by Tw1\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2013-08-31T16:34:34Z","Content":"\n\u003Cp\u003EWhy not keep the position transform client side?\u003C/p\u003E\u003Cp\u003EThe other players accuracy doesn\u0027t matter until they get close to you anyways. If they are on another planet you cant see them except for the map view so being off by as much as a meter wouldn\u0027t even matter.\u003C/p\u003E\u003Cp\u003EKerbal Live feed is an interesting way to solve miss matches between players and time warps. It looks a little odd on the map screen when someone else time warps but who cares.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/24926-0-21-Kerbal-LiveFeed-Passive-Multiplayer-Plugin-Client-Server-v0-7-1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/24926-0-21-Kerbal-LiveFeed-Passive-Multiplayer-Plugin-Client-Server-v0-7-1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EActually if you could just take the same thing they did and make the other players ships are visible when I get within 2.5km them that would work just fine for me. \u003C/p\u003E\u003Cp\u003EDon\u0027t worry about collision, docking, mods or time-warps for now. Just focus on the larger picture, and ignore everything everyone else says. Including me. Your doing a great job.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-31T16:39:09Z\u0022 title=\u002208/31/2013 04:39  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 31, 2013\u003C/time\u003E by frizzank\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Talisar","CreatedById":62035,"CreatedDateTime":"2013-08-31T17:52:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frizzank\u0022 data-cite=\u0022frizzank\u0022\u003E\u003Cdiv\u003EJust focus on the larger picture, and ignore everything everyone else says. Including me. Your doing a great job.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis may be the best piece of encouragement I\u0027ve ever seen given to someone!\u003C/p\u003E\n"},{"CreatedByName":"Blaylock1988","CreatedById":57368,"CreatedDateTime":"2013-08-31T17:57:07Z","Content":"\n\u003Cp\u003EI agree 100% with frizzank.\u003C/p\u003E\n"},{"CreatedByName":"Pwolf","CreatedById":75262,"CreatedDateTime":"2013-09-01T17:44:27Z","Content":"\n\u003Cp\u003EI\u0027m pushing my mathematical skills here but if anyone else can back me up on this, that would be awesome:\u003C/p\u003E\u003Cp\u003ESo, I\u0027ve been thinking about the position issue for the past few days. Basically the origin shift ensures that there\u0027s no way to, for sure, know exactly where any one vessel, other than your own, will be placed in space. This creates a big problem for multiplayer. For larger distances, this doesn\u0027t matter so much as the local client doesn\u0027t need an accurate position of a vessel if it can\u0027t see it anyway. This can be solved using existing techniques that have already been used in other mods (KSP Live Feed for example). For shorter distances within the visual zone, this doesn\u0027t work... However:\u003C/p\u003E\u003Cp\u003EIf you have a starting point/vector, a distance, and an angle, you can find an end point/vector. My thought is, if I use the nearest celestial body, or orbiting body, (within a threshold so that the kraken doesn\u0027t cause an issue) as a reference point I can use the distance between the body and the vessel as well as an angle to the vessel to find it\u0027s position on another client. I\u0027d send the distance and angle (Euler angle?) to the server along with other vessel information. When another client within visual distance renders the position of the vessel it will use the position of it\u0027s local body and the distance/angle of the vessel to find out what that vessels position is in relation to the current offset. Does any of that make sense?\u003C/p\u003E\u003Cp\u003EDoes anyone know how to actually calculate this? lol. I know you can do this in 2D with relative ease (iirc):\u003C/p\u003E\u003Cp\u003Ex2 = x1 \u002B cos(angle)*distance\u003C/p\u003E\u003Cp\u003Ey2 = y1 \u002B sin(angle)*distance\u003C/p\u003E\u003Cp\u003E(i think that\u0027s right)\u003C/p\u003E\u003Cp\u003EHow does this work in 3d space?\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-01T19:13:48Z","Content":"\n\u003Cp\u003ESry, i don\u0027t really get it... what is the exact problem? I wouldn\u0027t really care about having vessels in 2 different SOI\u0027s for now. Not sure if the stock game does handle this case at all^^\u003C/p\u003E\u003Cp\u003EAnd as long as you are in the same SOI, you can use the vessels position. You current screen always have one as a reference, as well. For example here you have some of my research code. It teleports the active vessel 5km next to the targeted vessel:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evar trgPos = FlightGlobals.fetch.VesselTarget.GetOrbitDriver().orbit.getPositionAtUT(Planetarium.GetUniversalTime());\u003Cbr\u003Evar curPos = FlightGlobals.ActiveVessel.orbitDriver.orbit.getPositionAtUT(Planetarium.GetUniversalTime());\u003Cbr\u003Evar safeDist = ((curPos - trgPos).normalized * 5000);\u003Cbr\u003Evar jmpTrg = trgPos \u002B safeDist;\u003Cbr\u003Evar jmpDist = jmpTrg - curPos;\u003Cbr\u003EFlightGlobals.ActiveVessel.SetPosition(jmpDist - FlightGlobals.ActiveVessel.transform.position);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo you are definitively somewhat aware of other nearby vessels. The code isn\u0027t perfectly accurate, it for example would be a good idea to make sure those positions are not outdated, already. But using relative positions might even make it worse^^\u003C/p\u003E\n"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2013-09-01T19:52:14Z","Content":"\n\u003Cp\u003EOKay, might as well add my two cents worth for Time warp. Say f*** time warp. Allow users to time warp but have it only effect them. Yes, it would result in unrealistic \u0027warp jumps\u0027 but still, you have working MP. The video seemed to show transmission of positional, rotational, and trajectory data. This incoming data would not be effected if time warp data was not sent.\u003C/p\u003E\u003Cp\u003EThe only way I can see MP working with time warp is a two mode approach.\u003C/p\u003E\u003Cp\u003EMode 1, semi-sync:\u003C/p\u003E\u003Cp\u003Eallows time warp. Craft position, rotation, and trajectory data is sent. Physics is only calculated by the owner of craft and is only present in his save. Ships cannot interact or collide but can be viewed in map and flight view.\u003C/p\u003E\u003Cp\u003EMode 2, full sync:\u003C/p\u003E\u003Cp\u003Etime warp dissallowed, can be switched to in flight but all players must agree. Physics calculated by all players and ships can interact and collide and dock. Great for co-op space station assembly.\u003C/p\u003E\u003Cp\u003EThe idea HERE is that you get the best of both, you don\u0027t overload computers, and you get a massive new level of depth.\u003C/p\u003E\n"},{"CreatedByName":"Pwolf","CreatedById":75262,"CreatedDateTime":"2013-09-01T21:07:04Z","Content":"\n\u003Cp\u003EFaark:\u003C/p\u003E\u003Cp\u003EIs the origin always the same within a SOI?\u003C/p\u003E\n"},{"CreatedByName":"OrbitusII","CreatedById":57305,"CreatedDateTime":"2013-09-01T21:21:18Z","Content":"\n\u003Cp\u003EThe origin is an (sometimes not so) arbitrary point, (0,0,0), that is used as the main reference frame for the entire scene. The parent body can be used as the reference frame by using some easy vector math, and by extension a vessel can be used as a reference frame for others.\u003C/p\u003E\u003Cp\u003ESo, to answer your question, yes and no. It simplifies calculations a lot to keep the reference frame as the same object, e.g. the parent body (yes), but you could very well have a random number generator coming up with a new reference frame every frame (no).\u003C/p\u003E\u003Cp\u003E------------------------------------------------------------------------------------\u003C/p\u003E\u003Cp\u003EThis is a very promising project, I can\u0027t wait to see it in action with my own eyes! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-01T21:34:37Z","Content":"\n\u003Cp\u003EYes, all orbital calculations within the same SOI use the same origin (center of SOI? haven\u0027t checked it). The problem are loaded vessels. Their positions aren\u0027t calculated but tracked from Unitys game \u0026amp; physics engine. The engine apparently can\u0027t handle large values very well (origin offsets as well as speeds), thats why they use a different reference frame, with a center close to the current vessel. Orbit.Pos / Orbit.Vel should be the latest tracked values and therefor be a good start to work with...\u003C/p\u003E\n"},{"CreatedByName":"Itsdavyjones","CreatedById":57605,"CreatedDateTime":"2013-09-02T16:22:11Z","Content":"\n\u003Cp\u003EKeep up the work. Would love to see this up and running.\u003C/p\u003E\n"},{"CreatedByName":"Metapher","CreatedById":62738,"CreatedDateTime":"2013-09-02T17:47:13Z","Content":"\n\u003Cp\u003EI dont mod, and iam a bad programmer, but heres my opinion about the synchro problem (and excuse my english-german-mixed-grammar):\u003C/p\u003E\u003Cp\u003EWhats in my head about positions:\u003C/p\u003E\u003Cp\u003EWhat your mod needs to force, is a 0-State.\u003C/p\u003E\u003Cp\u003EA time where the game starts in an initial state, where every position, rotation/angle, blah blah, from every object is set from a startvariable.\u003C/p\u003E\u003Cp\u003EAlso every ship on the launchpad has always a same startposition, ALWAYS. Because you defined this position by placing it in the VAB\u003C/p\u003E\u003Cp\u003ESo even when the game started a while ago, we could recalculate the startposition of the ship, like it would be placed on the launchpad right at the moment of game-initialisation.\u003C/p\u003E\u003Cp\u003EWith these informations (6-axis \u002B 3 angles) of the \u00220-State\u0022 of every vessel, we are able to calculate the same position for every other user from the actual position.\u003C/p\u003E\u003Cp\u003E(Where is the launchpad now -\u0026gt; where would have it been at 0-State -\u0026gt; calculated difference)\u003C/p\u003E\u003Cp\u003EAll the clients needs to know are the 0-States as fixed variables and the real-time \u0022Now-State\u0022. The rest should be highschool mathematics, since KSP doenst use n-body-problematics.\u003C/p\u003E\n"},{"CreatedByName":"Smoovious","CreatedById":81253,"CreatedDateTime":"2013-09-03T09:04:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022shand\u0022 data-cite=\u0022shand\u0022\u003E\u003Cdiv\u003Ethe main problem still is \u0022what happens when you timewarp\u0022\u003Cp\u003Ethat has been and always will be the sticking point both technically and design wise.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, if you\u0027re able to override timewarping, you could end up implementing it as a lesser of everyone\u0027s setting...\u003C/p\u003E\u003Cp\u003ESo if you have 3 people, one is set to 100x, another to 20x, and a 3rd to 10x, then all three would go 10x... then as the slowest one, speeds up after his maneuver, setting his to 50x, then all three would go 20x, as the 2nd player\u0027s warp setting is now the lowest.\u003C/p\u003E\u003Cp\u003E-- Smoov\u003C/p\u003E\u003Cp\u003E(ps: I\u0027m new. o/ )\u003C/p\u003E\u003Cp\u003Eedit: Ok, I posted that early on in the thread.\u003C/p\u003E\u003Cp\u003EFrom what I\u0027ve observed, the problem with multiplayer in KSP isn\u0027t very different to some behavior I see in another sim I play. (Run8, a multiplayer railroad simulator)\u003C/p\u003E\u003Cp\u003EIn Run8, each client handles the physics for their own train only, and everyone else\u0027s trains just share positional data. The plus side is that it lowers the computational load on each client\u0027s computer. The down side, is that we always have sync issues. One person\u0027s train that I see on my screen, may not be precisely accurate, as it may be shown a few feet ahead or behind, on another person\u0027s screen.\u003C/p\u003E\u003Cp\u003EWhen we\u0027re doing some yard switching cooperatively (one engineer, one conductor), we have from time to time, thrown a switch when we saw the last car clear the switch, but on someone else\u0027s computer, the last car hasn\u0027t cleared it yet, and the thrown switch, makes the car split the switch and go down 2 tracks at the same time.\u003C/p\u003E\u003Cp\u003EThis also becomes an issue, when one engineer, is picking up cars left from another engineer\u0027s train, and they\u0027re backing up to couple, and it may look to me like their couplers are perfectly lined up, while on their screen they still have another 10 feet of space to go, so even tho I tell him he\u0027s there, his physics (since he\u0027s in control of the train) disagree.\u003C/p\u003E\u003Cp\u003EI see this as a problem caused by the way they implemented multiplayer from the ground up, and I don\u0027t see anything they can do, to get rid of it completely, unless they change the way multiplayer is implemented from the ground up. Since they aren\u0027t truly sync\u0027d up, we often don\u0027t see the same thing as each other. Different vehicle traffic on the grade crossings being the most obvious.\u003C/p\u003E\u003Cp\u003EAnother game I\u0027ve played, is OpenTTD... and while it isn\u0027t a sim in any sense of the word, the way it implements multiplayer, locks everyone up to seeing the exact same thing at all times. It uses nonces and seeded random number generators, and instead of exchanging positional data of our vehicles, it just exchanges the commands between the server, which in turn, passes them onto the rest of the clients, so all of the clients know to apply that command at the specified nonce. All random numbers are generated with the same seed based on the nonce, so we all end up seeing the same exact thing.\u003C/p\u003E\u003Cp\u003EAgain, there is an upside and a downside. Upside is, everything stays in sync, and everything is in the same exact position on everyone\u0027s screen. Downside is, that everyone has to compute everything for themselves, increasing the processor load. There would also be some lag-time between when you moved a control, and when you see the effects, but that could also be realistic too. Also, this isn\u0027t a sim, but a transportation-related game, so there is no real freedom of movement to begin with, but the principle still applies. \u003C/p\u003E\u003Cp\u003EIn Run8, if they switched to the nonce/seed method, then the clients would pass along the commands to the server instead of positional data. Throttle position changes, brake handle/pressure changes, etc. Then, assuming everything else stayed properly sync\u0027d, every piece of rolling stock would be in the same exact place on the track, no matter which player\u0027s screen it is being viewed from. This would also allow us to kick cars (something that we really want, but just isn\u0027t possible with the current networking method. When we pick up and drop off cars, they are added/removed from our single train object, which sounds like it is similar to how KSP treats the joined pieces all as one object)\u003C/p\u003E\u003Cp\u003ESo... since KSP wasn\u0027t designed with multi-player in mind, I don\u0027t think having that kind of precise interaction is very possible. We may have to accept being able to work near each other, without being able to couple up our pieces together. Even if that\u0027s all we can do, that would be HUGE, and I think it should still be tried.\u003C/p\u003E\u003Cp\u003ELast thought... is it even possible in KSP, to position objects, and keep updating their position, while ignoring physics on the non-host computer? (host being the one that is actually controlling the craft)\u003C/p\u003E\u003Cp\u003E-- Smoov\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-03T09:57:53Z\u0022 title=\u002209/03/2013 09:57  AM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 3, 2013\u003C/time\u003E by Smoovious\u003C/strong\u003E\n\u003Cbr\u003Efinished reading the whole thread :P\n\u003C/span\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-03T11:35:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Metapher\u0022 data-cite=\u0022Metapher\u0022\u003E\u003Cdiv\u003EThe rest should be highschool mathematics, since KSP doenst use n-body-problematics.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, your \u0022highschool mathematics\u0022 is exactly the problem. There are ambitious documents out there on how games like Counter Strike make sure your bullet actually hit the moving opponents head. I don\u0027t want to end up rewriting large parts of KSPs game engine.\u003C/p\u003E\u003Cp\u003EYou want an example? Fine! Here are some 8 second old data about an vessel entering kerbins atmosphere: position_vector (about 40km above ground), rotation, velocity_vector (about 4km/s). And once you calculated that, you have to manage a smooth transition from the current pos/rot/vel to match your calculation result. Ofc you have to do sth like this for every kind of game situation...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Smoovious\u0022 data-cite=\u0022Smoovious\u0022\u003E\u003Cdiv\u003ELast thought... is it even possible in KSP, to position objects, and keep updating their position, while ignoring physics on the non-host computer? (host being the one that is actually controlling the craft)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, i think it is. But you want some kind of physics, to calculate changes to the vessel without transmitting \u0026amp; updating its data every frame.\u003C/p\u003E\u003Cp\u003EGetting out of sync isn\u0027t a that big problem in KSP i hope, since you basically only push changes to your own vessel to the server while \u0022playing\u0022 records from all others.\u003C/p\u003E\n"},{"CreatedByName":"Drognoid","CreatedById":57474,"CreatedDateTime":"2013-09-03T13:38:36Z","Content":"\n\u003Cp\u003ECouldn\u0027t you just leave the multiplayer aspect to focus only on kerbin? My only real plans with multiplayer would utilize the spaceplane hanger, and timewarp? couldn\u0027t a jump to SOI feature or a jump to rendezvous...\u003C/p\u003E\u003Cp\u003EAlso multiple players on the server could cause the need for some hefty hardware for the server, KSP throws a CPU hogging fit when the part count exceeds 250. Having 4-5 players near each-other (close enough that physics is loaded for everyone) could render the sever into a molten pool of expensive metals\u003C/p\u003E\n"},{"CreatedByName":"Smoovious","CreatedById":81253,"CreatedDateTime":"2013-09-03T13:55:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EYes, i think it is. But you want some kind of physics, to calculate changes to the vessel without transmitting \u0026amp; updating its data every frame.\u003Cp\u003EGetting out of sync isn\u0027t a that big problem in KSP i hope, since you basically only push changes to your own vessel to the server while \u0022playing\u0022 records from all others./QUOTE]Well, only one computer (the host) should be working out the physics. If you insist on the client computers working out the physics too, then you may get into situations where the client computer and the host computer are trying to apply physics to both vehicles, from different positions.\u003C/p\u003E\u003Cp\u003EWith the host computer already working out the physics, and sending position data, the client computer can just smooth out the old/new positions in between updates.\u003C/p\u003E\u003Cp\u003EYeah, it would take bandwidth, but you\u0027re going to have to do it anyways. Shouldn\u0027t be that much bandwidth tho, and it all depends on how many updates per second you\u0027re sending too.\u003C/p\u003E\u003Cp\u003E-- Smoov\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"}]}