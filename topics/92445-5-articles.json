{"TopicId":92445,"ForumId":39,"TopicTitle":"My KSP control panel","CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2014-12-10T07:53:50Z","PageNum":5,"Articles":[{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2015-08-26T11:23:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022richfiles\u0022 data-cite=\u0022richfiles\u0022\u003E\u003Cdiv\u003ECongrats on having your Kerbal Kontrol panel played by an interwebs celeb! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESome people get all the luck! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003ENice one, Stibbons! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt was really awesome to see it in action; I love the switches for the 7-segment displays. Really neat idea! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EDo you get much lag with data being sent to the secondary arduino for the displays, or is it negligible?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-08-26T13:14:23Z","Content":"\n\u003Cp\u003EThe multi function readouts were something I\u0027d planned to do right from the start, and didn\u0027t come together until the very end. I\u0027m going to rearrange all of the options soon, but apart from that I\u0027m super happy with how they came out. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EI have the packet rate from the plugin down to 80ms, and use the default 38400bps baud rate. In general I don\u0027t notice any extra lag. The one exception is lights that react to controls on the board. Right now, I flip the brake switch on, that only sends a command back to the game, and some time later the game sends back a new packet with the updated brake state, and only then does the display module find out that it needs to turn the brake light on. That can occasionally lead to visible delays. It\u0027s almost definitely fixable by just broadcasting a new data packet on I2C when an input is changed. Just haven\u0027t bothered yet.\u003C/p\u003E\u003Cp\u003EMy setup survived the maker faire very well. I need to glue the key lock switch in place thanks to kids yanking it around wondering what it does, and the clip I\u0027d quickly attached for my notepad was pulled off. But apart from that it\u0027s fine. I didn\u0027t get to properly fly it until this week, and am quickly discovering that learning to rely on the readouts is almost as hard as building them.\u003C/p\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2015-08-27T13:08:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EMy setup survived the maker faire very well. I need to glue the key lock switch in place thanks to kids yanking it around wondering what it does, and the clip I\u0027d quickly attached for my notepad was pulled off. But apart from that it\u0027s fine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGosh, you were game letting them play with it! \u003C/p\u003E\u003Cp\u003EI had mine on display at a recent education conference, and there were some primary school kids there talking about stuff they were doing in the classroom; and while they were waiting, and I let them have some fun launching rockets into space; but I kept an eye on them. My controller isn\u0027t built like something out of Soviet Russia like yours \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EI didn\u0027t get to properly fly it until this week, and am quickly discovering that learning to rely on the readouts is almost as hard as building them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was a little surprised as to how much more use having such a console is to the gameplay too \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EMakes it all the more worthwhile! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-08-27T13:13:01Z","Content":"\n\u003Cp\u003EOh woah, you had your setup on display? Please tell me there\u0027s video, or at least some photos of it in action. I\u0027d love to see it.\u003C/p\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2015-08-30T11:46:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EOh woah, you had your setup on display? Please tell me there\u0027s video, or at least some photos of it in action. I\u0027d love to see it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere was some brief footage shot; for some promo or something. I haven\u0027t seen it surface.\u003C/p\u003E\u003Cp\u003EI was a part of a display / informational booth on 3D printing, and was using my controller as an example of \u0027real-world\u0027 applications.\u003C/p\u003E\u003Cp\u003EI\u0027m wanting to do an over-view video of it and post it here to show how it works (unfortunately, I\u0027m not cool enough to have famous e-celebrities come around \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E ).\u003C/p\u003E\u003Cp\u003EHowever, the latest version of KSP_Serial_IO has communication issues. Amelia and I have informed Zitronen about it; but he hasn\u0027t been able to replicate. Which is annoying cos there\u0027s a couple of additional elements of the latest I\u0027d like to implement.\u003C/p\u003E\u003Cp\u003EWe\u0027ll get there eventually \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI may just revert back to the previous version for my video...\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-08-31T10:34:05Z","Content":"\n\u003Cp\u003EI know the plugin is having issues on Windows 10, and that\u0027ll need some deep plumbing in the serial classes to fix. Are you still having the same issue as in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29?p=2105692\u0026amp;viewfull=1#post2105692\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29?p=2105692\u0026amp;viewfull=1#post2105692\u003C/a\u003E where your code won\u0027t receive anything but the sample sketch does?\u003C/p\u003E\u003Cp\u003EMy slightly-educated guess is that that\u0027s because of the small serial buffer in the Arduino library. The Serial class uses a 64 byte buffer. Anything larger than that requires multiple reads, faster than data is coming in, otherwise the buffer is overwritten and you get a corrupt packet. The old release had a 189 byte data packet, a little under 3x the buffer size. The new release is up to 190-somethingorother, a bit more than 3x the buffer size so requiring a minimum of four reads to drain it properly.\u003C/p\u003E\u003Cp\u003EThe example code that is doing very little apart from running the serial connection can keep up with that. But once you start adding more and more in, it becomes harder and harder to perform all of the reading that\u0027s required fast enough.\u003C/p\u003E\u003Cp\u003EThis is just a theory, I haven\u0027t really run any of the numbers and have gone to some trouble to put in other safeguards to keep it from happening to me (separate arduino for writing to displays, lots of preemptive optimisation in the input handling). But I\u0027d be curious to see if increasing your serial buffer size (by hacking the HardwareSerial library in the IDE using a guide like \u003Ca href=\u0022http://forum.arduino.cc/index.php?topic=334116.0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.arduino.cc/index.php?topic=334116.0\u003C/a\u003E ) helps.\u003C/p\u003E\u003Cp\u003EKeep a close eye on how much memory your sketch is allocating while playing with the buffer sizes, and keep in mind that the Serial class allocates itself internal buffers as well. You\u0027ll probably only be able to afford 255 byte RX and TX buffer sizes on a Mega board.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-31T10:36:45Z\u0022 title=\u002208/31/2015 10:36  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 31, 2015\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2015-09-03T05:52:04Z","Content":"\n\u003Cp\u003EInteresting... I get most of that, though that all comes from my understanding of things from a hardware side... Bummer that something like that seems to be limiting growth of the packet content... I have a feeling that it\u0027s possibly a good thing that I bought a metric assload of cheap Arduino clones from Micro Center the last two times I went up to Minneapolis (Minnesota), for a robotics meet up... I have four Mega 2560 boards, four Pro Mini 5v boards, and a Teensy 3.1 board that I plan to use to make my Apple //c keyboard into a USB/HID keyboard.\u003C/p\u003E\u003Cp\u003EI\u0027m actually wondering if I should pre-calculate the 9 multipliers for my synchro emulator, and transmit the 9 multipliers raw (then the sine wave generating Arduino only has to read the sine value from the lookup table, perform 9 multiplies, and then send the 10 sine values (original value, plus the 9 multiplied values) over I2C to the 10 DACs. The multipliers are calculated by bay of some trig calculations, and i\u0027m concerned it might cause a hiccup in my 400 Hz sine waves, if it has to pause too long to both read the serial AND perform the trig calculations.\u003C/p\u003E\u003Cp\u003EI can either send 3 raw attitude values in degrees, and perform the trig formulas on them locally, or do that externally, but transmit 9 values... Decisions... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003EI am certainly not opposed to splitting tasks across multiple pieces of hardware.\u003C/p\u003E\u003Cp\u003EOn a side note... Has there ever been consideration for interleaving packets. Send smaller packets, but alternate between two or more data sets?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-03T07:33:38Z","Content":"\n\u003Cp\u003EYou\u0027re asking the wrong person. I vaguely recall talk of possibly adding another packet type on the off chance the current one fills, but that doesn\u0027t seem too likely in the medium term. And it\u0027s completely orthogonal to my still untested theory.\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-03T08:05:04Z","Content":"\n\u003Cp\u003EAnd in actually-working-on-my-controller-again news, after a couple weeks off I finally got around to ordering new LEDs to replace the busted ones. Also picked up a little graphic LCD, I\u0027ll be playing with rendering attitude info on to it.\u003C/p\u003E\u003Cp\u003EStarted trying to have a crack at adding prograde, radial, normal vectors to the KSPSerialIO data packet. Currently lost in a maze of twisty little quaternions, all different.\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2015-09-03T21:41:21Z","Content":"\n\u003Cp\u003EWhat I meant was possibly splitting the existing packet into two smaller packets, giving the buffer a chance to load and read one, before moving on to the other half. I know that\u0027d be entirely dependent on the software being changed to make such a thing possible, but if you find that the issue IS caused by a buffer overflow type situation, then maybe that could be suggested to the creator of the software as an option for future development. I dunno. I\u0027ve only been playing with the software side of things for 2 months... I\u0027ve always been a hardware guy before that.\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-05T07:41:59Z","Content":"\n\u003Cp\u003EToday I set out to fix the bodgy power supply situation for my controller.\u003C/p\u003E\u003Cp\u003EThe majority of the system runs at 5V, but the motor in the throttle slide needs a little more juice. I\u0027d been running the system from a 9V wall wart for a long time, and when the display stuff was finished I\u0027d planned on using a 5V boost/buck regulator to step that down for everything else. But the module I\u0027d ordered from eBay was DOA. Time was short and I didn\u0027t have much option but to run up a quick and dirty power system using my original 9V power supply and a second 5V supply for the maker faire. It worked, but I wasn\u0027t happy about it, and kind of glossed over the power supply whenever anybody thought to ask.\u003C/p\u003E\u003Cp\u003EI have a couple of ATX PSUs spare though. They have 12V, 5V and 3.3V rails, and without knowing for sure the rating for my volume control motor, I figured she\u0027ll be right.\u003C/p\u003E\u003Cp\u003ESo today I voided the warranty on a power supply.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/U6P4xks.jpg\u0022 alt=\u0022U6P4xks.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EI needed one molex connector, so saved it, the rest of the wires were ruthlessly snipped off at the board level. The only one I needed was the green wire from the motherboard connector. That\u0027s the PS_ON pin of the motherboard connector. It needs to be pulled low to ensure the power supply actually switches on, so I just removed the circuit board from the base and soldered the green wire to the bank of ground connections. Put the case back together again (looking very bare with only a single connector coming out of it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ), and was quite happy to find the fan spinning up when it was powered it.\u003C/p\u003E\u003Cp\u003EI\u0027m too lazy to expose the back of the PSU through the enclosure, so I bought a panel-mount IEC socket. I grabbed one of the thousands of power cables I\u0027ve accumulated, cut a short length from the IEC plug end, and wired it to my socket making a short panel IEC breakout. Mains cables have a standard colour code, and the back of the socket is clearly labelled with which connection needs to go where. But I still checked my wiring at least half a dozen times, and then asked somebody else at the maker space to double check my work before I applied power to it. 240V is not to be mucked around with.\u003C/p\u003E\u003Cp\u003EThe final part was quickly drawing up and cutting a new back panel from 3mm MDF. Assembled everything, after carefully heatshrinking and taping up the mains terminals, and it was all good to go for installation. The other holes are for the display mode switch, and a hole for a panel-mount USB socket that\u0027s currently on its way from a Chinese factory.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/siG27jz.jpg\u0022 alt=\u0022siG27jz.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EI had to use a keyhole saw to enlarge the hole in the back of the enclosure slightly, because I\u0027m using up a lot more room on the back panel. But after that the replacement panel screwed in quite nicely. The switch on the back sets the display mode. On and off should be obvious. I wrote a separate demo mode just for the maker faire, with the expectation that I\u0027d actually have a chance to leave it alone for a while. That mode just flashes random coloured lights across the annunciator panel while printing messages on the seven segment displays. Seemed like a fun hack to keep the display looking interesting while not actively playing the game.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/8phyVza.jpg\u0022 alt=\u00228phyVza.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd then inside the PSU is just fixed in place with some double-sided tape. I used a spare molex line socket to break the 12V and 5V from the PSU out to my terminal block, and from there feed power to my two arduinos and the LED bus.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Kt1Q3Mg.jpg\u0022 alt=\u0022Kt1Q3Mg.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EI was still pretty nervous about powering everything on, my other project right now is getting a 3D printer up and running and last week I managed to short out its power, killing an Arduino Mega, controller board and Raspberry Pi in one fell swoop. But after some careful testing I hooked everything up and was very relieved when it all came back online first go.\u003C/p\u003E\u003Cp\u003EThe PSU fan running in such a large hollow box sounds a lot louder than I was expecting. I may end up replacing it with a quieter one, or disabling it altogether and adding some other ventilation to the enclosure to move air through it.\u003C/p\u003E\n"},{"CreatedByName":"Stoney3K","CreatedById":139954,"CreatedDateTime":"2015-09-05T09:09:44Z","Content":"\n\u003Cp\u003ENice and clean looking panels, do you have your own laser cutting machine or do you get that done at a Fablab?\u003C/p\u003E\u003Cp\u003ERegarding the trig calculations: Those synchros work on a phase difference, right? Doing trig calculations *in* the AVR is slooooooow, so you really don\u0027t want to do that. If you can find a way to precalculate the phase shift for each indicator synchro you want (AFAIK, they\u0027re linear with pitch/roll/yaw), you can just pull them out of a look-up table if the table has sufficient resolution.\u003C/p\u003E\u003Cp\u003ESmall tip: Use multiples of 120 degrees to calculate the look-up values to begin with, so you only need to look up a total of three values, and find the rest of the accompanying synchros by simply skipping 120 degrees in the table. So for example, have a table that has 7200 entries, and for a synchro reading zero, the first coil would get a DAC value at entry 0, the second at entry 2400, and the third at 4800.\u003C/p\u003E\u003Cp\u003EThat saves you memory and calculations because you only need one table which is the same for every synchro (including the reference one).\u003C/p\u003E\u003Cp\u003EI can cook up some AVR/Arduino code that does this for three values easily, it\u0027s only a few dozen lines of code.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-05T09:17:18Z\u0022 title=\u002209/05/2015 09:17  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 5, 2015\u003C/time\u003E by Stoney3K\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2015-09-05T09:10:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EI know the plugin is having issues on Windows 10, and that\u0027ll need some deep plumbing in the serial classes to fix. Are you still having the same issue as in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29?p=2105692\u0026amp;viewfull=1#post2105692\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29?p=2105692\u0026amp;viewfull=1#post2105692\u003C/a\u003E where your code won\u0027t receive anything but the sample sketch does?\u003Cp\u003EMy slightly-educated guess is that that\u0027s because of the small serial buffer in the Arduino library. The Serial class uses a 64 byte buffer. Anything larger than that requires multiple reads, faster than data is coming in, otherwise the buffer is overwritten and you get a corrupt packet. The old release had a 189 byte data packet, a little under 3x the buffer size. The new release is up to 190-somethingorother, a bit more than 3x the buffer size so requiring a minimum of four reads to drain it properly.\u003C/p\u003E\u003Cp\u003EThe example code that is doing very little apart from running the serial connection can keep up with that. But once you start adding more and more in, it becomes harder and harder to perform all of the reading that\u0027s required fast enough.\u003C/p\u003E\u003Cp\u003EThis is just a theory, I haven\u0027t really run any of the numbers and have gone to some trouble to put in other safeguards to keep it from happening to me (separate arduino for writing to displays, lots of preemptive optimisation in the input handling). But I\u0027d be curious to see if increasing your serial buffer size (by hacking the HardwareSerial library in the IDE using a guide like \u003Ca href=\u0022http://forum.arduino.cc/index.php?topic=334116.0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.arduino.cc/index.php?topic=334116.0\u003C/a\u003E ) helps.\u003C/p\u003E\u003Cp\u003EKeep a close eye on how much memory your sketch is allocating while playing with the buffer sizes, and keep in mind that the Serial class allocates itself internal buffers as well. You\u0027ll probably only be able to afford 255 byte RX and TX buffer sizes on a Mega board.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmmz. That\u0027s some very interesting insight. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m learning a lot through using the Arduino. I\u0027m used to high-level language land where there are no limitations \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E[there are, but they seem negligible in most environments I\u0027ve dealt with]\u003C/p\u003E\u003Cp\u003EI\u0027ll definitely have to look at that. From memory, I was only using like 12% of the available memory.\u003C/p\u003E\u003Cp\u003EThanks for the link RE: Serial buffer size. I\u0027ll have a go at that during the week and report my findings here. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESo today I voided the warranty on a power supply.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/U6P4xks.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/U6P4xks.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECrikey! You unsoldered the entire bundle of wires!!! o.O\u003C/p\u003E\u003Cp\u003EThat\u0027s super determination right there! Looks fantastic -- but gosh, how long did THAT take you?!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-05T09:13:36Z\u0022 title=\u002209/05/2015 09:13  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 5, 2015\u003C/time\u003E by Sputnix\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-05T10:30:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Stoney3K\u0022 data-cite=\u0022Stoney3K\u0022\u003E\u003Cdiv\u003ENice and clean looking panels, do you have your own laser cutting machine or do you get that done at a Fablab?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E It\u0027s sadly not on my laser, I made them at my local maker space (obligatory \u003Ca href=\u0022http://robodino.org/\u0022 rel=\u0022external nofollow\u0022\u003ERobots and Dinosaurs\u003C/a\u003E plug. if you\u0027re in or around Sydney check them out).\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sputnix\u0022 data-cite=\u0022Sputnix\u0022\u003E\u003Cdiv\u003EI\u0027m learning a lot through using the Arduino. I\u0027m used to high-level language land where there are no limitations \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy day job is a system administrator, most of the code I write drives cloud-based infrastructure with a couple thousand instances. Coming home and counting bytes in order to program a real physical device is a very nice change of pace. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sputnix\u0022 data-cite=\u0022Sputnix\u0022\u003E\u003Cdiv\u003ECrikey! You unsoldered the entire bundle of wires!!! o.O\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope! It took me about three minutes to remove them all with a pair of side cutters. That said, all of the different voltages those wires carry are grouped together on the PSU PCB. You can see the black regions for each bus screen-printed on the right-most corner of the board in that picture. And at least on my board all of the wires in the same bus were under a single huge glob of solder. Probably could have desoldered the whole lot in much shorter time than you\u0027d expect.\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-05T13:29:41Z","Content":"\n\u003Cp\u003EFirst serious attempt at an IVA-only mission to the Mun. Pretty straightforward focussing just on the navball and an occasional look out the window. An instrument Mun landing was nerve-wracking stuff.\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-09-06T16:12:53Z","Content":"\n\u003Cp\u003EGrats on the landing. I have been toying with the idea of using a spare PSU, but it seems like a bit of overkill. How much power does it consume when running your board?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-06T22:34:33Z","Content":"\n\u003Cp\u003EThey\u0027re a pretty cheap solution if you need more than 2-3 amps. I\u0027m planning on scrounging up another one for a string of neopixels that pulls 16A at full brightness. But for small projects it\u0027s definitely overkill. I only bothered because I needed a higher voltage for the motor. Otherwise a simple 5V power brick is plenty. \u003C/p\u003E\u003Cp\u003EHaven\u0027t tried to measure how much power it pulls. My back of the envelope calculation for the lights and displays came to peak of around 8 Watts. Average usage is much lower.\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2015-09-07T09:05:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Stoney3K\u0022 data-cite=\u0022Stoney3K\u0022\u003E\u003Cdiv\u003ERegarding the trig calculations: Those synchros work on a phase difference, right? Doing trig calculations *in* the AVR is slooooooow, so you really don\u0027t want to do that. If you can find a way to precalculate the phase shift for each indicator synchro you want (AFAIK, they\u0027re linear with pitch/roll/yaw), you can just pull them out of a look-up table if the table has sufficient resolution.\u003Cp\u003ESmall tip: Use multiples of 120 degrees to calculate the look-up values to begin with, so you only need to look up a total of three values, and find the rest of the accompanying synchros by simply skipping 120 degrees in the table. So for example, have a table that has 7200 entries, and for a synchro reading zero, the first coil would get a DAC value at entry 0, the second at entry 2400, and the third at 4800.\u003C/p\u003E\u003Cp\u003EThat saves you memory and calculations because you only need one table which is the same for every synchro (including the reference one).\u003C/p\u003E\u003Cp\u003EI can cook up some AVR/Arduino code that does this for three values easily, it\u0027s only a few dozen lines of code.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll be VERY honest... I am VERY new to programming C. Mostly, I look at example code online, copy and paste it, figure out how it works, look up some details here and there, and modify it until the compile button throws no errors and the code actually does what I want it to do! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\u003Cp\u003EYou are more than welcome to help me out in any way you see fit. I won\u0027t turn down help from someone more skilled at this stuff than I am at this, although maybe take it to the repository thread (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66763-Custom-hardware-simpit-repository-For-people-who-take-KSP-a-little-too-far/page24\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/66763-Custom-hardware-simpit-repository-For-people-who-take-KSP-a-little-too-far/page24\u003C/a\u003E), where everyone\u0027s stuff is, rather than take up stibbon\u0027s thread. I\u0027ve only had a few comments on my own setup here, mostly either asking and comparing what he vs I plan for attitude display, and the use of multiple arduinos to split up tasks. I might start a thread of my own at some point though, but I have nothing actually really put together yet. maybe once things actually start coming together. I\u0027d rather not hijack his personal project thread.\u003C/p\u003E\u003Cp\u003EMy plan was to do the trig calculations in a spreadsheet, and do a lookup table, like you said. The hard part is getting that from an idea into working code! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EMan... it\u0027s like 4 AM for me... I\u0027ll get back to this... To tired. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-07T09:10:07Z\u0022 title=\u002209/07/2015 09:10  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 7, 2015\u003C/time\u003E by richfiles\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2015-09-13T00:07:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EI know the plugin is having issues on Windows 10, and that\u0027ll need some deep plumbing in the serial classes to fix. Are you still having the same issue as in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29?p=2105692\u0026amp;viewfull=1#post2105692\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29?p=2105692\u0026amp;viewfull=1#post2105692\u003C/a\u003E where your code won\u0027t receive anything but the sample sketch does?\u003Cp\u003EMy slightly-educated guess is that that\u0027s because of the small serial buffer in the Arduino library. The Serial class uses a 64 byte buffer. Anything larger than that requires multiple reads, faster than data is coming in, otherwise the buffer is overwritten and you get a corrupt packet. The old release had a 189 byte data packet, a little under 3x the buffer size. The new release is up to 190-somethingorother, a bit more than 3x the buffer size so requiring a minimum of four reads to drain it properly.\u003C/p\u003E\u003Cp\u003EThe example code that is doing very little apart from running the serial connection can keep up with that. But once you start adding more and more in, it becomes harder and harder to perform all of the reading that\u0027s required fast enough.\u003C/p\u003E\u003Cp\u003EThis is just a theory, I haven\u0027t really run any of the numbers and have gone to some trouble to put in other safeguards to keep it from happening to me (separate arduino for writing to displays, lots of preemptive optimisation in the input handling). But I\u0027d be curious to see if increasing your serial buffer size (by hacking the HardwareSerial library in the IDE using a guide like \u003Ca href=\u0022http://forum.arduino.cc/index.php?topic=334116.0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.arduino.cc/index.php?topic=334116.0\u003C/a\u003E ) helps.\u003C/p\u003E\u003Cp\u003EKeep a close eye on how much memory your sketch is allocating while playing with the buffer sizes, and keep in mind that the Serial class allocates itself internal buffers as well. You\u0027ll probably only be able to afford 255 byte RX and TX buffer sizes on a Mega board.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHuzzah! We have life! \u003C/p\u003E\u003Cp\u003EThanks Stibbons! You rock! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-13T14:25:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sputnix\u0022 data-cite=\u0022Sputnix\u0022\u003E\u003Cdiv\u003EHuzzah! We have life! \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo glad you\u0027re back up and running. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I wish it were easier to set Serial buffer sizes than hacking system library source code though.\u003C/p\u003E\u003Cp\u003EThis week the \u003Ca href=\u0022http://www.adafruit.com/products/438\u0022 rel=\u0022external nofollow\u0022\u003Egraphic LCD\u003C/a\u003E I ordered to experiment with arrived. It\u0027s a little on the smallish side, but not too bad. But Adafruit\u0027s library for it is a lot slimmer than their other display libraries. I spent a little bit of time trying to port \u003Ca href=\u0022https://github.com/Catmacey/KerbalControl\u0022 rel=\u0022external nofollow\u0022\u003Ecatmacey\u0027s external navball code\u003C/a\u003E but got a little bit discouraged when I realised the library currently doesn\u0027t have anything for drawing triangles. So updating the library to work with \u003Ca href=\u0022https://github.com/adafruit/Adafruit-GFX-Library\u0022 rel=\u0022external nofollow\u0022\u003EAdafruit-GFX-Library\u003C/a\u003E just got added to my todo list.\u003C/p\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2015-09-14T12:03:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003ESo glad you\u0027re back up and running. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I wish it were easier to set Serial buffer sizes than hacking system library source code though.\u003Cp\u003EThis week the \u003Ca href=\u0022http://www.adafruit.com/products/438\u0022 rel=\u0022external nofollow\u0022\u003Egraphic LCD\u003C/a\u003E I ordered to experiment with arrived. It\u0027s a little on the smallish side, but not too bad. But Adafruit\u0027s library for it is a lot slimmer than their other display libraries. I spent a little bit of time trying to port \u003Ca href=\u0022https://github.com/Catmacey/KerbalControl\u0022 rel=\u0022external nofollow\u0022\u003Ecatmacey\u0027s external navball code\u003C/a\u003E but got a little bit discouraged when I realised the library currently doesn\u0027t have anything for drawing triangles. So updating the library to work with \u003Ca href=\u0022https://github.com/adafruit/Adafruit-GFX-Library\u0022 rel=\u0022external nofollow\u0022\u003EAdafruit-GFX-Library\u003C/a\u003E just got added to my todo list.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! It\u0027s nice to be back (into the land of coding \u002B playing!).\u003C/p\u003E\u003Cp\u003EGosh. That\u0027s way too hardcore man :/ puts the rest of us to shame.\u003C/p\u003E\u003Cp\u003EWhat made you choose that LCD display?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-15T03:17:08Z","Content":"\n\u003Cp\u003EHeh, I chose that display because a) it has an RGB backlight and I\u0027m a huge sucker for blinkenlights and \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E littlebird had it in stock for overnight shipping. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThey\u0027re also pretty cheap, somewhere around twenty bucks a pop. I may just buy a display using another controller and put this one in the parts bin for a less demanding project.\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-22T02:00:58Z","Content":"\n\u003Cp\u003EVery minor update. It looks like \u003Ca href=\u0022https://github.com/olikraus/u8glib\u0022 rel=\u0022external nofollow\u0022\u003Eu8glib\u003C/a\u003E has all of the graphical primitives I need without extensive library hacking. I\u0027ve started playing around with it for another project and am pretty keen to see how well it runs for complex graphics.\u003C/p\u003E\u003Cp\u003EThat said, I\u0027ve since found another use for the display I bought. So right now the display stuff is on hold. Do want to see what I can do about getting my controller running properly on Windows 10 and on Linux, but it\u0027ll be another week or two before I have time for it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"BigDCowboys22","CreatedById":151685,"CreatedDateTime":"2015-09-28T22:09:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EDo want to see what I can do about getting my controller running properly on Windows 10 and on Linux, but it\u0027ll be another week or two before I have time for it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFirst off I want to say thanks for posting all that you have. You inspired me to start making my own controller, heavily leveraging your designs and code. So thanks for everything. Even though I\u0027ve really just been the creepy guy lurking in the corner.\u003C/p\u003E\u003Cp\u003EI was making good, albeit slow progress and had my controller working for the most part before I built a new computer. Of course me being an idiot I went straight for windows 10 without doing all my research, and I\u0027m now stuck without being able to use my controller.\u003C/p\u003E\u003Cp\u003EThis is a long winded way of saying thanks for posting all your info, and I\u0027m extremely interested in figuring out how to get everything working in windows 10. I don\u0027t have much programming knowledge, but if there\u0027s anything I can do to help along the way please let me know.\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-09-29T05:22:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BigDCowboys22\u0022 data-cite=\u0022BigDCowboys22\u0022\u003E\u003Cdiv\u003EYou inspired me to start making my own controller, heavily leveraging your designs and code. So thanks for everything. Even though I\u0027ve really just been the creepy guy lurking in the corner.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EAll good. I\u0027m looking forward to seeing you post your own progress!\u003C/p\u003E\u003Cp\u003EAs far as the Windows 10 thing goes, real life and other projects have been taking priority over this for the last few weeks, so I haven\u0027t really had much to do with it. Do check out the last few pages of discussion on the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2806-Jun%29\u0022 rel=\u0022external nofollow\u0022\u003EKSPSerialIO thread\u003C/a\u003E though. It looks like a lot of progress has been made, just needs more people to test and confirm it\u0027s all working.\u003C/p\u003E\n"}]}