{"TopicId":62310,"ForumId":16,"TopicTitle":"How to calculate real distances?","CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-06T01:22:50Z","PageNum":1,"Articles":[{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-06T01:22:50Z","Content":"\n\u003Cp\u003EIf I have two points - specified by latitude and longitude, how can I determine the distance between those two points, assuming both points are at sea level? What is the maths to work that out? Will it be different depending on what body you are on? I\u0027m interested in the Mun at the moment.\u003C/p\u003E\u003Cp\u003EIf my rover is at point x (lat/long available) and my base is at point y (lat/long available), how do I work out the distance between those two points, assuming both points are at sea level (which they won\u0027t be, but a margin of error is acceptable). Thx.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-06T08:48:55Z\u0022 title=\u002202/06/2014 08:48  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 6, 2014\u003C/time\u003E by togfox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"alexmun","CreatedById":68608,"CreatedDateTime":"2014-02-06T01:38:02Z","Content":"\n\u003Cp\u003EYou\u0027re looking for the great circle distance in spherical geometry: \u003Ca href=\u0022https://en.wikipedia.org/wiki/Great-circle_distance\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://en.wikipedia.org/wiki/Great-circle_distance\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ed = r * acos( sin(lat1) * sin(lat2) \u002B cos(lat1) * cos(lat2) * cos(|long2 - long1|) )\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Er\u003C/em\u003E is the radius of the sphere, you could use the average altitude of your two points plus the sea level radius to get a more accurate result than just using sea level radius. \u003Cem\u003E|long2 - long1|\u003C/em\u003E should be the included angle between the two longitudes (e.g. if the longitudes were 170 and -170, the difference would be 20 degrees).\u003C/p\u003E\n"},{"CreatedByName":"Mr.Rocket","CreatedById":80241,"CreatedDateTime":"2014-02-06T01:42:58Z","Content":"\n\u003Cp\u003EDon\u0027 take my word for it, but my assumption is this. The Mun is a sphere more or less. I\u0027m pretty sure the info button about the planets gives the circumference(or it might be diameter) of the body. Either way, you can find the circumference from the diameter. Then there are how many longitude lines around a planet, is it 360 or 180? \u003C/p\u003E\u003Cp\u003EAnyways, i believe the mun has a diameter of 200km. So the circumference would be 200 times pi, being 628.31. That is the circumference of the mun. \u003C/p\u003E\u003Cp\u003EI think if you divide that circumference by the amount of latitude lines/ longitude lines around the whole body, you should be able to find the distance between two any two lines, sort-of? \u003C/p\u003E\u003Cp\u003EIf you know how many latitude and longitude lines are between your rover and your base, the rest should be easy. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Claw","CreatedById":100668,"CreatedDateTime":"2014-02-06T03:07:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mr.Rocket\u0022 data-cite=\u0022Mr.Rocket\u0022\u003E\u003Cdiv\u003EDon\u0027 take my word for it, but my assumption is this. The Mun is a sphere more or less. I\u0027m pretty sure the info button about the planets gives the circumference(or it might be diameter) of the body. Either way, you can find the circumference from the diameter. Then there are how many longitude lines around a planet, is it 360 or 180? \u003Cp\u003EAnyways, i believe the mun has a diameter of 200km. So the circumference would be 200 times pi, being 628.31. That is the circumference of the mun. \u003C/p\u003E\u003Cp\u003EI think if you divide that circumference by the amount of latitude lines/ longitude lines around the whole body, you should be able to find the distance between two any two lines, sort-of? \u003C/p\u003E\u003Cp\u003EIf you know how many latitude and longitude lines are between your rover and your base, the rest should be easy. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is all true if you\u0027re at the equator. But as you approach the poles, the longitude lines become closer together and you have to account for that (with the handy equation posted above).\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-06T08:49:17Z","Content":"\n\u003Cp\u003EThanks guys - that formula is exactly what I was after. Rep for you!\u003C/p\u003E\n"},{"CreatedByName":"lammatt","CreatedById":21777,"CreatedDateTime":"2014-02-06T09:01:15Z","Content":"\n\u003Cp\u003Ehigh school math?\u003C/p\u003E\u003Cp\u003Eyou hv a sphere sitting its center on the origin and 2 position vectors on its surface\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-02-06T11:24:03Z","Content":"\n\u003Cp\u003EYou may also like to investigate Rhumb Lines, which are a much easier way to navigate but somewhat longer than Great Circle routes. [says the man who once managed to miss the entire Caribbean and arrive in S. America instead]\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-02-06T11:50:16Z","Content":"\n\u003Cp\u003EThe great circle route is what passes for a \u0022straight line\u0022 on the surface of a sphere. If you drive in a straight line in any direction you will do a great circle you just need to pick the initial direction so that you arrive at your target. This may be obvious, but, as long as your destination isn\u0027t too far around the other side of the planet/moon you can simply set the target to your destination and then steer to put the target marker on your navball vertically below the center spot. If you have to detour around a terrain feature then just put the target marker back under the center when you are past it.\u003C/p\u003E\u003Cp\u003EEdit: This is also a useful when flying planes though if your plane is stable and flies a nice straight course you only really need to set the initial direction...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-06T11:52:28Z\u0022 title=\u002202/06/2014 11:52  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 6, 2014\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-06T11:58:35Z","Content":"\n\u003Cp\u003EStupid question I already know the answer to - if I use the formula in post #2 what unit will my answer be?\u003C/p\u003E\u003Cp\u003EIf r is in meters then surely my answer is in meters? I\u0027m using r = 600,000 \u002B altitude above sea level.\u003C/p\u003E\u003Cp\u003EI\u0027m drifting a very small amount (think of minor lateral movement when landing) and I\u0027m getting values in the 10,000\u0027s. This would suggest my small wobble is moving me 10 km\u0027s. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 alt=\u0022:mad:\u0022\u003E\u003C/p\u003E\u003Cp\u003EHere are some values for fun:\u003C/p\u003E\u003Cp\u003Elat 1: -0.059226971\u003C/p\u003E\u003Cp\u003Elat 2: -0.075008348\u003C/p\u003E\u003Cp\u003Elong 1: -74.668487549\u003C/p\u003E\u003Cp\u003Elong 2: -74.658233643\u003C/p\u003E\u003Cp\u003Ealtitude: 600286\u003C/p\u003E\u003Cp\u003EThis is hovering around KSP at 286m above sea level. And at this tiny speed I\u0027ve found that 9 decimal places is absolutely necessary to get a meaningful result. (If you use excel, be sure to convert to radians before cos/sin) \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-02-06T12:04:52Z","Content":"\n\u003Cp\u003EThat equation is based on the spherical law of cosines which has accuracy problems when the distance between the two points is very small (or very large, i.e. nearly opposite on the planet). This is a well known problem and the usual solution is to use the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Haversine_formula\u0022 rel=\u0022external nofollow\u0022\u003EHaversine formula\u003C/a\u003E instead.\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-02-06T13:11:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EIf you drive in a straight line in any direction you will do a great circle you just need to pick the initial direction so that you arrive at your target.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, that\u0027s the point of Rhumb Lines. Except at cardinal compass points a Great Circle route does not cross lines of latitude at a constant angle. If you follow a constant direction you\u0027ll follow a Rhumb Line, which is easier but longer than the equivalent Great Circle.\u003C/p\u003E\u003Cp\u003EIt\u0027s all a bit of obtuse navigation though - as you say, it\u0027s a lot simpler to set your destination as target if you can and just work by the navball.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-02-06T17:28:52Z","Content":"\n\u003Cp\u003ENo, a rhumb line is a course of constant compass heading, which is not what you get if you drive in a \u0022straight\u0022 line. You can see this easily if you put a ship in an inclined orbit and keep the ship pointing prograde with the horizon on the navball horizontal for a complete orbit. You will see your compass heading change as you go around the orbit, e.g. if, at the start of the orbit you are going north east (45 deg) then a quarter of the way round you will be going due east (90 deg) and on the other side of the planet you will be going south east (135 deg). Exactly the same thing happens if you \u0022orbit\u0022 by driving a \u0022straight\u0022 line on the surface...\u003C/p\u003E\u003Cp\u003EThe point of rhumb lines is that, in practice, you can\u0027t fly or sail in a straight line due to wind and currents etc. and all you have to measure your direction is a compass so a course that requires the same compass heading throughout the journey is much easier to do. These days, autopilot systems are easily capable of following great circle routes at variable compass headings though I believe commercial flights usually still use rhumb lines as it is easier for communicating course requirements from the ground.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-06T17:36:28Z\u0022 title=\u002202/06/2014 05:36  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 6, 2014\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-02-06T18:14:45Z","Content":"\n\u003Cp\u003EApologies, I incorrectly assumed you meant keeping to the same compass heading when you said \u0022pick the initial direction\u0022\u003C/p\u003E\n"}]}