{"TopicId":91625,"ForumId":34,"TopicTitle":"[1.10.1\u002B] Contract Configurator [v1.30.5] [2020-10-05]","CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2014-11-30T06:23:07Z","PageNum":49,"Articles":[{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-06-18T18:07:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nightingale\u0022 data-cite=\u0022nightingale\u0022\u003E\u003Cdiv\u003EI don\u0027t see anything in the log about loading the part \u003Cspan style=\u0022color:#333333;\u0022\u003ESatsWithParts001.... so I have to ask: is \u003C/span\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ESatsWithParts001 a valid part? I\u0027d expect to see something like this in the log:\u003C/span\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[LOG 18:45:25.280] PartLoader: Compiling Part \u0027ContractPacks/AnomalySurveyor/Monolith/part/mega_monolith\u0027\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt should ... I never changed anything since the contract worked - only the weird orbits are giving me pause.\u003C/p\u003E\u003Cp\u003ENoone else having this, am I the only one using OrbitGenerator???\u003C/p\u003E\u003Cp\u003EYou said you could not reproduce the error?\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-18T18:46:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KerbMav\u0022 data-cite=\u0022KerbMav\u0022\u003E\u003Cdiv\u003EIt should ... I never changed anything since the contract worked - only the weird orbits are giving me pause.\u003Cp\u003ENoone else having this, am I the only one using OrbitGenerator???\u003C/p\u003E\u003Cp\u003EYou said you could not reproduce the error?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis error has nothing to do with orbits. Are you still having issues with the \u0022weird orbits\u0022 in 1.4.1?\u003C/p\u003E\u003Cp\u003EI have not attempted to reproduce it - looks to be unrelated to Contract Configurator to me.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-06-18T19:08:53Z","Content":"\n\u003Cp\u003EThe screenshot shows one orbit to many with no AP/PE - but the AP/PE thing inside Kerbin is gone.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-18T20:49:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KerbMav\u0022 data-cite=\u0022KerbMav\u0022\u003E\u003Cdiv\u003EThe screenshot shows one orbit to many with no AP/PE - but the AP/PE thing inside Kerbin is gone.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThree dropbox links and one exception is not a good bug report - even more so when you\u0027re saying you have two issues that appear to be completely unrelated.\u003C/p\u003E\u003Cp\u003EThe problem with the orbits has to do with the performance changes for 1.3.0 that \u0027preloaded\u0027 contracts to reduce lag. I was able to get rid of the icons, but didn\u0027t realize that there was extra orbits. I\u0027ll take a look at that tonight.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-06-18T21:46:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nightingale\u0022 data-cite=\u0022nightingale\u0022\u003E\u003Cdiv\u003EThree dropbox links and one exception is not a good bug report - even more so when you\u0027re saying you have two issues that appear to be completely unrelated.\u003Cp\u003EThe problem with the orbits has to do with the performance changes for 1.3.0 that \u0027preloaded\u0027 contracts to reduce lag. I was able to get rid of the icons, but didn\u0027t realize that there was extra orbits. I\u0027ll take a look at that tonight.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry, its just that I have \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/101604-1-0-2-Contract-Configurator-v1-4-1-2015-06-18?p=2019707\u0026amp;viewfull=1#post2019707\u0022 rel=\u0022external nofollow\u0022\u003Ealways \u003C/a\u003Ebeen talking about extra orbits and the (now gone) AP/PE inside Kerbin. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_lipssealed.gif\u0022 alt=\u0022:sealed:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Olsson","CreatedById":20218,"CreatedDateTime":"2015-06-18T22:37:55Z","Content":"\n\u003Cp\u003EThis does not seem to be compatible with RSS/RO.\u003C/p\u003E\u003Cp\u003EInstalled, no contracts show up in mission control, no contract packs installed and installed have both been tested.\u003C/p\u003E\u003Cp\u003EOnce contract configurator is removed, contracts show up as usual.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-18T23:45:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Olsson\u0022 data-cite=\u0022Olsson\u0022\u003E\u003Cdiv\u003EThis does not seem to be compatible with RSS/RO.\u003Cp\u003EInstalled, no contracts show up in mission control, no contract packs installed and installed have both been tested.\u003C/p\u003E\u003Cp\u003EOnce contract configurator is removed, contracts show up as usual.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENeed logs\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-19T03:54:36Z","Content":"\n\u003Cp\u003ELots and lots of bugfixes! \u003Ca href=\u0022https://github.com/jrossignol/ContractConfigurator/releases/tag/1.4.2\u0022 rel=\u0022external nofollow\u0022\u003EDownload now\u003C/a\u003E!\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EContract Configurator 1.4.2\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EFixed asteroid sample showing up in KSC contracts for Field Research (thanks maculator).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed mirrored heading/roll/pitch in SpawnVessel (thanks Xephan).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed issue with RemoteTech vessel tracking (thanks johnpmayer).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed OrbitGenerator NRE in tracking station (thanks HarlyKin).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed extra orbits in tracking station (thanks KerbMav).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Olsson","CreatedById":20218,"CreatedDateTime":"2015-06-19T12:46:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nightingale\u0022 data-cite=\u0022nightingale\u0022\u003E\u003Cdiv\u003ENeed logs\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELog: \u003Ca href=\u0022https://www.dropbox.com/s/5iht89g3khmjw91/output_log.txt?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/5iht89g3khmjw91/output_log.txt?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EGamedata: \u003Ca href=\u0022http://i.imgur.com/LBo65Sn.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/LBo65Sn.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m running 64-bit, so it might be the cause of the issue. However I read that you\u0027re implementing 64-bit support so I\u0027ll try my luck anyways.\u003C/p\u003E\u003Cp\u003EAnything I missed? Anything I can do to help or make it easier?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-19T13:02:37Z\u0022 title=\u002206/19/2015 01:02  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 19, 2015\u003C/time\u003E by Olsson\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RickKermen","CreatedById":140020,"CreatedDateTime":"2015-06-19T19:10:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Olsson\u0022 data-cite=\u0022Olsson\u0022\u003E\u003Cdiv\u003EThis does not seem to be compatible with RSS/RO.\u003Cp\u003EInstalled, no contracts show up in mission control, no contract packs installed and installed have both been tested.\u003C/p\u003E\u003Cp\u003EOnce contract configurator is removed, contracts show up as usual.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m having the exact same issue.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/AeYpo0d.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/AeYpo0d.jpg\u003C/a\u003E - No Contract Configurator\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/FWMGete.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/FWMGete.jpg\u003C/a\u003E - Contract Configurator and all contracts installation (for testing purposes)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/s1Enw0T.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/s1Enw0T.jpg\u003C/a\u003E - No contracts after install\u003C/p\u003E\u003Cp\u003ERunning KSP 64-bit on linux with RSS\u002BRO\u003C/p\u003E\u003Cp\u003ERegards! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-19T19:31:16Z\u0022 title=\u002206/19/2015 07:31  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 19, 2015\u003C/time\u003E by RickKermen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-19T19:29:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RickKermen\u0022 data-cite=\u0022RickKermen\u0022\u003E\u003Cdiv\u003EI\u0027m having the exact same issue... i only have stock contracts wiht RSS\u002BRO installed, contracts for contract configurator won\u0027t show up.\u003Cp\u003ERunning KSP 64bit on linux\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame response. Need logs.\u003C/p\u003E\u003Cp\u003EEDIT: Nevermind, I see that Olsson posted his this morning.\u003C/p\u003E\n"},{"CreatedByName":"RickKermen","CreatedById":140020,"CreatedDateTime":"2015-06-19T19:40:15Z","Content":"\n\u003Cp\u003EI believe it has something to do with the names of planets, was checking the logs and contract configurator is giving these errors, (RSS uses now Kopernicus with real planet names):\u003C/p\u003E\u003Cp\u003E\u0022[EXC 20:22:35.107] ArgumentException: \u0027Minmus\u0027 is not a valid CelestialBody. ContractConfigurator.ConfigNodeUtil.ParseCelestialBodyValue (System.String celestialName)\u003C/p\u003E\u003Cp\u003E ContractConfigurator.ExpressionParser.CelestialBodyParser.ParseIdentifier (ContractConfigurator.ExpressionParser.Token token)\u003C/p\u003E\u003Cp\u003E ContractConfigurator.ExpressionParser.ExpressionParser\u00601[T].ParseVarOrIdentifier (ContractConfigurator.ExpressionParser.Token token)\u003C/p\u003E\u003Cp\u003E ContractConfigurator.ExpressionParser.ExpressionParser\u00601[CelestialBody].ParseSimpleStatement[CelestialBody] ()\u003C/p\u003E\u003Cp\u003E Rethrow as Exception: Error parsing statement.\u003C/p\u003E\u003Cp\u003E Error occurred near \u0027*\u0027:\u003C/p\u003E\u003Cp\u003E Minmus\u0022\u003C/p\u003E\u003Cp\u003EMy log file also: \u003Ca href=\u0022http://www.filedropper.com/ksp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.filedropper.com/ksp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope it helps \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-19T19:56:30Z\u0022 title=\u002206/19/2015 07:56  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 19, 2015\u003C/time\u003E by RickKermen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-19T20:06:56Z","Content":"\n\u003Cp\u003EYou guys are killing me with these edits... I tend to read posts very fast so if you go back and edit them there\u0027s a very good chance I will never see the edit. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnyway, I missed the fact that RSS actually got released a couple days ago, since it\u0027s an official release now (and since I\u0027ve gotten through the bulk of the other problem reports) I\u0027m much more willing to go try and reproduce this myself. If either of you can reproduce on 32-bit before I\u0027m able to test it (won\u0027t be for at least 7 hours), then I\u0027d appreciate it.\u003C/p\u003E\u003Cp\u003EOne major problem is this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EArgumentException: \u0027Kerbin\u0027 is not a valid CelestialBody.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBasically, with the move to real names (which is a good change), most contract packs won\u0027t work with RSS. Tourism and Field Research should\u0027ve (but when I looked there\u0027s a handful of contracts in each that I accidentally hardcoded to Kerbal names). Still those are about the only two that will even remotely work.\u003C/p\u003E\u003Cp\u003EBut that won\u0027t cause your stock contracts to disappear. I couldn\u0027t see what the problem there was - but I looked rather quickly, and it could be because of 64 bit or any other number of things. Anyway, I\u0027ll take a look at this soon.\u003C/p\u003E\n"},{"CreatedByName":"RickKermen","CreatedById":140020,"CreatedDateTime":"2015-06-19T20:11:12Z","Content":"\n\u003Cp\u003ESorry about the edits \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EConcerning 32 bit version, it won\u0027t even launch on my linux installation, is there any other way i can help?\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-19T20:18:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RickKermen\u0022 data-cite=\u0022RickKermen\u0022\u003E\u003Cdiv\u003EI believe it has something to do with the names of planets, was checking the logs and contract configurator is giving these errors, (RSS uses now Kopernicus with real planet names):\u003Cp\u003E\u0022[EXC 20:22:35.107] ArgumentException: \u0027Minmus\u0027 is not a valid CelestialBody. ContractConfigurator.ConfigNodeUtil.ParseCelestialBodyValue (System.String celestialName)\u003C/p\u003E\u003Cp\u003E ContractConfigurator.ExpressionParser.CelestialBodyParser.ParseIdentifier (ContractConfigurator.ExpressionParser.Token token)\u003C/p\u003E\u003Cp\u003E ContractConfigurator.ExpressionParser.ExpressionParser\u00601[T].ParseVarOrIdentifier (ContractConfigurator.ExpressionParser.Token token)\u003C/p\u003E\u003Cp\u003E ContractConfigurator.ExpressionParser.ExpressionParser\u00601[CelestialBody].ParseSimpleStatement[CelestialBody] ()\u003C/p\u003E\u003Cp\u003E Rethrow as Exception: Error parsing statement.\u003C/p\u003E\u003Cp\u003E Error occurred near \u0027*\u0027:\u003C/p\u003E\u003Cp\u003E Minmus\u0022\u003C/p\u003E\u003Cp\u003EMy log file also: \u003Ca href=\u0022http://www.filedropper.com/ksp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.filedropper.com/ksp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope it helps \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHuh, that\u0027s interesting... 32 bit log, but nothing jumps out aside from the 100 planet name errors (which shouldn\u0027t cause any problems with the contract system itself, as those contracts will just be disabled).\u003C/p\u003E\u003Cp\u003EI\u0027ll dig some more once I have access to KSP.\u003C/p\u003E\n"},{"CreatedByName":"RickKermen","CreatedById":140020,"CreatedDateTime":"2015-06-19T20:36:33Z","Content":"\n\u003Cp\u003EI\u0027ve tested with the 2 contract packs that don\u0027t have Kerbal names hardcoded \u003C/p\u003E\u003Cp\u003E1- \u003Ca href=\u0022http://i.imgur.com/dvVC7B6.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/dvVC7B6.jpg\u003C/a\u003E - \u003Cspan style=\u0022color:#333333;\u0022\u003ETourism and Field Research installed\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003E2- \u003C/span\u003E\u003Ca href=\u0022http://i.imgur.com/Kj0jpWq.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/Kj0jpWq.jpg\u003C/a\u003E - Stock contracts show up with no problems (don\u0027t know if the Toursim and Field Research are supposed to show up at a new started game)\u003C/p\u003E\u003Cp\u003E3- \u003Ca href=\u0022http://i.imgur.com/8W4BE70.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/8W4BE70.jpg\u003C/a\u003E - With ScanSat contracts pack, also shows the stock contracts but not the scansat ones (again don\u0027t know if they are supposed to show up at a new started game)\u003C/p\u003E\u003Cp\u003EI hope it helps, good luck and ty for the must have mods you provide us! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-19T21:15:46Z","Content":"\n\u003Cp\u003EOkay, that last report from RickKermen is actually super helpful - I think I know what\u0027s going on.\u003C/p\u003E\u003Cp\u003EFirst off, neither Tourism or Field Research have start of game contracts. Tourism you need to achieve orbit, whereas you can start getting Field Research as soon as you\u0027ve done the first launch (I think, going by memory). SCANsat (both variants) you need to achieve orbit of the planet that you want to scan.\u003C/p\u003E\u003Cp\u003EBecause of the way Contract Configurator works, there\u0027s only really one contract type as far as stock KSP is concerned. But if the player has a ton of contract packs installed, I want the contract system to generate more Contract Configurator contracts that it otherwise would, so I cheat the system and add duplicates in the list. The number I add is based on a little formula that I\u0027ve tweaked over time, but if you install everything that\u0027s available, you\u0027ll probably end up with 6 or 7 in the list (you can see this by going to the debug menu and looking at one of the contract tabs, you\u0027ll see a bunch of ConfiguredContract entries).\u003C/p\u003E\u003Cp\u003ENow, what\u0027ll happen is that when KSP tries to generate a contract, it\u0027ll pick from that list, and end up picking Contract Configurator. Which will say \u0022no, can\u0027t generate a contract right now\u0022. The way the stock system works, it won\u0027t try every type, but will just give up after a few failed attempts at generating a contract (guessing 3 or 4, but haven\u0027t tested to confirm).\u003C/p\u003E\u003Cp\u003ESo there\u0027s two problems:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EI still count failed contracts when determining the \u0022magic number\u0022 to use (I can fix this).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EStock KSP contract generation is sill (I cannot fix this).\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo the big take-away is to only use the contract packs that support RSS, which at the moment should be:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003ETourism Plus (needs a minor bugfix to one contract - will do soon).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EField Research (needs fixes to about half the contracts - will do soon).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESCANsat lite (haven\u0027t confirmed, but 95% sure it\u0027ll be good based on what I know of it).\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor any other contract pack... go to the author\u0027s thread, and bug them that you want RSS support!\u003C/p\u003E\n"},{"CreatedByName":"RickKermen","CreatedById":140020,"CreatedDateTime":"2015-06-19T21:33:16Z","Content":"\n\u003Cp\u003EAlright, i\u0027ll start bugging them all! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003ERegards!\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-19T22:01:04Z","Content":"\n\u003Cp\u003EActually, I may look at just providing an RSS compatibility file instead... In many cases that would be good enough.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-20T02:26:17Z","Content":"\n\u003Cp\u003ESilly thing - I realized the reason no contracts were showing up was that Advanced Progression disables them. With nothing to replace them with, it becomes a lonely mission control.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-20T03:57:35Z","Content":"\n\u003Cp\u003EAnd ignore my comment on an RSS compatibility file via module manager. That\u0027s a bad idea for many reasons. In general it\u0027s much better if contract packs choose to make their stuff work in RSS.\u003C/p\u003E\u003Cp\u003ENow being able to tell someone that the contract pack they are using does \u003Cem\u003Enot\u003C/em\u003E work in RSS would be a nice feature... I\u0027ll have to think to see if I can come up with an easy way to do that.\u003C/p\u003E\n"},{"CreatedByName":"RickKermen","CreatedById":140020,"CreatedDateTime":"2015-06-20T11:15:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nightingale\u0022 data-cite=\u0022nightingale\u0022\u003E\u003Cdiv\u003EAnd ignore my comment on an RSS compatibility file via module manager. That\u0027s a bad idea for many reasons. In general it\u0027s much better if contract packs choose to make their stuff work in RSS.\u003Cp\u003ENow being able to tell someone that the contract pack they are using does \u003Cem\u003Enot\u003C/em\u003E work in RSS would be a nice feature... I\u0027ll have to think to see if I can come up with an easy way to do that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo Advanced Progression is the main issue...? Also contract makers inform\u003Cspan style=\u0022color:#333333;\u0022\u003E that the contract pack they are using does \u003C/span\u003E\u003Cem\u003Enot work in RSS \u003C/em\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003Eis really a good suggestion!\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI\u0027ll also keep testing contract packs \u003C/span\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"compy286","CreatedById":146689,"CreatedDateTime":"2015-06-21T15:31:45Z","Content":"\n\u003Cp\u003EI am also getting the stutter on flight and removing the anomoly contracts seems to fix it. I have started looking through the source this looks a little less than performant to me:\u003C/p\u003E\u003Cp\u003Eprivate IEnumerable\u0026lt;KeyValuePair\u0026lt;ConfiguredContract, bool\u0026gt;?\u0026gt; ContractGenerator(Contract.ContractPrestige prestige)\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E // Loop through all the contract groups\u003C/p\u003E\u003Cp\u003E IEnumerable\u0026lt;ContractGroup\u0026gt; groups = ContractGroup.AllGroups;\u003C/p\u003E\u003Cp\u003E foreach (ContractGroup group in groups.Skip(nextContractGroup).Concat(groups.Take(nextContractGroup)))\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E nextContractGroup = (nextContractGroup \u002B 1) % groups.Count();\u003C/p\u003E\u003Cp\u003E foreach (KeyValuePair\u0026lt;ConfiguredContract, bool\u0026gt;? pair in ContractGenerator(prestige, group))\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E yield return pair;\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003Eit looks like you are doing this:\u003C/p\u003E\u003Cp\u003Etake N items from the beginning, push them to the end, and then skip those N items. Basically you are shaving and re-appending a list to do something you could solve simply by tracking an index globally.\u003C/p\u003E\u003Cp\u003Eprivate static int groupIndex = 0;\u003C/p\u003E\u003Cp\u003Eprivate IEnumerable\u0026lt;KeyValuePair\u0026lt;ConfiguredContract, bool\u0026gt;?\u0026gt; ContractGenerator(Contract.ContractPrestige prestige)\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E IEnumerable\u0026lt;ContractGroup\u0026gt; groups = ContractGroup.AllGroups;\u003C/p\u003E\u003Cp\u003E if(groupIndex \u0026gt; groups.Count) groupIndex = 0;\u003C/p\u003E\u003Cp\u003E ContractGroup group = groups.elementAt(groupIndex );\u003C/p\u003E\u003Cp\u003E groupIndex \u002B\u002B;\u003C/p\u003E\u003Cp\u003E foreach (KeyValuePair\u0026lt;ConfiguredContract, bool\u0026gt;? pair in ContractGenerator(prestige, group))\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E yield return pair;\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E return NULL; //you should never reach here\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EI did a test in a mono.net project over just a list of integers and over 1million iterations the loop you wrote is taking about 4 seconds slower to complete. Basically you are making the computer do all of the work to shuffle those arrays to simply return them in the order it\u0027s stored in.\u003C/p\u003E\u003Cp\u003EYour skipping(.Skip) N forward but then you are cutting N off the front of the array with .Take and moving it to the back with .Concat(). It wouldn\u0027t be so bad if you stored that result and refreshed it but since the IEnumerable that is created from all that only lives the scope of that foreach loop. Furthermore the .Take creates a new list that then chews some memory up and triggers garbage collection.\u003C/p\u003E\u003Cp\u003EThere are a few more places where you do something similar but I didn\u0027t really look into them, I am just a programmer sad that once you get enough contract mods installed this mod eats all my CPU time :-(. If I was actually set up to develop KSP mods i\u0027d be glad to look into it a bit for you.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-21T16:38:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022compy286\u0022 data-cite=\u0022compy286\u0022\u003E\u003Cdiv\u003EI am also getting the stutter on flight and removing the anomoly contracts seems to fix it. I have started looking through the source this looks a little less than performant to me:\u003Cp\u003E\u0026lt;snip\u0026gt;\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting analysis, but there\u0027s a couple issues:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EYou mention \u0022the .Take creates a new list\u0022. This is completely wrong. The IEnumerable methods (Skip, Take, Concat, etc) do \u003Cem\u003Enot\u003C/em\u003E create new lists. Enumerables in C# use deferred execution - meaning that it\u0027s really just storing a \u0022pointer\u0022 and returning the appropriate next element when it is asked for. Is it slower than if I had just indexed with an int? Certainly - but I don\u0027t believe it\u0027s significant.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EYou say you\u0027ve tested it and over 1 million iterations, my loop is slower by 4 seconds (slower than \u0022something\u0022). But you haven\u0027t shown any code for me to comment on, and worse, the 4 seconds is not terribly meaningful without context. What \u003Cem\u003Epercentage \u003C/em\u003Efaster is it?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIn the whole, I don\u0027t believe the section you\u0027ve locked on to is material to the performance perceived by the player (more on this in a bit).\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe biggest problem is that the most valuable resource I have when it comes to Contract Configurator development is \u003Cem\u003Etime\u003C/em\u003E (my time, specifically). I have a very limited amount of time to work on Contract Configurator at the moment, and with bug fixes and so there\u0027s only so much I can get done at the moment.\u003C/p\u003E\u003Cp\u003EAnyway, in terms of the more general performance issues that you speak of, there\u0027s two main areas that need to be addressed:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003ETime to execute the contract generation logic (ie. performance).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFrequency of with the contract generation logic is run\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe main culprit for #1 is the expression parser. Back when it was a very simple system used in a couple small places, I made a simplifying decision to combine the parse and execution logic into one. Now the expression sub-system is a fairly major thing (and is absolutely \u003Cem\u003Ehuge\u003C/em\u003E in terms of how it is used in Field Research, which is why the bulk of reports relate to that). So I really need to go back and split out parsing and execution into different code paths (which means parsing the expressions into a sort of \u0022executable\u0022 object). This is a \u003Cem\u003Ebig\u003C/em\u003E effort. I could probably work for 2-3 weeks on nothing but that and still not quite be done. So even though it\u0027s probably what ideally needs to be done, it\u0027s not something I\u0027m looking at taking on.\u003C/p\u003E\u003Cp\u003EFrequency is something I have more control over with the changes in 1.3.0, so it\u0027ll be something I\u0027ll be looking at. There\u0027s lots and lots of little things that can get done here that will hopefully add up to reducing how often the laggy bits happen (but not eliminate them entirely):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EBreak up the contract requirement logic to check some thing that can\u0027t be affected by expressions before the expressions are run.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdd logic to be smarter about not trying to constantly re-generate the same contract type if it keeps failing over and over (usually due to the player not meeting the proper requirements yet).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EDon\u0027t generate at all in some pre-determined circumstances (like when the \u0022list\u0022 is full). This is actually already the case, but definitely could use a second look.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe final thing that I want to look into is just shoving the contract generation into its own thread. I\u0027ve seen lots of rhetoric about \u0022Unity not supporting multi-threading\u0022, but very little discourse on what that actually means (ie. where are the limitations). I\u0027m really doing very little \u0022Unity\u0022 stuff in the contract generation logic, so hypothetically it may be possible to move that into its own thread... big potential to break stuff though, so would need a huge amount of testing.\u003C/p\u003E\u003Cp\u003EAnyway, if you do really still believe that the code you\u0027ve identified is material, then test it out in Contract Configurator, and send a pull request (for functionally equivalent code \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E). Or if you \u003Cem\u003Ereally\u003C/em\u003E want to help out, you can roll up your sleeves and start poking at one of the items above (there\u0027s a couple that are relatively low-cost to implement/test).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThere are a few more places where you do something similar but I didn\u0027t really look into them, I am just a programmer sad that once you get enough contract mods installed this mod eats all my CPU time :-(. If I was actually set up to develop KSP mods i\u0027d be glad to look into it a bit for you.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat\u0027s stopping you? Sounds like you\u0027ve got the compiler, you have the skills from your post, and you obviously have the game, so...\u003C/p\u003E\n"},{"CreatedByName":"compy286","CreatedById":146689,"CreatedDateTime":"2015-06-21T18:46:22Z","Content":"\n\u003Cp\u003EI did a comparison of a standard single incrementing index that loops back to 0 vs. your code.\u003C/p\u003E\u003Cp\u003EThe execution with the groups.Skip(N).Concat(groups.Take(n); vs a a standard static index.\u003C/p\u003E\u003Cp\u003EHere\u0027s a code example, just plop it into a new console application in Monodevelop/xamarin/visual studio:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/8lu1i1k9x269z4p/Program.cs?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/8lu1i1k9x269z4p/Program.cs?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn vs 2012 it was about 3.8 seconds to iterator the .take etc out .35 to do mine over a million iterations. In mono you see 6 seconds vs .38.\u003C/p\u003E\u003Cp\u003EI think the concat is what is biting you in the ass really in that tight loop. It\u0027s also a bit concearning to see linq execution times in mono take almost twice as long as they do in native .net.\u003C/p\u003E\u003Cp\u003EI did read up on how to start with KSP modding and didn\u0027t realize it was as easy as simply pointing Visual studio at some DLLs. I got Contract Configurator built, dropped in a static index vs the linq/ienumarable code and saw that most runs aren\u0027t hitting your debug warnings. I also enabled verbose logging and did notice that the real problem was in fact the parsing engine as you said.\u003C/p\u003E\u003Cp\u003EI did find you could gain an immense deal of performance boost from simply making all the list initialization using temp variables on one line like this:\u003C/p\u003E\u003Cp\u003EThis is from scientist.cfg from Field Research\u003C/p\u003E\u003Cp\u003EOLD:\u003C/p\u003E\u003Cp\u003E DATA\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E type = List\u0026lt;ScienceSubject\u0026gt;\u003C/p\u003E\u003Cp\u003E scienceSubjectsTemp1 = AllScienceSubjectsByBiome([@biome])\u003C/p\u003E\u003Cp\u003E scienceSubjectsTemp2 = @scienceSubjectsTemp1.Where(s =\u0026gt; s.Situation() == SrfLanded)\u003C/p\u003E\u003Cp\u003E scienceSubjectsTemp3 = @scienceSubjectsTemp2.Where(s =\u0026gt; s.NextScienceReportValue() \u0026gt; 1.0)\u003C/p\u003E\u003Cp\u003E scienceSubjects = @scienceSubjectsTemp3.Where(s =\u0026gt; !s.Biome().IsKSC()).Random(3)\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003Evs NEW:\u003C/p\u003E\u003Cp\u003E DATA\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E type = List\u0026lt;ScienceSubject\u0026gt;\u003C/p\u003E\u003Cp\u003E scienceSubjects = AllScienceSubjectsByBiome([@biome]).Where(s =\u0026gt; (s.Situation() == SrfLanded \u0026amp;\u0026amp; s.NextScienceReportValue() \u0026gt; 1.0 \u0026amp;\u0026amp; !s.Biome().IsKSC())).Random(3)\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003EReadability sucks but it does end in a noticeable net increase for the parsing/execution bits. I get a pretty nasty amount of stutter but it\u0027s more frequent stutter instances that last shorter so the heartbeat is definitely ticking a bit faster.\u003C/p\u003E\u003Cp\u003EThreading the parsing bit is an interesting proposition. While unity doesn\u0027t handle threading I bet it wouldn\u0027t mind linking to a library that is threaded. I do it in a single threaded scripting engine for running automated tests at work. Testcomplete lets you load in .net libraries which are great for creating glue layers for functionality you wish you had.\u003C/p\u003E\u003Cp\u003EThe DATA regions are the ones that are dynamically reloaded correct? The parameter regions stay static?\u003C/p\u003E\n"}]}