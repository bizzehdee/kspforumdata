{"TopicId":46200,"ForumId":29,"TopicTitle":"In-game part welding","CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2013-09-17T08:03:22Z","PageNum":1,"Articles":[{"CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2013-09-17T08:03:22Z","Content":"\n\u003Cp\u003EHello everyone,\u003C/p\u003E\u003Cp\u003EI got inspired by johnsonwax\u0027s blog posts regarding \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/blog.php/81152-johnsonwax\u0022 rel=\u0022external nofollow\u0022\u003Epart welding\u003C/a\u003E (making a single part out of multiple modules) but found it difficult to manually weld parts together due to scaling differences between parts. In addition, this may not be possible in the future anymore as current development of KSP indicates that attachment nodes will be defined in the model and no longer in the config.\u003C/p\u003E\u003Cp\u003EInitially I made an external tool to automate welding by reading all the part configs, reading the .craft file created from saving a vessel and generating a new part.cfg with all the parts welded into a single part.\u003C/p\u003E\u003Cp\u003EHowever, as some part functionality would invariably become lost (unable to control multiple docking ports, transfer fuel between sub-parts) and to make things more user-friendly I wanted to make this an in-game option by creating a single dynamic part which renders and has physics properties like a single part but still allows you to control each sub-part individually. I\u0027ve made some progress as you can see but I am stuck on a couple points:\u003C/p\u003E\u003Cp\u003E- Part classes in the editor are incomplete and seem to be only proxies so most of the properties are null, making it impossible to get the actual model for that part.\u003C/p\u003E\u003Cp\u003E- I can not for the life of me figure out how to create a part at runtime, the GameDatabase class holds a list of parts and so does the partloader. You seem to be able to remove parts but not create new ones.\u003C/p\u003E\u003Cp\u003EI\u0027ve tried looking at other mods such as SubAssemblies but that one seems to generate a .craft ConfigNode list from the Editor\u0027s Vessel class and write that to disk which is not very helpful to me. Sure, I can also traverse the ConfigNodes to get the information I need but they are basically just really thin wrappers and only hold strings. Most other mods I\u0027ve seen that have arbitrary content (such as KerbTown) render meshes directly and do not create actual parts.\u003C/p\u003E\u003Cp\u003EI\u0027ve found a related thread titled \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/48441-Drawing-Ghosted-parts-Cloning-Part-Mesh-Only-%28No-Physics-Logic%29\u0022 rel=\u0022external nofollow\u0022\u003EDrawing \u0022Ghosted\u0022 parts - Cloning Part Mesh Only (No Physics/Logic)\u003C/a\u003E which seemed promising but the solution to use GetComponent\u0026lt;MeshFilter\u0026gt;() as per Unity\u0027s documentation does not work since Parts in the Editor have no MeshFilter as they are (I think) just proxies.\u003C/p\u003E\u003Cp\u003EAny input would be appreciated.\u003C/p\u003E\u003Cp\u003EPS. Anyone figured out how to attach a debugger to KSP so breakpoints can be set? I assume it\u0027s impossible since there are no symbols for KSP.exe\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/NWRsEi2.jpg\u0022 alt=\u0022NWRsEi2.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-09-17T08:20:13Z","Content":"\n\u003Cp\u003EHey,\u003C/p\u003E\u003Cp\u003EI am actually working on the same thing,\u003C/p\u003E\u003Cp\u003EThere is no free way (that I know of) to have a debugger attach the game, and i didn\u0027t try the paid one, the full version of VS may be able to do it.\u003C/p\u003E\u003Cp\u003EI have a intensive use of the Debug.Log to display all the information i need.\u003C/p\u003E\u003Cp\u003EFor the part info, I use a mix between what is in the part classes, and the configNode of the gamedata base. \u003C/p\u003E\u003Cp\u003EEither C#, Unity or KSP have parser for lot of the possible type to and from string.\u003C/p\u003E\u003Cp\u003EHere is a screen of a very early version (like a month or two ago), when I could only weld the structural parts (I now manage ressources, modules etc...)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/BLOmiwY.png\u0022 alt=\u0022BLOmiwY.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2013-09-17T08:30:48Z","Content":"\n\u003Cp\u003EThat... Is actually really cool! We should be able to make large components on our own with that!\u003C/p\u003E\n"},{"CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2013-09-17T12:01:52Z","Content":"\n\u003Cp\u003ENice work there Ubiozur, I assume you are parsing the ConfigNode data and saving the welded result to a part.cfg file and reloading the database? It is what my external tool was doing (though reloading was a manual thing). It works but there are downsides.\u003C/p\u003E\u003Cp\u003EI would like to avoid parsing and use internal game data directly and not need to reload. Additionally, I\u0027ll need some way to create a dynamic part so when for example you weld two docking ports together the hit detection when you click on it will still allow you to control each docking port individually.\u003C/p\u003E\u003Cp\u003E A basic part weld would in theory cause them to be treated as a whole and ModuleDockingNode would only dock/undock both of them. Might need some experimentation because it might be possible to define multiple ModuleDockingNode\u0027s with different referenceAttachNode values. But with the new way of defining attachment nodes in the model file itself, it will still be required to dynamically create and/or adjust the necessary attachment nodes.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-17T13:07:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UbioZur\u0022 data-cite=\u0022UbioZur\u0022\u003E\u003Cdiv\u003EThere is no free way (that I know of) to have a debugger attach the game, and i didn\u0027t try the paid one, the full version of VS may be able to do it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis might go a little off topic, but since you guys mentioned it:\u003C/p\u003E\u003Cp\u003EI don\u0027t think attaching VS to KSP will help. Sure, you can see native code of stuff like mono.dll, but this bundled is responsible for loading and executing your C# code and VS does not really have a way to handle that. Kind of sad that it does not somehow uses the MS .net runtime while on a win... heard it has a much more advanced JIT compiler. There has to be a MS/VS way to use .NET from native apps and debug that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EOn the other hand, debugging your own assembly for a pure .net application is easy. With a little workaround i could even use the free version of VS to debug a mod for another game.\u003C/p\u003E\u003Cp\u003EMy next attempt was finding a way to debug native apps that use mono. The \u003Ca href=\u0022http://www.mono-project.com/Debugging\u0022 rel=\u0022external nofollow\u0022\u003Efew\u003C/a\u003E \u003Ca href=\u0022http://www.mono-project.com/Debugger\u0022 rel=\u0022external nofollow\u0022\u003Eofficial\u003C/a\u003E \u003Ca href=\u0022http://www.mono-project.com/Guide:Debugger\u0022 rel=\u0022external nofollow\u0022\u003Edocs\u003C/a\u003E did not really help me, even more since they are for an outdated version of monodevelop and the new replacement didn\u0027t especially like me^^\u003C/p\u003E\u003Cp\u003EThe more interesting part is \u003Ca href=\u0022http://www.mono-project.com/Soft_Debugger\u0022 rel=\u0022external nofollow\u0022\u003Esoft debugging\u003C/a\u003E. We don\u0027t have a debug-KSP-Build, so getting that to work would be tricky and would likely require use to manipulate KSPs embedded mono runtime. Still it seems like the most promising approach...\u003C/p\u003E\u003Cp\u003EIt might be also possible to do it a Unity way. But for usual projects they appear to use a debug build (we don\u0027t have) and the soft debugger. Even then i haven\u0027t seen an easy way to start it without the unity solution. I also could not find any documentation on how to make and debug a mod for an unity game, what is kind of a shame for such an advanced game engine. I\u0027m sure we are not the only community with those problems. Also sad that that there isn\u0027t any help from the KSP devs.\u003C/p\u003E\u003Cp\u003EAnyone reading this might figured sth out i missed? Getting proper debugging to work would be awesome.\u003C/p\u003E\n"},{"CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2013-09-17T15:55:38Z","Content":"\n\u003Cp\u003EIn relation to debugging, I just tried UnityVS and it\u0027s no dice (Using full version of VS2012 btw). As far as I can tell Unity only supports soft debugging and since we have a release build and no project file this is simply not going to happen. I\u0027m kinda surprised that someone (Unity) wants their framework so much locked down you can\u0027t even attach a simple debugger. I never had any problems doing that with native apps unless there was some anti-debugger code deliberately added for copyright reasons.\u003C/p\u003E\u003Cp\u003EIn any case, I found this \u003Ca href=\u0022http://blog.tiaan.com/link/2010/03/15/csharp-interpreter-unity-plugin-console-debugger\u0022 rel=\u0022external nofollow\u0022\u003EUnity c# interpreter console\u003C/a\u003E which is better than nothing. At least you can try things out and do debug prints without having to reload KSP all the time.\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-09-17T17:59:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003ENice work there Ubiozur, I assume you are parsing the ConfigNode data and saving the welded result to a part.cfg file and reloading the database? It is what my external tool was doing (though reloading was a manual thing). It works but there are downsides.\u003Cp\u003EI would like to avoid parsing and use internal game data directly and not need to reload. Additionally, I\u0027ll need some way to create a dynamic part so when for example you weld two docking ports together the hit detection when you click on it will still allow you to control each docking port individually.\u003C/p\u003E\u003Cp\u003E A basic part weld would in theory cause them to be treated as a whole and ModuleDockingNode would only dock/undock both of them. Might need some experimentation because it might be possible to define multiple ModuleDockingNode\u0027s with different referenceAttachNode values. But with the new way of defining attachment nodes in the model file itself, it will still be required to dynamically create and/or adjust the necessary attachment nodes.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah I do use a mix of in game value and ConfigNode parsing, because not everything is available with the in game classes (well it\u0027s easier to get the cfg modules through the ConfigNode than through the PartModule variable).\u003C/p\u003E\u003Cp\u003EI know it is possible for one part to have several docking module to several nodes. the hardest part is that the undock button don\u0027t tell which port it is.\u003C/p\u003E\u003Cp\u003EFaark, it\u0027s not off topic since it\u0027s been asked by xtremeqg. Have anyone tried \u003Ca href=\u0022http://www.red-gate.com/products/dotnet-development/reflector/\u0022 rel=\u0022external nofollow\u0022\u003E.NET Reflector\u003C/a\u003E, I have a friend who use that at his work when working with third party middleware.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2013-09-17T19:18:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E- Part classes in the editor are incomplete and seem to be only proxies so most of the properties are null, making it impossible to get the actual model for that part.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPart.FindModelComponents\u0026lt;MeshFilter\u0026gt;();\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-17T19:25:24Z","Content":"\n\u003Cp\u003EOkay, but the title isn\u0027t really perfect to later recover a discussion about debugging...\u003C/p\u003E\u003Cp\u003EReflector is a decompiler.\u003C/p\u003E\u003Cp\u003E- Decompiling nearly never helps to fix bugs in your mods, since we have the source anyway.\u003C/p\u003E\u003Cp\u003E- Decompiling is prohibited by the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/7529-Plugin-Posting-Rules-And-Official-Documentation\u0022 rel=\u0022external nofollow\u0022\u003Erules\u003C/a\u003E, so ofc non of us would ever do it.\u003C/p\u003E\u003Cp\u003E- If someone would nonetheless, he would ofc use the free counterpart ILSpy instead^^\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003EIn any case, I found this \u003Ca href=\u0022http://blog.tiaan.com/link/2010/03/15/csharp-interpreter-unity-plugin-console-debugger\u0022 rel=\u0022external nofollow\u0022\u003EUnity c# interpreter console\u003C/a\u003E which is better than nothing. At least you can try things out and do debug prints without having to reload KSP all the time.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting, thought about creating sth like that myself. But you still don\u0027t have a trace and cannot access local scopes, what makes it not very helpful. I also thought about programmatically insert a bunch of calls to a custom debugger func, but creating sth like that would be a huge project by itself... all just to simulate a debugger \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EUnityVS looks interesting. Anyway, i wonder what would be necessary to make that mono runtime debug-able. Maybe all we need to do is to replace the mono.dll or build a wrapper for it?\u003C/p\u003E\n"},{"CreatedByName":"Zeblote","CreatedById":79303,"CreatedDateTime":"2013-09-17T19:31:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E- If someone would nonetheless, he would ofc use the free counterpart ILSpy instead^^\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo way, he would use Telerik JustDecompile which fixes the obfuscating and creates a VS project folder.\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-09-18T08:00:52Z","Content":"\n\u003Cp\u003EAnyway guys, I didn\u0027t know it was a decompiler and that\u0027s why I did offer that, but since it\u0027s one, and it\u0027s against the rules, let\u0027s not talk about any other decompiler possibilities.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EPart.FindModelComponents\u0026lt;MeshFilter\u0026gt;();\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ehumm I will have to try that and see if it\u0027s a better way to get the model info.\u003C/p\u003E\n"},{"CreatedByName":"JDP","CreatedById":30775,"CreatedDateTime":"2013-09-18T08:48:32Z","Content":"\n\u003Cp\u003EI trust you are aware that the ingame debug log has a verbose mode. in settings.cfg set:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EVERBOSE_DEBUG_LOG = True\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m not entirely sure this is what you\u0027d be looking for, but at least it\u0027s been a lot of help with tracking exceptions to their culprit methods at runtime for me.\u003C/p\u003E\u003Cp\u003Eoh, and regarding decompilers:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://2.bp.blogspot.com/-xsdGCDQAX6E/UA2m4GmlKrI/AAAAAAAADYo/nZOQ5L_RlAE/s400/Planet\u002Bof\u002Bthe\u002BApes\u002B1968\u002BHear\u002BNo\u002BEvil\u002BSee\u002BNo\u002BEvil\u002BSpeak\u002BNo\u002BEvil\u002BThree\u002BWise\u002BMonkeys\u002B3\u002BBody\u002BLanguage\u002BNonverbal\u002BCommunication\u002BBody\u002BLanguage\u002BExpert\u002BSpeaker\u002BExpert\u002BSpeaker\u002BLas\u002BVegas.jpg\u0022 alt=\u0022Planet\u002Bof\u002Bthe\u002BApes\u002B1968\u002BHear\u002BNo\u002BEvil\u002BSee\u002BNo\u002BEvil\u002BSpeak\u002BNo\u002BEvil\u002BThree\u002BWise\u002BMonkeys\u002B3\u002BBody\u002BLanguage\u002BNonverbal\u002BCommunication\u002BBody\u002BLanguage\u002BExpert\u002BSpeaker\u002BExpert\u002BSpeaker\u002BLas\u002BVegas.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-18T08:54:39Z\u0022 title=\u002209/18/2013 08:54  AM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 18, 2013\u003C/time\u003E by JDP\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2013-09-18T13:17:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EPart.FindModelComponents\u0026lt;MeshFilter\u0026gt;();\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ehumm I will have to try that and see if it\u0027s a better way to get the model info.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have already tried that, but parts in the Editor seem to be proxies and have no mesh as I stated on the start of this topic. Parts from GameDatabase might have them but since I cannot figure out how to index them properly (it is expecting an url and the current vessel\u0027s parts do not have that property or anything remotely related to allow construction of it) I have no way of obtaining the meshes other than going through the ConfigNodes.\u003C/p\u003E\u003Cp\u003ESo I had a little fun last night creating some multipart station trusses and performed a docking test near the runway...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/rfHzfhv.png\u0022 alt=\u0022rfHzfhv.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EUnfortunately it seems that there are some limitations to the game. When trying to actually drive the wheels glitch up and their power drain becomes NaN. Doing a quick time acceleration seems to fix it though. It think it is related to the Fustek Karmony modules having light animations and the engine not being able to handle multiple lights and/or animations on a single part. I tried replacing ModuleLight with ModuleAnimateGeneric which does allow the window lights to function properly but leaves some ugly toggle and state:locked garbage in the context menu. Removing the light definitions altogether caused the game to spew errors on every frame regarding NullPointers hrm.....\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/IOXmHbN.png\u0022 alt=\u0022IOXmHbN.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EYes, only 16 parts for a \u002B50 tonne station (2 trusses, 8 wheels, 2 cupolas, 2 docking ports and 2 testing wheels stuck to the cupola to figure out that NaN issue). I left the tanks intentionally empty as it would be a total pig to launch fully fueled and doing a simple refueling run requires little effort.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/z6rDgJZ.png\u0022 alt=\u0022z6rDgJZ.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESomehow there are also periodic GUI glitches such as the break button and throttle indicator disappearing which might be shader or light related, I do not know. Suggestions are welcome as these issues are stopping a welding mod from becoming truly awesome.\u003C/p\u003E\u003Cp\u003EOfftopic: The quote button seems to be broken so I just did it manually.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-18T13:25:11Z\u0022 title=\u002209/18/2013 01:25  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 18, 2013\u003C/time\u003E by xtremeqg\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-18T17:35:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003EOfftopic: The quote button seems to be broken so I just did it manually.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJop, since ajax is off. Well see what they do after the announced forum update. But you can middle-mouse it to open it in a new window.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003EIn any case, I found this \u003Ca href=\u0022http://blog.tiaan.com/link/2010/03/15/csharp-interpreter-unity-plugin-console-debugger\u0022 rel=\u0022external nofollow\u0022\u003EUnity c# interpreter console\u003C/a\u003E which is better than nothing. At least you can try things out and do debug prints without having to reload KSP all the time.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDid you successfully use it? It appears that it cannot load, since System.CodeDom, Microsoft.CSharp and maybe even more is missing in KSP\u0027s mono environment. We would have to provide them with the our mod as well... especially since KSP does not tell use many details about whats wrong... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2013-09-24T00:01:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003EI have already tried that, but parts in the Editor seem to be proxies and have no mesh as I stated on the start of this topic. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf those parts had no meshes, their MeshRenderers wouldn\u0027t be rendering anything. \u003C/p\u003E\u003Cp\u003EBuild this and watch the chaos unfold:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace MeshFilterEditorTest\u003Cbr\u003E{\u003Cbr\u003E    [KSPAddon(KSPAddon.Startup.EditorAny, false)]\u003Cbr\u003E    public class MessWithEditorMeshes : MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        public void Start()\u003Cbr\u003E        {\u003Cbr\u003E            GameEvents.onPartAttach.Add(NewPartAttached);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public void NewPartAttached(GameEvents.HostTargetAction\u0026lt;Part, Part\u0026gt; action)\u003Cbr\u003E        {\u003Cbr\u003E            if (action.host)\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022Found action host: \u0022 \u002B action.host.ConstructID);\u003Cbr\u003E\u003Cbr\u003E                if (EditorLogic.fetch.ship.parts.Count \u0026gt; 0)\u003Cbr\u003E                {\u003Cbr\u003E                    Part sourcePart = PartLoader.Instance.parts[Random.Range(0, PartLoader.Instance.parts.Count - 1)].partPrefab;\u003Cbr\u003E                    MeshFilter sourceMf = sourcePart.FindModelComponent\u0026lt;MeshFilter\u0026gt;();\u003Cbr\u003E                    MeshFilter mf = action.host.FindModelComponent\u0026lt;MeshFilter\u0026gt;();\u003Cbr\u003E\u003Cbr\u003E                    Debug.Log(\u0022Found mfs? \u0022 \u002B (sourceMf != null ? \u0022found sourceMf\u0022 : \u0022\u0022) \u002B (mf != null ? \u0022 found mf\u0022 : \u0022\u0022));\u003Cbr\u003E                    mf.sharedMesh = sourceMf.sharedMesh;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-24T17:14:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xtremeqg\u0022 data-cite=\u0022xtremeqg\u0022\u003E\u003Cdiv\u003ESomehow there are also periodic GUI glitches such as the break button and throttle indicator disappearing which might be shader or light related, I do not know. Suggestions are welcome as these issues are stopping a welding mod from becoming truly awesome.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m running into this myself with a plugin I\u0027m writing that controls the throttle.\u003C/p\u003E\u003Cp\u003EIf I set the throttle to 100 the throttle indicator vanishes. The throttle still works fine and behaves as expected, just the indicator is gone.\u003C/p\u003E\u003Cp\u003EI then remembered that the max throttle is 1 for 100%, not 100 so setting the throttle to 10000% had issues unsurprisingly.\u003C/p\u003E\u003Cp\u003ETry adding Mathf.Clamp() arguments around variables before passing them back to KSP might do the trick for what you are experiencing?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"xtremeqg","CreatedById":74327,"CreatedDateTime":"2013-09-30T20:01:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003ETry adding Mathf.Clamp() arguments around variables before passing them back to KSP might do the trick for what you are experiencing?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, the earlier prototype I made was just a part.cfg hack to see how far things could go. As I wrote before, there were several issues. Most notably animations were completely broken, which would be fine if I could simply disable them which I found out later I cannot. The bigger issues however are game-breaking:\u003C/p\u003E\u003Cp\u003E- Removing certain PartModules (Lights) causing nullpointer exceptions which locked up the game entirely.\u003C/p\u003E\u003Cp\u003E- Interface elements glitching and disappearing (related to animations I think).\u003C/p\u003E\u003Cp\u003E- Basic functionality such as rover wheels becoming broken (I have no clue).\u003C/p\u003E\u003Cp\u003EI do not know whether this is a limitation of Unity or KSP.\u003C/p\u003E\u003Cp\u003ETo get back to clamping float values, floats themselves are not entirely exact and some perfectly rounded numbers are impossible to represent as a float. Clamping them may still cause them to exceed their maximum value. In any case, I do not see how a thrust ratio of 10 or even 1000 could break things. Essentially your fuel usage would be through the roof and you\u0027ll have insane thrust for a couple seconds but that should be all. In my case, the test parts did not even have an engine nor fuel and I never raised the thrust above 0.\u003C/p\u003E\u003Cp\u003EBy the way, I found another rather game-breaking bug: When I attempted to dock some segments in space, several docking clamps malfunctioned (refused to dock) and one even became duplicated. I tried hacking the persistence file to get rid of the duplicate but I did not have much success with the newer format. My attempts would cause all context (right click) menus to stop functioning and in some cases half of the craft would warp several dozen kilometers in random directions or in the most extreme case parts would be randomly scattered around, including sub-parts (which should not happen since most of it was a single part).\u003C/p\u003E\u003Cp\u003EI\u0027m clueless at this point and pondering whether this mod will ever actually work for more than just merging a couple fuel tanks.\u003C/p\u003E\u003Cp\u003ESorry for my lack of responses, I\u0027ve been rather busy and sick as well.\u003C/p\u003E\n"},{"CreatedByName":"praise the suuun","CreatedById":69912,"CreatedDateTime":"2013-10-02T07:28:09Z","Content":"\n\u003Cp\u003Eim very much waiting intently for some form of culmination from you gentlemen. most of this stuff is greek to me and i wish i could help you.\u003C/p\u003E\u003Cp\u003Eim looking for a one click mod that will convert a craft file into 1 structural part while in the ksp universe. if thats too much to ask then just a one click mod that converts a craft file into 1 structural part then be able to launch as one part into the ksp universe.\u003C/p\u003E\u003Cp\u003Epart functionality is not necessary, only that it look exactly the same as the multiple part craft. how far away are you gentlemen from creating something magnificent? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"The Destroyer","CreatedById":36109,"CreatedDateTime":"2013-10-02T07:34:19Z","Content":"\n\u003Cp\u003EI\u0027ve always had this idea, always thought: SUGGEST THIS TO THE DEVS! But never got to it, nor did I know it would be possible.\u003C/p\u003E\u003Cp\u003EBut if you can do this,\u003C/p\u003E\u003Cp\u003E1000 part interplanetary-mothership-kraken-summoning ships will become 100 part wonders\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-10-02T07:48:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Samuel Jenks\u0022 data-cite=\u0022Samuel Jenks\u0022\u003E\u003Cdiv\u003Eim very much waiting intently for some form of culmination from you gentlemen. most of this stuff is greek to me and i wish i could help you.\u003Cp\u003Eim looking for a one click mod that will convert a craft file into 1 structural part while in the ksp universe. if thats too much to ask then just a one click mod that converts a craft file into 1 structural part then be able to launch as one part into the ksp universe.\u003C/p\u003E\u003Cp\u003Epart functionality is not necessary, only that it look exactly the same as the multiple part craft. how far away are you gentlemen from creating something magnificent? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have fixed a big bug on mine yesterday (been on it for weeks!)\u003C/p\u003E\u003Cp\u003EA few tweaks, and I may release a playtest to hae a better view of what can\u0027t be welded!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Samuel Jenks\u0022 data-cite=\u0022Samuel Jenks\u0022\u003E\u003Cdiv\u003Eim very much waiting intently for some form of culmination from you gentlemen. most of this stuff is greek to me and i wish i could help you.\u003Cp\u003Eim looking for a one click mod that will convert a craft file into 1 structural part while in the ksp universe. if thats too much to ask then just a one click mod that converts a craft file into 1 structural part then be able to launch as one part into the ksp universe.\u003C/p\u003E\u003Cp\u003Epart functionality is not necessary, only that it look exactly the same as the multiple part craft. how far away are you gentlemen from creating something magnificent? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you suggest it to the dev, it will be locked because it\u0027s on the what not to suggest list. So soon for me.\u003C/p\u003E\n"},{"CreatedByName":"praise the suuun","CreatedById":69912,"CreatedDateTime":"2013-10-02T08:01:38Z","Content":"\n\u003Cp\u003Egood stuff m80 and very quick response! heres another: say i want to manually convert a craft to one structural part without a mod. i know that this works by retrieving multiple models from anywhere in the ksp directory but i dont know what data will be accepted under this structure.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i636.photobucket.com/albums/uu87/phsycofrog/Capture.png\u0022 alt=\u0022Capture.png\u0022\u003E\u003C/p\u003E\u003Cp\u003Ehow much of that is accepted by straight copy paste into the MODEL { structure?\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-10-02T08:39:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Samuel Jenks\u0022 data-cite=\u0022Samuel Jenks\u0022\u003E\u003Cdiv\u003Egood stuff m80 and very quick response! heres another: say i want to manually convert a craft to one structural part without a mod. i know that this works by retrieving multiple models from anywhere in the ksp directory but i dont know what data will be accepted under this structure.\u003Cp\u003E\u003Cimg src=\u0022http://i636.photobucket.com/albums/uu87/phsycofrog/Capture.png\u0022 alt=\u0022Capture.png\u0022\u003E\u003C/p\u003E\u003Cp\u003Ehow much of that is accepted by straight copy paste into the MODEL { structure?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think to manually do it from a craft file is actually harder.\u003C/p\u003E\u003Cp\u003EYou will need the position (pos), and the Euler rotation (you have to convert the quaternion rot to a set of 3 Euler angle in degree).\u003C/p\u003E\u003Cp\u003EFor a manual version, I would do everything directly from the source of the cfg, and check in game that the rotation is good. and I will definitely take that pos to avoid making the maths myself.\u003C/p\u003E\n"},{"CreatedByName":"praise the suuun","CreatedById":69912,"CreatedDateTime":"2013-10-02T09:03:47Z","Content":"\n\u003Cp\u003Eso will the model { structure only accept pos =, rot = and attrot =?\u003C/p\u003E\u003Cp\u003Ewhich value exactly from my picture is the \u0022quaternion rot\u0022 and where can i go to learn how to it convert to.... whatever \u00223 euler angles in degrees\u0022 is XD. im sorry im a pleb for reals.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-02T09:06:09Z\u0022 title=\u002210/02/2013 09:06  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 2, 2013\u003C/time\u003E by praise the suuun\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-10-02T09:53:25Z","Content":"\n\u003Cp\u003EHere is what the model should look like\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E\t\tmodel = urlpart/model\u003Cbr\u003E\t\tposition = posx,posy,posz\u003Cbr\u003E\t\tscale = scx,scy,scz\u003Cbr\u003E\t\trotation = rotx,roty,rotz\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eyou can get posx, posy, posz with the pos= in the craft file.\u003C/p\u003E\u003Cp\u003Escx, scy, scz will most likely be 1.\u003C/p\u003E\u003Cp\u003EFor the rotation however\u003C/p\u003E\u003Cp\u003Eyou have quatx, quaty, quatz, quatw with the rot=\u003C/p\u003E\u003Cp\u003EYou can use \u003Ca href=\u0022http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E to know how to convert and get rotx, roty, rotz.\u003C/p\u003E\u003Cp\u003EFor most things however, you will most likely use angle like 90\u00C3\u201A\u00C2\u00B0 and 180\u00C3\u201A\u00C2\u00B0 so I would suggest to just think about the rotation angle yourself and play with the value.\u003C/p\u003E\u003Cp\u003EattRot, I am not sure what it is, but I think it the rotation of the the attachment or due to it\u0027s attachment.\u003C/p\u003E\u003Cp\u003EAnd for info:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/Euler_angles\u0022 rel=\u0022external nofollow\u0022\u003EEuler angles\u003C/a\u003E are angle for each axis.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/Degree_(angle)\u0022 rel=\u0022external nofollow\u0022\u003EDegree\u003C/a\u003E is what we commonly use (0\u00C3\u201A\u00C2\u00B0 to 360\u00C3\u201A\u00C2\u00B0, etc...), as opposed to \u003Ca href=\u0022https://en.wikipedia.org/wiki/Radian\u0022 rel=\u0022external nofollow\u0022\u003Eradian\u003C/a\u003E which is used by Pi and lot of program.\u003C/p\u003E\n"},{"CreatedByName":"praise the suuun","CreatedById":69912,"CreatedDateTime":"2013-10-02T10:20:08Z","Content":"\n\u003Cp\u003Ebig up m80!!!!!!! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png\u0022 alt=\u0022:o\u0022\u003E\u003C/p\u003E\n"}]}