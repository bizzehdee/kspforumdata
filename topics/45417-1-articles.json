{"TopicId":45417,"ForumId":15,"TopicTitle":"Part of edited textures sometimes render in-game as black","CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-09T11:20:56Z","PageNum":1,"Articles":[{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-09T11:20:56Z","Content":"\n\u003Cp\u003EKind of a long story. I wrote a converter to read mbm files and write them as PNGs. I can open and edit these in Paint.net. For instance the stock 2.5 \u002232\u0022 fuel tank. I was wanting to re-skin this for an \u0022empty fuel tank\u0022 part.\u003C/p\u003E\u003Cp\u003ENow... as long as I only edit within the png file\u0027s existing layer, it works fine. But if I add any layers and merge them down and save, when I open the part in the VAB, the body of the tank is black. The ends are still correct, and the rivets and rings, but the body is black.\u003C/p\u003E\u003Cp\u003EI\u0027m guessing Paint.net is doing something to the PNG format when it merges layers.\u003C/p\u003E\u003Cp\u003EAny ideas?\u003C/p\u003E\u003Cp\u003EIf it will help I will try to get screenshots.\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-09T13:49:55Z","Content":"\n\u003Cp\u003EI read through the PNG spec and it appears that PDN is getting rid of the interlacing. Not sure if this is the cause or not. Will have to test later.\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-09T21:04:01Z","Content":"\n\u003Cp\u003EI\u0027ve fooled around with this some more. I\u0027m not sure what I did to get it to work making edits in Paint.net, but I can no longer get it to work at all. Any edit causes some of the part to be rendered as black. With some experimentation (replacing the transparent section of the part with a solid color) I can change what color is rendered.\u003C/p\u003E\u003Cp\u003EI decided to try another editor (GIMP). I am now experiencing the same behavior as before. Any edit that involves making use of layers causes the body of the part to rendered as black.\u003C/p\u003E\u003Cp\u003EReading some more around here, I\u0027ve discovered that KSP will only use a bit value for transparent (e.g. it\u0027s either transparent or not, regardless of what is in the alpha channel). So now my theory is that somehow, whatever value is encoded in the alpha channel is being somehow altered by the export from GIMP and now KSP doesn\u0027t know what to do with that and punts and uses black.\u003C/p\u003E\u003Cp\u003ESO... how do you guys edit your textures?\u003C/p\u003E\n"},{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-10T01:12:32Z","Content":"\n\u003Cp\u003EYou might try Graphic Converter, but its been a while since I\u0027ve used it. It may open MBMs and as the name implies, may convert it properly to your format of choice.\u003C/p\u003E\u003Cp\u003EAs to editing textures (and by that I mean texture creation as well as further editing) I use Gimp. Others here will doubtless have their favorite apps. As to how I edit them? I\u0027ve not encountered your situation before. I\u0027m sure someone else may have something to say on that point.\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-10T12:09:44Z","Content":"\n\u003Cp\u003EIt\u0027s weird. As long as I don\u0027t add any new layers (annoying but workable), it seems to accept my changes with no issues. As soon as I add a new layer, even if I merge it down, the texture somehow changes at a fundamental level so that it displays improperly in KSP.\u003C/p\u003E\n"},{"CreatedByName":"Cheebsta","CreatedById":74167,"CreatedDateTime":"2013-09-10T15:14:04Z","Content":"\n\u003Cp\u003ELook in GIMP at the alpha channel itself. Fully transparent on there can render black in game if using a specular shader.\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-10T15:24:03Z","Content":"\n\u003Cp\u003EI\u0027m not sure what you\u0027re telling me to look for, exactly. The alpha channel is rendered in the checkerboard pattern, but also appears to have a mask (in black) on the areas where there are visible texture. It looks like this in either case (new layers added or not).\u003C/p\u003E\u003Cp\u003EOr are you asking me to look at some property of the alpha channel itself?\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-10T15:37:19Z","Content":"\n\u003Cp\u003EI found an alpha threshold command... I\u0027ll play with that and see what happens.\u003C/p\u003E\n"},{"CreatedByName":"Cheebsta","CreatedById":74167,"CreatedDateTime":"2013-09-10T16:32:42Z","Content":"\n\u003Cp\u003EIn the window that shows Layers is a Channels tab. Turn off visibility for Red, Green, and Blue so you can look at just the alpha. Is it greyscale, or black and transparent?\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2013-09-10T16:49:08Z","Content":"\n\u003Cp\u003EPart of it is transparent (checkerboard). But part of it is black. The black part appears to be a mask for the visible areas of the texture. But this is true for parts that render correctly as well as those that do not.\u003C/p\u003E\n"},{"CreatedByName":"Cheebsta","CreatedById":74167,"CreatedDateTime":"2013-09-10T17:21:09Z","Content":"\n\u003Cp\u003EThat is definitely weird then. Almost this same thing just happened to me two days ago on one of my own textures after I mapped it for specularity. The black parts in game were the fully transparent sections of the alpha channel.\u003C/p\u003E\n"}]}