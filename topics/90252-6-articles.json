{"TopicId":90252,"ForumId":34,"TopicTitle":"[1.3] Pilot Assistant: Atmospheric piloting aids - 1.13.2 (May 28)","CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-11-14T08:52:40Z","PageNum":6,"Articles":[{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2014-12-27T05:48:39Z","Content":"\n\u003Cp\u003EI am comfy with rough mathematic concepts in my head, yes, but the naked numbers, grrr, hate them. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EBut thank you for the link. I now understand PIDs and can work with them. Already tuning the hell out of the firehound, hehe. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhy are you values set so high? I for example can work just fine in PAssistant with values from 0.1 to 3.\u003C/p\u003E\u003Cp\u003EIs it like -\u003C/p\u003E\u003Cp\u003E1.2\u003C/p\u003E\u003Cp\u003E1.2\u003C/p\u003E\u003Cp\u003E1.2\u003C/p\u003E\u003Cp\u003Eis the same as \u003C/p\u003E\u003Cp\u003E12\u003C/p\u003E\u003Cp\u003E12\u003C/p\u003E\u003Cp\u003E12\u003C/p\u003E\u003Cp\u003E?\u003C/p\u003E\u003Cp\u003EAnd what is CLAMP for... Mhh.....\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-12-27T05:52:27Z","Content":"\n\u003Cp\u003EHit up \u003Ca href=\u0022https://www.google.co.nz/webhp?sourceid=chrome-instant\u0026amp;ion=1\u0026amp;espv=2\u0026amp;ie=UTF-8#q=pid%20basics\u0022 rel=\u0022external nofollow\u0022\u003Egoogle\u003C/a\u003E or \u003Ca href=\u0022https://en.wikipedia.org/wiki/PID_controller\u0022 rel=\u0022external nofollow\u0022\u003Ewikipedia\u003C/a\u003E for some background on PID controllers, it\u0027ll be more complete than anything I can manage, so I\u0027ll just stick to explaining the correlations\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EKp/Ki/Kd are the gains for the proportional, integral, and derivative blocks and control how much of the response each is responsible for. Proportional control deals with the current state, integral with the past state, and derivative with the predicted state and they are named after the mathematical actions used to obtain their response (eg. the response of the proportional block is proportional to the current error. response = Kp * error). Proportional does most of the heavy lifting, integral is responsible for bringing the error all the way to zero, derivative dampens the oscillations.\u003C/p\u003E\u003Cp\u003EThe scalar term is a global value that lets you quickly adjust stability. A scalar of 10 results in a 10x lower output (assuming the clamps are not involved).\u003C/p\u003E\u003Cp\u003EThere are also two sets of clamps. The ones you have listed (I Clamp Lower/Upper) are responsible for the integral sum only. If for some reason the error could not reach zero and the integral block was active, the integral sum could reach a very large value. If the setpoint was to change, the controller would take a very long time to respond because the integral sum would first have to eliminate all it\u0027s excess and while it was doing that it would be overriding any other control. The integral clamps prevent this by imposing limits on the integral sum.\u003C/p\u003E\u003Cp\u003EThe output clamps are nice and simple. They are purely a clamp on the same of responses from the proportional, integral, and derivative actions.\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EEach plane behaves very differently, but there are some general guidelines I have found:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EPitch controls are the one\u0027s that are difficult to get right. Roll and yaw you just back off the scalar if it starts getting twitchy and that\u0027s basically the end of it\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESmall agile planes use very little derivative action. The bigger and less agile they are, the more damping (derivative) is needed\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe optimal integral gain is generally between 30-60% of the proportional gain (higher means it will zero errors faster, but is more prone to oscillations).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIf the integral is too low relative to the proportional, it will oscillate slightly as it approaches the set point. This is because it can\u0027t keep up with the handover of control (proportional error decreases =\u0026gt; integral can\u0027t increase fast enough =\u0026gt; error increases =\u0026gt; proportional gives it a bump again, etc.)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIf the derivative response is too low compared to the proportional response it will only respond once the axis has picked up a lot of speed resulting in large flailing oscillations. If it is too high, any movement on the axis it will over-react to and push it the other way, resulting in rapid jerky oscillations that often travel in the wrong direction (close to a reasonable level, it becomes very difficult to tell the difference between the two actions\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAs dynamic pressure (Q) increases, control authority needs to decrease slowly, so as it becomes unstable just tick the scalar term up a bit\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIf playing with FAR, the trans-sonic regime (~Mach 0.75-1.25) results in a sharp spike in pitch instability (I presume due to Mach tuck). As you pass through this region you may need to \u003Cstrong\u003Edouble or more \u003C/strong\u003Ethe pitch scalar\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003EI am comfy with rough mathematic concepts in my head, yes, but the naked numbers, grrr, hate them. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EBut thank you for the link. I now understand PIDs and can work with them. Already tuning the hell out of the firehound, hehe. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhy are you values set so high? I for example can work just fine in PAssistant with values from 0.1 to 3.\u003C/p\u003E\u003Cp\u003EIs it like -\u003C/p\u003E\u003Cp\u003E1.2\u003C/p\u003E\u003Cp\u003E1.2\u003C/p\u003E\u003Cp\u003E1.2\u003C/p\u003E\u003Cp\u003Eis the same as \u003C/p\u003E\u003Cp\u003E12\u003C/p\u003E\u003Cp\u003E12\u003C/p\u003E\u003Cp\u003E12\u003C/p\u003E\u003Cp\u003E?\u003C/p\u003E\u003Cp\u003EAnd what is CLAMP for... Mhh.....\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EClamp is what PID tuner used instead of scalar (and those numbers are only relevant for the stock PID tuner, just remember). Everything is scaled up by a factor of 1000, hence the huge numbers (you\u0027ll see the same on Pilot assistants stock SAS tuning tab)\u003C/p\u003E\u003Cp\u003EUsing 1.2 vs. using 12 is only the same if you also increase the scalar by a factor of 10!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-27T05:56:54Z\u0022 title=\u002212/27/2014 05:56  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 27, 2014\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wanderfound","CreatedById":112611,"CreatedDateTime":"2014-12-27T08:00:16Z","Content":"\n\u003Cp\u003EPlug the values shown above into the Stock SAS mode of KPA, and if you\u0027re flying a \u003Cem\u003E\u003Cstrong\u003EKerbodyne\u003C/strong\u003E\u003C/em\u003E whatsit it\u0027ll perform roughly as intended; that\u0027s what I use when I\u0027m test flying \u0027em.\u003C/p\u003E\u003Cp\u003EBTW, Crzyrndm: as suggested above, I use KPA mostly just to tune the stock SAS. I usually don\u0027t bother adjusting the PID on the surface SAS because I don\u0027t use it. With an untuned SAS, I get pitch oscillations; tuning fixes that.\u003C/p\u003E\u003Cp\u003ESometimes, when I come out of pilot assist mode (which I mostly just use as a long-distance cruise control), pitch oscillations reoccur. It looks like the stock SAS PID tuner isn\u0027t taking effect when toggling the pilot assist features off. In the most recent flight, it kept oscillating until I reselected \u0022control from here\u0022 on the cockpit. I have no idea why that worked, but it did; pitch wobbles instantly disappeared.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-12-27T08:08:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wanderfound\u0022 data-cite=\u0022Wanderfound\u0022\u003E\u003Cdiv\u003E...which I mostly just use as a long-distance cruise control...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExactly what it\u0027s designed for \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E (although I think you misunderstand what SSAS is. No matter)\u003C/p\u003E\u003Cp\u003EI\u0027ll take another look at the SAS, sounds like something wierd is going on (although that\u0027s been a bit of a constant there since 0.90 dropped...)\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2014-12-29T01:29:18Z","Content":"\n\u003Cp\u003EMan, I\u0027m trying hard but for whatever reason a pretty stable plane starts to oscillate in ROLL and YAW when being in very thin air. :-/ Knocking the yaw \u0026amp; pitch scalar helps a bit but after a certain point control is just lost. It\u0027s so weird, without any help I can get the plane stable. There must be a way to tune PID properly! Should I increase the Kd value to dampen the oscillation? Any tips? :-/\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-12-29T02:49:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003EThere must be a way to tune PID properly!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGood news: There is.\u003C/p\u003E\u003Cp\u003EBad news: It\u0027s only really applicable for a relatively stable process. Flying aircraft isn\u0027t a stable process, especially with FAR.\u003C/p\u003E\u003Cp\u003EAre we talking about Pilot Assistant or SAS here?\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2014-12-29T19:31:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022 data-cite=\u0022Crzyrndm\u0022\u003E\u003Cdiv\u003EGood news: There is.\u003Cp\u003EBad news: It\u0027s only really applicable for a relatively stable process. Flying aircraft isn\u0027t a stable process, especially with FAR.\u003C/p\u003E\u003Cp\u003EAre we talking about Pilot Assistant or SAS here?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the reply! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EPilot Assistant. Haven\u0027t tried \u0022SAS only\u0022 yet.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-12-31T06:11:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wanderfound\u0022 data-cite=\u0022Wanderfound\u0022\u003E\u003Cdiv\u003ESometimes, when I come out of pilot assist mode (which I mostly just use as a long-distance cruise control), pitch oscillations reoccur. It looks like the stock SAS PID tuner isn\u0027t taking effect when toggling the pilot assist features off. In the most recent flight, it kept oscillating until I reselected \u0022control from here\u0022 on the cockpit. I have no idea why that worked, but it did; pitch wobbles instantly disappeared.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo far I\u0027m unable to replicate this issue and I\u0027m completely stumped as to what the cause could be. The display values are pulled straight from the Stock SAS module every draw call so in theory there is no way for the module to be out of synch with the window.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003EPilot Assistant.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOscillations in roll and yaw is the wierdest thing. Default settings has the yaw axis only acting as a damper (Bank =\u0026gt; Yaw: 0,0,0.01) and most craft lack control authority on that axis so rapid oscillations are almost out of the question. That leaves undercompensation, where it doesn\u0027t try enough until the oscillations are already noticeably large. Increasing Kd should knock that on the head.\u003C/p\u003E\u003Cp\u003ERoll issues are the opposite, most craft are relatively unstable in roll and have a very high apparent control authority on that axis. This often causes rapid jerky oscillations as the derivative action responds too hard. Decreasing Kd prevents it from overcompensating from these rapid changes and exacerbating the issue.\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2014-12-31T12:13:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022 data-cite=\u0022Crzyrndm\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOscillations in roll and yaw is the wierdest thing. Default settings has the yaw axis only acting as a damper (Bank =\u0026gt; Yaw: 0,0,0.01) and most craft lack control authority on that axis so rapid oscillations are almost out of the question. That leaves undercompensation, where it doesn\u0027t try enough until the oscillations are already noticeably large. Increasing Kd should knock that on the head.\u003C/p\u003E\u003Cp\u003ERoll issues are the opposite, most craft are relatively unstable in roll and have a very high apparent control authority on that axis. This often causes rapid jerky oscillations as the derivative action responds too hard. Decreasing Kd prevents it from overcompensating from these rapid changes and exacerbating the issue.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the tips!\u003C/p\u003E\u003Cp\u003EI should have explained better. Oscillations are veeery large and veeery slow. I will make a video in the new year to show it.\u003C/p\u003E\n"},{"CreatedByName":"Eddlm","CreatedById":129377,"CreatedDateTime":"2014-12-31T12:37:26Z","Content":"\n\u003Cp\u003EI found a problem. When you\u0027re using the pilot assistant, activate (normal) SAS and change your orientation/altitude, and disable SAS again, your the Pilot Assistant doesn\u0027t update its info about your heading and tries to handle the craft into the heading it had before activating SAS.\u003C/p\u003E\u003Cp\u003EI have to deactivate both Pilot Assistant features (heading control and altitude control) and re-activate them so they update correctly.\u003C/p\u003E\u003Cp\u003EI would love an simple \u0022horizontal velocity\u0022 controller, too. I\u0027m not too good at controlling at wich velocity my craft starts being unable to hold itself in the air, and being able to control it\u0027s velocity would help me a lot.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-12-31T21:55:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003EThanks for the tips!\u003Cp\u003EI should have explained better. Oscillations are veeery large and veeery slow. I will make a video in the new year to show it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELarge and slow means you need to increase proportional/derivative and/or decrease scalar. That only happens when it can\u0027t respond enough to correct until the error is really large.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eddlm\u0022 data-cite=\u0022Eddlm\u0022\u003E\u003Cdiv\u003EI found a problem. When you\u0027re using the pilot assistant, activate (normal) SAS and change your orientation/altitude, and disable SAS again, your the Pilot Assistant doesn\u0027t update its info about your heading and tries to handle the craft into the heading it had before activating SAS.\u003Cp\u003EI have to deactivate both Pilot Assistant features (heading control and altitude control) and re-activate them so they update correctly.\u003C/p\u003E\u003Cp\u003EI would love an simple \u0022horizontal velocity\u0022 controller, too. I\u0027m not too good at controlling at wich velocity my craft starts being unable to hold itself in the air, and being able to control it\u0027s velocity would help me a lot.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBug is being squished. Horizontal velocity control as in throttle? I\u0027ll think about it.\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003Ev0.9.6.1 released\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EBug fixes for pause/unpause handling\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPrevented WASD inputs changing Pilot Assistant\u0027s targets while paused\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-31T22:15:58Z\u0022 title=\u002212/31/2014 10:15  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 31, 2014\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"funk","CreatedById":118840,"CreatedDateTime":"2015-01-01T01:10:42Z","Content":"\n\u003Cp\u003ETHX for update... this is one of the most useable mods for KSP I can think of... keep up the good work. \u003C/p\u003E\u003Cp\u003EI\u0027ve played a while with it, but there are two things I\u0027ve recognized:\u003C/p\u003E\u003Cp\u003E1. With vertical control target altitude is never reached and it starts to oscillate around 0 m/s vertical speed if you come close to target altitude... sometimes \u002B-100 m/s. The craft seems to overcorrect pitch if nearby target altitude and needs some time to pitch up. Is there a hint I\u0027m missing?\u003C/p\u003E\u003Cp\u003E2. Target heading behaves like it should, but if you\u0027re flying over the poles it doesn\u0027t change heading \u002B-180 degrees. So the plane is going to side-slip if you don\u0027t pay some attention to the 89th degree lat... This also applies to SSAS. Perhaps it is possible to implement some exception for transition.\u003C/p\u003E\u003Cp\u003EEdit: For the professionals in this field: Why vertical velocity drops if entering physical warp? Is it FAR/DRE or KSP/Unity related?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-01T01:24:35Z\u0022 title=\u002201/01/2015 01:24  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 1, 2015\u003C/time\u003E by funk\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-01T01:26:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022funk\u0022 data-cite=\u0022funk\u0022\u003E\u003Cdiv\u003E1. With vertical control target altitude is never reached and it starts to oscillate around 0 m/s vertical speed if you come close to target altitude... sometimes \u002B-100 m/s. The craft seems to overcorrect pitch if nearby target altitude and needs some time to pitch up. Is there a hint I\u0027m missing?\u003Cp\u003E2. Target heading behaves like it should, but if you\u0027re flying over the poles it doesn\u0027t change heading \u002B-180 degrees. So the plane is going to side-slip if you don\u0027t pay some attention to the 89th degree lat... This also applies to SSAS. Perhaps it is possible to implement some exception for transition.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1) Sounds like a tuning issue, probably an imbalanced Ki/Kp if it\u0027s oscillating as it leaves the clamps (which only happens as it approaches the target). What Kp/Ki/Kd/Scalar do you have on the vertical speed controller?\u003C/p\u003E\u003Cp\u003E2) Bah, I keep forgetting to fix that. I\u0027ll go and do it right now...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-01T01:51:07Z\u0022 title=\u002201/01/2015 01:51  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 1, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hyomoto","CreatedById":64780,"CreatedDateTime":"2015-01-01T06:06:49Z","Content":"\n\u003Cp\u003EAlright, so after wanting to \u003Cstrong\u003Emurder\u003C/strong\u003E this system I \u003Cem\u003Efinally\u003C/em\u003E figured out why it hated me so much. When you are tuning the altitude/velocity PIDs if you don\u0027t adjust the control surface angle of attack PID it doesn\u0027t matter what you do. Nothing I did seemed to have any impact on the oscillations coming off the elevator, I guess it makes sense it would be under control surfaces I guess.\u003C/p\u003E\u003Cp\u003EGiven the complexity of the system, the layout is far from ideal. The altitude and velocity PIDs don\u0027t really require much tuning craft to craft, but the AoA is clearly the bane of all existence and yet it\u0027s the one that gets hidden. Shouldn\u0027t it be the other way around? I got it working and I think I understand better how to deal with tuning issues in the future, but this mod got me really fired up. It might be nice to have a low profile mode. Once you\u0027ve finished your tuning, you don\u0027t need much more than to input target altitude/speeds and heading/banks.\u003C/p\u003E\u003Cp\u003EThe system clearly requires quite precise tuning to get it work properly, something we just don\u0027t really have good tools for. The only way to test it is to throw your craft into the sky and see if you can tune it. I can\u0027t imagine working FAR that way. Some sort of \u0027simulation\u0027 would be nice so we could observe the oscillations in a more controlled environment. For example, fixing the oscillations in the elevators caused another interesting issue: the system is very slow to respond to small change and makes sweeping adjustments to get there. It\u0027s odd to put in a higher altitude and watch your craft nose down for a thousand feet before it decides it\u0027s going the wrong direction.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-01T06:32:14Z\u0022 title=\u002201/01/2015 06:32  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 1, 2015\u003C/time\u003E by Hyomoto\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-01T06:33:58Z","Content":"\n\u003Cp\u003Ev0.9.6.2 released\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EFix for erroneous heading behaviour around planetary poles.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hyomoto\u0022 data-cite=\u0022Hyomoto\u0022\u003E\u003Cdiv\u003EAlright, so after wanting to \u003Cstrong\u003Emurder\u003C/strong\u003E this system I \u003Cem\u003Efinally\u003C/em\u003E figured out why it hated me so much. When you are tuning the altitude/velocity PIDs if you don\u0027t adjust the control surface angle of attack PID it doesn\u0027t matter what you do.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s hidden because I have exactly the opposite experience. I barely ever touch any of the 3 hidden controllers and even then it\u0027s normally just testing that they aren\u0027t the cause of w/e issue I\u0027m having. VSpeed gets the majority of my attention, altitude gets it\u0027s Kp increased/decreased depending on how it approaches the target (overshoot = reduce, too slow = increase), the roll/yaw controllers I normally just tick back the scalar since their behaviour isn\u0027t particularly important so long as they\u0027re stable.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-02T23:09:39Z\u0022 title=\u002201/02/2015 11:09  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 2, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arthree","CreatedById":7805,"CreatedDateTime":"2015-01-02T23:04:16Z","Content":"\n\u003Cp\u003EDo you have any plans on integrating navigation to/from KSP or the science waypoints? Also, it would be awesome to have some kind of ILS hold for landing... maybe integrating with the NavUtilities ILS or something?\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-02T23:09:11Z","Content":"\n\u003Cp\u003EThat would be a no on both counts. ILS stuff is already quite easy to do manually when combined with Nav Utilities (match sink rate and heading to appropriate Pilot Assistant functions, use fine control when required for tweaking), and actual navigation is well beyond scope.\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2015-01-03T02:38:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arthree\u0022 data-cite=\u0022Arthree\u0022\u003E\u003Cdiv\u003EDo you have any plans on integrating navigation to/from KSP or the science waypoints? Also, it would be awesome to have some kind of ILS hold for landing... maybe integrating with the NavUtilities ILS or something?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECheck out \u0022Kerbal Flight Indicators\u0022. The little yellow circle represents your velocity vector. Put it on the end of the runway. Could not be any easier for mod creator and user to have a kind-of-ILS system combined with pilot assistant.\u003C/p\u003E\n"},{"CreatedByName":"MasseFlieger","CreatedById":74250,"CreatedDateTime":"2015-01-03T18:35:46Z","Content":"\n\u003Cp\u003EHi Crzyrndm,\u003C/p\u003E\u003Cp\u003EHave you thought of adding some props for IVA use? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI would love to have altitude, heading and speed available through a set of knobs with a digital display, much like a typical airliner autopilot panel?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.askthepilot.com/wp-content/uploads/2012/07/AutopilotPanel.jpg\u0022 alt=\u0022AutopilotPanel.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EEither way this is a great mod! Part of my install list!\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2015-01-03T19:16:32Z","Content":"\n\u003Cp\u003ELook for SteamGauges.\u003C/p\u003E\u003Cp\u003EPilotAssistant is not really about UI, it\u0027s about controlling a vehicle.\u003C/p\u003E\u003Cp\u003E@PID Controller information, maybe include this into your opening post, so that people have some ressources when they want to tune them.\u003C/p\u003E\u003Cp\u003EOverview:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/UR0hOmjaHp0?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EExamples:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/XfAt6hNV8XM?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EI learned a lot. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-03T19:49:31Z\u0022 title=\u002201/03/2015 07:49  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 3, 2015\u003C/time\u003E by Behemoth1702\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-03T21:23:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MasseFlieger\u0022 data-cite=\u0022MasseFlieger\u0022\u003E\u003Cdiv\u003EHave you thought of adding some props for IVA use? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E(Atleast) Two reasons that won\u0027t happen\u003C/p\u003E\u003Cp\u003E1) As behemoth says, not in mod scope\u003C/p\u003E\u003Cp\u003E2) I can\u0027t model at all \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003ELook for SteamGauges.\u003Cp\u003EPilotAssistant is not really about UI, it\u0027s about controlling a vehicle.\u003C/p\u003E\u003Cp\u003E@PID Controller information, maybe include this into your opening post, so that people have some ressources when they want to tune them.\u003C/p\u003E\u003Cp\u003EOverview:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/UR0hOmjaHp0?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EExamples:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/XfAt6hNV8XM?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EI learned a lot. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou don\u0027t have a problem with the use of Laplace representations (all the equations using \u0027s\u0027)? The actual explanations are very good, but I wonder if people would have problems with that representation\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2015-01-04T01:10:54Z","Content":"\n\u003Cp\u003EOh dude, the math goes over my head big time, school is a few years ago and I never had this kind of math.\u003C/p\u003E\u003Cp\u003EAll I mean is:\u003C/p\u003E\u003Cp\u003EI learned how to manipulate the values in order to get certain effects. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E With some fantasy you can clearly see how it works in KSP and how to manipulate it.\u003C/p\u003E\u003Cp\u003EThe only thing I still have to figure out scalar/clamp. \u003C/p\u003E\u003Cp\u003ELet\u0027s say the error is 1.\u003C/p\u003E\u003Cp\u003EKp is 1\u003C/p\u003E\u003Cp\u003EKi is 0\u003C/p\u003E\u003Cp\u003EKd is 0\u003C/p\u003E\u003Cp\u003EScalar is 1.\u003C/p\u003E\u003Cp\u003EIs this going to produe a signal of \u0022correct value = 1\u0022?\u003C/p\u003E\u003Cp\u003EIf scalar 2 is used, is it going to produce \u0022correction value = 2\u0022?\u003C/p\u003E\u003Cp\u003EAnd scalar 3 further increase the multiplikators?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-04T01:49:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003EOh dude, the math goes over my head big time, school is a few years ago and I never had this kind of math.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s fair enough. Laplace transforms were a part of my second year of University IIRC.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ELet\u0027s say the error is 1.\u003C/p\u003E\u003Cp\u003EKp is 1\u003C/p\u003E\u003Cp\u003EKi is 0\u003C/p\u003E\u003Cp\u003EKd is 0\u003C/p\u003E\u003Cp\u003EScalar is 1.\u003C/p\u003E\u003Cp\u003EIs this going to produe a signal of \u0022correct value = 1\u0022?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ee = 1\u003Cbr\u003Eresponse = { Kp * e \u002B Ki * sumOf(e) \u002B kd * (e - prev_e) } / scalar\u003Cbr\u003E// simplify and substitute\u003Cbr\u003Eresponse = { 1 * 1 \u002B 0 \u002B 0 } / 1\u003Cbr\u003Eresponse = 1\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo yes, an output of 1 would result\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Behemoth1702\u0022 data-cite=\u0022Behemoth1702\u0022\u003E\u003Cdiv\u003EIf scalar 2 is used, is it going to produce \u0022correction value = 2\u0022?\u003Cp\u003EAnd scalar 3 further increase the multiplikators?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s a divisor rather than a multiplier (as you can see above) for consistency with the stock SAS. I probably should have inverted it for display but what\u0027s done is done.\u003C/p\u003E\u003Cp\u003EAs far as the clamps are concerned, response gets passed through this check before being used (output clamp)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif (response \u0026gt; upper_limit)\u003Cbr\u003E   response = upper_limit\u003Cbr\u003Eelse if (response \u0026lt; lower_limit)\u003Cbr\u003E   response = lower_limit\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand when doing the summing for the integral, that sum is also passed through the same check before being used to calculate the overall response.\u003C/p\u003E\u003Cp\u003EMake a copy of \u003Ca href=\u0022https://docs.google.com/spreadsheets/d/14HopZx8l7g4gGfQU0BZhxjjyEOzr5fQ8puNg8_44b1g/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E and you can examine how they all interact (although, it would be easier to make graphs rather than stare at numbers directly...). You can see what happens when the derivative is too high (look for a very bouncy response), how the integral ends up being the only operative term, why the integral clamp is required (set the setpoint really high and the I_clamp to a -ve value), etc.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-04T02:06:48Z\u0022 title=\u002201/04/2015 02:06  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 4, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2015-01-04T02:04:27Z","Content":"\n\u003Cp\u003ECheers for the handy explanation, I was thinking the \u0027scalar\u0027 might be er.. backwards, hence I haven\u0027t been using it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWas about to ask, but beaten to the punch \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-04T02:12:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steve_v\u0022 data-cite=\u0022steve_v\u0022\u003E\u003Cdiv\u003ECheers for the handy explanation, I was thinking the \u0027scalar\u0027 might be er.. backwards, hence I haven\u0027t been using it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003Cp\u003EWas about to ask, but beaten to the punch \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUse the scalar to compensate for changes in dynamic pressure (proportional to: pressure * velocity ^ 2). For the most part, once you have a reasonably stable tuning (Kp/i/d) the only major difference is the amount of control authority your craft has (which corresponds relatively directly to dynamic pressure). The exception is transonic regime in FAR, but since it\u0027s temporary, changing scalar is also the appropriate response (unless ofcourse your plane only flies at Mach 1)\u003C/p\u003E\u003Cp\u003EIt\u0027s not a linear relationship though (hence why I haven\u0027t got anything happening automatically), so only adjust as needed (and remember to decrease as you slow back down as well)\u003C/p\u003E\n"}]}