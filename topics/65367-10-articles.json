{"TopicId":65367,"ForumId":36,"TopicTitle":"Test of continuing KER developments [0.24.2]","CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-03-10T11:31:34Z","PageNum":10,"Articles":[{"CreatedByName":"How2FoldSoup","CreatedById":82003,"CreatedDateTime":"2014-06-04T13:29:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EWhat spec is your machine (specifically CPU type and speed, though any other details you have may be handy) and how big/complex is the ship in question? I presume it is quite complex as you call it a \u0022large mothership\u0022. One thing you can do to reduce the lag caused by the deltaV calculations is to right click on the engineer part and drag the slider for \u0022Sim time\u0022 to the right. This increases the delay between runs of the simulation code and should improve matters...\u003Cp\u003EAssuming the list of mods it uses isn\u0027t too extreme, could you post a craft/persistence/quicksave file that I could take a look at (and a list of the mods)...?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s got b9 and LLL and scansat. It\u0027s just large in size mostly due to the b9 parts. It comes in around 150 parts with nothing in it\u0027s bays but I was stress testing with 4x 25 part probes in one of the bays which had it come out at around 250 parts. How can I upload a .craft? I\u0027ve never done so before. \u003C/p\u003E\u003Cp\u003EI will try out the slider on the part itself. I usually always hide it in the craft and never thought to see if I could right click it for options! \u003C/p\u003E\u003Cp\u003EUntil I upload the craft here\u0027s an album before I switched to LLL engines\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/wE3Ve\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EI hope that helps\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-04T14:00:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022How2FoldSoup\u0022 data-cite=\u0022How2FoldSoup\u0022\u003E\u003Cdiv\u003EIt\u0027s got b9 and LLL and scansat. It\u0027s just large in size mostly due to the b9 parts. It comes in around 150 parts with nothing in it\u0027s bays but I was stress testing with 4x 25 part probes in one of the bays which had it come out at around 250 parts. How can I upload a .craft? I\u0027ve never done so before. \u003Cp\u003EI will try out the slider on the part itself. I usually always hide it in the craft and never thought to see if I could right click it for options! \u003C/p\u003E\u003Cp\u003EUntil I upload the craft here\u0027s an album before I switched to LLL engines\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/a/wE3Ve\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/wE3Ve\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope that helps\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou will need to upload your file to a file sharing service of some kind (e.g. dropbox, google drive, mediafire etc) and then post a link to it here.\u003C/p\u003E\u003Cp\u003EIt didn\u0027t used to have any particularly useful controls (only a button to turn it on and off). I added the various sliders it has now to control the simulation rate and the atmospheric pressure and craft velocity used to calculate \u0022correct\u0022 engine thrust/isp.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EWhat spec is your machine (specifically CPU type and speed, though any other details you have may be handy)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you answer this bit too, please?\u003C/p\u003E\n"},{"CreatedByName":"How2FoldSoup","CreatedById":82003,"CreatedDateTime":"2014-06-04T14:19:13Z","Content":"\n\u003Cp\u003EForgot about that part, apologies. I\u0027ve got an AMD Phenom II 3.4GHz and I\u0027m also running 64 bit windows with 8gb but I know that doesn\u0027t matter. \u003C/p\u003E\u003Cp\u003EHere\u0027s the link to the craft\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/ltak56fs16pahkc/Seabass.craft\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ltak56fs16pahkc/Seabass.craft\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI just realized I\u0027m also using Quantum Struts continued on that craft as well as Kethane. If it\u0027s too much of a problem I could remove them and reupload that for you\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-04T15:03:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022How2FoldSoup\u0022 data-cite=\u0022How2FoldSoup\u0022\u003E\u003Cdiv\u003EForgot about that part, apologies. I\u0027ve got an AMD Phenom II 3.4GHz and I\u0027m also running 64 bit windows with 8gb but I know that doesn\u0027t matter\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAhhh, another user with a Phenom II reported a nasty lag issue and it turned out to be (mostly) caused by having the AMD compatibility mode turned on. Have a look at this \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/72062-Test-of-continuing-KER-developments-0-23-5?p=1072989\u0026amp;viewfull=1#post1072989\u0022 rel=\u0022external nofollow\u0022\u003Epost\u003C/a\u003E (and the earlier ones from the same person describing the problem). If you do have this option turned on then I suspect that turning it off will cure the lag (or at least the worst of it)...\u003C/p\u003E\u003Cp\u003EI can\u0027t take a look at your craft right now (at work) but I will try to take a look this evening. However, I wouldn\u0027t expect your craft to give the simulation much of a problem unless there is a specific mod that is causing issues (the most likely offender is probably quantum struts as 0.23.5 changed how struts work and something may not be quite right).\u003C/p\u003E\n"},{"CreatedByName":"How2FoldSoup","CreatedById":82003,"CreatedDateTime":"2014-06-04T15:57:07Z","Content":"\n\u003Cp\u003EI had my shotcut set to ksp.exe itself so I totally forgot there was a launcher with options heh. My compatibility mode is turned off. I\u0027m going to try launching from the launcher to see if that changes anything but I\u0027m not holding my breath. I don\u0027t think it is Q struts because my framerate drastically increases once I hid KER or even just the vessel tab in flight. Whenever the dv calculations aren\u0027t being shown it goes away. It also goes away if I hide the hud(which is hiding the dv calcs).\u003C/p\u003E\u003Cp\u003Eedit: I\u0027ll also try increasing time between dv calculations and let you know how that turns out\u003C/p\u003E\u003Cp\u003E2nd edit: Increasing the sim time only seemed to help a little bit. It made the stutters slightly shorter. Upon trying to launch from the launcher Ksp immediately crashes but continues to run in background processes so that\u0027s another interesting bug. I\u0027m wondering if the launcher settings not be used when launching from the .exe. I\u0027m going to try a fresh install of ksp with everything to see if that helps things. \u003C/p\u003E\u003Cp\u003EI just thought this lag was my pc but when I minimized ker once and saw it go away I realized how much it was affecting gameplay for \u0022larger\u0022 ships in the 200\u002B range so thank you for helping!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-04T16:11:56Z\u0022 title=\u002206/04/2014 04:11  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 4, 2014\u003C/time\u003E by How2FoldSoup\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-04T16:25:46Z","Content":"\n\u003Cp\u003EYes, I understand that it is the KER simulation code causing the lag. I meant that the way struts are handled by KSP changed and if QStruts hasn\u0027t been properly fixed to work correctly with 0.23.5 then this could cause the simulation code in KER to have issues...\u003C/p\u003E\u003Cp\u003EHow drastic is this lag? Are you effectively getting freezes every time the simulation code runs or is the frame rate just lower in general? Are you using the version from this thread or the official 0.6.2.4 version? Either way, can you also try the other one and let me know how they compare?\u003C/p\u003E\u003Cp\u003EI don\u0027t suppose you\u0027ve set the processor affinity to make KSP only use one CPU core? That is definitely not a good idea when KER is installed (and is never really a good idea with KSP because some of Mono/Unity is multithreaded and it runs better on more than one core).\u003C/p\u003E\u003Cp\u003EAnother thing that may help is for you to post an output_log.txt (from a short run of KSP, e.g. run, load save, switch to vessel or load ship in VAB, let run for a few seconds and then quit). There may be exceptions, errors or other messages in there that may shed some light on the problem...\u003C/p\u003E\n"},{"CreatedByName":"How2FoldSoup","CreatedById":82003,"CreatedDateTime":"2014-06-04T17:14:15Z","Content":"\n\u003Cp\u003EOh I see. I misunderstood a bit. I will try removing them and throwing the ship on the launch pad and seeing what happens. The game stops every tenth or a second or so. The length of the freeze got shorter when I increased the simulation delay...I\u0027m using the code from this thread. I\u0027ll test the official release and report back soon.\u003C/p\u003E\u003Cp\u003EAll processers are set to run KSP according to task manager. \u003C/p\u003E\u003Cp\u003EI also just realized there are a couple KAS parts on the ship as well. Sorry to have the modlist expand. If you need an unmodded(as possible) version let me know. At it\u0027s core the ship only needs b9 and LLL \u003C/p\u003E\u003Cp\u003Ehere\u0027s the output.txt. I checked the debug menu in flight and didn\u0027t see any errors or abnormal messages but I trust your eyes more than mine in this. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/8p03iw51qvfikag/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/8p03iw51qvfikag/output_log.txt\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eedit: removing Q struts and using the official release did not fix the issue.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-04T18:14:40Z\u0022 title=\u002206/04/2014 06:14  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 4, 2014\u003C/time\u003E by How2FoldSoup\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-04T18:39:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022How2FoldSoup\u0022 data-cite=\u0022How2FoldSoup\u0022\u003E\u003Cdiv\u003Ehere\u0027s the output.txt. I checked the debug menu in flight and didn\u0027t see any errors or abnormal messages but I trust your eyes more than mine in this.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, there is nothing obvious in the last little bit of the log after the ship is loaded in the flight scene and all the plugins have started up but there are various worrying messages earlier in the log.\u003C/p\u003E\u003Cp\u003EFirst, you appear to have MechJebRPM installed but don\u0027t have MechJeb itself. This could potentially cause an issue.\u003C/p\u003E\u003Cp\u003ESecond, I wouldn\u0027t expect that Kethane is supposed to do this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFailed to load assembly C:\\Kerbal Space Program\\GameData\\Kethane\\Plugins\\MMI_Kethane.dll:\u003Cbr\u003ESystem.BadImageFormatException: Format of the executable (.exe) or library (.dll) is invalid.\u003Cbr\u003E  at Mono.Cecil.PE.ImageReader.ReadImage () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at Mono.Cecil.PE.ImageReader.ReadImageFrom (System.IO.Stream stream) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at Mono.Cecil.ModuleDefinition.ReadModule (System.IO.Stream stream, Mono.Cecil.ReaderParameters parameters) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at Mono.Cecil.ModuleDefinition.ReadModule (System.String fileName, Mono.Cecil.ReaderParameters parameters) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at Mono.Cecil.ModuleDefinition.ReadModule (System.String fileName) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at AssemblyLoader.ScanForBadTypeRefs (System.String file) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at AssemblyLoader.LoadExternalAssembly (System.String file) [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThirdly, when loading the vessel, most (possibly all) of the parts report a missing PartModule. This appears to be something to do with FAR as the PartModules that don\u0027t load are FARBasicDragModel. I don\u0027t know if this is significant but I wouldn\u0027t expect FAR to cause this sort of log spam when loading a vessel.\u003C/p\u003E\u003Cp\u003EFourth, the Clouds plugin appears to be running 3 times at once. I don\u0027t know if this is significant but it could be.\u003C/p\u003E\u003Cp\u003EIf you drag the sim time slider all the way to the right (1000) and the glitches are less severe but still happen every tenth of a second then it isn\u0027t being directly caused by the simulation code as that would only be running every second (the number is the time in milliseconds between the start of one run of the simulation and the next one). KAC uses a 0.1 second timer so it may be worth removing that as a test and see if anything changes...\u003C/p\u003E\n"},{"CreatedByName":"How2FoldSoup","CreatedById":82003,"CreatedDateTime":"2014-06-04T19:33:53Z","Content":"\n\u003Cp\u003EThat\u0027s interesting...I\u0027ve only ever used mechjeb once on my .20 game and that\u0027s tucked away in another folder completely unrelated. Huh, thats weird. Actually, I just remembered that I did install mechjeb once recently before your last update for the dv calcs to see if it worked better. At any rate I came straight back to KER. \u003C/p\u003E\u003Cp\u003EI removed the MechJebRPM folder in gamedata, it only had the config in it for whatever reason, and I removed KAC and still no joy when the vessel tab is being shown. I removed kethane as a test and moved the slider to 1000 with the ship on the launch pad. I almost removed probes I had in the cargo which now lets me run the ship in the green at real time. At this rate it did seem to freeze up about once every second but it a much faster freeze than it had been. \u003C/p\u003E\u003Cp\u003EI\u0027m rather unsure what to do about the clouds because I know I have EVE installed and then astronomers visuals pack on top of that. Removing both packs did not fix the issue.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-08T21:36:15Z","Content":"\n\u003Cp\u003EI have just updated the zip in the first post with a fix for the \u0022fuel tank with disabled crossfeed\u0022 issue. This affects some nosecone parts when using Modular Fuel Tanks or Real Fuels. I have also slightly optimised the GetSourceSet function to eliminate lots of pointless recursive calls.\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-06-11T02:08:16Z","Content":"\n\u003Cp\u003EPadishar - would it be possible to update KER to work with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/76499-0-23-5-CrossFeedEnabler-v1-4-13-14\u0022 rel=\u0022external nofollow\u0022\u003ECross Feed Enabler\u003C/a\u003E?\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-06-14T12:59:53Z","Content":"\n\u003Cp\u003ENoticed a little bug - adding a (dummy) stage below the current one seems to break most of the info:\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/lfzfy\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EWithout the stage, all the info is there. With it, most of the info, aside from dV, is gone. I think I remember seeing something similar to this before, so I think it could be triggered by other things as well, not just this.. might be the simulation failing to calculate all info for the active stage? I dunno.. but yeah, there\u0027s my little bug report \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: that said, this was with the version previous to the current one.. I\u0027ll update and see if that has any effect.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-14T14:55:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022somnambulist\u0022 data-cite=\u0022somnambulist\u0022\u003E\u003Cdiv\u003EPadishar - would it be possible to update KER to work with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/76499-0-23-5-CrossFeedEnabler-v1-4-13-14\u0022 rel=\u0022external nofollow\u0022\u003ECross Feed Enabler\u003C/a\u003E?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting... I think it should be possible to make it work but I will need to investigate what it is doing to see if it will need to be handled differently in the VAB to in flight. I\u0027ve added an issue to my GitHub...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ObsessedWithKSP\u0022 data-cite=\u0022ObsessedWithKSP\u0022\u003E\u003Cdiv\u003ENoticed a little bug - adding a (dummy) stage below the current one seems to break most of the info:\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/a/lfzfy\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/lfzfy\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWithout the stage, all the info is there. With it, most of the info, aside from dV, is gone. I think I remember seeing something similar to this before, so I think it could be triggered by other things as well, not just this.. might be the simulation failing to calculate all info for the active stage? I dunno.. but yeah, there\u0027s my little bug report \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: that said, this was with the version previous to the current one.. I\u0027ll update and see if that has any effect.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, I noticed this a few days ago when testing another issue with docking ports but haven\u0027t had a lot of time recently to get to the bottom of either one. I suspect what is actually happening is that KER is simulating the \u0022active\u0022 stage because the engines currently active aren\u0027t what they should be for stage 2. This gives a dummy stage 3 used to calculate the deltaV and other values but it looks like most of the values in the VES tab (except for the deltaV) are output using the last real stage so the numbers are all zero. I\u0027ve added issues for both this and the docking port issue to GitHub.\u003C/p\u003E\u003Cp\u003EHopefully I\u0027ll get a bit of time to work on these over the next few days...\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-15T00:58:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EHopefully I\u0027ll get a bit of time to work on these over the next few days...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have just updated the zip linked in the first post to include support for CrossFeedEnabler and to fix the VES tab when the extra \u0022active\u0022 stage is shown (and to fix the docking port issue I mentioned).\u003C/p\u003E\u003Cp\u003EThis has involved changing how the simulation code deals with fuel lines but I\u0027m pretty sure it\u0027s all working correctly...\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-16T22:12:21Z","Content":"\n\u003Cp\u003EI have just updated the zip linked in the first post to add readouts of the biome you are currently over and the biome you will impact in to the SUR tab.\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-06-17T03:22:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EI have just updated the zip linked in the first post to include support for CrossFeedEnabler and to fix the VES tab when the extra \u0022active\u0022 stage is shown (and to fix the docking port issue I mentioned).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPerfect. Thanks Padishar!\u003C/p\u003E\n"},{"CreatedByName":"Alexander_bike","CreatedById":113475,"CreatedDateTime":"2014-06-22T19:46:15Z","Content":"\n\u003Cp\u003EI made an account just to post this.\u003C/p\u003E\u003Cp\u003EI do not know if this is possible however it would be the ultimate addition to your already amazing mod. When in the VAB it would be great if you could select an itinerary e.g. kerbin -\u0026gt; duna -\u0026gt; Kerbin. Once the itinerary is selected there is a list of delta-v requirements that you can set for different stages e.g. stage 1 duna kerbin transfer, stage 2 low duna orbit to escape, stage 3 duna surface to low duna orbit etc. \u003C/p\u003E\u003Cp\u003EI am not sure how hard this would be to do however it would be such an amazing addition\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-22T20:28:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alexander_bike\u0022 data-cite=\u0022Alexander_bike\u0022\u003E\u003Cdiv\u003EI made an account just to post this.\u003Cp\u003EI do not know if this is possible however it would be the ultimate addition to your already amazing mod. When in the VAB it would be great if you could select an itinerary e.g. kerbin -\u0026gt; duna -\u0026gt; Kerbin. Once the itinerary is selected there is a list of delta-v requirements that you can set for different stages e.g. stage 1 duna kerbin transfer, stage 2 low duna orbit to escape, stage 3 duna surface to low duna orbit etc. \u003C/p\u003E\u003Cp\u003EI am not sure how hard this would be to do however it would be such an amazing addition\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, it isn\u0027t actually my mod. KER was created by Cybutek (the main release thread is linked in the first post of this one) and I have been making various fixes to the deltaV calculation code and various other improvements while Cybutek is busy with a major UI rewrite that will become the next major version.\u003C/p\u003E\u003Cp\u003EThe sort of thing you are suggesting has been proposed before (basically a mission planner that allows you to design for a whole mission profile) but it will require some complex UI and would need to be carefully designed from the outset to be able to support more complex mission types, e.g. even a simple \u0022Apollo\u0022 style Mun mission requires being able to specify that the vessel splits in two and is then redocked, needing to track multiple craft. For a grand tour type mission things would get very complex and it would also need to support missions that are refuelled in LKO before departure or refuelled elsewhere (and even with onboard kethane equipment). Devising a decent UI to allow all this sort of planning is tricky.\u003C/p\u003E\n"},{"CreatedByName":"Alexander_bike","CreatedById":113475,"CreatedDateTime":"2014-06-23T20:20:53Z","Content":"\n\u003Cp\u003EFair point I was only thinking about stages I did not even contemplate undocking redocking and refueling. I can see how once people got the very simple stuff they would just want more.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-23T23:42:18Z","Content":"\n\u003Cp\u003EI have just updated the zip linked in the first post to include a slope angle and heading display in the SUR tab. The readout shows the angle of the slope from the horizontal to 1 decimal place and the compass heading of the downhill direction.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-28T17:25:34Z","Content":"\n\u003Cp\u003EAnother small update to the zip in the first post. Now only calculates the slope if the reading is shown plus a small tweak to the launching of the background thread.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-30T09:24:08Z","Content":"\n\u003Cp\u003EThere is currently a fairly serious issue in the simulation\u0027s staging logic during flight that is causing it to not stage when it should. This is most noticeable with asparagus type designs, where the individual stage deltaV values can disappear just leaving the first of the asparagus stages (with the wrong total deltaV as it is assuming you don\u0027t drop the stages as you go so are pushing more mass).\u003C/p\u003E\u003Cp\u003EI will try to fix this issue as soon as possible...\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-07-02T10:27:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EI will try to fix this issue as soon as possible...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUnfortunately this is not simple to fix. Basically, during the update on 14/05 I accidentally reintroduced the \u0022struts feed fuel during flight\u0022 issue that first cropped up when 0.23.5 was released which is what broke the calculations for asparagus designs during flight. I will release a fix for this after work today but there will still be staging related issues.\u003C/p\u003E\u003Cp\u003EThe problems boil down to it not being easy to (reliably) tell when the next stage should be fired. In a simple, serial staged, design it is trivial (just stage once all the engines have gone out) but the user is not limited to such simple designs. A simple onion or asparagus staged design still has engines burning at the point when you want to stage so it needs to look at which engines are decoupled in the next stage and only stage when all engines that are decoupled have shut down. Unfortunately, this doesn\u0027t handle drop-tanks correctly so it also has to check if all the fuel tanks that have been drained during this stage, and will be decoupled in the next stage, are empty.\u003C/p\u003E\u003Cp\u003EIn the general case, a stage that doesn\u0027t decouple anything and doesn\u0027t enable any engines should not be activated until the stage that follows it needs to be activated (and that may need to check the next one too). This ensures that the deltaV for the stage appears under the correct stage number. E.g. in a simple pod/chute/SRB design with the chute in stage 0 and the SRB in stage 1, the deltaV readout should show the deltaV in stage 1. However, at present, the code only checks the next stage and, if nothing is decoupled then it doesn\u0027t activate it until all the engines have shut down.\u003C/p\u003E\u003Cp\u003EThese issues also combine such that if you add an empty stage between asparagus stages then the simulation will not fire the empty stage until all the active engines (and hence all the asparagus stages) have burned out. This results in the deltaV being calculated as if you don\u0027t stage once you get to the empty stage until all the engines stop. This lumps all the following asparagus stages into the stage before the empty one with a much lower total deltaV because it is pushing all the dead weight of the empty stages.\u003C/p\u003E\u003Cp\u003ETo fix this \u0022properly\u0022 will require significant changes to how it works. It should be possible to examine the whole craft at the start of the simulation and determine the necessary conditions for each stage to fire. This list of conditions can then be checked for the current stage during the simulation. This should require less work to be done during the simulation loop so it should be more efficient.\u003C/p\u003E\u003Cp\u003ETL;DR\u003C/p\u003E\u003Cp\u003EI\u0027ll fix the struts issue that confuses things during flight this evening but a full fix to the staging logic will take longer...\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-07-02T22:56:17Z","Content":"\n\u003Cp\u003EI have just updated the zip linked in the first post to fix the \u0022struts feeding fuel\u0022 issue. I\u0027ve started working on the replacement staging calculation described above and, hopefully, I\u0027ll manage to get it done before 0.24 hits and needs other fixes to be done asap...\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2014-07-16T17:13:01Z","Content":"\n\u003Cp\u003EShould we give up hope then? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003EOr is the silence a sign of you getting a .24 already to update KER properly for the new version? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_lipssealed.gif\u0022 alt=\u0022:sealed:\u0022\u003E\u003C/p\u003E\n"}]}