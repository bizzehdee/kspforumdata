{"TopicId":141893,"ForumId":29,"TopicTitle":"KSPEvent right-click on cmd pod doesn\u0026#039;t work when no crew","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-06-16T03:40:02Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-06-16T03:40:02Z","Content":"\n\u003Cp\u003E\nThis is in a PartModule which is added to all command pods using ModuleManager\n\u003C/p\u003E\n\u003Cp\u003E\nI have the following code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[KSPEvent (/*active = true,*/ guiActive = true, guiActiveEditor = true, guiActiveUnfocused = true, guiName = \u0022Persistent pod name\u0022)]\npublic void ActivateEvent ()\n{\n\tGameObject gObj = new GameObject (\u0022PDPNwindow\u0022, typeof(PDPN_EntryWindow));\n\tDontDestroyOnLoad (gObj);\n\tpdpnEntryWindow = (PDPN_EntryWindow)gObj.GetComponent (typeof(PDPN_EntryWindow));\n\n\tpdpnEntryWindow.Invoke (this, storedVesselName, Utils.getModulePartParent (this).vesselType, priority);\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nWhat\u0027s happening is that in the editor, it works on all the command pods. \u00A0When in flight, it only works if there is at least one crew in the command pod. \u00A0I also tried this with the\u00A0\u0022active = true\u0022 uncommented.\n\u003C/p\u003E\n\u003Cp\u003E\nI also tried adding \u0022guiActiveUncommand = true\u0022, but that didn\u0027t help either.\n\u003C/p\u003E\n\u003Cp\u003E\nAny suggestions?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks in advance\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-06-16T05:59:45Z","Content":"\n\u003Cp\u003E\nIf guiActive and active and guiActiveUncommand are all true it should be available and work in flight regardless of whether the command pod/vessel is controllable or not.\u003Cbr\u003E\nIf guiActive and active are true and guiActiveUncommand is false then the vessel must be controllable.\u003Cbr\u003E\nIn the Editor you just need guiActiveEditor and active to be true.\u003Cbr\u003E\nSo did you try with all three set to active? If you did then I\u0027m not sure why it\u0027s not working. It should.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-06-16T10:45:21Z","Content":"\n\u003Cp\u003E\nJust tried this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0[KSPEvent (active = true,guiActive = true, guiActiveEditor = true, guiActiveUnfocused = true, \u00A0guiActiveUncommand = true, guiName = \u0022Persistent pod name\u0022)]\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0public void ActivateEvent ()\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t[KSPEvent (active = true,guiActive = true, guiActiveEditor = true, guiActiveUnfocused = true,  guiActiveUncommand = true, guiName = \u0022Persistent pod name\u0022)]\n\t\tpublic void ActivateEvent ()\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nstill didn\u0027t work. So it must be something in my code. \u00A0The vessel is being renamed at staging, I wonder if that\u0027s causing an issue\n\u003C/p\u003E\n\u003Cp\u003E\nForgot to mention that this all started (it used to work) when I switched from Xamarin to MS Visual Studio. \u00A0Shouldn\u0027t make a difference, but who knows\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-06-16T11:01:35Z","Content":"\n\u003Cp\u003E\nOh, I just found the problem. \u00A0For some reason, after the staging event, the following two parameters are set to false:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EguiActiveUncommand = False\nguiActiveUnfocused = False\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI saw this in the persistent file. \u00A0So now I need to figure out why, and how to reset them back to true.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-06-16T11:12:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222633247\u0022 data-ipsquote-contentid=\u0022141893\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466074895\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOh, I just found the problem. \u00A0For some reason, after the staging event, the following two parameters are set to false:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003EguiActiveUncommand \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003EFalse\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\nguiActiveUnfocused \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003EFalse\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI saw this in the persistent file. \u00A0So now I need to figure out why, and how to reset them back to true.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmmm.. If that\u0027s true just register for the event GameEvents.onStageActivate and then set them in that method.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\neg (typing this on my phone, so untested, could have some errors):\n\u003C/p\u003E\n\u003Cp\u003E\nIn OnStart of your partmodule:\u003Cbr\u003E\nGameEvents.onStageActivate.Add(onStageActivate);\u003Cbr\u003E\u003Cbr\u003E\nprivate void onStageActivate()\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0 Events[\u0022ActivateEvent\u0022].guiActiveUncommand =\u00A0true;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0 Events[\u0022ActivateEvent\u0022].guiActiveUnfocused =\u00A0true;\u003Cbr\u003E\n}\u003Cbr\u003E\u003Cbr\u003E\nDont forget remove the GameEvent registration in your partmodule OnDestroy.\u003Cbr\u003E\nGameEvents.onStageActivate.Remove(onStageActivate);\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-06-16T11:26:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222633253\u0022 data-ipsquote-contentid=\u0022141893\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466075564\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHmmm.. If that\u0027s true just register for the event GameEvents.onStageActivate and then set them in that method.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Ca href=\u0022#\u0022 rel=\u0022external\u0022\u003E\u00A0\u003C/a\u003E \u003Cspan\u003EReveal hidden contents\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\neg (typing this on my phone, so untested, could have some errors):\n\u003C/p\u003E\n\u003Cp\u003E\nIn OnStart of your partmodule:\u003Cbr\u003E\nGameEvents.onStageActivate.Add(onStageActivate);\u003Cbr\u003E\u003Cbr\u003E\nprivate void onStageActivate()\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0 Events[\u0022ActivateEvent\u0022].guiActiveUncommand =\u00A0true;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0 Events[\u0022ActivateEvent\u0022].guiActiveUnfocused =\u00A0true;\u003Cbr\u003E\n}\u003Cbr\u003E\u003Cbr\u003E\nDont forget remove the GameEvent registration in your partmodule OnDestroy.\u003Cbr\u003E\nGameEvents.onStageActivate.Remove(onStageActivate);\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, that\u0027s what I\u0027m trying to do, but getting errors\n\u003C/p\u003E\n\u003Cp\u003E\nedit. \u00A0It helps to put it in the right spot. \u00A0Thanks for the help, I got it working\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-16T11:31:39Z\u0022 title=\u002206/16/2016 11:31  AM\u0022 data-short=\u00228 yr\u0022\u003EJune 16, 2016\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-06-16T18:57:52Z","Content":"\n\u003Cp\u003E\nGlad you figured it out\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-06-16T19:25:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222633845\u0022 data-ipsquote-contentid=\u0022141893\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466103472\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n27 minutes ago, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGlad you figured it out\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks to you!\n\u003C/p\u003E\n"}]}