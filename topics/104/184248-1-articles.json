{"TopicId":184248,"ForumId":104,"TopicTitle":"ModuleAnimateGeneric field definitions needed for...","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-05T04:47:10Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-05T04:47:10Z","Content":"\n\u003Cp\u003E\nThe following fields are listed in the API, not mentioned in the Wiki, and I can\u0027t find any description of them:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EallowDeployLimit = true\nrevClampDirection = false\nrevClampSpeed = true\nrevClampPercent = true\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nCan some kind soul please define them?\u00A0 I\u0027ll be happy to update the Wiki once I have an answer.\n\u003C/p\u003E\n\u003Cp\u003E\nThx\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-05T14:15:18Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EBackground\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe full animation in the model file plays in one direction and has a defined start (0.0f) and end (normalized to 1.0f) which is tracked by float value \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EProgress\u003C/span\u003E while the part is animating.\n\u003C/p\u003E\n\u003Cp\u003E\nModuleAnimateGeneric plays the animation in one direction (positive playback speed) to \u0022deploy\u0022 or \u003Cspan\u003E\u0022open\u0022, and in reverse (negative playback speed) to \u0022retract\u0022 / \u0022close\u0022\u003Cbr\u003E\n(I might have gotten the two directions mixed up, but you get the idea)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cstrong\u003EallowDeployLimit\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nnormally, deploy/retract actions in Part Action Window (\u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E) correspond to \u0022play the animation fully\u0022\u003Cbr\u003E\nE.g. service bays do not have the option true and will only open/close fully\u003Cbr\u003E\nTheir animation state is either LOCKED when at fully open/closed state and MOVING when animating between the two\n\u003C/p\u003E\n\u003Cp\u003E\nallowDeployLimit adds a control on the \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E so that the animation is clamped, i.e. \u0022does not play fully\u0022\u003Cbr\u003E\nclear example of this is cargo bays. e.g. for Mk3 cargo ramp:\u003Cbr\u003E\nIf Deploy Limit set to 100% it will animate the full possible range when opening/closing\u003Cbr\u003E\nIf Deploy Limit set to around 55% the ramp will only open as far as approximately \u0022horizontal\u0022\u003Cbr\u003E\nWhen the ramp has stopped moving while \u0022half open\u0022 because of the deploy limit, the animation state is CLAMPED instead of LOCKED\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ErevClampDirection\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nreverse the clamp direction \u003Cem\u003E\u003Cu\u003Eof the animation\u003C/u\u003E\u003C/em\u003E\u003Cbr\u003E\nchanges whether animation is clamped from start or clamped from end.\n\u003C/p\u003E\n\u003Cp\u003E\n- one way is you can play from start of the animation clip to the clamp / deploy limit i.e. progress can range between 0.0 ~ X\u003Cbr\u003E\n- the other way applies the clamp from the other direction i.e. progress must be between X ~ 1.0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ErevClampPercent\u003C/strong\u003E\u003Cbr\u003E\nthe \u003Cem\u003E\u003Cu\u003Enumber displayed \u003C/u\u003E\u003C/em\u003Efor the Deploy Limit control in \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E is reversed.\u003Cbr\u003E\nIf you clamp a cargo bay door open with deploy limit 10% and it is \u0022only slightly ajar\u0022 i.e. the meaning is \u002210% open\u0022\u003Cbr\u003E\nThen close KSP and change the value of this field to the opposite, it will now be 90% to be \u0022only slightly ajar\u0022 i.e. it is \u002290% closed\u0022\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ErevClampSpeed\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIf the clamping condition occurs while animation is forward playback (speed \u0026gt; 0) then revClampSpeed = false\u003Cbr\u003E\nwhich will stop playback when deploy limit is reached/exceeded while in forward playback\u003Cbr\u003E\nbut if the part is somehow already beyond the limit it is allowed to animate in the other direction (and go back within the defined limit)\u003Cbr\u003E\nIt is coded like this for safety/robustness -- consider if you just force stop animation when progress \u0026gt; clamplimit then could be stuck forever if beyond the limit and not allowed to move back in range.\n\u003C/p\u003E\n\u003Cp\u003E\nIf the clamping condition is while animation is reverse playback (speed \u0026lt; 0) then you need revClampSpeed = true\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not sure I explained this one well but basically you can just fiddle with this last one until the behavior is correct.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-05T14:32:02Z\u0022 title=\u002205/05/2019 02:32  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 5, 2019\u003C/time\u003E by cakepie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-05T15:08:57Z","Content":"\n\u003Cp\u003E\nThank you.\n\u003C/p\u003E\n\u003Cp\u003E\nOne more question:\u00A0 if a mod wants to stop an animation at a specific time (ie:\u00A0 say at progress == .33), what\u0027s the proper way to do that?\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-05T15:37:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223593697\u0022 data-ipsquote-contentid=\u0022184248\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221557068937\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\na mod wants to stop an animation at a specific time\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nElaborate use case please. For what reason?\n\u003C/p\u003E\n\u003Cp\u003E\nGenerally the modeling/animation should go hand-in-hand with anything you might want to do via PartModule or other plugin code.\u003Cbr\u003E\nSo if you have something that should be a two-part animation, e.g. a centrifuge, that has a deploy animation, and then a spinning animation,\u00A0 that sort of situation is usually handled by having two separate animations.\n\u003C/p\u003E\n\u003Cp\u003E\nModuleAnimateGeneric is obviously written with only certain use cases in mind. Some of which is \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/174065-working-with-crew-capacity-changes-by-moduleanimategeneric-inflatableairlock/\u0022 rel=\u0022\u0022\u003Ea bit hacked on\u003C/a\u003E tbh.\u003Cbr\u003E\nIf it is not suitable for purpose then you may need to extend it or brew your own. Or maybe one of the existing alternative animation PartModules that are out there in various mods might fit the bill.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-05T19:58:42Z","Content":"\n\u003Cp\u003E\nThe use case is probably unnecessary, to a certain extent I was trying to see if it could be done.\n\u003C/p\u003E\n\u003Cp\u003E\nA cargo door part was made for one of my mods with three individual animations.\u00A0 Each animation needs to be adjustable (ie:\u00A0 clamping the max open), and also needs to start at a different point in the previous animation\u0027s progress.\n\u003C/p\u003E\n\u003Cp\u003E\nI was trying to have the mod flexible enough to have multiple start/stop events, but seems that is not as easily doable.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-06T03:16:38Z","Content":"\n\u003Cp\u003E\nSo like there\u0027s Anim1, Anim2, Anim3, and they all have their own separate deploy/retract button, but individual animations may have prerequisites i.e can only be used if another animation is in a particular state?\n\u003C/p\u003E\n\u003Cp\u003E\nthat would seem quite similar to inflatable/deployable centrifuge case, where:\n\u003C/p\u003E\n\u003Cp\u003E\n- spin animation cannot be turned on unless deploy/inflate is in fully open state\u003Cbr\u003E\n- retract/deflate cannot be done while spinning is active, must stop the spinning first\n\u003C/p\u003E\n\u003Cp\u003E\nBut I don\u0027t think ModuleAnimationGroup helps you here, though, because that is for (deploy-retract)\u0026lt;-\u0026gt;(active looping) setup only. Sounds like bespoke PartModule probably needed.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-12T16:39:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223593994\u0022 data-ipsquote-contentid=\u0022184248\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221557112598\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/5/2019 at 11:16 PM, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo like there\u0027s Anim1, Anim2, Anim3, and they all have their own separate deploy/retract button, but individual animations may have prerequisites i.e can only be used if another animation is in a particular state?\n\u003C/p\u003E\n\u003Cp\u003E\nthat would seem quite similar to inflatable/deployable centrifuge case, where:\n\u003C/p\u003E\n\u003Cp\u003E\n- spin animation cannot be turned on unless deploy/inflate is in fully open state\u003Cbr\u003E\n- retract/deflate cannot be done while spinning is active, must stop the spinning first\n\u003C/p\u003E\n\u003Cp\u003E\nBut I don\u0027t think ModuleAnimationGroup helps you here, though, because that is for (deploy-retract)\u0026lt;-\u0026gt;(active looping) setup only. Sounds like bespoke PartModule probably needed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve solved the problem, will be releasing my new mod SequentialAnimateGeneric soon.\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-12T17:05:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223597845\u0022 data-ipsquote-contentid=\u0022184248\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221557679144\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n24 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSequentialAnimateGeneric\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027d suggest calling it ModuleSequentialAnimate to stick with the convention, also definitely not generic anymore.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-12T18:09:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223597861\u0022 data-ipsquote-contentid=\u0022184248\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221557680738\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027d suggest calling it ModuleSequentialAnimate to stick with the convention, also definitely not generic anymore.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe full name is ModuleSequentialAnimationGeneric, it works with multiple ModuleAnimationGeneric modules on a single part. But I\u0027m playing around with the name right now, suggestions are welcome\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-12T18:28:12Z","Content":"\n\u003Cp\u003E\nYeah that sounds reasonable now that you\u0027ve explained that its function is to lock/unlock multiple ModuleAnimationGeneric on the part. A bit of a mouthful perhaps but clarity is more important than a short name.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-13T17:51:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223597907\u0022 data-ipsquote-contentid=\u0022184248\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221557685692\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah that sounds reasonable now that you\u0027ve explained that its function is to lock/unlock multiple ModuleAnimationGeneric on the part. A bit of a mouthful perhaps but clarity is more important than a short name.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnd of course, just as I was demoing it for the first time, an edge case came up, I now need to fix it.\n\u003C/p\u003E\n\u003Cp\u003E\nSo the release will be delayed a few days\n\u003C/p\u003E\n"}]}