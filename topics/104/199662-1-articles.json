{"TopicId":199662,"ForumId":104,"TopicTitle":"Understanding ModuleLight changes in 1.11","CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2021-01-17T02:02:59Z","PageNum":1,"Articles":[{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2021-01-17T02:02:59Z","Content":"\n\u003Cp\u003E\nThe recent changes to ModuleLight in KSP 1.11 mean \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/137804-110x-sdhi-strobe-o-matic-warning-rotator-lights-v101-29-august-2018\u0022 rel=\u0022\u0022\u003Emy Strobe-O-Matic rotator light mod\u003C/a\u003E no longer works, so I\u0027ve been trying to figure out how to revamp my spinner lights.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:22px;\u0022\u003E\u003Cstrong\u003EContext (1.05~1.10 era)\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMy mod provides rotator lights in five fixed standardized industrial colors - amber, blue, green, red and white.\n\u003C/p\u003E\n\u003Cp\u003E\nEach rotator light consists of a common base model (not relevant to this discussion) and a colored lens model containing the light source and animated rotating mirror. As it is not possible to actually redirect a light beam off a mirror, I actually have \u003Cstrong\u003E\u003Cem\u003Etwo\u003C/em\u003E\u003C/strong\u003E light sources - a spherical \u003Cstrong\u003EPointlight\u003C/strong\u003E that makes the inner workings glow, and a conical \u003Cstrong\u003ESpotlight\u003C/strong\u003E that casts the actual light beam out into the world:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002261.00\u0022 height=\u0022617\u0022 style=\u0022width:400px;height:auto;\u0022 width=\u00221012\u0022 alt=\u0022QBN6lsh.png\u0022 src=\u0022https://i.imgur.com/QBN6lsh.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBack in KSP 1.0.5 through to 1.10, I was able to toggle both light sources and the spinning mirror animation with a single ModuleLight:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nMODULE\n{\n    name = ModuleLight\n    lightName = Pointlight, Spotlight\n    useAnimationDim = true\n    lightBrightenSpeed = 100\n    lightDimSpeed = 100\n    resourceAmount = 0.01\n    animationName = SDHI_ToggleLight_Amber\n    useResources = true\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022675\u0022 style=\u0022width:400px;height:auto;\u0022 width=\u00221200\u0022 alt=\u0022d3elnWN.png\u0022 src=\u0022https://i.imgur.com/d3elnWN.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:22px;\u0022\u003E\u003Cstrong\u003EThe Problem (1.11\u002B era)\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, after the recent KSP 1.11 update, the light sources and animation no longer work when the rotator light is switched on or off.\n\u003C/p\u003E\n\u003Cp\u003E\nAccording to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022 rel=\u0022\u0022\u003E@JPLRepo\u003C/a\u003E in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/198764-modders-notes-1110/\u0022 rel=\u0022\u0022\u003Ethe recent Modders Notes for 1.11.0\u003C/a\u003E\u003Cspan\u003E\u003Cspan\u003E:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223894721\u0022 data-ipsquote-contentid=\u0022198764\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221608183028\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/17/2020 at 1:30 PM, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nModuleLight no longer uses animations to control color and brightness of the lights.Instead this is done by the part module itself.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy understanding is that these changes were made to support player-tweakable light colors, which isn\u0027t what I want for these rotator strobe lights.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:22px;\u0022\u003E\u003Cstrong\u003EWhere I need help\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBasically, I want to restore my mod\u0027s 1.0.5~1.10 light color and animation functionality in 1.11.0.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cstrong\u003EHow do I control multiple light sources on the same part with just one ModuleLight part module? \u003C/strong\u003E(I cannot put each light source into separate ModuleLights, as this would allow players to individually turn the Pointlight and Spotlight, which would destroy the visual effect I am aiming for. Renaming both Pointlight and Spotlight to a shared toggleableLight transform name does not work, either.)\u003Cbr\u003E\n\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003EHow do I force the light to be always use my custom color, disable the light color picker for my part?\u003C/strong\u003E (These rotator strobes use standardized industrial colors, and should not be changed by the player. However, my reworked lights are always white, even when I set custom lightR, lightG and lightB values in the CFG.)\u003Cbr\u003E\n\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003EHow do I toggle the spinning animation on/off with ModuleLight?\u003C/strong\u003E (Turning the light on and off should start and stop rotating the Spotlight transform. Having a separate ModuleAnimateGeneric is counter-intuitive, as players shouldn\u0027t have to separately turn on the light and the rotator as two separate actions.)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan\u003EAnyone have any specific insights into getting my mod working again?\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"cineboxandrew","CreatedById":63646,"CreatedDateTime":"2021-01-17T10:53:47Z","Content":"\n\u003Cp\u003E\nI think you need to write a new module. The new ModuleLight is too limiting for anything beyond the stock lights\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2021-01-25T18:37:54Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266272\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0022 rel=\u0022\u0022\u003E@sumghai\u003C/a\u003E,\u00A0if this is still relevant.\u00A0I hope this is some kind helpful,\u00A0at least on node 1 and 3.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Ename = SDHI_WRL_Amber\nMODULE    \n{       \n  name = ModuleLight       \n  lightName = Spotlight\t\t\n  lightMeshRendererName = Pointlight       \n  useAnimationDim = true\t\t\n  lightBrightenSpeed = 100       \n  lightDimSpeed = 100       \n  resourceAmount = 0.01       \n  animationName = SDHI_ToggleLight_Amber        \n  useResources = true\t\t\n  movementTransformName = Pointlight\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nYou will see for yourself what the code does on existing model,\u00A0but apparently there needs to be some changes to animation hierarchy.\n\u003C/p\u003E\n\u003Cp\u003E\nAs far the fixed color goes, i tried to link \u0022ModuleLight\u0022 to \u0022ModuleColorChanger\u0022\u00A0with no avail (so far).\n\u003C/p\u003E\n\u003Cp\u003E\nAs i would like to see you to make just one part that uses existing stock behavior,\u00A0i\u0027ll try to figure out the rest of the puzzle.\n\u003C/p\u003E\n\u003Cp\u003E\nbest regards\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2021-01-26T06:43:19Z","Content":"\n\u003Cp\u003E\nI\u0027ll give your suggestions a try, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/81294-sebizzr/\u0026amp;do=hovercard\u0022 data-mentionid=\u002281294\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/81294-sebizzr/\u0022 rel=\u0022\u0022\u003E@sebi.zzr\u003C/a\u003E\u00A0- changing the animation hierarchy sounds like something I could do fairly easily.\n\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2021-01-27T17:13:06Z","Content":"\n\u003Cp\u003E\nHello dear sir, just FYI.\u00A0I was investigating another bug and find out that maybe link between \u0022ModuleLight\u0022 and animation is broken.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s not directly related, but i think that the sock landing gear has the same problem as\u00A0your mod.\n\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2021-01-27T19:47:57Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266272\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0022 rel=\u0022\u0022\u003E@sumghai\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI totally forgot, how the old landing legs were fixed.\u00A0\u003Cimg alt=\u0022:blink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_blink.png\u0022 title=\u0022:blink:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\ngreen:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0//MODULE\u003Cbr\u003E\n\u00A0 \u00A0 //{\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //name = ModuleLight\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //lightName = Spotlight\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //useAnimationDim = true\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0//lightBrightenSpeed = 100\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //lightDimSpeed = 100\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //resourceAmount = 0.01\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //animationName = SDHI_ToggleLight_Green\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //useResources = true\u003Cbr\u003E\n\u00A0 \u00A0 //}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0MODULE\u003Cbr\u003E\n\u00A0 \u00A0 {\u003Cbr\u003E\n\u00A0 \u00A0 name = ModuleAnimateGeneric\u003Cbr\u003E\n\u00A0 \u00A0 animationName = SDHI_ToggleLight_Green\u003Cbr\u003E\n\u00A0 \u00A0 startEventGUIName = Deploy\u003Cbr\u003E\n\u00A0 \u00A0 endEventGUIName = Retract\u003Cbr\u003E\n\u00A0 \u00A0 actionGUIName = Toggle gear\u003Cbr\u003E\n\u00A0 \u00A0 }\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\namber:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0//MODULE\u003Cbr\u003E\n\u00A0 \u00A0 //{\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //name = ModuleLight\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //lightName = Spotlight\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0//lightMeshRendererName = Pointlight\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //useAnimationDim = true\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0//lightBrightenSpeed = 100\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 /lightDimSpeed = 100\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //resourceAmount = 0.01\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //animationName = SDHI_ToggleLight_Amber\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 //useResources = true\u003Cbr\u003E\n\u00A0 \u00A0 //}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0MODULE\u003Cbr\u003E\n\u00A0 \u00A0 {\u003Cbr\u003E\n\u00A0 \u00A0 name = ModuleAnimateGeneric\u003Cbr\u003E\n\u00A0 \u00A0 animationName = SDHI_ToggleLight_Amber\u003Cbr\u003E\n\u00A0 \u00A0 startEventGUIName = Ligts ON\u003Cbr\u003E\n\u00A0 \u00A0 endEventGUIName = Ligts OFF\u003Cbr\u003E\n\u00A0 \u00A0 actionGUIName = Toggle ligt\u003Cbr\u003E\n\u00A0 \u00A0 }\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nblue:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0MODULE\u003Cbr\u003E\n\u00A0 \u00A0 {\u003Cbr\u003E\n\u00A0 \u00A0 name = ModuleAnimateGeneric\u003Cbr\u003E\n\u00A0 \u00A0 animationName = SDHI_ToggleLight_Blue\u003Cbr\u003E\n\u00A0 \u00A0 startEventGUIName = Ligts ON\u003Cbr\u003E\n\u00A0 \u00A0 endEventGUIName = Ligts OFF\u003Cbr\u003E\n\u00A0 \u00A0 actionGUIName = Toggle ligt\u003Cbr\u003E\n\u00A0 \u00A0 }\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#e6e8e9;color:#2d3134;font-size:15px;\u0022\u003EModuleLight no longer uses animations to control color and brightness of the lights.Instead this is done by the part module itself.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u0022ModuleAnimateGeneric\u0022\u00A0now controls\u00A0color and brightness of the lights.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-27T20:10:22Z\u0022 title=\u002201/27/2021 08:10  PM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 27, 2021\u003C/time\u003E by sebi.zzr\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2021-01-29T10:52:39Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/81294-sebizzr/\u0026amp;do=hovercard\u0022 data-mentionid=\u002281294\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/81294-sebizzr/\u0022 rel=\u0022\u0022\u003E@sebi.zzr\u003C/a\u003E - My concern with your approach is that the light will no longer default to being bound to the Lights action group, as well as the lack of resource (electricity) consumption while the light is spinning.\n\u003C/p\u003E\n"},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2023-03-02T13:36:56Z","Content":"\n\u003Cp\u003E\ntake a look at my suggestion, needs someone to write the code for the module but it may solve problems like yours\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/214194-suggestion-for-a-little-module-plugin-modulemultilight/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/214194-suggestion-for-a-little-module-plugin-modulemultilight/\u003C/a\u003E\n\u003C/p\u003E\n"}]}