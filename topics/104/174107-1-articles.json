{"TopicId":174107,"ForumId":104,"TopicTitle":"Adding functinality to a part at tech level.","CreatedByName":"Paul Kingtiger","CreatedById":57455,"CreatedDateTime":"2018-04-20T14:22:41Z","PageNum":1,"Articles":[{"CreatedByName":"Paul Kingtiger","CreatedById":57455,"CreatedDateTime":"2018-04-20T14:22:41Z","Content":"\n\u003Cp\u003E\nIs it possible to add additional functions / modules to a part when achieving a tech level.\n\u003C/p\u003E\n\u003Cp\u003E\nAs an example, I have part that acts as a MechJeb core, which is unlocked at tech \u003Cstrong\u003EflightControl\u003C/strong\u003E.\u00A0 I want to add kOS function at tech \u003Cstrong\u003EunmanndedTech\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUsing module manager I can add functions based on other mods being installed with \u003Cstrong\u003ENEEDS:[mod name]\u003C/strong\u003E, is there a way to do something similar with a tech level?\n\u003C/p\u003E\n"},{"CreatedByName":"Burning Kan","CreatedById":163619,"CreatedDateTime":"2018-04-20T16:14:20Z","Content":"\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed5767184748\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/155309-is-it-possible-to-add-modules-through-part-upgrade/\u0026amp;do=embed\u0022 style=\u0022height:212px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed3056284378\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/150550-new-part-upgrade-module/\u0026amp;do=embed\u0022 style=\u0022height:212px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nmaybe inside one of them\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-20T17:03:31Z\u0022 title=\u002204/20/2018 05:03  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 20, 2018\u003C/time\u003E by Burning Kan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Paul Kingtiger","CreatedById":57455,"CreatedDateTime":"2018-05-01T02:04:58Z","Content":"\n\u003Cp\u003E\nSo I\u0027ve made some progress based on the posts above.\n\u003C/p\u003E\n\u003Cp\u003E\nThe starter code is something like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n    // Kerbal Operating System (kOS)\n        @PART[USGuidanceComputer]:NEEDS[kOS]\n        {       \n            MODULE\n            {\n                name = kOSProcessor\n\t\tdiskSpace = 60000\n\t\tECPerBytePerSecond = 0\n\t\tECPerInstruction = 0.000004\n            }\n        }\u003C/pre\u003E\n\u003Cp\u003E\nI\u0027ve got as far as adding the Upgrade code to this:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t// Kerbal Operating System (kOS)\n\t\t@PART[USGuidanceComputer]:NEEDS[kOS]\n\t\t{\t\n\t\t\t// @cost = 2200\n\t\t\t\n\t\t\t// @TechRequired = unmannedTech\n\t\t\t// @entryCost = 4200\n\t\t\t\n\t\t\tMODULE\n\t\t\t{\n\t\t\t\tname = kOSProcessor\n\t\t\t\tdiskSpace = 0\n\t\t\t\tECPerBytePerSecond = 0\n\t\t\t\tECPerInstruction = 0\n\t\t\t}\n\t\t\t\t\n\t\t\tMODULE\n\t\t\t{\n\t\t\t\tname = PartStatsUpgradeModule\n\t\t\t\tshowUpgradesInModuleInfo = true\n\t\t\t\tUPGRADES\n\t\t\t\t{\n\t\t\t\t\tUPGRADE \n\t\t\t\t\t{\n\t\t\t\t\t\tname__ = USGuidanceComputer_kOS\n\t\t\t\t\t\ttechRequired__ = unmannedTech\n\t\t\t\t\t\tentryCost = 4200\n\t\t\t\t\t\ttitle = Kerbal Operating System upgrade\n\t\t\t\t\t\tmanufacturer = Universal Storage\n\t\t\t\t\t\tdescription = Software patch adds kOS compatibility, allowing for programmed missions.\n\t\t\t\t\t\tbasicInfo = Whatever\n\t\t\t\t\t\t\n\t\t\t\t\t\tIsAdditiveUpgrade__ = false\t\uFEFF\t\t\t\n\t\t\t\t\t\tPartStats\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname = kOSProcessor\n\t\t\t\t\t\t\tdiskSpace = 60000\n\t\t\t\t\t\t\tECPerBytePerSecond = 0\n\t\t\t\t\t\t\tECPerInstruction = 0.000004\n\t\t\t\t\t\t}\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\t\t\tPARTUPGRADE\n\t\t\t{\n\t\t\t\tname = USGuidanceComputer_kOS\n\t\t\t\tpartIcon = USGuidanceComputer\n\t\t\t\ttechRequired = unmannedTech\n\t\t\t\tentryCost = 4200\n\t\t\t\tcost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.\n\t\t\t\t\n\t\t\t\ttitle = Kerbal Operating System upgrade\n\t\t\t\tbasicInfo = Whatever\n\t\t\t\tmanufacturer = Universal Storage\n\t\t\t\tdescription = Software patch adds kOS compatibility, allowing for programmed missions.\n\t\t\t}\n\t\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNo luck getting this to work though.\u003Cbr\u003E\u003Cbr\u003E\nReading the documentation, I\u0027m not sure this is even possible with modded values.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Bottle Rocketeer 500","CreatedById":178766,"CreatedDateTime":"2018-05-02T00:02:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57455-paul-kingtiger/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257455\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57455-paul-kingtiger/\u0022 rel=\u0022\u0022\u003E@Paul Kingtiger\u003C/a\u003E\u00A0It isn\u0027t even compatible with some stock modules, let alone modded modules. So, maybe you can write a plugin for a better upgrades system that allows mods.\n\u003C/p\u003E\n"},{"CreatedByName":"Paul Kingtiger","CreatedById":57455,"CreatedDateTime":"2018-05-02T13:22:00Z","Content":"\n\u003Cp\u003E\nI\u0027m a researcher not a coder, but this would be really useful functionality to have.\n\u003C/p\u003E\n"},{"CreatedByName":"JadeOfMaar","CreatedById":167617,"CreatedDateTime":"2018-07-20T00:00:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57455-paul-kingtiger/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257455\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57455-paul-kingtiger/\u0022 rel=\u0022\u0022\u003E@Paul Kingtiger\u003C/a\u003E\u00A0I believe what you want is this: Have the modules in question always in the config but have them disabled and use the partupgrade to enable them.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMODULE\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\tname \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\tmoduleIsEnabled \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Efalse\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\tshowUpgradesInModuleInfo \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etrue\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\tUPGRADES\n\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\tUPGRADE\n\t\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\tname__ \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\tdescription__ \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\ttechRequired__ \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\tmoduleIsEnabled \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etrue\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}