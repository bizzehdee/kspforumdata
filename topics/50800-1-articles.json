{"TopicId":50800,"ForumId":55,"TopicTitle":"0.23 should focus on performance","CreatedByName":"Overlord","CreatedById":46190,"CreatedDateTime":"2013-10-27T14:17:37Z","PageNum":1,"Articles":[{"CreatedByName":"Overlord","CreatedById":46190,"CreatedDateTime":"2013-10-27T14:17:37Z","Content":"\n\u003Cp\u003EThe title basically says it all. I love the way that Squad is making this game, with each update this game gets better and better, and 0.22 is just awesome. However I belive that the next step should be implementing multi core support, I know that it is difficult with unity and KSP (at least that\u0027s what I heard), but I belive this should be done next. I have a very strong machine, however as soon as I build a bigger spacecraft the game starts lagging so I believe that this should be taken care of next.\u003C/p\u003E\u003Cp\u003EOnce again I love all the work that squad has done so far keep it up! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo what is your opinion on this?\u003C/p\u003E\u003Cp\u003EP.S. I know it is still early to talk about 0.23 but I thought I might just as well start the topic.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-27T14:20:39Z\u0022 title=\u002210/27/2013 02:20  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 27, 2013\u003C/time\u003E by Overlord\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pulstar","CreatedById":57193,"CreatedDateTime":"2013-10-27T16:52:55Z","Content":"\n\u003Cp\u003EMulticore support can only happen if unity developers do it, otherwise it would have been implemented a long time ago. The issue is mostly with the PhysX implementation that unity uses, it is simply very old and squad can\u0027t do much about it on their end.\u003C/p\u003E\u003Cp\u003EHowever a major code overhaul is coming soon, as the optimization was supposed to be featured in 0.22 but got delayed since it still needs to work out some issues. It is supposed to be a significant performance boost.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2013-10-27T16:55:35Z","Content":"\n\u003Cp\u003EMulticore can only happen if \u003Cstrong\u003EUnity\u003C/strong\u003E do it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EActually Unity and KSP do support multiple cores, but cannot (yet) run a thread across two or more cores, so the physics hammers one core and the other(s) have little to do...\u003C/p\u003E\n"},{"CreatedByName":"kiwiak","CreatedById":82796,"CreatedDateTime":"2013-10-27T16:58:34Z","Content":"\n\u003Cp\u003EThese kind of threads are pointless.\u003C/p\u003E\u003Cp\u003EWe can all say we agree.. atnd thats all. And it will change NOTHING. \u003C/p\u003E\u003Cp\u003EDo you think devs after reading this thread will change samething from their plans?\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2013-10-27T17:00:50Z","Content":"\n\u003Cp\u003EDoesn\u0027t hurt to discuss things, as long as no community rules are broken, and no-one starts moaning that we\u0027ve heard this before \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jwenting","CreatedById":57735,"CreatedDateTime":"2013-10-27T17:51:28Z","Content":"\n\u003Cp\u003EKSP performs quite nicely, if you\u0027re not intent on launching 1000 part monstrosities...\u003C/p\u003E\n"},{"CreatedByName":"Andrew Hansen","CreatedById":82311,"CreatedDateTime":"2013-10-27T18:20:07Z","Content":"\n\u003Cp\u003EI think that performance should be left for version 0.90 and up, since right now, the game is unfinished. If performance were added right now, then as new features come in, it could ruin all the hard work that was put into performance. I say add the features now, then work on perfecting it later.\u003C/p\u003E\u003Cp\u003EKerbal Space Program isn\u0027t too bad performance-wise....\u003C/p\u003E\u003Cp\u003EOf course, I would really like if the game wouldn\u0027t crash at 3.7 gigabytes of data usage. I\u0027ve considered installing Linux so I can have more mods.\u003C/p\u003E\n"},{"CreatedByName":"jfx","CreatedById":37282,"CreatedDateTime":"2013-10-27T18:20:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jwenting\u0022 data-cite=\u0022jwenting\u0022\u003E\u003Cdiv\u003EKSP performs quite nicely, if you\u0027re not intent on launching 1000 part monstrosities...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot really.\u003C/p\u003E\u003Cp\u003E- long loading times.\u003C/p\u003E\u003Cp\u003E- long scene transition times for given (low) visual fidelity\u003C/p\u003E\u003Cp\u003E- generally low FPS for the given visual fidelity\u003C/p\u003E\u003Cp\u003E- inconsistent FPS ( -\u0026gt; stuttering)\u003C/p\u003E\u003Cp\u003E- Ocean LOD causing extreme FPS drops for some people,\u003C/p\u003E\u003Cp\u003E- AA unusable on AMD gpus because of extremely low FPS when looking at the Horizon and in general\u003C/p\u003E\u003Cp\u003E- freezes on soi change \u003C/p\u003E\u003Cp\u003E- lag on timewarp changes in orbit around a body with the new terrain system \u003C/p\u003E\u003Cp\u003E- insane RAM usage,\u003C/p\u003E\n"},{"CreatedByName":"RocketPilot573","CreatedById":62803,"CreatedDateTime":"2013-10-27T18:22:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jfx\u0022 data-cite=\u0022jfx\u0022\u003E\u003Cdiv\u003ENot really.\u003Cp\u003E- long loading times.\u003C/p\u003E\u003Cp\u003E- long scene transition times for given (low) visual fidelity\u003C/p\u003E\u003Cp\u003E- generally low FPS for the given visual fidelity\u003C/p\u003E\u003Cp\u003E- inconsistent FPS ( -\u0026gt; stuttering)\u003C/p\u003E\u003Cp\u003E- Ocean LOD causing extreme FPS drops,\u003C/p\u003E\u003Cp\u003E- AA unusable on ATI because of extremely low FPS when looking at the Horizon and in general\u003C/p\u003E\u003Cp\u003E- freezes on soi change \u003C/p\u003E\u003Cp\u003E- lag on timewarp changes in orbit around a body with the new terrain system \u003C/p\u003E\u003Cp\u003E- insane RAM usage,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETHIS! Unfortunately ALL of this applies to me! Well, all expect RAM usage.\u003C/p\u003E\u003Cp\u003ESeriously, that water lag REALLY needs to go.\u003C/p\u003E\n"},{"CreatedByName":"Galacticruler","CreatedById":58398,"CreatedDateTime":"2013-10-27T18:22:43Z","Content":"\n\u003Cp\u003EWhat jfx said.\u003C/p\u003E\u003Cp\u003EKSP is poorly optomized, and the loading system needs TONS of work.\u003C/p\u003E\n"},{"CreatedByName":"TheExplosionist","CreatedById":90525,"CreatedDateTime":"2013-10-27T18:39:22Z","Content":"\n\u003Cp\u003EThe game engine is artificially limited to 1 CPU thread. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EWe shouldn\u0027t blame the devs though as building an engine from scratch costs a fortune, especially if it takes advantage of all the latest Haswell AVX instructions, GPU compute, 64-bit and DX11.2.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2013-10-27T18:43:50Z","Content":"\n\u003Cp\u003EIt\u0027s not actually, it\u0027s just incapable (at this time) of splitting a thread over two or more cores, but the lions share of the processing is the physics.\u003C/p\u003E\u003Cp\u003EUnity is multi-core, just not multi-threaded yet.\u003C/p\u003E\u003Cp\u003EIt\u0027ll come, as Unity update their framework we\u0027ll see improvements in KSP as well \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2013-10-27T18:53:31Z","Content":"\n\u003Cp\u003EAlso, there are performance updates coming. One of the devs managed to get a 30% speed improvement and some more memory optimizations working, but the update didn\u0027t pass QA in time for 0.22 from what I understand (in fact, I haven\u0027t heard that they\u0027ve definitely passed QA at all at this time).\u003C/p\u003E\n"},{"CreatedByName":"Pulstar","CreatedById":57193,"CreatedDateTime":"2013-10-27T19:19:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eric S\u0022 data-cite=\u0022Eric S\u0022\u003E\u003Cdiv\u003EAlso, there are performance updates coming. One of the devs managed to get a 30% speed improvement and some more memory optimizations working, but the update didn\u0027t pass QA in time for 0.22 from what I understand (in fact, I haven\u0027t heard that they\u0027ve definitely passed QA at all at this time).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELike I said that is still being worked on, I don\u0027t remember if HarveR, C7 or maxmaps said it during one of the recent squadcast streams or in the recent interview on bigsushi.fm (that one has some nice hints at the end on what 0.23 is going to be about, but I digress), but basically it was confirmed that it\u0027s not ready yet for release unfortunately but still being worked on.\u003C/p\u003E\n"},{"CreatedByName":"RocketPilot573","CreatedById":62803,"CreatedDateTime":"2013-10-27T19:19:23Z","Content":"\n\u003Cp\u003EUmm, so will this \u0022multi-threaded\u0022 thing fix water lag, AA instability with ATI cards, long loading times, long scene transitions, stuttering, and freezes on SOI change?\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2013-10-28T02:29:24Z","Content":"\n\u003Cp\u003EThose are all likely to continue to be problems, just most likely nowhere near as noticeable.\u003C/p\u003E\u003Cp\u003EThe other optimisations the devs are doing should help a whole lot though. It\u0027ll be awesome to see how they go.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2013-10-28T03:59:32Z","Content":"\n\u003Cp\u003Eyou usually wait till later in the development to start optimizing. once you have things close to the final product, you profile it, find areas that are wasting time and try to optimize those. thats the science part in computer science. of course there are things that could be done now to help improve things like memory usage. you cant use more threads or produce stable x64 builds at this time, but you can start supporting compressed texture formats which would reduce memory usage and loading times.\u003C/p\u003E\n"},{"CreatedByName":"Tsuki","CreatedById":65519,"CreatedDateTime":"2013-10-28T09:31:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jwenting\u0022 data-cite=\u0022jwenting\u0022\u003E\u003Cdiv\u003EKSP performs quite nicely, if you\u0027re not intent on launching 1000 part monstrosities...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis statement itself is quite contradicting....\u003C/p\u003E\u003Cp\u003EIt is sad that \u003Cstrong\u003EONLY\u003C/strong\u003E 1000 parts bring the game to crawling speeds, even 300 parts make the game perform very slowly. And this is bad performance, compared to what modern PCs with decent physics engines can handle. There are games that can handle (with a decent framerate) up to 1k \u0022parts\u0022 and techdemos that can handle way more. \u003C/p\u003E\u003Cp\u003EBut yeah I do understand swapping a physics engine is no small task but there are unity wrappers for bullet physics(another physics engine) that shows considerable performance boost compared to physx and there are games that managed to swap the engine mid development. \u003C/p\u003E\u003Cp\u003EIMO the only thing KSP needs is better physics performance, everything else is of secondary importance... (but that just my opinion)\u003C/p\u003E\u003Cp\u003EAlso about claims that there is no benefit on offloading physics simulation on GPU: \u003Ca href=\u0022http://gpuscience.com/cs/real-time-opencl-gpu-110k-rigid-bodies-simulation-on-radeon-7970/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://gpuscience.com/cs/real-time-opencl-gpu-110k-rigid-bodies-simulation-on-radeon-7970/\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2013-10-28T09:42:34Z","Content":"\n\u003Cp\u003EYes, it is possible to offload physics calculations to the GPU. However, last I checked, the current build of Unity has not integrated an up-to-date enough version of the PhysX engine for that to be possible.\u003C/p\u003E\n"},{"CreatedByName":"Tsuki","CreatedById":65519,"CreatedDateTime":"2013-10-28T10:01:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022vexx32\u0022 data-cite=\u0022vexx32\u0022\u003E\u003Cdiv\u003EYes, it is possible to offload physics calculations to the GPU. However, last I checked, the current build of Unity has not integrated an up-to-date enough version of the PhysX engine for that to be possible.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is one of my problems, why the need of \u0022integrated physX engine\u0022 which is sadly, the worst (performance wise) option. What I am sugesting is to drop the default PhysX engine, and use something else (bullet engine for example). \u003C/p\u003E\u003Cp\u003ERawbots swaped from physx to bullet engine, mid development:\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/Z23SvOwwyJ0?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EI know is no small task, but it is doable.\u003C/p\u003E\u003Cp\u003EEDIT: vexx32 there were many discussions on forums and irc, and one of the argument that kept popping out was how it is not possible to viably paralellize rigid body solvers, and hence pointless to offload physics to GPU.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-28T12:29:37Z\u0022 title=\u002210/28/2013 12:29  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 28, 2013\u003C/time\u003E by Tsuki\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Epthelyn","CreatedById":57970,"CreatedDateTime":"2013-10-28T13:10:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tsuki\u0022 data-cite=\u0022Tsuki\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt is sad that \u003Cstrong\u003EONLY\u003C/strong\u003E 1000 parts bring the game to crawling speeds, even 300 parts make the game perform very slowly. And this is bad performance, compared to what modern PCs with decent physics engines can handle. There are games that can handle (with a decent framerate) up to 1k \u0022parts\u0022 and techdemos that can handle way more. \u003C/p\u003E\u003Cp\u003EBut yeah I do understand swapping a physics engine is no small task but there are unity wrappers for bullet physics(another physics engine) that shows considerable performance boost compared to physx and there are games that managed to swap the engine mid development. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf a craft has 1000 parts, each part has physics applies to it separately. Subtract a couple of hundred for struts and you have 800 or so parts all requiring physics calculations.\u003C/p\u003E\u003Cp\u003ENow, go load up Garry\u0027s Mod, spawn in 800 props and fire a rocket at that pile of props. It will hurt your framerate considerably unless you have a very good computer.\u003C/p\u003E\u003Cp\u003EAs Sal keeps pointing out, Squad can do next to nothing about this aside from sending angry letters to Unity or completely changing their game engine to something more powerful.\u003C/p\u003E\n"},{"CreatedByName":"Tsuki","CreatedById":65519,"CreatedDateTime":"2013-10-28T14:08:58Z","Content":"\n\u003Cp\u003EEpthelyn read my second post. And no Garry\u0027s mod is not a good example to compare to.\u003C/p\u003E\u003Cp\u003Eno need to change game engine, just physics engine: in my 2nd post I mentioned Rawbots that also uses unity had changed from stock physX to bullet physics engine(while still using unity) quite late in the development (so clearly its not impossible). One thing with unity is that altho you get ready solutions for most the usual game\u0027s challenges(ex: phsyX engine), you are by no means forced to use them, and using other solutions is only a question of effort vs. benefit. And IMO in KSP\u0027s case it would totally be worth the effort... but thats just my opinion.\u003C/p\u003E\u003Cp\u003EI do not want 10s of thousand parts, even 1000 parts running smoothly would be great, and if performance is scaled with modern hardware, would be even better. Remember making a usable space station and docking with it with a SSTO or any vessel while keeping total part count \u0026lt;300 demands some really ugly and not particularly useful designs (unless going heavy with mods to reduce part count). And 300parts already eats performance so much is not really enjoyable.\u003C/p\u003E\u003Cp\u003Ebonus: this is coming to bullet 3.x\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/ZkF4yMmP0R8?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E but even without this new rigid body solvers bullet is faster.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-28T14:29:17Z\u0022 title=\u002210/28/2013 02:29  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 28, 2013\u003C/time\u003E by Tsuki\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AngelLestat","CreatedById":58968,"CreatedDateTime":"2013-10-28T14:11:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jfx\u0022 data-cite=\u0022jfx\u0022\u003E\u003Cdiv\u003ENot really.\u003Cp\u003E- long loading times.\u003C/p\u003E\u003Cp\u003E- long scene transition times for given (low) visual fidelity\u003C/p\u003E\u003Cp\u003E- generally low FPS for the given visual fidelity\u003C/p\u003E\u003Cp\u003E- inconsistent FPS ( -\u0026gt; stuttering)\u003C/p\u003E\u003Cp\u003E- Ocean LOD causing extreme FPS drops for some people,\u003C/p\u003E\u003Cp\u003E- AA unusable on AMD gpus because of extremely low FPS when looking at the Horizon and in general\u003C/p\u003E\u003Cp\u003E- freezes on soi change \u003C/p\u003E\u003Cp\u003E- lag on timewarp changes in orbit around a body with the new terrain system \u003C/p\u003E\u003Cp\u003E- insane RAM usage,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI will keep saying this until some dev reply.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EAll the things in your list can be solved if we remplace most parts for procedural parts that will snap between standard sizes.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAlso we would have a lot of extra parts and sizes to use, our crafts will look more real and any upgrade on the physsics models would be easier to update.\u003C/p\u003E\n"},{"CreatedByName":"Tsuki","CreatedById":65519,"CreatedDateTime":"2013-10-28T14:19:45Z","Content":"\n\u003Cp\u003EAngelLestat although I do agree with you that having stock procedural parts would be nice, there are mods that provide this and making it stock would not change much. However increasing base game performance (mostly physics engine) would mean a whole other level of awesomeness, as the ships having few parts are dull in terms of their looks and how they \u0022disassemble\u0022 when there is a structural failure, not to mention it takes that LEGO feeling out of the game.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-28T14:25:28Z\u0022 title=\u002210/28/2013 02:25  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 28, 2013\u003C/time\u003E by Tsuki\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Roderik","CreatedById":85776,"CreatedDateTime":"2013-10-28T14:35:03Z","Content":"\n\u003Cp\u003Emulticore is really handy they really should just like multithreading and 64bit support but unity doesn\u0027t support that. (fuuu unity for that) cuzz macs always (since 2007) have a 64 bit system which makes them faster. but i think they shouldn\u0027t focus on multicore but graphics card, i have 256mb so maybe if they make an settings in the launcher that is for older computers. (graphics as lowest as possible at least it doesn\u0027t override the 256mb) that would be really nice and it would be an big (even more bigger milestone) update and players like me know what it is to have an pretty good computer but the graphics card SUCKS! \u003C/p\u003E\u003Cp\u003E(before i posted this i was writing about that multicore wasn\u0027t handy but it frickin is)\u003C/p\u003E\n"}]}