{"TopicId":99170,"ForumId":16,"TopicTitle":"How does KSP handle out of range vessels?","CreatedByName":"percyPrune","CreatedById":130676,"CreatedDateTime":"2015-02-09T09:12:00Z","PageNum":1,"Articles":[{"CreatedByName":"percyPrune","CreatedById":130676,"CreatedDateTime":"2015-02-09T09:12:00Z","Content":"\n\u003Cp\u003EDunno whether this comes under gameplay, mods or general discussion but here goes... I have a couple of large vessels in orbit, each with several hundred parts, which cause quite a lag-fest when in view. However, is there any performance hit in tracking a large vessel over a small one while it\u0027s out of sight?\u003C/p\u003E\u003Cp\u003EPresumably it takes KSP time to read through and handle all the parts every time it updates the persistent.sfs file even when the vessel is out of view. Is it constantly updating the whole vessel in any other file while I\u0027m playing elsewhere?\u003C/p\u003E\u003Cp\u003EThe reason I ask is that I have written an editor to quickly remove a vessel (including the trajectory data) from the persistent.sfs so it can be pasted into another save and I wonder if it is worth extending the editor to insert a \u0027placeholder\u0027 (eg a single probe core) into the current file to carry on orbiting out of sight, while freeing up CPU capacity for my current mission.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-09T10:30:40Z\u0022 title=\u002202/09/2015 10:30  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 9, 2015\u003C/time\u003E by percyPrune\u003C/strong\u003E\n\u003Cbr\u003EFormatting went to pot!\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-09T09:40:44Z","Content":"\n\u003Cp\u003EPhysics for a vessel are unloaded when it get\u0027s outside of a range of about 2.5 km around the active vessel (the one you are controlling at the moment). It will go \u0027on-rails\u0027. That means only its orbit is calculated, nothing else (just like when you activate timewarp in space). When the periapsis is at \u0026lt;30 km above ground it will get deleted because the devs said, that one can assume a burn-up or crash. Above 30 km the vessel will be perfectly fine as the atmosphere doesn\u0027t have any effect on the craft without loaded physics.\u003C/p\u003E\u003Cp\u003EThat \u0027on-rails\u0027 mode costs almost no computing power. Some people say they feel a performance hit when they have a lot of vessels on-rail. I never experienced that (even with 20\u002B vessels).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-09T09:45:23Z\u0022 title=\u002202/09/2015 09:45  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 9, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SaturnV","CreatedById":79006,"CreatedDateTime":"2015-02-09T10:07:10Z","Content":"\n\u003Cp\u003EI found my lower stage should survived after I jettison it.\u003C/p\u003E\u003Cp\u003EMaybe it skips the whole atmosphere due to time warp. \u003C/p\u003E\u003Cp\u003EMy final stage was on LKO so I can time warp at 50x at most, however. I don\u0027t think that\u0027s enough to skip the re-entry.\u003C/p\u003E\n"},{"CreatedByName":"percyPrune","CreatedById":130676,"CreatedDateTime":"2015-02-09T10:33:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eonly its orbit is calculated, nothing else \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the quick reply. I take it that the individual parts aren\u0027t read then.\u003C/p\u003E\n"},{"CreatedByName":"Sirrobert","CreatedById":70591,"CreatedDateTime":"2015-02-09T10:33:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SaturnV\u0022 data-cite=\u0022SaturnV\u0022\u003E\u003Cdiv\u003EI found my lower stage should survived after I jettison it.\u003Cp\u003EMaybe it skips the whole atmosphere due to time warp. \u003C/p\u003E\u003Cp\u003EMy final stage was on LKO so I can time warp at 50x at most, however. I don\u0027t think that\u0027s enough to skip the re-entry.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat depends. If you are in timewarp and your active craft enters the atmosphere you are pulled out of warp. But unloaded debris doesn\u0027t, so it will keep going through the atmosphere on rails. On rails means no physics calculated, and thus no drag, and thus no effect from the atmosphere\u003C/p\u003E\n"},{"CreatedByName":"tomf","CreatedById":57809,"CreatedDateTime":"2015-02-09T11:19:22Z","Content":"\n\u003Cp\u003EI think Kerbal updates the persistance file every time you change scene or at other times when it flashes up saving.\u003C/p\u003E\u003Cp\u003EWriting even a large persist file doesn\u0027t take very long, the time it takes seems pretty insignificant and it might even be doing it on another thread.\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2015-02-09T12:38:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022percyPrune\u0022 data-cite=\u0022percyPrune\u0022\u003E\u003Cdiv\u003EThanks for the quick reply. I take it that the individual parts aren\u0027t read then.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. Whether it\u0027s a single piece of debris or a vessel of 2000 parts makes no difference when it is \u0022on rails\u0022. You can still bog down your game by having many individal vessels (e.g. accumulate lots of debris).\u003C/p\u003E\n"},{"CreatedByName":"AlexinTokyo","CreatedById":104401,"CreatedDateTime":"2015-02-09T12:42:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022percyPrune\u0022 data-cite=\u0022percyPrune\u0022\u003E\u003Cdiv\u003EThanks for the quick reply. I take it that the individual parts aren\u0027t read then.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECorrect.\u003C/p\u003E\u003Cp\u003EFor unfocused, on-rails craft, a few checks are made.\u003C/p\u003E\u003Cp\u003EOne is sphere-of-influence - ships can change SoI in the background and the orbits are recalculated in the new SoI. This is why, at high warps, a ship\u0027s orbit after SoI cahnge can be very different from the predicted trajectory before the change.\u003C/p\u003E\u003Cp\u003EAnother is a deletion check - if the ship has a negative altitude on any body (i.e. sub-surface) or is in atmosphere with an atmospheric pressure greater than 1% of the datum (or sea level) pressure for that body (this translates to about 23 km on Kerbin) is deleted, as it is deemed to have crashed and been destroyed.\u003C/p\u003E\u003Cp\u003EI can\u0027t think of any other checks that are made.\u003C/p\u003E\u003Cp\u003EThe upshot is that the number of ships may have a performance cost (those checks aren\u0027t free), but the number of parts does not, for unloaded (on-rails) ships.\u003C/p\u003E\n"},{"CreatedByName":"percyPrune","CreatedById":130676,"CreatedDateTime":"2015-02-09T14:30:16Z","Content":"\n\u003Cp\u003EThanks again. Question comprehensively dealt with!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eif the ship has a negative altitude \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for that phrase, Alex. I will add it to \u0022Sudden existence failure\u0022 and \u0022Excess of gravity\u0022 in my mission reports (i.e list of excuses) \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"tsotha","CreatedById":120361,"CreatedDateTime":"2015-02-09T23:02:38Z","Content":"\n\u003Cp\u003ESize doesn\u0027t matter for trajectory calculations in a vacuum. Beyond that, I don\u0027t think they calculate much of anything for ships that don\u0027t have focus. A few days ago I sent two ships to the same planet and tried to aerobrake them both at the same time. Only the one with focus slowed down. The other one continued on as if the atmosphere didn\u0027t exist at all.\u003C/p\u003E\u003Cp\u003EAlso, I was able to defeat atmospheric friction at Duna by having the pilot go on EVA. Not sure what happened there.\u003C/p\u003E\n"},{"CreatedByName":"Tank Buddy","CreatedById":69635,"CreatedDateTime":"2015-02-09T23:16:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003EThat \u0027on-rails\u0027 mode costs almost no computing power. Some people say they feel a performance hit when they have a lot of vessels on-rail. I never experienced that (even with 20\u002B vessels).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve had more than 100 flights ongoing at once, and I\u0027ll tell you there is a decrease in performance.\u003C/p\u003E\n"},{"CreatedByName":"FleshJeb","CreatedById":111640,"CreatedDateTime":"2015-02-10T01:22:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tank Buddy\u0022 data-cite=\u0022Tank Buddy\u0022\u003E\u003Cdiv\u003EI\u0027ve had more than 100 flights ongoing at once, and I\u0027ll tell you there is a decrease in performance.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI get it at about 10, but I\u0027m playing below the minimum spec, and I don\u0027t think KAC is helping either.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-10T05:02:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tank Buddy\u0022 data-cite=\u0022Tank Buddy\u0022\u003E\u003Cdiv\u003EI\u0027ve had more than 100 flights ongoing at once, and I\u0027ll tell you there is a decrease in performance.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat is the number of debris flying around? Each debris object acts like a vessel until it gets deleted. I saw people on YouTube which build a Kessler syndrome and it didn\u0027t look like they had a problem with the performance. But we can assume they have a pretty powerful computer which may able to run a higher amount of vessels without slowdowns.\u003C/p\u003E\u003Cp\u003EFor example:\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/VH4nyJp4Wyw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EYeah, his time display is yellow meaning the simulation starts to slow down. But look at the number of debris! I can\u0027t read it for sure but it appears to be \u0026gt;3000. Also his computer had to record a video at the same time so the slow down could be caused by that. I don\u0027t know for sure.\u003C/p\u003E\n"}]}