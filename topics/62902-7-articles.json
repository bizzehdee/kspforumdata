{"TopicId":62902,"ForumId":36,"TopicTitle":"[1.8.x to 1.12.x] kRPC: Remote Procedure Call Server (v0.5.1, 2nd March 2023)","CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2014-02-11T20:00:32Z","PageNum":7,"Articles":[{"CreatedByName":"Borogove","CreatedById":8752,"CreatedDateTime":"2015-03-19T18:18:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003EI\u0027m currently writing a tutorial for the documentation site that does exactly this - so watch this space!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExcellent. In particular, I\u0027m having trouble figuring out how to maintain surface-relative retrograde orientation during descent/landing (what MechJeb SmartASS mode calls SVEL-).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-19T21:31:21Z\u0022 title=\u002203/19/2015 09:31  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 19, 2015\u003C/time\u003E by Borogove\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-20T00:43:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Borogove\u0022 data-cite=\u0022Borogove\u0022\u003E\u003Cdiv\u003EExcellent. In particular, I\u0027m having trouble figuring out how to maintain surface-relative retrograde orientation during descent/landing (what MechJeb SmartASS mode calls SVEL-).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis should do it:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhile True:\u003Cbr\u003E    # Get the velocity vector relative to the surface of the body\u003Cbr\u003E    velocity = vessel.flight(vessel.orbit.body.reference_frame).velocity\u003Cbr\u003E    # Get the opposite direction\u003Cbr\u003E    retrograde = (-velocity[0], -velocity[1], -velocity[2])\u003Cbr\u003E    # Set the direction in the autopilot\u003Cbr\u003E    vessel.auto_pilot.set_direction(retrograde, vessel.orbit.body.reference_frame)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs the velocity vector will change during descent, you\u0027ll need to keep feeding updates to the autopilot (hence the while loop).\u003C/p\u003E\n"},{"CreatedByName":"Borogove","CreatedById":8752,"CreatedDateTime":"2015-03-21T00:01:22Z","Content":"\n\u003Cp\u003EAccessing vessel.thrust either directly or via add-stream throws an exception:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E  File \u0022/Users/russell/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/kRPC/scripts/mission.py\u0022, line 199, in update\u003Cbr\u003E    self.update_telemetry()\u003Cbr\u003E  File \u0022/Users/russell/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/kRPC/scripts/mission.py\u0022, line 190, in update_telemetry\u003Cbr\u003E    thrust = self.vessel.thrust\u003Cbr\u003E  File \u0022/Library/Python/2.7/site-packages/krpc/service.py\u0022, line 167, in \u0026lt;lambda\u0026gt;\u003Cbr\u003E    fget = lambda s: getattr(s, _to_snake_case(getter.name))()\u003Cbr\u003E  File \u0022/Library/Python/2.7/site-packages/krpc/service.py\u0022, line 154, in \u0026lt;lambda\u0026gt;\u003Cbr\u003E    return_type=return_type)\u003Cbr\u003E  File \u0022/Library/Python/2.7/site-packages/krpc/service.py\u0022, line 24, in _invoke\u003Cbr\u003E    param_names, param_types, return_type)\u003Cbr\u003E  File \u0022/Library/Python/2.7/site-packages/krpc/client.py\u0022, line 103, in _invoke\u003Cbr\u003E    raise RPCError(response.error)\u003Cbr\u003Ekrpc.error.RPCError: KRPC.Service.RPCException: Procedure \u0027SpaceCenter.Vessel_get_Thrust\u0027 threw an exception. System.NullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at KRPCSpaceCenter.Services.Vessel.get_Thrust () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception\u0026amp;)\u003Cbr\u003E  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KRPC.Service.Services.HandleRequest (KRPC.Service.Scanner.ProcedureSignature procedure, System.Object[] arguments) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KRPC.Service.Services.HandleRequest (KRPC.Service.Scanner.ProcedureSignature procedure, KRPC.Schema.KRPC.Request request) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KRPC.Service.RequestContinuation.Run () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at KRPC.KRPCServer.ExecuteContinuation (KRPC.Service.RequestContinuation continuation) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-21T00:31:47Z","Content":"\n\u003Cp\u003EOops! Here\u0027s a fixed version: \u003Ca href=\u0022https://github.com/djungelorm/krpc/releases/tag/v0.1.4-hotfix1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/releases/tag/v0.1.4-hotfix1\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-03-21T01:52:57Z","Content":"\n\u003Cp\u003Eflight().velocity (and the related speed values) seems to be stuck to (0.0, 0.0, 0.0)\u003C/p\u003E\n"},{"CreatedByName":"Borogove","CreatedById":8752,"CreatedDateTime":"2015-03-21T02:23:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kerbart\u0022 data-cite=\u0022Kerbart\u0022\u003E\u003Cdiv\u003Eflight().velocity (and the related speed values) seems to be stuck to (0.0, 0.0, 0.0)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETry a different frame of reference -- you\u0027re using a vessel-relative frame, and the vessel doesn\u0027t move relative to itself.\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-03-21T12:50:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Borogove\u0022 data-cite=\u0022Borogove\u0022\u003E\u003Cdiv\u003ETry a different frame of reference -- you\u0027re using a vessel-relative frame, and the vessel doesn\u0027t move relative to itself.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll try. What throws me off is that altitude, etc do work. One would think those would be zero too then?\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEDIT\u003C/strong\u003E:\u003C/p\u003E\u003Cp\u003EIt was a good suggestion, but alas. Velocity is zero, independent of the reference frame used. Both surface_reference_frame and orbital_reference_frame (well, more specifically vessel.flight(vessel.surface_reference_frame).velocity -- for the nitpickers) return (0.0, 0.0, 0.0) when the vessel is clearly moving.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-21T13:06:56Z\u0022 title=\u002203/21/2015 01:06  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 21, 2015\u003C/time\u003E by Kerbart\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-21T20:55:07Z","Content":"\n\u003Cp\u003EBoth vessel.surface_reference_frame and vessel.orbital_reference_frame are fixed relative to the vessel (just like vessel.reference_frame), so will also return 0 for the velocity. (The way these reference frames differ is the directions their axes point in).\u003C/p\u003E\u003Cp\u003ETo get surface relative velocity, you need the reference frame that is fixed relative to the planet (and rotates with the planet):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evessel.flight(vessel.orbit.body.reference_frame).velocity\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor orbital velocity, you need a reference frame fixed relative to the planet being orbited, but which does not rotate with the body:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evessel.flight(vessel.orbit.body.non_rotating_reference_frame).velocity\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ERegarding altitude - this and some other properties aren\u0027t dependent on the reference frame. The reference frame is only needed for position, direction and velocity vectors.\u003C/p\u003E\u003Cp\u003EHope that helps! Btw a tutorial covering this rather confusing stuff, and a new version with lots of improvements will be released some time this weekend \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-03-21T21:14:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003EBoth vessel.surface_reference_frame and vessel.orbital_reference_frame are fixed relative to the vessel (just like vessel.reference_frame), so will also return 0 for the velocity. (The way these reference frames differ is the directions their axes point in).\u003Cp\u003ETo get surface relative velocity, you need the reference frame that is fixed relative to the planet (and rotates with the planet):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evessel.flight(vessel.orbit.body.reference_frame).velocity\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor orbital velocity, you need a reference frame fixed relative to the planet being orbited, but which does not rotate with the body:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evessel.flight(vessel.orbit.body.non_rotating_reference_frame).velocity\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you very much! I hope you can endure my questions! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-21T21:21:16Z","Content":"\n\u003Cp\u003EOf course! Questions are actually really helpful as they help me make it better by highlighting bits that are confusingly designed.\u003C/p\u003E\u003Cp\u003EFor example, I realised getting the vessel to point surface retrograde was rather unwieldy, so I\u0027m adding a new reference frame to make it a whole lot better (the \u0022workaround\u0022 solution \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/69313-WIP-0-90-kRPC-Remote-Procedure-Call-Server-v0-1-4-9th-March-2015?p=1795493\u0026amp;viewfull=1#post1795493\u0022 rel=\u0022external nofollow\u0022\u003EI posted a while back\u003C/a\u003E requires a horrid while loop).\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-22T16:43:40Z","Content":"\n\u003Cp\u003EI\u0027ve released version 0.1.5 - links updated in the first post.\u003C/p\u003E\u003Cp\u003EThe list of changes is quite long, but the most notable things are:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EThe server now persists across game scene changes\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIntegration with FAR and RemoteTech API\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdded some tutorials to the documentation: \u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/tutorials.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://djungelorm.github.io/krpc/docs/tutorials.html\u003C/a\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EReference frame improvements:\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003ETutorial: \u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/tutorials/reference-frames.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://djungelorm.github.io/krpc/docs/tutorials/reference-frames.html\u003C/a\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed lots of bugs\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdded Vessel.surface_velocity_reference_frame and Node.orbital_reference_frame\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERemoved Vessel.non_rotating_reference_frame and Body.surface_reference_frame\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe default reference frame for Vessel.flight() and the auto-pilot is now Vessel.surface_reference_frame\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EVisual debugging - you can draw direction vectors in-game to visualize what\u0027s going on\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Borogove","CreatedById":8752,"CreatedDateTime":"2015-03-22T19:04:45Z","Content":"\n\u003Cp\u003EWow, great job on the new documentation on reference frames. Three thumbs up.\u003C/p\u003E\u003Cp\u003ENow the only feature I\u0027m looking for is the ability to inspect and interact with parts on the vessel. I suppose the variety of different kinds of parts might make this challenging (I\u0027m guessing that protocol buffers don\u0027t magically support C# introspection), but the use cases I currently have in mind are:\u003C/p\u003E\u003Cp\u003E* Activate parachutes while trying to land, regardless of where the parachutes are in the vessel staging sequence\u003C/p\u003E\u003Cp\u003E* Making a good estimate of vessel delta-V budget by walking up the staging sequence and identifying engines and fuel tanks\u003C/p\u003E\u003Cp\u003E* Finding docking ports and setting them as the control-from-here and target points\u003C/p\u003E\u003Cp\u003E* Finding and activating science parts\u003C/p\u003E\u003Cp\u003EBasically, I\u0027m used to using Mechjeb, and am trying to get my script to be a more autonomous vessel controller that can run as much of a mission without human input as possible, with a very high-level input command structure.\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-22T21:00:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Borogove\u0022 data-cite=\u0022Borogove\u0022\u003E\u003Cdiv\u003EWow, great job on the new documentation on reference frames. Three thumbs up.\u003Cp\u003ENow the only feature I\u0027m looking for is the ability to inspect and interact with parts on the vessel. I suppose the variety of different kinds of parts might make this challenging (I\u0027m guessing that protocol buffers don\u0027t magically support C# introspection), but the use cases I currently have in mind are:\u003C/p\u003E\u003Cp\u003E* Activate parachutes while trying to land, regardless of where the parachutes are in the vessel staging sequence\u003C/p\u003E\u003Cp\u003E* Making a good estimate of vessel delta-V budget by walking up the staging sequence and identifying engines and fuel tanks\u003C/p\u003E\u003Cp\u003E* Finding docking ports and setting them as the control-from-here and target points\u003C/p\u003E\u003Cp\u003E* Finding and activating science parts\u003C/p\u003E\u003Cp\u003EBasically, I\u0027m used to using Mechjeb, and am trying to get my script to be a more autonomous vessel controller that can run as much of a mission without human input as possible, with a very high-level input command structure.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I agree a parts API is an essential feature. I had a go at implementing something a while back, never quite finished it, but the design was as follows:\u003C/p\u003E\u003Cp\u003EAdd the following to the Vessel class:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EVessel.parts - returns a list of Part objects, one for every part in the vessel\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EVessel.root_part - the root part, from which you can walk the tree of parts that make up the vessel\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAdd a Part class with methods/properties including:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EPart.name - the name of the part, e.g. \u0022mk1pod\u0022\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.parent and Part.children - for traversing the tree of parts that make up the vessel\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.modules - a list of string names of the part modules that the part has (gives an indication of the type of part, e.g. engine/solar panel etc.)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.actions - returns a list of toggle-able actions, as strings, such as \u0022Activate Engine\u0022 or \u0022Toggle Torque\u0022\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.trigger_action (string actionName)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.fields - a dictionary mapping names of fields to their values (for example this would contain the part\u0027s temperature, and engines current thrust or other custom data)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.mass\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPart.stage - which stage is the part in?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E... and other general properties\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAnd maybe a few helper functions to make some common use cases a bit less cumbersome, such as getting the dry mass of a part (without resources)\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThese general lists of action/field names should mean that the API will automatically pick up new functionality added by mods etc. And I think this design will support the use cases you suggested.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-22T21:01:01Z\u0022 title=\u002203/22/2015 09:01  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 22, 2015\u003C/time\u003E by djungelorm\u003C/strong\u003E\n\u003Cbr\u003Etypo\n\u003C/span\u003E\n"},{"CreatedByName":"Borogove","CreatedById":8752,"CreatedDateTime":"2015-03-22T21:33:51Z","Content":"\n\u003Cp\u003EYeah, that looks like it would do the trick.\u003C/p\u003E\u003Cp\u003EAny plans to get onto CKAN?\u003C/p\u003E\u003Cp\u003EWhat\u0027s the best way for me to give you bug reports -- github?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-22T21:50:11Z\u0022 title=\u002203/22/2015 09:50  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 22, 2015\u003C/time\u003E by Borogove\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-22T21:54:16Z","Content":"\n\u003Cp\u003EIt\u0027s already on CKAN \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd, yeah, bug reports are best posted on the github issues page.\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-29T15:45:54Z","Content":"\n\u003Cp\u003EVersion 0.1.6 has been released! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EDownload link: \u003Ca href=\u0022https://kerbalstuff.com/mod/636/kRPC:%20Remote%20Procedure%20Call%20Server\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://kerbalstuff.com/mod/636/kRPC:%20Remote%20Procedure%20Call%20Server\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe main changes are:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EParts API\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003ETutorial here: \u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/tutorials/parts.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://djungelorm.github.io/krpc/docs/tutorials/parts.html\u003C/a\u003E\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EYou can now inspect the parts that make up a vessel, and traverse the parts tree\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EInteract with part fields, methods and actions (i.e. everything that appears in the right click menu of a part). This should also work with functionality added to parts via mods.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EClasses to make interaction with of types of stock part simple, including: engines, decouplers, docking ports, landing legs, landing gear, parachutes, ...\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EChange which part the vessel is controlled from\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAll the tools you should need to write a docking autopilot!\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E[*]Ability to get/set the current target\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd for those of you wanting to write your own client, I\u0027ve included the source for the protocol buffer messages, and compiled versions for Python, Java and C\u002B\u002B.\u003C/p\u003E\n"},{"CreatedByName":"Vivero","CreatedById":140195,"CreatedDateTime":"2015-03-30T17:00:19Z","Content":"\n\u003Cp\u003EGreat mod! I\u0027m currently tinkering with writing a C\u002B\u002B client for this. I should have something to show for it soon!\u003C/p\u003E\u003Cp\u003EI was wondering if it is at all possible to issue Control commands to non-active, nearby vessels? i.e. by first obtaining a list of Vessels, then pick a vessel that is not the active vessel, send it pitch/yaw/roll/throttle commands to it? Will the vessel react to these commands?\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-30T17:47:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vivero\u0022 data-cite=\u0022Vivero\u0022\u003E\u003Cdiv\u003EGreat mod! I\u0027m currently tinkering with writing a C\u002B\u002B client for this. I should have something to show for it soon!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECool \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vivero\u0022 data-cite=\u0022Vivero\u0022\u003E\u003Cdiv\u003EI was wondering if it is at all possible to issue Control commands to non-active, nearby vessels? i.e. by first obtaining a list of Vessels, then pick a vessel that is not the active vessel, send it pitch/yaw/roll/throttle commands to it? Will the vessel react to these commands?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not possible at the moment - only the active vessel can be controlled. Shouldn\u0027t be too difficult to add this feature though.\u003C/p\u003E\n"},{"CreatedByName":"Aghanim","CreatedById":76587,"CreatedDateTime":"2015-03-31T01:22:58Z","Content":"\n\u003Cp\u003ECan kRPC use Python 3? And how do I connect remotely?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-31T01:25:27Z\u0022 title=\u002203/31/2015 01:25  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 31, 2015\u003C/time\u003E by Aghanim\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-03-31T12:20:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Aghanim\u0022 data-cite=\u0022Aghanim\u0022\u003E\u003Cdiv\u003ECan kRPC use Python 3?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EkRPC doesn\u0027t currently support python 3 due to it\u0027s dependency of Google\u0027s protobuf library. However, a quick Google search reveals Google has recently released a new version that supports python 3 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027ll have a go at upgrading the library.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Aghanim\u0022 data-cite=\u0022Aghanim\u0022\u003E\u003Cdiv\u003EAnd how do I connect remotely?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETo connect remotely (over a local network) you first need to configure the server to listen on a network interface that\u0027s connected to the network. This can be done from the server window pictured here: \u003Ca href=\u0022http://djungelorm.github.io/krpc/docs/getting-started.html#installation\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://djungelorm.github.io/krpc/docs/getting-started.html#installation\u003C/a\u003E Click on the button next to \u0022Address\u0022 and it\u0027ll give you a list of IP addresses for the network interfaces on your machine. You can also enter the IP address manually.\u003C/p\u003E\u003Cp\u003EYou also need to get the client to connect to the correct IP address. For example the following, but replaced with your IP address:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eimport krpc\u003Cbr\u003Econn = krpc.connect(address=\u0027123.123.123.123\u0027)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you\u0027re trying to do this over the internet, you\u0027ll probably need to set up port forwarding on your router and get the client to connect to your routers WAN IP - depends on your set up though.\u003C/p\u003E\n"},{"CreatedByName":"Vivero","CreatedById":140195,"CreatedDateTime":"2015-04-01T06:19:37Z","Content":"\n\u003Cp\u003EAs promised, I\u0027ve put together a prototype C\u002B\u002B client. See my github repo for more info: \u003Ca href=\u0022https://github.com/Vivero/KNav\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Vivero/KNav\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe repo includes a general purpose interface library I\u0027ve named KRPCI, which interacts with the RPC server (I haven\u0027t implemented any support for the stream server yet).\u003C/p\u003E\u003Cp\u003EI then wrote a tool which queries the SpaceCenter service (or any service, for that matter), and generates a header and source file for an auto-generated class, which implements all the procedures/enums/classes provided by that service. Using this tool, I create the KRPCI_SpaceCenter library, which -- as you may have guessed -- provides function calls to all the procedures provided by the SpaceCenter service.\u003C/p\u003E\u003Cp\u003EFinally, as a use-case example, I created KNav, a small auto-pilot program which currently only has one function: it maintains your craft in a fixed-altitude hover. I\u0027m looking forward to expanding its capabilities. Especially with the new Parts API you\u0027ve added on!\u003C/p\u003E\u003Cp\u003EThis code is very very new, and I haven\u0027t tested a lot of things. Currently it only runs and compiles on Windows. Hopefully any other developers looking to implement their own C\u002B\u002B autopilot programs can take advantage of this code.\u003C/p\u003E\n"},{"CreatedByName":"funkey100","CreatedById":73931,"CreatedDateTime":"2015-04-02T03:38:43Z","Content":"\n\u003Cp\u003EDoes anyone know how to get all the completions in Visual Studio Community 2013 with Python Tools? Only some of them appear for me, yet everything works.\u003C/p\u003E\n"},{"CreatedByName":"Borogove","CreatedById":8752,"CreatedDateTime":"2015-04-02T04:28:07Z","Content":"\n\u003Cp\u003EWhat exception will be raised if you use a FAR-dependent variable like flight.terminal_velocity while FAR isn\u0027t installed?\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-04-02T08:20:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Borogove\u0022 data-cite=\u0022Borogove\u0022\u003E\u003Cdiv\u003EWhat exception will be raised if you use a FAR-dependent variable like flight.terminal_velocity while FAR isn\u0027t installed?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe python client will throw a krpc.error.RPCError exception. (In fact that\u0027s the only thing a failed RPC will throw - the message will differ based on the actual error though.) You can check if FAR is installed using conn.space_center.far_available\u003C/p\u003E\u003Cp\u003E--------- EDIT: -----------\u003C/p\u003E\u003Cp\u003EThis got me thinking. Maybe kRPC should allow custom exception types to be defined in a service, and expose them to the client. Then you could use whatever exception handling mechanism the client language has to differentiate between different sorts of errors.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-02T09:34:28Z\u0022 title=\u002204/02/2015 09:34  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 2, 2015\u003C/time\u003E by djungelorm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-04-02T09:19:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022funkey100\u0022 data-cite=\u0022funkey100\u0022\u003E\u003Cdiv\u003EDoes anyone know how to get all the completions in Visual Studio Community 2013 with Python Tools? Only some of them appear for me, yet everything works.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOooo interesting, my guess is that it\u0027s because the classes and methods are dynamically created when the client connects to the server. I don\u0027t have experience with VS, so I don\u0027t know if there is an easy workaround for this.\u003C/p\u003E\n"}]}