{"TopicId":201736,"ForumId":110,"TopicTitle":"Developer Insights #9 \u2013 Orbit Tessellation","CreatedByName":"Intercept Games","CreatedById":210281,"CreatedDateTime":"2021-04-15T08:00:04Z","PageNum":1,"Articles":[{"CreatedByName":"Intercept Games","CreatedById":210281,"CreatedDateTime":"2021-04-15T08:00:04Z","Content":"\n\u003Cp data-renderer-start-pos=\u0022181\u0022\u003E\nHello all, I\u2019m Johannes Peter \u2013 A programmer on Kerbal Space Program 2 \u2013 and I love solving interesting problems!\n\u003C/p\u003E\n\u003Cp\u003E\nThe problems we face in game development rarely have a single \u201Ccorrect\u201D answer. The more specialized your game is, the more specialized your problems are, and the more creative your solutions need to be. As a rocketry simulator on an interplanetary scale, Kerbal Space Program has already tackled a wealth of \u003Cspan data-id=\u002273de8fe0-b826-4b7c-ab7f-ada88936c5ed\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u002273de8fe0-b826-4b7c-ab7f-ada88936c5ed\u0022\u003Eunique programming challenges\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nToday I want to share a solution I\u2019ve worked on for a problem that is fairly unique to KSP: \u003Cem\u003EHow to draw accurate orbits that look stellar regardless of where they\u2019re viewed from?\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u2019ll briefly cover a standard approach for drawing orbits, touch on some of the issues with that approach, and then look at the solution that KSP2 is using now: \u003Cem\u003Escreen space orbit tessellation.\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis dev diary will get a bit into the technical side of KSP2\u2019s development, with diagrams to help illustrate some of the core concepts. We will mainly focus on this test scene of Kerbin orbiting Kerbol:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Orbital Trajectories ksp\u0022 data-ratio=\u002256.25\u0022 width=\u0022768\u0022 src=\u0022https://images.ctfassets.net/wn7ipiv9ue5v/2TTKfU2GzGO9rC7rHLLB8i/41a0f391e3a236199d7c8512d24e3622/image-20210316-111746-768x432.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan data-id=\u00220d99aed7-43a6-4519-9870-21d597ca2537\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00220d99aed7-43a6-4519-9870-21d597ca2537\u0022 style=\u0022font-weight: 300;\u0022\u003EQuick disclaimer\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv class=\u0022ak-editor-panel sc-gqPbQI bFxiSd\u0022 data-panel-type=\u0022info\u0022\u003E\n\u003Cdiv class=\u0022ak-editor-panel__content\u0022\u003E\n\u003Cul\u003E\u003Cli data-renderer-start-pos=\u00221288\u0022\u003E\nAll visuals were created specifically for this dev diary, and are in no way representative of how \u003Cem data-renderer-mark=\u0022true\u0022\u003Eanything\u003C/em\u003E may look in the final game.\u003Cbr\u003E\nIt\u2019s just programmer art.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00221454\u0022\u003E\nAll code, while functional, is simplified for clarity.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00221512\u0022\u003E\nAll orbits are to scale and celestial bodies are a constant screen size to make them easy to see.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp data-renderer-start-pos=\u00221770\u0022\u003E\n\u003Cspan data-id=\u00224cb393d1-57b4-4273-b9e7-a9adef0a9511\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00224cb393d1-57b4-4273-b9e7-a9adef0a9511\u0022\u003E\u003Cstrong\u003EOrbital Trajectories in KSP\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI hope it isn\u2019t too \u003Cem data-renderer-mark=\u0022true\u0022\u003E\u003Cspan data-id=\u00224cb393d1-57b4-4273-b9e7-a9adef0a9511\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00224cb393d1-57b4-4273-b9e7-a9adef0a9511\u0022\u003Ehyperbolic\u003C/span\u003E\u003C/em\u003E\u003Cspan data-id=\u00224cb393d1-57b4-4273-b9e7-a9adef0a9511\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00224cb393d1-57b4-4273-b9e7-a9adef0a9511\u0022\u003E of me to say, but KSP is all about orbits. Building, flying, and crashing rockets are all core to KSP\u2019s identity, but if I had to describe KSP with one defining characteristic, it would be that it teaches you how orbits work on an intuitive level, just by playing it.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWhile there are definitely exceptions (you know who you are), most players depend on the Map View to plan their journeys from launchpad A to crater B, so being able to display lots of orbits without visual artifacts is critical.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EWhat is an Orbit?\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAn orbit is the path that an object takes as it moves through space while under the gravitational influence of other objects around it. Real life orbits are chaotic and not deterministic. Without performing many small iterative calculations, it is generally not possible to say for certain where an object will be in space at an arbitrary point in time.\n\u003C/p\u003E\n\u003Cp data-renderer-start-pos=\u00222839\u0022\u003E\nThis is one of the reasons why KSP simplifies its orbital mechanics so that generally you\u2019re only within the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Sphere_of_influence_(astrodynamics)\u0022 rel=\u0022external nofollow\u0022\u003Esphere of influence\u003C/a\u003E of one celestial body at a time. These kinds of orbits are known as \u003Ca href=\u0022https://en.wikipedia.org/wiki/Kepler_orbit\u0022 rel=\u0022external nofollow\u0022\u003EKepler orbits\u003C/a\u003E\u00A0\u003Cspan data-id=\u0022b8bd727d-f37d-4c4d-89a1-82c31c836047\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022b8bd727d-f37d-4c4d-89a1-82c31c836047\u0022\u003Ewhere \u003C/span\u003Eposition and velocity at any point on the orbit can be described using \u003Ca href=\u0022https://en.wikipedia.org/wiki/Parametric_equation\u0022 rel=\u0022external nofollow\u0022\u003Eparametric equations\u003C/a\u003E. With a parametric equation we can plug in a parameter\u003Cspan data-id=\u00222e23e7e9-0e5d-4ae6-b2c5-321b73908f91\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00222e23e7e9-0e5d-4ae6-b2c5-321b73908f91\u0022\u003E\u2014\u003C/span\u003Elike a \u003Ca href=\u0022https://en.wikipedia.org/wiki/Epoch_(astronomy)\u0022 rel=\u0022external nofollow\u0022\u003Etime\u003C/a\u003E or an \u003Ca href=\u0022https://en.wikipedia.org/wiki/True_anomaly\u0022 rel=\u0022external nofollow\u0022\u003Eangle\u003C/a\u003E\u003Cspan data-id=\u0022affd4c8f-428f-4902-a6f2-e9836a59cdf6\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022affd4c8f-428f-4902-a6f2-e9836a59cdf6\u0022\u003E\u2014and \u003C/span\u003Eget an accurate position or velocity.\n\u003C/p\u003E\n\u003Cp\u003E\nIf a curve can be described as a parametric equation it is easy for us to draw.\n\u003C/p\u003E\n\u003Cp data-renderer-start-pos=\u00222839\u0022\u003E\n\u003Cstrong\u003EDrawing Parametric Curves\u003C/strong\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EIn general, to draw a parametric curve we need to:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli data-renderer-start-pos=\u00223697\u0022\u003E\nChoose a \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Estart\u003C/span\u003E\u003C/strong\u003E and \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eend\u003C/span\u003E\u003C/strong\u003E parameter, as well as how many \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Epoints\u003C/span\u003E\u003C/strong\u003E we want to generate.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00223782\u0022\u003E\nGenerate the points by passing values into the parametric function that range from \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Estart\u003C/span\u003E\u003C/strong\u003E to \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eend\u003C/span\u003E\u003C/strong\u003E.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00223882\u0022\u003E\nDraw a line between each consecutive pair of points.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp data-renderer-start-pos=\u00223938\u0022\u003E\nFor example, to draw a standard \u003Ca href=\u0022https://en.wikipedia.org/wiki/Sine_wave\u0022 rel=\u0022external nofollow\u0022\u003Esine wave\u003C/a\u003E, we can use this parametric function:\n\u003C/p\u003E\n\u003Cdiv class=\u0022code-block sc-jqIZGH hGKMfr\u0022\u003E\n\u003Cpre class=\u0022brush: csharp; title: ; notranslate\u0022\u003EVector3 GetParametricPoint(float parameter)\n{\n    float x = parameter;\n    float y = Mathf.Sin(parameter);\n    return new Vector3(x, y, 0);\n}\n\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWith that function we can use a \u003C/span\u003E\u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Estart\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E and \u003C/span\u003E\u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eend\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E parameter to generate our \u003C/span\u003E\u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Epoints\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022brush: csharp; title: ; notranslate\u0022\u003Evoid GenerateParametricPoints(\n    List\u0026lt;Vector3\u0026gt; points, float start, float end, int count)\n{\n    points.Clear();\n    // Need at least two points to draw a line\n    if(count \u0026lt; 2) return; \n\n    // Generate points using a parameter that\n    // inclusively ranges from \u0027start\u0027 to \u0027end\u0027\n    float stepSize = (end - start) / (count - 1);\n    for(int step = 0; step \u0026lt; count; \u002B\u002Bstep)\n    {\n        float parameter = start \u002B stepSize * step;\n        Vector3 point = GetParametricPoint(parameter);\n        points.Add(point);\n    }\n}\n\u003C/pre\u003E\n\u003Cp data-renderer-start-pos=\u00224811\u0022\u003E\nAnd assuming that we have a function to draw a line between two points, we can finally draw the lines between the points we just generated:\n\u003C/p\u003E\n\u003Cpre class=\u0022brush: csharp; title: ; notranslate\u0022\u003Evoid DrawParametricCurve(List\u0026lt;Vector3\u0026gt; points)\n{\n    int count = points.Count - 1;\n    for(int step = 0; step \u0026lt; count; \u002B\u002Bstep)\n    {\n        Vector3 from = points[step];\n        Vector3 to = points[step \u002B 1];\n        Draw.Line(from, to);\n    }\n}\n\u003C/pre\u003E\n\u003Cp data-renderer-start-pos=\u00225199\u0022\u003E\nHere is an example of what that looks like:\n\u003C/p\u003E\n\u003Cp data-renderer-start-pos=\u00225199\u0022\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022481\u0022 data-unique=\u0022nmg6p3n8c\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/03_Parametric_02.mp4.ddd69478746f7879db5fdb9167190aba.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 data-fileext=\u0022mp4\u0022 data-fileid=\u0022481\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=481\u0026amp;key=b3aff81969fcbbb75c994750a9745a8b\u0022 rel=\u0022\u0022\u003E03_Parametric_02.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003EThe green line is the ideal sine curve that we want to draw, and the blue line is the result of our \u003C/span\u003E\u003Cstrong style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003EGenerateParametricPoints\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E and \u003C/span\u003E\u003Cstrong style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003EDrawParametricCurve\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E functions.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv class=\u0022rich-media-item mediaSingleView-content-wrap image-wide sc-cmthru gkSIUp sc-esOvli blTVYK\u0022 data-layout=\u0022wide\u0022 data-node-type=\u0022mediaSingle\u0022 data-width=\u0022100\u0022\u003E\n\u003Cdiv class=\u0022sc-iuJeZd funShP\u0022\u003E\n\u003Cp data-renderer-start-pos=\u00225409\u0022\u003E\nChanging the \u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003E\u003Cstrong\u003Estart\u003C/strong\u003E\u003C/span\u003E and \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eend\u003C/span\u003E\u003C/strong\u003E parameters (shown here in degrees) affects the position and length of the curve and the more points we generate the better the lines match the ideal curve.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EDrawing an Orbit\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u2019s assume that we have the following:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli data-renderer-start-pos=\u00225655\u0022\u003E\n\u003Cspan data-id=\u00229d9a3911-1483-4368-838f-7fd61db230c6\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00229d9a3911-1483-4368-838f-7fd61db230c6\u0022\u003EA parametric equation of our orbit. \u003C/span\u003EThe exact equation is \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_elements\u0022 rel=\u0022external nofollow\u0022\u003Eoutside the scope of this post\u003C/a\u003E, but for those curious, you can see better results if it uses the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Eccentric_anomaly\u0022 rel=\u0022external nofollow\u0022\u003Eeccentric anomaly\u003C/a\u003E\u00A0as its parameter.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00225952\u0022\u003E\nA \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Estart\u003C/span\u003E\u003C/strong\u003E and an \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eend\u003C/span\u003E \u003C/strong\u003Eparameter that we\u2019ll step between. A full orbit\u2019s parametric equation generally ranges from 0 to 2\u03C0 radians, or 0 to 360 degrees.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00226104\u0022\u003E\nThe number of \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Epoints\u003C/span\u003E\u003C/strong\u003E we want to generate. The default in KSP1 is 180 points for a full orbit.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00226104\u0022\u003E\nA graphics package to do the rendering. We need a \u003Cspan data-id=\u00224b00bf38-b2d7-4a19-bb12-00bbc2951c75\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u00224b00bf38-b2d7-4a19-bb12-00bbc2951c75\u0022\u003Eway to draw a line between two points.\u003C/span\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAs with the sine wave, we generate points using parameters ranging from the \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Estart\u003C/span\u003E\u003C/strong\u003E to the \u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eend\u003C/span\u003E\u003C/strong\u003E value, and by increasing the number of points we generate, we get a smoother looking orbit:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022495\u0022 data-unique=\u00223yxiv3j4x\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/02_AddingPoints.mp4.7e7f9c9ec98f84b45687651b2c3033a8.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=495\u0026amp;key=cf005d23355a8a8e37b4a8d1504f3501\u0022 data-fileid=\u0022495\u0022 data-fileext=\u0022mp4\u0022 rel=\u0022\u0022\u003E02_AddingPoints.mp4\u003C/a\u003E\n\u003C/video\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003EOf cour\u003C/span\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003Ese there\u2019s a lot that I\u2019m glossing over here, such as more efficient ways to draw lines than one at a time or other optimizations, but in a nutshell this is how orbits were drawn in KSP1.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EAdding some Perspective\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EEvenly distributing the \u003C/span\u003E\u003Cspan data-id=\u0022e361e4ad-32b0-47ee-a405-a6c3b49a901b\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022e361e4ad-32b0-47ee-a405-a6c3b49a901b\u0022 style=\u0022font-weight: 300;\u0022\u003Epoints\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E of an orbit yields excellent results when viewed from\u003C/span\u003E\u003Cspan data-id=\u002267b4b369-81fc-4445-a6e7-4b96cbc9e8c0\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u002267b4b369-81fc-4445-a6e7-4b96cbc9e8c0\u0022 style=\u0022font-weight: 300;\u0022\u003E \u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003Efar away, specifically when the camera is not close to the plane that the orbit is on.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\nHowever, in KSP you frequently view orbits from extremely flat angles. For exampl\u003Cspan data-id=\u0022f2e90836-1067-4ff2-b184-8bb07dcbbfd0\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022f2e90836-1067-4ff2-b184-8bb07dcbbfd0\u0022\u003Ee, w\u003C/span\u003Ehen zoomed in close enough to see the moon of a planet, the orbit of the planet will be almost completely flat.\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u2019s add the orbits of Kerbin\u2019s moons Mun and Minmus to our example scene:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022484\u0022 data-unique=\u0022d4dzg2tza\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/01_ZoomInCorners_02.mp4.de9b63570ab8ee484ac44bc1353f05b2.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 data-fileext=\u0022mp4\u0022 data-fileid=\u0022484\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=484\u0026amp;key=bb847119f071c77a25cc8e1fdedd41f3\u0022 rel=\u0022\u0022\u003E01_ZoomInCorners_02.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan data-id=\u0022cdcf9b0f-d6d8-4853-a58e-971431bd0903\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022cdcf9b0f-d6d8-4853-a58e-971431bd0903\u0022 style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003EW\u003C/span\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003Ehen we zoom in on Kerbin\u2019s moons\u003C/span\u003E\u003Cspan data-id=\u002258afb37a-4c82-44f3-94aa-d17124e8fd1a\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u002258afb37a-4c82-44f3-94aa-d17124e8fd1a\u0022 style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E, we \u003C/span\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003Esee sharp corners on Kerbin\u2019s orbit. The orbit line also misses Kerbin by a significant margin.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv class=\u0022rich-media-item mediaSingleView-content-wrap image-wide sc-cmthru gkSIUp sc-esOvli blTVYK\u0022 data-layout=\u0022wide\u0022 data-node-type=\u0022mediaSingle\u0022 data-width=\u0022100\u0022\u003E\n\u003Cdiv class=\u0022sc-iuJeZd funShP\u0022\u003E\n\u003Cdiv class=\u0022sc-jGxEUC gMucQl\u0022 data-collection=\u0022contentId-1326809131\u0022 data-context-id=\u00221326809131\u0022 data-file-mime-type=\u0022video/mp4\u0022 data-file-name=\u002201_ZoomInCorners_02.mp4\u0022 data-file-size=\u00223649285\u0022 data-height=\u0022900\u0022 data-id=\u0022550ab9b0-ae9b-474f-8eae-f3ce9a56635b\u0022 data-node-type=\u0022media\u0022 data-type=\u0022file\u0022 data-width=\u00221600\u0022\u003E\n\u003Cdiv class=\u0022sc-fdQOMr btmcKr\u0022 data-testid=\u0022media-card-view\u0022\u003E\n\u003Cdiv class=\u0022media-file-card-view sc-fAJaQT fkMVkV\u0022 data-test-media-name=\u002201_ZoomInCorners_02.mp4\u0022 data-test-progress=\u00221\u0022 data-test-status=\u0022complete\u0022 data-testid=\u0022media-file-card-view\u0022\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EEven though we generated Kerbin\u2019s orbit with 180 points, the distance between two points is still about 5 times larger than \u003C/span\u003E\u003Cem data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003EMinmus\u2019 entire orbit\u003C/em\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E\u003Cspan\u003E:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022492\u0022 data-unique=\u0022cum77ontl\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/04_GapZoom_02.mp4.63002c051fed386b26fa63b2ce3d0fa8.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 data-fileext=\u0022mp4\u0022 data-fileid=\u0022492\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=492\u0026amp;key=9ab183681ea343de2f0d8361d78288c2\u0022 rel=\u0022\u0022\u003E04_GapZoom_02.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003EIf we evenly distribute the points around the orbit, then with orbits as large as those in KSP we run into scenarios where there may not be enough points from the camera\u2019s point of view to look smooth.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWe could increase the point count, \u003C/span\u003E\u003Cspan data-id=\u0022c8f6fe2b-6b3e-47fd-842d-41a6428f12e4\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022c8f6fe2b-6b3e-47fd-842d-41a6428f12e4\u0022 style=\u0022font-weight: 300;\u0022\u003Ebut we\u2019ll\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E quickly run into diminishing returns. Much of the orbit already looks smooth so adding points there would be a waste, while due to the angle of the camera other parts of the orbit don\u2019t have enough points.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003E\u2026 What if we could add points only where they\u2019re needed?\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EScreen Space Line Tessellation\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIf you have two points that were generated with a parametric equation you can generate a new point between them by averaging their parameters:\n\u003C/p\u003E\n\u003Cpre class=\u0022brush: csharp; title: ; notranslate\u0022\u003EVector3 pointA = GetParametricPoint(parameterA);\nVector3 pointB = GetParametricPoint(parameterB);\n\nfloat parameterMid = (parameterA \u002B parameterB) * 0.5f;\nVector3 pointMid = GetParametricPoint(parameterMid);\n\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWe can start with a small set of points and insert new ones by averaging their parameters. The curve becomes smoother each time we do this:\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022rich-media-item mediaSingleView-content-wrap image-wide sc-cmthru gkSIUp sc-esOvli blTVYK\u0022 data-layout=\u0022wide\u0022 data-node-type=\u0022mediaSingle\u0022 data-width=\u0022100\u0022\u003E\n\u003Cdiv class=\u0022sc-iuJeZd hdKrWa\u0022\u003E\n\u003Cdiv class=\u0022sc-jGxEUC gMucQl\u0022 data-collection=\u0022contentId-1326809131\u0022 data-context-id=\u00221326809131\u0022 data-file-mime-type=\u0022image/png\u0022 data-file-name=\u0022SubdivIterations.png\u0022 data-file-size=\u002251633\u0022 data-height=\u0022396\u0022 data-id=\u0022acd7001c-6932-44b5-b6fb-e8ec9603c6b2\u0022 data-node-type=\u0022media\u0022 data-type=\u0022file\u0022 data-width=\u00221200\u0022\u003E\n\u003Cdiv class=\u0022media-file-card-view sc-fAJaQT fkMVkV\u0022 data-test-media-name=\u0022SubdivIterations.png\u0022 data-test-progress=\u00221\u0022 data-test-status=\u0022complete\u0022 data-testid=\u0022media-file-card-view\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022SubdivIterations-768x253\u0022 data-ratio=\u002232.94\u0022 width=\u0022768\u0022 src=\u0022https://images.ctfassets.net/wn7ipiv9ue5v/6qM1uyDXi3ozXeihWHO83K/466baffbd0c0ecc9245a423285b82fd8/SubdivIterations-768x253.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EIn computer graphics \u003C/span\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/Tessellation_(computer_graphics)\u0022 rel=\u0022external nofollow\u0022\u003Etessellation\u003C/a\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E\u00A0is the process of dividing geometry to make it smoother. We are effectively tessellating our parametric curve.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWe really only care that the curve appears smooth on the screen, so we want to evaluate the \u003C/span\u003E\u003Cem data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003Esmoothness\u003C/em\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E of our points in \u003C/span\u003E\u003Cem data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003Escreen space\u003C/em\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E, where the X and Y coordinates correspond to the \u003C/span\u003E\u003Cspan data-id=\u0022d620322f-e0ad-418a-9e52-c9025eabef77\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022d620322f-e0ad-418a-9e52-c9025eabef77\u0022 style=\u0022font-weight: 300;\u0022\u003Epoint\u2019s\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E screen position:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022brush: csharp; title: ; notranslate\u0022\u003EVector3 screenA = camera.WorldToScreenPoint(pointA);\nVector3 screenB = camera.WorldToScreenPoint(pointB);\nVector3 screenC = camera.WorldToScreenPoint(pointC);\n\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWith our points in screen space, we can insert a new point between points \u003C/span\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003EA\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E and \u003C/span\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003EB\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E based on how smooth the curve is there. But how do we define \u2018smoothness\u2019?\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EChoosing a Smoothness Heuristic\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EA heuristic is a rule-of-thumb; a method for solving a problem very fast while being adequately accurate. We need a heuristic to efficiently decide if our points are \u2018smooth enough\u2019.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWe\u2019ve mentioned two heuristics so far:\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cul\u003E\u003Cli data-renderer-start-pos=\u00229479\u0022\u003E\nThe \u003Cstrong data-renderer-mark=\u0022true\u0022\u003Edistance\u003C/strong\u003E between points. If points are visually close together then they\u2019re less noticeable.\n\u003C/li\u003E\n\u003Cli data-renderer-start-pos=\u00229579\u0022\u003E\nThe \u003Cstrong data-renderer-mark=\u0022true\u0022\u003Eangle\u003C/strong\u003E between points. The closer three points are to a straight line the less their middle corner stands out.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp data-renderer-start-pos=\u00229696\u0022\u003E\nA convenient heuristic that incorporates both is the \u003Cstrong data-renderer-mark=\u0022true\u0022\u003Etriangle area\u003C/strong\u003E, which we can compute very quickly using the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Shoelace_formula#Proof_for_a_triangle\u0022 rel=\u0022external nofollow\u0022\u003EShoelace formula\u003C/a\u003E:\n\u003C/p\u003E\n\u003Cpre class=\u0022brush: csharp; title: ; notranslate\u0022\u003Efloat ComputeTriangleAreaXY(Vector3 a, Vector3 b, Vector3 c)\n{\n    return Mathf.Abs(a.x*b.y \u002B b.x*c.y \u002B c.x*a.y \n                   - a.y*b.x - b.y*c.x - c.y*a.x) * 0.5f;\n}\n\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EIf the triangle of \u003C/span\u003E\u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Ea\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E, \u003C/span\u003E\u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Eb\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E and \u003C/span\u003E\u003Cstrong\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022\u003Ec\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E in screen space has an area larger than a given upper limit, then we insert a new point between \u003C/span\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003Ea\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E and \u003C/span\u003E\u003Cspan class=\u0022code\u0022 data-renderer-mark=\u0022true\u0022 style=\u0022font-weight: 300;\u0022\u003Eb\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E to smooth out the curve.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWe evaluate our heuristic on every consecutive set of three points, until all points satisfy our heuristic, or we reach another end condition like how many points we have in total.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EIt can help to visualize the triangles:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022493\u0022 data-unique=\u0022e5namu7ng\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/08_TriangleHeuristic.mp4.02e7590044a15ed69bc19239131b34d1.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 data-fileext=\u0022mp4\u0022 data-fileid=\u0022493\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=493\u0026amp;key=4209f499997ac3100d7053d2f9557379\u0022 rel=\u0022\u0022\u003E08_TriangleHeuristic.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EPutting it all together\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWe can apply the triangle heuristic to our orbits, coloring each point based on the Iteration it was added in\u2014red first, then orange, yellow, and so on:\u003C/span\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003EThe orbits are tessellated using the top-right camera and the turquoise lines show the viewing bounds of that camera. The top-left shows a close up of Kerbin and its moons.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022494\u0022 data-unique=\u002221mj1be8e\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/06_Subdiv_01.mp4.2b7d98418559ccd3fb55a023a132d9e8.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 data-fileext=\u0022mp4\u0022 data-fileid=\u0022494\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=494\u0026amp;key=4de12182c81296002329f36088edce8c\u0022 rel=\u0022\u0022\u003E06_Subdiv_01.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EThe closer the camera moves to the \u003C/span\u003E\u003Cspan data-id=\u0022e2e4ff49-b429-41c0-b531-3f85fd25a6c5\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022e2e4ff49-b429-41c0-b531-3f85fd25a6c5\u0022 style=\u0022font-weight: 300;\u0022\u003Eorbit, the\u003C/span\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003E more iterations need to be performed to satisfy our heuristic, but we also use far fewer points overall because we only generate points where needed. For example the orbits of Mun and Minmus only generate new points when they become visible.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EHere\u2019s the original shot again with tessellation enabled and all debug drawing removed:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022496\u0022 data-unique=\u0022c3a7i7atc\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/02_ZoomInSmooth_02.mp4.36e6a3dab0682314aa41353a34ce72c7.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=496\u0026amp;key=63b148f6261fcf2d0167ab1af89c8ba6\u0022 data-fileid=\u0022496\u0022 data-fileext=\u0022mp4\u0022 rel=\u0022\u0022\u003E02_ZoomInSmooth_02.mp4\u003C/a\u003E\n\u003C/video\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003EAnd that, in a nutshell,\u003C/span\u003E\u003Cspan data-id=\u0022621fd56d-0b9f-4b80-bf50-78794ff9268f\u0022 data-mark-annotation-type=\u0022inlineComment\u0022 data-mark-type=\u0022annotation\u0022 data-renderer-mark=\u0022true\u0022 id=\u0022621fd56d-0b9f-4b80-bf50-78794ff9268f\u0022 style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E is how orbits\u003C/span\u003E\u003Cspan style=\u0022background-color: rgb( var(--theme-area_background_reset) ); color: rgb( var(--theme-text_color) );\u0022\u003E are drawn in KSP2.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EClosing Thoughts\u003C/strong\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EWhen working on programming problems your first solution is rarely perfect, and it\u2019s possible for your solution to have its own problems that you need to solve.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EThere is far more that went into the development of this feature that I\u2019d love to share here, from implementation details like additional heuristics, culling optimizations and choosing the right data structure for efficient point insertions, to how this can be used for more than just Keplerian orbits, but this is enough for one post.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EIf you enjoyed this technical deep dive and want to see more stuff like it please let us know! Having the chance to share something like this with you all is very special to me. I wouldn\u2019t be in this industry if it wasn\u2019t for so many developers sharing their passions and inspiring me through their work online.\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-weight: 300;\u0022\u003EI\u2019ll leave you with one last debug visualization, showing the spatial partitioning used to decide when points are worth subdividing even if they\u2019re not on screen (but one of their descendants might be):\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cvideo class=\u0022ipsEmbeddedVideo\u0022 controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022 data-fileid=\u0022491\u0022 data-unique=\u00227febzlo78\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/monthly_2022_05/07_Bounds_01.mp4.7e749ba4d3f2896f9f95871103d0887c.mp4\u0022\u003E\u003Ca class=\u0022ipsAttachLink\u0022 data-fileext=\u0022mp4\u0022 data-fileid=\u0022491\u0022 href=\u0022https://forum.kerbalspaceprogram.com/applications/core/interface/file/attachment.php?id=491\u0026amp;key=7765ec3f54f099f4db89e7d7601addf1\u0022 rel=\u0022\u0022\u003E07_Bounds_01.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.kerbalspaceprogram.com/dev-diaries\u0022 rel=\u0022external nofollow\u0022\u003EView the full article\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n"},{"CreatedByName":"Spaceman.Spiff","CreatedById":209133,"CreatedDateTime":"2021-04-15T14:53:39Z","Content":"\n\u003Cp\u003E\nThis seems very interesting!\n\u003C/p\u003E\n"},{"CreatedByName":"Starhelperdude","CreatedById":204462,"CreatedDateTime":"2021-04-15T14:54:17Z","Content":"\n\u003Cp\u003E\ncool!\n\u003C/p\u003E\n"},{"CreatedByName":"RealKerbal3x","CreatedById":183830,"CreatedDateTime":"2021-04-15T15:12:48Z","Content":"\n\u003Cp\u003E\nThis is a proper deep dive! I love reading about this sort of stuff - maybe I\u0027m just a nerd, but then again, who here isn\u0027t? \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Lewie","CreatedById":203745,"CreatedDateTime":"2021-04-15T15:36:51Z","Content":"\n\u003Cp\u003E\nAwesome!! This is a really neat dive into the technical aspects of the game, loved to see this!\u00A0Semi-relaed question....will ksp2 suffer from flickering orbits?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-15T15:37:15Z\u0022 title=\u002204/15/2021 03:37  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 15, 2021\u003C/time\u003E by Lewie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Spaceman.Spiff","CreatedById":209133,"CreatedDateTime":"2021-04-15T15:38:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954898\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618501011\u0022 data-ipsquote-userid=\u0022203745\u0022 data-ipsquote-username=\u0022Lewie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Lewie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nksp2 suffer from flickering orbits?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHopefully there will be less laser spaghetti\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2021-04-15T16:17:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954875\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618473604\u0022 data-ipsquote-userid=\u0022210281\u0022 data-ipsquote-username=\u0022Intercept Games\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Intercept Games said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cul\u003E\u003Cli\u003E\nThe \u003Cstrong\u003Edistance\u003C/strong\u003E between points. If points are visually close together then they\u2019re less noticeable.\n\u003C/li\u003E\n\u003Cli\u003E\nThe \u003Cstrong\u003Eangle\u003C/strong\u003E between points. The closer three points are to a straight line the less their middle corner stands out.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cp\u003E\nA convenient heuristic that incorporates both is the \u003Cstrong\u003Etriangle area\u003C/strong\u003E, which we can compute very quickly using the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Shoelace_formula#Proof_for_a_triangle\u0022 rel=\u0022external nofollow\u0022\u003EShoelace formula\u003C/a\u003E:\n\u003C/p\u003E\n\u003Cpre\u003E\n\nfloat ComputeTriangleAreaXY(Vector3 a, Vector3 b, Vector3 c)\n{\n    return Mathf.Abs(a.x*b.y \u002B b.x*c.y \u002B c.x*a.y \n                   - a.y*b.x - b.y*c.x - c.y*a.x) * 0.5f;\n}\u003C/pre\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNice!\u00A0\u003Cem\u003ENow\u003C/em\u003E\u00A0I\u0027m excited for this game! It\u0027s great that old annoyances like spiky orbits are being addressed. \u0022Tessellation as applied to orbit rendering\u0022 sounds like something somebody might be able to patent, but I guess that\u0027s only useful if you have competitors that might want to use it.\n\u003C/p\u003E\n\u003Cp\u003E\n(I assume you guys know you can drop that \u0022* 0.5f\u0022 factor for speed and the metric would be just as useful, and that it was left in solely for our benefit.\u00A0\u003Cimg alt=\u0022:sticktongue:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 title=\u0022:sticktongue:\u0022\u003E)\n\u003C/p\u003E\n"},{"CreatedByName":"MechBFP","CreatedById":184845,"CreatedDateTime":"2021-04-15T16:19:08Z","Content":"\n\u003Cp\u003E\nI absolutely love this post. Thank you for all the technical details, as well as the awesome graphs to visualize the problem and the solution. Stuff like this is why I think I am going to love KSP 2. The attention to detail is very evident.\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2021-04-15T16:27:39Z","Content":"\n\u003Cp\u003E\nyes this is great \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Johannes","CreatedById":210872,"CreatedDateTime":"2021-04-15T17:15:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954886\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618499568\u0022 data-ipsquote-userid=\u0022183830\u0022 data-ipsquote-username=\u0022RealKerbal3x\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, RealKerbal3x said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\nThis is a proper deep dive! I love reading about this sort of stuff - maybe I\u0027m just a nerd, but then again, who here isn\u0027t? \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou were my main target demographic \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0Glad you enjoyed it!\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954898\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618501011\u0022 data-ipsquote-userid=\u0022203745\u0022 data-ipsquote-username=\u0022Lewie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Lewie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\nAwesome!! This is a really neat dive into the technical aspects of the game, loved to see this!\u00A0Semi-relaed question....will ksp2 suffer from flickering orbits?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI hope not! It\u0027s a completely new system so that shouldn\u0027t be an issue any more. (it\u0027s had\u00A0its own quirks, but I hope nothing as jarring as that makes it into release, knock on wood)\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954916\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618503479\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\n(I assume you guys know you can drop that \u0022* 0.5f\u0022 factor for speed and the metric would be just as useful, and that it was left in solely for our benefit.\u00A0\u003Cimg alt=\u0022:sticktongue:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 title=\u0022:sticktongue:\u0022\u003E)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep, had I left it out you know I would have been called out for it \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-15T17:18:55Z\u0022 title=\u002204/15/2021 05:18  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 15, 2021\u003C/time\u003E by Johannes\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jshu","CreatedById":204400,"CreatedDateTime":"2021-04-15T17:19:25Z","Content":"\n\u003Cp\u003E\nVery cool, thanks a lot! Would love to see more posts like this. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dientus","CreatedById":209823,"CreatedDateTime":"2021-04-15T17:23:36Z","Content":"\n\u003Cp\u003E\nToo awesome. Love the way you explain it. I am only a hobbyist, but I understood perfectly. Keep up the great work and believe me when I say that there are definitely people out here who appreciate your, and the others, attention to detail!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954875\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618473604\u0022 data-ipsquote-userid=\u0022210281\u0022 data-ipsquote-username=\u0022Intercept Games\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Intercept Games said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAll visuals were created specifically for this dev diary, and are in no way representative of how \u003Cem\u003Eanything\u003C/em\u003E may look in the final game.\u003Cbr\u003E\nIt\u2019s just programmer art.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nVERY glad you included that \u003Cimg alt=\u0022;p\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/971609041_P.png\u0022 title=\u0022;p\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nNow to see how many ask this very question..\n\u003C/p\u003E\n"},{"CreatedByName":"Johannes","CreatedById":210872,"CreatedDateTime":"2021-04-15T17:30:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954950\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618507165\u0022 data-ipsquote-userid=\u0022204400\u0022 data-ipsquote-username=\u0022jshu\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, jshu said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\nVery cool, thanks a lot! Would love to see more posts like this. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcellent - I really enjoyed writing it and I hope I get more opportunities to talk about some of the other cool new systems we\u0027re working on!\n\u003C/p\u003E\n\u003Cp\u003E\nHeck, I could easily write another post about this system alone\u00A0- I really only described the basic implementation that my first prototype used. If you were to implement it as is you might notice some edge cases where the triangle heuristic doesn\u0027t \u003Cem\u003Equite\u003C/em\u003E cut it. If you look closely enough\u00A0you might even notice some slight differences between what I described and the behavior in the renders (which use the current version of the system)\u00A0\u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954953\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618507416\u0022 data-ipsquote-userid=\u0022209823\u0022 data-ipsquote-username=\u0022Dientus\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, Dientus said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\nToo awesome. Love the way you explain it. I am only a hobbyist, but I understood perfectly. Keep up the great work and believe me when I say that there are definitely people out here who appreciate your, and the others, attention to detail!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s honestly the biggest compliment I could ask for - Over the years I\u0027ve learned so much from blog posts that covered topics that were way over my head at the time, but were written well enough to still be able to get something out of. I just want to pay it forward \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-16T05:17:09Z\u0022 title=\u002204/16/2021 05:17  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 16, 2021\u003C/time\u003E by Johannes\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpaceFace545","CreatedById":196943,"CreatedDateTime":"2021-04-15T17:51:00Z","Content":"\n\u003Cp\u003E\nMaybe we could see some gameplay instead of proof that you guys know what you are doing. We get it, you guys understand how to make a game.\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2021-04-15T18:04:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954972\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618509060\u0022 data-ipsquote-userid=\u0022196943\u0022 data-ipsquote-username=\u0022SpaceFace545\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 minutes ago, SpaceFace545 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMaybe we could see some gameplay instead of proof that you guys know what you are doing. We get it, you guys understand how to make a game.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMaybe we could let the people who enjoy this post, enjoy it?\n\u003C/p\u003E\n"},{"CreatedByName":"Spaceman.Spiff","CreatedById":209133,"CreatedDateTime":"2021-04-15T18:07:36Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/210872-johannes/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022210872\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/210872-johannes/\u0022 rel=\u0022\u0022\u003E@Johannes\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI didn\u0027t understand the more code-y bits, but that\u0027s because i\u0027m a fool.\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHowever, I thought the visual representations were very helpful in showing the progression here.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-04-15T18:24:16Z","Content":"\n\u003Cp\u003E\nThis is the kind of content that reassures me the devs know what they\u0027re doing and will give something great to the community! Keep up the good work and thanks for showing us the progress\n\u003C/p\u003E\n"},{"CreatedByName":"minerbat","CreatedById":201971,"CreatedDateTime":"2021-04-15T19:31:54Z","Content":"\n\u003Cp\u003E\ncool! will you also PLEASE fix the bug with orbits where maneuver nodes can\u0027t make up their minds if you get an encounter or not and your orbit changes when you timewarp? even if KSP 2 is just KSP 1 without that bug, i would still be very happy. also, i love technical stuff! i also like programming but i\u0027m about 0.000001% as good as this...\n\u003C/p\u003E\n"},{"CreatedByName":"PlutoISaPlanet","CreatedById":206057,"CreatedDateTime":"2021-04-15T19:54:00Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/201971-minerbat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022201971\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/201971-minerbat/\u0022 rel=\u0022\u0022\u003E@minerbat\u003C/a\u003E\u00A0I hate when the game can\u0027t decide if you got a encounter or not.\n\u003C/p\u003E\n"},{"CreatedByName":"minerbat","CreatedById":201971,"CreatedDateTime":"2021-04-15T19:56:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223955042\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618516440\u0022 data-ipsquote-userid=\u0022206057\u0022 data-ipsquote-username=\u0022PlutoISaPlanet\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, PlutoISaPlanet said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/201971-minerbat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022201971\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/201971-minerbat/\u0022 rel=\u0022\u0022\u003E@minerbat\u003C/a\u003E\u00A0I hate when the game can\u0027t decide if you got a encounter or not.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nespeccially when you decide to go for it, it decides NO and you\u0027re playing hard mode without quicksafes. that is why i still make quicksafes in hard mode, but only use them in case of glitches like that...\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Kerbal","CreatedById":207217,"CreatedDateTime":"2021-04-15T20:04:27Z","Content":"\n\u003Cp\u003E\nInteresting........\n\u003C/p\u003E\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954875\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618473604\u0022 data-ipsquote-userid=\u0022210281\u0022 data-ipsquote-username=\u0022Intercept Games\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Intercept Games said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight:300;\u0022\u003Ehen we zoom in on Kerbin\u2019s moons\u003C/span\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003E, we \u003C/span\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003Esee sharp corners on Kerbin\u2019s orbit. The orbit line also misses Kerbin by a significant margin.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is still a bug in KSP.\u00A0 I wonder if this can be fixed.\n\u003C/p\u003E\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954875\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618473604\u0022 data-ipsquote-userid=\u0022210281\u0022 data-ipsquote-username=\u0022Intercept Games\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Intercept Games said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cpre\u003E\n\nvoid GenerateParametricPoints(\n    List\u0026lt;Vector3\u0026gt; points, float start, float end, int count)\n{\n    points.Clear();\n    // Need at least two points to draw a line\n    if(count \u0026lt; 2) return; \n\n    // Generate points using a parameter that\n    // inclusively ranges from \u0027start\u0027 to \u0027end\u0027\n    float stepSize = (end - start) / (count - 1);\n    for(int step = 0; step \u0026lt; count; \u002B\u002Bstep)\n    {\n        float parameter = start \u002B stepSize * step;\n        Vector3 point = GetParametricPoint(parameter);\n        points.Add(point);\n    }\n}\n\u003C/pre\u003E\n\u003Cp\u003E\nAnd assuming that we have a function to draw a line between two points, we can finally draw the lines between the points we just generated:\n\u003C/p\u003E\n\u003Cpre\u003E\n\nvoid DrawParametricCurve(List\u0026lt;Vector3\u0026gt; points)\n{\n    int count = points.Count - 1;\n    for(int step = 0; step \u0026lt; count; \u002B\u002Bstep)\n    {\n        Vector3 from = points[step];\n        Vector3 to = points[step \u002B 1];\n        Draw.Line(from, to);\n    }\n}\u003C/pre\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAmazing.\n\u003C/p\u003E\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954875\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618473604\u0022 data-ipsquote-userid=\u0022210281\u0022 data-ipsquote-username=\u0022Intercept Games\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Intercept Games said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight:300;\u0022\u003EWe can apply the triangle heuristic to our orbits, coloring each point based on the Iteration it was added in\u2014red first, then orange, yellow, and so on:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv style=\u0022width:640px;\u0022\u003E\n\u003Cvideo controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022https://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/06_Subdiv_01.mp4?_=6\u0022\u003E\u003Ca href=\u0022https://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/06_Subdiv_01.mp4\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/06_Subdiv_01.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/div\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003EThe orbits are tessellated using the top-right camera and the turquoise lines show the viewing bounds of that camera. The top-left shows a close up of Kerbin and its moons.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMind\u00A0blown. Your 30 steps ahead of me.\n\u003C/p\u003E\n"},{"CreatedByName":"minerbat","CreatedById":201971,"CreatedDateTime":"2021-04-15T20:07:43Z","Content":"\n\u003Cp\u003E\nyes, indead amazing! and i haven\u0027t even figured out how to get 3D rendering to work yet...\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Kerbal","CreatedById":207217,"CreatedDateTime":"2021-04-15T20:07:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954875\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618473604\u0022 data-ipsquote-userid=\u0022210281\u0022 data-ipsquote-username=\u0022Intercept Games\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Intercept Games said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight:300;\u0022\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003EHere\u2019s the original shot again with tessellation enabled and all debug drawing removed:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv style=\u0022width:640px;\u0022\u003E\n\u003Cvideo controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022https://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/02_ZoomInSmooth_02.mp4?_=7\u0022\u003E\u003Ca href=\u0022https://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/02_ZoomInSmooth_02.mp4\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/02_ZoomInSmooth_02.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/div\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003EAnd that, in a nutshell,\u003C/span\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003E is how orbits\u003C/span\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003E are drawn in KSP2.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNice. However. Shouldn\u0027t Kerbin\u0027s icon come first? When laying the icons?\n\u003C/p\u003E\n"},{"CreatedByName":"minerbat","CreatedById":201971,"CreatedDateTime":"2021-04-15T20:10:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223955055\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618517272\u0022 data-ipsquote-userid=\u0022207217\u0022 data-ipsquote-username=\u0022Dr. Kerbal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Dr. Kerbal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNice. However. Shouldn\u0027t Kerbin\u0027s icon come first? When laying the icons?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nthis is not the game, just a quick and dirty presentation. there is no reason to make such detail on this, it\u0027s just extra work\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Kerbal","CreatedById":207217,"CreatedDateTime":"2021-04-15T20:12:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223955058\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618517410\u0022 data-ipsquote-userid=\u0022201971\u0022 data-ipsquote-username=\u0022minerbat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, minerbat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthis is not the game, just a quick and dirty presentation. there is no reason to make such detail on this, it\u0027s just extra work\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI guess so. I read the entire article and its pretty neat.\u00A0 Th orbits look so nice and pretty.\u00A0 I cant image the Kerbin, Mun, and Minmus icons when shown on the map.\u00A0 What a master\u00A0peice.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223955055\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618517272\u0022 data-ipsquote-userid=\u0022207217\u0022 data-ipsquote-username=\u0022Dr. Kerbal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, Dr. Kerbal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-weight:300;\u0022\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003EHere\u2019s the original shot again with tessellation enabled and all debug drawing removed:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv style=\u0022width:640px;\u0022\u003E\n\u003Cvideo controls=\u0022\u0022 data-controller=\u0022core.global.core.embeddedvideo\u0022\u003E\u003Csource type=\u0022video/mp4\u0022 src=\u0022https://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/02_ZoomInSmooth_02.mp4?_=7\u0022\u003E\u003Ca href=\u0022https://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/02_ZoomInSmooth_02.mp4\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.kerbalspaceprogram.com/wp-content/uploads/2021/04/02_ZoomInSmooth_02.mp4\u003C/a\u003E\n\u003C/video\u003E\u003C/div\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003EAnd that, in a nutshell,\u003C/span\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003E is how orbits\u003C/span\u003E\u003Cspan style=\u0022font-weight:300;\u0022\u003E are drawn in KSP2.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI cant imagine the whole Kerbol system in this skybox. Nice skybox. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954957\u0022 data-ipsquote-contentid=\u0022201736\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618507850\u0022 data-ipsquote-userid=\u0022210872\u0022 data-ipsquote-username=\u0022Johannes\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Johannes said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHeck, I could easily write another post about this system alone\u00A0- I really only described the basic implementation that my first prototype used. If you were to implement it as is you might notice some edge cases where the triangle heuristic doesn\u0027t \u003Cem\u003Equite\u003C/em\u003E cut it. If you look closely enough\u00A0you might even notice some slight differences between what I described and the behavior in the renders (which use the current version of the system) and what I described \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNice! I have to give credit to you \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/210872-johannes/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022210872\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/210872-johannes/\u0022 rel=\u0022\u0022\u003E@Johannes\u003C/a\u003E. The rending of the orbit is very smooth. Like it. I cant imagine when the entire Kerbol system is complete. I mean, your practically making the universe in a game. I can barley code\u00A0gravity in Scratch and yet your doing things that blow my mine! Thanks so much. I wish you the best of luck! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-15T20:16:28Z\u0022 title=\u002204/15/2021 08:16  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 15, 2021\u003C/time\u003E by Dr. Kerbal\u003C/strong\u003E\n\u003Cbr\u003EWhy autocorrect.\n\u003C/span\u003E\n"}]}