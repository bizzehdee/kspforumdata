{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":51,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-27T07:47:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pingopete\u0022 data-cite=\u0022pingopete\u0022\u003E\u003Cdiv\u003EAh right, yeah that makes sense, I had the stock atmosphere turned off as it was replaced by the Eve atmo shader. Oh and regarding the atmosphere height I was referring to its entire vertical scale essentially not so much to the altitude of its start point. Maybe it\u0027s something that could be edited in the configuration editor? Or is it hard limited to being proportionate to a planets radius?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot sure what you mean, are you referring to the horizon line being higher than the actual horizon? Or do you find the default atmospehre height setting too high in RSS?\u003C/p\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2015-07-27T15:58:52Z","Content":"\n\u003Cp\u003EVery minor little bug: The scattering effect does not show up on the IVA RasterProp Monitors if you look at it via a camera.\u003C/p\u003E\n"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-07-27T17:00:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003ENot sure what you mean, are you referring to the horizon line being higher than the actual horizon? Or do you find the default atmospehre height setting too high in RSS?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah the latter, is there any way of altering that? Thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-27T17:23:59Z\u0022 title=\u002207/27/2015 05:23  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 27, 2015\u003C/time\u003E by pingopete\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-27T17:40:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pingopete\u0022 data-cite=\u0022pingopete\u0022\u003E\u003Cdiv\u003EYeah the latter, is there any way of altering that? Thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe default atmosphere size is taken off of earth\u0027s so I\u0027d have thought it\u0027d look perfect with RSS. Anyway, you can do it with the config tool, there\u0027s a short explanation in the OP on how not to get artifacts, if you get problems just send me a message.\u003C/p\u003E\n"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-07-27T20:05:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EThe default atmosphere size is taken off of earth\u0027s so I\u0027d have thought it\u0027d look perfect with RSS. Anyway, you can do it with the config tool, there\u0027s a short explanation in the OP on how not to get artifacts, if you get problems just send me a message.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAwesome thanks for the help man!\u003C/p\u003E\n"},{"CreatedByName":"Xenro66","CreatedById":123894,"CreatedDateTime":"2015-07-28T13:03:05Z","Content":"\n\u003Cp\u003EI installed scatterer via CKAN, and it also installed clouds from the Astronomer\u0027s pack... But it causes this when I load up. If I reload, the same thing happens. If I go to the tracking station and look in map view, the skybox is gone and replaced with this weird red texture. Can anyone explain what this is and how to fix it?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://cdn.pbrd.co/images/2ioVNMuk.png\u0022 alt=\u00222ioVNMuk.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2015-07-28T13:05:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xenro66\u0022 data-cite=\u0022Xenro66\u0022\u003E\u003Cdiv\u003EI installed scatterer via CKAN, and it also installed clouds from the Astronomer\u0027s pack... But it causes this when I load up. If I reload, the same thing happens. If I go to the tracking station and look in map view, the skybox is gone and replaced with this weird red texture. Can anyone explain what this is and how to fix it?\u003Cp\u003E\u003Ca href=\u0022https://cdn.pbrd.co/images/2ioVNMuk.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://cdn.pbrd.co/images/2ioVNMuk.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E That\u0027s the result of installing any cloud mod through CKAN. Scatterer should install fine through CKAN.\n"},{"CreatedByName":"gkorgood","CreatedById":124879,"CreatedDateTime":"2015-07-28T13:06:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xenro66\u0022 data-cite=\u0022Xenro66\u0022\u003E\u003Cdiv\u003EI installed scatterer via CKAN, and it also installed clouds from the Astronomer\u0027s pack... But it causes this when I load up. If I reload, the same thing happens. If I go to the tracking station and look in map view, the skybox is gone and replaced with this weird red texture. Can anyone explain what this is and how to fix it?\u003Cp\u003E\u003Ca href=\u0022https://cdn.pbrd.co/images/2ioVNMuk.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://cdn.pbrd.co/images/2ioVNMuk.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyou might be out of memory. try reinstalling EVE and AVP manually (yes it\u0027s a lot to do. such is life \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E )\u003C/p\u003E\n"},{"CreatedByName":"SmallFatFetus","CreatedById":137860,"CreatedDateTime":"2015-07-28T13:53:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xenro66\u0022 data-cite=\u0022Xenro66\u0022\u003E\u003Cdiv\u003EI installed scatterer via CKAN, and it also installed clouds from the Astronomer\u0027s pack... But it causes this when I load up. If I reload, the same thing happens. If I go to the tracking station and look in map view, the skybox is gone and replaced with this weird red texture. Can anyone explain what this is and how to fix it?\u003Cp\u003E\u003Ca href=\u0022https://cdn.pbrd.co/images/2ioVNMuk.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://cdn.pbrd.co/images/2ioVNMuk.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is an AVP bug. It\u0027s not an easy mod to install.\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-28T14:28:06Z","Content":"\n\u003Cp\u003ESo, can anybody think of an easy way to detect an eclipse? I need to hide the sunflare I\u0027m adding when on laythe and jool occludes the sun.\u003C/p\u003E\u003Cp\u003EIf I cast a ray, will it work in scaledspace? Do the scaledspace objects have colliders?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-28T15:01:11Z\u0022 title=\u002207/28/2015 03:01  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 28, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Xenro66","CreatedById":123894,"CreatedDateTime":"2015-07-28T15:21:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022_Augustus_\u0022 data-cite=\u0022_Augustus_\u0022\u003E\u003Cdiv\u003EThat\u0027s the result of installing any cloud mod through CKAN. Scatterer should install fine through CKAN.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh right. I can\u0027t remove the clouds and keep scatterer with CKAN, so I guess I\u0027ll have to do a manual install.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022gkorgood\u0022 data-cite=\u0022gkorgood\u0022\u003E\u003Cdiv\u003Eyou might be out of memory. try reinstalling EVE and AVP manually (yes it\u0027s a lot to do. such is life \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E )\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI run at 2.7GB in the main menu, so I\u0027m definitely not out of memory (yet). But yeah, I\u0027ll attempt a manual install.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SmallFatFetus\u0022 data-cite=\u0022SmallFatFetus\u0022\u003E\u003Cdiv\u003EThis is an AVP bug. It\u0027s not an easy mod to install.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, I thought CKAN was meant to make it easier?! xD\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-07-28T15:29:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003ESo, can anybody think of an easy way to detect an eclipse? I need to hide the sunflare I\u0027m adding when on laythe and jool occludes the sun.\u003Cp\u003EIf I cast a ray, will it work in scaledspace? Do the scaledspace objects have colliders?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey should. I believe that is how the existing sun flare system works. \u003C/p\u003E\u003Cp\u003EThe only other way I have is using spherical intersection models in my shaders \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E You\u0027d have to pass in the body origin and the radius however.\u003C/p\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-07-28T16:29:44Z","Content":"\n\u003Cp\u003EDude you have no clue how hyped I am for this xD just the weekly updates are getting me all riled up!\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-07-28T17:23:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EThey should. I believe that is how the existing sun flare system works. \u003Cp\u003EThe only other way I have is using spherical intersection models in my shaders \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E You\u0027d have to pass in the body origin and the radius however.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, Now that I think about it, this would actually probably be much less computationally intensive than a ray-trace. \u003C/p\u003E\u003Cp\u003ETo detect if you hit the sphere:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Efloat3 L = _PlanetOrigin - _WorldSpaceCameraPos; // Vector to Center of body from camera\u003Cbr\u003Efloat3 La = normalize(_SunOrigin - _WorldSpaceCameraPos); // Vector to the Center of the Sun (might also be able to use Vector3 La = Vector3.Normalize(Sun.Instance.sunDirection)\u003Cbr\u003Efloat tc = dot(L, La); // Component of L that is parallel to the view direction\u003Cbr\u003Efloat d = sqrt(dot(IN.L,IN.L)-dot(tc,tc)); //dot(x,x) gets magnitude squared. This just uses Pythagorean\u0027s theorem to get the distance from the center to the tangent of the view.\u003Cbr\u003Eif ( _SphereRadius \u0026gt;= d \u0026amp;\u0026amp; tc \u0026gt; 0) // Check to ensure tangent distance is less than sphere and that we are looking in the right direction.\u003Cbr\u003E{\u003Cbr\u003E  Collision = true;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EI apologize for just using pseudo code here. Couldn\u0027t remember all the references to the math functions.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-07-28T17:30:07Z","Content":"\n\u003Cp\u003EIf either of you figure out how to have a moon cast a shadow on a planet I will buy you a beverage of your choice. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2015-07-28T17:36:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EIf either of you figure out how to have a moon cast a shadow on a planet I will buy you a beverage of your choice. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E Agreed!\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-28T17:48:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EActually, Now that I think about it, this would actually probably be much less computationally intensive than a ray-trace. \u003Cp\u003ETo detect if you hit the sphere:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Efloat3 L = _PlanetOrigin - _WorldSpaceCameraPos; // Vector to Center of body from camera\u003Cbr\u003Efloat3 La = normalize(_SunOrigin - _WorldSpaceCameraPos); // Vector to the Center of the Sun (might also be able to use Vector3 La = Vector3.Normalize(Sun.Instance.sunDirection)\u003Cbr\u003Efloat tc = dot(L, La); // Component of L that is parallel to the view direction\u003Cbr\u003Efloat d = sqrt(dot(IN.L,IN.L)-dot(tc,tc)); //dot(x,x) gets magnitude squared. This just uses Pythagorean\u0027s theorem to get the distance from the center to the tangent of the view.\u003Cbr\u003Eif ( _SphereRadius \u0026gt;= d \u0026amp;\u0026amp; tc \u0026gt; 0) // Check to ensure tangent distance is less than sphere and that we are looking in the right direction.\u003Cbr\u003E{\u003Cbr\u003E  Collision = true;\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EI apologize for just using pseudo code here. Couldn\u0027t remember all the references to the math functions.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI might be saying something stupid here, but if you do that whole check in the shader won\u0027t the same calculation be done over and over again for every pixel in the image? Isn\u0027t better to just compute it once per frame outside of the shader?\u003C/p\u003E\u003Cp\u003EAlso, what would make this less performance-intensive? Is the raycast checking for all colliders while this basically checks intersection with one body?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EIf either of you figure out how to have a moon cast a shadow on a planet I will buy you a beverage of your choice. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe rbray already has a good idea on how to do this.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-07-28T17:49:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EIf either of you figure out how to have a moon cast a shadow on a planet I will buy you a beverage of your choice. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAlready working on it. I\u0027m re-jiggering the shadow mechanism I created for the clouds to work for moons as well \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-07-28T17:51:40Z","Content":"\n\u003Cp\u003E*Hype intensifies*\u003C/p\u003E\u003Cp\u003EWill definitely put my money where my mouth is. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-07-28T18:00:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003E*Hype intensifies*\u003Cp\u003EWill definitely put my money where my mouth is. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou know I haven\u0027t given you a tip yet either. That will have to change soon.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-07-28T18:02:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EI might be saying something stupid here, but if you do that whole check in the shader won\u0027t the same calculation be done over and over again for every pixel in the image? Isn\u0027t better to just compute it once per frame outside of the shader? \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m using it to actually perform depth checking on oceans, so it is required that I do this for the pixel shader.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAlso, what would make this less performance-intensive? Is the raycast checking for all colliders while this basically checks intersection with one body?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are a couple implementations of ray-casting that could be used... but they are all iterative and can be pretty performance hungry. I don\u0027t think 1 raycast will make a huge difference, but many would. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://unity3d.com/learn/tutorials/modules/intermediate/physics/physics-best-practices\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://unity3d.com/learn/tutorials/modules/intermediate/physics/physics-best-practices\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBasically, ray casting has to loop over all the verticies/triangles in range and somehow determine which intersect the ray\u0027s path, and which is closest. My solution is an O(1) solution, ray tracing would be at BEST O(Log n) if it was heavily optimized in Unity.\u003C/p\u003E\u003Cp\u003ESo you would end up just doing this once for the center of the body each update of course \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-28T18:04:43Z\u0022 title=\u002207/28/2015 06:04  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 28, 2015\u003C/time\u003E by rbray89\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-28T18:25:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EI\u0027m using it to actually perform depth checking on oceans, so it is required that I do this for the pixel shader.\u003Cp\u003EThere are a couple implementations of ray-casting that could be used... but they are all iterative and can be pretty performance hungry. I don\u0027t think 1 raycast will make a huge difference, but many would. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://unity3d.com/learn/tutorials/modules/intermediate/physics/physics-best-practices\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://unity3d.com/learn/tutorials/modules/intermediate/physics/physics-best-practices\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBasically, ray casting has to loop over all the verticies/triangles in range and somehow determine which intersect the ray\u0027s path, and which is closest. My solution is an O(1) solution, ray tracing would be at BEST O(Log n) if it was heavily optimized in Unity.\u003C/p\u003E\u003Cp\u003ESo you would end up just doing this once for the center of the body each update of course \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGot it, but I just looked it up and it\u0027s possible to set a layer \u0022mask\u0022 for raycasting so it shouldn\u0027t be much of a problem. Plus if I do it this way it will be compatible with multiple moons, mods that add custom systems etc... So it looks like I\u0027ll use the built-in raycasting.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-07-28T19:11:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackrack\u0022 data-cite=\u0022blackrack\u0022\u003E\u003Cdiv\u003EGot it, but I just looked it up and it\u0027s possible to set a layer \u0022mask\u0022 for raycasting so it shouldn\u0027t be much of a problem. Plus if I do it this way it will be compatible with multiple moons, mods that add custom systems etc... So it looks like I\u0027ll use the built-in raycasting.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, true... I\u0027ve been trying to figure out how to *Efficiently* do the shadows on bodies. I\u0027m pretty sure I want to keep using the projectors, but I\u0027m afraid multiple bodies will eat up all my interpolators.\u003C/p\u003E\n"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-07-28T19:29:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EIf either of you figure out how to have a moon cast a shadow on a planet I will buy you a beverage of your choice. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI want to add that SQUAD might also buy you guys your beverage of choice... They have yet to add true eclipses to stock and if either of you gets it working, I bet there is a high chance that they would look into adding it to stock. Or at least something similar. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWe could finally see something like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.telegraph.co.uk/multimedia/archive/03175/jupiter-moons_3175749c.jpg\u0022 alt=\u0022jupiter-moons_3175749c.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-28T19:33:31Z\u0022 title=\u002207/28/2015 07:33  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 28, 2015\u003C/time\u003E by Avera9eJoe\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-07-28T19:30:13Z","Content":"\n\u003Cp\u003EThis conversation is epic\u003C/p\u003E\n"}]}