{"TopicId":169774,"ForumId":16,"TopicTitle":"Hohmann transfers on eccentric orbits","CreatedByName":"lBoBl","CreatedById":170038,"CreatedDateTime":"2018-01-19T02:16:03Z","PageNum":1,"Articles":[{"CreatedByName":"lBoBl","CreatedById":170038,"CreatedDateTime":"2018-01-19T02:16:04Z","Content":"\n\u003Cp\u003E\nHi there. I\u0027m trying to make some kOS scripts to have a basic homemade rendez-vous autopilot. I\u0027m looking for a bit of fancy maths to calculate the ideal phase angle to initiate a hohmann transfer.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI found this thread that was helpful\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed5971822912\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/62404-how-to-calculate-phase-angle-for-hohmann-transfer/\u0026amp;do=embed\u0022 style=\u0022height:209px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd this to compute the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of the burns, which is cool.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://www.instructables.com/id/Calculating-a-Hohmann-Transfer/\u0022 rel=\u0022external nofollow\u0022\u003Eexternal link\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWith all this information I was able to script a basic but working autopilot to do simple hohmann transfers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHowever... I have not tried it so far but I doubt that this would be helpful if the target orbit is highly eccentric. Because what you\u0027re getting here (with the method described in the old thread)\u00A0is a portion of the target\u0027s period ;\u00A0and the angular velocity of a body in an eccentric orbit changes, so the relation between the period fraction that you get and the and the \u0022angle\u0022 that the planet/ship will have travelled during your transfer will change too...\n\u003C/p\u003E\n\u003Cp\u003E\nRight ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI would very much like to know how MechJeb and some other mods always manage to compute the ideal phase angle even when the target orbit is highly eccentric. Would that be possible/reasonnable to replicate in kOS or does it involve a kiloton of computation and some mind boggingly complicated\u00A0mathematics\u00A0?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks !\n\u003C/p\u003E\n"},{"CreatedByName":"xlm","CreatedById":184114,"CreatedDateTime":"2018-01-19T03:00:03Z","Content":"\n\u003Cp\u003E\nNo, Hohmann transfer is for circular orbits. You cannot use it for elliptical orbits.\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAs for how you would do it, I\u0027d say maybe google the representation of the satellite\u0027s orbit in polar coordinates (I believe you can find r(t) and theta(t) in the deduction of Kepler\u0027s first law).\u00A0Use these to find the tangent of the original orbit at any given point, find an ellipse that is tangent to both orbits, calculate the time you need on the transfer orbit, retrace and find the required location of the ship you are trying to rendezvous with, plot it out as a function of t, and find where it intersects the actual location of the target.\n\u003C/p\u003E\n\u003Cp\u003E\nAt least that\u0027s how I\u0027d do it. Not sure if this is actually the most energy efficient way (actually I\u0027m 95% sure there are certain cases where this is not efficient).\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, that\u0027s not a kiloton of calculation, anyone who knows calculus should be able to do it, but\u00A0it takes a really long time. Also, I\u0027ve only tried mechjeb\u0027s rendezvous once, and it is very inefficient. I mostly plot the maneuver points myself and just use mechjeb for execution.\n\u003C/p\u003E\n"},{"CreatedByName":"lBoBl","CreatedById":170038,"CreatedDateTime":"2018-01-19T04:31:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223271902\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516330803\u0022 data-ipsquote-userid=\u0022184114\u0022 data-ipsquote-username=\u0022xlm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, xlm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo, Hohmann transfer is for circular orbits. You cannot use it for elliptical orbits.\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDidn\u0027t know that. Well I meant hohmann-like then\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223271902\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516330803\u0022 data-ipsquote-userid=\u0022184114\u0022 data-ipsquote-username=\u0022xlm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, xlm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAt least that\u0027s how I\u0027d do it. Not sure if this is actually the most energy efficient way (actually I\u0027m 95% sure there are certain cases where this is not efficient).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s the most time efficient, and for the fuel I\u0027d say it depends where in the eccentric orbit you do your intercept burn\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223271902\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516330803\u0022 data-ipsquote-userid=\u0022184114\u0022 data-ipsquote-username=\u0022xlm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, xlm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnyway, that\u0027s not a kiloton of calculation, anyone who knows calculus should be able to do it, but\u00A0it takes a really long time. Also, I\u0027ve only tried mechjeb\u0027s rendezvous once, and it is very inefficient. I mostly plot the maneuver points myself and just use mechjeb for execution.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s innefficient mostly because it doesn\u0027t combine maneuvers nor optimize their exectution order. But that\u0027s not my point, I\u0027m referring mostly to \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E\u0027s \u0022hohmann transfer to target\u0022 feature (in the maneuvre planer) which pretty much \u003Cstrong\u003Einstantly\u003C/strong\u003E plots the next possible intercept burn as long as the orbits are on the same plane. I could place the maneuver nodes by hand but the thing is, I already know how to do that, this time I\u0027m trying to understand the maths and physics behind what\u0027s efficient and what isn\u0027t.\n\u003C/p\u003E\n\u003Cp\u003E\nI mean I could program something to iteratively \u0022guess\u0022 the ideal transfer with some accuracy (that\u0027s pretty much what you\u0027re describing). But it would take an enormous amount of steps compared to an analytical way of finding the right transfer orbit, if, of course, there is any.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-01-19T04:42:50Z\u0022 title=\u002201/19/2018 04:42  AM\u0022 data-short=\u00226 yr\u0022\u003EJanuary 19, 2018\u003C/time\u003E by lBoBl\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xlm","CreatedById":184114,"CreatedDateTime":"2018-01-19T05:01:03Z","Content":"\n\u003Cp\u003E\nIt is clearly not the most time efficient way. The most time efficient way is to point you ship towards the target, accelerate to light speed, reach target, and decelerate to match speed. In reality you don\u0027t have that kind of thrust of course, but the solution is still going to be something similar, involving accelerating for half of your trip and braking for the other half.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, maybe what I wrote is a little misleading. When I wrote \u0022plot\u0022 the location of the target, what I meant was to write out the function, put it on the LHS, and put the actual orbit of the target on the RHS, and solve the equation. It\u0027s not iterative, it\u0027s quite analytical.\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2018-01-19T05:54:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223271944\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516336273\u0022 data-ipsquote-userid=\u0022170038\u0022 data-ipsquote-username=\u0022lBoBl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, lBoBl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI mean I could program something to iteratively \u0022guess\u0022 the ideal transfer with some accuracy (that\u0027s pretty much what you\u0027re describing). But it would take an enormous amount of steps compared to an analytical way of finding the right transfer orbit, if, of course, there is any.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAstrogator does something similar; it does a bisection method search of departure times seeking to minimize distance between the bodies at craft apoapsis. It\u0027s pretty quick.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/HebaruSan/Astrogator/blob/0915b464707164a1d7774ecd2577dd5328256ff5/src/PhysicsTools.cs#L248-L324\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/HebaruSan/Astrogator/blob/0915b464707164a1d7774ecd2577dd5328256ff5/src/PhysicsTools.cs#L248-L324\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI settled on this because \u0022\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003Efind an ellipse that is tangent to both orbits\u003C/span\u003E\u0022 started to melt my brain.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-01-19T05:58:16Z\u0022 title=\u002201/19/2018 05:58  AM\u0022 data-short=\u00226 yr\u0022\u003EJanuary 19, 2018\u003C/time\u003E by HebaruSan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2018-01-19T06:42:30Z","Content":"\n\u003Cp\u003E\nAssuming the initial orbit is circular, there are following cases:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nOrbits are coplanar\n\u003C/li\u003E\n\u003Cli\u003E\nOrbital planes are different, target orbit semimajor axis lies on the node line\n\u003C/li\u003E\n\u003Cli\u003E\nOrbital planes are different, target orbit semimajor axis does not lie on the node line\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nI\u0027m also assuming that initial orbit is lower than target orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the first case, you need to time the first burn to arrive at \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E at the same time the target does. To calculate time to apoapsis for arbitrary orbiting object, you have to use the concepts of \u003Ca href=\u0022https://en.wikipedia.org/wiki/Mean_anomaly\u0022 rel=\u0022external nofollow\u0022\u003Emean anomaly and mean motion\u003C/a\u003E. Mean motion is the average angular speed of an object in orbit (360\u00B0 / orbital period), and mean anomaly is time since last periapsis divided by the mean motion. Thanks to Kepler\u0027s equation, mean anomaly can be expressed as a function of true anomaly, and from it one can easily get time to apoapsis.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the second case, first burn is to match apoapses in the node opposite to AP, second burn at AP ideally combines matching periapses and inclinations. To get the rendezvous, you\u0027l probably need to split the second burn in two. The second burn raises periapsis to get close approach at the next AP pass and partially corrects inclination, the third one finishes matching orbits.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the third case, first burn is on the side opposite to the highest node of the target orbit to raise the AP, then basically the same procedure of split burn to match orbits and phases but with more trigonometry involved.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, highly recommend \u003Ca href=\u0022http://www.braeunig.us/space/index.htm\u0022 rel=\u0022external nofollow\u0022\u003EBraeunig website\u003C/a\u003E. It has lots of useful information on orbital mechanics and calculation of transfers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"lBoBl","CreatedById":170038,"CreatedDateTime":"2018-01-19T17:48:12Z","Content":"\n\u003Cp\u003E\nThanks guys, this is exactly the kind of resources I was looking for.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m gonna do some cool reading this weekend \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E@Panda5461 I\u0027m mostly interested in case number one. But your method is quite interesting because if I understand correctly your can compute not only the time to \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of your target but also the time to any point of it\u0027s orbit right ? When you\u0027re referring to \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E you mean the transfer orbit\u0027s apoapsis and not necessarily the target orbit\u0027s \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, right ? Cause if that\u0027s the case it\u0027s EXACTLY what I needed \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2018-01-19T18:08:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223272354\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516384092\u0022 data-ipsquote-userid=\u0022170038\u0022 data-ipsquote-username=\u0022lBoBl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, lBoBl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nif I understand correctly your can compute not only the time to \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of your target but also the time to any point of it\u0027s orbit right ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is correct. When you know two true anomalies (i.e. angles from \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E direction), you can easily calculate the difference in mean anomalies which easily translates into the time-of-flight.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223272354\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516384092\u0022 data-ipsquote-userid=\u0022170038\u0022 data-ipsquote-username=\u0022lBoBl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, lBoBl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen you\u0027re referring to \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E you mean the transfer orbit\u0027s apoapsis and not necessarily the target orbit\u0027s \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, right ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m assuming that first burn matches \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of transfer orbit with the \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of target orbit. The transfer will take exactly half of the transfer orbit period, which can be calculated from its semimajor axis.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd uh-oh, I forgot to say in the previous post that you have to match apoapses by the first burn for fuel-optimal transfer. This also means that, in general case, you have to split the burn at the transfer orbit \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E to match phases, just the same as in the second case.\n\u003C/p\u003E\n"},{"CreatedByName":"lBoBl","CreatedById":170038,"CreatedDateTime":"2018-01-19T18:19:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223272377\u0022 data-ipsquote-contentid=\u0022169774\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516385298\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat is correct. When you know two true anomalies (i.e. angles from \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E direction), you can easily calculate the difference in mean anomalies which easily translates into the time-of-flight.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m assuming that first burn matches \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of transfer orbit with the \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E of target orbit. The transfer will take exactly half of the transfer orbit period, which can be calculated from its semimajor axis.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd uh-oh, I forgot to say in the previous post that you have to match apoapses by the first burn for fuel-optimal transfer. This also means that, in general case, you have to split the burn at the transfer orbit \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E to match phases, just the same as in the second case.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI see. I usually try to intercept(1st burn)\u00A0and match(2nd) the first time I raise the orbit, but thinking about it that is only fuel efficient if both orbits are roughly circular. Doing three burns instead of two does make a lot of sense. I\u0027ll maybe try to query the eccentricity of both orbits to determine if the time-efficient way is reasonnable or not before I run the actual algorithm. Thanks !\n\u003C/p\u003E\n"}]}