{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":81,"Articles":[{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-03T19:44:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222659881\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467573135\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOnly change is bug fix noted above.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnd lo, the bug was squashed, and the optimizer hummed happily along to itself having forgotten the words. Perhaps a once-only issue, but starting KSPTOT pre5 took over 2 minutes before the logo showed up on the screen. I had to verify it was running in the task manager. I don\u0027t mind the waiting, and I suspect there\u0027s not much you could do about it, just thought you might want to know.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-03T19:53:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222659910\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467575065\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd lo, the bug was squashed, and the optimizer hummed happily along to itself having forgotten the words. Perhaps a once-only issue, but starting KSPTOT pre5 took over 2 minutes before the logo showed up on the screen. I had to verify it was running in the task manager. I don\u0027t mind the waiting, and I suspect there\u0027s not much you could do about it, just thought you might want to know.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, this is actually something with the MCR.\u00A0 The executable you download has to unpack a bunch of files to a temporary directory somewhere on the first run, which is why the first time is always slower.\u00A0 Subsequent runs should be quicker to start. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-03T21:04:54Z","Content":"\n\u003Cp\u003E\nAlright, while this Jool flyby correction burn for Sarnus is calculating, here are the top four things I wish were different/available in KSPTOT. Please forgive me if these already exist, don\u0027t exist for a reason already discussed, or are sheer lunacy. Maybe they wouldn\u0027t even be helpful and I just don\u0027t realize it. Anyway, here they are in no particular order.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nMFMS warning. Somewhere around page 15 I think, there was a discussion about infinitesimal \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E sizes in KSPTOT tools other than MA. I don\u0027t know if this is still the case or not. It was cited as a reason that MFMS results shouldn\u0027t be used directly, because you might hit other intermediate SoIs or encounter other problems, and that the results should be used as initial guesses in MA instead. If it is still the case that MFMS results shouldn\u0027t be used directly, having some kind of warning on that tool\u0027s view might be helpful to people unaware of that. (This would have saved me about 30 minutes when I first got started)\n\u003C/li\u003E\n\u003Cli\u003E\nMA Optimizer persistence setting. Sometimes it doesn\u0027t even get 1 iteration done before it gives up. Sometimes it stops at a severely suboptimal solution when a better one might exist. Sometimes it just goes on and on and on with no apparent significant change in results. Sometimes you\u0027re going to let it run overnight and you don\u0027t care how long it takes. It would be nice to have a setting where you could set how aggressively it tries to continue the search, including a \u0022keep looking until I tell you to stop\u0022 option. Paired with this, there have been times when the optimizer has found a good solution, then found steadily worsening solutions. When it stops working and asks you to accept, hitting yes currently accepts the last solution developed, rather than a better one several iterations ago. In my view, it would be better to store the best solution found so far, and when it concludes, Yes should select the best, rather than the most recent. Without this change to the acceptance behavior, running longer isn\u0027t likely to be very useful.\n\u003C/li\u003E\n\u003Cli\u003E\nModify the display of celestial body lists. This applies for example to the list of bodies to consider in \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E transition coasts. It\u0027s hard for me to remember whether Hale is a moon of Sarnus or Urlum. Since we already have a heirarchy of planet SoIs, I propose that the hierarchy be displayed when the user is prompted for a list of celestial bodies to choose from. This could be accomplished by a pre-order traversal of the body hierarchy, with prepending of spaces or dashs to each body name equal to its distance from the root of the heirarchy. For example, Sun would have nothing prepended, Kerbin would be indented one space or dash, and Mun would get two. Entities with a common parent would be sorted in order of smallest SMA to largest SMA.\u00A0The indentation coupled with the pre-order traversal of the tree would result in a logical grouping of planets and moons for the user to choose from.\n\u003C/li\u003E\n\u003Cli\u003E\nPost-optimization scorecard. Sometimes when I\u0027m optimizing in MA, the objective function has improved while the constraints have worsened, or vice versa. It can also be unclear which variables have been changed to result in this new outcome. Proposal: in addition to\u00A0having a Yes/No dialog to choose whether to accept the new solution, provide an explanation of what changed as well. This would include an explanation of which variables were being tweaked by the optimizer, what their initial and final values were (with delta). Same for the constraints: which constraint was met or unmet, and by how much. This would make it easier for people to identify sticky wickets, like RAAN in our previous discussion, and help identify how much \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E\u003C/abbr\u003E is being expended for course corrections etc. Also include the final orbit data, as is currently visible while the optimizer is running. Having all this information available would make it much easier to determine whether the new solution is superior to the original, in the eyes of the orbit analyst. This item would also include a \u0022keep working on it\u0022 button, re the persistence setting discussed above.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nIf I can finish planning this mission, I\u0027d have a couple of suggestions for tweaks to the included tutorials. I\u0027d be happy to provide pull requests for those, though I only see one of them in the source tree on github. I also have an idea or two for additional tutorial PDFs that I might be able to write if someone\u0027s willing to verify their technical accuracy.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, take these or leave them. The tool is already awesome as it is. Much thanks as always!\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: also, it would be nice if the optimizer window didn\u0027t keep popping to the foreground every time it repainted. Makes it hard to multitask. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-03T21:07:04Z\u0022 title=\u002207/03/2016 09:07  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 3, 2016\u003C/time\u003E by jakkarth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-03T22:31:20Z","Content":"\n\u003Cp\u003E\nAlright, giving up for the day. I spent a solid 11 hours today working on this mission and I still haven\u0027t gotten to Sarnus, let alone Urlum. It went from exciting to challenging and now frustrating. \u003Ca href=\u0022http://silenttosaturn.com/ksptot/frustration.mat\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s my current attempt\u003C/a\u003E. Note that somehow the optimizer got event 3\u0027s radial component outside of the optimizer bounds, which I believe is a bug. You can see I added coasts to Sarnus, but the inbound hyperbolic to Jool was so screwed up that my correction burn at Jool was in excess of 1500m/s when I was planning for 0. My attempts to get the Jool inbound back on track have been unsuccessful. At this point I have no idea why it can\u0027t find a workable solution or what to do about it, and I\u0027m too frustrated to keep beating my head against the problem for now. I may look at it again in a couple of days. Thanks for all your help today, have a fun holiday \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEdit: event 6 is way out of bounds on all three components as well.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-03T22:34:15Z\u0022 title=\u002207/03/2016 10:34  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 3, 2016\u003C/time\u003E by jakkarth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rasta013","CreatedById":140002,"CreatedDateTime":"2016-07-04T05:31:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222659788\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467568306\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve never used Real Atmospheres before, but by all means give it a whirl and report back with your results.\u00A0 Thanks! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI am very happy and pleased to report that this is a beautiful tool and believe this\u00A0should be re-iterated as many times as possible. \u00A0It picked up all the atmosphere changes perfectly with absolutely no issues whatsoever for all bodies. \u00A0So, chalk up another body changing mod that KSPTOT just shrugs off and chugs along working like a charm!\n\u003C/p\u003E\n\u003Cp\u003E\nAs always, thank you so much\u00A0for this utterly amazing and fun tool!\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-04T13:08:30Z","Content":"\n\u003Cp\u003E\nI had a breakthrough this morning when I was looking over my notes. It turns out that the initial radius of periapse for the Jool flyby isn\u0027t 6200km after all. I had this idea that I had to skim the top of the atmosphere almost in order to make the best use of a gravity assist, but that seems to not by the case in my example. I guess it would have added too much \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E? Anyway, adjusting the radius of periapse constraint to match MFMS\u0027s suggestion made everything work\u00A0\u003Cem\u003Esignificantly\u003C/em\u003E\u00A0better. My Jool correction burn is now under 30m/s, and I have had no trouble following the same steps to achieve my Sarnus and Urlum flybys. Thanks for your patience Arrowstar, as we had surmised it was a user error problem, not an issue with the tool. I do occasionally end up with variables outside of their assigned limits though (not constraints, but input variables), but it\u0027s manageable. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-04T14:48:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660493\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467610313\u0022 data-ipsquote-userid=\u0022140002\u0022 data-ipsquote-username=\u0022rasta013\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, rasta013 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am very happy and pleased to report that this is a beautiful tool and believe this\u00A0should be re-iterated as many times as possible. \u00A0It picked up all the atmosphere changes perfectly with absolutely no issues whatsoever for all bodies. \u00A0So, chalk up another body changing mod that KSPTOT just shrugs off and chugs along working like a charm!\n\u003C/p\u003E\n\u003Cp\u003E\nAs always, thank you so much\u00A0for this utterly amazing and fun tool!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHurrah!\u00A0 Glad to hear it.\u00A0 Thanks for testing it out, and do feel free to ask any other questions you have in the future.\u00A0 Happy orbiting. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660826\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467637710\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI had a breakthrough this morning when I was looking over my notes. It turns out that the initial radius of periapse for the Jool flyby isn\u0027t 6200km after all. I had this idea that I had to skim the top of the atmosphere almost in order to make the best use of a gravity assist, but that seems to not by the case in my example. I guess it would have added too much \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E\u003C/abbr\u003E? Anyway, adjusting the radius of periapse constraint to match MFMS\u0027s suggestion made everything work\u00A0\u003Cem\u003Esignificantly\u003C/em\u003E\u00A0better. My Jool correction burn is now under 30m/s, and I have had no trouble following the same steps to achieve my Sarnus and Urlum flybys. Thanks for your patience Arrowstar, as we had surmised it was a user error problem, not an issue with the tool. I do occasionally end up with variables outside of their assigned limits though (not constraints, but input variables), but it\u0027s manageable. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh, yes, that will do it.\u00A0 When you fly by major body like Jool, you may not need all of the gravity assist it can provide.\u00A0 What you\u0027re after is not the largest speed increase after the flyby, but the \u003Cem\u003Emost fuel efficient\u003C/em\u003E trajectory from A to B.\u00A0 Too much gravity assist will be just as problematic in this case as too little. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnyway, glad you got it figured out!\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, regarding your suggestions above: I generally like them.\u00A0 Here are my comments.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0 MFMS warning. Somewhere around page 15 I think, there was a discussion about infinitesimal \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E sizes in KSPTOT tools other than MA. I don\u0027t know if this is still the case or not. It was cited as a reason that MFMS results shouldn\u0027t be used directly, because you might hit other intermediate SoIs or encounter other problems, and that the results should be used as initial guesses in MA instead. If it is still the case that MFMS results shouldn\u0027t be used directly, having some kind of warning on that tool\u0027s view might be helpful to people unaware of that. (This would have saved me about 30 minutes when I first got started)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is an interesting point and I\u0027ll take it under consideration.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0 MA Optimizer persistence setting. Sometimes it doesn\u0027t even get 1 iteration done before it gives up. Sometimes it stops at a severely suboptimal solution when a better one might exist. Sometimes it just goes on and on and on with no apparent significant change in results. Sometimes you\u0027re going to let it run overnight and you don\u0027t care how long it takes. It would be nice to have a setting where you could set how aggressively it tries to continue the search, including a \u0022keep looking until I tell you to stop\u0022 option. Paired with this, there have been times when the optimizer has found a good solution, then found steadily worsening solutions. When it stops working and asks you to accept, hitting yes currently accepts the last solution developed, rather than a better one several iterations ago. In my view, it would be better to store the best solution found so far, and when it concludes, Yes should select the best, rather than the most recent. Without this change to the acceptance behavior, running longer isn\u0027t likely to be very useful.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUnfortunately this one I don\u0027t have a ton of control over.\u00A0 Mission Architect calls an internal MATLAB function called \u0022fmincon\u0022 (function minimize constrained) and that code does the actual optimization, only calling bits of MA code to evaluate constraints and the objective function.\u00A0 The reason the optimizer sometimes takes forever to stop after it looks like it\u0027s found a solution is because it has not quite yet met the tolerances for minimum change on either the objective function, the constraint values, or (usually) the variables.\u00A0 I could make these user definable, but as they have a huge impact on the way the optimizer runs (stops too soon, stops too late, etc) and because they don\u0027t correspond to anything physical (they\u0027re just an abstract tolerance), I\u0027m more inclined to leave them hidden so people don\u0027t get confused.\u00A0 The current values seem to work well enough most of the time.\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, with an optimizer like this there really is no \u0022leave it overnight\u0022 functionality possible.\u00A0 The mathematical algorithm will stop when it is designed to stop, regardless of how long or short it takes.\u00A0 What you\u0027re thinking of is more of a brute-force, \u0022search the whole trade space\u0022 kind of approach.\u00A0 That usually doesn\u0027t work well for these sorts of problems, though, as it\u0027s impossible to know how coarse or fine the search grid would need to be in order to perform the search.\u00A0 Not to mention the amount of RAM that would be required to store the results lol. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0 Modify the display of celestial body lists. This applies for example to the list of bodies to consider in \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E transition coasts. It\u0027s hard for me to remember whether Hale is a moon of Sarnus or Urlum. Since we already have a heirarchy of planet SoIs, I propose that the hierarchy be displayed when the user is prompted for a list of celestial bodies to choose from. This could be accomplished by a pre-order traversal of the body hierarchy, with prepending of spaces or dashs to each body name equal to its distance from the root of the heirarchy. For example, Sun would have nothing prepended, Kerbin would be indented one space or dash, and Mun would get two. Entities with a common parent would be sorted in order of smallest SMA to largest SMA. The indentation coupled with the pre-order traversal of the tree would result in a logical grouping of planets and moons for the user to choose from.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis one isn\u0027t a bad idea and something I\u0027ll look into.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0 Post-optimization scorecard. Sometimes when I\u0027m optimizing in MA, the objective function has improved while the constraints have worsened, or vice versa. It can also be unclear which variables have been changed to result in this new outcome. Proposal: in addition to having a Yes/No dialog to choose whether to accept the new solution, provide an explanation of what changed as well. This would include an explanation of which variables were being tweaked by the optimizer, what their initial and final values were (with delta). Same for the constraints: which constraint was met or unmet, and by how much. This would make it easier for people to identify sticky wickets, like RAAN in our previous discussion, and help identify how much \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E is being expended for course corrections etc. Also include the final orbit data, as is currently visible while the optimizer is running. Having all this information available would make it much easier to determine whether the new solution is superior to the original, in the eyes of the orbit analyst. This item would also include a \u0022keep working on it\u0022 button, re the persistence setting discussed above.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNow this is something I\u0027ve wanted to do for a while but kept forgetting about.\u00A0 Anyway, luckily for you, me, and everyone else the actual implementation was very straight-forward, so I just went ahead and did it.\u00A0 Here\u0027s what will come up now after optimization finishes instead of the yes/no prompt that I had before.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0HpfHsu.png\u0022 alt=\u00220HpfHsu.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe code now lets you select from one of three results: the final optimization iteration (basically this is what you were always getting up until now), the iteration with the best functional value, and the iteration with the best constraint violation value.\u00A0 The best functional and constraint violation values are highlighted in green to make them obvious.\u00A0 If multiple iterations have the same value, all iterations with that functional/constraint value get highlighted.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/XRStiYp.png\u0022 alt=\u0022XRStiYp.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIf you want to discard the results of the optimization, you push the button at the button.\u00A0 This is equivalent to pushing \u0022No\u0022 when previously asked if you wanted to keep the optimization results before.\n\u003C/p\u003E\n\u003Cp\u003E\nYou will notice that I don\u0027t have anything on here describing the optimization variables.\u00A0 There are three reasons for this:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nWhen deciding whether to keep an optimization result, decision-making primarily revolves around how well the optimizer did at minimizing the objective function or avoiding constraint violations, not what variable values it had to use to do so.\n\u003C/li\u003E\n\u003Cli\u003E\nThe variable values actually get scaled and normalized and the like before going into the optimizer algorithm, so their actual values are a bit useless.\u00A0 I could transform them back to their \u0022real\u0022 values earlier for something like this, but not without some effort.\n\u003C/li\u003E\n\u003Cli\u003E\nThere really isn\u0027t a good way of displaying variable-sized UI elements in MATLAB.\u00A0 The GUI editor just isn\u0027t that sophisticated.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nThe first point there is the main reason, the others are just support.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027d be happy to hear about your feedback on this!\u00A0 \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-gaiiden/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103177\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/103177-gaiiden/\u0022 rel=\u0022\u0022\u003E@Gaiiden\u003C/a\u003E, if you have any suggestions or comments, I would appreciate them too!\n\u003C/p\u003E\n\u003Cp\u003E\nOh, finally, you mentioned something about tutorials.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf I can finish planning this mission, I\u0027d have a couple of suggestions for tweaks to the included tutorials. I\u0027d be happy to provide pull requests for those, though I only see one of them in the source tree on github. I also have an idea or two for additional tutorial PDFs that I might be able to write if someone\u0027s willing to verify their technical accuracy.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPlease do feel free to provide me with feedback/comments/suggestions on the tutorials!\u00A0 Ignore the github for now, it hasn\u0027t been updated in a long time because I ran into an issue with using the git software on my PC and things got very out of sync. And if you want to write up other tutorials, please by all means do so!\u00A0 I will check them for technical accuracy and the like.\u00A0 Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-04T15:26:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660915\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467643730\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAh, yes, that will do it.\u00A0 When you fly by major body like Jool, you may not need all of the gravity assist it can provide.\u00A0 What you\u0027re after is not the largest speed increase after the flyby, but the \u003Cem\u003Emost fuel efficient\u003C/em\u003E trajectory from A to B.\u00A0 Too much gravity assist will be just as problematic in this case as too little. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs far as I can tell in the two PDF tutorials included, both of them push as close to the assisting body as possible (calculations shown for equatorial radius plus height of atmosphere plus fudge room). If it would be easy to do so, finding an example (such as the one I\u0027m working through) to use that shows that scraping the atmosphere isn\u0027t always optimal might be beneficial. Otherwise, mentioning it the first time you add the radius of periapsis constraint would be sufficient. In the Solar System Edge tutorial, it might make sense to include it on page 23, where you talk a bit about why you\u0027re using radius instead of SMA. Since the mission I\u0027m planning now includes an example of this, basing a tutorial on it might be fun. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is an interesting point and I\u0027ll take it under consideration.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m less convinced this is the case now, as actually using the data it provided turned out to be quite helpful once I realized what I was missing. Instead, I\u0027d like to drop this suggestion and replace it with another.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter using the MFMS to find some flybys, it would be convenient if there was a single-click way to import the results into MA. This would be as simple as coast to true anomaly \u002B (burn \u002B coast to peri) * remaining bodies. Probably also set the initial state. Could optionally include adding constraints for inbound hyperbolic orbital parameters with reasonable bounds.\u00A0Then one could proceed in adjusting with the optimizer to ensure all bodies are reached correctly, and from there refine the maneuvers for specific mission goals. Saves a little setup time.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUnfortunately this one I don\u0027t have a ton of control over.\u00A0 Mission Architect calls an internal MATLAB function called \u0022fmincon\u0022 (function minimize constrained) and that code does the actual optimization, only calling bits of MA code to evaluate constraints and the objective function.\u00A0 The reason the optimizer sometimes takes forever to stop after it looks like it\u0027s found a solution is because it has not quite yet met the tolerances for minimum change on either the objective function, the constraint values, or (usually) the variables.\u00A0 I could make these user definable, but as they have a huge impact on the way the optimizer runs (stops too soon, stops too late, etc) and because they don\u0027t correspond to anything physical (they\u0027re just an abstract tolerance), I\u0027m more inclined to leave them hidden so people don\u0027t get confused.\u00A0 The current values seem to work well enough most of the time.\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, with an optimizer like this there really is no \u0022leave it overnight\u0022 functionality possible.\u00A0 The mathematical algorithm will stop when it is designed to stop, regardless of how long or short it takes.\u00A0 What you\u0027re thinking of is more of a brute-force, \u0022search the whole trade space\u0022 kind of approach.\u00A0 That usually doesn\u0027t work well for these sorts of problems, though, as it\u0027s impossible to know how coarse or fine the search grid would need to be in order to perform the search.\u00A0 Not to mention the amount of RAM that would be required to store the results lol. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDisappointing, but an excellent explanation. The machine I\u0027m running KSPTOT on is an 8-core with 32gb ram. Obviously being a 32bit application it can\u0027t use all of that memory. How does KSPTOT do with using available cpu cores? I see a lot of mention of vectorization in this thread, but parallelization a bit less often. Perhaps I\u0027ll open up the task manager and monitor my next few runs and report my observations.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis one isn\u0027t a bad idea and something I\u0027ll look into.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI hope this makes it in. My current method involves either googling for OPM wiki pages or using the Celestial Body Catalog and brute forcing it by hand.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNow this is something I\u0027ve wanted to do for a while but kept forgetting about.\u00A0 Anyway, luckily for you, me, and everyone else the actual implementation was very straight-forward, so I just went ahead and did it.\u00A0 Here\u0027s what will come up now after optimization finishes instead of the yes/no prompt that I had before.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220HpfHsu.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0HpfHsu.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe code now lets you select from one of three results: the final optimization iteration (basically this is what you were always getting up until now), the iteration with the best functional value, and the iteration with the best constraint violation value.\u00A0 The best functional and constraint violation values are highlighted in green to make them obvious.\u00A0 If multiple iterations have the same value, all iterations with that functional/constraint value get highlighted.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022XRStiYp.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/XRStiYp.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIf you want to discard the results of the optimization, you push the button at the button.\u00A0 This is equivalent to pushing \u0022No\u0022 when previously asked if you wanted to keep the optimization results before.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is absolutely fantastic! The method of selecting which results to use (or discarding) is exactly what I was hoping for, and the display of which values were optimized in which case is great.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou will notice that I don\u0027t have anything on here describing the optimization variables.\u00A0 There are three reasons for this:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nWhen deciding whether to keep an optimization result, decision-making primarily revolves around how well the optimizer did at minimizing the objective function or avoiding constraint violations, not what variable values it had to use to do so.\n\u003C/li\u003E\n\u003Cli\u003E\nThe variable values actually get scaled and normalized and the like before going into the optimizer algorithm, so their actual values are a bit useless.\u00A0 I could transform them back to their \u0022real\u0022 values earlier for something like this, but not without some effort.\n\u003C/li\u003E\n\u003Cli\u003E\nThere really isn\u0027t a good way of displaying variable-sized UI elements in MATLAB.\u00A0 The GUI editor just isn\u0027t that sophisticated.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nThe first point there is the main reason, the others are just support.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is somewhat less ideal. I had two thoughts behind asking for the variables to be included, which I should have mentioned originally. First, sometimes I forget which variables I selected when I opened the optimizer, and I\u0027ve realized at the end of a run that I was tweaking something I didn\u0027t intend to. User error to be sure, but labelling the variables with a name (jool flyby burn - prograde) would be a nice safety measure. The other reason is that sometimes I\u0027m not very good at picking my bounds for the variables, and it would be nice to know (possibly even during the optimization run in addition to the end) how close the variables are to their bounds. I don\u0027t particularly care about the real values, just how likely it was that the optimal solution was outside of them, without having to look inside each event to see.\n\u003C/p\u003E\n\u003Cp\u003E\nOn a side note for that last point, I see the yellow warning listing the events close to boundary, but I have to hover over it to see the actual event numbers; they\u0027re off the right edge of that list item, and there\u0027s no horizontal scrolling.\n\u003C/p\u003E\n\u003Cp\u003E\nAny luck with the bug about optimizer pushing the variables out of their bounds?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPlease do feel free to provide me with feedback/comments/suggestions on the tutorials!\u00A0 Ignore the github for now, it hasn\u0027t been updated in a long time because I ran into an issue with using the git software on my PC and things got very out of sync. And if you want to write up other tutorials, please by all means do so!\u00A0 I will check them for technical accuracy and the like.\u00A0 Thanks!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcellent. Assuming I can get this mission planned, I\u0027d like to do a three-part series. The first would be getting to Urlum by way of Jool and Sarnus, and the second part would be doing flybys of the moons there. The first part would focus more on the gravity assist aspects of it and how to tune the optimizer to get where you want to go, while the second would focus more on timing, \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E efficiency and doing rendezvous with planets and moons in a system not centered on Sun. Part three would be about getting all the science back to Kerbin. Basically it would be a\u00A0MFMS plan kerbin-\u0026gt;jool-\u0026gt;sarnus-\u0026gt;urlum-\u0026gt;kerbin, with some stuff mixed in at ulrum in the middle of the circuit.\n\u003C/p\u003E\n\u003Cp\u003E\nAssuming I can actually figure out how to do all that, and the tutorial document I provide for your review meets with your approval, I\u0027d be open to suggestions for further ideas to cover. I know I\u0027ve barely scratched the surface of what KSPTOT is able to accomplish.\n\u003C/p\u003E\n\u003Cp\u003E\nMany thanks for your work, and even on a holiday! Any chance I can get a dev build of the optimizer scorecard? \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Stract","CreatedById":165952,"CreatedDateTime":"2016-07-04T15:38:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222659788\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467568306\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt does appear that something funny is going on.\u00A0 Can you check the bodies.ini file you\u0027re using to make sure that everything contained in it (that is relevant to your mission design work) looks right?\u00A0 I\u0027m at a bit of a loss I\u0027m afraid.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHi again Arrowstar!\n\u003C/p\u003E\n\u003Cp\u003E\nYes, it seems something is wrong with my bodies.ini file. The physical and orbital parameters seems to match with game data (and wikipedia:)).\u00A0But when I played a bit with\u00A0my first example (with the Mars), I\u0027ve noticed that distance between probe and Mars is different in game and in TOT. One hour before entering Mars\u00A0\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E this difference was about 1000 km. Also the moment\u00A0of entering the Mars \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E in game happend\u00A06 minutes earlier than\u00A0TOT expected.\u00A0\u00A0Not much but probably enough to create this error in orbit prediction. So I supposed that position of Mars on its orbit in bodies.ini is slightly shifted from the in-game position. I tweaked the Mars mean anomaly in bodies.ini to fit the Mars fly-by\u00A0orbit and finally succeded. When I changed the Mars mean anomaly by\u00A00.00029 degrees, all data was matched with a good presision. Confidend that I\u0027ve found the solution, I decided to do the same for Jupiter fly-by (the second example I\u0027ve posted earlier). But here this method didn\u0027t work for some reason. My ingame Jupiter periapsis is 4.11 Gm, but I wasn\u0027t able to get it by tweaking Jupiter mean anomaly in bodies.ini. The tendency was good, the orbit parameters became closer and closer to\u00A0correct ones while I\u0027ve increased the mean anomaly step by step. The closest value was 4.05 Gm and about 1 degree difference in inclination, but when\u00A0I changed\u00A0the mean anomaly value just a bit more, TOT lose the Jupiter \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E completely. I\u0027ve tried to play with epoch instead, but the result was the same.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve checked this in fresh game installation with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E mod only, but the problem remains there. Still maybe it is just my game version (1.1.2), or something else.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2016-07-04T15:48:44Z","Content":"\n\u003Cp\u003E\nLoving all of it, great work as always Arrowstar and good job on the suggestions, Jakkarth. Reading your troubles reminded me of when I first started using this tool. Don\u0027t worry it just gets easier and more complex at the same time \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-04T15:50:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660915\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467643730\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n58 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMission Architect calls an internal MATLAB function called \u0022fmincon\u0022\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs I continue to learn new things today, I came across an option in MFMS titled \u0022Number of Runs\u0022. It appears to simply run the MFMS calculations over and over. Perhaps such an option could be appropriate for MA\u0027s optimizer? I understand the rationale behind not letting users directly tweak the optimizer\u0027s stop conditions, but perhaps this would be a reasonable compromise? The Stop button would need to terminate not only the current run, but skip any subsequent runs as well, and then the scorecard could be shown using the best data from each run completed plus the last iteration of the last run.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661004\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467647324\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Gaiiden\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Gaiiden said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nReading your troubles reminded me of when I first started using this tool.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI am glad to find myself in such good company \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-04T16:38:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660974\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467646015\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPerhaps I\u0027ll open up the task manager and monitor my next few runs and report my observations.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt seems that, at least when calculating flybys with MFMS, only a single core is utilized effectively.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/u1CiZtR\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/u1CiZtR\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-04T17:31:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660974\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467646015\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAfter using the MFMS to find some flybys, it would be convenient if there was a single-click way to import the results into MA. This would be as simple as coast to true anomaly \u002B (burn \u002B coast to peri) * remaining bodies. Probably also set the initial state. Could optionally include adding constraints for inbound hyperbolic orbital parameters with reasonable bounds.\u00A0Then one could proceed in adjusting with the optimizer to ensure all bodies are reached correctly, and from there refine the maneuvers for specific mission goals. Saves a little setup time.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo I know this sounds appealing, but trust me when I say it\u0027ll just cause more headaches than it will solve. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 The big hang up is that the optimizer just can\u0027t handle doing more than one or (MAYBE) two legs of the journey at once.\u00A0 The problem is just too non-linear and small changes in variables can result in very large changes down the road.\u00A0 Volatile is the word I think I\u0027m looking for.\u00A0 In any event, if you tried to achieve all the constraints at once while optimizing the mission goals, you would basically just fail spectacularly.\u00A0 Trust me, I\u0027ve tried it. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0 (You\u0027re welcome to give it a try and see what I mean!)\u00A0 There are also some potential usability issues:\n\u003C/p\u003E\n\u003Cp\u003E\nNew users will assume that the resulting Mission Architect plan will exactly match the plan in MFMS (but it won\u0027t because of the infinitesimal sphere of influence as we discussed earlier).\u00A0 Experienced users will probably end up deleting all but the initial portion of it so they can set up maneuvers and coasts and whatnot as they see fit.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s a great suggestion and one I\u0027ve toyed with in my head since Mission Architect got off the ground.\u00A0 I just don\u0027t see it saving anyone much time once the hassle is factored in. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDisappointing, but an excellent explanation. The machine I\u0027m running KSPTOT on is an 8-core with 32gb ram. Obviously being a 32bit application it can\u0027t use all of that memory. How does KSPTOT do with using available cpu cores? I see a lot of mention of vectorization in this thread, but parallelization a bit less often. Perhaps I\u0027ll open up the task manager and monitor my next few runs and report my observations.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo the application should actually be 64-bit.\u00A0 I\u0027m building everything with the x64 version of MATLAB R2015b.\u00A0 Does it only show up as a 32-bit application to you?\n\u003C/p\u003E\n\u003Cp\u003E\nAs far as CPU cores: MATLAB is inherently single-core limited except in two cases:\n\u003C/p\u003E\n\u003Cp\u003E\n1) Where MathWorks has optimized the underlying FORTRAN numerical libraries to be multi-threaded; and\n\u003C/p\u003E\n\u003Cp\u003E\n2) Where I decide to explicitly make use of multi-threading for calculations.\u00A0 Most of the time this is not as efficient as writing vectorized code, so I have only done it in one or two places.\n\u003C/p\u003E\n\u003Cp\u003E\nStarting the thread pool in MATLAB actually takes like 30 seconds for some weird reason so I don\u0027t like using the Parallel Computing Toolbox library unless I \u003Cem\u003Ereally\u003C/em\u003E need to.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is somewhat less ideal. I had two thoughts behind asking for the variables to be included, which I should have mentioned originally. First, sometimes I forget which variables I selected when I opened the optimizer, and I\u0027ve realized at the end of a run that I was tweaking something I didn\u0027t intend to. User error to be sure, but labelling the variables with a name (jool flyby burn - prograde) would be a nice safety measure. The other reason is that sometimes I\u0027m not very good at picking my bounds for the variables, and it would be nice to know (possibly even during the optimization run in addition to the end) how close the variables are to their bounds. I don\u0027t particularly care about the real values, just how likely it was that the optimal solution was outside of them, without having to look inside each event to see.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can definitely understand wanting this information.\u00A0 But my confusion comes in when I think about how it would help you choose what to do with the optimizer output.\u00A0 Are you making the decision in part based on the values of the variables?\u00A0 If not, why not just accept the optimizer result based on the objective function value and/or constraint value and then look up the variables information in the main UI afterwards?\n\u003C/p\u003E\n\u003Cp\u003E\nKeep in mind that you can undo optimization (Edit -\u0026gt; Undo) so if you do something you didn\u0027t want to do (like having the wrong variables selected), fixing it is a few clicks away. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOn a side note for that last point, I see the yellow warning listing the events close to boundary, but I have to hover over it to see the actual event numbers; they\u0027re off the right edge of that list item, and there\u0027s no horizontal scrolling.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, that whole scroll area is a bit of a hack unfortunately lol.\u00A0 MATLAB doesn\u0027t really have scroll panes in it, so I was able to fake the vertical scrolling with a bit of a trick.\u00A0 Horizontal scrolling, I\u0027m not sure how that would work.\u00A0 For now, just use the mouse-over text to read the whole message while I think about improving that. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAny luck with the bug about optimizer pushing the variables out of their bounds?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is actually an issue with FMINCON.\u00A0 It doesn\u0027t necessarily respect bounds at every iteration, despite my insistence that it do so.\u00A0 I\u0027ve looked into it before without much luck, sadly.\u00A0 Probably won\u0027t be able to do much here.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nExcellent. Assuming I can get this mission planned, I\u0027d like to do a three-part series. The first would be getting to Urlum by way of Jool and Sarnus, and the second part would be doing flybys of the moons there. The first part would focus more on the gravity assist aspects of it and how to tune the optimizer to get where you want to go, while the second would focus more on timing, \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E efficiency and doing rendezvous with planets and moons in a system not centered on Sun. Part three would be about getting all the science back to Kerbin. Basically it would be a MFMS plan kerbin-\u0026gt;jool-\u0026gt;sarnus-\u0026gt;urlum-\u0026gt;kerbin, with some stuff mixed in at ulrum in the middle of the circuit.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis all sounds great!\u00A0 Let me know when you have something you want to share. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMany thanks for your work, and even on a holiday! Any chance I can get a dev build of the optimizer scorecard? \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/29126891/KSPTOT_v155_prerelease6.zip\u0022 rel=\u0022external nofollow\u0022\u003EEnjoy!\u003C/a\u003E\u00A0 Please provide feedback on what you think along with any new suggestions to improve the scorecard that you come up with while using it.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661004\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467647324\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Gaiiden\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Gaiiden said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLoving all of it, great work as always Arrowstar\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks!\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661007\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467647423\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs I continue to learn new things today, I came across an option in MFMS titled \u0022Number of Runs\u0022. It appears to simply run the MFMS calculations over and over. Perhaps such an option could be appropriate for MA\u0027s optimizer? I understand the rationale behind not letting users directly tweak the optimizer\u0027s stop conditions, but perhaps this would be a reasonable compromise? The Stop button would need to terminate not only the current run, but skip any subsequent runs as well, and then the scorecard could be shown using the best data from each run completed plus the last iteration of the last run.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis works for MFMS because I use a genetic algorithm that, by definition, starts at a different point (or really, 1000 different points) within the trade space at each run.\u00A0 And each starting point is completely random, which is why the results of the MFMS are also somewhat random.\u00A0 The ability to do this, by the way, is a unique feature of genetic algorithms.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is not the case for MA.\u00A0 FMINCON is a deterministic optimization algorithm, which means that it returns the same results for the same inputs.\u00A0 The optimization also always starts with a known starting point: the mission plan as it currently exists.\u00A0 So we have \u0022same inputs\u0022 \u002B \u0022deterministic algorithm\u0022 = \u0022same result each time.\u0022\u00A0 This means that it doesn\u0027t matter how many times you run the MA optimizer, you\u0027ll get the same result back each time.\u00A0 And because of this, it doesn\u0027t make sense to implement that kind of feature that MFMS has in MA.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661064\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467650287\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n45 minutes ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt seems that, at least when calculating flybys with MFMS, only a single core is utilized effectively.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/u1CiZtR\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/u1CiZtR\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCorrect, see my notes above.\u00A0 MFMS is highly vectorized but this has the disadvantage of primarily sitting on one CPU.\u00A0 Note that going to a parallel solution would be an order of magnitude slower than what I have now because vectorized code in MATLAB is insanely fast, so this is probably as good as it\u0027s going to get.\u00A0 And no, parallelizing the vectorization across more than one CPU is not supported by MATLAB at the moment. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660991\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467646737\u0022 data-ipsquote-userid=\u0022165952\u0022 data-ipsquote-username=\u0022Stract\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Stract said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi again Arrowstar!\n\u003C/p\u003E\n\u003Cp\u003E\nYes, it seems something is wrong with my bodies.ini file. The physical and orbital parameters seems to match with game data (and wikipedia:)).\u00A0But when I played a bit with\u00A0my first example (with the Mars), I\u0027ve noticed that distance between probe and Mars is different in game and in TOT. One hour before entering Mars\u00A0\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E this difference was about 1000 km. Also the moment\u00A0of entering the Mars \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E in game happend\u00A06 minutes earlier than\u00A0TOT expected.\u00A0\u00A0Not much but probably enough to create this error in orbit prediction. So I supposed that position of Mars on its orbit in bodies.ini is slightly shifted from the in-game position. I tweaked the Mars mean anomaly in bodies.ini to fit the Mars fly-by\u00A0orbit and finally succeded. When I changed the Mars mean anomaly by\u00A00.00029 degrees, all data was matched with a good presision. Confidend that I\u0027ve found the solution, I decided to do the same for Jupiter fly-by (the second example I\u0027ve posted earlier). But here this method didn\u0027t work for some reason. My ingame Jupiter periapsis is 4.11 Gm, but I wasn\u0027t able to get it by tweaking Jupiter mean anomaly in bodies.ini. The tendency was good, the orbit parameters became closer and closer to\u00A0correct ones while I\u0027ve increased the mean anomaly step by step. The closest value was 4.05 Gm and about 1 degree difference in inclination, but when\u00A0I changed\u00A0the mean anomaly value just a bit more, TOT lose the Jupiter \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E completely. I\u0027ve tried to play with epoch instead, but the result was the same.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve checked this in fresh game installation with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E mod only, but the problem remains there. Still maybe it is just my game version (1.1.2), or something else.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell that\u0027s strange.\u00A0 Could it be a numerical truncation issue with the values in the bodies.ini file maybe?\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-04T18:53:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661126\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467653475\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I know this sounds appealing, but trust me when I say it\u0027ll just cause more headaches than it will solve. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 The big hang up is that the optimizer just can\u0027t handle doing more than one or (MAYBE) two legs of the journey at once.\u00A0 The problem is just too non-linear and small changes in variables can result in very large changes down the road.\u00A0 Volatile is the word I think I\u0027m looking for.\u00A0 In any event, if you tried to achieve all the constraints at once while optimizing the mission goals, you would basically just fail spectacularly.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy intention wasn\u0027t to optimize the entire path at once, but rather to check the opt? flags on the initial departure burn and run, then turn them off and turn on the ones for arrival at jool and run, etc. What I\u0027ve been doing so far today has been to take the values from MFMS and plug them into each coast/burn as I go along, using MFMS values as initial guesses, and it\u0027s working out surprisingly well. I can understand the concern of someone not understanding that doing it in steps is required though. Perhaps a better approach would be to be able to copy-paste burns similar to how we can sometimes copy-paste orbits now. Or maybe it really won\u0027t save any trouble after all. You may have talked me out of this one.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStarting the thread pool in MATLAB actually takes like 30 seconds for some weird reason so I don\u0027t like using the Parallel Computing Toolbox library unless I \u003Cem\u003Ereally\u003C/em\u003E need to.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is not the case for MA.\u00A0 FMINCON is a deterministic optimization algorithm, which means that it returns the same results for the same inputs.\u00A0 The optimization also always starts with a known starting point: the mission plan as it currently exists.\u00A0 So we have \u0022same inputs\u0022 \u002B \u0022deterministic algorithm\u0022 = \u0022same result each time.\u0022\u00A0 This means that it doesn\u0027t matter how many times you run the MA optimizer, you\u0027ll get the same result back each time.\u00A0 And because of this, it doesn\u0027t make sense to implement that kind of feature that MFMS has in MA.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd no, parallelizing the vectorization across more than one CPU is not supported by MATLAB at the moment. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWell that\u0027s strange.\u00A0 Could it be a numerical truncation issue with the values in the bodies.ini file maybe?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIs that 30 seconds per operation, or 30 seconds at application start? Even in the second case that sounds absurd. I\u0027ve written multithreaded applications, including ones that use prebuilt pool libraries and ones where I\u0027ve built my own, that don\u0027t have that kind of start-up penalty. I guess you\u0027ve got to work with what you\u0027ve got though. Not a criticism, just surprising to me.\u00A0My goal in suggesting it was that perhaps you could have the vectorized code running different passes at the same time, but you\u0027ve shot that down as well.\n\u003C/p\u003E\n\u003Cp\u003E\nI was under the impression that MA\u0027s optimizer had some element of randomness to it as it adjusted the input variables. If it is deterministic, then running multiple of them in parallel will not provide any benefit, I agree. I don\u0027t know whether it makes sense to suggest adding some randomness or not; it seems like a genetic algorithm approach wouldn\u0027t be out of the question here, would it?\u00A0Or perhaps we could use some GPU/CUDA/OpenCL\u00A0horsepower?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI can definitely understand wanting this information.\u00A0 But my confusion comes in when I think about how it would help you choose what to do with the optimizer output.\u00A0 Are you making the decision in part based on the values of the variables?\u00A0 If not, why not just accept the optimizer result based on the objective function value and/or constraint value and then look up the variables information in the main UI afterwards?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is likely just naivety on my part. If I hit the boundaries, that would seem to indicate that I\u0027m asking the optimizer the wrong questions. If I max out my prograde on the jool assist burn, maybe that means I should be decreasing my periapsis instead, for example. The problem I\u0027m facing at the moment is that I\u0027m not familiar enough with what\u0027s going on to understand intuitively which variables hitting the boundaries would indicate what I should try next, and my default mode of operation is to try to collect more data on which to base my decisions. I agree that the information you\u0027ve already included in the scorecard is more valuable than the input variable values, and if you don\u0027t think it\u0027s worth including I\u0027m inclined to trust your judgement. I already have enough ways to shoot myself in the foot \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah, that whole scroll area is a bit of a hack unfortunately lol.\u00A0 MATLAB doesn\u0027t really have scroll panes in it, so I was able to fake the vertical scrolling with a bit of a trick.\u00A0 Horizontal scrolling, I\u0027m not sure how that would work.\u00A0 For now, just use the mouse-over text to read the whole message while I think about improving that. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt might be as simple as making the text shorter, or putting the event numbers at the beginning of the string instead of the end.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is actually an issue with FMINCON.\u00A0 It doesn\u0027t necessarily respect bounds at every iteration, despite my insistence that it do so.\u00A0 I\u0027ve looked into it before without much luck, sadly.\u00A0 Probably won\u0027t be able to do much here.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHopefully I won\u0027t be bumping into the boundaries in the first place, but if I do, perhaps you could display a note in the warnings and errors pane that some input variables are now outside of their designated tolerances? There\u0027s already a warning for being near them, it seems simple enough to update the verbiage if they\u0027re actually outside. While not a perfect fix, it could possibly avoid some confusion.\n\u003C/p\u003E\n\u003Cp\u003E\nEnough writing, time to try out the new build! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-04T21:21:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661233\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467658414\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs that 30 seconds per operation, or 30 seconds at application start? Even in the second case that sounds absurd. I\u0027ve written multithreaded applications, including ones that use prebuilt pool libraries and ones where I\u0027ve built my own, that don\u0027t have that kind of start-up penalty. I guess you\u0027ve got to work with what you\u0027ve got though. Not a criticism, just surprising to me.\u00A0My goal in suggesting it was that perhaps you could have the vectorized code running different passes at the same time, but you\u0027ve shot that down as well.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s one roughly 30 second hit at application start (or, more correctly, whenever you call the parallelpool() function).\u00A0 I have no idea why it takes so long for the thread pool to finish initializing, but it\u0027s definitely a non-trivial amount of time.\u00A0 I\u0027ve also done multi-threaded work in Java directly and that was fine, as you\u0027ve hinted at.\u00A0 It\u0027s something on the MATLAB side that causes the issue, but I just don\u0027t know what it is.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was under the impression that MA\u0027s optimizer had some element of randomness to it as it adjusted the input variables. If it is deterministic, then running multiple of them in parallel will not provide any benefit, I agree. I don\u0027t know whether it makes sense to suggest adding some randomness or not; it seems like a genetic algorithm approach wouldn\u0027t be out of the question here, would it?\u00A0Or perhaps we could use some GPU/CUDA/OpenCL\u00A0horsepower?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMA\u0027s optimizer is completely deterministic.\u00A0 It uses an algorithm called \u0022interior point\u0022 if you\u0027re interested in looking more into it.\u00A0 It\u0027s the best compromise between performance and robustness that MATLAB offers at the moment within the context of FMINCON.\u00A0 There\u0027s alsono real way to add randomness to it besides perturbing the initial inputs, and that just sounds problematic. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHopefully I won\u0027t be bumping into the boundaries in the first place, but if I do, perhaps you could display a note in the warnings and errors pane that some input variables are now outside of their designated tolerances? There\u0027s already a warning for being near them, it seems simple enough to update the verbiage if they\u0027re actually outside. While not a perfect fix, it could possibly avoid some confusion.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI could do that, might be worth a look there. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEnough writing, time to try out the new build! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEnjoy!\u00A0 Let me know what you think.\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-04T21:39:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661394\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467667313\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMA\u0027s optimizer is completely deterministic.\u00A0 It uses an algorithm called \u0022interior point\u0022 if you\u0027re interested in looking more into it.\u00A0 It\u0027s the best compromise between performance and robustness that MATLAB offers at the moment within the context of FMINCON.\u00A0 There\u0027s alsono real way to add randomness to it besides perturbing the initial inputs, and that just sounds problematic. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s no way to add some random jitter to the weights of the constraints or optimizing function perhaps?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI could do that, might be worth a look there. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhile you\u0027re tweaking labels and such, in the MFMS I noticed that changing the root celetisal body doesn\u0027t correctly update the window labels directly below the target list. It tends to say kerbin-\u0026gt;eve when I select Urlum. Obviously trivial but I figured I\u0027d mention it.\u00A0\u003Ca href=\u0022https://imgur.com/4Gbfb5N\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/4Gbfb5N\u003C/a\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEnjoy!\u00A0 Let me know what you think.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLoving it so far! I tried running it on a different machine so I could ksp simultaneously, but the other machine\u0027s performance was suboptimal.\n\u003C/p\u003E\n\u003Cp\u003E\nI recall something earlier in the thread about printable report sheets for maneuvers, that had diagrams and burn details etc. Is there something like that I could use to make pretty pictures for tutorial purposes?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-04T21:44:59Z\u0022 title=\u002207/04/2016 09:44  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 4, 2016\u003C/time\u003E by jakkarth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-05T00:50:48Z","Content":"\n\u003Cp\u003E\nOk, I\u0027m sure there\u0027s an obvious solution for this, and I feel silly for asking, but here goes anyway. So I\u0027ve made it to Urlum, I\u0027ve done my insertion burn and I\u0027ve got a nice circular orbit. Now I just need to wait a little while for the moons to align, and I can set off on a cheap flyby of the moons. I set MFMS to open the window after several orbits are completed around Urlum, and it finds me a nice set of maneuvers. This is where I get stuck. In the tutorials, I was going from Kerbin to Eve or similar; they\u0027re both children. Now I\u0027m going from orbit of a parent body to orbit of a child body. This means I can\u0027t use the initial orbit in MFMS to calculate my burn to start the flybys, and I can\u0027t use the main porkchop plot because the start and end have different parents. This leaves me with the Rendezvous Maneuver Sequencer, which gives me some information about the burn, but I can\u0027t specify an arrival time and orbit to optimize for. My plan was to take the burn parameters and transit duration, subtract the duration from my desired arrival time and use the parameters as initial guesses, and let MA\u0027s optimizer find me a burn that will send me off to Polta with the right values to be on track for the start of the flyby. However, this is proving problematic, as the transfer from my parking orbit to Polta is out of phase with the start of the flyby mission, so getting the orbital parameters to line up is proving problematic.\n\u003C/p\u003E\n\u003Cp\u003E\nWould it be better to recalculate MFMS with a very narrow start window based on my desired transfer from parking orbit to Polta? Is there some tool I\u0027m missing specifically designed for this problem (transfer from parent to child with specific child inbound characteristics)? Is my approach completely insane? Any guidance on how to approach this problem would be appreciated.\n\u003C/p\u003E\n\u003Cp\u003E\nOne other small suggestion\u00A0I\u0027ve come across in dealing with this exercise: it would be nice to have \u0022copy orbit to clipboard\u0022 be an option for entries in the event list in MA, rather than having to view state at event and\u00A0\u003Cem\u003Ethen\u003C/em\u003E\u00A0copy. Silly for sure, it\u0027s just two extra clicks, but I\u0027ve done it about 10 times in the last hour so I figured I\u0027d mention it.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd one final theory question for the evening: what circumstances cause the MA optimizer to bail after 0 iterations? I run into this sometimes and I have no idea what to do about it.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-05T00:54:26Z\u0022 title=\u002207/05/2016 12:54  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 5, 2016\u003C/time\u003E by jakkarth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-05T01:19:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661586\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467679848\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOk, I\u0027m sure there\u0027s an obvious solution for this, and I feel silly for asking, but here goes anyway. So I\u0027ve made it to Urlum, I\u0027ve done my insertion burn and I\u0027ve got a nice circular orbit. Now I just need to wait a little while for the moons to align, and I can set off on a cheap flyby of the moons. I set MFMS to open the window after several orbits are completed around Urlum, and it finds me a nice set of maneuvers. This is where I get stuck. In the tutorials, I was going from Kerbin to Eve or similar; they\u0027re both children. Now I\u0027m going from orbit of a parent body to orbit of a child body. This means I can\u0027t use the initial orbit in MFMS to calculate my burn to start the flybys, and I can\u0027t use the main porkchop plot because the start and end have different parents. This leaves me with the Rendezvous Maneuver Sequencer, which gives me some information about the burn, but I can\u0027t specify an arrival time and orbit to optimize for. My plan was to take the burn parameters and transit duration, subtract the duration from my desired arrival time and use the parameters as initial guesses, and let MA\u0027s optimizer find me a burn that will send me off to Polta with the right values to be on track for the start of the flyby. However, this is proving problematic, as the transfer from my parking orbit to Polta is out of phase with the start of the flyby mission, so getting the orbital parameters to line up is proving problematic.\n\u003C/p\u003E\n\u003Cp\u003E\nWould it be better to recalculate MFMS with a very narrow start window based on my desired transfer from parking orbit to Polta? Is there some tool I\u0027m missing specifically designed for this problem (transfer from parent to child with specific child inbound characteristics)? Is my approach completely insane? Any guidance on how to approach this problem would be appreciated.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUsing RMS is in fact the correct approach.\u00A0 Put your pre-burn orbit into the \u0022Initial Orbit Info\u0022 area and select the target celestial body in the \u0022Final (Desired) Orbit Info\u0022 area.\n\u003C/p\u003E\n\u003Cp\u003E\nYou actually can specify an arrival time, of sorts.\u00A0 No, you can\u0027t specify an exact arrival time.\u00A0 But set the \u0022Initial Epoch\u0022 area to, for example, the epoch of the initial orbit.\u00A0 Make sure you set the search window length to an appropriate value (You may have to play around with it).\n\u003C/p\u003E\n\u003Cp\u003E\nYou can try to use MA to target the burn directly, of course, optimizing on the burn true anomaly and burn delta-v vector, with the objective function set to \u0022Minimize Distance to Body\u0022.\u00A0 You may have varied results with this approach though.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes this makes sense? \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOne other small suggestion\u00A0I\u0027ve come across in dealing with this exercise: it would be nice to have \u0022copy orbit to clipboard\u0022 be an option for entries in the event list in MA, rather than having to view state at event and\u00A0\u003Cem\u003Ethen\u003C/em\u003E\u00A0copy. Silly for sure, it\u0027s just two extra clicks, but I\u0027ve done it about 10 times in the last hour so I figured I\u0027d mention it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood suggestion, thanks!\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd one final theory question for the evening: what circumstances cause the MA optimizer to bail after 0 iterations? I run into this sometimes and I have no idea what to do about it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis occurs when one of a few things occur:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nThe optimizer can\u0027t find a direction to move because all of the gradients it evaluates are upwards (basically the optimizer thinks it\u0027s at a local minimum).\n\u003C/li\u003E\n\u003Cli\u003E\nThe optimizer can\u0027t find a direction that minimizes the maximum violated constraint value.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nThe way around this is to either change up your objective function or loosen up at least one of your constraints.\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-05T01:28:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661605\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467681552\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUsing RMS is in fact the correct approach.\u00A0 Put your pre-burn orbit into the \u0022Initial Orbit Info\u0022 area and select the target celestial body in the \u0022Final (Desired) Orbit Info\u0022 area.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou actually can specify an arrival time, of sorts.\u00A0 No, you can\u0027t specify an exact arrival time.\u00A0 But set the \u0022Initial Epoch\u0022 area to, for example, the epoch of the initial orbit.\u00A0 Make sure you set the search window length to an appropriate value (You may have to play around with it).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo, basically that\u0027s what I had tried. The issue is that the Final Orbit Info is relative to the parent body, while I wanted to specify orbit values for the child body when crossing the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E boundary. So it sounds like I was on the right track and I just need to beat my head against it some more.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou can try to use MA to target the burn directly, of course, optimizing on the burn true anomaly and burn delta-v vector, with the objective function set to \u0022Minimize Distance to Body\u0022.\u00A0 You may have varied results with this approach though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is where I end up after following the above suggestion. I take the values that RMS provides and use them as a basis for MA to try to get to Polta, and I can get into the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E, but apparently the angle is so wrong that MA can\u0027t find a way to swing me around to point the way I want to go. I may have to resort to one or two additional corrective burns to get the right attitude at periapse.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes this makes sense? \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUsing RMS \u00A0to do a transfer to Polta makes sense. Using MA to target the Polta orbital parameters I need makes sense. I even have some sense for how they achieve their results. They are oracles; they can always provide an answer. The difficulty lies in formulating the question. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis occurs when one of a few things occur:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nThe optimizer can\u0027t find a direction to move because all of the gradients it evaluates are upwards (basically the optimizer thinks it\u0027s at a local minimum).\n\u003C/li\u003E\n\u003Cli\u003E\nThe optimizer can\u0027t find a direction that minimizes the maximum violated constraint value.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nThe way around this is to either change up your objective function or loosen up at least one of your constraints.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t see \u0022create forehead-shaped dent in the nearest wall\u0022 on your list. I\u0027ll try your suggestions instead.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-05T01:39:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661612\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467682116\u0022 data-ipsquote-userid=\u0022113821\u0022 data-ipsquote-username=\u0022jakkarth\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, jakkarth said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUsing RMS \u00A0to do a transfer to Polta makes sense. Using MA to target the Polta orbital parameters I need makes sense. I even have some sense for how they achieve their results. They are oracles; they can always provide an answer. The difficulty lies in formulating the question. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou\u0027ve basically got the process I use down.\u00A0 RMS to get the estimated burn parameters and timing and Mission Architect to adjust these parameters to target the orbit you want.\u00A0 You may need another maneuver at some point within the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E of the moon you\u0027re going to.\u00A0 Look at using the Optimal Two Burn Orbit Change application to estimate what those maneuvers might need to be. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI don\u0027t see \u0022create forehead-shaped dent in the nearest wall\u0022 on your list. I\u0027ll try your suggestions instead.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry about that, Mission Architect does have a bit of a learning curve!\u00A0 Take solstice in the fact that it\u0027s even harder to do this stuff in real life. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blu3wolf","CreatedById":107912,"CreatedDateTime":"2016-07-05T04:05:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661625\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467682776\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry about that, Mission Architect does have a bit of a learning curve!\u00A0 Take solstice in the fact that it\u0027s even harder to do this stuff in real life. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSpeaking of which, would it be feasible for a future version of this tool to support planning for Principia?\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-05T17:35:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661776\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467691515\u0022 data-ipsquote-userid=\u0022107912\u0022 data-ipsquote-username=\u0022blu3wolf\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, blu3wolf said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSpeaking of which, would it be feasible for a future version of this tool to support planning for Principia?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPossible? \u00A0Yes. Feasible? \u00A0Not really. The whole of Mission Architect is based on the patched conics model and depends on it. I could rip that out, but it wouldn\u0027t be easy or pretty.\n\u003C/p\u003E\n\u003Cp\u003E\nSorry! :-)\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"blu3wolf","CreatedById":107912,"CreatedDateTime":"2016-07-06T00:37:27Z","Content":"\n\u003Cp\u003E\nSo... I wonder if there are some real world mission planning tools that could be used for that purpose.\n\u003C/p\u003E\n\u003Cp\u003E\nI want to try out Principia, but I dont think Im going to start a career game where I couldnt rely on Mission Architect. Although... up to a point, the patched conics model is close to n body gravitation, right? Perhaps MA would still be useful to a point anyway.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2016-07-06T01:18:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222662867\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467765447\u0022 data-ipsquote-userid=\u0022107912\u0022 data-ipsquote-username=\u0022blu3wolf\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n34 minutes ago, blu3wolf said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo... I wonder if there are some real world mission planning tools that could be used for that purpose.\n\u003C/p\u003E\n\u003Cp\u003E\nI want to try out Principia, but I dont think Im going to start a career game where I couldnt rely on Mission Architect. Although... up to a point, the patched conics model is close to n body gravitation, right? Perhaps MA would still be useful to a point anyway.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs long as you\u0027re not relying on significant third body gravity (Lagrange points, 3-body problem type orbits, etc), Mission Architect will be a fine approximation.\u00A0 Otherwise, you may not have much luck unfortunately.\n\u003C/p\u003E\n\u003Cp\u003E\nThere are some free mission analysis tools you could look at.\u00A0 Best bet might be GMAT, but I\u0027ve never used it myself.\u00A0 I have no idea how hard or easy it is to use.\u00A0 You\u0027re welcome to try it though!\n\u003C/p\u003E\n\u003Cp\u003E\n------------------------------------------------------\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m happy to announce that I\u0027ve compiled \u003Cstrong\u003Epre-release 7 \u003C/strong\u003Eof the \u003Cstrong\u003EKSP Trajectory Optimization Tool v1.5.5.\u00A0 \u003C/strong\u003EChanges are below (from pre-release 5 as I didn\u0027t really announce 6, heh):\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nReplaced the previous end-of-optimization prompt with a scorecard that allows the user to choose between the final optimization result, the optimization iteration with the best objective function value, or the optimization iteration with the best constraint value.\n\u003C/li\u003E\n\u003Cli\u003E\nAdded \u0022Copy Orbit After Selected Event\u0022 item to MA script context menu\n\u003C/li\u003E\n\u003Cli\u003E\nLists of celestrial bodies which contain the full body list are now arranged in a hierarchical order with appropriate indenting.\n\u003C/li\u003E\n\u003Cli\u003E\nFixed bug with MFMS in which the waypoint panel header did not update when the central body is changed.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nDownload link: \u003Ca href=\u0022https://dl.dropboxusercontent.com/u/29126891/KSPTOT_v155_prerelease7.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/29126891/KSPTOT_v155_prerelease7.zip\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPlease let me know if you have any questions or find any bugs. Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"jakkarth","CreatedById":113821,"CreatedDateTime":"2016-07-06T17:09:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222662922\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467767902\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cul\u003E\u003Cli\u003E\nReplaced the previous end-of-optimization prompt with a scorecard that allows the user to choose between the final optimization result, the optimization iteration with the best objective function value, or the optimization iteration with the best constraint value.\n\u003C/li\u003E\n\u003Cli\u003E\nAdded \u0022Copy Orbit After Selected Event\u0022 item to MA script context menu\n\u003C/li\u003E\n\u003Cli\u003E\nLists of celestrial bodies which contain the full body list are now arranged in a hierarchical order with appropriate indenting.\n\u003C/li\u003E\n\u003Cli\u003E\nFixed bug with MFMS in which the waypoint panel header did not update when the central body is changed.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou are giving Kris Kringle a run for his money and it\u0027s only July! No bugs encountered yet.\n\u003C/p\u003E\n\u003Cp\u003E\nI did have a question about how MA does the \u0022advance script to this point\u0022 function. Am I correct that it basically involves using the data from \u0022view state after selected event\u0022 to create a new initial state, and then throws away all of the events up to and including the one that was originally selected? If so, I possible optimization (that you have probably already thought of) would be to use this functionality internally when optimizing, creating an initial state in the same manner based on the event just prior to the first event with optimizable input variables. This would mean getting to skip \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E searches etc for all the events leading up to the first event with an optimizable input variable, which could conceivably save a bit of processing time. You probably already do this, or have a good reason not to,\u00A0but on the off chance it hadn\u0027t occurred to you I figured I\u0027d mention it. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nGreat work as always! What\u0027s the next killer feature you\u0027ve got in the works?\n\u003C/p\u003E\n"}]}