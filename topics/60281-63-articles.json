{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":63,"Articles":[{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-09-04T09:43:39Z","Content":"\n\u003Cp\u003E\nHey guys and girls, any news on W10 issue? It realy sad not to use my control panel since even with handshake disabled it wont work (connect, disconnect, connect disconnect...). I Didnt found any solid information about usb win10 problems, only found out that MANY ppl with arduino and other custom hardware using usb for communication have big problems with connection.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-09-04T10:35:05Z","Content":"\n\u003Cp\u003E\n(short reply from a phone)\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDid you try to turn the drivers signature off? I don\u0027t have the procedure in memory but it should be easy to find\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-09-04T11:17:08Z","Content":"\n\u003Cp\u003E\nIt\u0027s not a driver issue. Short version is that the plugin is able to marshal data out the serial connection, but packets inbound are never processed. The plugin registers a handler for the \u003Ca href=\u0022https://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived%28v=vs.110%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003ESystem.IO.Ports.SerialPort.DataReceived event\u003C/a\u003E but since Windows 10 that event just... doesn\u0027t seem to fire. For what it\u0027s worth, it\u0027s never, ever worked on Linux or OS X.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is probably exacerbated by the fact that KSP doesn\u0027t include the Unity libraries for serial comms so we\u0027re relying on assorted third party C# implementations. But seeing as Unity uses a pretty crusty version of mono I\u0027m not quite convinced building KSP with the full .NET suite will help.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve got a fork of this plugin that works fairly well on Linux and OS X by doing two things:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nIt replaces the old serial library zitronen used with \u003Ca href=\u0022https://github.com/unixunion/PsimaxSerial\u0022 rel=\u0022external nofollow\u0022\u003EPsimaxSerial\u003C/a\u003E, which is a slightly modified rip of the current mono serial libraries made by forum user Mulbin.\n\u003C/li\u003E\n\u003Cli\u003E\nIt replaces the SerialPort.DataReceived callback with asynchronous serial reads via the BaseStream property of the serial port, happening in a separate thread (see \u003Ca href=\u0022http://www.sparxeng.com/blog/software/must-use-net-system-io-ports-serialport\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.sparxeng.com/blog/software/must-use-net-system-io-ports-serialport\u003C/a\u003E)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI\u0027ve stress-tested my fork pretty heavily on Linux (it ran for a solid eight hours of constant launches during the maker faire in Sydney last month without crashing), and I\u0027ve run it for short periods on OS X, but I don\u0027t really test it in Windows at all.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/144806-mattew/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022144806\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/144806-mattew/\u0022 rel=\u0022\u0022\u003E@Mattew\u003C/a\u003E, you could give my fork a try at \u003Ca href=\u0022http://spacedock.info/mod/850/KSP%20Serial%20IO%20%28cross%20platform%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://spacedock.info/mod/850/KSP Serial IO (cross platform)\u003C/a\u003E. But I honestly have no idea if it\u0027ll work for you or not. Sure would be interested to see somebody try it out though. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222741591\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472982219\u0022 data-ipsquote-userid=\u0022144806\u0022 data-ipsquote-username=\u0022Mattew\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Mattew said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt realy sad not to use my control panel since even with handshake disabled it wont work (connect, disconnect, connect disconnect...).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnd for what it\u0027s worth, I half suspect this is because your arduino code is assuming it\u0027s disconnected because it never gets a successful handshake. If you\u0027re basing your code on zitronen\u0027s example sketch, it\u0027s probably worth making sure you\u0027ve disabled any conditionals that check for a connection.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-09-04T11:54:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222741629\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472987828\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n37 minutes ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u0027s not a driver issue.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI just remembered this may not be entirely accurate. A few pages back somebody claimed to have gotten this plugin working properly in Windows 10 using Arduino compatible boards with a different serial chipset, therefore a different driver. See\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/60281-hardware-plugin-arduino-based-physical-display-serial-port-io-tutorial-22-april/\u0026amp;page=59\u0026amp;do=embed\u0026amp;comment=2535610\u0026amp;embedComment=2535610\u0026amp;embedDo=findComment#comment-2535610\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nSo it might be something like a weird interaction between the C# library and the standard Arduino serial driver. If you happen to have some spare cash it might be worth tracking down an Arduino board with a WCH340 chip on them. But, again, I have no idea if it\u0027ll actually work or not sorry. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-04T11:55:29Z\u0022 title=\u002209/04/2016 11:55  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 4, 2016\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-09-04T12:59:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222741629\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472987828\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd for what it\u0027s worth, I half suspect this is because your arduino code is assuming it\u0027s disconnected because it never gets a successful handshake. If you\u0027re basing your code on zitronen\u0027s example sketch, it\u0027s probably worth making sure you\u0027ve disabled any conditionals that check for a connection.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell that maybe it since I just disable HandShake in config\u00A0file of pluggin itself and not bother with code at all. \u00A0I ll try that.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI can do some testing, I ll check it out and see it that will work, since it looks like some good solution is faaar away.\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222741645\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472990055\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI just remembered this may not be entirely accurate. A few pages back somebody claimed to have gotten this plugin working properly in Windows 10 using Arduino compatible boards with a different serial chipset, therefore a different driver.\n\u003C/p\u003E\n\u003Cp\u003E\nSo it might be something like a weird interaction between the C# library and the standard Arduino serial driver. If you happen to have some spare cash it might be worth tracking down an Arduino board with a WCH340 chip on them. But, again, I have no idea if it\u0027ll actually work or not sorry. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell it maybe go somewhere, since today when i was googling for issue i came over this video\u00A0\u003Ca href=\u0022https://www.youtube.com/watch?v=DRmvUsa2xuU\u0022 rel=\u0022external nofollow\u0022\u003EWindows USB Serial \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E port driver bug\u003C/a\u003E\u00A0and guy there did some tests where UNO r3 with its\u00A0ATmega16U2 as USB-to-serial have issues but\u00A0Duemilanove with\u00A0FTDI USB-to-TTL works fine. Maybe WCH340 works too since its \u0022hardware\u0022 convertor opposite ATmega16U2 \u0022software\u0022 based convertor? \u00A0I assume that basic USB-to-TTL convertor\u00A0based on WCH340 or similar chip\u00A0connected to arudino TX RX lines and\u00A0bypassing its original ATmega16U2 in theory could do the trick. Thinking of buying it and testing it. Or Uno with WCH340, but \u00A0its 3 week for something to come from ebay xD\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Found this thing on Ebay\u00A0\u003Ca href=\u0022http://www.ebay.com/itm/Adapter-STC-USB-TTL-CH340G-Converter-Module-replace-PL2303-CP2102-Z3-Hot-/131701644759?hash=item1eaa079dd7:g:BaAAAOSw3ydVqHye\u0022 rel=\u0022external nofollow\u0022\u003ECH340G USB-TTL Converto\u003C/a\u003Er . Cheap too.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-04T17:41:22Z\u0022 title=\u002209/04/2016 05:41  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 4, 2016\u003C/time\u003E by Mattew\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-07T15:10:51Z","Content":"\n\u003Cp\u003E\nThanks for doing the science for us. I refuse to get win 10.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-08T15:02:30Z","Content":"\n\u003Cp\u003E\nOn a completely different subject, I was wondering a bit about the VData. Specifically, whether it would be worth the trouble to use integers for a bunch of the stuff. For example, the fuel levels, latitude/longitude, roll/pitch/heading, inclination and eccentricity. Desired precision could be achieved by measuring in deci- or milliunits. I know that this would break a lot of existing codebase, but as I understand it, floats are a drag on the Arduino. Right now I copy a bunch of the values to uint_32t before doing further calculations, but i would prefer not to.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is of course on the basis that the time savings are worth it, which I don\u0027t know enough about the Arduino to be qualified to say. Just speculating.\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-08T15:32:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746924\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473346950\u0022 data-ipsquote-userid=\u0022111048\u0022 data-ipsquote-username=\u0022Freshmeat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, Freshmeat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOn a completely different subject, I was wondering a bit about the VData. Specifically, whether it would be worth the trouble to use integers for a bunch of the stuff. For example, the fuel levels, latitude/longitude, roll/pitch/heading, inclination and eccentricity. Desired precision could be achieved by measuring in deci- or milliunits. I know that this would break a lot of existing codebase, but as I understand it, floats are a drag on the Arduino. Right now I copy a bunch of the values to uint_32t before doing further calculations, but i would prefer not to.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is of course on the basis that the time savings are worth it, which I don\u0027t know enough about the Arduino to be qualified to say. Just speculating.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPossibly, most of the things are meant to be easy to directly sent to a display with a simple dtostrf() which gives you a easy method to choose how to format the number. Floats are slow, but maybe not as slow as you might think: \u003Ca href=\u0022http://forum.arduino.cc/index.php?topic=40901.0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.arduino.cc/index.php?topic=40901.0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n10 - 40us per operation, you can do 25000-100000 floating point calculations a second. So unless you are doing some serious maths it really shouldn\u0027t be a problem.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-08T19:32:49Z","Content":"\n\u003Cp\u003E\nIn the thread, I saw that a sin(x) was rather expensive. I need both acos and sqrt for some parts of my controller infoscreens. Oh well, I have ordered a Due anyway for the keyboard functions, it gains me a five time increase in CPU speed. And all the headaches of 3.3V to 5V level shifting, but you can\u0027t have everything, I suppose.\n\u003C/p\u003E\n"},{"CreatedByName":"richfiles","CreatedById":129946,"CreatedDateTime":"2016-09-09T06:47:29Z","Content":"\n\u003Cp\u003E\nYou know, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111048\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0022 rel=\u0022\u0022\u003E@Freshmeat\u003C/a\u003E...\u003Cbr\u003E\nAn Arduino with a faster CPU like a Duemiwhatsitcalled, and with lots of ports, like a Mega2560... And \u003Cem\u003EINTEGRAL LEVEL SHIFTING\u003C/em\u003E would be an \u003Cem\u003Eabsolute killer device\u003C/em\u003E!\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003Cbr\u003E\nMaybe an easier name too...\u00A0\u003Cimg alt=\u0022:rolleyes:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 title=\u0022:rolleyes:\u0022\u003E\u003Cbr\u003E\nWhy can\u0027t this be a thing that exists!\u00A0\u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\nIn the mean time, there\u0027s this thing:\u00A0\u003Ca href=\u0022http://digistump.com/products/51\u0022 rel=\u0022external nofollow\u0022\u003ELevel Shifter Shield\u003C/a\u003E. It looks like that particular model from that particular vendor had to be reworked. They say it works 100%, but since it had to basically be fixed after manufacturing, they\u0027re selling them for about $5. Not sure if it\u0027s what you need, but it might help, and it\u0027s cheap. It\u0027s not able to directly drive LEDs and other devices that require higher levels of current, but it makes all I/O 5 volt tolerant. You can use transistors to drive current, if you need to directly drive anything.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-09T07:04:35Z\u0022 title=\u002209/09/2016 07:04  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 9, 2016\u003C/time\u003E by richfiles\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-09T14:20:34Z","Content":"\n\u003Cp\u003E\nYou can use good old look up tables for your trig functions like this:\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://forum.arduino.cc/index.php/topic,69723.0.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.arduino.cc/index.php/topic,69723.0.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYou can also go all out and get a teensy 3 like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257865\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0022 rel=\u0022\u0022\u003E@stibbons\u003C/a\u003E, which I think is 5V tolerant on digital pins. They are kickstarting a new one with a 180MHz ARM...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-09T14:50:44Z","Content":"\n\u003Cp\u003E\nThe Due has a 84MHz ARM processor, and comes at just under dkr. 80,-, which is the magic amount for not paying import taxes. I can live with level shifting to avoid an effective three or fourfold increase in price.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2016-09-09T22:22:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222748326\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473430834\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou can also go all out and get a teensy 3 like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257865\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0022 rel=\u0022\u0022\u003E@stibbons\u003C/a\u003E, which I think is 5V tolerant on digital pins.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMinor point of order, it\u0027s only the Teensy 3.1 and 3.2 that are 5V tolerant. The 3.0 is\u00A0\u003Cstrong\u003Enot\u003C/strong\u003E. I\u0027m using a 3.2 on an I2C bus with a 5V master with no problems.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222748326\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473430834\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThey are kickstarting a new one with a 180MHz ARM...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe new boards also have an FPU. The only mild downside is that the 180MHz version loses the 5V tolerance. I\u0027ve backed the kickstarter, looking forward to trying the new boards out.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-10T09:07:53Z","Content":"\n\u003Cp\u003E\nThe FPU could be a dealmaker if the Due fails to deliver on speed. I will see what the price ends up to within the EU, then start bugging the wife that I _need_ an upgrade. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"svarne","CreatedById":168452,"CreatedDateTime":"2016-09-12T13:39:29Z","Content":"\n\u003Cp\u003E\nHy everyone,\n\u003C/p\u003E\n\u003Cp\u003E\ni have a few Questions. I\u00B4m trying to build my own KSP Cockipt. Now i have some problems and hope you can help me.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst i wanted that my Display shows \u0022Waiting for KSP\u0022 until it the variable Connected is true.\n\u003C/p\u003E\n\u003Cp\u003E\nThe Display show the text but when i go to the Lunch Pad the Text still stand there an the green light won\u00B4t turn on.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E if (Connected == false)\n{\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022Waiting for KSP\u0022);\n      for ( int i; i \u0026lt;= 15 ; i\u002B\u002B)\n      {\n      lcd.setCursor(i, 1);\n      lcd.print(\u0022.\u0022);\n      delay (1000);\n      }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe other thing that i don\u00B4t understand is, i have a button which should start a startcheck after that a countdown should count to zero and the rocket should start.\n\u003C/p\u003E\n\u003Cp\u003E\nBut when i push the button the display shows the information i wanted but ignore the for loop and restart the whole prozedure and the green light turn of and looped it as long as i uploaded the same code or restart the arduino uno.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evoid startcheck ()\n{\n  if ( start == true)\n  {\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022KSP Start Check\u0022);\n      delay(500);\n      //\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Check****\u0022);\n      delay(1000);\n      //\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Einschalten\n      lcd.setCursor(0,1);\n      lcd.print(\u0022Checked\u0022);\n      delay(1000);\n      //\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Check****\u0022);\n      delay(1000);\n      //\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Einschalten\n      lcd.setCursor(0,1);\n      lcd.print(\u0022Checked\u0022);\n      delay(1000);\n      //Fuel Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***Fuel Check***\u0022);\n      delay(1000);\n      //Fuel Auslesen\n      lcd.setCursor(0,1);\n      lcd.print(VData.LiquidFuelTot);\n      delay(1000);\n            //MonoP Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***MonoP Check**\u0022);\n      delay(1000);\n      //MonoP Auslesen\n      lcd.setCursor(0,1);\n      lcd.print(VData.MonoPropTot);\n      delay(1000);\n      //Power Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022*E Charge Check*\u0022);\n      delay(1000);\n      //Echarge Auslesen\n      lcd.setCursor(0,1);\n      lcd.print(VData.ECharge);\n      delay(1000);\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022Ready to start\u0022);\n      delay(1000);\n      for (int t = 10; t = 0; t--)\n      {\n        lcd.setCursor(7,1);\n        lcd.print(t);\n        delay (1000);\n      }\n\n\n  }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nMy KSPIODemo13 loop looks like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evoid loop()\n{\n  input();\n  output();\n  dsplay();\n  startcheck();\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe last Question, ist there any posibiliy that i can start the rocket whithout keyboard input and readout target speed and distance?\n\u003C/p\u003E\n\u003Cp\u003E\nI hope you can help me.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-12T14:50:12Z","Content":"\n\u003Cp\u003E\nIn both of your for loops, you have the wrong syntax, the first one:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Efor ( int i; i \u0026lt;= 15 ; i\u002B\u002B)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nis wrong, you probably meant\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Efor ( int i = 0; i \u0026lt;= 15 ; i\u002B\u002B)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe second one:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Efor (int t = 10; t = 0; t--)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nis also wrong, you probably meant\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Efor (int t = 10; t \u0026lt;= 0; t--)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2016-09-12T15:05:51Z","Content":"\n\u003Cp\u003E\nIf the loop delays the process for to long, the board goes idle as defined in input.ino. If you want a countdown sequence, you need to use a check against time instead of delay commands, and print the appropriate message when a certain time has passed. Something like this:\n\u003C/p\u003E\n\u003Cp\u003E\nIn setup:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Estarttime \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E millis\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E();\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIn startchk:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Enow \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E millis\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E();\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Estarttime \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E-\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E now \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E than \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1000\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Efirst second of countdown code\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eelse\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Estarttime \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E-\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E now \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E2000\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Esecond second of countdown code\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAnd so forth. In the tenth second (countdown = zero), the last command would be to set the stage bit high in CPacket. That \u003Cem\u003Eought\u003C/em\u003E to do the trick, but I am not entirely certain.\n\u003C/p\u003E\n\u003Cp\u003E\nSecond, you will get this sequence every time you switch vessel, so it might not be an entirely good idea. Some suitable checks against velocity and position might be able to identify a starting vehicle, but rovers are still a problem. You might want to only initiate start sequence on a button.\n\u003C/p\u003E\n\u003Cp\u003E\nThis project might require a few false starts, feel free to experiment and ask for help.\n\u003C/p\u003E\n"},{"CreatedByName":"svarne","CreatedById":168452,"CreatedDateTime":"2016-09-13T13:32:10Z","Content":"\n\u003Cp\u003E\nHy,\n\u003C/p\u003E\n\u003Cp\u003E\nthanks for your posts, i get it work but not as i wanted.\n\u003C/p\u003E\n\u003Cp\u003E\nBut first here a few pictures of my cockpit\n\u003C/p\u003E\n\u003Cp\u003E\nI have build here 3 different input types: Joystick, Keyboard and arduino\n\u003C/p\u003E\n\u003Cp\u003E\nThe Joystik controls Pitch and Yaw, Firebutton is Stage, then switch map \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E and RSC activate/deaktivate and controls view\n\u003C/p\u003E\n\u003Cp\u003E\nThe Linear Poti with the red cap controls the Throttle. The big hole there was a mistake but later it will cool the Hand with a Computer fan.\n\u003C/p\u003E\n\u003Cp\u003E\nThen we have the three LEDs, The Display and the poti under the display is to switch the display. Actually 4 Modes. 1 AP and EP 2. Altitude 3. MonoP and Electric Charge 4. Time to Node and DeltaV\n\u003C/p\u003E\n\u003Cp\u003E\nThe small Joystik on the left Controls Translation Up,Down,Left,Right. The two red buttons control the Roll Axis. The small button under the Joystik Controls \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Foward and Backward.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002220160913_142028.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://svenhome.de/web/20160913_142028.jpg\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002220160913_142039.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://svenhome.de/web/20160913_142039.jpg\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHere is a video from the \u003Ca href=\u0022http://svenhome.de/web/20160913_141928.mp4\u0022 rel=\u0022external nofollow\u0022\u003Estart.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see the start works nearly correctly. With two exceptions. \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E and \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E won\u00B4t go active. (At home \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E went active after the for loop)\u00A0 And the stage should be switched after countdown goes to 1.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E if ( start == HIGH)\n{\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022KSP Start Check\u0022);\n      delay(500);\n      //\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Check****\u0022);\n      delay(1000);\n      //\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Einschalten\n      CPacket.MainControls |= (1 \u0026lt;\u0026lt; 6);       \n      lcd.setCursor(0,1);\n      lcd.print(\u0022Checked\u0022);\n      delay(1000);\n      //\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Check****\u0022);\n      delay(1000);\n      //\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Einschalten\n    CPacket.MainControls |= (1 \u0026lt;\u0026lt; 7);      \n      lcd.setCursor(0,1);\n      lcd.print(\u0022Checked\u0022);\n      delay(1000);\n      lcd.clear();\n      lcd.setCursor(0,0);\n      lcd.print(\u0022****LED Check***\u0022);\n      digitalWrite(GLED,HIGH);\n      delay(1000);\n      digitalWrite(YLED,HIGH);\n      delay(1000);\n      digitalWrite(RLED,HIGH);\n      delay(1000);\n      digitalWrite(GLED,LOW);\n      delay(1000);\n      digitalWrite(YLED,LOW);\n      delay(1000);\n      digitalWrite(RLED,LOW);\n      lcd.setCursor(0,1);\n      lcd.print(\u0022Checked\u0022);\n      //Fuel Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***Fuel Check***\u0022);\n      delay(1000);\n      //Fuel Auslesen\n      lcd.setCursor(0,1);\n      lcd.print(VData.LiquidFuelTot);\n      delay(1000);\n            //MonoP Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022***MonoP Check**\u0022);\n      delay(1000);\n      //MonoP Auslesen\n      lcd.setCursor(0,1);\n      lcd.print(VData.MonoPropTot);\n      delay(1000);\n      //Power Check\n      lcd.clear();\n      lcd.setCursor(0, 0);\n      lcd.print(\u0022*E Charge Check*\u0022);\n      delay(1000);\n      //Echarge Auslesen\n      lcd.setCursor(0,1);\n      lcd.print(VData.ECharge);\n      delay(1000);\n      lcd.clear();\n      for ( int t = 10 ; t \u0026gt;= 0 ; t--)\n      {\n        if(t |= 0)\n        { \n         lcd.setCursor(0, 0);\n         lcd.print(\u0022Ready to start\u0022);\n         lcd.setCursor(0,1);\n         lcd.print(t);\n         delay(1000);\n         lcd.clear();\n       }\n        else\n        {\n          CPacket.MainControls |= (1 \u0026lt;\u0026lt; n);       \n          lcd.setCursor(0,0);\n          lcd.clear();\n          lcd.print(\u0022*****Engage*****\u0022);\n          delay(2000);\n       }\n  }\n    start = LOW;\n  lcd.clear();\n}\n\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nif i set start = low it won\u00B4t restart anymore.\n\u003C/p\u003E\n\u003Cp\u003E\nFor the \u0022Waiting for KSP\u0022 Loop i have actually no solution.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWith target i mean if you select an other Vehicle for Docking etc KSp schow you the distance an relative speed to the target. I want this informations on my display.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-13T14:12:40Z\u0022 title=\u002209/13/2016 02:12  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 13, 2016\u003C/time\u003E by svarne\u003C/strong\u003E\n\u003Cbr\u003ECode\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-14T17:14:37Z","Content":"\n\u003Cp\u003E\nOK you have a few mistakes in the code:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eif(t |= 0)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nshould be\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eif(t != 0)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nand\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ECPacket.MainControls |= (1 \u0026lt;\u0026lt; n); \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nshould be\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ECPacket.MainControls |= (1 \u0026lt;\u0026lt; 0); \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nbecause \u0022n\u0022 does not exist anywhere in your code.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t know why you are changing the bits manually and not using the simple function\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMainControls(\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E, HIGH);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe reason why \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E only comes on after the for loop is because during your start sequence no packet is sent to KSP. Only after the sequence does normal communications start. Arduino can only do one thing at a time. You can fix this the proper way by doing what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111048\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0022 rel=\u0022\u0022\u003E@Freshmeat\u003C/a\u003E is suggesting, or if you don\u0027t care about fixing it properly you can force a packet to be sent by using\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EKSPBoardSendData(details(CPacket));\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAfter your \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E checks.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nReally cool looking control panel though!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI think target distance and speed are good suggestions. I will look into adding them after the 1.2 update shows up.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"alge4","CreatedById":123625,"CreatedDateTime":"2016-09-14T23:01:33Z","Content":"\n\u003Cp\u003E\nZitronen\n\u003C/p\u003E\n\u003Cp\u003E\nAll in fair warning, I\u0027ve got quite little coding experience, but i\u0027ve\u00A0written some serial communications between a java client and an Arduino before. I wanted to try build a hardware controller for ksp, as per many others. I\u0027ve also done a bit of C# in my past as well. As I already owned an arduino mega i wanted to use that. In due course i discovered your plugin, however I\u0027ve already made the jump to Windows 10 :/ you see where this is going. From previous comments it seems like you have no interest in fixing a windows 10 version so I set about having a go. I tried to use your plugin to get an idea of the response the client attempt to connect the handshake light come on but then goes off before the ship has even loaded.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI then tried the de-bugger made my KingLuxor, which to my surprise worked. From my cursiory glance at the difference between the two sources your SerialIO seems to be custom however the debugger seems to use a windows stock code, could that indicate that the fault finding could beggin between spotting differences in how the two interact with the arduino\u0027s. I should note that i tried this code with an Arduino Mega 2560 and Arduino Uno R3.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nObviously this isnt something i\u0027m gunna solve straight away but i knew enough to get in and have a look under the hood. I thought i\u0027d just drop in state what i found, as it hadnt been mentioned before, im gunna go away and practice my C and serail comms as well as KSP plugins before i try and actually get truely involved in a\u00A0constructive problem solving conversation. I hope in some way this information is usefull, and even if it isnt, thanks for your code. Its given me a project to do over the next few months!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCheers\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-15T16:18:24Z","Content":"\n\u003Cp\u003E\nOK, I probably need to compile a list about windows 10, since the useful info is scattered all around the thread. I am using a crappy serial library because KSP (Unity, mono) does not include it, and there are no any other options. Yes indeed if we can figure out what is the difference between the crappy library and the proper C# library (used by KingLuxor) then maybe we can fix it. But that requires some knowledge how windows and serial drivers and such work, which is beyond what I can do.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere are currently 3 possible \u0022workarounds\u0022 :\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nDon\u0027t use windows 10\n\u003C/li\u003E\n\u003Cli\u003E\nDisable handshake in config file, manually set \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E port (currently suggested option)\n\u003C/li\u003E\n\u003Cli\u003E\nThere are unconfirmed reports that some arduino copies with different USB-Serial chips work just fine for some reason\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am very interested in fixing the windows 10 problem, many of us have tried for months. What I don\u0027t have any interest in is getting a new windows 10 computer just to find a fix.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-09-15T21:37:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222758080\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473956304\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 15. 9. 2016 at 6:18 PM, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am very interested in fixing the windows 10 problem, many of us have tried for months. What I don\u0027t have any interest in is getting a new windows 10 computer just to find a fix.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust sit tight with me and have fingers crossed. I ordered from ebay \u00A0that USB-TTL module with CH340 chip and REALY hoping it\u00A0will work. I am guessing 10-14 days until it arrives so lets wait.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT:\n\u003C/p\u003E\n\u003Cp\u003E\nSo today i got a little surprise from ebay. That USB-TTL module actualy come TODAY! unbeliveable. But sadly i am not home and cant do serious testing. Buuuut i made quick test (Uno with KSPIODemo13) and comunication was handled by CH340 convertor insted of Uno\u0060s on board Atmega16U2. And guess what? IT WORKS ABSOLUTLY PERFECT! Yes, \u003Cstrong\u003EKSP IO pluggin is working under Win10 with no issues\u003C/strong\u003E (kind of). I got communication both ways, in and out. I got throttle from uno board even when there werent any controler (probably getting false signals on unconnected analog input) and it was seen in game on actual throttle. From those few short test I didnt lost comunication with board and seem absolutly fine. I will get home tomorow and ll be able to run some full test, especialy connect my full control panel using CH340 and see how it goes. Probably run some quick Mun mission and see if it will held up whole time with no issues (I guess it will be ok).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#ff0000;\u0022\u003E\u003Cu\u003E\u003Cstrong\u003ESo long story short, Win10 have issues comunicate over Atmega16U2 but CH340 run fine\u003C/strong\u003E\u003C/u\u003E\u003C/span\u003E. \u00A0I hope it will some of you more experianced guys (or girls) some idea how to fix code insted of telling ppl to go buy CH340 TTL module.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-16T18:26:11Z\u0022 title=\u002209/16/2016 06:26  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 16, 2016\u003C/time\u003E by Mattew\u003C/strong\u003E\n\u003Cbr\u003ENo need for double posting\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2016-09-17T14:07:38Z","Content":"\n\u003Cp\u003E\nOh great! So must something to do with different drivers.\n\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2016-09-18T10:54:39Z","Content":"\n\u003Cp\u003E\nOkaaay. Just finished tests with my control panel \u002B CH340. I had no issues so far, everything works as expected. Connection is fine. Recived and transmited data are okay too. \u00A0I think we can say that problem is in Atmega16U2 chip or its drivers. That isn my expertise so I cant say why is that.\n\u003C/p\u003E\n\u003Cp\u003E\nIf anyone strugling in Win10 with his or hers custom control panel and dont want wait for fix (or maybe it wont be even possible to fix) you can get same\u00A0\u003Ca href=\u0022http://www.ebay.com/itm/131701644759?_trksid=p2057872.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u0022 rel=\u0022external nofollow\u0022\u003EUSB-TTL-Thing\u003C/a\u003E\u00A0as me.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ryan00793","CreatedById":168824,"CreatedDateTime":"2016-09-18T13:57:12Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222762798\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474196079\u0022 data-ipsquote-userid=\u0022144806\u0022 data-ipsquote-username=\u0022Mattew\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Mattew said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkaaay. Just finished tests with my control panel \u002B CH340. I had no issues so far, everything works as expected. Connection is fine. Recived and transmited data are okay too. \u00A0I think we can say that problem is in Atmega16U2 chip or its drivers. That isn my expertise so I cant say why is that.\n\u003C/p\u003E\n\u003Cp\u003E\nIf anyone strugling in Win10 with his or hers custom control panel and dont want wait for fix (or maybe it wont be even possible to fix) you can get same\u00A0\u003Ca href=\u0022http://www.ebay.com/itm/131701644759?_trksid=p2057872.m2749.l2649\u0026amp;ssPageName=STRK%3AMEBIDX%3AIT\u0022 rel=\u0022external nofollow\u0022\u003EUSB-TTL-Thing\u003C/a\u003E\u00A0as me.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat drivers did you use (I just ordered the module that you linked)\n\u003C/p\u003E\n"}]}