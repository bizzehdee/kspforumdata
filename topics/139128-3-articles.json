{"TopicId":139128,"ForumId":34,"TopicTitle":"[1.2.x/1.3] MemGraph 1.1.0.3 - with Stutter Reduction","CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-06T09:52:19Z","PageNum":3,"Articles":[{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-01T09:39:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222610321\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464727046\u0022 data-ipsquote-userid=\u002257144\u0022 data-ipsquote-username=\u0022Otis\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, Otis said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI had noticed over time that the more on rails flights that I had, the worse my game performed, but I never would have suspected on-rails flights were causing garbage collection problems. I\u0027m really excited now that this information has been brought to light.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed, I expected some garbage due to on-rails vessels but I thought it would be proportional to number of vessels, not their part count. \u00A0This has been discussed with a couple of the Squad devs and a fix will, hopefully, be included in 1.1.3.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222610321\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464727046\u0022 data-ipsquote-userid=\u002257144\u0022 data-ipsquote-username=\u0022Otis\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, Otis said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPadishar, thank you for creating this tool. I feel it\u0027s only a matter of time now that we can all start seeing major benefits from this. This thread deserves a sticky and should be required reading for all KSP developers moving forward, IMO.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou\u0027re welcome. \u00A0As well as the padding mechanism giving some direct\u00A0benefit\u00A0to players with the current version, it is also helping to locate the worst offenders\u00A0at creating garbage which should allow Squad to improve things more quickly and effectively than them having to do all the investigation work themselves.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222610560\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464735920\u0022 data-ipsquote-userid=\u0022116239\u0022 data-ipsquote-username=\u0022Wiseman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Wiseman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was curious, though, if you know what\u0027s causing this behavior:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI was going to ask if you had tried anything similar in a stock-ish install but...\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222610560\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464735920\u0022 data-ipsquote-userid=\u0022116239\u0022 data-ipsquote-username=\u0022Wiseman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Wiseman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUpdate: I think this has to do with Kopernicus, OPM, and/or the OPM visual overhaul mod, or some combination thereof. The framerate gets cranky every time I scroll in or out from a particular body, but that seems in line with my thinking as it coincides with the loading/unloading of those bodies. However, anytime I\u0027m focused on a planet with rings, the memory usage and resultant garbage collection shoots through the roof. In any case, this seems unlikely to have anything to do with your mod, so my apologies!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo worries, your analysis sounds reasonable. \u00A0This is exactly the sort of situation that MemGraph helps locate. \u00A0It is probably worthwhile you testing with the visual overhaul part disabled/removed (assuming it still works like that) and then reporting your findings in the\u00A0relevant thread (probably OPM as I wouldn\u0027t expect Kopernicus itself to be the cause, I assume the ring stuff is added by OPM). \u00A0In fact, I seem to recall a nasty lag issue being reported a little while ago though I\u0027m not sure if it specifically mentioned map view. \u00A0In any case, the mod devs are likely to be grateful for any information you can provide about the issue...\n\u003C/p\u003E\n\u003Cp\u003E\nOne other thing, it looks like your heap is at over 3GB but you are getting GC after less than 100MB is allocated\u00A0so there appears to be very little normal headroom being maintained by Unity. \u00A0Are you running low on physical memory? \u00A0What is the overall \u0022Commit size\u0022 of KSP?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611001\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464757858\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPS.\u00A0 To all other users, I\u0027ll say this a bit stronger than the mod author, this mod is in no way for people with 4GB of ram, and frankly be careful with your MemGraph settings with 8GB of ram if you\u0027re running stock.\u00A0 Mods will run you out of 8GB of ram very quickly in my experience with MemGraph and GCMonitor.\u00A0 I\u0027m seeing my total ram usage (not heap) grow even in stock with every scene change still and mods exacerbate that issue, at least for me.\u00A0 The moment you run out of physical ram by using this mod, which I\u0027ve tested, you\u0027ll see a big drop in performance even on an ssd.\u00A0 (I have a Samsung EVO, maybe the swap on an m.2 would be fast enough, i don\u0027t know, but I\u0027ll take donations towards buying one for testing purposes. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E )\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nVery much this\u00A0^^^. \u00A0There are still issues that cause the total memory usage of KSP to grow over time and you will still get memory problems with the x64 version, they\u0027ll just happen when you run low on physical RAM rather than 32bit address space. \u00A0Also, rather than crashing, in theory the game should continue running using virtual memory but the performance will take a serious dive and it may take your machine a little while to recover after closing KSP as all the other processes will have had their working sets seriously trimmed and cached file data will have been discarded to use the RAM for KSP so lots of extra disk access will be needed by other programs to load stuff back in.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611005\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464757996\u0022 data-ipsquote-userid=\u0022118681\u0022 data-ipsquote-username=\u0022Galenmacil\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Galenmacil said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was going to write how I was unable to understand the new feature in MemGraph 1.0.7 until I finally figured it out. I used the \u0022extra 0 at the end of each line\u0022 Padishar suggested and It seems to make a huge difference on the frequency of KSP garbage collection.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Reduced garbage collection frequency to 120s in between.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGlad you worked it out and that it seems to be working well. \u00A0Do you know what the GC interval was before you turned it on (and the total KSP commit size before and after)?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611019\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464759462\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor anyone confused by the numbers, my personal recommendation would be to double or triple \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E\u0027s numbers after the colon in padheap.cfg if you\u0027re running 16GB of ram.\u00A0 Watch your ram usage with GCMonitor and adjust as you see fit.\u00A0 I wouldn\u0027t change his numbers much with mods and 8GB of ram, but again the mods - how many/which ones - can have a profound effect.\u00A0 There is \u003Cstrong\u003ENO one-size-fits-all\u003C/strong\u003E settings with MemGraph to lessen with the stutter issue. \u00A0 I\u0027m just trying to give you a good starting point for anyone confused... hopefully it helps a few.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAgain, great advice. \u00A0The default settings have been deliberately left low to provide a useful effect for any machine without increasing the memory usage by too much. \u00A0If people come up with good settings for particular setups then I\u0027ll be happy to add a link section to the OP (and/or host them on my dropbox).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611019\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464759462\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI wouldn\u0027t recommend just adding a zero to the end unless you\u0027re in \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/118681-galenmacil/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022118681\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/118681-galenmacil/\u0022 rel=\u0022\u0022\u003E@Galenmacil\u003C/a\u003E\u0027s range of 32GB\u002B ram.\u00A0 ( hehe, saw your post before your edit \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 )\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed, as it should add\u00A0around 9GB to the memory usage, it should only be done if you have significantly more than that free. \u00A0A stock install on a 16GB machine could probably get away with this (just about) but a reasonable mod load would end up very close to needing all the RAM in the machine.\n\u003C/p\u003E\n"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-06-01T15:31:01Z","Content":"\n\u003Cp\u003E\nI would like to test config settings and change them while already in game.\n\u003C/p\u003E\n\u003Cp\u003E\nIs it possible that the mod can read the values of padheap.cfg when the window is toggled on?\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-01T15:38:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611434\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464795061\u0022 data-ipsquote-userid=\u0022163177\u0022 data-ipsquote-username=\u0022Gordon Dry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Gordon Dry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI would like to test config settings and change them while already in game.\n\u003C/p\u003E\n\u003Cp\u003E\nIs it possible that the mod can read the values of padheap.cfg when the window is toggled on?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s nothing stopping you, it reads padheap.cfg every time you hit the Mod-End shortcut...\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: though once you get settings you like the look of you should try them on a fresh start of KSP to ensure your previous tests haven\u0027t skewed the results...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-01T15:39:38Z\u0022 title=\u002206/01/2016 03:39  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 1, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-06-01T15:52:29Z","Content":"\n\u003Cp\u003E\nOkay, it didn\u0027t seem like that.\n\u003C/p\u003E\n\u003Cp\u003E\nFor testing I just removed (!) the last 0 and started the game, the intervals became too short, so I reverted the edit while in game but after a couple of hits and ALT\u002BEnd the intervals were still short, not what I was used from yesterday. So I asked...\n\u003C/p\u003E\n\u003Cp\u003E\nNow I halved the values and restart the game. (I got 16 GB and a bunch\u00A0 of mods).\n\u003C/p\u003E\n"},{"CreatedByName":"Wiseman","CreatedById":116239,"CreatedDateTime":"2016-06-01T15:57:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611182\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464773951\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was going to ask if you had tried anything similar in a stock-ish install but...\n\u003C/p\u003E\n\u003Cp\u003E\nNo worries, your analysis sounds reasonable. \u00A0This is exactly the sort of situation that MemGraph helps locate. \u00A0It is probably worthwhile you testing with the visual overhaul part disabled/removed (assuming it still works like that) and then reporting your findings in the\u00A0relevant thread (probably OPM as I wouldn\u0027t expect Kopernicus itself to be the cause, I assume the ring stuff is added by OPM). \u00A0In fact, I seem to recall a nasty lag issue being reported a little while ago though I\u0027m not sure if it specifically mentioned map view. \u00A0In any case, the mod devs are likely to be grateful for any information you can provide about the issue...\n\u003C/p\u003E\n\u003Cp\u003E\nOne other thing, it looks like your heap is at over 3GB but you are getting GC after less than 100MB is allocated\u00A0so there appears to be very little normal headroom being maintained by Unity. \u00A0Are you running low on physical memory? \u00A0What is the overall \u0022Commit size\u0022 of KSP?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo, since my first test and screens, I noted that my performance in Career mode is just terrible. I\u0027m not sure what\u0027s causing it, but I did install GCMonitor to check on my commit size (although my Task Manager generally says I\u0027m using around 6-8GB of my 16GB of RAM on KSP). New screenshot included below.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00221u5gVFe.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/1u5gVFe.jpg\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0The relatively flat and smooth parts at the end wrapping around to the beginning are me tinkering in the VAB. The spiky red bit is loading the flight scene, and the rest of the terribleness is just trying and failing to get this thing to orbit - no map view or anything else, just regular flight. This is with one Mod-End press and a tripled padding config.\u00A0I feel like my results are being messed up by some combination of mods I\u0027m using, so I\u0027ll have to narrow that down before my reports become useful.\n\u003C/p\u003E\n\u003Cp\u003E\nBonus fun:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0Gg1PFi.jpg\u0022 alt=\u00220Gg1PFi.jpg\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThe memory spikes only happen in career mode. To the right of the blue line is a test flight in career, and to the left is the in-progress sandbox flight of the same rocket. (the thicker red band about 2 minutes in is me going from the VAB to the flight scene.)\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-01T16:15:07Z\u0022 title=\u002206/01/2016 04:15  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 1, 2016\u003C/time\u003E by Wiseman\u003C/strong\u003E\n\u003Cbr\u003EEven more testing\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-01T16:23:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611469\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464796629\u0022 data-ipsquote-userid=\u0022116239\u0022 data-ipsquote-username=\u0022Wiseman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Wiseman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI feel like my results are being messed up by some combination of mods I\u0027m using, so I\u0027ll have to narrow that down before my reports become useful.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, your reports are already useful as they clearly show that something is being exceedingly rampant in its garbage creation (it might be interesting to try the same thing without the heap padding to see what the stutter is like then \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E). \u00A0Those peaks you are seeing, at what looks like a pretty regular interval, are often\u00A0going out of the top of the graph, so more than 256 MB/s, which is just insane. \u00A0You have a lot of mods installed and there\u0027s a fair few I don\u0027t recognise from their toolbar buttons so it\u0027s tricky to suggest any likely culprits. \u00A0I would probably start by removing purely cosmetic mods and testing again. \u00A0Then, try without any mods that you can think of that might do things on a regular schedule (KAC, auto-backup, life support etc.). \u00A0It certainly shouldn\u0027t be anything to do with purely part based mods (unless they use stock KSP modules in really bad ways) so you can probably ignore most of those.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/116239-wiseman/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022116239\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/116239-wiseman/\u0022 rel=\u0022external\u0022\u003E@Wiseman\u003C/a\u003E, for\u00A0career only I guess the most likely thing is something contract related. \u00A0Do you have Contract Configurator and a shed load of contract packs? \u00A0If so, try removing that (or anything else you can think of that might be career only). \u00A0Also, probably worth doing a Science mode run too in case it is something to do with science experiments instead...\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 2: It\u0027s probably also worth testing a stock career game to see if that does anything similar. \u00A0It may be a stock career issue that is exacerbated by mods...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-01T18:01:08Z\u0022 title=\u002206/01/2016 06:01  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 1, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"karamazovnew","CreatedById":63072,"CreatedDateTime":"2016-06-01T20:04:18Z","Content":"\n\u003Cp\u003E\nAbsolutely amazing. My\u00A0GC went from 8 seconds to 50 seconds. Thank you so much for this.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-01T20:21:47Z\u0022 title=\u002206/01/2016 08:21  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 1, 2016\u003C/time\u003E by karamazovnew\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-01T20:28:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611813\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464811458\u0022 data-ipsquote-userid=\u002263072\u0022 data-ipsquote-username=\u0022karamazovnew\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, karamazovnew said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAbsolutely amazing. My\u00A0GC went from 5 seconds to 30 seconds. I just doubled the values in the settings file (although I have 32gb available). Is it possible to make the mod so that it applies the mem buff automatically on game start?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGlad you like it. \u00A0It isn\u0027t currently possible to make it apply automatically though it should be quite easy to implement as an option (it needs to be an option at the moment\u00A0for easier testing and comparison purposes). \u00A0Watch this space... \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tig","CreatedById":103242,"CreatedDateTime":"2016-06-01T21:00:04Z","Content":"\n\u003Cp\u003E\nHey Padishar,\n\u003C/p\u003E\n\u003Cp\u003E\nI did find a correlation with those long lag spikes I\u0027m sometimes experiencing.\u00A0 Seems to be related to a high number of page faults.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom Process Explorer:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022K6oOL5V.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/K6oOL5V.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnd a graph shot:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022edLM8Oo.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022478\u0022 src=\u0022https://i.imgur.com/edLM8Oo.jpg\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe red circles are mine.\u00A0 Each one was accompanied by a long delay (10-20seconds) - sometimes in flight, sometimes on a scene transition, sometimes when purchasing a part in the VAB.\n\u003C/p\u003E\n\u003Cp\u003E\nMemory goes from ~7.1-7.3GB and jumps up to 9.0-9.1GB.\u00A0 On the first screenshot you can see a normal scene and then the huge page fault jump up to 16,000\u002B page faults.\u00A0 Now process explorer doesn\u0027t differentiate between soft/hard faults (either that or i\u0027m ignorant on how to make it do so \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E ), but in any case my total ram usage never exceeds my 16GB physical ram.\u00A0 So, I assume they are soft faults?\u00A0 But then the I/O spikes as well...\n\u003C/p\u003E\n\u003Cp\u003E\nBut, not that much... the I/O spikes are about 50-60MB.\u00A0 Kerbal and swap file are on ssd\u0027s... i can\u0027t imagine a 10\u002B second delay being caused by the swap on an ssd (Assuming that some are hard faults that need disk access in the first place).\u00A0 The graph is about 50ish minutes.\u00A0 So, its infrequent, and not consistent in occurrence.\u00A0 Sometimes 30 min apart, sometimes 5 min.\u00A0 The *only* time I can say with certainty its happened more than once is when I\u0027ve purchased a part in the VAB.\u00A0 2 times for sure, maybe 3.\u00A0 Other times I buy parts and no lag at all... sigh.\u00A0 At least I know when I\u0027m being less than helpful... lol.\u00A0 These intermittent issues are hard to nail down.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThought I\u0027d pass it along - tried to get it to do this in stock, but haven\u0027t made it happen yet.\u00A0\u00A0 It\u0027s somewhat random even on my modded install.\u00A0 I don\u0027t know if its mods or just that in general these issues take a lot longer to occur with stock due to the lower total memory usage and slower heap growth.\u00A0 Or maybe I\u0027m just not noticing in stock because the delays are much more brief.\u00A0 Idk.\u00A0\u00A0 If I see it I\u0027ll certainly report back.\n\u003C/p\u003E\n\u003Cp\u003E\nI didn\u0027t \u003Cem\u003Enotice \u003C/em\u003Ethis behavior before MemGraph - but I know well enough that doesn\u0027t mean squat.\n\u003C/p\u003E\n\u003Cp\u003E\nAs always, thanks again for the mod; I wouldn\u0027t be playing the game without it.\u00A0 And I really hope Squad is reading this thread. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPS. Clarification on my language, I was taught/learned that \u0022soft page fault\u0022 = its already in memory, the OS just needs to tell it where, \u0022hard page fault\u0022 = not in ram, gotta go get it from the disk.\u00A0 But I\u0027ve noticed some people use those terms differently.\u00A0 I have no idea who/what is right (i\u0027ve seen some people use major/minor) so I thought I\u0027d clarify how I was using the terms.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EEDIT\u003C/strong\u003E:\n\u003C/p\u003E\n\u003Cp\u003E\nCaught it going even higher, nearly 120k page faults, i saw deltas before/after this shot in the 30-60k range.\u00A0 Memory \u0026amp; I/O spike about the same.\u00A0\u00A0 I think I just alt-tabbed out to Procexp faster this time.\u00A0 (Ignore the total user time, I was doing other stuff on the net running kerbal in the background to see if that had any effect on total memory growth/heap size.\u00A0 Short answer: no)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022fxJ0FMW.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/fxJ0FMW.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-01T21:58:23Z\u0022 title=\u002206/01/2016 09:58  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 1, 2016\u003C/time\u003E by Tig\u003C/strong\u003E\n\u003Cbr\u003Eclarification. another screenshot.\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-02T00:04:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611915\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464814804\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI did find a correlation with those long lag spikes I\u0027m sometimes experiencing.\u00A0 Seems to be related to a high number of page faults.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m really not sure about this one but I have to wonder if Windows isn\u0027t simply trimming the working set because a large chunk of KSP\u0027s RAM usage is not accessed very much but every so often KSP/Unity does a purge of assets that aren\u0027t required and this (or some other similar Unity quirk) results in a hit on virtually every page causing them all to\u00A0be loaded back in (and whatever has been stuck in the physical RAM in the meantime to be swapped out first). \u00A0Like you say, on SSD it probably shouldn\u0027t be this slow though we are talking nearly 2 GB of data to shift (and up to another 2GB to shift the other way) and the access pattern could easily be quite random, avoiding sequential reads and adding more overhead,\u00A0so it\u0027s possible.\u00A0 One thing to check would be to run baretail (or similar) on your output_log.txt and see if it says anything around the times it happens...\n\u003C/p\u003E\n"},{"CreatedByName":"Galenmacil","CreatedById":118681,"CreatedDateTime":"2016-06-02T00:51:30Z","Content":"\n\u003Cp\u003E\nMan, one thing is certain: Modern memory allocation mechanics are complicated to say the least!\n\u003C/p\u003E\n\u003Cp\u003E\nA \u0022War Story\u0022:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBack in the early 90\u0027s (yes, I am \u0022that\u0022 old! \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E), when I was learning assembly language on 386/486 architecture, memory allocation was simpler. You would use the \u0022stack\u0022 or machine registers for temporary storage, preallocated memory for long arrays or other pre-fetch table/whatnot\u0027s and, finally, OS dynamic memory allocation via \u0022malloc\u0022 function or a direct call to a system interrupt handling that for the other cases.\n\u003C/p\u003E\n\u003Cp\u003E\nLike in C, as the programmer, you were responsible for freeing that memory once you were done with it. So, for maximum performance, (and we needed that on a 33mhz 486 DX CPU!) you would allocate only when needed and would keep the pointer to that allocated space for as long as possible, tweaking the code if you had to, to prevent frequent reallocation.\n\u003C/p\u003E\n\u003Cp\u003E\nThinking of it now, we sure were limited compared to today machines but, we were in total control: No multi-threading to think about (well, system interrupt request had to be taken into account...), no \u0022automated memory freeing and compaction\u0022 mechanism where in place...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nToday, it seems the system is like a complex organism with a multitude of things happening at the same time most of them hard to control by the programmer. Expanded possibilities, yes, but at a greater cost in potential performance. In short, the machine is never used to it\u0027s full potential in a complex software like a video game.\n\u003C/p\u003E\n\u003Cp\u003E\nOK, I took a side road here, back on the main track. Very interesting and informative thread. I am going to add my \u0022experiments\u0022 to it. I still have that dream where KSP is stutter free, even when modded to the extreme. Perhaps one day! In the meantime, Padishar\u0027s MemGraph sure is helping a lot.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere a few pictures of MemGraph. The graph shows the same thing but under different circumstances from the moment it appears on screen (During game loading) until a save game is fully loaded, waiting at the KSC map until it is completely drawn, from left to right. The following PadHeap.CFG file was used:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n8\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1690000\u003Cbr\u003E\n16\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1260000\u003Cbr\u003E\n24\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1010000\u003Cbr\u003E\n32\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 8400000\u003Cbr\u003E\n40\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 7200000\u003Cbr\u003E\n48\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 6300000\u003Cbr\u003E\n64\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 5000000\u003Cbr\u003E\n80\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 4100000\u003Cbr\u003E\n96\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 3500000\u003Cbr\u003E\n112\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 3100000\u003Cbr\u003E\n144\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 2400000\u003Cbr\u003E\n176\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 2000000\u003Cbr\u003E\n208\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1700000\u003Cbr\u003E\n240\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1500000\u003Cbr\u003E\n296\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1200000\u003Cbr\u003E\n352\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1000000\u003Cbr\u003E\n432\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 8000000\u003Cbr\u003E\n664\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 4000000\u003Cbr\u003E\n800\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 200000\u003Cbr\u003E\n1008\u00A0\u00A0 \u00A0: 0\u003Cbr\u003E\n1344\u00A0\u00A0 \u00A0: 0\u003Cbr\u003E\n2032\u00A0\u00A0 \u00A0: 0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EModded game without padding execution\u003C/strong\u003E. Bottom section shows Windows Resource Monitor for the 64 bit KSP executable at the time of the screenshot:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022vQoyWBf.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/vQoyWBf.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThis is my main KSP 1.1.2 heavily modded save game. It is in the middle of a career with a dozen active satellites and lots of debris in different orbits. Note that I limit the framerate to 50 mainly to prevent graphical glitches with Scatterer ocean. Pretty much all popular mods are used but also many custom tweaks: I delete parts I do not use or want including all interiors for IVA (I do not do IVA). Many customs textures are used from Kerbal faces to planets surfaces, clouds, etc... Lot of background computation caused by mods like RemoteTech, ScanSAT, KeepFit, TACLS, Kerbal Alarm Clock to name a few.\n\u003C/p\u003E\n\u003Cp\u003E\nTo summarize, something clearly is wrong with the game in this state! GC every 6 seconds that completely stall the game for about 100~150ms when first starting playing but that extend to probably 300\u002Bms after a few scene changes. Very annoying but hey, I like this game a lot and playing it unmodded is out of question!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere, the same save game but this time, \u003Cstrong\u003Epadding was executed (via alt-end)\u003C/strong\u003E as soon as it was possible:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022yRVAX5b.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/yRVAX5b.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nDay and night! But a ridiculous amount of RAM is needed! GC still stall the game for the usual 100-150ms and growing the longer I play. This is at the KSC map. In game, GC happens every 120 seconds or so. Without the padding, in-game, GC stall the game every 15 seconds!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, here is a graph of the\u003Cstrong\u003E \u0022Stock\u0022, unmodded 64 bit game\u003C/strong\u003E with a fresh save:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002255lpuul.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/55lpuul.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHere, GC happens roughly every 80s but are so quick, that even at 145\u002B FPS, they are barely noticeable. For me, playing the stock 64 bit game @ 60 FPS, as of 1.1.2, is a completely stutter free experience... But so many things are lacking. I.e. no mods.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFrom this, I can say without hesitation that, on a heavily modded game, MemGraph heap padding trick is a game changer! From my experience I can also say that the more mods you have, the more \u0022stuttery\u0022 it gets. Some have a deeper impact than others: FAR for example. With just this mod and nothing else, stutters starts to become noticeable. I would assume that the more complex the mod, the more profound the impact.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-02T07:38:42Z\u0022 title=\u002206/02/2016 07:38  AM\u0022 data-short=\u00228 yr\u0022\u003EJune 2, 2016\u003C/time\u003E by Galenmacil\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wiseman","CreatedById":116239,"CreatedDateTime":"2016-06-02T02:49:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611501\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464798204\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, your reports are already useful as they clearly show that something is being exceedingly rampant in its garbage creation (it might be interesting to try the same thing without the heap padding to see what the stutter is like then \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E). \u00A0Those peaks you are seeing, at what looks like a pretty regular interval, are often\u00A0going out of the top of the graph, so more than 256 MB/s, which is just insane. \u00A0You have a lot of mods installed and there\u0027s a fair few I don\u0027t recognise from their toolbar buttons so it\u0027s tricky to suggest any likely culprits. \u00A0I would probably start by removing purely cosmetic mods and testing again. \u00A0Then, try without any mods that you can think of that might do things on a regular schedule (KAC, auto-backup, life support etc.). \u00A0It certainly shouldn\u0027t be anything to do with purely part based mods (unless they use stock KSP modules in really bad ways) so you can probably ignore most of those.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/116239-wiseman/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022116239\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/116239-wiseman/\u0022 rel=\u0022external\u0022\u003E@Wiseman\u003C/a\u003E, for\u00A0career only I guess the most likely thing is something contract related. \u00A0Do you have Contract Configurator and a shed load of contract packs? \u00A0If so, try removing that (or anything else you can think of that might be career only). \u00A0Also, probably worth doing a Science mode run too in case it is something to do with science experiments instead...\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 2: It\u0027s probably also worth testing a stock career game to see if that does anything similar. \u00A0It may be a stock career issue that is exacerbated by mods...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo, I followed up with some testing for the last hour or two. Yanking the visual mods helped a little, but only by a small degree. I spent some time isolating the two things I thought were most at fault - OPM for the map-view stutter, and Contract Configurator (and a giant pile of contract packs) for the general stutter. Each one, even in a pure stock install, seems to cause fairly significant memory spikes.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nJust like Galen saw in the previous post, I saw zero spikes in a bone-stock install, so it\u0027s gotta be mod interactions. I\u0027ve dropped a bunch of info on the OPM and CC devs, so I guess we\u0027ll see!\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-03T12:03:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222612396\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464835757\u0022 data-ipsquote-userid=\u0022116239\u0022 data-ipsquote-username=\u0022Wiseman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/2/2016 at 3:49 AM, Wiseman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOPM for the map-view stutter\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs mentioned elsewhere, I have submitted a pull request to Kopernicus to (mostly) fix the garbage issues with its on-demand planet texture loading code. \u00A0I also plan to make another optimisation to reduce the garbage further. \u00A0In the meantime, you can use the following MM patch to disable the on-demand textures (thanks to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/113260-sigma88/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022113260\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/113260-sigma88/\u0022 rel=\u0022\u0022\u003E@Sigma88\u003C/a\u003E):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@Kopernicus:FINAL\n{\n    %useOnDemand = False\n}\u003C/pre\u003E\n\u003Cp\u003E\nJust save that as, e.g. disableOnDemand.cfg somewhere in your GameData folder and it should totally eliminate the thrash from moving the camera in the map view/tracking station. \u00A0KSP will use more memory as it will keep the textures for all planets\u00A0loaded all the time but if you\u0027ve got plenty this will probably be preferable.\n\u003C/p\u003E\n"},{"CreatedByName":"Wiseman","CreatedById":116239,"CreatedDateTime":"2016-06-04T01:11:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222614454\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464955437\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs mentioned elsewhere, I have submitted a pull request to Kopernicus to (mostly) fix the garbage issues with its on-demand planet texture loading code. \u00A0I also plan to make another optimisation to reduce the garbage further. \u00A0In the meantime, you can use the following MM patch to disable the on-demand textures (thanks to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/113260-sigma88/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022113260\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/113260-sigma88/\u0022 rel=\u0022external\u0022\u003E@Sigma88\u003C/a\u003E):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\n@Kopernicus:FINAL\n{\n    %useOnDemand = False\n}\u003C/pre\u003E\n\u003Cp\u003E\nJust save that as, e.g. disableOnDemand.cfg somewhere in your GameData folder and it should totally eliminate the thrash from moving the camera in the map view/tracking station. \u00A0KSP will use more memory as it will keep the textures for all planets\u00A0loaded all the time but if you\u0027ve got plenty this will probably be preferable.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat fix works great! There\u0027s still a spike in memory usage at first, but I can view the planet without the rapid-fire stuttering. Thanks again!\n\u003C/p\u003E\n"},{"CreatedByName":"N1njawarrior","CreatedById":163993,"CreatedDateTime":"2016-06-04T22:37:50Z","Content":"\n\u003Cp\u003E\nGood news, I fixed my ram, so now I can actually use this mod.\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"spacehorse","CreatedById":164514,"CreatedDateTime":"2016-06-05T09:57:31Z","Content":"\n\u003Cp\u003E\n\u003Cspan\u003E@Padishar, one question if I increas the \u003C/span\u003Eheap space will this\u00A0give me some advantage? If yes what I need to adjust , I am a bit struggeling with the numbers ;-)\n\u003C/p\u003E\n\u003Cp\u003E\nI increase already to 9000 MB with put one 0 behind every line but what I need to put if I would like to use 16GB? (I have total 32 GB)\n\u003C/p\u003E\n\u003Cp\u003E\nMany Thanks in advance!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-05T09:58:21Z\u0022 title=\u002206/05/2016 09:58  AM\u0022 data-short=\u00228 yr\u0022\u003EJune 5, 2016\u003C/time\u003E by spacehorse\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-05T10:38:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222617304\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465120651\u0022 data-ipsquote-userid=\u0022164514\u0022 data-ipsquote-username=\u0022spacehorse\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, spacehorse said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan\u003E@Padishar, one question if I increas the \u003C/span\u003Eheap space will this\u00A0give me some advantage? If yes what I need to adjust , I am a bit struggeling with the numbers ;-)\n\u003C/p\u003E\n\u003Cp\u003E\nI increase already to 9000 MB with put one 0 behind every line but what I need to put if I would like to use 16GB? (I have total 32 GB)\n\u003C/p\u003E\n\u003Cp\u003E\nMany Thanks in advance!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIncreasing the amount of padding should always increase the time between the stutters until the point where your machine decides to start using virtual memory. \u00A0However,\u00A0the benefit is likely to be outweighed by the increased time it takes to do garbage collections at some point. \u00A0The numbers in the configuration are simply the number of blocks of each size that are pre-allocated. \u00A0The approximate usage for each size of block\u00A0can be calculated by multiplying the count by (size \u002B\u00A016) though this will come out a bit low especially for the larger block\u00A0sizes. \u00A0Simply calculating the ratio between what your current settings give and what you want and then multiplying all the numbers by that ratio should get you to (roughly) where you want though it would probably be beneficial to add some padding for some of the larger blocks too (e.g. for 664, 800 and 1008, the others start to get really wasteful).\n\u003C/p\u003E\n"},{"CreatedByName":"spacehorse","CreatedById":164514,"CreatedDateTime":"2016-06-05T11:37:01Z","Content":"\n\u003Cp\u003E\nSorry I think I am on a wrong way\u00A0maybe i too stupid....., can you give me please one line as an example?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd thanks for your fast Response :-)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/116239-wiseman/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022116239\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/116239-wiseman/\u0022 rel=\u0022\u0022\u003E@Wiseman\u003C/a\u003Eand by the way the coperncus topic i tested so the workaround bring in my Situation\u00A0unfortuntely nothing.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-05T11:39:00Z\u0022 title=\u002206/05/2016 11:39  AM\u0022 data-short=\u00228 yr\u0022\u003EJune 5, 2016\u003C/time\u003E by spacehorse\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-05T13:59:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222617375\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465126621\u0022 data-ipsquote-userid=\u0022164514\u0022 data-ipsquote-username=\u0022spacehorse\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, spacehorse said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ncan you give me please one line as an example?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nRight, assuming the default config adds 900MB and you want it to use 16GB then divide 16000 (1 GB is\u00A0approx 1000 MB) by 900 to give approx. 17.8. \u00A0Now change all the lines in the file by this amount, e.g.\n\u003C/p\u003E\n\u003Cp\u003E\n8\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 1690000\u003Cbr\u003E\n...becomes:\u003Cbr\u003E\n8\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0: 30082000\n\u003C/p\u003E\n\u003Cp\u003E\nYou don\u0027t need to be particularly accurate so could just use 30000000 in this case.\n\u003C/p\u003E\n"},{"CreatedByName":"spacehorse","CreatedById":164514,"CreatedDateTime":"2016-06-05T17:03:33Z","Content":"\n\u003Cp\u003E\nMany Thanks :-)\n\u003C/p\u003E\n"},{"CreatedByName":"Badfish","CreatedById":147510,"CreatedDateTime":"2016-06-18T20:37:38Z","Content":"\n\u003Cp\u003E\nHey, thanks a lot, this mod works great. \u00A0I didn\u0027t want to admit how much the stutter bothered me until now, it was brutal even when only lasting 200 ms. \u00A0Before the frequency was 5 to 7s, now its 60 to 75s. \u00A0I only use my computer for Kerbal so I added a zero for each value in the cfg and it works good so far on 16gb, but I haven\u0027t done any big launches yet. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nA great program I use now is Project Lasso. \u00A0I set KSP to permanently run in real-time on cpu and only have affinity for actual cores (which I think helped run-time) and have max priorities. \u00A0I also set everything else that I could to only run on one core and have minumum priorities for I/O, CPU, and memory. \u00A0Hopefully I didn\u0027t hamper anything that KSP relies on, but with a 2.5GHz I7 it\u0027s running at more than half-speed with 250 part ships landed on almost max graphics settings. \u00A0I did put max delta physics to 0.07 though. \u00A0Keep up the great work! \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nP.S. Someone else mentioned an idea for a mod that would help run-time by splitting one ship up to run on multiple cores. \u00A0I was thinking of trying this out in a manner similar to how people used to build helicopters. \u00A0If you could lock two ships together that aren\u0027t physically joined maybe the game would process physics more parallel. \u00A0You build in the VAB with a decoupler at the joint\u00A0and on the pad you decouple, with some combination of parts that hold the two together. \u00A0 I don\u0027t know how strong such a connection can be though. \u00A0We keep hearing that Unity is going upgrade their multi-threading but who knows what that means for KSP. \u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"hirschhornsalz","CreatedById":118991,"CreatedDateTime":"2016-06-21T19:24:24Z","Content":"\n\u003Cp\u003E\nGreat Mod. I was able to reduce the stutter from every 2 oder 3 seconds (I suspect the problem seems to be worsened with Kopernicus/New Horizons) and really unplayable to a 4 minute, barely noticable stutter. I multiplied the values in padheap.cfg by 20 and running at about 22 GB memory consumption on a 32 GB rig.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-21T20:01:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222640267\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466537064\u0022 data-ipsquote-userid=\u0022118991\u0022 data-ipsquote-username=\u0022hirschhornsalz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n34 minutes ago, hirschhornsalz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGreat Mod. I was able to reduce the stutter from every 2 oder 3 seconds (I suspect the problem seems to be worsened with Kopernicus/New Horizons) and really unplayable to a 4 minute, barely noticable stutter. I multiplied the values in padheap.cfg by 20 and running at about 22 GB memory consumption on a 32 GB rig.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou\u0027re welcome. \u00A0If you think Kopernicus is contributing to your stutter (which it probably is) then try out the test version in this post:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/140580-112-kopernicus-105-may-28/\u0026amp;do=embed\u0026amp;embedComment=2617351\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"TrooperCooper","CreatedById":110599,"CreatedDateTime":"2016-06-22T10:39:00Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFrom the 1.1.3 patch-notes:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n* Reduction in the creation of Garbage Objects in Flight scene.\n* Reduction in the creation of Garbage Objects in Space Center.\n* Optimize Part.GetConnectedResources and Vessel.GetActiveResources for speed and to not create garbage.\u003C/pre\u003E\n\u003Cp\u003E\nI am still on 1.1.2 since I play a heavily modded \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E/\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003E\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E\u003C/abbr\u003E career. So I am gonna wait for the mods to update before checking out 1.1.3. But this might help with our issue. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-22T10:40:08Z\u0022 title=\u002206/22/2016 10:40  AM\u0022 data-short=\u00228 yr\u0022\u003EJune 22, 2016\u003C/time\u003E by TrooperCooper\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-22T14:54:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222641377\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466591940\u0022 data-ipsquote-userid=\u0022110599\u0022 data-ipsquote-username=\u0022TrooperCooper\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, TrooperCooper said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am still on 1.1.2 since I play a heavily modded \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E/\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003E\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003E\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E career. So I am gonna wait for the mods to update before checking out 1.1.3. But this might help with our issue. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt does. \u00A0A number of the garbage improvements in 1.1.3 were done as a direct result of the various investigations done and bug reports submitted.\n\u003C/p\u003E\n\u003Cp\u003E\nSpecifically, the issue with on-rails vessels described in this post:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139128-112-memgraph-1007-with-stutter-reduction/\u0026amp;do=embed\u0026amp;embedComment=2569768\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n...was addressed. \u00A0The case that was allocating ~4900 KB/s now allocates ~500 KB/s (nearly an order of magnitude improvement).\n\u003C/p\u003E\n\u003Cp\u003E\nThe editor parts list issue described here:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139484-112-grumpycollector-101-stutter-what-stutter/\u0026amp;do=embed\u0026amp;embedComment=2575924\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n...was also significantly improved (I think the largest stock category has gone from ~5 MB/s to ~300 KB/s)\u00A0as was the issue in Part.GetConnectedResources that I\u0027ve been trying to get fixed since I posted about it here:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/129562-its-been-6-months-since-i-asked-about-the-stutter/\u0026amp;do=embed\u0026amp;embedComment=2355833\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n...resulting in the station in my avatar that used to allocate\u00A0~180 MB/s while\u00A0the \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E (there are 288 4-way \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E blocks on the vessel)\u00A0was firing, to now allocate ~12 MB/s. \u00A0This is substantially less than the 32 MB/s it allocates when the \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E isn\u0027t firing though this is because the framerate drops from 11 to 4 due to the extreme CPU usage of the monoprop transfers and most of the remaining garbage is generated by the FixedUpdate processing which is called much less often as a result. \u00A0Yes, this is still rather a lot,\u00A0but the remaining big offenders have been identified and reported to Squad (in this case, docking ports do about two thirds of it and the rest is mostly the solar panels and probe cores).\n\u003C/p\u003E\n"}]}