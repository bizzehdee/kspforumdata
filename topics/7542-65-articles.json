{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":65,"Articles":[{"CreatedByName":"Candre","CreatedById":15181,"CreatedDateTime":"2015-02-23T13:25:21Z","Content":"\n\u003Cp\u003EIt\u0027s a rather dated library, so it should work out in .NET 3.5. I\u0027ll report back if I get it working today, as I think it will be rather interesting.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-02-25T15:14:47Z","Content":"\n\u003Cp\u003EJust wanted to give everyone a heads up about the Part.FlightID value.\u003C/p\u003E\u003Cp\u003EIt seems to be the field that is generally used to uniquely identify a part and while this is true almost all of the time, I just wanted to warn people that it is not guaranteed unique.\u003C/p\u003E\u003Cp\u003EI programmed my mod under the assumption that it was guaranteed unique and while it seemed to be true for months, I just recently had a bug report filed where the cause of my mod crashing was the fact that two parts had the same FlightID. (The player uploaded his persistent.sfs and I double-checked this myself.)\u003C/p\u003E\u003Cp\u003ESo while rare, make sure to add an exception clause to your code for what will happen if two parts have the same flightID. It is rare, but it does happen.\u003C/p\u003E\u003Cp\u003EI suppose I could also ask if anyone has a better idea on how to uniquely identify parts? FlightID is what I have always been told but is there another method out there?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-25T23:38:28Z","Content":"\n\u003Cp\u003EThanks, this could be a real pain. Is it possible this was just an edge case with a partially corrupt save or something similar?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-02-26T00:53:19Z","Content":"\n\u003Cp\u003EI don\u0027t think so.\u003C/p\u003E\u003Cp\u003EThe persistence file looks normal (no corruption) and it is two different launched vessels as per the player\u0027s description of what he was doing. (In that KSP has not cloned the same vessel somehow.)\u003C/p\u003E\u003Cp\u003EOne thing to keep in mind is that this is rare. I have been using the FlightID extensively in my action groups mod for months as a unique identifier and this is the first report of this happening.\u003C/p\u003E\u003Cp\u003EAlso of note is that the parts are on two different vessels. It is quite possible that using a combination of vessel id (the GUID string) and part.FlightID would work as a guaranteed unique identifier, or that the combination of those two values is random enough that it is close enough to unique for our purposes.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-02-26T05:01:41Z","Content":"\n\u003Cp\u003EBeing a Guid there are 2^128 different possible FlightIDs, and I don\u0027t know if you know how big 2^128 is, but it\u0027s really huge. It\u0027s about 3.4x10^38. So huge, that if you created a different Guids on an 8 core computer running at 4GHz (meaning 32 \u003Cstrong\u003Ebillion\u003C/strong\u003E new Guids per second), it would take you about 25.5 \u003Cem\u003Ebillion times\u003C/em\u003E the current age of the universe to create them all. The probability of two FlightIDs being the same is (1/(2^128))^2, or 8.6x10^-78. It\u0027s really small. The probability of two parts on the same persistence file containing 1000 parts being the same is 4.3x10^-72. Really, it\u0027s far too low to even consider.\u003C/p\u003E\u003Cp\u003EAll of this to say: keep using FlightID and tell the person who sent you this persistence file he should be popping some champagne about this. He\u0027s special.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-26T05:49:50Z\u0022 title=\u002202/26/2015 05:49  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 26, 2015\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-02-26T14:41:11Z","Content":"\n\u003Cp\u003EPart.FlightID is a uint, not a GUID. The Vessel.id is a GUID though. So the combination should be enough to never have repeats.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-02-26T14:42:46Z","Content":"\n\u003Cp\u003EJust a point of order, it is the Vessel ID (not the FlightID) that is a GUID object. The Part.FlightID is a uint of which there is 4,294,967,295 possibilities. (Assuming SQUAD uses the entire range, I don\u0027t know if we can check that.)\u003C/p\u003E\u003Cp\u003EIt is still a really low possibility that two parts in the same persistence file would have the same FlightID so I\u0027m not sure it is worth coding for this situation, this was more for awareness so that if you are trying to track down an error where data seems to be jumping around, check if your mod is processing different parts with the same FlightIDs and crossing data over between the two parts.\u003C/p\u003E\u003Cp\u003EHowever, as the Vessel ID is a GUID and there are a lot fewer parts on a vessel than in an entire persistence file, if you design your mod so that you work with vessels via the vessel ID and then only the parts within that vessel via the FlightID, you drastically reduce your chances of running into this.\u003C/p\u003E\u003Cp\u003EI\u0027m not up on my statistics, but I think on the uint FlightID and 1000 parts in a persistence file, it is roughly a 1 in 4 million chance that two parts have the same FlightID. Still rare but not as unlikely as if it were a GUID. (Assuming SQUAD uses the entire range of the uint object.) \u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Sneaky DMagic, sneaky.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-02-26T15:01:28Z","Content":"\n\u003Cp\u003EWell Squad is remarquably dumb.\u003C/p\u003E\u003Cp\u003EAnd no, actually, the chance of two parts having the same FlightID would then be around one over thirty six trillions (2.707x10^-14). Still too big to bother about it. But to make sure of it you could store both VesselID and PartID, and then check if both are identical. That\u0027d do it.\u003C/p\u003E\n"},{"CreatedByName":"DanHalen","CreatedById":111512,"CreatedDateTime":"2015-03-02T06:57:31Z","Content":"\n\u003Cp\u003EI\u0027m writing a plugin for a part and was wondering how to get the amount of electricity (or any resource for that matter) in a current vessel. When called, the function will find out how much electric charge is in the current vessel, and return with an integer.\u003C/p\u003E\u003Cp\u003EHere\u0027s a pseudo-code example of what I\u0027m looking for:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[B]int[/B] electricityAmount = vessel.getElectricCharge();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-03-02T14:59:03Z","Content":"\n\u003Cp\u003EYou want the total resource or how much is available for a part ?\u003C/p\u003E\u003Cp\u003ETotal : \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPartResourceDefinition definition = PartResourceLibrary.Instance.GetDefinition(\u0022ElectricCharge\u0022);\u003Cbr\u003EList\u0026lt;Part\u0026gt; parts = (HighLogic.LoadedSceneIsEditor ? EditorLogic.fetch.ship.parts : vessel.parts);\u003Cbr\u003E\u003Cbr\u003Edouble electricityAmount = 0;\u003Cbr\u003Eforeach (Part p in parts)\u003Cbr\u003E{\u003Cbr\u003E    r = p.Resources.Get(definition.id);\u003Cbr\u003E    if (r != null)\u003Cbr\u003E        electricityAmount \u002B= r.amount;\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAvailable for a part :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPartResourceDefinition definition = PartResourceLibrary.Instance.GetDefinition(\u0022ElectricCharge\u0022);\u003Cbr\u003EVessel.ActiveResource result = vessel.GetActiveResource(definition);\u003Cbr\u003Edouble electricityAmount = result.amount;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Robotengineer","CreatedById":104525,"CreatedDateTime":"2015-03-03T20:01:10Z","Content":"\n\u003Cp\u003EHow do I spawn a vessel around a celestial body? I have made methods for generating random names and orbits, but am unsure what method to use to create a vessel.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-03-03T20:06:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Robotengineer\u0022 data-cite=\u0022Robotengineer\u0022\u003E\u003Cdiv\u003EHow do I spawn a vessel around a celestial body? I have made methods for generating random names and orbits, but am unsure what method to use to create a vessel.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/jrossignol/ContractConfigurator/blob/master/source/ContractConfigurator/ContractBehaviour/SpawnVessel.cs#L167\u0022 rel=\u0022external nofollow\u0022\u003EBehold\u003C/a\u003E! That\u0027s at least one way, although there are certainly others.\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-03-03T21:02:03Z","Content":"\n\u003Cp\u003EStarting from the KSPApiExtensions FloatEdit tweakable, I wrote my own tweakable for TweakScale and fail to separate it. \u003C/p\u003E\u003Cp\u003EThe main dependency to KAE are these two lines from UIPartActionsExtended.cs, which somehow lead to the prefab registration. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Econtroller.fieldPrefabs.Add(UIPartActionScaleEdit.CreateTemplate());\u003Cbr\u003EfieldPrefabTypes.Add(typeof(UI_ScaleEdit));\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe first line seems straightforward, since I do not need KAE to reach the controller object. However I do not get what the second one does, other than adding something to a local list that is never used afterwards. I get the following error in the log: \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EItemPrefab for control type \u0027UI_ScaleEdit\u0027 not found.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo it is missing some sort of registration for the type/prefab. Can anyone tell me how to do this? If it helps, here are the code versions I am talking about (trying to move UIPartActionScaleEdit.cs):\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/pellinor0/TweakScale/tree/dev/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/pellinor0/TweakScale/tree/dev/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/pellinor0/KSPAPIExtensions/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/pellinor0/KSPAPIExtensions/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT: \u003Cstrong\u003ESolved!\u003C/strong\u003E I managed to copy the registration code and sort out the things which should not be done twice.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-07T01:02:08Z\u0022 title=\u002203/07/2015 01:02  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 7, 2015\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2015-03-18T19:48:44Z","Content":"\n\u003Cp\u003EBack with what is likely another dumb question: How do you prorammatically unlock a tech node and all associated parts? Here\u0027s my existing code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic static void UnlockNode(string techID)\u003Cbr\u003E        {\u003Cbr\u003E            foreach (RDTech r in AssetBase.RnDTechTree.GetTreeTechs())\u003Cbr\u003E            {\u003Cbr\u003E                if (r.techID == techID)\u003Cbr\u003E                {\u003Cbr\u003E                    r.state = RDTech.State.Available;\u003Cbr\u003E                    ResearchAndDevelopment.Instance.SetTechState(techID, ResearchAndDevelopment.Instance.GetTechState(techID));\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis marginally works. If I activate this with a button, it first entirely kills the window with the button so THAT\u0027S an issue, but it also seems to unlock the node when you go into Research and Development. However, the node shows the parts are available for purchase instead of entirely unlocked and the panel for Research and Development does not go away when exited.\u003C/p\u003E\u003Cp\u003EIt broke rather spectacularly, and I\u0027d love to know how to do this properly.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-03-18T20:01:26Z","Content":"\n\u003Cp\u003EHaving a look at how sarbian\u0027s \u003Ca href=\u0022https://github.com/sarbian/ResearchThemAll/blob/master/ResearchThemAll.cs\u0022 rel=\u0022external nofollow\u0022\u003EResearch them all\u003C/a\u003E works is probably your best bet\u003C/p\u003E\n"},{"CreatedByName":"C1maCat","CreatedById":121247,"CreatedDateTime":"2015-03-18T20:53:38Z","Content":"\n\u003Cp\u003EHi, I\u0027m a beginner to modding\u003C/p\u003E\u003Cp\u003EI have experience in python and javascript along with some experiance in c\u002B\u002B and objective C.\u003C/p\u003E\u003Cp\u003EI\u0027ve recently been learning C#, and for sure have all the basics down.\u003C/p\u003E\u003Cp\u003EAs far as I know I have my IDE set up correctly.\u003C/p\u003E\u003Cp\u003EHow do I set up a simple gui, say, on the KSC Screen. \u003C/p\u003E\u003Cp\u003EThanks,\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-03-18T21:14:25Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Plugins\u0022 rel=\u0022external nofollow\u0022\u003EUseful references for starting out\u003C/a\u003E (including setting up the required references and making a simple part module)\u003C/p\u003E\u003Cp\u003ETo get gui elements to show at the space center scene, which I assume is what you meant by the KSC screen\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//using statements, namespace, etc.\u003Cbr\u003E\u003Cbr\u003E[KSPAddon(KSPAddon.Startup.SpaceCenter, false)] // this plugin will be run every time we enter the space center scene\u003Cbr\u003Epublic class IDrawABox : Monobehaviour\u003Cbr\u003E{\u003Cbr\u003E    public void OnGUI\u003Cbr\u003E    {\u003Cbr\u003E        GUI.Box(new Rect(100,100,100,100), \u0022I\u0027m a Box\u0022);\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ELook up the Unity GUI / GUILayout documentation for how to make a useful GUI\u003C/p\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2015-03-24T20:22:04Z","Content":"\n\u003Cp\u003EEDIT: whoops.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-24T20:32:37Z\u0022 title=\u002203/24/2015 08:32  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 24, 2015\u003C/time\u003E by johnqevil\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2015-03-27T15:18:00Z","Content":"\n\u003Cp\u003EI\u0027m finding myself posting too often in here, I think. Next question: GameEvents.OnPartPurchased. Not sure I\u0027m actually using this correctly, but it does not seem to be firing when I test my code.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPAddon(KSPAddon.Startup.SpaceCentre, false)]\u003Cbr\u003Epublic class SpaceRaceMain : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003Epublic void Start()\u003Cbr\u003E        {\u003Cbr\u003E            if (Instance != null)\u003Cbr\u003E            {\u003Cbr\u003E                Destroy(Instance);\u003Cbr\u003E            }\u003Cbr\u003E            Instance = this;\u003Cbr\u003E            Debug.Log(\u0022SpaceRace: Adding events\u0022);\u003Cbr\u003E            GameEvents.OnPartPurchased.Add(AddEngineeringProject);\u003Cbr\u003E        }\u003Cbr\u003Epublic static void AddEngineeringProject(AvailablePart part)\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(\u0022Firing AddEngineeringProject\u0022);\u003Cbr\u003E        }        \u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI get the \u0022adding events\u0022 entry in the log, so I know Start() is being called as expected. The other entry doesn\u0027t get written when I go into RnD and buy a part.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-03-27T15:30:19Z","Content":"\n\u003Cp\u003ELooking at that, my first thought is that the AddEngineeringProject can\u0027t be static.\u003C/p\u003E\u003Cp\u003EThat is the only difference I can see between your example code and where I\u0027m using GameEvents myself.\u003C/p\u003E\u003Cp\u003EThe only other possibility I can think of is that the PartPurchased event is not implemented where you think it is. Looking at the name, I would assume it fires when you purchase (not research) a part on the R\u0026amp;D screen, but has anyone actually confirmed that?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2015-03-27T15:35:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003ELooking at that, my first thought is that the AddEngineeringProject can\u0027t be static.\u003Cp\u003EThat is the only difference I can see between your example code and where I\u0027m using GameEvents myself.\u003C/p\u003E\u003Cp\u003EThe only other possibility I can think of is that the PartPurchased event is not implemented where you think it is. Looking at the name, I would assume it fires when you purchase (not research) a part on the R\u0026amp;D screen, but has anyone actually confirmed that?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust tried it, you\u0027re right. It cannot be static. It does seem to fire when you actually purchase the part in the RnD screen, I\u0027m going to see if it fires for each part in standard Career mode as well. I think it will.\u003C/p\u003E\u003Cp\u003EEDIT: Oh, and thank you!\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-03-27T15:49:38Z","Content":"\n\u003Cp\u003EThat does not look that different from \u003Ca href=\u0022https://github.com/sarbian/ResearchThemAll/blob/master/ResearchThemAll.cs\u0022 rel=\u0022external nofollow\u0022\u003Emy own code\u003C/a\u003E too\u003C/p\u003E\u003Cp\u003EThe R\u0026amp;D screen is actually in the SpaceCentrer scene, so the only thing I see too is the static but I m quite sure I did static event before ...\u003C/p\u003E\u003Cp\u003ETo test did you unlock a tech node or did you purchase a part ?\u003C/p\u003E\u003Cp\u003EEdit : ninjaed \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2015-04-01T22:52:06Z","Content":"\n\u003Cp\u003EBack with another one, and it\u0027s a doozy:\u003C/p\u003E\u003Cp\u003EI\u0027m trying to set tech nodes to Unavailable (or Available) during several points. I\u0027m getting errors that prevent leaving the Research Center, or entering it depending on where we came into the Space Center from.\u003C/p\u003E\u003Cp\u003EHere\u0027s the thing: it only happens for nodes that were loaded from a file, but not for any nodes freshly researched. Those shut down just fine, and the system works fine until the next save/load cycle. This includes entering/leaving the tracking center, etc.\u003C/p\u003E\u003Cp\u003EThe code is all over the place as it\u0027s getting rather large, but I have narrowed the problem down.\u003C/p\u003E\u003Cp\u003ELoading function, called from OnLoad():\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic void LoadData()\u003Cbr\u003E        {\u003Cbr\u003E            researchList.Clear();\u003Cbr\u003E            Debug.Log(\u0022SpaceRace: Calling LoadData\u0022);\u003Cbr\u003E            if (File.Exists(SpaceRaceMain.spaceracefolder \u002B \u0022RnDList\u0022))\u003Cbr\u003E            {\u003Cbr\u003E                using (StreamReader reader = new StreamReader(SpaceRaceMain.spaceracefolder \u002B \u0022RnDList\u0022))\u003Cbr\u003E                {\u003Cbr\u003E                    string line = \u0022\u0022;\u003Cbr\u003E                    while ((line = reader.ReadLine()) != null)\u003Cbr\u003E                    {\u003Cbr\u003E                        researchList.Add(line);\u003Cbr\u003E                    }\u003Cbr\u003E                    Debug.Log(String.Format(\u0022SpaceRace: Loaded {0} lines into researchList\u0022, researchList.Count));\u003Cbr\u003E                    reader.Close();\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E            foreach (string line in researchList)\u003Cbr\u003E            {\u003Cbr\u003E                string[] processor = line.Split(\u0027;\u0027);\u003Cbr\u003E                SpaceRaceMain.Instance.researchProjects.Clear();\u003Cbr\u003E                ProtoCrewMember crew = HighLogic.CurrentGame.CrewRoster.Crew.FirstOrDefault(c =\u0026gt; c.name == processor[2]);\u003Cbr\u003E                ScienceProject project = new ScienceProject();\u003Cbr\u003E                project.node = ResearchAndDevelopment.Instance.GetTechState(processor[1]);\u003Cbr\u003E                project.UTTimeCompleted = Convert.ToDouble(processor[3]);\u003Cbr\u003E                project.KerbalAssigned = processor[2];\u003Cbr\u003E                project.TechNode = processor[1];\u003Cbr\u003E                project.TechName = processor[0];\u003Cbr\u003E                project.Cost = Convert.ToInt32(processor[5]);\u003Cbr\u003E                project.InProgress = Boolean.Parse(processor[4]);\u003Cbr\u003E                if (!project.CheckList())\u003Cbr\u003E                {\u003Cbr\u003E                    Debug.Log(\u0022SpaceRace: Loading science project to list from file.\u0022);\u003Cbr\u003E                    Debug.Log(\u0022SpaceRace: Project \u0022 \u002B project.TechName \u002B \u0022 loaded. Kerbal assigned: \u0022 \u002B crew.name \u002B \u0022.\u0022);\u003Cbr\u003E                    SpaceRaceMain.Instance.researchProjects.Add(project);\u003Cbr\u003E                    crew.rosterStatus = ProtoCrewMember.RosterStatus.Assigned;\u003Cbr\u003E                    project.Lock();\u003Cbr\u003E                }\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class ScienceProject\u003Cbr\u003E    {\u003Cbr\u003E        public string KerbalAssigned { get; set; } //Kerbal assigned to project. Kerbal is unavailable during project time.\u003Cbr\u003E        public double UTTimeCompleted { get; set; } //Exact time project will complete and the part and Kerbal assigned will both become available.\u003Cbr\u003E        public bool InProgress { get; set; } //Boolean for progress status.\u003Cbr\u003E        public string TechNode { get; set; } //Tech node internal name \u003Cbr\u003E        public string TechName { get; set; }\u003Cbr\u003E        public ProtoTechNode node  = new ProtoTechNode(); \u003Cbr\u003E        public int Cost { get; set; }\u003Cbr\u003E        public void Unlock()\u003Cbr\u003E        {\u003Cbr\u003E            node.state = RDTech.State.Available;\u003Cbr\u003E            ResearchAndDevelopment.Instance.SetTechState(TechNode, node);\u003Cbr\u003E        }\u003Cbr\u003E        public void Lock()\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(node.techID);\u003Cbr\u003E            node.state = RDTech.State.Unavailable;\u003Cbr\u003E            ResearchAndDevelopment.Instance.SetTechState(TechNode, node);\u003Cbr\u003E            Debug.Log(\u0022SpaceRace: Locked project.\u0022);\u003Cbr\u003E        }\u003Cbr\u003E        public bool CheckList()\u003Cbr\u003E        {\u003Cbr\u003E            return SpaceRaceMain.Instance.researchProjects.FirstOrDefault(t =\u0026gt; t.TechNode == this.TechNode) != null;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI get the dreaded \u0022object reference not set to an instance of an object\u0022 error any time Lock is called, or when processing the same code directly in the calling functions. The same goes for Unlock as well. I suspect it\u0027s how I\u0027m accessing the node states, but I get the same error with either line commented out.\u003C/p\u003E\u003Cp\u003EEDIT: I should make it clear: \u003Cspan style=\u0022color:#333333;\u0022\u003EresearchProjects is a public ScienceProjects list.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Epublic List\u0026lt;ScienceProject\u0026gt; researchProjects = new List\u0026lt;ScienceProject\u0026gt;();\u003C/p\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2015-04-03T17:08:14Z","Content":"\n\u003Cp\u003EI\u0027ve got this narrowed further now, it seems that\u0027s failing before Lock() is called, when I go to recreate the object. Specifically, when the ProtoTechNode is being recreated:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E                string line = \u0022basicRocketry;Basic Rocketry;5\u0022;\u003Cbr\u003E                string[] processor = line.Split(\u0027;\u0027);\u003Cbr\u003E                project.node = new ProtoTechNode();\u003Cbr\u003E\u003Cbr\u003E                project.node = ResearchAndDevelopment.Instance.GetTechState(processor[0]);\u003Cbr\u003E                Debug.Logger(\u0022Added node \u0022 \u002B project.node.techID);\u003Cbr\u003E                SRSProjects.researchProjects.Add(project);\u003Cbr\u003E                SRSMain.Instance.Logger(\u0022Added project \u0022 \u002B project.techName \u002B \u0022 to list\u0022);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know why this is failing. Effectively the same code is called at on GameEvents.OnTechnologyResearched under Start(), with no errors.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-04-04T22:32:21Z","Content":"\n\u003Cp\u003EMy first thought is that I think OnLoad runs before Start doesn\u0027t it?\u003C/p\u003E\u003Cp\u003EIn my (limited) understanding of how unity works, Awake() runs when an object is created, then OnLoad runs to load values, (insert other methods I\u0027m forgetting about here), then once everything is ready, Start runs as the first Update frame, then Update and FixedUpdate take over.\u003C/p\u003E\u003Cp\u003ESo are you referencing something that is not created until the Start method runs maybe?\u003C/p\u003E\u003Cp\u003EAll the help I can offer, I\u0027ve not done anything like what you are trying.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"}]}