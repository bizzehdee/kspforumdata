{"TopicId":214636,"ForumId":198,"TopicTitle":"Falling through surface bug can cause all saves in a campaign to be unloadable (with work-around to fix)","CreatedByName":"Steve7893","CreatedById":226360,"CreatedDateTime":"2023-03-07T13:24:33Z","PageNum":1,"Articles":[{"CreatedByName":"Steve7893","CreatedById":226360,"CreatedDateTime":"2023-03-07T13:24:33Z","Content":"\n\u003Cp\u003E\nOver in another thread, a discussion arose about an issue I was having, and I was asked to repost this here in the bugs thread.\n\u003C/p\u003E\n\u003Cp\u003E\nMy goal in testing was to do a redezvous mission.\u00A0 \u00A0Land 5 kerbals on Minmus in a single mission, and then join them with another 5 kerbals in a subsequent mission.\u00A0 One hundred percent of the time, when you get close enough to the landed ship, close enough for the mechanics to engage, the land ship \u0022falls through the surface of the world\u0022 on a straight line trajectory towards the center of that planet.\u00A0 \u00A0Once it reaches the center, it insta-translates somewhere along that line with an extremely high rate of speed, something like 56,000 m/s or so.\n\u003C/p\u003E\n\u003Cp\u003E\nThis part you all know already as it is posted in another thread.\u00A0 \u00A0Here is the extra part:\n\u003C/p\u003E\n\u003Cp\u003E\nIf you quickly go to the tracking station after the fall-through, you can \u0022Control\u0022 the wayward fall-through ship.\u00A0 \u00A0Do that, and then gradually accelerate timewarp for a reasonable long time.\u00A0 \u00A0Long enough to far leave the kerbol system.\u00A0 \u00A0 Choose \u0022Exit Game and Save\u0022\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003EWhen you reload, none of the saves in that campaign will load.\u00A0 \u00A0Here is a cut-paste from the other thread:\n\nI just got around to recreating the campaign that won\u0027t load.\u00A0 \u00A0Tried your suggestion after seeing the list of saves.\u00A0 \u00A0Sadly none of the saves will load.\n\nUsing Microsoft Procmon, focused on KSP2_x64.exe, the load appears to be stuck in an endless loop reading the file at:\n\nAppData\\LocalLow\\Intercept Games\\Kerbal Space Program 2\\backtrace\\bt-breadcrumbs-0\n\nover and over from start to end of file over and over.\u00A0 \u00A0So I do get a chance to load another save from the campaign, but it doesn\u0027t matter.\u00A0 \u00A0Even attempting to load the saves near the bottom of that list results the same.\n\ntask manager show 7 gigs of free memory with 8.7 in use.\u00A0 KSP2 is using 2.3 gig.\u00A0 Percent CPU usage is only 7%.\u00A0 \u00A0The reading of that file is only taking 0 to 1% of the SSD\u0027s throughput.\n\nUsing the Analyze Wait Chain function indicates it is running normally, not blocked on anything.\n\nRebooting does not affect it.\n\nNew campaign works normally.\n\nSystem is a 20 core I9 with 32 gigs overall.\u00A0 GeForce RTX graphics.\u00A0 OS is Windows 10 Pro.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003E\nAt this point a fellow gamer offered to \u0022take a look\u0022 at the save files.\u00A0 \u00A0At that time I had some difficulty understanding what he meant because I had never looked over there before.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003EActually, while I was waiting to hear from you I was able to\u00A0\n\n1. Zip up the files at\u00A0AppData\\LocalLow\\Intercept Games in the original broken state in case you wanted it.\n\n2. Rename the folder.\n\n3. Start the game, reaccept EULA, save and exit.\n\n4. Using Beyond Compare on the two folders, copy files, except anything in the backtrace folder or either of the Player logs.\n\nThen upon starting the game, I noticed that the top 3 saves now had a tag \u0022VESSEL UNAVAILABLE\u0022.\u00A0 \u00A0Skipping those 3, the next one loaded fine, and in fact all ships in orbit are still in orbit, all kerbals are alive and well, and the game is running smoothly again.\n\nLet me know if you want the original zip file I made, its only about 6.5 meg or so.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003E\nAnd then later I realized this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003EIt would be interesting to know what the vessel was that was unavailable.\u00A0 \u00A0Reloading the save that worked, all of the vessels are accounted for.\u00A0 \u00A0There were no others.\n\noh gee, yes I know.\u00A0 \u00A0The unavailable vessel was the vessel that disappeared that I used to create the situation in the first place.\u00A0 \u00A0The game somehow still had a memory of it even if I could not see it anymore.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003E\nPlease understand that I am a Principle Developer at a large software company, and so I have some experience with Procmon, Windbg and so forth.\u00A0 \u00A0Just nothing specifically KSP2 to work with, so in the dark pooking around and guessing.\u00A0 \u00A0But I am posting this for what it might be worth to you.\u00A0 \u00A0The \u0022wayward\u0022 vessel had eventually disappeared from anything I could detect on the UI, once it was far away and I transited into the Tracking Station.\u00A0 \u00A0But that vessel was still remembered and the saves somehow caused that bt_bitcrumbs loop to engage regardless of the save I choose until I recopied the whole folder tree leaving that part out.\n\u003C/p\u003E\n\u003Cp style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003E\n\u00A0\n\u003C/p\u003E\n"}]}