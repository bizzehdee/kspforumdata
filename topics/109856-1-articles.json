{"TopicId":109856,"ForumId":15,"TopicTitle":"[Tutorial] Downgrading your Unity project to 4.2.2","CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-18T22:13:26Z","PageNum":1,"Articles":[{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-18T22:13:26Z","Content":"**Tutorial: Downgrading your Unity project to 4.2.2**\n\n**Premise**\n\nAs KSP is based on the Unity game engine, add-on authors would use the Unity editor to configure the models, textures and animations used in add-on parts prior to export via SQUAD\u0027s KSP PartTools.\n\nFrom Unity 4.3 onwards, the editor has migrated to using mecanim as the default animation system. However, KSP still uses what is now known as the \u0022legacy\u0022 animation system in order to properly animate changes in textures (such as engine heat-driven emissives), which mecanim does not properly support. Some time ago mbartelsm and I devised [a workaround to make Unity 4.3 and above allow legacy animations for emissives](https://forum.kerbalspaceprogram.com/threads/85221-Tutorial-Fixing-emissive-animations-for-Unity-4-3), but said workaround is no longer applicable for Unity 4.6 and above.\n\nA more permanent solution is thus to downgrade an existing Unity 4.3 or 4.6 project to 4.2.2, the last version of Unity that still offered full support for the legacy animation system for textures.\n\n* * *\n\n**Required Items**\n\n- Your existing Unity 4.3\u002B editor installation\n\n- An installer for Unity 4.2.2, from the [Unity Download Archive](https://unity3d.com/get-unity/download/archive)\n\n- Your Unity project folder, containing the assets you use for making KSP parts such as models and textures\n\n* * *\n\n**Assumptions**\n\n- Your Unity project has an Assets subfolder, where your Blender models, textures and other resources reside\n\n- Your KSP PartTools 0.20/0.23 installation also resides inside the Assets subfolder\n\n* * *\n\n**Instructions**\n\n1) Back up your project\n\n*Downgrading Unity project versions is a very risky and potentially destructive process - in the worst case scenario, your models/textures will survive, but you will have to recreate the Unity scene files, the PartTools hierarchy, the material definitions and animations. As such, I strongly recommend keeping a backup of your Unity 4.3/4.6\u002B project before proceeding with the rest of the tutorial, in case you botch the downgrade.*\n\n2) Install Unity 4.2.2 in a separate directory from your existing Unity 4.3/4.6\u002B installation\n\n*You\u0027ll need your existing Unity installation to prepare your project for the downgrade.*\n\n3) Open your project in Unity 4.3/4.6\u002B\n\n4) Go to **Edit \u003E Project Settings \u003E Editor** and make the following changes:\n\n - Set **Version Control \u003E Mode** to **Visible Meta Files**\n\n - Set **Asset Serialisation \u003E Mode** to **Force Text**\n\n*This will create meta files for every asset (models, textures, animations) you have, which contain information such as how the asset should be imported and what scripts (such as KSP PartTools) are associated with them.*\n\n5) Save your project and close Unity 4.3/4.6\u002B\n\n6) Open Unity 4.2.2 and create a new, empty project\n\n7) Go to **Edit \u003E Project Settings \u003E Editor** and make sure that the new project also has the following settings:\n\n - Set **Version Control \u003E Mode** to **Visible Meta Files**\n\n - Set **Asset Serialisation \u003E Mode** to **Force Text**\n\n8) Save your new 4.2.2 project and close Unity 4.2.2\n\n9) Move (or copy) the contents of your Unity 4.3/4.6\u002B project Assets folder into the new Unity 4.2.2 project Assets folder\n\n10) Open your new 4.2.2 project again in Unity 4.2.2\n\n*Unity will now attempt to rebuild your project in 4.2.2 using the meta files you generated in Step 4.*\n\n11) When project has been rebuilt, check that your GameObject hierarchy have all been re-imported properly\n\n*You may need to re-set your KSP PartTools GameData directory, but that should be trivial*\n\n12) Once you\u0027re absolutely certain your downgrade has been successful:\n\n - Uninstall Unity 4.3/4.6\u002B\n\n - Delete your old Unity 4.3/4.6\u002B project folder\n\n - Delete your backups\n\n* * *\n\n**Troubleshooting**\n\nI\u0027m getting a *typeTree.m\\_Children.front ().m\\_Type != SerializeTraits::GetTypeString (NULL)* error in my Unity 4.2.2 console!\n\nThis means you haven\u0027t serialized your assets properly in your original Unity 4.3/4.6\u002B project - see Step 3, 4 and 5.\n\n(More specifically, this error occurs because Unity 4.3/4.6 makes use of metadata that Unity 4.2.2 will not recognize, and the problem is exacerbated if you\u0027re using hidden meta files. By enabling visible meta files and forcing them to be written out to text format, you will allow Unity 4.2.2 to look at the Unity 4.3/4.6\u002B and strip out the bits that it doesn\u0027t need)\n\n* * *\n\n**Disclaimer**\n\nI accept no personal responsibility for any incidental or consequential damages / loss of data resulting from the (mis)use of the aforementioned procedure.\n\n* * *\n\n**Sources**\n\n[http://answers.unity3d.com/questions/317047/lowering-unity-project-version.html](http://answers.unity3d.com/questions/317047/lowering-unity-project-version.html)\n\n[http://answers.unity3d.com/questions/578547/convert-project-back-to-422.html](http://answers.unity3d.com/questions/578547/convert-project-back-to-422.html)"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-05-18T22:47:44Z","Content":"Excellent, thank you so much for posting this!"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-19T10:17:48Z","Content":"Hi sumghai\n\nI\u0027d like to place this under Common Problems and Solutions, but I\u0027d like the reader to understand clearly when this is needed.\n\nFrom a user point of view what problems would be solved by this? in PM You said \u0022locking out of editing emissive animations\u0022. Is that all?\n\n**Edited \u003Ctime datetime=\u00222015-05-19T11:14:48Z\u0022 title=\u002205/19/2015 11:14  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 19, 2015\u003C/time\u003E by Cpt. Kipard**"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-05-19T14:27:06Z","Content":"I can answer this one. I grabbed Unity 4.3 when I first started, having missed the requirement for Unity 4.2.2 for animations etc. I ended up abandoning everything and starting again and re-rigging every part in 4.2.2 when I realised my mistake, because the 4.3 project wasn\u0027t backwards compatible.\n\nI use a separate scene for each part, so using the method Sumghai would have saved me considerable work if I\u0027d known about it.\n\nWe\u0027ve seen a lot of this lately: \u0022I\u0027m using Unity 5 and I\u0027ve got this issue\u0022. We all know what the answer boils down to, so this is a valuable resource to be able to point those people to."},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-19T15:06:49Z","Content":"That doesn\u0027t answer the question though. You\u0027re saying this helps you migrate multiple scenes. I asked what other problems do higher Unity versions cause and more specifically how do they manifest.\n\nLike I said, I need to know what the user will see during their workflow. How else are modders meant to understand that this is the solution to their problems without wasting time waiting for a response in a thread they start."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-19T20:31:29Z","Content":"\u003E \n\u003E From a user point of view what problems would be solved by this? in PM You said \u0022locking out of editing emissive animations\u0022. Is that all?\n\nYeah, the downgrade primarily resolves the issue of not being able to create/edit emissive animations.\n\n\u003E \n\u003E I can answer this one. I grabbed Unity 4.3 when I first started, having missed the requirement for Unity 4.2.2 for animations etc. I ended up abandoning everything and starting again and re-rigging every part in 4.2.2 when I realised my mistake, because the 4.3 project wasn\u0027t backwards compatible.\n\u003E I use a separate scene for each part, so using the method Sumghai would have saved me considerable work if I\u0027d known about it.\n\nI\u0027ve never had to resort to one scene file per part. From 4.2.2 to 4.6\u002B I was always able to put all my parts/internals/props in the same scene file. The only time I would ever have separate scene files is when distinguishing between various projects (e.g. I have separate scene files for FusTek Station Parts, SDHI SMS, SDHI AeroFairings, SDHI Strobe-o-Matic, RealChutes)\n\nAs for animations in 4.3/4.6\u002B, you can still do standard part animations with them (e.g. moving cargo doors). It\u0027s just that 4.3/4.6\u002B no longer allows you to do emissives, unless you use the mecanim-based Animat***or*** component (whereas KSP only supports the legacy Animat***ion*** component)"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-19T20:40:29Z","Content":"Ok done. I also added a big warning under the Unity download link."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-05-19T22:36:47Z","Content":"Amazing. Just the info I needed ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Eskandare","CreatedById":62742,"CreatedDateTime":"2015-05-19T23:04:17Z","Content":"Wow! Thanks Sumghai! This is very useful. When I started I used 4.3.3 and man oh man that as a mistake.\n\nEdit: fortunately my models are not too complex to animate so just reimported them into 4.2.2.\n\nEdit2: Even though U5 is better, I\u0027m going to hate trying to port everything over. At least I already use convex collision meshs.\n\n**Edited \u003Ctime datetime=\u00222015-05-23T02:54:15Z\u0022 title=\u002205/23/2015 02:54  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 23, 2015\u003C/time\u003E by Eskandare**"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2016-06-01T17:51:54Z","Content":"Just wondering if the OP is still applicable for Unity 5.2.4 and KSP...  \n\nAsking because I\u0027m trying to create a window lighting emissive animation, and everything seems to work fine in Unity... Except, when I write the .mu, I get an error that the animation needs to be declared as \u0027legacy\u0027... And the model refuses to load in KSP... If I remove the animation, the model loads perfectly..."},{"CreatedByName":"martinezfg11","CreatedById":59995,"CreatedDateTime":"2016-06-01T22:12:40Z","Content":"I\u0027m assuming your using the methods outlined in this thread? \n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/135428-color-animation-editor/\u0026do=embed\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2016-06-01T23:44:07Z","Content":"Yes, Ive tried using both, and NEITHER methos eems to be working for me... I used the method in nli2work\u0027s thread, and thats the one that gave me the lgacy error... I dont remember if the older method in the OP did or not though... I\u0027m not at my computer, so I cant try again till later"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-06-04T03:55:19Z","Content":"compiled animations aren\u0027t flagged as Legacy, minor oversight in PartTools.\n\nto set the compiled clip to Legacy, select the anim clip, in the very upper right next to the Lock icon, click the 3 lines with downward triangle icon, select Debug, you\u0027ll see more information about the asset, near the top is a check box \u0022Legacy\u0022. tick that, and set inspector back to Normal mode.   \n![KeepProjectSettingsPane.gif](https://docs.unity3d.com/uploads/Main/KeepProjectSettingsPane.gif)"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-01T04:38:12Z","Content":"\u003E \n\u003E \n\u003E On 6/1/2016 at 6:44 PM, Stone Blue said:\n\u003E \n\u003E \n\u003E Yes, Ive tried using both, and NEITHER methos eems to be working for me... I used the method in nli2work\u0027s thread, and thats the one that gave me the lgacy error... I dont remember if the older method in the \u003Cabbr title=\u0022Original Post(er). The first post in a thread, or the person who posted it.\u0022\u003E\u003Cabbr title=\u0022Original Post(er). The first post in a thread, or the person who posted it.\u0022\u003EOP\u003C/abbr\u003E\u003C/abbr\u003E did or not though... I\u0027m not at my computer, so I cant try again till later\n\u003E \n\nI\u0027m a little late getting to this party but did you get it working?\n\nI just created 12 emissives on 1 part with Unity 5.3.5 today so, this method still works.\n\n**Edited \u003Ctime datetime=\u00222016-07-01T04:39:50Z\u0022 title=\u002207/01/2016 04:39  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 1, 2016\u003C/time\u003E by Fengist**"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2016-07-01T13:56:14Z","Content":"[@Fengist](%7B___base_url___%7D/index.php?/profile/78435-fengist/) No... I couldnt get nli2\u0027s method to work... Instead, I click on the model icon in the Assets window, and in the Inspector window, I click \u0022Rig\u0022, then click the drop down for \u0022Animation Type\u0022, and select \u0022Legacy\u0022...  \n\nNo idea if it actually does anything, since I\u0027m having all kinds of trouble with animations now...It DOES get rid of the \u0022animation not set to Legacy\u0022 error in the Console, when writing the model... ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)  \n\nAnd I still have not been able to get heat emissives working... I can get light emissives to work, but not heat ones...  \n\nI\u0027m thinking I may just give up the idea of modding KSP, or at least take a long hiatus... Its not the concepts, or ideas I\u0027m having trouble with... Its Blender and Unity just making no sense at times with how to actually DO the things I KNOW can be done... I guess learning curve is just too high for me... ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022) Add in that there is a lack of documentation from Squad, and 90% of the Blender/Unity tutorials specific to KSP are all outdated, using earlier versions of Part Tools, KSP itself, Blender \u0026 Unity... So trying to follow most of the tutorials is very difficult...\n\n**Edited \u003Ctime datetime=\u00222016-07-01T13:58:30Z\u0022 title=\u002207/01/2016 01:58  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 1, 2016\u003C/time\u003E by Stone Blue**"},{"CreatedByName":"martinezfg11","CreatedById":59995,"CreatedDateTime":"2016-07-01T18:54:10Z","Content":"Man, I\u0027ve been in the same boat you are in many times, often times I\u0027ve had to sit there for hours getting fragmented information together to finally achieve what I wanted. So keep on going on, PM me if you have issues I\u0027ll try to help as best as i can.\n\nNow for your heat emissive issue, have you tried to make your heat emissive animation just a generic animation to see if you can actually see it in-game? If you can see it in-game, then you may not see the heat emissive simply because your configs are not set correctly. What module are you using? FXModuleAnimateThrottle or the heat animation one (ModuleAnimateHeat IRC)?"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-01T20:16:56Z","Content":"Ok, I haven\u0027t worked with heat emissives so I can\u0027t be any help there.  If it were the light emissives. That I\u0027ve figured out.\n\nNow one thing I do differently and I don\u0027t know that this matters... In the inspector, at the top right, there\u0027s a lock icon.  Beside that is an icon with 3 bars and a dropdown arrow.  I click on that 3 bars icon and select debug.  Then I select my animation in Assets and and click on the legacy box back in the inspector.  I doubt it does anything different but then again, this is Unity and it logic goes out the window the minute you start it up.  The other thing I do that works and I\u0027m not sure why, whenever I create an animation in Unity it insists on putting an animatOR on the part.  I delete all of those and drag the animation to the inspector instead. I assume you\u0027re doing the same.\n\nAs for documentation?  Yea. I feel your pain.\n\nAs for Blender, I took one look at that backwards piece of crap when I first wanted to learn modding and it make me never want to mod.  Eventually, I found a t[utorial on here by Beale](https://forum.kerbalspaceprogram.com/index.php?/topic/126101-beginners-part-modding-tutorial/) on Wings 3D and couldn\u0027t be happier. It\u0027s not all glitzy and doesn\u0027t do a lot of the things others do, but to make quick, easy, simple models... well, the Maritime Pack is made with it.\n\nI dunno if this\u0027ll make life any easier but, here\u0027s a small program I wrote that takes the Unity text .anim files and does the conversion noted in the \u003Cabbr title=\u0022Original Post(er). The first post in a thread, or the person who posted it.\u0022\u003EOP\u003C/abbr\u003E. If you\u0027re doing a bunch like I did in the screenshot, it saves a bit of time.\n\n![screenshot.jpg](http://www.datainterlock.com/Kerbaltopia/Animfixer/screenshot.jpg)\n\n**[Download](http://www.datainterlock.com/Kerbaltopia/Animfixer/KSPAnimFixer.zip)**"}]}