{"TopicId":84208,"ForumId":15,"TopicTitle":"Simple Landing Gear Problem","CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T15:50:29Z","PageNum":1,"Articles":[{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T15:50:29Z","Content":"\n\u003Cp\u003EOkay, I feel like this is going to be one of those questions where I\u0027ve done something really dumb... but I can\u0027t get my landing gear to work so I\u0027m asking for help. I\u0027ll attach a Unity Screenshot and the .cfg file code I\u0027ve tried. I\u0027ve attempted using both the stock landing gear module and the firespitter fswheel module, and neither makes the wheel collide with the ground. If I take all of the modules out of the part then the wheel collides perfectly... but of course it doesn\u0027t roll, because it\u0027s not a wheel, so turning on the engines makes the landing gear explode from friction.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE{\u003Cbr\u003E    name = ModuleLandingGear\u003Cbr\u003E}\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = ModuleSteering\u003Cbr\u003E    controlAxisType = Forward\u003Cbr\u003E    steeringAxis = 0, 0, 1\u003Cbr\u003E    steeringTransformName = suspensionParent\u003Cbr\u003E    steeringLocked = true\u003Cbr\u003E    steeringCurve\u003Cbr\u003E     {\u003Cbr\u003E        key = 0 16\u003Cbr\u003E     key = 10 9\u003Cbr\u003E       key = 30 2\u003Cbr\u003E     key = 100 1\u003Cbr\u003E     }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = FXModuleConstrainPosition\u003Cbr\u003E    matchRotation = true\u003Cbr\u003E    matchPosition = false\u003Cbr\u003E    CONSTRAINFX\u003Cbr\u003E    {\u003Cbr\u003E        targetName = suspensionParent\u003Cbr\u003E        moversName = wheelCollider\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(I\u0027ve tried both with and without the constrainposition module and the steering module - all have the same result - wheel goes through ground and ship belly slides down the runway.)\u003C/p\u003E\u003Cp\u003EAnd the same result with :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE{\u003Cbr\u003E    name = FSwheel\u003Cbr\u003E    wheelColliderName = wheelCollider\u003Cbr\u003E    boundsCollider = Bounds\u003Cbr\u003E    wheelMeshName = Wheel\u003Cbr\u003E    suspensionParentName = suspensionParent\u003Cbr\u003E    rotationAdjustment = 2.0 // adjust the visual rotation speed of the wheel meshes if they are off\u003Cbr\u003E    numberOfWheels = 1\u003Cbr\u003E    //animationName = Retract\u003Cbr\u003E    disableColliderWhenRetracted = False\u003Cbr\u003E    hasMotor = False\u003Cbr\u003E    motorEnabled = False // set to false for landing gears to start unpowered.\u003Cbr\u003E    motorTorque = 2\u003Cbr\u003E    maxSpeed = 30 // the motorTorque is 1 at 0 speed, and 0 at this speed, meaning the actual max speed is probably way lower.\u003Cbr\u003E\u003Cbr\u003E    overrideModelFrictionValues = True    \u003Cbr\u003E\u003Cbr\u003E    forwardsExtremumSlip = 0.01\u003Cbr\u003E    forwardsExtremumValue = 1.0\u003Cbr\u003E    forwardsAsymptoteSlip = 0.04\u003Cbr\u003E    forwardsAsymptoteValue = 0.6\u003Cbr\u003E    forwardsStiffness = 6000\u003Cbr\u003E\u003Cbr\u003E    sidewaysExtremumSlip = 0.01\u003Cbr\u003E    sidewaysExtremumValue = 1.0\u003Cbr\u003E    sidewaysAsymptoteSlip = 0.04\u003Cbr\u003E    sidewaysAsymptoteValue = 0.6\u003Cbr\u003E    sidewaysStiffness = 500\u003Cbr\u003E\u003Cbr\u003E    resourceConsumptionRate = 0.2\u003Cbr\u003E    resourceName = ElectricCharge\u003Cbr\u003E    //motorStartsReversed = True\u003Cbr\u003E    brakeTorque = 15\u003Cbr\u003E    brakeSpeed = 0.5\u003Cbr\u003E    animationLayer = 1\u003Cbr\u003E    deployedDrag = 0.2\u003Cbr\u003E    retractedDrag = 0.0\u003Cbr\u003E    guiActiveUnfocused = True\u003Cbr\u003E    unfocusedRange = 5.0\u003Cbr\u003E    brakeEmissiveObjectName = brakeLight\u003Cbr\u003E    onEmissiveColor = 1, 0.3, 0\u003Cbr\u003E    offEmissiveColor = 0, 1, 0\u003Cbr\u003E    deployingEmissiveColor = 1, 0, 0\u003Cbr\u003E    disabledEmissiveColor = 0, 0, 0\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = FSwheelAlignment\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn Unity the file is setup with - the top level is a game object named nosegear with parttools added,\u003C/p\u003E\u003Cp\u003EBounds is a game object with box collider that exceeds the bounds of the wheel by a bit...\u003C/p\u003E\u003Cp\u003EsuspensionParent is an empty game object located at the same center as the Wheel and the wheelCollider\u003C/p\u003E\u003Cp\u003EwheelCollider is a game object with a wheelCollider that exceeds the edges of the wheel object by a little bit.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/f0LHOWW.png\u0022 alt=\u0022f0LHOWW.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-09T16:22:49Z","Content":"\n\u003Cp\u003EIt looks like your wheelCollider is not pointing towards the ground (away from the gear bay)\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T18:31:22Z","Content":"\n\u003Cp\u003EI\u0027m not sure I understand... the wheelcollider is round so I thought it needed to be oriented with the wheel, so it would be perpendicular to the ground? I\u0027m going off of what I see in the picture of the stock landing gear in Unity : \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/i1aPm.png\u0022 alt=\u0022i1aPm.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAfter your post I tried spinning it to point the blue axis down... And I DID try spinning it so it lay parallel to the ground, perpendicular to the wheel. Neither of these changed the behavior at all. It still sinks right through the gear to rest on its belly. Does the \u0022Bounds\u0022 box need a certain orientation?\u003C/p\u003E\u003Cp\u003EDoes the overall model orientation matter in Unity for landing gear? With the model oriented this way it comes into KSP correctly - that is wheel pointed down - so I assumed it\u0027s correct... but it could be totally wrong? \u003C/p\u003E\u003Cp\u003EI also should add that the screen shot of my gear is showing the gear in the down position. I haven\u0027t added any animation to the model yet, because I wanted to get the pieces working in the right hierarchy first. So the gear is essentially fixed at the moment.\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T18:53:06Z","Content":"\n\u003Cp\u003EI did try rotating the whole system to point down in unity (alligning it the same way as the image of the stock gear.) It didn\u0027t change anything except the fact that now when I load it in game I have to rotate it 90 degrees one way and 180 degrees another to get it into the right orientation for the model.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T18:53:25Z","Content":"\n\u003Cp\u003Ejust rotate the wheelcollider; everything else you have look alright. make sure suspensionParent is positioned at the center of the wheelcollider.\u003C/p\u003E\u003Cp\u003Ethe ring should be aligned to direction of travel, in your case, Z axis. Direction doesn\u0027t matter.\u003C/p\u003E\u003Cp\u003Ethe green line from center of the wheelcollider should point at the ground, in your case \u002BZ direction. This is relative to how the gear is mounted, so the green line should always point away from the gear bay.\u003C/p\u003E\u003Cp\u003Ethe orientation of the whole system doesn\u0027t matter much since it will be surface attached. all you need to set is the attach direction in config.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-09T18:56:00Z\u0022 title=\u002209/09/2014 06:56  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 9, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T19:16:11Z","Content":"\n\u003Cp\u003EI rotated the wheelCollider so the disk is aligned with the direction of travel (like a wheel) and the green axis is pointed at the ground. It still falls right through to the ground.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T19:29:15Z","Content":"\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/72802-Main-and-Nose-Landing-Gear-Rigging-Animating?p=1402188\u0026amp;viewfull=1#post1402188\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/72802-Main-and-Nose-Landing-Gear-Rigging-Animating?p=1402188\u0026amp;viewfull=1#post1402188\u003C/a\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T19:44:53Z","Content":"\n\u003Cp\u003EOkay... I set the wheelCollider to layer 27 and renamed it WheelColliders... still falls through the ground. \u003C/p\u003E\u003Cp\u003EAs I\u0027ve read all of your posts about it... I\u0027m starting to think I\u0027m seeing something different on my wheel collider than you are. If I\u0027m understanding it... you\u0027re seeing a green \u0027ray\u0027 that indicates the ground direction and with a length that in someway relates to the suspension distance?... I\u0027m only seeing the normal green, blue, and red axis markers. It\u0027s this green arrow that I rotated towards down. Am I looking at it wrong?\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T19:58:11Z","Content":"\n\u003Cp\u003ENew Clue. I just checked the logs... and while the model is loaded I get a whole mess of the error:\u003C/p\u003E\u003Cp\u003ENullReferenceException: Object reference not set to an instance of an object\u003C/p\u003E\u003Cp\u003EI\u0027m betting that\u0027s related. Hmmmmm.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T19:59:05Z","Content":"\n\u003Cp\u003EDepends on what\u0027s throwing NRE. may or may not be related.\u003C/p\u003E\u003Cp\u003EYou also want separate transforms for steering and suspension. two modules trying control the same transform will do strange stuff, or not work at all.\u003C/p\u003E\u003Cp\u003Eyeah you want the greey ray pointed at the ground, not the green component of pivot marker. the green ray indicates suspension direction, and suspension travel distance. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Uce0rLj.jpg\u0022 alt=\u0022Uce0rLj.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-09T20:09:05Z","Content":"\n\u003Cp\u003EThat helps a lot with understanding suspension... and I found the green ray and now have it pointed at the ground. Nothing I\u0027ve tried has changed the sinking issue. Any thoughts on whether to use the stock module or the FS version?\u003C/p\u003E\u003Cp\u003EEDIT! I switched to the FS module again from the stock one... and it\u0027s now working with the collider oriented correctly. I\u0027m going to fiddle around a little to see if I\u0027ve really got it... or if I\u0027ve still got a hangup somewhere. If it works I\u0027ll post a step by step to try to help future browsers...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-09T20:18:11Z\u0022 title=\u002209/09/2014 08:18  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 9, 2014\u003C/time\u003E by artwhaley\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T21:17:16Z","Content":"\n\u003Cp\u003Eyour stock LandingGear module settings are incomplete.\u003C/p\u003E\n"}]}