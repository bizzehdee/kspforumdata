{"TopicId":75938,"ForumId":36,"TopicTitle":"[1.0.x] [V1.9f] Kerbal Foundries wheels, anti-grav repulsors and tracks","CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-06-25T17:24:04Z","PageNum":165,"Articles":[{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-16T14:03:22Z","Content":"\n\u003Cp\u003E\nI might start testing the new wheel collider as a repulsor, see how it goes. They\u00A0don\u0027t\u00A0need grip, torque or anything like that, so probably an ideal part to start using them on.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222583600\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463344556\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHad some unforseen ...\u0027obligations\u0027... pop up that took up a bit of my time this weekend, but I\u0027ve synced up my repo and have started looking into what you\u0027ve done so far.\u00A0 Should hopefully have an understanding of all that later today and be able to start working on the rest of the missing bits.\u00A0 Might have something to show for it sometime tomorrow \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u00A0\u00A0 (have tomorrow off from work and should be able to devote a fair chunk of time to wheel dev work)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nRL takes precedence \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-16T17:26:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222584697\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463407402\u0022 data-ipsquote-userid=\u0022111099\u0022 data-ipsquote-username=\u0022lo-fi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, lo-fi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI might start testing the new wheel collider as a repulsor, see how it goes. They\u00A0don\u0027t\u00A0need grip, torque or anything like that, so probably an ideal part to start using them on.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRL takes precedence \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTried using the script that you had in the repo, but I could not get it to do any suspension forces; the \u0027wheels\u0027 would act like they wanted to suspend something, and then fall off entirely.\u00A0 Likely is a hierarchy setup error on my end.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, I did a bit more work on the force-based setup that I had; have the spring damper working well enough, and the friction model is no longer doing strange things \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 Turns out it was a silly mistake of allowing negative spring-force values, which was causing some...bad... things to happen when that down-force was used to calculate the lateral friction.\u00A0 Smooth as butter now, no longer getting flung off into space or having wierd torques on jumps, and it is overall responding as I would expect (given the simplistic friction model).\n\u003C/p\u003E\n\u003Cp\u003E\nStill need to implement a custom constraints solver and the sticky friction setup, as well as solve the punch-through issue (which should be solvable through some simple colliders in the model, or even with the constraint system).\u00A0 But.... progress \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/Gbgl7iZEVKc?feature=oembed\u0022 width=\u0022459\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPlaying around with it a bit they exhibits excellent dynamics regarding the forces at play on the vehicle.\u00A0 Crank the friction way up and roll-overs become possible, but they are very predictable and not spazzy like the old KSP wheels were... you know these are coming, and you can watch the vehicle suspension to tell you when it is near (from the body-roll and/or inside tires leaving the ground \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E ).\u00A0 With a better (more curve-based) friction model I think this system could really shine.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Sorry for the low-rez video, didn\u0027t realize it would come out so... terrible (and was still ~500mb...)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-16T17:29:43Z\u0022 title=\u002205/16/2016 05:29  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 16, 2016\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ComatoseJedi","CreatedById":91567,"CreatedDateTime":"2016-05-16T18:16:01Z","Content":"\n\u003Cp\u003E\nProgess is progress. Even if it was a low rez video \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022138730\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/\u0022 rel=\u0022\u0022\u003E@Shadowmage\u003C/a\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2016-05-16T20:23:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222585036\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463419581\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0the \u0027wheels\u0027 would act like they wanted to suspend something, and then fall off entirely.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s reminiscent of a car I had while a uni student, so seems perfectly realistic to me.\u00A0 :-)\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-16T22:46:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222585036\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463419581\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTried using the script that you had in the repo, but I could not get it to do any suspension forces; the \u0027wheels\u0027 would act like they wanted to suspend something, and then fall off entirely.\u00A0 Likely is a hierarchy setup error on my end.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I know what happened there - it\u0027s a quirk of how my test rig is set up, and how my script doesn\u0027t handle many eventualities. Call it a difference of construction on your part, and an error on mine!\n\u003C/p\u003E\n\u003Cp\u003E\nLovely work your end,\u00A0it\u0027s looking great!\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-17T16:07:39Z","Content":"\n\u003Cp\u003E\nGoing to start playing around with the sticky friction/constraints setup over the next few days; hoping to have something that might be usable by this weekend.\u00A0 Initially would likely be a super basic \u0027get it working\u0027 implementation, but gotta start somewhere.\n\u003C/p\u003E\n\u003Cp\u003E\nMy current thoughts on those lines are to basically keep track of the current local velocity of the wheel and if has been below X m/s for at least X updates, flag it for \u0027sticky=true\u0027 for that direction (side or forward).\u00A0 When sticky friction is enabled it would take note of the axis-local positioning for that wheel and attempt to keep that wheel positioned within that plane.\u00A0 Currently I\u0027m trying to think through how to handle the front/steering wheels with sticky friction; even when \u0027sticky\u0027 is enabled they still need to be able to impart some torque on the vehicle in order to facilitate the actual turning; -something- will be sliding as long as the vehicle is in motion.\n\u003C/p\u003E\n\u003Cp\u003E\nHonestly with what I got working yesterday it is nearly ready to be setup for use in-game.\u00A0 The only blatantly missing feature is the sticky friction; something to stop it from sliding on hills when sideways/brakes are engaged.\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2016-05-17T20:55:39Z","Content":"\n\u003Cp\u003E\nI saw that he mentioned in-game, sounds promising,\u00A0 I know how delicate this procedure is so not got any expectations although I do have a folder with around 20 broken sets of wheels awaiting the arrival of correctly named transforms and colliders.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 I also have a small queue of people wanting my wackier off road suspensions working again, thanks to whatever madness overtook the stock wheels it\u0027s no longer possible to combine two wheel units on the same axle, or more annoyingly you can, it wont even throw an error, it will just show one wheel permanently blocked.\u00A0 So if all your magic includes that I\u0027ll be a happy bunny, i\u0027m guessing it does as (\u003Cspan style=\u0022font-size:10px;\u0022\u003Econventionally modeled\u003C/span\u003E ) tracks would be a bit tricky without it. Keep up the good work, we can\u0027t rove without you \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-17T21:57:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222587526\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463518539\u0022 data-ipsquote-userid=\u002250907\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, SpannerMonkey(smce) said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI saw that he mentioned in-game, sounds promising,\u00A0 I know how delicate this procedure is so not got any expectations although I do have a folder with around 20 broken sets of wheels awaiting the arrival of correctly named transforms and colliders.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 I also have a small queue of people wanting my wackier off road suspensions working again, thanks to whatever madness overtook the stock wheels it\u0027s no longer possible to combine two wheel units on the same axle, or more annoyingly you can, it wont even throw an error, it will just show one wheel permanently blocked.\u00A0 So if all your magic includes that I\u0027ll be a happy bunny, i\u0027m guessing it does as (\u003Cspan style=\u0022font-size:10px;\u0022\u003Econventionally modeled\u003C/span\u003E ) tracks would be a bit tricky without it. Keep up the good work, we can\u0027t rove without you \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRight now I\u0027m concentrating on the base \u0027component\u0027 -- this is the bit of code that replaces the old U4 WheelCollider component.\u00A0 It will be done as generically (and stand-alone) as possible so that it may be re-used for any number of situations.\u00A0 So it won\u0027t be subject to any of the stock wheel whackiness; no limit to the number of wheels on a model, part, or vessel.\u00A0 No limitations to orientation compared to rigidbody (it will use whatever orientation the \u0027wheel collider\u0027 transform is oriented at; -including- animation handling).\u00A0 Am also aiming to keep it as close as possible to using the same interfaces as the old\u00A0 U4 wheel component; the same options/parameters should be available.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever they will likely require a custom PartModule to \u0027drive\u0027 them -- to position the suspension transforms where they need to be, update visuals for the wheel/steering rotations, and supply input values.\u00A0 This is the bit that may need to be provided by mods\u0027 on their own; there is just no way for me to write a single module that could accommodate all other mods\u0027 potential model hierarchy and preferred methods for model setup; nor do I wish to impose any limitations on the use of the components.\u00A0 For instance lo-fi would use his existing PartModule code (slightly adapted to the new wheel component), and I would use my mods\u0027 existing PartModule code (or new stuff that I cook up just for the purpose).\n\u003C/p\u003E\n\u003Cp\u003E\nIn the end the component -should- be compatible with all of the KSP 1.0.x various wheel-modules, with some adapatation to use the new component.\u00A0 For example the old FireSpitter wheel and leg modules -should- be usable with the new component with some minor code-changes.\u00A0 I -might- include a generic PartModule whose aim would be to be compatible (model setup wise) with the stock model setups, so as to enable a patchable replacement for the stock mess.\n\u003C/p\u003E\n\u003Cp\u003E\nReally won\u0027t know too much more until I start digging into it a bit more.\u00A0 Should have an update in a few days/later this week \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-18T01:55:13Z\u0022 title=\u002205/18/2016 01:55  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 18, 2016\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-18T10:28:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222587630\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463522237\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHowever they will likely require a custom PartModule to \u0027drive\u0027 them -- to position the suspension transforms where they need to be, update visuals for the wheel/steering rotations, and supply input values.\u00A0 This is the bit that may need to be provided by mods\u0027 on their own; there is just no way for me to write a single module that could accommodate all other mods\u0027 potential model hierarchy and preferred methods for model setup; nor do I wish to impose any limitations on the use of the components.\u00A0 For instance lo-fi would use his existing PartModule code (slightly adapted to the new wheel component), and I would use my mods\u0027 existing PartModule code (or new stuff that I cook up just for the purpose).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep, that\u0027s where the KF plugin comes in. Great work!\n\u003C/p\u003E\n"},{"CreatedByName":"Madeiner","CreatedById":95585,"CreatedDateTime":"2016-05-18T11:43:22Z","Content":"\n\u003Cp\u003E\nSo uhm, i understand this has no 1.1.2 compatibility for wheels.\n\u003C/p\u003E\n\u003Cp\u003E\nHow about repulsors? Can i just use those in 1.1.2 for now, or will they break anything?\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-18T11:53:01Z","Content":"\n\u003Cp\u003E\nI\u0027m afraid everything was based around wheel colliders, which are what\u0027s been causing so many problems, so everything is broken in 1.1.X until further notice. We are working on a solution.\n\u003C/p\u003E\n"},{"CreatedByName":"Gnoyze","CreatedById":148078,"CreatedDateTime":"2016-05-19T01:48:51Z","Content":"\n\u003Cp\u003E\nWill you guys be supporting 64x in unity 5 now? or still gonna hold off on that?\n\u003C/p\u003E\n"},{"CreatedByName":"0111narwhalz","CreatedById":110660,"CreatedDateTime":"2016-05-19T02:25:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222589904\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463622531\u0022 data-ipsquote-userid=\u0022148078\u0022 data-ipsquote-username=\u0022Gnoyze\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n35 minutes ago, Gnoyze said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWill you guys be supporting 64x in unity 5 now? or still gonna hold off on that?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI imagine that comes with supporting 1.1.x, though I have little to no idea.\u003Cbr\u003E\nNote: KF still doesn\u0027t support 1.1. Yet.\n\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2016-05-19T05:54:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222589941\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463624722\u0022 data-ipsquote-userid=\u0022110660\u0022 data-ipsquote-username=\u00220111narwhalz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, 0111narwhalz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI imagine that comes with supporting 1.1.x, though I have little to no idea.\u003Cbr\u003E\nNote: KF still doesn\u0027t support 1.1. Yet.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMods will automatically support both 32bit and 64bit\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-19T12:19:37Z","Content":"\n\u003Cp\u003E\nThere were a lot of people who used KF fine in previous versions of KSP 64, so I see no reason why there should be an issue going forwards. I used to offer no support for X64 because squad didn\u0027t (and it was flaky at best), but made no effort to stop people using it.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMy own experience suggests that 1.1.X is about as stable as a 6\u0027 jello tower, whether 64 or 32, so mileage may vary.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T15:56:06Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/111099-lo-fi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111099\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111099-lo-fi/\u0022 rel=\u0022\u0022\u003E@lo-fi\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nGot to play around with trying to enable sticky friction a bit yesterday.\u00A0 It looks like your setup using kinematic rigidbodies \u002B specially configured joints may be the answer there as well.\u00A0 Basically would be using these to cheat in some constraints.\u00A0 One bit I haven\u0027t quite figured out is how to align the joints to the wheel rather than the part/base rigidbody... but that\u0027s likely just some trig/vector math to set it up properly.\n\u003C/p\u003E\n\u003Cp\u003E\nThe limited testing I did seemed to work...decently.\u00A0 Need to find a way to allow the joint to break when it is intended to switch to dynamic friction, and need to find a way to allow the wheels to steer while sticky friction is enabled.\u00A0 Joint breaking is likely just a joint configuration, and the steering torque... well.. I could merely convert the sideways-friction from steering into a torque on the rigidbody when side-sticky is enabled.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m just hoping that all of the joint manipulation isn\u0027t too performance intensive.\u00A0 The current raycast and friction code is fairly good performance wise, likely faster than the mess of modules and code that runs the stock wheels, and would like to keep it as... lightweight... as possible.\u00A0 Some things have to be handled though, and joints might just be the best way to cheat around the sticky friction problems (other than implementing a custom constraint solver.... may still come down to that...).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOne other bit that I\u0027m struggling with for the low-level component is how to allow it to be used in the editor / imported through KSP .mu model files.\u00A0 The struggle is that it cannot;\u00A0 part-tools only supports a specific hand-coded list of unity components; anything not on the list is ignored when compiling the model.\u00A0 So as far as use in KSP is concerned the wheel-collider component is always going to need a PartModule to instantiate the components and assign them to game-objects/assign rigidbodies; there is no way around it that I can see.\u00A0 The closest that could be done would be to have yet-more-special code in the PartModule that searched for the standard Unity WheelCollider, removed them and replaced that with the custom components (which is what the stock-replacement-module will do, but would rather just rely on transform-names for my mods\u0027 setup; I really hate dealing with stuff in the Unity editor if it can be avoided).\n\u003C/p\u003E\n\u003Cp\u003E\nAny thoughts on the best way to handle that issue?\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-19T22:04:49Z","Content":"\n\u003Cp\u003E\nA few - think I can help with most of that. I\u0027ll get back to you when I\u0027ve got a few minutes for a full reply \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2016-05-19T23:08:42Z","Content":"\n\u003Cp\u003E\nI\u0027m back from Leipzig and am following this with bated breath, since I\u0027m no use at this stage.\n\u003C/p\u003E\n\u003Cp\u003E\n(To whoever asked about CKAN support earlier, however; since I am the one person involved who likes CKAN, I will do my meagre best to ensure everything works correctly.)\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-20T21:15:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222591452\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463695489\u0022 data-ipsquote-userid=\u0022111099\u0022 data-ipsquote-username=\u0022lo-fi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn Thursday, May 19, 2016 at 4:04 PM, lo-fi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA few - think I can help with most of that. I\u0027ll get back to you when I\u0027ve got a few minutes for a full reply \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, whenever you have time is fine with me; my expected time-frame for getting this working is weeks-to-months; I\u0027m not in any real rush.\u00A0 Would rather take my (our) time and do things properly the first time around \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOn that note I\u0027ve started laying out the basis for the \u0027stock replacement\u0027 wheel module.\u00A0 Will (hopefully) be doing some compiling and in-game tests of the existing stuff over the weekend.\u00A0 The wheel collider component is nowhere near finished, or even ready for general use, but I would like to make sure the existing functionality actually works in KSP before building on it too much more (sucks to find out it doesn\u0027t work when you are 95% done...would rather find out what works/doesn\u0027t while at the 20% stage).\u00A0 This will also let me become more familiar with the current stock wheel/gear/leg model hierarchy and get all of the mesh-positioning stuff figured out.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\n\u003C/p\u003E\n\u003Cp\u003E\nWell, that was mostly painless:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022KGVQgeE.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/KGVQgeE.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nObviously there are things still to be fixed, but in that image the pod is being suspended properly by the wheels, without any whackiness, twitching, launching into orbit, or any of the other \u0027bad stuff\u0027 that happens with the U5 wheel colliders.\n\u003C/p\u003E\n\u003Cp\u003E\nProgress!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-20T23:48:04Z\u0022 title=\u002205/20/2016 11:48  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 20, 2016\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-21T18:43:56Z","Content":"\n\u003Cp\u003E\nInitial tests on using configurable joints for sticky friction are giving some promising results.\u00A0 Need to do a bit more tweaking on them, cleaning up the validation on when they should be applied, but they don\u0027t seem to cause any strange behavior so far.\n\u003C/p\u003E\n\u003Cp\u003E\nSo... yeah... more progress \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve updated the repo with the latest in case anyone else is following the development and wanted to give things a try.\u00A0 The included Unity project should be setup to just click \u0027play\u0027.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-21T22:27:40Z","Content":"\n\u003Cp\u003E\nI\u0027ve had no time to do much this week. Great progress, glad my work on the joints wasn\u0027t a total waste of time!\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-24T20:37:14Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/111099-lo-fi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111099\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111099-lo-fi/\u0022 rel=\u0022\u0022\u003E@lo-fi\u003C/a\u003E No worries, whenever you have time \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nLast night I did a bit more playing around with the integration into KSP;\u00A0 there are going to be some problems with the stock wheels due to them no longer using the WheelCollidersIgnore layer (all colliders in the model that I\u0027m testing with are set to layer 0).\u00A0 So I might need to add a list of colliders to force-set the layers on.\u00A0 Alternatively I\u0027m highly considering finding a method to just ignore any collider that is on the same vessel as the wheel (no same-vessel collisions sounds... proper).\u00A0 I\u0027m just not sure of an optimal/efficient way to implement this (seems like per-tick iteration of every collider in the vessel would drag performance down).\n\u003C/p\u003E\n\u003Cp\u003E\nBut.... its still looking good.\u00A0 Went into this knowing that there would be some hacks that needed to be done to work around some of the stock setup, so its not a huge surprise or anything.\u00A0 Disappointing, sure.. but not surprising.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSpent a bit of time today integrating a sideways friction curve (rather than a constant), and tuning the sticky-friction detection and implementation routines.\u00A0 So far so good on those.\u00A0 I\u0027ve implemented the friction curve as a mass-adjusted curve; e.g. you would normally specify your extremum and asymptote values dependent upon the mass the wheel is supporting; that kind of setup is a simple no-go for KSP as the mass will vary between vessels.\u00A0 Instead the curve takes input as the slip ratio, and outputs a value that acts as a multiplier to the current downforce; so you can still have extra-sticky wheels, while avoiding the spazzy behavior from a mass-dependent curve used incorrectly.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter that came a bit of toying around with forward friction / wheel inertia / motor input torque.\u00A0 This is so that drive wheels can slip and spin out from motor torque and that the traction effects from those will work properly.\u00A0 Traction control could be implemented at the PartModule level to decrease input torque when excess slippage is detected.\u00A0 Its... working... at the moment, but not very clean; I don\u0027t think I\u0027ve implemented it quite properly in this first pass... but that\u0027s what first passes are for \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u00A0 It is still constant based at the moment, will also be adapting this to use a friction curve (which may be different than the sideways friction curve!).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo, more progress.\u00A0 One bit at a time, but its all slowly starting to come together.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-24T20:50:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222599438\u0022 data-ipsquote-contentid=\u002275938\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464122234\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLast night I did a bit more playing around with the integration into KSP;\u00A0 there are going to be some problems with the stock wheels due to them no longer using the WheelCollidersIgnore layer (all colliders in the model that I\u0027m testing with are set to layer 0).\u00A0 So I might need to add a list of colliders to force-set the layers on.\u00A0 Alternatively I\u0027m highly considering finding a method to just ignore any collider that is on the same vessel as the wheel (no same-vessel collisions sounds... proper).\u00A0 I\u0027m just not sure of an optimal/efficient way to implement this (seems like per-tick iteration of every collider in the vessel would drag performance down).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSurely just cast a ray or two at the start of flight, see what it hits, force all those colliders to WheelCollidersIgnore layer if they\u0027re in the same part? Agreed - checking every frame seems like a bad idea.\n\u003C/p\u003E\n\u003Cp\u003E\nAll sounds good!\n\u003C/p\u003E\n"},{"CreatedByName":"AdmiralTigerclaw","CreatedById":92104,"CreatedDateTime":"2016-05-25T04:33:37Z","Content":"\n\u003Cp\u003E\nHey, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/111099-lo-fi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111099\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111099-lo-fi/\u0022 rel=\u0022\u0022\u003E@lo-fi\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDoes the turbine generator work without needing any code changes?\n\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2016-05-25T08:27:37Z","Content":"\n\u003Cp\u003E\nI actually have no idea! I suspect probably yes, but it\u0027ll need investigating.\n\u003C/p\u003E\n"}]}