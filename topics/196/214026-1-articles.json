{"TopicId":214026,"ForumId":196,"TopicTitle":"Cannot launch or save due to custom anchor vessel after staging - repro \u002B logs","CreatedByName":"PrivateOrange","CreatedById":227047,"CreatedDateTime":"2023-03-01T06:48:58Z","PageNum":1,"Articles":[{"CreatedByName":"PrivateOrange","CreatedById":227047,"CreatedDateTime":"2023-03-01T06:48:58Z","Content":"\n\u003Cp\u003E\nKSP Version:\u00A0\u00A00.1.0.0.20892\u003Cbr\u003E\nOS: Windows 11 \u00A0(10.0.22621) 64bit\u003Cbr\u003E\nCPU: 11th Gen Intel(R) Core(TM) i5-11600K @ 3.90GHz (12)\u003Cbr\u003E\nRAM: 32533\u003Cbr\u003E\nGPU: NVIDIA GeForce RTX 3080 (12107MB)\n\u003C/p\u003E\n\u003Cp\u003E\nExpected Behavior: Staging does not lead to corrupted vessel and launching vessels and saving continues to work\n\u003C/p\u003E\n\u003Cp\u003E\nObserved Behavior: Vessel enters a corrupted state, launching doesn\u0027t work and campaign can no longer be saved after reloading game\n\u003C/p\u003E\n\u003Cp\u003E\nSteps to Replicate:\n\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\nCreate a vessel where the anchor part is not in the last stage\n\u003C/li\u003E\n\u003Cli\u003E\nLaunch vessel above the atmosphere of Kerbin\n\u003C/li\u003E\n\u003Cli\u003E\nStage until the last stage of the vessel\n\u003Cul\u003E\n\u003Cli\u003E\nThis causes a \u0022Index was out of range.\u0022 exception in KSP.Sim.impl.StagingComponent.ProcessPendingPartRemovals()\n\u003C/li\u003E\n\u003Cli\u003E\nAdditionally\u00A0\u0022Launch location Invalid not registered!\u0022 begins\u00A0printing in the logs repeatedly\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nContinue and reach orbit with the remaining vessel\n\u003Cul\u003E\n\u003Cli\u003E\nNote some remaining parts will have broken orbit\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nReturn to \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E (do not revert)\n\u003C/li\u003E\n\u003Cli\u003E\nLaunch a new vessel\n\u003C/li\u003E\n\u003Cli\u003E\nSave and exit game\n\u003C/li\u003E\n\u003Cli\u003E\nLaunch game again\n\u003C/li\u003E\n\u003Cli\u003E\nReturn to \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E and attempt to launch a new vessel\n\u003C/li\u003E\n\u003Cli\u003E\nLaunching no longer works and saving no longer works\n\u003Cul\u003E\n\u003Cli\u003E\nA NullReferenceException occurs in KSP.Sim.impl.VesselComponent.GetState() as part of KSP.Game.Serialization.SerializationUtility.VesselToSerializable\n\u003C/li\u003E\n\u003Cli\u003E\nAdditional attempts to save only cause SaveLoadManager IsBusy\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\nA list of ALL mods: None\n\u003C/p\u003E\n\u003Cp\u003E\nOther Notes / Screenshots / Log Files (if possible..):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022k4nrWKg.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022128.67\u0022 height=\u0022584\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/k4nrWKg.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022zzHSl41.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022122.67\u0022 height=\u0022550\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/zzHSl41.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nRepro video recording:\n\u003C/p\u003E\n\u003Cp\u003E\nPart 1:\u00A0\u003Ca href=\u0022https://imgur.com/a/HC7x0Jh\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/a/HC7x0Jh\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPart 2:\u00A0\u003Ca href=\u0022https://imgur.com/a/PAeiXic\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/a/PAeiXic\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWorkspace:\u00A0\u003Ca href=\u0022https://pastebin.com/YxpTuwvk\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://pastebin.com/YxpTuwvk\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MechBFP","CreatedById":184845,"CreatedDateTime":"2023-03-01T19:31:47Z","Content":"\n\u003Cp\u003E\nTo summarize, make sure you don\u0027t ever stage the root part if you don\u0027t want the game to break. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Mahhew","CreatedById":223465,"CreatedDateTime":"2023-03-04T19:27:33Z","Content":"\n\u003Cp\u003E\nI\u0027ll most definitely take this into account in the future. At least a few of my saves have been broken by this bug.\n\u003C/p\u003E\n"}]}