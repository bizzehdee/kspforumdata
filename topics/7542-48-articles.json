{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":48,"Articles":[{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-24T01:03:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alex P\u0022 data-cite=\u0022Alex P\u0022\u003E\u003Cdiv\u003EHow can I put variables in the partmodule in the .cfg file and then read them in the plugin partmodule?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf all you need is simple types, like string, or float, then you can just make them KSPFields. If you need to go more indepth, you need to use custom classes that implement IConfigNode. You can see my adventures learning this here:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/86815-Unable-to-read-part-cfg-data-when-part-is-added-to-vessel\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/86815-Unable-to-read-part-cfg-data-when-part-is-added-to-vessel\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-24T01:09:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agathorn\u0022 data-cite=\u0022Agathorn\u0022\u003E\u003Cdiv\u003EHow would I go about getting the mission elapsed time (MET) in a PartModule\u0027s OnUpdate?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELooks like the answer is \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003E\u003Cstrong\u003EFlightLogger.met\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-24T02:39:40Z","Content":"\n\u003Cp\u003EString or float, yes. Double, no. KSPField is *weird*\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-24T02:47:17Z","Content":"\n\u003Cp\u003EYou will want to look at this post from Mu about the introduction of PartModule, ConfigNode, KSPField, etc.. basically all the things you want to do. That said be aware that the developers examples \u003Cstrong\u003Edo not work!\u003C/strong\u003E LOL I know it sucks but its still good reference for 90% of it then you have to fight the rest of the way. But between this post and the one I linked earlier, all the information should be there.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Malkanor","CreatedById":116544,"CreatedDateTime":"2014-07-24T03:40:15Z","Content":"\n\u003Cp\u003ENo clue if this is the correct place to post about this, but...\u003C/p\u003E\u003Cp\u003EI\u0027ve been looking for projects to work on, and am willing to help anyone with developing a plugin for their mod! Whether you want help on the workload, or aren\u0027t programming savvy... I\u0027m just looking for things to work on xP\u003C/p\u003E\n"},{"CreatedByName":"catgirltech","CreatedById":116624,"CreatedDateTime":"2014-07-25T04:24:37Z","Content":"\n\u003Cp\u003Ehi. i\u0027m working on a resource manager module. is there a way to add a resource display to the part\u0027s guiActive bubble? i have the module setup so you can add parts from the vessel to a list and select which resource types you want to manage. i want to have it display the resources it manages. (ideally i want to have it do resource transfers like any other two parts. but one step at a time.)\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-27T15:14:06Z","Content":"\n\u003Cp\u003EHi people, I\u0027m trying to write a plugin that will perform some kind of action when a bool \u0022lifespecimensFound\u0022 is true. I want the bool to have just a small chance of returning true each time the player lands the vessel, so I created a keyvaluepair list. Here it is:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid Update()\u003Cbr\u003E{\u003Cbr\u003EList\u0026lt;KeyValuePair\u0026lt;bool, double\u0026gt;\u0026gt; lifespecimensList = new List\u0026lt;KeyValuePair\u0026lt;bool, double\u0026gt;\u0026gt;();\u003Cbr\u003E\t\tlifespecimensList.Add(new KeyValuePair\u0026lt;bool, double\u0026gt;(true, 0.1));\u003Cbr\u003E\t\tlifespecimensList.Add(new KeyValuePair\u0026lt;bool, double\u0026gt;(false, 0.9));\u003Cbr\u003E\t\tSystem.Random r = new System.Random();\u003Cbr\u003E\t\tdouble lifespecimensChance = r.NextDouble();\u003Cbr\u003E\t\tdouble cumulative = 0.0;\u003Cbr\u003E\t\tfor (int i = 0; i \u0026lt; lifespecimensList.Count; i\u002B\u002B)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\tcumulative \u002B= lifespecimensList[i].Value;\u003Cbr\u003E\t\tif (lifespecimensChance \u0026lt; cumulative)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensFound = lifespecimensList[i].Key;\u003Cbr\u003E\t\t\tbreak;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tif(newlandsite)\u003Cbr\u003E\t\t{\u003Cbr\u003E\u003Cbr\u003E\t\tif(lifespecimensFound)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensStatus = \u0022Life Detected!\u0022;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\telse\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensStatus = \u0022No Life Detected.\u0022;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\telse\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tunitStatus = \u0022Must land at new site!\u0022;\u003Cbr\u003E\t\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHowever, as it in void Update(), the bool is constantly returning new values, but I want it to only return once (when a button is pressed via a KSPEvent, for example). But for some reason, when I try to do this, it returns no value at all. I\u0027m really stumped. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E Thanks in advance for any advice!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-27T16:00:15Z","Content":"\n\u003Cp\u003EThat sounds like how you are trying to tie it to the KSPEvent is the issue, not the code itself.\u003C/p\u003E\u003Cp\u003EHow are you going about that?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-27T20:17:31Z","Content":"\n\u003Cp\u003EWell I tried a couple of things. One way I tried was like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif(testing \u0026amp;\u0026amp; statusInt == 0)\u003Cbr\u003E{\u003Cbr\u003E\t\tList\u0026lt;KeyValuePair\u0026lt;bool, double\u0026gt;\u0026gt; lifespecimensList = new List\u0026lt;KeyValuePair\u0026lt;bool, double\u0026gt;\u0026gt;();\u003Cbr\u003E\t\tlifespecimensList.Add(new KeyValuePair\u0026lt;bool, double\u0026gt;(true, 0.1));\u003Cbr\u003E\t\tlifespecimensList.Add(new KeyValuePair\u0026lt;bool, double\u0026gt;(false, 0.9));\u003Cbr\u003E\t\tSystem.Random r = new System.Random();\u003Cbr\u003E\t\tdouble lifespecimensChance = r.NextDouble();\u003Cbr\u003E\t\tdouble cumulative = 0.0;\u003Cbr\u003E\t\tfor (int i = 0; i \u0026lt; lifespecimensList.Count; i\u002B\u002B)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\tcumulative \u002B= lifespecimensList[i].Value;\u003Cbr\u003E\t\tif (lifespecimensChance \u0026lt; cumulative)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensFound = lifespecimensList[i].Key;\u003Cbr\u003E\t\t\tbreak;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tif(newlandsite)\u003Cbr\u003E\t\t{\u003Cbr\u003E\u003Cbr\u003E\t\tif(lifespecimensFound)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensStatus = \u0022Life Detected!\u0022;\u003Cbr\u003E\t\t\tstatusInt = 2;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\telse\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensStatus = \u0022No Life Detected.\u0022;\u003Cbr\u003E\t\t\tstatusInt = 1;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\telse\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tunitStatus = \u0022Must land at new site!\u0022;\u003Cbr\u003E\t\t\tstatusInt = 0;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith these KSPFields and KSPEvent so that it knows which value of the lifespecimensStatus string is returned and so in theory doesn\u0027t repeat the action but again, it doesn\u0027t do anything:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E[KSPField(guiActive = false, isPersistant = true)]\u003Cbr\u003Epublic int statusInt = 0;\u003Cbr\u003E\u003Cbr\u003E[KSPField(guiActive = false, isPersistant = true)]\u003Cbr\u003Epublic bool testing = false;\u003Cbr\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022\u0022, active = true)]\u003Cbr\u003Epublic void Activate()\u003Cbr\u003E{\u003Cbr\u003EEvents[\u0022Activate\u0022].active = false;\u003Cbr\u003EEvents[\u0022Deactivate\u0022].active = true;\u003Cbr\u003Etesting = true;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-28T11:21:35Z","Content":"\n\u003Cp\u003ENor would it work with a simpler code with the list in another bool I made: \u0022unitActive\u0022 I\u0027ll just give all the code in case I\u0027ve done something stupid somewhere else in the code.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003E\u003Cbr\u003Enamespace RUILifeTech005\u003Cbr\u003E{\t\u003Cbr\u003E\tpublic class RUILifeTech005 : PartModule\u003Cbr\u003E\t{\u003Cbr\u003E\t\t[KSPField(guiActive = false, isPersistant = true)]\u003Cbr\u003E\t\tpublic bool newlandsite;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPField(guiActive = false, isPersistant = true)]\u003Cbr\u003E\t\tpublic bool lifespecimensFound;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPField(guiActive = false, isPersistant = true)]\u003Cbr\u003E\t\tpublic bool unitActive = false;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPField(guiActive = true, guiName = \u0022\u0022, isPersistant = true)]\u003Cbr\u003E\t\tpublic string lifespecimensStatus;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPField(guiActive = true, guiName = \u0022\u0022, isPersistant = true)]\u003Cbr\u003E\t\tpublic string unitStatus;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiActive = true, guiName = \u0022\u0022, active = true)]\u003Cbr\u003E\t\tpublic void Activate()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\tEvents[\u0022Activate\u0022].active = false;\u003Cbr\u003E                Events[\u0022Deactivate\u0022].active = true;\u003Cbr\u003E                unitActive = true;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tvoid Update()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tswitch(this.vessel.checkLanded())\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tcase true :\u003Cbr\u003E\t\t\t\t\tnewlandsite = true;\u003Cbr\u003E\t\t\t\t\tbreak;\u003Cbr\u003E\t\t\t\tcase false :\u003Cbr\u003E\t\t\t\t\tnewlandsite = false;\u003Cbr\u003E\t\t\t\t\tbreak;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tif(unitActive)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\tList\u0026lt;KeyValuePair\u0026lt;bool, double\u0026gt;\u0026gt; lifespecimensList = new List\u0026lt;KeyValuePair\u0026lt;bool, double\u0026gt;\u0026gt;();\u003Cbr\u003E\t\tlifespecimensList.Add(new KeyValuePair\u0026lt;bool, double\u0026gt;(true, 0.1));\u003Cbr\u003E\t\tlifespecimensList.Add(new KeyValuePair\u0026lt;bool, double\u0026gt;(false, 0.9));\u003Cbr\u003E\t\tSystem.Random r = new System.Random();\u003Cbr\u003E\t\tdouble lifespecimensChance = r.NextDouble();\u003Cbr\u003E\t\tdouble cumulative = 0.0;\u003Cbr\u003E\t\tfor (int i = 0; i \u0026lt; lifespecimensList.Count; i\u002B\u002B)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\tcumulative \u002B= lifespecimensList[i].Value;\u003Cbr\u003E\t\tif (lifespecimensChance \u0026lt; cumulative)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensFound = lifespecimensList[i].Key;\u003Cbr\u003E\t\t\tbreak;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tif(newlandsite)\u003Cbr\u003E\t\t{\u003Cbr\u003E\u003Cbr\u003E\t\tif(lifespecimensFound)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensStatus = \u0022Life Detected!\u0022;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\telse\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tlifespecimensStatus = \u0022No Life Detected.\u0022;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\telse\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tunitStatus = \u0022Must land at new site!\u0022;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-28T13:05:45Z","Content":"\n\u003Cp\u003ENot sure what the problem was, but I think I\u0027ve fixed it. Thanks anyway. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-28T15:43:31Z","Content":"\n\u003Cp\u003EDoes anyone know how I would go about defining a science experiment via a plugin. I know that usually, one would use a science cfg file but I was wondering if I\u0027d be able to do the same thing via a KSPEvent button in a plugin?\u003C/p\u003E\n"},{"CreatedByName":"Crabsticks","CreatedById":83832,"CreatedDateTime":"2014-07-28T15:47:26Z","Content":"\n\u003Cp\u003EHi.\u003C/p\u003E\u003Cp\u003EI\u0027m trying to use triggers in my mod/plugin to detect the parts of a vessel, or even just the vessel, as they move through an area. I\u0027ve set up the collider I\u0027m using as istriggered and set up my OnTriggerEnter(Collider). Unfortunately it only seems to recognize a few cetain parts (RCS blocks, landing legs and EVAkerbals) but nothing much else. Anyone know how to solve this? I\u0027ve attempted adding rigidbodies and colliders to all loaded parts in the area but this has had limited success and I have no idea how to set these up so that they don\u0027t mess up the physics of the part/vessel, but still get recognized by the trigger.\u003C/p\u003E\u003Cp\u003EIf I can\u0027t get this to work I\u0027ll give up trying to use triggers and use a calulation based on the position vector of the parts and vessels.\u003C/p\u003E\u003Cp\u003EI\u0027d appreciate any help or suggestions,\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-29T22:16:25Z","Content":"\n\u003Cp\u003EHi, can anyone help me with how to use Part.AddModule()? I\u0027m trying to add a new ScienceExperiment module to a part on a KSPEvent button press. I tried this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPart.AddModule(\u0022lifetech\u0022, ModuleScienceExperiment);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ebut it didn\u0027t work. The API I looked at says it should be Part.AddModule(string partModule) but not sure what I\u0027m doing wrong. Any help? Thanks\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-29T22:26:05Z","Content":"\n\u003Cp\u003EThere is no comma in the addmodule, it is expecting a single variable of type string.\u003C/p\u003E\u003Cp\u003ESo you want Part.addModule(\u0022lifetech\u0022);, with lifetech being a class defined as a partModule.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-29T22:27:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zyrac\u0022 data-cite=\u0022Zyrac\u0022\u003E\u003Cdiv\u003EPart.AddModule(\u0022lifetech\u0022, ModuleScienceExperiment);\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA method with that signature does not exist. You either need to provide the part module name, or a config node that has it (along with other module parameters you want.)\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-30T03:51:29Z","Content":"\n\u003Cp\u003EOkay, config nodes time.\u003C/p\u003E\u003Cp\u003EIn a scenario module, I have the following:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic override void OnSave(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            if (HighLogic.LoadedSceneIsEditor)\u003Cbr\u003E            {\u003Cbr\u003E                if (!node.nodes.Contains(\u0022EDITOR\u0022))\u003Cbr\u003E                {\u003Cbr\u003E                    node.AddNode(\u0022EDITOR\u0022);\u003Cbr\u003E                }\u003Cbr\u003E                AGXEditorNode = node.GetNode(\u0022EDITOR\u0022);\u003Cbr\u003E                node.SetNode(\u0022EDITOR\u0022,EditorSave(AGXEditorNode));\u003Cbr\u003E            }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand then EditorSave() is:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E public ConfigNode EditorSave(ConfigNode AGXEditorNode)\u003Cbr\u003E        {\u003Cbr\u003E            if (!AGXEditorNode.nodes.Contains(EditorLogic.fetch.shipNameField.Text))\u003Cbr\u003E            {\u003Cbr\u003E                AGXEditorNode.AddNode(EditorLogic.fetch.shipNameField.Text);\u003Cbr\u003E            }\u003Cbr\u003E            ConfigNode thisVsl = new ConfigNode();\u003Cbr\u003E            thisVsl.AddValue(\u0022AGXNames\u0022,\u0022namesTest\u0022);\u003Cbr\u003E            thisVsl.AddValue(\u0022AGXKeySet\u0022, \u0022KeysetTest\u0022);\u003Cbr\u003E\u003Cbr\u003E            foreach (Part p in EditorLogic.SortedShipList)\u003Cbr\u003E            {\u003Cbr\u003E                if(!thisVsl.HasNode(p.name.Remove(p.name.Length - 8)))\u003Cbr\u003E                {\u003Cbr\u003E                    thisVsl.AddNode(p.name.Remove(p.name.Length - 8));\u003Cbr\u003E                }\u003Cbr\u003E                ConfigNode partTemp = new ConfigNode();\u003Cbr\u003E                partTemp.AddValue(\u0022relLoc\u0022,(p.transform.position-EditorLogic.startPod.transform.position).ToString());\u003Cbr\u003E                thisVsl.SetNode(p.name.Remove(p.name.Length - 8), partTemp);\u003Cbr\u003E            }\u003Cbr\u003E            AGXEditorNode.SetNode(EditorLogic.fetch.shipNameField.Text, thisVsl);\u003Cbr\u003E            return AGXEditorNode;\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand I expect the following (actual strings replaced with the calculation values from the previous code block):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESCENARIO\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = AGextScenario\u003Cbr\u003E\t\tscene = 7, 6, 9\u003Cbr\u003E\t\tEDITOR\u003Cbr\u003E\t\t{\u003Cbr\u003E                EditorLogic.fetch.shipNameField.Text //new module, using the ship name\u003Cbr\u003E                {\u003Cbr\u003E                                AGXNames = namesTest\u003Cbr\u003E                                AGXKeySet = KeysetTest\u003Cbr\u003E                                p.name.Remove(p.name.Length - 8) //new confignode level, partname (less the (CLONE) added in the editor)\u003Cbr\u003E                                {\u003Cbr\u003E                                            relLoc = Vector3 numbers as string\u003Cbr\u003E                                }\u003Cbr\u003E                                //repeat for as many parts on the vessel\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EInstead I get:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESCENARIO\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = AGextScenario\u003Cbr\u003E\t\tscene = 7, 6, 9\u003Cbr\u003E\t\tEDITOR\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo the code in the actual OnSave method is running, but my call to EditorSave does not seem to process. There are no errors thrown to the log, can anyone point out to me what I am doing wrong? Can I not call ConfigNodes to other methods like this or something?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-30T08:57:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EAGXEditorNode.AddNode(EditorLogic.fetch.shipNameField.Text);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou need to be very careful when doing that. Config node names and key names do not allow all characters. You may instead want to go for this structure:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EEDITOR\u003Cbr\u003E{\u003Cbr\u003E  ship // fixed node name\u003Cbr\u003E  {\u003Cbr\u003E    name = \u0026lt;ship name\u0026gt;\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(Of course, the values also don\u0027t allow all characters, most notably \u0027/\u0027.)\u003C/p\u003E\u003Cp\u003EThe same goes for your part sub-node\u0027s name.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-30T13:37:04Z","Content":"\n\u003Cp\u003EBah, that is probably it.\u003C/p\u003E\u003Cp\u003EI was using the stock Kerbal 2 for tests and I\u0027ll bet you that space it in was the issue.\u003C/p\u003E\u003Cp\u003EThanks for the assist.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-30T14:32:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EA method with that signature does not exist. You either need to provide the part module name, or a config node that has it (along with other module parameters you want.)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, first I found it was in fact part rather than Part. So I now have this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class RUILifeTech005 : PartModule\u003Cbr\u003E{\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Activate\u0022, active = true)]\u003Cbr\u003E        public void Activate()\u003Cbr\u003E        {\u003Cbr\u003E         \tEvents[\u0022Activate\u0022].active = false;\u003Cbr\u003E         \tEvents[\u0022Deactivate\u0022].active = true;\u003Cbr\u003E         \tpart.AddModule(\u0022lifetech\u0022);\u003Cbr\u003E        }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E So, then your saying I should make another class within the plugin like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class lifetech : ModuleScienceExperiment\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo then I somehow need to define the experiment id, title, baseValue, etc? Any idea how I\u0027d do that? I know it sounds kinda bad asking for code details but I\u0027ve only made ScienceExperiment modules in a cfg file, which I don\u0027t want to do with this mod. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"Zyrac","CreatedById":50037,"CreatedDateTime":"2014-07-30T15:46:06Z","Content":"\n\u003Cp\u003EOr rather this?:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class lifetech : PartModule\u003Cbr\u003E{\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith ConfigNode.AddNode(); Something like that?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-31T02:42:06Z","Content":"\n\u003Cp\u003EOkay, I must be missing something fundamental to how confignodes are supposed to work.\u003C/p\u003E\u003Cp\u003EIn my scenario module:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic class AGextScenario : ScenarioModule //this runs on flight scene start\u003Cbr\u003E    {\u003Cbr\u003E        public ConfigNode AGXBaseNode = new ConfigNode(); //initialize the three configNodes I am using\u003Cbr\u003E        public ConfigNode AGXFlightNode = new ConfigNode();\u003Cbr\u003E        public ConfigNode AGXEditorNode = new ConfigNode();\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        public void Start()\u003Cbr\u003E        {\u003Cbr\u003E            try \u003Cbr\u003E            {\u003Cbr\u003E                if(File.Exists(new DirectoryInfo(KSPUtil.ApplicationRootPath).FullName \u002B \u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/AGExt.cfg\u0022)) //does AGExt.cfg exist for this save game? It saves to the same folder as persistent.sfs\u003Cbr\u003E                {\u003Cbr\u003E                    AGXBaseNode = ConfigNode.Load(new DirectoryInfo(KSPUtil.ApplicationRootPath).FullName \u002B \u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/AGExt.cfg\u0022); //file exists, load it\u003Cbr\u003E                    print(\u0022AGX ConfigNode Load Okay!\u0022);\u003Cbr\u003E                }\u003Cbr\u003E                else\u003Cbr\u003E                {\u003Cbr\u003E                    print(\u0022AGX ConfigNode not found, creating.....\u0022);\u003Cbr\u003E                    AGXBaseNode.AddNode(\u0022FLIGHT\u0022);\u003Cbr\u003E                    AGXBaseNode.AddNode(\u0022EDITOR\u0022);\u003Cbr\u003E                    AGXBaseNode.Save(new DirectoryInfo(KSPUtil.ApplicationRootPath).FullName \u002B \u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/AGExt.cfg\u0022); //file does not exist, create it with empty FLIGHT and EDITOR nodes\u003Cbr\u003E                }\u003Cbr\u003E                AGXFlightNode = AGXBaseNode.GetNode(\u0022FLIGHT\u0022); //load FLIGHT and EDITOR nodes\u003Cbr\u003E                AGXEditorNode = AGXBaseNode.GetNode(\u0022EDITOR\u0022);\u003Cbr\u003E            }\u003Cbr\u003E            catch (Exception e)\u003Cbr\u003E            {\u003Cbr\u003E                print(\u0022AGXScenStart Fail \u0022 \u002B errLine \u002B \u0022 \u0022 \u002B e);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis works. If AGExt.cfg does not exist in the save folder, it creates it with a FLIGHT and EDITOR node that are empty. It then loads the AGXFlightNode and AGXEditorNode configNodes from the file. (They will be empty nodes if I just created the AGExt.cfg file.)\u003C/p\u003E\u003Cp\u003EHowever, this appears to do nothing: (still in the scenario module)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic override void OnSave(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022AGXScenSaving\u0022); //this prints to the log so the method excutes\u003Cbr\u003E            if (HighLogic.LoadedSceneIsEditor) //this code can only run in the editor, will be different for flight mode\u003Cbr\u003E            {\u003Cbr\u003E                try\u003Cbr\u003E                {\u003Cbr\u003E                    string hashedShipName = EditorHashShipName(EditorLogic.fetch.shipNameField.Text); //as per my previous post, I hash the shipname to a string of numbers so I\u0027m guaranteed to not have any illegal characters\u003Cbr\u003E//I have a print() in the EditorHashShipName method that prints the number so I know this is working.\u003Cbr\u003E                    if (!AGXEditorNode.nodes.Contains(hashedShipName))\u003Cbr\u003E                    {\u003Cbr\u003E                        AGXEditorNode.AddNode(hashedShipName); //make the node for the vessel, using the hashed ship name as node name\u003Cbr\u003E                    }\u003Cbr\u003E                    ConfigNode thisVsl = new ConfigNode(); //new config node for the vessel\u003Cbr\u003E                    thisVsl.AddValue(\u0022AGXNames\u0022, \u0022namesTest\u0022); //add my test values\u003Cbr\u003E                    thisVsl.AddValue(\u0022AGXKeySet\u0022, \u0022KeysetTest\u0022);\u003Cbr\u003E                    AGXEditorNode.SetNode(hashedShipName, thisVsl); //save vessel config node as sub-node of the EDITOR node\u003Cbr\u003E                    AGXBaseNode.SetNode(\u0022EDITOR\u0022, AGXEditorNode); //save the modified EDITOR node to the root node of the AGExt.cfg file\u003Cbr\u003E                    AGXBaseNode.Save(new DirectoryInfo(KSPUtil.ApplicationRootPath).FullName \u002B \u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/AGExt.cfg\u0022); //the actual write command to the disk\u003Cbr\u003E                }\u003Cbr\u003E                catch (Exception e)\u003Cbr\u003E                {\u003Cbr\u003E                    print(\u0022AGXScen EditorSave Error \u0022 \u002B errLine \u002B \u0022 \u0022 \u002B e);\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI am expecting this to add a sub-node in the EDITOR node in my AGExt.cfg file with a node name as a string of numbers and two test values, but it does nothing that I can see. Notably however, there are no errors in the log so I\u0027m not sure where things are going wrong.\u003C/p\u003E\u003Cp\u003EI\u0027m sure it is something simple, but where is my assumptions about how ConfigNodes work wrong? \u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-31T03:35:16Z\u0022 title=\u002207/31/2014 03:35  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 31, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-31T08:30:38Z","Content":"\n\u003Cp\u003EDiazo, nothing in particular jumps out at me in your code. However, I don\u0027t use node.nodes.Contains(), or node.SetNode(). Can you retry using node.HasNode() and simply .AddNode() in combination with removal for replacing an existing node? This always worked for me.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/blizzy78/ksp_toolbar/blob/master/Toolbar/Internal/Extensions.cs#L61-L88\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/blizzy78/ksp_toolbar/blob/master/Toolbar/Internal/Extensions.cs#L61-L88\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-31T13:34:14Z","Content":"\n\u003Cp\u003EAlright, I\u0027ll try that.\u003C/p\u003E\u003Cp\u003EI\u0027m out of other ideas at this point, I spent all my time last night on this one issue and I\u0027m starting to wonder if I\u0027m using using confignodes correctly.\u003C/p\u003E\u003Cp\u003EFor the record, I\u0027m trying to make an AGExt.cfg file in the same directory as your persistance.sfs file that has this format:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFLIGHT\u003Cbr\u003E{\u003Cbr\u003E  Vessel1\u003Cbr\u003E  {\u003Cbr\u003E    Part1\u003Cbr\u003E    {\u003Cbr\u003E      Action1\u003Cbr\u003E      {\u003Cbr\u003E         //data\u003Cbr\u003E      }\u003Cbr\u003E      Action2\u003Cbr\u003E      {\u003Cbr\u003E        //data\u003Cbr\u003E      }\u003Cbr\u003E    }\u003Cbr\u003E    Part2\u003Cbr\u003E    {\u003Cbr\u003E      Action1\u003Cbr\u003E      {\u003Cbr\u003E         //data\u003Cbr\u003E      }\u003Cbr\u003E    }\u003Cbr\u003E  }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EConfignodes can do this correct? When I open the persistent.sfs file I see that there are nested config nodes this deep so I assume I can do it also?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Noro","CreatedById":116579,"CreatedDateTime":"2014-07-31T22:06:46Z","Content":"\n\u003Cp\u003EHello, I have a question about ScenarioModule.\u003C/p\u003E\u003Cp\u003EIs it possible to instantiate a class based on ScenarioModule? I tried it may ways around and it still gets destroyed every time the scene changes \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E I\u0027m using construction like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    [KSPScenario(ScenarioCreationOptions.AddToNewCareerGames, new GameScenes[] { GameScenes.FLIGHT, GameScenes.SPACECENTER, GameScenes.SPH, GameScenes.EDITOR })]\u003Cbr\u003E    public partial class MyClass : ScenarioModule\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI even use DontDestroyOnLoad(this) in my OnAwake() method but I still get all static class data wiped at the scene change. \u003C/p\u003E\u003Cp\u003ESo is it possible at all to get an instance of the ScenarioModule based plugin? Or I should rewrite all that I have to KSPAddon format? I started to use ScenarioModule since it have easy save/load functionality but I didn\u0027t think it wouldn\u0027t be able to save static data between scenes \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"}]}