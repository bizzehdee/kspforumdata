{"TopicId":95597,"ForumId":15,"TopicTitle":"Bump Maps -- working in Unity, not visible in game","CreatedByName":"Genius Evil","CreatedById":72989,"CreatedDateTime":"2015-01-04T05:11:33Z","PageNum":1,"Articles":[{"CreatedByName":"Genius Evil","CreatedById":72989,"CreatedDateTime":"2015-01-04T05:11:33Z","Content":"\n\u003Cp\u003EI\u0027ve been working on a radial aircraft engine model. I just got it into KSP and found that the bump mapping on the cylinders doesn\u0027t show up.\u003C/p\u003E\u003Cp\u003EThis album shows the process I used and the problem:\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/ozzcf\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EAny idea what the problem is? I\u0027m probably doing something simple wrong -- I haven\u0027t used bump maps before.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-04T06:30:42Z","Content":"\n\u003Cp\u003EAre you sure that image is a normal map?\u003C/p\u003E\n"},{"CreatedByName":"Genius Evil","CreatedById":72989,"CreatedDateTime":"2015-01-04T16:07:05Z","Content":"\n\u003Cp\u003EIs there something special you have to do to make a normal map? I just looked at a normal map from the Retro Future pack and used the same colors to indicate edges. I had tried creating from grayscale in unity before, but it did not seem to work. Do I have to use a specific file type?\u003C/p\u003E\u003Cp\u003EAlso, I noticed that the unity screenshot is too lo-res to see the mapping unless you view full resolution.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-04T18:34:34Z","Content":"\n\u003Cp\u003EYour normal map file has to end with NRM. Maybe that\u0027s why it\u0027s not exporting properly. Call it something_NRM.\u0026lt;extension\u0026gt; or something.\u003C/p\u003E\n"},{"CreatedByName":"Genius Evil","CreatedById":72989,"CreatedDateTime":"2015-01-04T19:58:30Z","Content":"\n\u003Cp\u003ENaming the normal map files with _NRM made the cowl normal mapping work, however it did not fix the cylinders. I went back to Blender and unwrapped the cylinder again, thinking I might have changed the mesh after unwrapping it. Unwrapping the cylinder model again did not fix the normal mapping though. When I get back I will try the cylinder mesh with the working normal map to see if that works.\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-01-04T22:34:06Z","Content":"\n\u003Cp\u003EAre you setting the \u0027texture type\u0027 to normal map in Unity? When you select the texture image in the asset panel of unity, one of the inspector options allows you to mark it as a normal map. Sometimes unity will ask you when you start to import it if it\u0027s a normal map and mark it for you... but it\u0027s one thing that could be going wrong. Also, is your model set to calculate and split tangents? I don\u0027t claim to fully understand how the engine uses the tangent information... but I HAVE had a normal mapped object not display correctly when I had tangents set to import... but there weren\u0027t any in the file to import.\u003C/p\u003E\n"},{"CreatedByName":"Genius Evil","CreatedById":72989,"CreatedDateTime":"2015-01-05T04:36:09Z","Content":"\n\u003Cp\u003Eartwhaley: Yes, the texture type is normal map and the model is set to calculate and split tangents.\u003C/p\u003E\u003Cp\u003EOddly, when I used a random normal map from Retrofuture it worked fine (in-game). I\u0027ve tried making a different map as grayscale and importing it into Unity, but when I wrote the .mu it exported the map as a solid color! It had been shown as a proper normal map in unity, so I\u0027m not sure why that happened.\u003C/p\u003E\u003Cp\u003EI believe the problem is not in the model or my application of normal maps to it, since the Retrofuture one worked. I have no idea why this map is only working in the unity editor. The map for another part of the model works fine.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOkay, just tried a different bump map. It works now! Apparently KSP is more selective about what a normal map is than the Unity editor. Changing value or hue both work in the editor, but KSP only likes changing hues.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-05T08:41:48Z","Content":"\n\u003Cp\u003EI\u0027d generate your normal maps from bump maps from now on. I do I never had problems like this\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-01-05T15:56:55Z","Content":"\n\u003Cp\u003Euse the \u0022Create from Grayscale\u0022 option and use the new slider to adjust amount of bump. It\u0027s difficult to paint a normal map by hand without knowing how tangent space normal maps work. best option is use Unity to generate one, 3rd party plugin, or directly from 3d app.\u003C/p\u003E\n"},{"CreatedByName":"Kommitz","CreatedById":37526,"CreatedDateTime":"2015-01-08T07:32:29Z","Content":"\n\u003Cp\u003EThe problem\u0027s probably got to do with you trying to hand paint a normalmap; you can do it but not in the way you\u0027re going about it unless you\u0027ve got a fairly supernatural ability to imagine and render, by hand, 3D directional data.\u003C/p\u003E\u003Cp\u003EIf you want to make a normalmap from a handmade image you can work in greyscale as nli2work said, nice and simple - from black to white, low to high. From that you can convert it to a normalmap in Unity, or there are plugins for Photoshop and one for GIMP somewhere too (but I\u0027ve forgotten where I found it).\u003C/p\u003E\u003Cp\u003ECouple of handy programs you could look at would be CrazyBump or NDO2.\u003C/p\u003E\u003Cp\u003EYou can also bake normalmaps from high to low poly meshes, it really depends on the type of detail or shape you want to get.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-08T10:04:53Z","Content":"\n\u003Cp\u003EWhat are good free program options for bump and normal map baking? I am primarily interested in high to low poly normal maps (did I say that right? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E).\u003C/p\u003E\u003Cp\u003EI was looking at Xnormal, but the site seems very down.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T11:11:57Z\u0022 title=\u002201/08/2015 11:11  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-08T11:54:24Z","Content":"\n\u003Cp\u003EI don\u0027t know about baking, but if you want to generate normal maps from bump maps you can use the NormalMap plugin for GIMP. Link in the dev sticky.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-08T12:13:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EI don\u0027t know about baking, but if you want to generate normal maps from bump maps you can use the NormalMap plugin for GIMP. Link in the dev sticky.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI understood that normals maps can do more than bump maps. Does that not mean that generating a normal map from a bump map yields a result that could be more optimal? I figured that making a normal map directly from the model would produce the best end product.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-01-08T14:28:37Z","Content":"\n\u003Cp\u003Efor baking (sometimes called projecting) you need a 3d app, Max; Maya; Modo; Blender; etc. You need a game mesh with UV set, plus a high poly detail mesh (uv is unimportant). baking has the advantage of letting you quickly generate base maps for diffuse, specular, ambient occlusion, etc, at the same time as you generate your normal map. it can speed up your texture process quite a bit.\u003C/p\u003E\u003Cp\u003Efor converting, you need some image editor like PS or GIMP and appropriate plugin like nDo, or \u003Ca href=\u0022http://cpetry.github.io/NormalMap-Online/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://cpetry.github.io/NormalMap-Online/\u003C/a\u003E, or nVidia\u0027s PS tools. a lot of options. advantage is speed in iteration. you can see changes in the normal map output very quickly by updating your source image.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T14:52:37Z\u0022 title=\u002201/08/2015 02:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-08T14:34:32Z","Content":"\n\u003Cp\u003EBoth methods have advantages.\u003C/p\u003E\u003Cp\u003EIf you bake from a high res model you can have more control over the normal map down to individual pixels but only if you add your details and unwrap them veeeeery meticulously paying attention to where those details would fall on the UV layout. That\u0027s obviously very tedious and difficult to get right, but it\u0027s there if you want.\u003C/p\u003E\u003Cp\u003EGenerating normal maps from bump maps with the GIMP plugin gives you slightly less control, but makes up for it by being much much easier.\u003C/p\u003E\u003Cp\u003Ee.g. below you see what you get by creating a single raised pixel in a bump map, and the resulting normal map. The plugin needs to define normals for the surrounding pixels and goes a little over the top imo.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/A2lF165.png\u0022 alt=\u0022A2lF165.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-08T14:41:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Efor converting, you need some image editor like PS or GIMP and appropriate plugin like nDo, or \u003Ca href=\u0022http://cpetry.github.io/NormalMap-Online/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://cpetry.github.io/NormalMap-Online/\u003C/a\u003E, or nVidia\u0027s PS tools. a lot of options.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI will go the baking route and will try the Nvidia tools. Thanks for the tip!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EThat\u0027s obviously very tedious and difficult to get right, but it\u0027s there if you want. [...] Generating normal maps from bump maps with the GIMP plugin gives you slightly less control, but makes up for it by being much much easier.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EProducing the highest quality product I can is my goal. We will see how doing the work pans out and go from there \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T14:50:06Z\u0022 title=\u002201/08/2015 02:50  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"}]}