{"TopicId":51591,"ForumId":34,"TopicTitle":"[1.1.3] AntennaRange 1.11.4 - Enforce and Encourage Antenna Diversity","CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2013-11-02T19:37:49Z","PageNum":2,"Articles":[{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2013-12-19T23:58:55Z","Content":"\n\u003Cp\u003EOK, folks. I\u0027ve got a build that implements basic relaying. Antennas will look for nearby relays that can talk to Kerbin, and will use the \u0022cheapest for me\u0022 target. So, if you\u0027re at the Mun with any antenna, and have a comms satellite or mothership in Munar orbit with a medium dish antenna, it will always transmit \u0022via\u0022 that nearby relay instead of going back to Kerbin.\u003C/p\u003E\u003Cp\u003EThis does NOT attempt to do anything with resource consumption on unloaded ships; if you build a giant chain of whip antennas all the way to Eeloo, a ship at Eeloo will use the nearest relay on the cheap even though technically going through all those relays would be less efficient. If you\u0027re looking for that level of challenge, RemoteTech is probably the solution for you.\u003C/p\u003E\u003Cp\u003EI have done almost zero playtesting with this yet, so I\u0027m considering it to be an experimental build and not uploading it to SpacePort yet. A \u003Ca href=\u0022http://toad.homelinux.net/KSP/AntennaRange/AntennaRange.dll\u0022 rel=\u0022external nofollow\u0022\u003Enew .dll is available here\u003C/a\u003E; just drop this over the previous AntennaRange.dll and you\u0027re good to go. You\u0027ll need AntennaRange.cfg from a previous version (no changes there, don\u0027t worry).\u003C/p\u003E\u003Cp\u003ESo, if you\u0027re game for it, please go test and let me know how it works for you! Otherwise, once I\u0027ve had a chance to do more than the basic \u0022does it work\u0022 edge tests, I\u0027ll get a new package uploaded.\u003C/p\u003E\n"},{"CreatedByName":"Frostiken","CreatedById":1837,"CreatedDateTime":"2013-12-20T01:47:37Z","Content":"\n\u003Cp\u003EWhy do my antennas now seem to have infinite packet size? It still says \u00272\u0027, but rather than transmitting, say, an 8-Mit crew report in 4 chunks, it just instantly goes to 100%.\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2013-12-20T05:16:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Frostiken\u0022 data-cite=\u0022Frostiken\u0022\u003E\u003Cdiv\u003EWhy do my antennas now seem to have infinite packet size? It still says \u00272\u0027, but rather than transmitting, say, an 8-Mit crew report in 4 chunks, it just instantly goes to 100%.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAntennaRange \u0022rewards\u0022 the use of antennas at short range by increasing the data packet size. Basically, each antenna has a \u0022nominal\u0022 range. At this range, the antenna behaves exactly as it does in Squad\u0027s vanilla implementation. At longer range, the MiT-per-packet stays the same, but the power use increases. At shorter range, the power use stays the same, but the MiT-per-packet increases. For example, if you\u0027re using a whip antenna in low Kerbin orbit, you will have a very high data rate and small experiments will transmit back in a single packet. If you were using it out beyond Kerbo-stationary orbit, it would take the standard four packets, but each of those packets would cost extra power to send. The \u0022nominal\u0022 range for the whip antenna is a bit short of 5 megameters altitude; around there, it will behave a great deal as it does in the stock KSP implementation.\u003C/p\u003E\n"},{"CreatedByName":"Frostiken","CreatedById":1837,"CreatedDateTime":"2013-12-20T06:01:13Z","Content":"\n\u003Cp\u003EOh. Hmm. Okay. I have mixed feelings about that.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-20T14:38:26Z\u0022 title=\u002212/20/2013 02:38  PM\u0022 data-short=\u002210 yr\u0022\u003EDecember 20, 2013\u003C/time\u003E by Frostiken\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Carcharhinidae","CreatedById":89275,"CreatedDateTime":"2013-12-22T20:33:32Z","Content":"\n\u003Cp\u003Elove this mod. still need to work on my old tendency of sticking the antenna on everything (currently my probes on the mun can\u0027t radio science back), but it\u0027s a fun thing to have to take into consideration.\u003C/p\u003E\u003Cp\u003EI do like the relay idea, since it means my usual approach for multi-moon exploration is more valid again. IE, building a ship with a single larger probe and numerous small ones. now the largest carries a big dish and the rest all carry the smaller stuff.\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2013-12-22T22:20:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Carcharhinidae\u0022 data-cite=\u0022Carcharhinidae\u0022\u003E\u003Cdiv\u003Elove this mod. still need to work on my old tendency of sticking the antenna on everything (currently my probes on the mun can\u0027t radio science back), but it\u0027s a fun thing to have to take into consideration.\u003Cp\u003EI do like the relay idea, since it means my usual approach for multi-moon exploration is more valid again. IE, building a ship with a single larger probe and numerous small ones. now the largest carries a big dish and the rest all carry the smaller stuff.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you don\u0027t mind being something of a guinea pig, download the testing DLL linked in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/56440-0-23-AntennaRange-Enforce-and-Encourage-Antenna-Diversity?p=855063\u0026amp;viewfull=1#post855063\u0022 rel=\u0022external nofollow\u0022\u003Ethis post\u003C/a\u003E and copy it over the AntennaRange.dll file in your spaceport installation. Then you could send a relay sat up to \u0022rescue\u0022 your probes! And you could tell me if it breaks anything terribly. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EOne report I \u003Cem\u003Ehave\u003C/em\u003E heard is that there is some weirdness to do with adding the module to ships launched and/or designed before installing AntennaRange. There\u0027s no good work around for this; MechJeb has the same basic issue: if you don\u0027t open up a ship there\u0027s nothing I can do to save the module information needed for AntennaRange\u0027s relaying to work.\u003C/p\u003E\u003Cp\u003EThe \u0022design\u0022 report is a weird one and I think I have a way around that. But at the very least you\u0027ll need to open up all existing flights in progress for AntennaRange to add its module data to the antenna.\u003C/p\u003E\n"},{"CreatedByName":"Carcharhinidae","CreatedById":89275,"CreatedDateTime":"2013-12-23T00:15:46Z","Content":"\n\u003Cp\u003Etoo late for that now ^^, I downloaded the file and the patched .dll in one go, so I can\u0027t test that bug really. it was just my habit of sticking antennae on everything but not the bigger ones untill I got to bigger power supplies. but the relay system certainly works for me. sending a dish over to the mun let me rescue the bots indeed. a new flotilla is already en route for an encounter (need more !!science!!).\u003C/p\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2013-12-30T00:47:08Z","Content":"\n\u003Cp\u003Etoadicus I tried out the new dll and it seems to be working as it should. I\u0027d change the font of the message that you get when you don\u0027t have enough range to the same one that is used for the science messages. Creates more consistency. Other than it\u0027s pretty much perfect. Going to be a must-have mod for any future careers.\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-01-03T16:46:26Z","Content":"\n\u003Cp\u003EAntennaRange has been updated to version 0.6.0! This includes full compatibility with 0.23 and ModuleManager 1.5.6, along with the new relay feature.\u003C/p\u003E\u003Cp\u003EThe relaying feature is intentionally simple. That is, if your ship has a short range antenna, but is in range of a longer range antenna that can communicate back to Kerbin, it will do so. At this time, no attempt is being made to model electric use on the relay vessels; this mechanic is intended to feel rewarding for those interested in putting together a relay system (say, a flat dish antenna in orbit of Minmus so your probes can just use whips, or a big dish in high Jool orbit with a few flat dishes in low orbits, so once again your probes can use whips). Because of the limited number of antenna parts and because this mechanic is intended to be optional, range is not additive: if you want to use a whip from far away, you need a bigger antenna within whip range.\u003C/p\u003E\u003Cp\u003E@CaptRobau, I am looking in to a way to match the look and feel of Squad\u0027s text while maintaining control over what my messages look like, but the messages are all private members in Squad\u0027s code, and fonts are a little weird in Unity. I\u0027ll push a revision when I get that sorted.\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-01-11T22:09:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MeCripp\u0022 data-cite=\u0022MeCripp\u0022\u003E\u003Cdiv\u003Etoadicus is there away to get the max range and current range to stay on screen like the void info does ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll add them as display fields in the right-click menu for each part in the next release, but at this point I don\u0027t have any global utility for displaying them. Maybe I\u0027ll write a VOID module for it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-01-14T20:28:16Z","Content":"\n\u003Cp\u003EAntennaRange has been updated to version 0.6.2! This version features performance and stability improvements for the relaying code, and adds useful data to the \u0022right click\u0022 context tip.\u003C/p\u003E\u003Cp\u003ECHANGELOG:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ev.0.6.2 [2014-01-14]\u003Cbr\u003E* Refactored a lot of the relaying code to improve reliability and performance.\u003Cbr\u003E* Added range and packet data to the \u0022right click\u0022 context tip.\u003Cbr\u003E* Made the AntennaRange messages match the stock antenna messages more closely.\u003Cbr\u003E* Skipped 0.6.1 because I got my version numbers confused with TweakableEverything.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MeCripp\u0022 data-cite=\u0022MeCripp\u0022\u003E\u003Cdiv\u003EToadicus you thought about making a mod like RemoteTech would be nice to have more mods to pick from there was a old but good post here is a link to post \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/65251-NeoSky\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/members/65251-NeoSky\u003C/a\u003E , I thought it was better then what RT has now , thinks for all the time you put in this and hard work.\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the request, but frankly I have no plans to produce such a mod. I don\u0027t use RemoteTech myself, but from my review of the code it looks like a pretty good implementation of a pretty complex problem, so I don\u0027t see a big void to fill in that regard. As to NeoSky\u0027s requests for modeling of solar activity and magnetic storms, it seems to me like that belongs in a larger realism kit because it only has any real pertinence to games run with life support mods, etc, where \u0022oops, solar flare happening, time to fast forward\u0022 isn\u0027t an option. Finally, I\u0027m already way behind on updating VOID; I just don\u0027t have time to take on another mod at this point.\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-01-19T17:15:59Z","Content":"\n\u003Cp\u003E@MeCripp: It is very unlikely that, at any point for any reason, AntennaRange and RemoteTech 2 could be made to work well together. Your last patch is removing the RT antenna module completely and replacing it with an AntennaRange module; while I don\u0027t see a specific reason for that not to work with the rest of the AntennaRange code, it would certainly break parts of RemoteTech. Too, RemoteTech supplants vast swaths of the stock transmission behavior around which AntennaRange is built.\u003C/p\u003E\u003Cp\u003EIn my mind, though, I can\u0027t see a reason to want to use both mods. I\u0027m not very familiar with RemoteTech, but to my reading of the description it essentially models everything AntennaRange does with more realism, and a whole lot more besides. AntennaRange is entirely superceded by RemoteTech and is designed to fill a different role. If you want stock-like transmission behavior but with quasi-reasonable restrictions on transmission distance and a basic relay model that rewards \u0022going the extra mile\u0022 for a small comms network without requiring it, AntennaRange is what you want. If you want strict enforcement of mostly-realistic transmission restrictions and complex network relay behavior, RemoteTech is for you. Putting the two together doesn\u0027t make sense to me conceptually; even if I could code it, I wouldn\u0027t know what it would be.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-19T17:18:14Z\u0022 title=\u002201/19/2014 05:18  PM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 19, 2014\u003C/time\u003E by toadicus\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"simonh","CreatedById":57952,"CreatedDateTime":"2014-01-27T07:22:34Z","Content":"\n\u003Cp\u003EWhat a great idea for a mod! IMHO this is exactly how the antennas should work in the stock game. I\u0027ve looked at remote tech and it just looks like way too much busywork to be interesting, but this hits the challenge versus simplicity ratio right at the point of maximum fun. Many thanks.\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2014-02-11T02:45:24Z","Content":"\n\u003Cp\u003EOkay, I have a lander on Minmus with a Communotron 16, and a satellite in a 250km orbit over Minmus with a Communotron 88-88. The lander refuses to transmit, correctly noting it\u0027s too far from Kerbin, but... shouldn\u0027t it be able to use the satellite as a relay? I\u0027m confused...\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/mnV8U\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T03:10:49Z\u0022 title=\u002202/11/2014 03:10  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by Gaius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-02-11T05:24:17Z","Content":"\n\u003Cp\u003EAntennaRange has been updated to version 0.6.3! This version fixes a bug where flags in range of transmitters would cause exceptional conditions.\u003C/p\u003E\u003Cp\u003ECHANGELOG:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ev.0.6.3 [2014-02-10]\u003Cbr\u003E* Fixed a bug where flags in range would cause exceptional conditions.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaius\u0022 data-cite=\u0022Gaius\u0022\u003E\u003Cdiv\u003EOkay, I have a lander on Minmus with a Communotron 16, and a satellite in a 250km orbit over Minmus with a Communotron 88-88. The lander refuses to transmit, correctly noting it\u0027s too far from Kerbin, but... shouldn\u0027t it be able to use the satellite as a relay? I\u0027m confused...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf 0.6.3 doesn\u0027t fix your issue, would you be willing to share your persistence file with me? I have been chasing another bug to do with relays not always working every time, but I\u0027ve been having trouble narrowing it down. Maybe a fresh set of conditions will help. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2014-02-11T23:53:55Z","Content":"\n\u003Cp\u003ENew download has fixed the issue. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EGiven your patch notes, I suspect the fact that the probe on the surface was 80m away from a flag might have been what was causing the problem.\u003C/p\u003E\u003Cp\u003EEDIT: Noticed one problem remains -- newly docked/undocked vessels can have bizarre ideas for their current transmission distance. A quicksave and reload fixes the problem.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-12T02:44:37Z\u0022 title=\u002202/12/2014 02:44  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 12, 2014\u003C/time\u003E by Gaius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2014-04-03T02:40:51Z","Content":"\n\u003Cp\u003E...and 0.23.5 seems to have broken it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E When attempting to transmit from Minmus, with a relay satellite in orbit, nothing happens, and the debug log says:\u003C/p\u003E\u003Cp\u003E[Log]: Sending data to vessel comms. 1 devices to choose from. Will try to pick the best one\u003C/p\u003E\u003Cp\u003E[Exception]: KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-04-03T03:15:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaius\u0022 data-cite=\u0022Gaius\u0022\u003E\u003Cdiv\u003E...and 0.23.5 seems to have broken it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E When attempting to transmit from Minmus, with a relay satellite in orbit, nothing happens, and the debug log says:\u003Cp\u003E[Log]: Sending data to vessel comms. 1 devices to choose from. Will try to pick the best one\u003C/p\u003E\u003Cp\u003E[Exception]: KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELook in the Output.log file to break down that Exception. Its located in C:\\kerbal\\Kerbal Space Program\\KSP_Data\u003C/p\u003E\u003Cp\u003EThe file will give you more info on whats actually causing the problem. A few of the mods out there are having issues with some new code in 23.5. I have seen that same exception from Engineer.. In fact Engineer has all kinds of issues in 23.5. Not sure if you have that installed.. But that why you need to check the outputlog file.. To double check to make sure what mod is causing the problem.\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2014-04-03T08:41:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003ELook in the Output.log file to break down that Exception. Its located in C:\\kerbal\\Kerbal Space Program\\KSP_Data\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is no such file [DERP, there is, I found it, although it\u0027s not named exactly that; see below]. If you mean KSP.log, it just contains the same errors that are written to the debug log, albeit with timestamps.\u003C/p\u003E\u003Cp\u003E[LOG 03:31:16.052] Sending data to vessel comms. 1 devices to choose from. Will try to pick the best one\u003C/p\u003E\u003Cp\u003E[EXC 03:31:16.055] KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003Cp\u003E[LOG 03:31:21.547] Sending data to vessel comms. 1 devices to choose from. Will try to pick the best one\u003C/p\u003E\u003Cp\u003E[EXC 03:31:21.549] KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003Cp\u003EIn this case, I hit Transmit, and when it did nothing, waited five seconds and hit it again, when it once again did nothing (other than yarf up errors into the debug log). Pretty sure it\u0027s this mod, it\u0027s the exact same behavior the mod used to display when it was coughing up exceptions when you attempted to transmit data when too close to a flag, although no flags are nearby this time, and that bug was already patched.\u003C/p\u003E\u003Cp\u003EEDIT: Confirmed, same error occurs when no other mods are installed.\u003C/p\u003E\u003Cp\u003EEDIT2: Oops, I derped -- was looking in KSP_win, not KSP_win/KSP_data. In there I found \u0022output_log.txt\u0022, which is logging the stack traces quite nicely. Here\u0027s the stack trace from my latest attempt:\u003C/p\u003E\u003Cp\u003ENullReferenceException: Object reference not set to an instance of an object\u003C/p\u003E\u003Cp\u003E at AntennaRange.RelayDatabase.getVesselRelays (.Vessel vessel, System.Collections.Generic.Dictionary\u00602\u0026amp; relays) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.RelayDatabase.UpdateVessel (.Vessel vessel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.RelayDatabase.AddVessel (.Vessel vessel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.RelayDatabase.get_Item (.Vessel vessel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.Extensions.GetAntennaRelays (.Vessel vessel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Linq.Enumerable\u002B\u0026lt;CreateSelectManyIterator\u0026gt;c__Iterator12\u00602[Vessel,AntennaRange.IAntennaRelay].MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.List\u00601[AntennaRange.IAntennaRelay].AddEnumerable (IEnumerable\u00601 enumerable) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.List\u00601[AntennaRange.IAntennaRelay]..ctor (IEnumerable\u00601 collection) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Linq.Enumerable.ToList[iAntennaRelay] (IEnumerable\u00601 source) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.AntennaRelay.FindNearestRelay () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.AntennaRelay.get_transmitDistance () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.AntennaRelay.CanTransmit () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.ModuleLimitedDataTransmitter.CanTransmit () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.ModuleLimitedDataTransmitter.TransmitData (System.Collections.Generic.List\u00601 dataQueue) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at ModuleScienceExperiment.sendDataToComms (.ScienceData pageData) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at (wrapper delegate-invoke) Callback\u00601\u0026lt;ScienceData\u0026gt;:invoke_void__this___ScienceData (ScienceData)\u003C/p\u003E\u003Cp\u003E at ExperimentsResultDialog.drawWindowContent (Int32 id) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at UnityEngine.GUILayout\u002BLayoutedWindow.DoWindow (Int32 windowID) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at UnityEngine.GUI.CallWindowDelegate (UnityEngine.WindowFunction func, Int32 id, UnityEngine.GUISkin _skin, Int32 forceRect, Single width, Single height, UnityEngine.GUIStyle style) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003EInterestingly, same behavior, but different exception this time (NullReferenceException instead of KeyNotFoundException).\u003C/p\u003E\u003Cp\u003EEDIT3: And with a bit of further testing, I got the stack trace from the KeyNotFoundException:\u003C/p\u003E\u003Cp\u003EKeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.Dictionary\u00602[system.Guid,System.Int32].get_Item (Guid key) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.RelayDatabase.get_Item (.Vessel vessel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.Extensions.GetAntennaRelays (.Vessel vessel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Linq.Enumerable\u002B\u0026lt;CreateSelectManyIterator\u0026gt;c__Iterator12\u00602[Vessel,AntennaRange.IAntennaRelay].MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.List\u00601[AntennaRange.IAntennaRelay].AddEnumerable (IEnumerable\u00601 enumerable) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.List\u00601[AntennaRange.IAntennaRelay]..ctor (IEnumerable\u00601 collection) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Linq.Enumerable.ToList[iAntennaRelay] (IEnumerable\u00601 source) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.AntennaRelay.FindNearestRelay () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.AntennaRelay.get_transmitDistance () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.AntennaRelay.CanTransmit () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.ModuleLimitedDataTransmitter.CanTransmit () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at AntennaRange.ModuleLimitedDataTransmitter.TransmitData (System.Collections.Generic.List\u00601 dataQueue) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at ModuleScienceExperiment.sendDataToComms (.ScienceData pageData) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at (wrapper delegate-invoke) Callback\u00601\u0026lt;ScienceData\u0026gt;:invoke_void__this___ScienceData (ScienceData)\u003C/p\u003E\u003Cp\u003E at ExperimentsResultDialog.drawWindowContent (Int32 id) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at UnityEngine.GUILayout\u002BLayoutedWindow.DoWindow (Int32 windowID) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at UnityEngine.GUI.CallWindowDelegate (UnityEngine.WindowFunction func, Int32 id, UnityEngine.GUISkin _skin, Int32 forceRect, Single width, Single height, UnityEngine.GUIStyle style) [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-03T09:33:39Z\u0022 title=\u002204/03/2014 09:33  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 3, 2014\u003C/time\u003E by Gaius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-04-03T15:33:45Z","Content":"\n\u003Cp\u003E@Gaius: I\u0027ve sent you a PM for testing assistance. Thanks in advance!\u003C/p\u003E\u003Cp\u003E@malkuth: Thanks for the assist. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-04-05T03:01:23Z","Content":"\n\u003Cp\u003EIt\u0027s 0.23.5! Update time! Major version time! This update brings full 0.23.5 compatibility, solves the last big problem I\u0027m aware of around relaying, and improves relay search performance by several times.\u003C/p\u003E\u003Cp\u003ECHANGELOG:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ev.1.0.0 [2014-04-04]\u003Cbr\u003E* Recompiled against KSP 0.23.5 for compatibility.\u003Cbr\u003E* Major Surgery on relay-searching code to improve performance and reliability.\u003Cbr\u003E* Added new event-listeners to improve relay behavior around vessel-changing events like undocking.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"kiwiak","CreatedById":82796,"CreatedDateTime":"2014-04-05T06:52:41Z","Content":"\n\u003Cp\u003ECan someone make module manager file for aeis antennas?\u003C/p\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-04-05T14:45:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kiwiak\u0022 data-cite=\u0022kiwiak\u0022\u003E\u003Cdiv\u003ECan someone make module manager file for aeis antennas?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn a similar vein to MeCripp, let me (try to) teach a man to fish.\u003C/p\u003E\u003Cp\u003EAn AntennaRange entry in an MM file should look like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[\u0026lt;yourPartNameHere\u0026gt;]\u003Cbr\u003E@MODULE[ModuleDataTransmitter]\u003Cbr\u003E\t{\u003Cbr\u003E\t\t@name = ModuleLimitedDataTransmitter\u003Cbr\u003E\t\t// This is the distance from Kerbin and/or another relay at which the Antenna performs exactly as designed by AEIS/Squad/Whoever\u003Cbr\u003E\t\t// When outside this range, the power requirements will increase up to maxPowerFactor times.\u003Cbr\u003E\t\t// When inside this range, the data capacity will increase up to maxDataFactor times.\u003Cbr\u003E\t\tnominalRange = \u0026lt;your nominal range here\u0026gt;\u003Cbr\u003E\t\t// This is the maximum amount of power increase the antenna can do at long range.  In effect, this manipulates the maximum range.  MaximumRange = nominalRange * sqrt(maxPowerFactor)\u003Cbr\u003E\t\tmaxPowerFactor = 8 \u003Cbr\u003E\t\t// This is the maximum amount of data speedup the antenna will do at short range.  This will be reached at IdealDataRange = nominalRange / sqrt(maxDataFactor)\u003Cbr\u003E\t\t// Below this range the antenna will continue to function ideally.\u003Cbr\u003E\t\tmaxDataFactor = 4\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo, suppose you felt like the CommTech EXP-VR-2T should be useful within 2 AU, which would get you coverage throughout Kerbin, Eve, and Moho\u0027s orbits, and sometimes up to Duna (when it\u0027s not near opposition). That part would look like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[Antennaexpatvr2]\u003Cbr\u003E@MODULE[ModuleDataTransmitter]\u003Cbr\u003E\t{\u003Cbr\u003E\t\t@name = ModuleLimitedDataTransmitter\u003Cbr\u003E\t\t// This is the distance from Kerbin and/or another relay at which the Antenna performs exactly as designed by AEIS/Squad/Whoever\u003Cbr\u003E\t\t// When outside this range, the power requirements will increase up to maxPowerFactor times.\u003Cbr\u003E\t\t// When inside this range, the data capacity will increase up to maxDataFactor times.\u003Cbr\u003E\t\tnominalRange = 9616539270\u003Cbr\u003E\t\t// This is the maximum amount of power increase the antenna can do at long range.  In effect, this manipulates the maximum range.  MaximumRange = nominalRange * sqrt(maxPowerFactor)\u003Cbr\u003E\t\tmaxPowerFactor = 8\u003Cbr\u003E\t\t// This is the maximum amount of data speedup the antenna will do at short range.  This will be reached at IdealDataRange = nominalRange / sqrt(maxDataFactor)\u003Cbr\u003E\t\t// Below this range the antenna will continue to function ideally.\u003Cbr\u003E\t\tmaxDataFactor = 4\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHope that helps! If you do get a full set of configs done I\u0027d be interested to see them. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"johnnyboy76","CreatedById":7614,"CreatedDateTime":"2014-04-05T15:17:48Z","Content":"\n\u003Cp\u003EFor some reason, this mod breaks Simple Part Organizer, which I just can\u0027t play without...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ryNDLId.png?1\u0022 alt=\u0022ryNDLId.png?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt does exactly what the screenshot shows - the mods selection menu doesn\u0027t pop up. Here is the KSP log-\u0026gt; \u003Ca href=\u0022https://www.dropbox.com/s/te3bck4qpnjecqv/KSP.log\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/te3bck4qpnjecqv/KSP.log\u003C/a\u003E \u003C/p\u003E\u003Cp\u003EOh, and I declare myself former king of the lurkers.\u003C/p\u003E\u003Cp\u003E(Edit) \u003Ca href=\u0022https://www.dropbox.com/s/d76hianw453plsb/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/d76hianw453plsb/output_log.txt\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-05T15:22:03Z\u0022 title=\u002204/05/2014 03:22  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 5, 2014\u003C/time\u003E by johnnyboy76\u003C/strong\u003E\n\u003Cbr\u003EForgot the output log\n\u003C/span\u003E\n"},{"CreatedByName":"toadicus","CreatedById":67745,"CreatedDateTime":"2014-04-05T17:16:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022johnnyboy76\u0022 data-cite=\u0022johnnyboy76\u0022\u003E\u003Cdiv\u003EFor some reason, this mod breaks Simple Part Organizer, which I just can\u0027t play without...\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/ryNDLId.png?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/ryNDLId.png?1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt does exactly what the screenshot shows - the mods selection menu doesn\u0027t pop up. Here is the KSP log-\u0026gt; \u003Ca href=\u0022https://www.dropbox.com/s/te3bck4qpnjecqv/KSP.log\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/te3bck4qpnjecqv/KSP.log\u003C/a\u003E \u003C/p\u003E\u003Cp\u003EOh, and I declare myself former king of the lurkers.\u003C/p\u003E\u003Cp\u003E(Edit) \u003Ca href=\u0022https://www.dropbox.com/s/d76hianw453plsb/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/d76hianw453plsb/output_log.txt\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt looks like this is actually an issue with the way Simple Part Organizer fetches Module names. I\u0027ve given Felbourn a detailed report:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022toadicus\u0022 data-cite=\u0022toadicus\u0022\u003E\u003Cdiv\u003EFelbourn, I got an incompatibility report from one of my AntennaRange users, and it looks like the bug is maybe sorta on your end.\u003Cp\u003EIn looking at his log and through your code, I\u0027m pretty sure the issue is line 440, which trims the \u0022useful module name\u0022 out of, effectively, PartModule::ToString(). AntennaRange overrides ToString and includes no parentheses, so your Substring is looking from 0 to -1, which is Exceptional.\u003C/p\u003E\u003Cp\u003ESeems to me it would be easier and safer to use PartModule::moduleName, which should save you most of the trimming and avoid issues with modules that override ToString().\u003C/p\u003E\u003Cp\u003ELet me know if / how I can help!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"}]}