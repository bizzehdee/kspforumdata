{"TopicId":118430,"ForumId":36,"TopicTitle":"[1.1.2] B.R.O.K.E. - Beta 4 - 05/26/2016 - Now with gameplay!","CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-08-14T01:59:51Z","PageNum":3,"Articles":[{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2015-10-22T02:42:25Z","Content":"\u003E \n\u003E I wasn\u0027t even aware loans were implemented yet (I haven\u0027t worked on that code at all), nor am I aware of how to even take out a loan. That doesn\u0027t sound intentional though, so hopefully jkortech sees this and can confirm. Consider loans to be very WIP at the moment.\n\nThere is no UI for loans. Any way of issuing loans is by creating a plugin that interfaces with BROKE and creating a loan or reverse-engineering our use of the ConfigNode format for it to create one. There are some places where I don\u0027t do sanity checks, but I\u0027ll take a look.\n\n\u003E \n\u003E I believe loans are being handled as normal Invoices, in which case you don\u0027t pay them off separately. Negative numbers in the payment field currently are implemented as \u0022Pay the maximum possible\u0022. We should add the option to pay off some of the remaining balance on a loan above and beyond the required payment, so I\u0027ll make sure that\u0027s included somewhere. Loans will likely have their own GUI in addition to the main BROKE GUI.\n\nOne change I put in slightly changed this behavior and broke it a little. By entering a negative amount, you are able to withdraw revenue and not have it automatically go into expenses. It isn\u0027t documented, and I may have left out a logic check in there that enables this problem. I\u0027ll go fix that one quickly as well.\n\nEdit: These issues (not the lack of loan UI, but the logic bugs) have been fixed!\n\n**Edited \u003Ctime datetime=\u00222015-10-22T02:46:46Z\u0022 title=\u002210/22/2015 02:46  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 22, 2015\u003C/time\u003E by jkortech**"},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2015-11-20T22:51:52Z","Content":"Has anyone tested this with 1.0.5 yet? Should I do that or do you have an update coming, magico?"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-11-21T02:11:15Z","Content":"[quote name=\u0027theonegalen\u0027]Has anyone tested this with 1.0.5 yet? Should I do that or do you have an update coming, magico?[/QUOTE]  \n\nSorry, progress hasn\u0027t happened much lately so no new updates as of yet. I briefly tested a recompiled version against 1.0.5 and it was fine (in fact, nothing needed fixed), but I had issues with my other mods when using the old ones. If you test it out and notice any issues let me know (log not necessary) and I\u0027ll get a recompiled update out."},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-01-15T19:58:38Z","Content":"Tested in 1.0.5 as well, no errors found. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2016-01-17T04:28:55Z","Content":"It appears to be working in my game as well."},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2016-01-20T19:09:34Z","Content":"Continuing to play with BROKE, it seems the most difficult part is going to be balancing contract rewards, government funding, and salaries."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-01-20T20:04:12Z","Content":"\u003E \n\u003E \n\u003E 50 minutes ago, theonegalen said:\n\u003E \n\u003E \n\u003E Continuing to play with BROKE, it seems the most difficult part is going to be balancing contract rewards, government funding, and salaries.\n\u003E \n\nThere are several other Funding Modifiers I have planned that will take funds as well, so balance will end up being a goal for after those are written. It\u0027ll be especially difficult since you can disable or remove any Funding Modifier at any time without affecting the others. Also keep in mind the FMs shipped with BROKE are just the \u0022defaults\u0022 and I\u0027m hoping people will write their own.\n\nI haven\u0027t forgotten about this. I\u0027m working on a [small project for fun](http://jenkins.magico13.net/job/Terminus%20Life%20Support/) at the moment and will be focusing on BROKE after that (before switching back over to KCT/SR again). If I don\u0027t get it finished by 1.1 I\u0027ll be sad ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)"},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-01T06:41:04Z","Content":"I just put a little work into BROKE earlier today to add a punishment for unpaid payroll. (and fix some bugs in the BROKE core)\n\nI\u0027ll work on a loan UI next."},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-02-01T09:06:23Z","Content":"Will be looking for it so stick it in the game and see if it blows up ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Probus","CreatedById":102512,"CreatedDateTime":"2016-02-01T16:58:17Z","Content":"[@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) is it possible to configure this mod so that the amount paid to the KSC is variable dependent on date?  I am working on a historical tech tree and I was thinking it would be cool if I could integrate NASA\u0027s budget for each year/quarter."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-02-01T17:58:38Z","Content":"\u003E \n\u003E \n\u003E 53 minutes ago, Probus said:\n\u003E \n\u003E \n\u003E [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) is it possible to configure this mod so that the amount paid to the KSC is variable dependent on date?  I am working on a historical tech tree and I was thinking it would be cool if I could integrate NASA\u0027s budget for each year/quarter.\n\u003E \n\nThe default Funding Modifiers don\u0027t have a way to configure it like that, but you could pretty easily write a custom Funding Modifier to do that. You\u0027d just have to set up the ProcessQuarterly and/or ProcessYearly to give how ever many funds you should get at that time.\n\n    public InvoiceItem ProcessQuarterly()\n    {double QuarterlyBudget = NASABudgetForUT(Planetarium.GetUniversalTime());var invoice = new InvoiceItem(this, QuarterlyBudget, 0);return invoice;\n    }\n    \n    public InvoiceItem ProcessYearly()\n    {double YearlyBudget = NASABudgetForUT(Planetarium.GetUniversalTime());var invoice = new InvoiceItem(this, YearlyBudget, 0);return invoice;\n    }"},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-02T02:36:40Z","Content":"Loans are implemented!  Now you can create general loan templates (which are turned into procedurally generated loans), take out loans, and pay them back over time."},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-02-02T02:43:23Z","Content":"Nice! Will grab it and start putting it through its paces as soon as the update link updates ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-02T02:44:39Z","Content":"Pull down the files from the CI server.  I don\u0027t think we\u0027re actually going to make another release quite yet."},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-02-02T03:30:44Z","Content":"hummm, well looks like won\u0027t be trying it so soon after all ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-02-06T04:29:44Z","Content":"[@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) the discussion over on the other thread reminded me about this. One FM I\u0027d love to see--and I think I may have mentioned this before on KCT\u0027s repo? Can\u0027t recall--is an upkeep cost based on the number of KCT upgrade points invested. That\u0027s because RP-0 effectively treats the point total as your space program workforce, and workers gotta be paid. That might, however, also require an ability in KCT to remove upgrade point. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Same with a general facility-tier based upkeep system.\n\nAnother good FM, and I\u0027m pinging [@Peppie23](https://forum.kerbalspaceprogram.com/index.php?/profile/111955-peppie23/) here, would be Remotetech groundstation upkeep costs. Now, that would ideally require an ability in RemoteTech to purchase-unlock new groundstations, which IIRC has been planned for a while but is not, AIUI, done yet?--since otherwise it would just be a fixed cost per year for everybody. Or until that point, maybe base RT stations available on tracking station level, and the FM base on that. I am reminded of that because I love the idea discussed in the OP of simulating real life\u0027s \u0022dish time\u0022 issues and the expense of continuing a mission based off DSN use. That said, I think that the dish time concern needs a counterpart: capcom time, as it were. Human spaceflight missions require far more in the way of communications (and other groundside support) than uncrewed missions, and that should be reflected in the mission costs."},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-06T20:58:09Z","Content":"\u003E \n\u003E \n\u003E 16 hours ago, NathanKell said:\n\u003E \n\u003E \n\u003E [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) the discussion over on the other thread reminded me about this. One FM I\u0027d love to see--and I think I may have mentioned this before on KCT\u0027s repo? Can\u0027t recall--is an upkeep cost based on the number of KCT upgrade points invested. That\u0027s because RP-0 effectively treats the point total as your space program workforce, and workers gotta be paid. That might, however, also require an ability in KCT to remove upgrade point. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Same with a general facility-tier based upkeep system.\n\u003E \n\nI was thinking of the same type of thing.  I\u0027m all up for adding this, but since KCT is all [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) and he works on this mod as well, I want his feedback before I code it."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-02-06T22:26:41Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, jkortech said:\n\u003E \n\u003E \n\u003E I was thinking of the same type of thing.  I\u0027m all up for adding this, but since KCT is all [@magico13](https://forum.kerbalspaceprogram.com/index.php?/profile/73338-magico13/) and he works on this mod as well, I want his feedback before I code it.\n\u003E \n\nI think it\u0027d be better to wait until KCT\u0027s API gets written, but I\u0027m not really sure when that\u0027s going to end up happening. If you want to do it now, all you should need to grab is the result from KCT\\_Utilities.TotalUpgradePoints() (which is a \u0022public static int\u0022 [here](https://github.com/magico13/KCT/blob/master/Kerbal_Construction_Time/KCT_Utilities.cs#L2318), should be easy to execute through Reflection or directly).\n\nRather than including it in the BROKE default FMs, it might be better to include with KCT directly. That way if BROKE isn\u0027t installed it won\u0027t do anything, if KCT isn\u0027t installed then it won\u0027t do anything either (since it won\u0027t exist) but if the two are installed then it will work and you don\u0027t have to worry about any hard dependency issues. If it\u0027s included with BROKE then there might be dependency issues when BROKE tries to load it. Plus FMs are supposed to be packaged with the mod they integrate with, which is why the loader in BROKE was written the way it was.\n\n[@jkortech](https://forum.kerbalspaceprogram.com/index.php?/profile/146934-jkortech/) if you end up writing that, feel free to submit a PR to the KCT repo (preferably the \u0022development\u0022 branch) with the FM. I can tweak the build server to build it and package it with KCT automatically."},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-06T22:29:12Z","Content":"Ok.  FYI if/when I get a chance to do it, it\u0027ll be in a new dll because of the hard dependency on BROKE (since we have to use the interfaces)."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-02-06T22:46:26Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, jkortech said:\n\u003E \n\u003E \n\u003E Ok.  FYI if/when I get a chance to do it, it\u0027ll be in a new dll because of the hard dependency on BROKE (since we have to use the interfaces).\n\u003E \n\nSounds good. FMs should generally be their own dlls anyway for that reason (and to make them easy/safe to uninstall), though since no code in the file would be called without BROKE installed it actually shouldn\u0027t cause any issues if it were added to the main dll."},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-06T22:51:00Z","Content":"\u003E \n\u003E \n\u003E Just now, magico13 said:\n\u003E \n\u003E \n\u003E Sounds good. FMs should generally be their own dlls anyway for that reason (and to make them easy/safe to uninstall), though since no code in the file would be called without BROKE installed it actually shouldn\u0027t cause any issues if it were added to the main dll.\n\u003E \n\nActually, because it is implementing the interface on a type it actually causes the dll to fail to load correctly (with a TypeInitializationException) if BROKE isn\u0027t installed (or if it is loaded before BROKE loads).  I ran into that problem when working on the payroll updates.  [This commit](https://github.com/BROKE-KSP/BROKE/commit/0a1fd5523a0e7041c9241419bef350c882523445) shows what I had to add to fix the problem."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2016-02-06T22:54:15Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, jkortech said:\n\u003E \n\u003E \n\u003E Actually, because it is implementing the interface on a type it actually causes the dll to fail to load correctly (with a TypeInitializationException) if BROKE isn\u0027t installed (or if it is loaded before BROKE loads).  I ran into that problem when working on the payroll updates.  [This commit](https://github.com/BROKE-KSP/BROKE/commit/0a1fd5523a0e7041c9241419bef350c882523445) shows what I had to add to fix the problem.\n\u003E \n\nOh, that\u0027s annoying. Thank you for coming up with a fix for that (and everything else you\u0027ve been doing)! Though we should encourage keeping FMs as separate dlls if anyone asks."},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-06T22:55:42Z","Content":"\u003E \n\u003E \n\u003E Just now, magico13 said:\n\u003E \n\u003E \n\u003E Oh, that\u0027s annoying. Thank you for coming up with a fix for that (and everything else you\u0027ve been doing)! Though we should encourage keeping FMs as separate dlls if anyone asks.\n\u003E \n\nNot a problem!  Just had some free time and decided to get back to BROKE (now that EER v0.5 is out)."},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2016-02-12T03:09:38Z","Content":"It seems the update to MKS-Lite / UKS broke BROKE. After the update to MKS-Lite all kinds of sadness happened such as not being able to exit the research center. After sifting though one at a time I finally found the having either MKS-Lite or UKS (installed it for testing after finding the problem with MKS-Lite) and BROKE in at the same time resulted in the problem."},{"CreatedByName":"jkortech","CreatedById":146934,"CreatedDateTime":"2016-02-12T03:13:42Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, JeffreyCor said:\n\u003E \n\u003E \n\u003E It seems the update to MKS-Lite / UKS broke BROKE. After the update to MKS-Lite all kinds of sadness happened such as not being able to exit the research center. After sifting though one at a time I finally found the having either MKS-Lite or UKS (installed it for testing after finding the problem with MKS-Lite) and BROKE in at the same time resulted in the problem.\n\u003E \n\nCan you post a log file?  It\u0027ll make it a lot easier to figure out what happened."}]}