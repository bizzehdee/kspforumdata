{"TopicId":29185,"ForumId":34,"TopicTitle":"[0.20] Modular Fuel System 1.3/realistic fuels, reconfigurable fuel tanks and engines","CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-05-26T01:00:23Z","PageNum":7,"Articles":[{"CreatedByName":"8749236","CreatedById":27470,"CreatedDateTime":"2013-06-22T02:42:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erbmur\u0022 data-cite=\u0022erbmur\u0022\u003E\u003Cdiv\u003EMe again, sorry.\u003Cp\u003EI still don\u0027t quite get how this is supposed to work.\u003C/p\u003E\u003Cp\u003EUsing an FL-T400 tanks with an LV-909:\u003C/p\u003E\u003Cp\u003Estandard liquidfuel \u002B oxidizer, action group menu says 370 isp, mechjeb delta-v/engineer redux give 3663 delta-v\u003C/p\u003E\u003Cp\u003EliquidH2 \u002B LiquidOxygen, action group menu says 460 isp, which would lead me to believe that it would be a lot more efficient and therefore provide more delta-v, but mechjeb/engineering redux say 1481 delta-v\u003C/p\u003E\u003Cp\u003ESeriously, what is is i\u0027m missing with this mod?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo, First One you can burn at longer time..\u003C/p\u003E\u003Cp\u003ESecond one you don\u0027t... Thats my interpretation.. Assuming Isp are all the same.. but apparently they are not =P\u003C/p\u003E\n"},{"CreatedByName":"SchroedingersHat","CreatedById":60782,"CreatedDateTime":"2013-06-22T10:13:09Z","Content":"\n\u003Cp\u003E@erbmur the idea is that the H2 is much lighter, but has better fuel efficiency. So a tank of the same \u003Cem\u003Emass\u003C/em\u003E will give you much more delta-v. A tank of the same \u003Cem\u003Evolume\u003C/em\u003E will be much lighter and will probably give you less delta-v. In effect it means you can make a bigger rocket which weighs the same but has more delta-v. You can also use the less powerful but more efficient of the larger engines to squeeze out a bit more because your rocket is lighter.\u003C/p\u003E\u003Cp\u003EThe usual strategy in real life (if you\u0027re using H2) is to use a mix. The first stage will be low isp but high density fuel (so you don\u0027t have as much bulk and air resistance), but you can save a lot of weight in your upper stages by using the light H2 (and bulk doesn\u0027t matter as much because the upper stage and payload is light anyway), this in turn makes your first stage much lighter because it doesn\u0027t carry as much.\u003C/p\u003E\u003Cp\u003EAnother strategy is to use solid rockets as your dense, less efficient lower stage (this is effectively what the space shuttle did except it burned hydrogen from launch as well because the upper stage engines are already there and pointing in the right direction). Sometimes there\u0027s even a combination of all three fuel types.\u003C/p\u003E\u003Cp\u003EThis being said, there are some bugs in the current (previous?) release which mean that changing the fuel of an engine using the GUI gives odd results (either gives you 3x the delta-v you should have or 1/3rd depending on the motor)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-22T10:16:04Z\u0022 title=\u002206/22/2013 10:16  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 22, 2013\u003C/time\u003E by SchroedingersHat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-22T10:32:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CaptainArbitrary\u0022 data-cite=\u0022CaptainArbitrary\u0022\u003E\u003Cdiv\u003ETo parse this, start by setting the tank\u0027s remaining usable volume to its total volume, obviously. In this example, I\u0027m gonna say that\u0027s 3000 liters, just to pick a round number.\u003Cp\u003ENow iterate over the \u0022TANK\u0022 nodes. For each one of type \u0022fixed,\u0022 divide the maxAmount by the utilization and subtract that from the remaining usable volume. In pseudocode:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EremainingVolume = volume\u003Cbr\u003Eforeach tank {\u003Cbr\u003E\tif tank is fixed {\u003Cbr\u003E\t\tremainingVolume -= tank.maxAmount / tank.utilization\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EJust to walk through that, in this case we\u0027d start out with a volume of 3000 liters, then subtract 10.0 \u00C3\u0192\u00C2\u00B7 0.9 from it (2988.8), then subtract 1.0 \u00C3\u0192\u00C2\u00B7 0.9 (2987.7), then subtract 200.0 \u00C3\u0192\u00C2\u00B7 0.85, leaving us with about 2752.5 of remaining volume.\u003C/p\u003E\u003Cp\u003EThen we iterate again, looking this time at the proportional tanks. For each one, take the remaining usable volume, multiply it by the amount (which is a fraction less than or equal to one), then multiply by the utilization.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eforeach tank {\u003Cbr\u003E\tif tank is proportional {\u003Cbr\u003E\t\ttank.maxAmount = remainingVolume * tank.maxAmount * tank.utilization\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHere we have two proportional tanks, RP1 and LOX. For RP1, that\u0027d be 2752.5 liters \u00C3\u0192\u00E2\u20AC\u201D 0.35 \u00C3\u0192\u00E2\u20AC\u201D 0.85, or about 818.9 liters. For LOX, it\u0027s 2752.5 liters \u00C3\u0192\u00E2\u20AC\u201D 0.65 \u00C3\u0192\u00E2\u20AC\u201D 0.80, or 1431.3 liters.\u003C/p\u003E\u003Cp\u003EIf we add it all up to check our work, we have the 10 liters of O\u00C3\u00A2\u00E2\u20AC\u0161\u00E2\u20AC\u0161, the liter of CO\u00C3\u00A2\u00E2\u20AC\u0161\u00E2\u20AC\u0161, 200 liters of hydrazine, 818.9 liters of RP1 and 1431.3 liters of LOX, all of which come to a total of 2461.2 liters, giving us an \u003Cem\u003Eoverall\u003C/em\u003E utilization fraction of 82.04%, which is right on the money.\u003C/p\u003E\u003Cp\u003ENow, just to reiterate, \u003Cem\u003Ethis is only a suggestion.\u003C/em\u003E I think this would be an easy-to-use, (relatively) easy-to-code and pretty darned flexible system for allocating tank volume. It wouldn\u0027t be \u003Cem\u003Eway\u003C/em\u003E better than what you have now, but I think it\u0027d be better, and if I\u0027m suggesting you need to open up the patient anyway, \u0027cause of my aforementioned bug, then I think changes along these lines might be worth considering.\u003C/p\u003E\u003Cp\u003EBottom line, though? Spectacular mod, as always, and thanks very much for it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENote: The method you described will NOT give the expected results if you have different utilization factors. But, since I already have the correct formula built into the \u0027configure for engines\u0027 code, there\u0027s no reason not to just reuse that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EHere\u0027s what I\u0027m doing for the next version:\u003C/p\u003E\u003Cp\u003E1. \u0022efficiency\u0022 will be changed to \u0022utilization\u0022 (I like this better, I just couldn\u0027t find the right term when I was writing the mod)\u003C/p\u003E\u003Cp\u003E2. this syntax:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t{\u003Cbr\u003E\t   name = LiquidH2\u003Cbr\u003E\t   efficiency = 0.99\u003Cbr\u003E\t   mass = 0.0\u003Cbr\u003E\t   temperature = -253\u003Cbr\u003E\t   loss_rate = 0.0000000002\u003Cbr\u003E\t   amount = 0.73 * volume\u003Cbr\u003E\t   maxAmount = 0.73 * volume\u003Cbr\u003E\t   note = (requires insulation)\u003Cbr\u003E\t} \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewill change to this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t{\u003Cbr\u003E\t   name = LiquidH2\u003Cbr\u003E\t   utilization = 0.99\u003Cbr\u003E\t   mass = 0.0\u003Cbr\u003E\t   temperature = -253\u003Cbr\u003E\t   loss_rate = 0.0000000002\u003Cbr\u003E\t   amount = full\u003Cbr\u003E\t   maxAmount = 73%\u003Cbr\u003E\t   note = (requires insulation)\u003Cbr\u003E\t} \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E3. All tank definitions with a \u0027%\u0027 in their maxAmount will be processed AFTER all tank definitions with a static maxAmount.\u003C/p\u003E\u003Cp\u003E4. amount will no longer take proportional values. It\u0027s either a static value, 0, or the word \u0022full\u0022. Anything else is semantically ambiguous.\u003C/p\u003E\n"},{"CreatedByName":"CaptainArbitrary","CreatedById":28110,"CreatedDateTime":"2013-06-22T11:54:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ialdabaoth\u0022 data-cite=\u0022ialdabaoth\u0022\u003E\u003Cdiv\u003ENote: The method you described will NOT give the expected results if you have different utilization factors.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EReally? Darn. I must have missed something when I was doing the arithmetic. Sorry about that. I should\u0027ve pounded on it more before posting my suggestion.\u003C/p\u003E\u003Cp\u003EIn any case, regarding the other changes you\u0027re going to make, thank you \u003Cem\u003Eso\u003C/em\u003E much. That\u0027s awesome, and I\u0027m really looking forward to what comes next. Your mods are on my relatively short list of won\u0027t-play-without.\u003C/p\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-22T12:58:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CaptainArbitrary\u0022 data-cite=\u0022CaptainArbitrary\u0022\u003E\u003Cdiv\u003EReally? Darn. I must have missed something when I was doing the arithmetic. Sorry about that. I should\u0027ve pounded on it more before posting my suggestion.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s all good - here\u0027s the reason why, if you\u0027re curious.\u003C/p\u003E\u003Cp\u003ELet\u0027s say I want a 27% LOX / 73% LH2 mix.\u003C/p\u003E\u003Cp\u003ELet\u0027s say that for this tank, LOX has 0.9 Utilization and LH2 has 0.8, and my available volume for the mix is 1000.\u003C/p\u003E\u003Cp\u003E1000 * 0.27 * 0.9 = 243\u003C/p\u003E\u003Cp\u003E1000 * 0.73 * 0.8 = 584\u003C/p\u003E\u003Cp\u003Ethat\u0027s 827 units of actual LOX\u002BLH2. note that 243/827 is 0.294, and 584 / 827 is 0.706; we do NOT have a 27%/73% ratio, and will wind up with about 65 volume worth of LH2 left over after our engine runs out of LOX.\u003C/p\u003E\n"},{"CreatedByName":"CaptainArbitrary","CreatedById":28110,"CreatedDateTime":"2013-06-22T13:08:44Z","Content":"\n\u003Cp\u003EOh! I see what you mean. The method I described gives you the \u0022right\u0022 answer, in that it gives you exactly what you asked for \u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6 but what you asked for in the method I described didn\u0027t add up to what you really wanted. Duh. I totally should\u0027ve thought of that. My blind spot is that I\u0027ve been thinking in terms of pretty simplistic tank construction, with either common or separate bulkheads that give an \u003Cem\u003Eoverall\u003C/em\u003E utilization fraction that\u0027s true of both bipropellants. It didn\u0027t occur to me that somebody might want to specify different utilizations for each of the two biprops. So of course, doing it your way is way better. Thanks for explaining.\u003C/p\u003E\n"},{"CreatedByName":"Astronomer","CreatedById":18673,"CreatedDateTime":"2013-06-22T13:17:33Z","Content":"\n\u003Cp\u003EI find it amusing how such interesting mods don\u0027t have screenshots or any pictures whatsoever on the original post.\u003C/p\u003E\n"},{"CreatedByName":"CaptainArbitrary","CreatedById":28110,"CreatedDateTime":"2013-06-22T13:19:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Astronomer\u0022 data-cite=\u0022Astronomer\u0022\u003E\u003Cdiv\u003EI find it amusing how such interesting mods don\u0027t have screenshots or any pictures whatsoever on the original post.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere really isn\u0027t anything to show a picture of here \u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6 unless it\u0027s a picture of a config file.\u003C/p\u003E\n"},{"CreatedByName":"MDBenson","CreatedById":65560,"CreatedDateTime":"2013-06-22T14:21:45Z","Content":"\n\u003Cp\u003EHi, I have been messing about with my own custom configs to try and formulate a variable burn rate segmental SRB (I cheated and made the fuel pump transferable, it seemed like the only way) and have tripped over a bug, I don\u0027t know if it\u0027s been mentioned, If I configure the engine to have 2 configs of fuel type with 2 different ISPs the ISPs are not being changed when I change engine config, and I believe they are supposed to? I checked on of the normal Rocketry engines which I checked in the config has different ISPs and they don\u0027t change between fuel configs either.\u003C/p\u003E\u003Cp\u003EThis mod is great, I really like it. Being able to use LH2/LO2 fuel is way more efficient than the default fuels (not to mention better for Kerbin\u0027s environment \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E) and I like how you can choose differnt fuels to give you different balances of thrust and ISP etc. (well, if the ISP worked \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E ) so you can tune each stage to get better performance.\u003C/p\u003E\u003Cp\u003EAlso, something else that sprung to mind is is it worth introducing some kind of tank barrier penalty, so that when you have more than one tank per fuel module it loses you a small percentage of the volume (realistic, as you\u0027d have to close one tank, fit a structural bulkhead of some kind and start another) It gets a little complex when you look at it as you;d have to take into account how many tanks the original module had installed (generally 2) and then take into account if you would lose or gain from your new config, for e.g. if you went from a single tank to 2 tanks in the module you;d lose abit of volume, but if you went from a default 2 tanks to 1 tank in the module you\u0027d gain a little bit etc. Just a thought that shot into my head \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EKeep up the good work \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-22T14:28:18Z\u0022 title=\u002206/22/2013 02:28  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 22, 2013\u003C/time\u003E by MDBenson\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cardajowol","CreatedById":71101,"CreatedDateTime":"2013-06-22T15:49:08Z","Content":"\n\u003Cp\u003EI believe the ISP issue has been seen... I believe its being looked at but I wasn\u0027t to sure whether there has actually been a fix for it yet...\u003C/p\u003E\n"},{"CreatedByName":"bs1110101","CreatedById":58438,"CreatedDateTime":"2013-06-22T21:33:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u00228749236\u0022 data-cite=\u00228749236\u0022\u003E\u003Cdiv\u003EHelp!\u003Cp\u003EWhen I apply this mod to my game, My game freezes when loading into game..\u003C/p\u003E\u003Cp\u003EIf I remove it, game works fine...\u003C/p\u003E\u003Cp\u003EMods I have:\u003C/p\u003E\u003Cp\u003ERemoteTech\u003C/p\u003E\u003Cp\u003EKethane 5.1\u003C/p\u003E\u003Cp\u003EDummyWeight\u003C/p\u003E\u003Cp\u003EMechJeb2.0\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI got the same problem, the debug console said something about an error patching .cfg files.\u003C/p\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-23T14:07:42Z","Content":"\n\u003Cp\u003EUpdated! I think the delta-V problem has been solved. Confirm?\u003C/p\u003E\n"},{"CreatedByName":"Chestburster","CreatedById":69476,"CreatedDateTime":"2013-06-23T14:23:57Z","Content":"\n\u003Cp\u003EYay! Changelog aviable? Can\u0027t test 1.3 until im home tomorrow.\u003C/p\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-23T15:12:32Z","Content":"\n\u003Cp\u003EYep, added to FP.\u003C/p\u003E\n"},{"CreatedByName":"SchroedingersHat","CreatedById":60782,"CreatedDateTime":"2013-06-23T15:56:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ialdabaoth\u0022 data-cite=\u0022ialdabaoth\u0022\u003E\u003Cdiv\u003EUpdated! I think the delta-V problem has been solved. Confirm?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESeems to check out for me (didn\u0027t do any math except approximations in my head). Mechjeb is giving wholly coherent results which match the ratios of Isps reported, too.\u003C/p\u003E\u003Cp\u003ESide-thought for other users and whoever was curating cfgs (Chestburster?):\u003C/p\u003E\u003Cp\u003EHypergolic fuels and Mono-prop (change to hydrazine? Make H2O2 available as an oxidizer and monoprop? probably pick just one to avoid spammyness) for the smaller engines (ant, small rockomax, the 2 and 3 power AEIS engines etc)\u003C/p\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-23T16:01:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SchroedingersHat\u0022 data-cite=\u0022SchroedingersHat\u0022\u003E\u003Cdiv\u003ESeems to check out for me (didn\u0027t do any math except approximations in my head). Mechjeb is giving wholly coherent results which match the ratios of Isps reported, too.\u003Cp\u003ESide-thought for other users and whoever was curating cfgs (Chestburster?):\u003C/p\u003E\u003Cp\u003EHypergolic fuels and Mono-prop (change to hydrazine? Make H2O2 available as an oxidizer and monoprop? probably pick just one to avoid spammyness) for the smaller engines (ant, small rockomax, the 2 and 3 power AEIS engines etc)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E Unfortunately, I wasn\u0027t able to get RCS blocks to allow user-selectable fuels in the VAB.\u003C/p\u003E\u003Cp\u003EAlso: I\u0027m pretty sure \u0027Oxidizer\u0027 *is* H2O2, and MonoPropellant is actually HAN, not Hydrazine (Hydrazine can\u0027t get 260 isp).\u003C/p\u003E\u003Cp\u003EI had tried to allow Oxidizer as a selectable monopropellant at 190 isp, but alas, it was not to be.\u003C/p\u003E\n"},{"CreatedByName":"CaptainArbitrary","CreatedById":28110,"CreatedDateTime":"2013-06-23T16:26:59Z","Content":"\n\u003Cp\u003EThe new version is working well for me so far. I haven\u0027t really beat it up yet, but so far no complaints. Getting the Isp-reporting thing fixed is a real win, so thanks for that.\u003C/p\u003E\u003Cp\u003EI have a suggestion, though. In ModularEngines.cs, if you add a SetConfiguration call to the end of OnLoad, the module will apply whichever config is specified under \u0022configuration\u0022 in the config file, if any, \u003Cem\u003Eat load time,\u003C/em\u003E so it gets reported correctly in the VAB GUI. Specifically:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EModularEngines.cs\u003Cbr\u003E292,294d291\u003Cbr\u003E\u0026lt; \u003Cbr\u003E\u0026lt; \t\t\tif (!configuration.Equals(\u0022\u0022))\u003Cbr\u003E\u0026lt; \t\t\t\tSetConfiguration (configuration);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis let me take my override file for the stock LV-T45 from this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[liquidEngine2]:Final\u003Cbr\u003E{\u003Cbr\u003E\t@mass = 1.457\u003Cbr\u003E\t@MODULE[ModuleEngines]\u003Cbr\u003E\t{\u003Cbr\u003E\t\t@maxThrust = 200\u003Cbr\u003E\t\t@heatProduction = 200\u003Cbr\u003E\t\t@PROPELLANT[LiquidFuel]\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@name = RP1\u003Cbr\u003E\t\t\t@ratio = 0.35\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t@PROPELLANT[Oxidizer]\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@name = LOX\u003Cbr\u003E\t\t\t@ratio = 0.65\u003Cbr\u003E\t\t\tDrawGauge = True\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t@atmosphereCurve\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@key,0 = 0 370\u003Cbr\u003E\t\t\t@key,1 = 1 300\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleEngineConfigs\u003Cbr\u003E\t\tconfiguration = RP1/LOX\u003Cbr\u003E\t\tCONFIG\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tname = RP1/LOX\u003Cbr\u003E\t\t\tthrustVectorTransformName = thrustTransform\u003Cbr\u003E\t\t\texhaustDamage = True\u003Cbr\u003E\t\t\tignitionThreshold = 0.1\u003Cbr\u003E\t\t\tminThrust = 0\u003Cbr\u003E\t\t\tmaxThrust = 200\u003Cbr\u003E\t\t\theatProduction = 200\u003Cbr\u003E\t\t\tfxOffset = 0, 0, 0.574338\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = RP1\u003Cbr\u003E\t\t\t\tratio = 0.35\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = LOX\u003Cbr\u003E\t\t\t\tratio = 0.65\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tatmosphereCurve\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tkey = 0 370\u003Cbr\u003E\t\t\t\tkey = 1 300\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tCONFIG\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tname = LH2/LOX\u003Cbr\u003E\t\t\tthrustVectorTransformName = thrustTransform\u003Cbr\u003E\t\t\texhaustDamage = True\u003Cbr\u003E\t\t\tignitionThreshold = 0.1\u003Cbr\u003E\t\t\tminThrust = 0\u003Cbr\u003E\t\t\tmaxThrust = 200\u003Cbr\u003E\t\t\theatProduction = 200\u003Cbr\u003E\t\t\tfxOffset = 0, 0, 0.574338\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = LH2\u003Cbr\u003E\t\t\t\tratio = 0.73\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = LOX\u003Cbr\u003E\t\t\t\tratio = 0.27\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tatmosphereCurve\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tkey = 0 420\u003Cbr\u003E\t\t\t\tkey = 1 365\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Edown to this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[liquidEngine2]:Final\u003Cbr\u003E{\u003Cbr\u003E\t@mass = 1.457\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleEngineConfigs\u003Cbr\u003E\t\tconfiguration = RP1/LOX\u003Cbr\u003E\t\tCONFIG\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tname = RP1/LOX\u003Cbr\u003E\t\t\tthrustVectorTransformName = thrustTransform\u003Cbr\u003E\t\t\texhaustDamage = True\u003Cbr\u003E\t\t\tignitionThreshold = 0.1\u003Cbr\u003E\t\t\tminThrust = 0\u003Cbr\u003E\t\t\tmaxThrust = 200\u003Cbr\u003E\t\t\theatProduction = 200\u003Cbr\u003E\t\t\tfxOffset = 0, 0, 0.574338\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = RP1\u003Cbr\u003E\t\t\t\tratio = 0.35\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = LOX\u003Cbr\u003E\t\t\t\tratio = 0.65\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tatmosphereCurve\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tkey = 0 370\u003Cbr\u003E\t\t\t\tkey = 1 300\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tCONFIG\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tname = LH2/LOX\u003Cbr\u003E\t\t\tthrustVectorTransformName = thrustTransform\u003Cbr\u003E\t\t\texhaustDamage = True\u003Cbr\u003E\t\t\tignitionThreshold = 0.1\u003Cbr\u003E\t\t\tminThrust = 0\u003Cbr\u003E\t\t\tmaxThrust = 200\u003Cbr\u003E\t\t\theatProduction = 200\u003Cbr\u003E\t\t\tfxOffset = 0, 0, 0.574338\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = LH2\u003Cbr\u003E\t\t\t\tratio = 0.73\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tPROPELLANT\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = LOX\u003Cbr\u003E\t\t\t\tratio = 0.27\u003Cbr\u003E\t\t\t\tDrawGauge = True\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tatmosphereCurve\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tkey = 0 420\u003Cbr\u003E\t\t\t\tkey = 1 365\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"SchroedingersHat","CreatedById":60782,"CreatedDateTime":"2013-06-23T17:05:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ialdabaoth\u0022 data-cite=\u0022ialdabaoth\u0022\u003E\u003Cdiv\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E Unfortunately, I wasn\u0027t able to get RCS blocks to allow user-selectable fuels in the VAB.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was more thinking of going the other way (the smallest engines have liquidfuel removed as an option and can either run on H2O2 (or Oxidizer, it seems. I\u0027d always assumed it was some kind of nitrogen compound -- NTO as it turns out) or monoprop.\u003C/p\u003E\u003Cp\u003EThis was inspired by many of the KOSMOS modules which have integrated monoprop tanks and monoprop thrusters (in addition to rcs).\u003C/p\u003E\n"},{"CreatedByName":"erbmur","CreatedById":57112,"CreatedDateTime":"2013-06-23T17:40:00Z","Content":"\n\u003Cp\u003ELove the continued work on this mod!\u003C/p\u003E\u003Cp\u003EDoes this fix the issue that was occurring with the B9 Saber engines not having a menu appearing in the VAB/SPH and not being able to fill tanks to accommodate for their fuel ratio needs?\u003C/p\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-23T17:52:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erbmur\u0022 data-cite=\u0022erbmur\u0022\u003E\u003Cdiv\u003ELove the continued work on this mod!\u003Cp\u003EDoes this fix the issue that was occurring with the B9 Saber engines not having a menu appearing in the VAB/SPH and not being able to fill tanks to accommodate for their fuel ratio needs?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPartially. You get an option to fill with 100% LH2, but not an option to fill with LiquidOxygen, because it only sees the \u0027active\u0027 engine.\u003C/p\u003E\n"},{"CreatedByName":"erbmur","CreatedById":57112,"CreatedDateTime":"2013-06-23T19:16:25Z","Content":"\n\u003Cp\u003EWell, it\u0027s a start! Once again I just have to say that after I started using this mod i have really started to re-enjoy kerbal (if that is such a word?)\u003C/p\u003E\u003Cp\u003ETo anybody who may be having the same thoughts about the sabers as I am, I found a workaround where I just put any other rocket onto the end of the craft and and configure that to use the same fuels as the sabers, auto-fill the tanks accordingly, and then just replace the rocket.\u003C/p\u003E\n"},{"CreatedByName":"Chestburster","CreatedById":69476,"CreatedDateTime":"2013-06-23T19:18:50Z","Content":"\n\u003Cp\u003EJust add a different engine to get the option for the correct ratio. Or just add about 20% of your total tank volume as LOX since you need some LH2 for jet-mode anyway.\u003C/p\u003E\u003Cp\u003E@ialdaboth did you add some of my configs? So i can update the others and kick them out of the pack.\u003C/p\u003E\u003Cp\u003EI will work on a real-world config next, giving the engines and fuels proper values. Got some ideas in my head and can\u0027t wait to test them at home xD\u003C/p\u003E\n"},{"CreatedByName":"SchroedingersHat","CreatedById":60782,"CreatedDateTime":"2013-06-23T20:13:03Z","Content":"\n\u003Cp\u003ESpeaking of the SABER, it seems stupidly good in its air breathing configuration.\u003C/p\u003E\u003Cp\u003EI can\u0027t find much info on the real thing, but assuming it isn\u0027t running lean (my gut says no considering that the limiting factor is cooling air), I _think_ the H2/air ratio should be 2:8 (assuming I did all my maths right). I\u0027m also finding wildly conflicting figures on its Isp. Not only that but I\u0027m having trouble figuring out when people are talking about effective Isp (only considering fuel mass and treating intake substances as a boost to Isp rather than reaction mass) and when they are talking about Isp of all the mass flow.\u003C/p\u003E\u003Cp\u003EOn top of that I don\u0027t know if KSP considers IntakeAir as reaction mass or takes it into account with the high Isp ratings on the jet engines.\u003C/p\u003E\n"},{"CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-06-23T20:44:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SchroedingersHat\u0022 data-cite=\u0022SchroedingersHat\u0022\u003E\u003Cdiv\u003ESpeaking of the SABER, it seems stupidly good in its air breathing configuration.\u003Cp\u003EI can\u0027t find much info on the real thing, but assuming it isn\u0027t running lean (my gut says no considering that the limiting factor is cooling air), I _think_ the H2/air ratio should be 2:8 (assuming I did all my maths right). I\u0027m also finding wildly conflicting figures on its Isp. Not only that but I\u0027m having trouble figuring out when people are talking about effective Isp (only considering fuel mass and treating intake substances as a boost to Isp rather than reaction mass) and when they are talking about Isp of all the mass flow.\u003C/p\u003E\u003Cp\u003EOn top of that I don\u0027t know if KSP considers IntakeAir as reaction mass or takes it into account with the high Isp ratings on the jet engines.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt considers IntakeAir as reaction mass.\u003C/p\u003E\n"},{"CreatedByName":"SchroedingersHat","CreatedById":60782,"CreatedDateTime":"2013-06-23T21:07:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ialdabaoth\u0022 data-cite=\u0022ialdabaoth\u0022\u003E\u003Cdiv\u003EIt considers IntakeAir as reaction mass.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, I just found that out with some experiments. It seems that that means many of the numbers for air breathing engines are way off (i think the turbofan turns out pretty close as it\u0027s listed Isp is extremely low and it\u0027s fuel/intakeair ratio has too much fuel).\u003C/p\u003E\u003Cp\u003EIn that case, looking at the numbers I have for the SABER (hydrogen has a vacuum Isp of 460 and the effective Isp is quoted as 3600) it should have an Isp of 460 (maybe a bit less? I imagine the nozzle will be designed for vacuum) and a fuel (mass) ratio of 8:1 (in KSP\u0027s fuel units that\u0027d be closer 7:4). This seems a little off as it\u0027d mean it\u0027s running very rich. Something is still off -- maybe they\u0027re just inefficient in air? Makes sense given it\u0027s the very bleeding edge of engineering.\u003C/p\u003E\u003Cp\u003EEdit: I realize what\u0027s off. I\u0027m not accounting for the difference in exhaust velocity. If you\u0027re moving at mach 5 you\u0027d take off pretty close to half of your exhaust velocity because you\u0027re speeding the air that you use up by that much before pushing it in the other direction. That accounts for the factor of two I\u0027m missing from my original calculations.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:12:41Z\u0022 title=\u002206/23/2013 09:12  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by SchroedingersHat\u003C/strong\u003E\n\u003C/span\u003E\n"}]}