{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":47,"Articles":[{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T14:44:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EHeh, you are quick. Check the edit to my previous post for what I think is a more likely culprit.\u003Cp\u003EHaving said that, for KSP to save your data to the persistent file you must either:\u003C/p\u003E\u003Cp\u003Ea) Assign that field the KSPField attribute with persistent = true. Then keep this value updated as whatever value is in this field when OnSave is called will be saved. Any calculations done in OnSave will \u003Cem\u003Enot\u003C/em\u003E save with this method. (My biggest headache with KSPFields).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E Grab the data directly using node.GetValue() and node.SetValue() for loading and saving. This overrides KSP\u0027s automatic save/load of the KSPField. I prefer this method as I know exactly what is being loaded and saved.\u003C/p\u003E\u003Cp\u003EFor the first method, you are limited to certain data types. Notably double does not work, you have to use float.\u003C/p\u003E\u003Cp\u003EFor the second method, I only use strings and manually convert everything back and forth. It probably makes my save/load code more complex then it needs to be, but I know exactly what is going on this way.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell i\u0027m not even trying to make it persistent, as in saved with the game save, I just need the values that are defined in the part.cfg (or an override) to be made available to my PartModule when in Flight.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T15:01:33Z","Content":"\n\u003Cp\u003EIn that case, the straightforward way would be to get rid of the subnodes.\u003C/p\u003E\u003Cp\u003EWith the following module in your part.cfg (changed from your example):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E\tname = FlightDataRecorder\u003Cbr\u003E        foo = bar\u003Cbr\u003E        num = 42\u003Cbr\u003E        body = kerbin\u003Cbr\u003E        bodyval = 1.0\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen in your partmodue:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class FlightDataRecorder : PartModule\u003Cbr\u003E{\u003Cbr\u003E[KSPField, false, false] //persistent false, guiActive false\u003Cbr\u003Estring body;\u003Cbr\u003E[KSPField, false, false] //persistent false, guiActive false\u003Cbr\u003Efloat bodyval;\u003Cbr\u003E}\u003Cbr\u003Epublic void Update()\u003Cbr\u003E{\u003Cbr\u003Eprint(\u0022Test \u0022 \u002B body \u002B \u0022 \u0022 \u002B bodyval); //should print \u0022Test kerbin 1\u0022 to the log each update.\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis way loses you the flexibility of the sub-nodes, but anything that is given the KSPField attribute checks the part.cfg for it\u0027s default value. By setting persistent to false, it should never save back to the part definition and will always reset to default on load.\u003C/p\u003E\u003Cp\u003EIf you really want to use subnodes, you will need to look at putting the GetNode and SetNode commands into the OnLoad and OnSave routines as subnodes do not automatically load or save to the best of my knowledge.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T15:08:11Z","Content":"\n\u003Cp\u003EWell I really want the subnodes for flexibility \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E I\u0027d prefer not to hard code things like body names or else the mod won\u0027t work with mods that change those.\u003C/p\u003E\u003Cp\u003ESo I tried doing this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022FlightDataRecorder: OnLoad\u0022);\u003Cbr\u003E            print(\u0022FlightDataRecorder: \u0022 \u002B node.ToString());\u003Cbr\u003E            if (node.HasNode(\u0022BODY\u0022))\u003Cbr\u003E            {\u003Cbr\u003E                ConfigNode[] bodyNodes = node.GetNodes(\u0022BODY\u0022);\u003Cbr\u003E                foreach (ConfigNode bodyNode in bodyNodes)\u003Cbr\u003E                {\u003Cbr\u003E                    print(\u0022Found body \u0022 \u002B bodyNode.GetValue(\u0022name\u0022));\u003Cbr\u003E                    bodyValues.Add(bodyNode.GetValue(\u0022name\u0022), Convert.ToDouble(bodyNode.GetValue(\u0022value\u0022)));\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E            base.OnLoad(node);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public override void OnSave(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022FlightDataRecorder: onSave()\u0022);\u003Cbr\u003E            print(\u0022DUMPING BODY VALES\u0022);\u003Cbr\u003E            foreach (var key in bodyValues.Keys)\u003Cbr\u003E            {\u003Cbr\u003E                print(\u0022key:\u0022 \u002B key \u002B \u0022, value:\u0022 \u002B bodyValues[key]);\u003Cbr\u003E                ConfigNode bodyNode = node.AddNode(\u0022BODY\u0022);\u003Cbr\u003E                bodyNode.AddValue(\u0022name\u0022, key);\u003Cbr\u003E                bodyNode.AddValue(\u0022value\u0022, bodyValues[key]);\u003Cbr\u003E            }\u003Cbr\u003E            base.OnSave(node);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut it didn\u0027t make any difference. In fact from what I can see the OnSave() is being called BEFORE the OnLoad() when you add the part to a Vessel in the VAB. OnSave() gets called, but OnLoad() never does until you move into the Flight scene. So trying to keep the values from OnLoad is pointless.\u003C/p\u003E\u003Cp\u003ENothing I can figure to do will allow the values loaded from the part.cfg to make it through to an actual instance of my part \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T15:16:44Z\u0022 title=\u002207/18/2014 03:16  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by Agathorn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T15:41:17Z","Content":"\n\u003Cp\u003EIf I understand some of what i\u0027m reading in my research, it looks like i\u0027m going to have to build a custom class that can pack and unpack itself for KSPField.\u003C/p\u003E\u003Cp\u003ESurely someone has done this before though that is what is driving me batty.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T15:43:51Z","Content":"\n\u003Cp\u003EOkay, let\u0027s get really simple.\u003C/p\u003E\u003Cp\u003Epart.cfg\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003Ename = FlightDataRecorder\u003Cbr\u003EtestValue = 1.1\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EpartModule\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic class FlightDataRecorder : PartModule\u003Cbr\u003E{\u003Cbr\u003E[KSPField(isPersistant = false, guiActive = false)]\u003Cbr\u003Epublic float testValue = 0;\u003Cbr\u003Epublic override void OnLoad(ConfigNode node)\u003Cbr\u003E{\u003Cbr\u003E}\u003Cbr\u003Epublic override void OnSave(ConfigNode node)\u003Cbr\u003E{\u003Cbr\u003E}\u003Cbr\u003Epublic void Update()\u003Cbr\u003E{\u003Cbr\u003Eprint(\u0022Test \u0022 \u002B testValue);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EShould spam \u0022Test 1.1\u0022 to the log window every update pass. If it spams \u0022Test 0\u0022, that means the partModule can not find the value from the part.cfg.\u003C/p\u003E\u003Cp\u003EIf it does not, the config node is not setup correctly and you need to get that straightened out before trying to load data from it.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Added the empty OnSave and OnLoad calls. I\u0027m not sure those matter for just loading the default value, but better safe then sorry.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T15:53:37Z\u0022 title=\u002207/18/2014 03:53  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T22:11:30Z","Content":"\n\u003Cp\u003EOk your simple example works. Also whats with the Update() method vs the OnUpdate() method? I only knew about OnUpdate().\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T22:19:51Z","Content":"\n\u003Cp\u003EThey are the same as far as I know.\u003C/p\u003E\u003Cp\u003EThe example code I used way back when to get started used Update so that is what I keep using as it works.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Errr, I think I may have realized the problem.\u003C/p\u003E\u003Cp\u003EI don\u0027t think BODY is a valid node name, I\u0027m pretty sure you have to use Module.\u003C/p\u003E\u003Cp\u003ECan you try:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003Ename = FlightDataRecorder\u003Cbr\u003EtestValue = 1.1\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003Ename = Kerbin\u003Cbr\u003EtestValueKerbin = 1.4\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd then does this work in the part module:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EOnLoad\u003Cbr\u003E{\u003Cbr\u003EConfigNode testNode = node.GetNode(\u0022Kerbin\u0022);\u003Cbr\u003Estring testVal = node.GetValue(\u0022testValue\u0022);\u003Cbr\u003Estring testValKerbin = testNode.GetValue(\u0022testValueKerbin\u0022);\u003Cbr\u003Eprint(\u0022TEST \u0022 \u002B testVal \u002B \u0022 \u0022 \u002B testValKerbin);\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoes that print \u0022TEST 1.1 1.4\u0022 to the log window?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T22:26:07Z\u0022 title=\u002207/18/2014 10:26  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T22:22:02Z","Content":"\n\u003Cp\u003EOk well Update() actually seems to get called more often (OnUpdate only gets called in Flight scene).\u003C/p\u003E\u003Cp\u003EAnyway the basic example works, but now I still need to figure out how tt work with sub config nodes. I tried looking through NathanKells code in ModularFuels where he does use them, but there is so much other code there that I got lost.\u003C/p\u003E\n"},{"CreatedByName":"Olympic1","CreatedById":79730,"CreatedDateTime":"2014-07-19T01:23:09Z","Content":"\n\u003Cp\u003EI\u0027m almost ready with updating my mod, but I only need 1 more thing. I already have it working to active/deactive the struts via RMB while flying your craft, but now I want to add that function \u003Cstrong\u003EALSO for EVA\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#region Actions\u003Cbr\u003E\u003Cbr\u003E[KSPAction(\u0022Toggle\u0022)]\u003Cbr\u003E    public void ToggleStrut(KSPActionParam param)\u003Cbr\u003E    {\u003Cbr\u003E\tIsEnabled = !IsEnabled;\u003Cbr\u003E\tCheckHit();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E[KSPAction(\u0022Activate\u0022)]\u003Cbr\u003E    public void ActivateStrut(KSPActionParam param)\u003Cbr\u003E    {\u003Cbr\u003E\tthis.ActivateStrut();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E[KSPAction(\u0022Deactivate\u0022)]\u003Cbr\u003E    public void DeactivateStrut(KSPActionParam param)\u003Cbr\u003E    {\u003Cbr\u003E\tthis.DeactivateStrut();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E#endregion\u003Cbr\u003E\u003Cbr\u003E#region Events\u003Cbr\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Activate\u0022, active = true, guiActiveUnfocused = true, unfocusedRange = 2f)]\u003Cbr\u003Epublic void ActivateStrut()\u003Cbr\u003E{\u003Cbr\u003E\tIsEnabled = true;\u003Cbr\u003E\tCheckHit();\u003Cbr\u003E\tthis.Events[\u0022ActivateStrut\u0022].guiActiveEditor = false;\u003Cbr\u003E\tthis.Events[\u0022DeactivateStrut\u0022].guiActiveEditor = true;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Deactivate\u0022, active = false, guiActiveUnfocused = true, unfocusedRange = 2f)]\u003Cbr\u003Epublic void DeactivateStrut()\u003Cbr\u003E{\u003Cbr\u003E\tIsEnabled = false;\u003Cbr\u003E\tCheckHit();\u003Cbr\u003E\tthis.Events[\u0022ActivateStrut\u0022].guiActiveEditor = true;\u003Cbr\u003E\tthis.Events[\u0022DeactivateStrut\u0022].guiActiveEditor = false;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E#endregion\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDo I need to add \u0027\u003Cem\u003EexternalToEVAOnly = true\u003C/em\u003E\u0027 to do that or something else?\u003C/p\u003E\n"},{"CreatedByName":"tobyb121","CreatedById":76289,"CreatedDateTime":"2014-07-19T07:50:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Olympic1\u0022 data-cite=\u0022Olympic1\u0022\u003E\u003Cdiv\u003EI\u0027m almost ready with updating my mod, but I only need 1 more thing. I already have it working to active/deactive the struts via RMB while flying your craft, but now I want to add that function \u003Cstrong\u003EALSO for EVA\u003C/strong\u003E.\u003Cp\u003EDo I need to add \u0027\u003Cem\u003EexternalToEVAOnly = true\u003C/em\u003E\u0027 to do that or something else?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes adding externalToEVAOnly = true is what makes events usable in EVA, but EVA events are specific to EVA, you won\u0027t be able to use your event normally any more.\u003C/p\u003E\u003Cp\u003EThe way to fix this is to create a separate event for EVA only and call your original event from that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Deactivate\u0022, active = false, guiActiveUnfocused = true, unfocusedRange = 2f, externalToEVAOnly=true)]\u003Cbr\u003Epublic void EVADeactivateStrut()\u003Cbr\u003E{\u003Cbr\u003E   DeactivateStrut();\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIIRC unfocused range is the distance the Kerbal must be from the part to be able to trigger the EVA event.\u003C/p\u003E\n"},{"CreatedByName":"Olympic1","CreatedById":79730,"CreatedDateTime":"2014-07-19T10:44:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tobyb121\u0022 data-cite=\u0022tobyb121\u0022\u003E\u003Cdiv\u003EYes adding externalToEVAOnly = true is what makes events usable in EVA, but EVA events are specific to EVA, you won\u0027t be able to use your event normally any more.\u003Cp\u003EThe way to fix this is to create a separate event for EVA only and call your original event from that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Deactivate\u0022, active = false, guiActiveUnfocused = true, unfocusedRange = 2f, externalToEVAOnly=true)]\u003Cbr\u003Epublic void EVADeactivateStrut()\u003Cbr\u003E{\u003Cbr\u003E   DeactivateStrut();\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIIRC unfocused range is the distance the Kerbal must be from the part to be able to trigger the EVA event.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThx for the help, will add it now and test it.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-19T14:53:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agathorn\u0022 data-cite=\u0022Agathorn\u0022\u003E\u003Cdiv\u003EOk well Update() actually seems to get called more often (OnUpdate only gets called in Flight scene).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUpdate() is called by any Unity Monobehaviour class once every frame. OnUpdate() is a KSP thing that is called by part modules once every frame, but only if the part is activated; this is usually by staging or by forcing activation in your OnStart() method.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAnyway the basic example works, but now I still need to figure out how tt work with sub config nodes. I tried looking through NathanKells code in ModularFuels where he does use them, but there is so much other code there that I got lost.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve never tried this with KSPFields in a part module.\u003C/p\u003E\u003Cp\u003EYou might have to manually load the confignode in your OnLoad() method, bot not using the default ConfigNode.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E     public override void OnLoad(ConfigNode node)\u003Cbr\u003E     {\u003Cbr\u003E           foreach (ConfigNode part_node in GameDatabase.Instance.GetConfigNodes(\u0022Part\u0022))\u003Cbr\u003E           {\u003Cbr\u003E                if (part_node.GetValue(\u0022name\u0022) == \u0022your_part_name\u0022)\u003Cbr\u003E                {\u003Cbr\u003E                      ConfigNode[] body_node = part_node.GetNodes(\u0022BODY\u0022)\u003Cbr\u003E                      ...Do something with body_nodes...\u003Cbr\u003E                }\u003Cbr\u003E           }\u003Cbr\u003E     }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis would be for non-nested nodes, just BODY{} nodes within your part.cfg file, but you can just go down the chain of nodes if you want to nest them within the module node.\u003C/p\u003E\u003Cp\u003EAs far as I know any config node (which should include the PART{} that part.cfg files use) is added to GameDatabase, so you should be able to access it there. You could, alternatively, just stash your settings in a different config file, instead of adding it to the part.cfg file, the loading method would be the same. As for saving anything in those nodes, I\u0027m not so sure, but it sounds like that\u0027s not what you\u0027re trying to do.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-19T15:00:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tobyb121\u0022 data-cite=\u0022tobyb121\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPEvent(guiActive = true, guiName = \u0022Deactivate\u0022, active = false, guiActiveUnfocused = true, unfocusedRange = 2f, externalToEVAOnly=true)]\u003Cbr\u003Epublic void EVADeactivateStrut()\u003Cbr\u003E{\u003Cbr\u003E   DeactivateStrut();\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think you want to set guiActive = false and active = true. guiActive is what controls whether the button is visible when you right-click on it while controlling the vessel with the part on it. active is just the global activation setting (I think), so unless you\u0027re setting active = true somewhere else, which it looks like you might be doing, then this should be true.\u003C/p\u003E\u003Cp\u003EAnd also, you should only need one KSPEvent for both EVA activation and standard activation. The externalToEVAOnly just means that only an EVA Kerbal can activate the KSPEvent while the part is not on your current vessel, it doesn\u0027t prevent you from using the regular right-click mechanism.\u003C/p\u003E\u003Cp\u003ESo in that case you would want to set guiActive, guiActiveUnfocused, and externalToEVAOnly = true. This should give you a one method KSPEvent to control the function both while on the active vessel and while EVA.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-19T17:15:20Z\u0022 title=\u002207/19/2014 05:15  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 19, 2014\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-19T16:58:49Z","Content":"\n\u003Cp\u003EIt\u0027s a format Mu came up with. So no.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-21T23:26:52Z","Content":"\n\u003Cp\u003EHow would I tell if a Kerbil is near a part? Either EVA or on land, but I want to determine if the Kerbal being controlled is essentially able to touch the part, so that an action on the part can only be performed if they can touch it.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-22T00:49:04Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Efloat kerbalDistanceToPart = Vector3.Distance(kerbal.transform.position, targetPart.collider.ClosestPointOnBounds(kerbal.transform.position));\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewill return kerbalDistanceToPart as a number in meters between the center of mass of the kerbal and the closest edge of the part to the kerbal\u0027s center of mass..\u003C/p\u003E\u003Cp\u003ENote that a kerbal on EVA does not have a valid collider to do a .ClosestPointOnBounds to.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-22T01:26:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Efloat kerbalDistanceToPart = Vector3.Distance(kerbal.transform.position, targetPart.collider.ClosestPointOnBounds(kerbal.transform.position));\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewill return kerbalDistanceToPart as a number in meters between the center of mass of the kerbal and the closest edge of the part to the kerbal\u0027s center of mass..\u003C/p\u003E\u003Cp\u003ENote that a kerbal on EVA does not have a valid collider to do a .ClosestPointOnBounds to.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh very nice thank you. Even more help than I expected \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"neurotoxin","CreatedById":70873,"CreatedDateTime":"2014-07-22T03:40:28Z","Content":"\n\u003Cp\u003EOk so I guess I\u0027ll ask here. Was going to start a thread but I figured I\u0027d see what this was first.\u003C/p\u003E\u003Cp\u003EMy question is, how hard will it be learning C# coming from a background of java? I see many similarities in the two looking through other developers source codes and a I also see differences, obviously I\u0027m talking about syntax as the keywords are quite different. \u003C/p\u003E\u003Cp\u003ECan anyone point me to some decent resources that aren\u0027t aimed at beginner programmers but still cover a good portion of the c# basics using semi-advanced concepts?\u003C/p\u003E\u003Cp\u003ELastly, should I be focusing on learning the .net framework or is plugging into KSP not going to require a strong knowledge of it? Pre-thanks for any answers.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-22T03:54:15Z","Content":"\n\u003Cp\u003EProgramming is programming. If you truly understand the fundamentals than learning another language is trivial. Its learning the KSP API that is the cumbersome part, especially with essentially zero documentation. Java and C# are extremely similar and won\u0027t take much of a leap.\u003C/p\u003E\n"},{"CreatedByName":"neurotoxin","CreatedById":70873,"CreatedDateTime":"2014-07-22T04:13:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agathorn\u0022 data-cite=\u0022Agathorn\u0022\u003E\u003Cdiv\u003EProgramming is programming. If you truly understand the fundamentals than learning another language is trivial. Its learning the KSP API that is the cumbersome part, especially with essentially zero documentation. Java and C# are extremely similar and won\u0027t take much of a leap.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I kind of figured that seeing as I can READ other\u0027s code decently. The issue I\u0027m worried about is adapting to the few differences, like keywords. Actually, googling around a bit has waylaid some of my fears on syntax, I guess some of the differences I saw were just different modder\u0027s preferences (like using do while loops rather than while {//do stuff}).\u003C/p\u003E\u003Cp\u003EYeah, considering that, I\u0027ll just jump in and try it. Time to get used to Visual Studio, probably the most daunting part of all this, learning a new IDE. It\u0027s like a new pair of shoes, the old one is all broken in and comfy and you feel bad leaving them. Haha.\u003C/p\u003E\n"},{"CreatedByName":"TheAlmightyOS","CreatedById":105590,"CreatedDateTime":"2014-07-22T21:02:39Z","Content":"\n\u003Cp\u003Eah, great! people are talking about programming/scripting in KSP! Exactly what I was going to ask about!\u003C/p\u003E\u003Cp\u003EMy questions (forgive if they have been answered already):\u003C/p\u003E\u003Cp\u003E1: Is there a Wiki / Documentation for making scripts in KSP?\u003C/p\u003E\u003Cp\u003E2: Can you place a script in a part.cfg file to be activated when the part is? (ex, run script when engine activates)\u003C/p\u003E\u003Cp\u003EThanks!!\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-22T21:39:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022neurotoxin\u0022 data-cite=\u0022neurotoxin\u0022\u003E\u003Cdiv\u003Esome of the differences I saw were just different modder\u0027s preferences (like using do while loops rather than while {//do stuff}).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u0022do-while\u0022 and \u0022while\u0022 loops are not just preference. They work differently.\u003C/p\u003E\n"},{"CreatedByName":"neurotoxin","CreatedById":70873,"CreatedDateTime":"2014-07-23T21:45:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003E\u0022do-while\u0022 and \u0022while\u0022 loops are not just preference. They work differently.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERight you are. Thanks for pointing me to learn something new. The books I taught myself with didn\u0027t cover do-while loops or the difference. Thanks for correcting that and not letting it just drift away, I appreciate a learning opportunity.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheAlmightyOS\u0022 data-cite=\u0022TheAlmightyOS\u0022\u003E\u003Cdiv\u003Eah, great! people are talking about programming/scripting in KSP! Exactly what I was going to ask about!\u003Cp\u003EMy questions (forgive if they have been answered already):\u003C/p\u003E\u003Cp\u003E1: Is there a Wiki / Documentation for making scripts in KSP?\u003C/p\u003E\u003Cp\u003E2: Can you place a script in a part.cfg file to be activated when the part is? (ex, run script when engine activates)\u003C/p\u003E\u003Cp\u003EThanks!!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe best documentation I\u0027ve been able to find is:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Category:Community_API_Documentation\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Category:Community_API_Documentation\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/Anatid/XML-Documentation-for-the-KSP-API\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Anatid/XML-Documentation-for-the-KSP-API\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know exactly how up to date either of those resources are but they seem to give a good stepping off point.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-23T23:42:22Z","Content":"\n\u003Cp\u003EHow would I go about getting the mission elapsed time (MET) in a PartModule\u0027s OnUpdate?\u003C/p\u003E\n"},{"CreatedByName":"Alex P","CreatedById":72376,"CreatedDateTime":"2014-07-24T00:57:00Z","Content":"\n\u003Cp\u003EHow can I put variables in the partmodule in the .cfg file and then read them in the plugin partmodule?\u003C/p\u003E\n"}]}