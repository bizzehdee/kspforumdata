{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":52,"Articles":[{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-09-03T19:31:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003ENote that the file must exist and cannot be empty. Trying to load an empty file this way will throw and error and TWR1Node will be null.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is actually a contradiction. ConfigNode.Load() does not throw exceptions, it just returns null if the file does not exist.\u003C/p\u003E\n"},{"CreatedByName":"Malah","CreatedById":96644,"CreatedDateTime":"2014-09-03T19:36:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003E@Malah, I think you can change the status of a ship in the tracking station with \u003Cem\u003Evessel.DiscoveryInfo.SetLevel(DiscoveryLevels.xxx)\u003C/em\u003E;\u003Cp\u003EI don\u0027t think it will disable the \u0022Recover\u0022 button in flight, though.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks Lilleman, but i want to disable \u0022Recover\u0022 button in flight \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E (i\u0027ve try your solution and as you say, that doesn\u0027t work in flight).\u003C/p\u003E\u003Cp\u003EI\u0027ve try to use ScreenSafeUIButton.Lock (); as we can see it in the private void at VesselRecoveryButton.setUnlock() but it seem that doesn\u0027t work as this.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-03T19:56:41Z\u0022 title=\u002209/03/2014 07:56  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 3, 2014\u003C/time\u003E by Malah\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"scottpaladin","CreatedById":112022,"CreatedDateTime":"2014-09-04T01:39:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EOnVesselRecoveryRequested happens during the flight scene when you push the green recovery button. OnVesselRecovered happens after the R\u0026amp;D center does all of its processing on the vessel\u0027s science and part values. \u003Cp\u003EOnVesselRecoveryProcessing is what you want. The problem is that this is also when the R\u0026amp;D center does its thing (the crew stuff might happen elsewhere, but I\u0027m pretty sure the MissionRecoveryDialog must pass through the R\u0026amp;D center at some point); I\u0027m not sure that there is any way to force your code to run before the R\u0026amp;D center\u0027s code, so it will be tricky to get your stuff to be counted in the mission recovery dialog. \u003C/p\u003E\u003Cp\u003EYou can, of course, reset the frozen Kerbals\u0027 status manually so that they will be available for the next mission, but they probably won\u0027t show up in the dialog, and you would have to manually add in rep for successfully recovering them (you might also need to watch out for losing rep when you set your Kerbals to \u0022dead\u0022).\u003C/p\u003E\u003Cp\u003EEdit: The crew recovery stuff probably happens in the Reputation scenario module, which is also where you can manually add in more rep.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks this is very helpful. I don\u0027t mind manually changing the kerbal status and adding reputation (and them not showing in the dialog, at least to start with). My big sticking point at the moment is how to read the KSPfield in the partmodule when i\u0027m working with a protovessel rather than a vessel. If I can get the field from the part, I feel like I can adjust the other stuff myself.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-09-04T02:22:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022scottpaladin\u0022 data-cite=\u0022scottpaladin\u0022\u003E\u003Cdiv\u003EThanks this is very helpful. I don\u0027t mind manually changing the kerbal status and adding reputation (and them not showing in the dialog, at least to start with). My big sticking point at the moment is how to read the KSPfield in the partmodule when i\u0027m working with a protovessel rather than a vessel. If I can get the field from the part, I feel like I can adjust the other stuff myself.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EProtoVessel =\u0026gt; ProtoPartSnapshot =\u0026gt; ProtoPartModuleSnapshot =\u0026gt; ConfigNode = ProtoPartModuleSnapshot.moduleValues =\u0026gt; ConfigNode.GetValue(\u0022nameOfYourField\u0022)\u003C/p\u003E\n"},{"CreatedByName":"scottpaladin","CreatedById":112022,"CreatedDateTime":"2014-09-04T04:08:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EProtoVessel =\u0026gt; ProtoPartSnapshot =\u0026gt; ProtoPartModuleSnapshot =\u0026gt; ConfigNode = ProtoPartModuleSnapshot.moduleValues =\u0026gt; ConfigNode.GetValue(\u0022nameOfYourField\u0022)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe freaking confignode, of course. Now to iterate my added event and maybe prevent some kerbals from getting mulched by the recovery team.\u003C/p\u003E\u003Cp\u003EEdit: \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://i.imgur.com/Pk8EZLI.png\u0022 alt=\u0022Pk8EZLI.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EBob is thankful of you for helping keep him from the mulcher.\u003C/p\u003E\u003Cp\u003EEnded up using onvesselrecovered for this, although I think onVesselRecoveryProcessing would work as well and I may move it to that event later. In case it\u0027ll help anyone down the road here\u0027s the bit that does the job. (is it weird that I feel a twinge of a strange emotion showing code I wrote to the internet for the first time?)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        \u003Cbr\u003E             public void onVesselRecovered(ProtoVessel vessel)        \u003Cbr\u003E            {\u003Cbr\u003E            List\u0026lt;ProtoPartSnapshot\u0026gt; partList = vessel.protoPartSnapshots;\u003Cbr\u003E            foreach (ProtoPartSnapshot a in partList)\u003Cbr\u003E            {\u003Cbr\u003E                List\u0026lt;ProtoPartModuleSnapshot\u0026gt; modules = a.modules;\u003Cbr\u003E                foreach (ProtoPartModuleSnapshot module in modules)\u003Cbr\u003E                {\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E                    if (module.moduleName == \u0022DeepFreezer\u0022)\u003Cbr\u003E                    {\u003Cbr\u003E                        ConfigNode node = module.moduleValues;\u003Cbr\u003E                        string FrozenCrew = node.GetValue(\u0022FrozenCrew\u0022);\u003Cbr\u003E                        ThawFrozenCrew(FrozenCrew);\u003Cbr\u003E                    }\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E        public void ThawFrozenCrew(String FrozenCrew)\u003Cbr\u003E        {\u003Cbr\u003E            List\u0026lt;String\u0026gt; StoredCrew = FrozenCrew.Split(\u0027,\u0027).ToList();\u003Cbr\u003E            foreach (string frozenkerbal in StoredCrew)\u003Cbr\u003E            {\u003Cbr\u003E                foreach (ProtoCrewMember kerbal in HighLogic.CurrentGame.CrewRoster.Crew) //There\u0027s probably a more efficient way to find Protocrewmember from the CrewRoster\u003Cbr\u003E                {\u003Cbr\u003E                    if (kerbal.name == frozenkerbal)\u003Cbr\u003E                    {\u003Cbr\u003E                        kerbal.rosterStatus = ProtoCrewMember.RosterStatus.Available;\u003Cbr\u003E                        ScreenMessages.PostScreenMessage(kerbal.name \u002B \u0022 was found in and thawed out.\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003Cbr\u003E                    }\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-04T04:44:55Z\u0022 title=\u002209/04/2014 04:44  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 4, 2014\u003C/time\u003E by scottpaladin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-09-04T07:34:39Z","Content":"\n\u003Cp\u003ESpeaking of ProtoParts and ProtoCrewMembers, can they be used to spawn Kerbals?\u003C/p\u003E\u003Cp\u003EFor now, I\u0027m looking for a Kerbal in EVA to clone at game start. It\u0027s working, but it\u0027s a very dirty way to do this.\u003C/p\u003E\u003Cp\u003EI saw in the API documentation that a Kerbal was a vessel with a single part, so I tried saving the protovessel of one of them in a confignode, to modify and load him later. But it doesn\u0027t work, I must be missing something.\u003C/p\u003E\u003Cp\u003EI don\u0027t need my clones to appear in the Tracking station or to be controllable, just spawn some around the KSC for now.\u003C/p\u003E\u003Cp\u003EWhat I tried:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//Saving the confignode\u003Cbr\u003EConfigNode cfgn = new ConfigNode(\u0022NewKerb\u0022);\u003Cbr\u003Evessel.protoVessel.Save(cfgn);[I]//vessel is my original kerbal in EVA. This function return \u0022Input is null\u0022 in the log[/I]\u003Cbr\u003Ecfgn.Save(\u0022GameData/GSL/Prot.txt\u0022);\u003Cbr\u003E***a bunch of stuff here because I had to reset the Orbit parameters manually***\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Load the confignode\u003Cbr\u003EProtoVessel pv = new ProtoVessel(cfgn, FlightDriver.FlightStateCache);\u003Cbr\u003Epv.position = vessel.transform.position \u002B new Vector3(1,1,1);//spawn the little guy close enough\u003Cbr\u003Epv.Load(FlightDriver.FlightStateCache.flightState);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt seems like a lot of parameters are missing from my confignode file (I can post it here if it can help). \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/U3hsbDt.jpg\u0022 rel=\u0022external nofollow\u0022\u003EAlso, it\u0027s a bad idea to spawn a dozen Kerbals without a vessel, apparently\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEdit: My bad, I found the solution. I was kinda close actually:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EConfigNode cfgn = new ConfigNode();\u003Cbr\u003Evessel.BackupVessel().Save(cfgn);\u003Cbr\u003Ecfgn.Save(\u0022GameData/GSL/Prot.txt\u0022);\u003Cbr\u003E\u003Cbr\u003EProtoVessel pv = new ProtoVessel(cfgn,HighLogic.CurrentGame);\u003Cbr\u003Epv.position = vessel.transform.position \u002B new Vector3(1,1,1);\u003Cbr\u003Epv.Load(HighLogic.CurrentGame.flightState);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI just needed to use BackupVessel instead of protoVessel, I don\u0027t really know if replacing the FlightDriver by the HighLogic made a difference...\u003C/p\u003E\u003Cp\u003EAnyway, now I\u0027m dealing with an easier question: How are vessel IDs generated?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-04T10:24:52Z\u0022 title=\u002209/04/2014 10:24  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 4, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Malah","CreatedById":96644,"CreatedDateTime":"2014-09-04T12:18:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Malah\u0022 data-cite=\u0022Malah\u0022\u003E\u003Cdiv\u003EThanks Lilleman, but i want to disable \u0022Recover\u0022 button in flight \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E (i\u0027ve try your solution and as you say, that doesn\u0027t work in flight).\u003Cp\u003EI\u0027ve try to use ScreenSafeUIButton.Lock (); as we can see it in the private void at VesselRecoveryButton.setUnlock() but it seem that doesn\u0027t work as this.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHello, i have found how to use it :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eprivate VesselRecoveryButton recoverybutton = null;\u003Cbr\u003Erecoverybutton = (VesselRecoveryButton) GameObject.FindObjectOfType(typeof(VesselRecoveryButton));\u003Cbr\u003Erecoverybutton.ssuiButton.Lock();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-04T13:37:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003EAnyway, now I\u0027m dealing with an easier question: How are vessel IDs generated?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThese are of type GUID when I look at them in the object browser in visual stuido so I\u0027ve been treating them as random hex string assigned when a vessel is created.\u003C/p\u003E\u003Cp\u003EI need to do some more tests, but at the moment I think this includes when a vessel undocks as well. \u003C/p\u003E\u003Cp\u003EVessel A docks to Vessel B, combined vessel has GUID of Vessel B. Undock and Vessel B keeps its GUID but Vessel A has been \u0027created\u0027 new and so now has GUID C.\u003C/p\u003E\u003Cp\u003EI still need to do some more tests (I\u0027m trying to find some kind of identifier so that after vessel A undocks, I can tell it is the same vessel from before the two vessels docked together) but that is my current understanding.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-09-04T16:32:38Z","Content":"\n\u003Cp\u003EHave you tried to use the \u0022tag\u0022 field of a part? Let\u0027s say you put a different tag on each command pod that must be part of a separate ship, they may be keeped even after a docking/undocking.\u003C/p\u003E\u003Cp\u003EI\u0027ve solved my problem. To get a new Guid, I needed to call... Wait for it... \u003Cem\u003EGuid.newGuid();\u003C/em\u003E...\u003C/p\u003E\u003Cp\u003EYep, that was that simple, I really overthought this one... Sorry for my previous posts, they were kind of useless...\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-04T17:10:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003EHave you tried to use the \u0022tag\u0022 field of a part? Let\u0027s say you put a different tag on each command pod that must be part of a separate ship, they may be keeped even after a docking/undocking.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is what I am trying to find, but have not been able to. Coming into this I would have expected that each part would have some sort of unique Identifier I could use to track this, but it seems that is not the case.\u003C/p\u003E\u003Cp\u003EI could add a partModule to save said tag, but the entire point of the rewrite that necessitated this question was to not use partModules in any way as I no longer trust them to save data in 0.24.x (See my Actions groups thread for why I am doing this.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-09-04T17:20:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThat is what I am trying to find, but have not been able to. Coming into this I would have expected that each part would have some sort of unique Identifier I could use to track this, but it seems that is not the case.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAren\u0027t Part.flightIds persistent across games? If that doesn\u0027t work, there\u0027s always the ugly yet usable Part.customPartData\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-04T17:26:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EAren\u0027t Part.flightIds persistent across games? If that doesn\u0027t work, there\u0027s always the ugly yet usable Part.customPartData\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Epart.FlightIds are persistent I believe, but that would still leave me unable to tell the difference between parts of the same type on the same flight. \u003C/p\u003E\u003Cp\u003ENow that make me think of it, that may actually work as what I\u0027m trying to track is the flight, not the part. Hmmm....\u003C/p\u003E\u003Cp\u003EOn the part.customPartData, what is this actually used for? I have never seen it as anything except an empty string. As it is generated by KSP, I would rather not use it as it is also open for other mods to access and I don\u0027t want to start a conflict by using it when another mod the player may have installed is using it also.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-09-04T17:33:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003Epart.FlightIds are persistent I believe, but that would still leave me unable to tell the difference between parts of the same type on the same flight.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEach part should have a unique one; I used them in a mod I wrote for myself that made targets (docking nodes in particular) persistent\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOn the part.customPartData, what is this actually used for? I have never seen it as anything except an empty string. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s just a persistent string each part has. I don\u0027t know of any mod that\u0027s used it so far but if you need to store part-relevant data without messing with them, it\u0027s an option. It can also be handy to store information per-part while in the editor since those parts don\u0027t get ids as I recall\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-04T17:58:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EEach part should have a unique one; I used them in a mod I wrote for myself that made targets (docking nodes in particular) persistent\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, now I am really confused.\u003C/p\u003E\u003Cp\u003EOpening the persistent.sfs file, each part has two fields that could work as unique identifiers:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Euid = 2353531706\u003Cbr\u003Emid = 2070367717\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Euid imports into the game as Part.uid, however it is not persistent, or perhaps I should say not consistent. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7544-The-official-unoffical-help-a-fellow-plugin-developer-thread?p=1349812\u0026amp;viewfull=1#post1349812\u0022 rel=\u0022external nofollow\u0022\u003EFrom a discussion with Ippo and McOffSky here\u003C/a\u003E Part.uid changes somehow and is not actually unique. (I was able to get 3 different Kerbal X test ships with the same uid on their root part in game.) It may be that it is persistent for a single save load which explains how your docking port targeting mod works as expected but it is certainly not persistent across multiple game sessions.\u003C/p\u003E\u003Cp\u003ENow, I have never been able to find the \u0027mid\u0027 from the persistent.sfs file in the Part class in Visual Studio before, but I\u0027ve never looked at the FlightId property you just mentioned. However, looking at the persistent.sfs file, the mid field on each part on a vessel is the same, not different so that should not be the case.\u003C/p\u003E\u003Cp\u003EHowever, there is a Vessel.missionID field in KSP that does not seem to have an entry under the Vessel in the persistent.sfs file, I wonder if the Part.mid of the root part of the vessel is how the Vessel.missionID is populated?\u003C/p\u003E\u003Cp\u003EThe other question that does not answer though is where is Part.FlightID saved?\u003C/p\u003E\u003Cp\u003EI\u0027m on a mobile and can\u0027t actually test anything at the moment, but I\u0027ll see if I can run some tests tonight when I get home.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-04T18:01:10Z\u0022 title=\u002209/04/2014 06:01  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 4, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-09-04T18:54:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003Euid imports into the game as Part.uid, however it is not persistent, or perhaps I should say not consistent.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt looks like flightID is uid (I mean the value in sfs is same as flightid, I didn\u0027t compare flightID to uid) and \u0027ref\u0027 in sfs is equivalent to the root part\u0027s flightID. But I don\u0027t get the same results as your tests.\u003C/p\u003E\u003Cp\u003EPart.mid looks to be somewhat similar to the vessel id but you might be able to make it work. Where an undocking vessel receives a brand new id, the parts of that vessel all keep the same mid values as the parent vessel. They\u0027ll be overwritten if they dock with a different parent though\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-04T18:56:35Z\u0022 title=\u002209/04/2014 06:56  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 4, 2014\u003C/time\u003E by xEvilReeperx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-04T19:00:25Z","Content":"\n\u003Cp\u003EflightID in code is uid in the persistence file? So where does uid in code come from?\u003C/p\u003E\u003Cp\u003EIf that is the case, I need to go back to square one and check this again. I was working on the premise that the uid in the .sfs file was the same as the part.uid in code so if that is not the case I am way off base.\u003C/p\u003E\u003Cp\u003EAt this point I\u0027ll run those tests when I get home and post my results.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-09-04T19:08:15Z","Content":"\n\u003Cp\u003EThat\u0027s a good question! They\u0027re definitely different. How bizarre:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EPART\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E name = probeCoreCube\u003C/p\u003E\u003Cp\u003E uid = 1582019048\u003C/p\u003E\u003Cp\u003E mid = 1339010955\u003C/p\u003E\u003Cp\u003E[... snip]\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EResults in\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[LOG 12:04:05.518] DebugTools, FlightId = 1582019048\u003Cbr\u003E[LOG 12:04:05.519] DebugTools, mid = 1339010955\u003Cbr\u003E[LOG 12:04:05.520] DebugTools, id = -2127700883 // was checking Vessel.id hashCode to see if it matches anything\u003Cbr\u003E[LOG 12:04:05.520] DebugTools, uid = 4294732514\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd there\u0027s absolutely nothing in the sfs that has \u00224294732514\u0022\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-04T23:58:47Z","Content":"\n\u003Cp\u003EThat agrees with my test.\u003C/p\u003E\u003Cp\u003EKey:\u003C/p\u003E\u003Cp\u003ESFS.Vessel.ref = persistent.sfs file, Vessel node, \u0027ref\u0027 value\u003C/p\u003E\u003Cp\u003ECODE.Part.uid = In visual studio, Part Class, \u0027uid\u0027 field\u003C/p\u003E\u003Cp\u003ETest Results:\u003C/p\u003E\u003Cp\u003ESFS.Vessel.ref = SFS.Part.mid at least at flight start. Not sure where to find this in code, I think it is CODE.Vessel.referenceTransformID so if you \u0022Control From Here\u0022 on a different part, SFS.Vessel.ref would change to the SFS.Part.mid of the part you control from here on. \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E(Not actually tested.)\u003C/span\u003E edit: tested and confirmed. CODE.Vessel.referenceTransformID is the CODE.Part.FlightID of the part you \u0027control from here\u0027 on.\u003C/p\u003E\u003Cp\u003ESFS.Vessel.pid = CODE.Vessel.id.ToString() CODE.Vessel.ID is a GUID which has hyphens in it. These hyphens are not present in the .sfs file so I believe the ToString() operation is performed when a save happens.\u003C/p\u003E\u003Cp\u003ESFS.Part.uid = CODE.Part.FlightID //this is unique to each part on the vessel as far as I can tell\u003C/p\u003E\u003Cp\u003ESFS.Part.mid = CODE.Part.MissionID //this is the same for each part on the same vessel, but different for different vessels. \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EI do not know yet what docking does to this, will have to devise a test after dinner.\u003C/span\u003E This seems to be set on spawn and does not change. Launch a vessel, split it in two with a decoupler, both vessels still have the same CODE.Part.MissionID\u003C/p\u003E\u003Cp\u003ECODE.Part.uid does not exist in the SFS file and changes when you switch away and back to the vessel.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-05T00:54:33Z\u0022 title=\u002209/05/2014 12:54  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 5, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-09-06T00:56:15Z","Content":"\n\u003Cp\u003EI know it has been asked before but why the hell is System.IO.Path.Combine giving me problems with a MissingMethodException.\u003C/p\u003E\u003Cp\u003EI have the using directive set correct, and as it was said on page 26 it is nolonger a forbidden namespace.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EDebug.LogError(string.Format(\u0022{0}| system.io.combine configfile = {1}\u0022, Constants.logPrefix, System.IO.Path.Combine(System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), Constants.settingFilePath, Constants.settingFileName)));\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGives me always the Report \u0022MissingMethodException: Method not found: \u0027System.IO.Path.Combine\u0027.\u0022\u003C/p\u003E\u003Cp\u003EHow can that be? what do I miss?\u003C/p\u003E\n"},{"CreatedByName":"The_Duck","CreatedById":1156,"CreatedDateTime":"2014-09-06T03:52:59Z","Content":"\n\u003Cp\u003EMake sure your project targets .NET 3.5 (it\u0027s in the project options in VS). Does that method exist in .NET 3.5?\u003C/p\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-09-06T07:50:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The_Duck\u0022 data-cite=\u0022The_Duck\u0022\u003E\u003Cdiv\u003EMake sure your project targets .NET 3.5 (it\u0027s in the project options in VS). Does that method exist in .NET 3.5?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, I will try that.\u003C/p\u003E\u003Cp\u003EDoes that really make such a big difference?\u003C/p\u003E\u003Cp\u003ESystem.IO.path.combine is quite essential.\u003C/p\u003E\u003Cp\u003EEDIT: changed the .net Framework from 4.5 to 3.5 and now it works.\u003C/p\u003E\u003Cp\u003EI was using an override that was not part of 3.5 so he could not find it.\u003C/p\u003E\u003Cp\u003EThanks The_Duck\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-06T09:07:02Z\u0022 title=\u002209/06/2014 09:07  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 6, 2014\u003C/time\u003E by Alewx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Thunderous Echo","CreatedById":120137,"CreatedDateTime":"2014-09-21T17:14:05Z","Content":"\n\u003Cp\u003ESo I\u0027m trying to make a plugin for this forum thread: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/94346-1-Button-Bill\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/94346-1-Button-Bill\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI have a few questions:\u003C/p\u003E\u003Cp\u003E1) How to you add one of the dialog boxes (like the ones you change fuel levels with in VAB) that come up when you click a part to my custom PartModule? (So I can set stuff up while in VAB)\u003C/p\u003E\u003Cp\u003E2) Which class controls keyboard inputs, and how do I call the method to send inputs when you click a button?\u003C/p\u003E\u003Cp\u003E3) How do I make variables from my PartModule save to the sfs file?\u003C/p\u003E\u003Cp\u003EPS. Is there a way to view the code of the original command module?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-21T21:48:10Z\u0022 title=\u002209/21/2014 09:48  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 21, 2014\u003C/time\u003E by Thunderous Echo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"McOffsky","CreatedById":108431,"CreatedDateTime":"2014-09-22T18:47:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Thunderous Echo\u0022 data-cite=\u0022Thunderous Echo\u0022\u003E\u003Cdiv\u003ESo I\u0027m trying to make a plugin for this forum thread: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/94346-1-Button-Bill\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/94346-1-Button-Bill\u003C/a\u003E\u003Cp\u003EI have a few questions:\u003C/p\u003E\u003Cp\u003E1) How to you add one of the dialog boxes (like the ones you change fuel levels with in VAB) that come up when you click a part to my custom PartModule? (So I can set stuff up while in VAB)\u003C/p\u003E\u003Cp\u003E2) Which class controls keyboard inputs, and how do I call the method to send inputs when you click a button?\u003C/p\u003E\u003Cp\u003E3) How do I make variables from my PartModule save to the sfs file?\u003C/p\u003E\u003Cp\u003EPS. Is there a way to view the code of the original command module?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETake a look at TAC Examples ( \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples\u003C/a\u003E ) \u003C/p\u003E\u003Cp\u003E1) KSPEvent and KSPField - \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples/blob/master/03-PartRightClicking/Source/PartRightClick.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples/blob/master/03-PartRightClicking/Source/PartRightClick.cs\u003C/a\u003E and \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples/blob/master/05-KspFields/Source/KspFieldsModule.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples/blob/master/05-KspFields/Source/KspFieldsModule.cs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E2) As far as I know keyboard input is controlled by Unity and you cannot fake this input. You should be able to bind to those functions from your code, using keyboard as proxy is not good idea. Have a look at documentaction (\u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/annotated.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://anatid.github.io/XML-Documentation-for-the-KSP-API/annotated.html\u003C/a\u003E), this should help.\u003C/p\u003E\u003Cp\u003E3) In your part module: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            if (node.GetValue(\u0022cid\u0022) != null)\u003Cbr\u003E            {\u003Cbr\u003E                this.cid = node.GetValue(\u0022cid\u0022);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        public override void OnSave(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            if (node.GetValue(\u0022cid\u0022) == null)\u003Cbr\u003E            {\u003Cbr\u003E                if (string.IsNullOrEmpty(this.cid))\u003Cbr\u003E                {\u003Cbr\u003E                    this.cid = this.part.ConstructID;\u003Cbr\u003E                }\u003Cbr\u003E                node.AddValue(\u0022cid\u0022, this.cid);\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T20:06:07Z\u0022 title=\u002209/22/2014 08:06  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by McOffsky\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Thunderous Echo","CreatedById":120137,"CreatedDateTime":"2014-09-22T21:51:53Z","Content":"\n\u003Cp\u003EHmm... This will make things difficult.\u003C/p\u003E\u003Cp\u003EIn the part.txt file, all command pods refrence a \u0022ModuleCommand\u0022, which I assume is a script. Is there any way I can look at this script?\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleCommand\u003C/p\u003E\u003Cp\u003E minimumCrew = 1\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\n"},{"CreatedByName":"McOffsky","CreatedById":108431,"CreatedDateTime":"2014-09-22T22:51:11Z","Content":"\n\u003Cp\u003EI will quote Coldplay now, play music in your head on your own: \u0022...nobody said it was eeeeeasy!\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EModuleCommand is Squad script and I think it\u0027s not public. If I understand your plugin correctly you just need to find parts with that module on active ship. You will get that with code below. And you can use Module Manager to attach your code to stock parts. \u003C/span\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E            foreach (Part p in vessel.Parts)\u003Cbr\u003E            {\u003Cbr\u003E                     foreach (PartModule pm in p.Modules)\u003Cbr\u003E                    {\u003Cbr\u003E                            if (pm.moduleName.Contains(n))\u003Cbr\u003E                            {\u003Cbr\u003E                               list.Add(pm);\u003Cbr\u003E                            }\u003Cbr\u003E                   }\u003Cbr\u003E         }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T22:54:51Z\u0022 title=\u002209/22/2014 10:54  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by McOffsky\u003C/strong\u003E\n\u003C/span\u003E\n"}]}