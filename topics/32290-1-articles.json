{"TopicId":32290,"ForumId":29,"TopicTitle":"VTOL project - need coding and maths help","CreatedByName":"evilC","CreatedById":60370,"CreatedDateTime":"2013-06-10T08:42:54Z","PageNum":1,"Articles":[{"CreatedByName":"evilC","CreatedById":60370,"CreatedDateTime":"2013-06-10T08:42:54Z","Content":"\n\u003Cp\u003EI would like to see feasible four-point horizontally-oriented VTOL (Osprey style) for non-perfectly balanced craft in KSP\u003C/p\u003E\u003Cp\u003EAt the moment, even if your craft is perfectly balanced it is problematic - the best solution I have found is the \u003Ca href=\u0022http://kerbalspaceprogram.com/18-2-throttle-steering/\u0022 rel=\u0022external nofollow\u0022\u003EThrottle Steering\u003C/a\u003E mod - this is capable of setting individual thrust levels per engine and also using control inputs to control these levels to let you steer like RCS. When combined with ASAS and RCS (Not thrusters, just RCS mode being on) it can keep an uneven craft in a stable condition, though it over-corrects some.\u003C/p\u003E\u003Cp\u003EPersonally, I reckon even the level of control that gives is maybe good enough, at least to explore some concepts.\u003C/p\u003E\u003Cp\u003EHowever, there is one minor niggle:\u003C/p\u003E\u003Cp\u003EWhen using a forward-facing, plane style craft (Say with the B9 VTOL engines that can rotate), the retrograde/prograde vectors are going to be up and down, not forward and back. So if coming in for a VTOL landing with a dropship, you either have to land vertically like a rocket, eyeball it or switch control to an up-facing pod, but this then changes the control style, ruining the experience.\u003C/p\u003E\u003Cp\u003ENow I can code to a degree, although my only experience with ksp coding was fixing the orbital construction mod, however the problem was not version compatibility, it was optimization (calculating values every tick not using static var) and usability issues (author didn\u0027t seem to grasp quirky nature of UI coding) so whilst I am lacking in ksp experience and maths knowledge, I feel that with a little outside experience I can put something together, or assist someone else putting it together by doing some of the grunt work.\u003C/p\u003E\u003Cp\u003EFor now, I am just proposing taking whatever we can from wherever we can to cobble some ideas together. If we get to a point where we feel a release is merited, then we may have to obtain permission from authors to redistribute or create our own assets, but for now using Throttle Steering and the B9 VTOL engines as a testbed seem like the smart move.\u003C/p\u003E\u003Cp\u003ESo all that leaves for the moment is the navball mod. I reckon for someone with the right experience, some basic code that just moves the prograde/retrograde markers by 90deg (or inserts some other marker) would be a 5 min job.\u003C/p\u003E\u003Cp\u003ESlightly more advanced would be to make the icon follow the current orientation of the B9 VTOL engines. However, if I were provided with a function to insert an icon at an (x) degree offset to the actual prograde as a solution to the previous problem, I could possibly rig this up myself.\u003C/p\u003E\u003Cp\u003EIn parting, and to whet your appetites for what could be, I leave you with this:\u003C/p\u003E\u003Cp\u003E(And yes, I know the orbital physics are all wrong but it is arguably one of the coolest scenes ever, plus B9 has a rear loading ramp like in the film)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/uDLQg8ZKBS8?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-13T13:01:54Z","Content":"\n\u003Cp\u003ESave for a distinct lack of a deceleration burn kinda ruining that video for me, it was cool. I\u0027m definitely interested in this, and would love to see an XCom style drop-ship or Halo\u0027s Pelican in game.\u003C/p\u003E\u003Cp\u003EI\u0027m not entirely clear what you\u0027re stuck on from your post, but I think I can help; it\u0027s a fairly straightforward problem before you add in pivoting engines and thrust vectoring. I think it just boils down to solving a system of (linear?) equations with a throttle value for each engine, multiplied along its thrust transform.\u003C/p\u003E\u003Cp\u003EI believe you describe a subset of this problem here, just for bigger engines: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/28044-WIP-Analytical-RCS-thrust-balancing\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/28044-WIP-Analytical-RCS-thrust-balancing\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-13T13:04:47Z\u0022 title=\u002206/13/2013 01:04  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 13, 2013\u003C/time\u003E by FireStormOOO\u003C/strong\u003E\n\u003Cbr\u003Eadded link to similar thread\n\u003C/span\u003E\n"},{"CreatedByName":"ZRM","CreatedById":64626,"CreatedDateTime":"2013-06-13T14:32:49Z","Content":"\n\u003Cp\u003EYes, what you are describing is a subset of what my project (referenced above) is aiming to achieve. The next release (soon) is going to include VTOL support for arbitrary static engine layouts and configurations. Eventually I will add gimbal support and rotating engine support.\u003C/p\u003E\u003Cp\u003EBTW, my plugin does not \u0022guess\u0022 the thrusts required, like standard RCS and Throttle Steering. It calculates them exactly. So there is no overcompensation.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FireStormOOO\u0022 data-cite=\u0022FireStormOOO\u0022\u003E\u003Cdiv\u003ESave for a distinct lack of a deceleration burn kinda ruining that video for me, it was cool. I\u0027m definitely interested in this, and would love to see an XCom style drop-ship or Halo\u0027s Pelican in game.\u003Cp\u003EI\u0027m not entirely clear what you\u0027re stuck on from your post, but I think I can help; it\u0027s a fairly straightforward problem before you add in pivoting engines and thrust vectoring. I think it just boils down to solving a system of (linear?) equations with a throttle value for each engine, multiplied along its thrust transform.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWith static engines, it is a linear system. With rotating/gimballing engines, it can be approximated by a linear system. And yes, one of my motivations is the Pelican. Though I am also quite keen to have bases that are constructed in orbit then set down to the surface of the Mun with precision control of detachable engines. The possibilities are endless.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-13T14:46:56Z\u0022 title=\u002206/13/2013 02:46  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 13, 2013\u003C/time\u003E by ZRM\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-13T17:12:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EWith static engines, it is a linear system. With rotating/gimballing engines, it can be approximated by a linear system. And yes, one of my motivations is the Pelican. Though I am also quite keen to have bases that are constructed in orbit then set down to the surface of the Mun with precision control of detachable engines. The possibilities are endless.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh I\u0027m going to love this. Don\u0027t get me wrong, that existing throttle steering plugin has been a godsend, but this... *drools slightly*\u003C/p\u003E\n"},{"CreatedByName":"ZRM","CreatedById":64626,"CreatedDateTime":"2013-06-13T17:59:15Z","Content":"\n\u003Cp\u003EI\u0027ve been thinking about your ideas relating to the navball. I think the ideal solution would be to not cannibalise the navball for a purpose it was not intended for, but instead add additional displays to the UI, for example showing the RADAR horizontal ground velocity measurements as a vector on a grid, along with landing site and orientation coordinates. If this is made as a display prop in the IVA, I think it would be cool if it is green and flickering slightly, to mimic a cathode ray tube and give off that Kerbal low-tech feel.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-13T18:04:14Z\u0022 title=\u002206/13/2013 06:04  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 13, 2013\u003C/time\u003E by ZRM\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"evilC","CreatedById":60370,"CreatedDateTime":"2013-06-14T05:36:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ZRM\u0022 data-cite=\u0022ZRM\u0022\u003E\u003Cdiv\u003EI\u0027ve been thinking about your ideas relating to the navball. I think the ideal solution would be to not cannibalise the navball for a purpose it was not intended for, but instead add additional displays to the UI, for example showing the RADAR horizontal ground velocity measurements as a vector on a grid, along with landing site and orientation coordinates. If this is made as a display prop in the IVA, I think it would be cool if it is green and flickering slightly, to mimic a cathode ray tube and give off that Kerbal low-tech feel.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI disagree. The navball was 100% intended for this purpose - that is why you land a rocket by keeping the direction indicator inside the retrograde indicator.\u003C/p\u003E\u003Cp\u003EThe only reason we cannot use this for VTOL craft is because \u0022forwards\u0022 is offset at 90deg from the thrust vector, so the pro/retro indicators are out of sight at the top and bottom of the navball.\u003C/p\u003E\u003Cp\u003EI like the idea of a special display tho\u003C/p\u003E\n"},{"CreatedByName":"jheriko","CreatedById":67666,"CreatedDateTime":"2013-06-24T21:50:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022evilC\u0022 data-cite=\u0022evilC\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe only reason we cannot use this for VTOL craft is because \u0022forwards\u0022 is offset at 90deg from the thrust vector, so the pro/retro indicators are out of sight at the top and bottom of the navball.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou know you can choose where you control the craft from and the navball changes? As long as your pod is a suitable 90 degrees from your engines it should be fine without any changes...\u003C/p\u003E\u003Cp\u003EThis is very useful when docking with some 90 degree angled port, for example.\u003C/p\u003E\u003Cp\u003EMaybe by default the engine \u0027gimbals\u0027 point it 90 degrees out ready for take off on launch? you can cobble an orientation from the down vector and some arbitrary planar direction... or do something much better where the engine pivot transform is rotated about an axis to point straight down.\u003C/p\u003E\u003Cp\u003EAlso, the problem with exact calculations and Unity physics in my experience is the integration and quantisation - analytic solutions always have small \u0027rounding errors\u0027 as a result of this. I can imagine it being difficult to avoid wobbling altogether although the scale of this effect might be completely unrelated to the current wobbling with asas...\u003C/p\u003E\n"},{"CreatedByName":"evilC","CreatedById":60370,"CreatedDateTime":"2013-06-25T09:45:36Z","Content":"\n\u003Cp\u003EYeah, I know you can control a vertical pod, but then that kind of ruins the experience - you are using rocket style controls not plane style\u003C/p\u003E\n"}]}