{"TopicId":123669,"ForumId":34,"TopicTitle":"[1.0.4] AirPark","CreatedByName":"Smelly","CreatedById":152610,"CreatedDateTime":"2015-10-24T04:58:01Z","PageNum":3,"Articles":[{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2016-09-07T18:49:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746004\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473273033\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u00A0This is something I do not completely understand, which may be related,\u00A0this is only code that references a vessel inflight\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E#region if we\u0027re not Parked, and not active and flying, then go off rails\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(!\u003C/span\u003E\u003Cspan\u003EParked\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026amp;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E!\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EisActiveVessel \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026amp;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E vessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Esituation \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E==\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EVessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ESituations\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EFLYING\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n                vessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGoOffRails\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E();\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E#endregion\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nParking currently on toggles the Vessel Situation , is there a \u0022GoOnRails()\u0022 that should be called, and what does \u0022GoOffRails\u0022 do exactly, have not found docs on that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGoOnrails used to be, cant be sure today, the state of a vessel in time warp, or out of render range , usually vessels in orbit are on(or where) on rails, but i don\u0027t understand how coming off rails( the opposite state)\u00A0 would be beneficial in this instance. \u00A0 That\u00A0 logic though pretty much describes the test findings, with the inactive (not controlled by the player) but now unparked\u00A0 (so technically as far a the game goes) flying vessel falling out of the sky when un park is set . There are only five states I believe that can describe a vessels situation plus the mirror inactive states, so perhaps it is just a way to define a vessel condition not natively described in the games code, as you have to assign some sort of state to the vessel that\u0027s just unparked itself. aside from that I\u0027m as in the dark here as you are.\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-07T19:02:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u00A0 That concurs from my observations as well and my understanding of Vessel states. The Vessel State\u00A0is not going to affect the movement of the vessel, its just a \u0022tag\u0022 for the game to understand where the vessel is in terms of Prelaunch -\u0026gt; Launch-\u0026gt; Flying etc... There will be no way to statically \u0022freeze\u0022 something without constantly setting its position/velocity , and that is where dunclaw started off in his fork.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104207\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0022 rel=\u0022\u0022\u003E@Ser\u003C/a\u003E\u00A0Is there something I may have missed here in the logic that you can think of?\u00A0I\u00A0cannot see another way to code this at the moment.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n//edit Whoo boy, yeah I see those issues with flying - getting to work on trying to fix that now.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-07T19:42:44Z\u0022 title=\u002209/07/2016 07:42  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 7, 2016\u003C/time\u003E by gomker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-08T01:11:05Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104207\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0022 rel=\u0022\u0022\u003E@Ser\u003C/a\u003E\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u00A0\u003Cbr\u003E\nI think I may have gotten it worked out. I tested the following scenarios (all at same time and did save/reload a few more)\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nLaunched Aircraft , flew to about 1000M airparked.\n\u003C/li\u003E\n\u003Cli\u003E\nWent back to Space center, launched Aircraft, flew to same area, airparked - didn\u0027t detonate this time \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/li\u003E\n\u003Cli\u003E\nLaunched Boat , placed in water 2 KM away, airparked - did this 2x more\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nSwitched between vessels all stayed parked\n\u003C/li\u003E\n\u003Cli\u003E\nVessel creep seems to be gone as well\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nLet me know if you are still seeing any issues and any test cases I may not have run against.\n\u003C/p\u003E\n\u003Cp\u003E\nGithub is updated and so its Spacedock -\u00A0.v0.1.5.2\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-08T01:11:22Z\u0022 title=\u002209/08/2016 01:11  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 8, 2016\u003C/time\u003E by gomker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-09-08T10:19:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746004\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473273033\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nhave not found docs on that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWelcome to KSP modding, my friend.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746390\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473297065\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think I may have gotten it worked out. I tested the following scenarios (all at same time and did save/reload a few more)\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nWent back to Space center, launched Aircraft, flew to same area, airparked - didn\u0027t detonate this time \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nLet me know if you are still seeing any issues and any test cases I may not have run against.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNow it works in general, except for my test case No.2: an auto-park-enabled aircraft jumps several kilometers every time you get close to it. I did it several times sequentially and it jumped below water surface, but stayed intact. When I flew closer, it exploded.\n\u003C/p\u003E\n\u003Cp\u003E\nOne more issue: an aircraft always resumes at 0 velocity and that may be painful. It should restore its velocity vector when unparked.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd an advice: always test your work hard prior to releasing it on KerbalStuff,\u00A0because when people download something that barely works they get annoyed and disappointed.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-08T10:31:25Z\u0022 title=\u002209/08/2016 10:31  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 8, 2016\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-08T14:09:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746703\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473329946\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNow it works in general, except for my test case No.2: an auto-park-enabled aircraft jumps\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nClarification on this one, Auto-Park(which has been renamed auto-unpark) will unpark a vessel if parked and within 1.5 KM. As a test case what is the desired outcome? Other than not exploding of course \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E, would you want the plane to un-park and continue on its velocity? If you didn\u0027t have something like BDArmory Autopilot enabled as well the plane would crash.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-09-08T14:59:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746867\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473343751\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nClarification on this one, Auto-Park(which has been renamed auto-unpark) will unpark a vessel if parked and within 1.5 KM. As a test case what is the desired outcome? Other than not exploding of course \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E, would you want the plane to un-park and continue on its velocity? If you didn\u0027t have something like BDArmory Autopilot enabled as well the plane would crash.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n1. A plane is parked with auto-unpark enabled . I fly to it and as I get very close (a few hundred meters I guess) it jumps away, i.e suddenly appears somewhere away by several km. I reach for it again and it jumps again. Can\u0027t say which direction, but after some attempts it appears under water.\n\u003C/p\u003E\n\u003Cp\u003E\n2. For active vessel: This is citation from\u00A0the original version\u0027s description: \u003Cem\u003E\u0022...right-click menu to freeze the attached vessel in place and mark the vessel as landed. From here you can switch aircraft or return to the space center and your vessel will remain in place.Returning to this vessel and toggling AirPark off will resume the flight \u003Cstrong\u003Eat the velocity it was frozen at\u003C/strong\u003E.\u0022\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSo originally this mod was intended\u003Cstrong\u003E\u00A0\u003C/strong\u003Eto resume at the present velocity. Or else, what\u0027s the point of stopping an aircraft midair and letting it just to fall freely on unpark (unless it\u0027s an air balloon or a boat)? The \u003Cabbr title=\u0022Original Post(er). The first post in a thread, or the person who posted it.\u0022\u003EOP\u003C/abbr\u003E clearly states that the mod should let to pause atmospheric flight, switch elsewhere, then return and resume at the present position and velocity. That\u0027s the key feature.\n\u003C/p\u003E\n\u003Cp\u003E\n3.\u003Cem\u003E\u00A0\u003C/em\u003EFor\u003Cem\u003E\u00A0\u003C/em\u003ENon-active vessel\u003Cem\u003E: \u0022Use this [AutoPark]\u00A0feature to allow midair refueling without having to launch both vessels at the same time. Simply AirPark one of the vessels ahead of the other with AutoPark enabled and fly the other vessel to the parked one.\u0022\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see, AutoPark was intended to park and resume at present speed. Without it midair refueling mentioned by the author would be extremely hard to perform. Honestly, I never needed the auto-unpark feature and don\u0027t believe the plane would keep its flight direction while in physics range, but that needs to be\u00A0checked because\u00A0what is done here is a \u0022Continued\u0022 version of the original, right? Also that might be useful to create, as you say, armadas of ships. Not just static but moving convoys.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-08T15:49:28Z\u0022 title=\u002209/08/2016 03:49  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 8, 2016\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-08T16:34:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222746919\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473346769\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs you can see, AutoPark was intended to park and resume at present speed\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI understand this and will see about restoring the velocity however, there is a fundamental flaw in this logic.\u00A0\u00A0If I unpark the inactive vessel when you get in range it will not be controlled and fly away without an Autopilot. \u00A0I was going to disable the \u0027Auto-Unpark\u0027 feature for vessels in flight as this doesn\u0027t seem to be something anyone would want unless it was an airship or boat. For clarity I am only talking about the \u0022Auto-Unpark\u0022 , I understand the use case for returning velocity on manual un-park.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nQuestion on your testing. Did you use new vessels or ones that were already deployed. I ask because when I rebuilt there may have been an issue with the Vessel state not saving correctly that would cause the jumping around you reported. I took a video of what I thought you described for Test Case2\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRegards,\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/ltxkMITPW9o?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-08T17:57:17Z\u0022 title=\u002209/08/2016 05:57  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 8, 2016\u003C/time\u003E by gomker\u003C/strong\u003E\n\u003Cbr\u003EClarity\n\u003C/span\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-08T20:48:03Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104207\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0022 rel=\u0022\u0022\u003E@Ser\u003C/a\u003E\u00A0Here is a first pass on the velocity restore if you would like to test -\u00A0\u003Ca href=\u0022https://github.com/gomker/AirPark/tree/issue-1-velocityrestore\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/gomker/AirPark/tree/issue-1-velocityrestore\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-09-09T09:01:16Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141269-gomker/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022141269\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141269-gomker/\u0022 rel=\u0022\u0022\u003E@gomker\u003C/a\u003E, Couldn\u0027t even get the right click menu displayed, so I\u0027ll go on with the version 1.5.3.\n\u003C/p\u003E\n\u003Cp\u003E\nTried again and found that several\u00A0kilometer\u00A0jump occurs\u00A0time to time. Also it seems that auto park/unpark triggers not on 1.5/2 km mark but on 150/200 meters\u00A0\u003Cimg alt=\u0022:huh:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 title=\u0022:huh:\u0022\u003E\u00A0(and that is shown on your video in the end), and that\u0027s the moment when a jump occurs sometimes. Anyway, I\u00A0think this feature is not that required to bother too much when\u00A0more serious bugs need to be fixed.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s another case: Takeoff with a new aircraft. Quicksave/quickload or revert to launch and takeoff again. Park. Try to switch to space center. You\u0027ll get the \u0022Warning: You are in flight\u0022. That\u0027s weird because in my fork I had the opposite behavior: I couldn\u0027t switch out a vessel \u003Cem\u003Ebefore\u003C/em\u003E\u00A0the\u00A0save/load.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Dzje07Q.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/Dzje07Q.jpg\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-09T14:44:59Z\u0022 title=\u002209/09/2016 02:44  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 9, 2016\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-09T16:53:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222748094\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473411676\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHere\u0027s another case: Takeoff with a new aircraft. Quicksave/quickload or revert to launch and takeoff again. Park. Try to switch to space center. You\u0027ll get the \u0022Warning: You are in flight\u0022. That\u0027s weird because in my fork I had the opposite behavior: I could\u0027t switch out a vessel \u003Cem\u003Ebefore\u003C/em\u003E\u00A0the\u00A0save/load.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI just saw that last night - I reverted my commit and still had it happening, it was driving me nuts. \u00A0I think I narrowed it down to Vessel.Situation going from Prelaunch, to Flying. Once it was flying a bit further I could return. Now that I can reproduce I will debug the hell out if it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222748094\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473411676\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlso it seems that auto park/unpark triggers not on 1.5/2 km mark but on 150/200 meters\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat math was in the starting fork, never thought to validate.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E((\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetWorldPos3D\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E-\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EFlightGlobals\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EActiveVessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetWorldPos3D\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()).\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Emagnitude \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1500.0f\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026amp;\u0026amp;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EParked\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIt is set to a double , so probably\u00A0is off by a decimal place, I don\u0027t know what the \u0022units\u0022 are for magnitude, I assume Meters.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222748094\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473411676\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnyway, I\u00A0think this feature is not that required to bother too much when\u00A0more serious bugs need to be fixed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAgreed, I think the jumping around is due to two factors , something with coming off/on rails\u00A0being called and what Park position is being \u0022remembered\u0022. \u00A0Values \u00A0are not\u00A0staying\u00A0persistent and seems to only occur\u00A0when coming into Physics range, which I assume calls vessel.GoOffRails()\n\u003C/p\u003E\n\u003Cp\u003E\nI was so close to getting the velocity restored, but I will jump back to this issue first.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-09T16:54:16Z\u0022 title=\u002209/09/2016 04:54  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 9, 2016\u003C/time\u003E by gomker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-10T02:58:28Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104207\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0022 rel=\u0022\u0022\u003E@Ser\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAfter extensive research and review of both the original code I believe I have tracked down the root cause of the problem. Its a good news / bad news situation. \u00A0During the tests I found that several factors in conjunction trigger the problem\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nMoving in and out physics range\n\u003C/li\u003E\n\u003Cli\u003E\nIf the vessel you are moving into physics range with also has an Airpark module on it\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nMost of my tests pre-release consisted of parking several boats, then using a plane \u00A0(which did not have Airpark) \u00A0to fly close to the parked boats, this\u00A0did not trigger any issues.\u00A0\u00A0The root cause is because of the way part modules function, the code is designed to run in the \u0022FixedUpdate()\u0022 which executes every frame to keep a vessel parked. This code executes every frame on Active and in-Active vessels alike. I can test for either Active or inactive however since the scope will always be the\u00A0\u0022part\u0022 \u00A0as this is a Part Module. When the vessel moves into physics range it is overriding the \u0022Position\u0022 value causing the vessels to jump. \u00A0There may be another problem in the logic but in debug I can see the values being hijacked.\n\u003C/p\u003E\n\u003Cp\u003E\nThe \u0022good\u0022 news is that there may be a solution,\u00A0using a Vessel Module instead of a Part Module. This seems to be more fitting of a module as it really should be scoped to the vessel.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/113689-vessel-modules-discussion/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nThis will be a set of different challenges that will take some time to rewrite.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-10T03:18:09Z\u0022 title=\u002209/10/2016 03:18  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 10, 2016\u003C/time\u003E by gomker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2016-09-10T03:22:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222749194\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473476308\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0it is overriding the \u0022Position\u0022 value causing the vessels to jump.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe \u0022good\u0022 news is that there may be a solution,\u00A0using a Vessel Module instead of a Part Module\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/113689-vessel-modules-discussion/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nThis will be a set of different challenges that will take some time to rewrite.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhile that sucks a bit the pinning down of the why is a major achievement, cool. \u00A0 And I\u0027d never heard of vessel modules before your link, so good find, i can think of a couple of scenarios in which, what i can grasp quickly of, the function will work very well.\u00A0 Yet another bit of esoteric KSP code, that\u0027s barely known about .. sooo much of this\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-10T03:29:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222749226\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473477736\u0022 data-ipsquote-userid=\u002250907\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, SpannerMonkey(smce) said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYet another bit of esoteric KSP code, that\u0027s barely known about\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe people in the dev threads have been very helpful so far pointing out these interesting things. The others have also posted a wealth of examples so at least there are great starting points and its not a complete feel in the dark situation.\n\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-09-11T08:12:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222749194\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473476308\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10.09.2016 at 5:58 AM, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe \u0022good\u0022 news is that there may be a solution,\u00A0using a Vessel Module instead of a Part Module. This seems to be more fitting of a module as it really should be scoped to the vessel.\n\u003C/p\u003E\n\u003Cp\u003E\nThis will be a set of different challenges that will take some time to rewrite.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have never used that but if that\u0027s a solution it would be cool. It solves several troubles such as multiple modules for the same vessel. I suppose the right click part menu would be unaccessible form VesselModule so I suggest to use a Pause/Break hot key for parking.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"dunclaw","CreatedById":151301,"CreatedDateTime":"2016-09-12T20:53:35Z","Content":"\n\u003Cp\u003E\nIn the last update I made to my fork, I stopped trying to muck with position or velocity at all. My thinking was that while on rails, the vessel may have moved substantially (rotating around the planet to the other side, for example). Attempting to restore a position and/or velocity could end up with really bad results.\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-13T01:31:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222752840\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473713615\u0022 data-ipsquote-userid=\u0022151301\u0022 data-ipsquote-username=\u0022dunclaw\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, dunclaw said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn the last update I made to my fork, I stopped trying to muck with position or velocity at all. My thinking was that while on rails, the vessel may have moved substantially (rotating around the planet to the other side, for example). Attempting to restore a position and/or velocity could end up with really bad results.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey there, good to see you back. \u00A0I actually had the \u00A0restore of position and velocity working somewhat well, but did not consider a few of the factors you mentioned. In my research though I have discovered more about setting the position and why there were inconsistent results\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/84948-definition-of-vesselgetworldpos3d-seems-to-be-inconsistent/\u0026amp;do=findComment\u0026amp;comment=1410963\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/84948-definition-of-vesselgetworldpos3d-seems-to-be-inconsistent/\u0026amp;do=findComment\u0026amp;comment=1410963\u003C/a\u003E\u003Cbr\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/95305-transformposition-changes-after-revert-flight-to-launch/\u0026amp;do=findComment\u0026amp;comment=1631915\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/95305-transformposition-changes-after-revert-flight-to-launch/\u0026amp;do=findComment\u0026amp;comment=1631915\u003C/a\u003E\u003Cbr\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/120884-vessel-rotations-and-planetary-location/\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/120884-vessel-rotations-and-planetary-location/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis one right on the money\u003Cbr\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/54014-vesselsetposition-issue/#comment-788113\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/54014-vesselsetposition-issue/#comment-788113\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe TLDR; version is vessel position isn\u0027t really the potion on the surface and other methods are relative to the Celestial bodies.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am mucking around with other ways of setting it up and almost have the VesselModule \u00A0framework somewhat working.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d love to collaborate if you like, having another set of eyes on this helps.\n\u003C/p\u003E\n\u003Cp\u003E\nRegards\u003Cbr\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"dunclaw","CreatedById":151301,"CreatedDateTime":"2016-09-13T02:01:47Z","Content":"\n\u003Cp\u003E\nSure, I can help look at the problem. It sounds like it uses a local coordinate system that resets occasionally. So storing and attempting to restore the position/velocity won\u0027t work unless you also store the local origin and transform into the new local coordinate system. I don\u0027t see any hints on how to get the current local origin, though.\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-14T00:54:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222753330\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473732107\u0022 data-ipsquote-userid=\u0022151301\u0022 data-ipsquote-username=\u0022dunclaw\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 hours ago, dunclaw said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSure, I can help look at the problem. It sounds like it uses a local coordinate system that resets occasionally. So storing and attempting to restore the position/velocity won\u0027t work unless you also store the local origin and transform into the new local coordinate system. I don\u0027t see any hints on how to get the current local origin, though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWould a better approach be storing the Lat/Lon/Altitude? I think of how I can save coordinates with HyperEdit and send a vessel to those exact coordinates each time. Haven\u0027t found anything on that yet but was a thought.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"dunclaw","CreatedById":151301,"CreatedDateTime":"2016-09-14T03:40:59Z","Content":"\n\u003Cp\u003E\nSure, if there\u0027s another global coordinate system (like lat/long) we could use that would work. I haven\u0027t seen anything like that either. There\u0027s got to be some way of getting the local coordinate reference - the system must do it as stuff goes on/off rails.\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-14T23:47:48Z","Content":"\n\u003Cp\u003E\nI see there is a\u00A0 Vessel.longitude / latitude but translating that back to a Vector3 for vessel position is the issue. Off to research more, I know someone has tackled this more than once\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-15T03:45:11Z","Content":"\n\u003Cp\u003E\nAfter about 100 forum posts and reading code from a bunch of different mods, I think I may have got it... Just in time for 1.2 GAH!\u003Cbr\u003E\nI\u0027ve learned about all I want to for now about inner workings of KSP and have 20\u002B bookmarks on all the crazy undocumented things in the API\n\u003C/p\u003E\n\u003Cp\u003E\nPlease review at your pleasure, I have not tested for 1.2 yet\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/gomker/AirPark/tree/devbranch\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/gomker/AirPark/tree/devbranch\u003C/a\u003E\u00A0||\u00A0\u003Ca href=\u0022https://github.com/gomker/AirPark/blob/devbranch/BuildRelease/AirPark_Debug.v0.1.5.4_09142016.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/gomker/AirPark/blob/devbranch/BuildRelease/AirPark_Debug.v0.1.5.4_09142016.zip\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nRelevant code fix was here to set position as we were discussing \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/151301-dunclaw/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022151301\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/151301-dunclaw/\u0022 rel=\u0022\u0022\u003E@dunclaw\u003C/a\u003E\u00A0-\u00A0\u003Ca href=\u0022https://github.com/gomker/AirPark/blob/devbranch/AirPark.cs#L221\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/gomker/AirPark/blob/devbranch/AirPark.cs#L221\u003C/a\u003E\u003Cbr\u003E\nIt was adapted from HyperEdit in the same way that he sets landing position. I also threw in the velocity restore just because its still the devbranch for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104207\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104207-ser/\u0022 rel=\u0022\u0022\u003E@Ser\u003C/a\u003E\u00A0as it was somewhat working before I went on this escapade.\n\u003C/p\u003E\n\u003Cp\u003E\nStill working on the VesselModule approach with a Toolbar instead of a Partmodule. Will restart that after 1.2 testing.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-09-15T09:11:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222757283\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473911111\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStill working on the VesselModule approach with a Toolbar instead of a Partmodule. Will restart that after 1.2 testing.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre you sure about toolbar? It would cause some\u00A0inconvenience\u00A0clicking around when flying with mouse. Why don\u0027t you like the idea with hotkeys?\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-15T12:54:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222757521\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473930699\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre you sure about toolbar? It would cause some\u00A0inconvenience\u00A0clicking around when flying with mouse. Why don\u0027t you like the idea with hotkeys?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWant to make sure it\u0027s stable first, too many changes and errors creep in. I have a toolbar GUI ready to go.\n\u003C/p\u003E\n"},{"CreatedByName":"dunclaw","CreatedById":151301,"CreatedDateTime":"2016-09-16T02:14:07Z","Content":"\n\u003Cp\u003E\nThat looks like a good approach @gomker, the celestial body\u0027s lat/long should be stable to reload from.\n\u003C/p\u003E\n\u003Cp\u003E\nI would skip the underwater check (submarines may want to park too), and some of the borrowed code could be cleaned up a bit. I\u0027ll do some testing on it.\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2016-09-16T02:32:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222759093\u0022 data-ipsquote-contentid=\u0022123669\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473992047\u0022 data-ipsquote-userid=\u0022151301\u0022 data-ipsquote-username=\u0022dunclaw\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, dunclaw said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat looks like a good approach @gomker, the celestial body\u0027s lat/long should be stable to reload from.\n\u003C/p\u003E\n\u003Cp\u003E\nI would skip the underwater check (submarines may want to park too), and some of the borrowed code could be cleaned up a bit. I\u0027ll do some testing on it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood catch. I am working on another issue for Submarines on my HullBreach mod as well and am figuring out some better depth detection code. I guess this is really the same just \u0022negative\u0022 relative to sea level?\n\u003C/p\u003E\n"}]}