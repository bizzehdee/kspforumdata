{"TopicId":73944,"ForumId":36,"TopicTitle":"[Plugin, WIP, 1.2] Ship List","CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-02T22:25:40Z","PageNum":1,"Articles":[{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-02T22:25:40Z","Content":"\n\u003Cp\u003E\nHi,\n\u003C/p\u003E\n\u003Cp\u003E\na typical question I encounter about every time I play the game is: which of my stations or ships in orbit has some room to dump excess fuel. When one doesn\u0027t have many stations in orbit, this may be a simple matter of switching through each of them and checking, but I have grown tired of all the switching back and forth between the vessels and the Space Station/Tracking Station/Map. Loading times on the notebook aren\u0027t so funny, nevermind the lag on some of the larger objects. All I really wanted was a simple list of the relevant ships and their fuel status. So I pondered the idea of just writing an external script which quickly parses the persistent.sfs file to collect the information, but then decided to try to write an in-game plugin. After all, this is as good an excuse as any to install Unity and learn yet another language (C#).\n\u003C/p\u003E\n\u003Cp\u003E\nSo, the simple goal is: have a window with the list of ships, showing their fuel status, ideally both in the Space Center and also which in flight. It should not require saving any extra data - no files, no blocks in the (already seriously large) save games. Optional goal: allow direct switching to the ships from the Space Center (like one can switch to the relevant vessel in Kerbal Alarm Clock).\n\u003C/p\u003E\n\u003Cp\u003E\nCurrent status:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nbasic GUI window established (You will note at once I\u0027m not a GUI person. The last time I did any GUI work was ... (probably) a control panel for OS/2. Yes, \u003Cem\u003Ethat\u003C/em\u003E long ago. I do write code for a living, if they let me out of meetings, but either the devices have no UI at all, or it is all happily ncurses based.)\n\u003C/li\u003E\n\u003Cli\u003E\ninfrastructure to acquire, keep and display the ship data is in place\n\u003C/li\u003E\n\u003Cli\u003E\nit will by default only show vessels which it knows anything useful about. click the \u0022Show Empty\u0022 button to show all vessels\n\u003C/li\u003E\n\u003Cli\u003E\nship list can be filtered by vessel type\n\u003C/li\u003E\n\u003Cli\u003E\nship list can be filtered by \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E: in flight, relative to the active vessel; in the tracking station, relative to the selected object\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHow it acquires the data:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nwhile in space, if the GUI is closed, it will collect the fuel data from the active vessel about every 10 seconds\n\u003C/li\u003E\n\u003Cli\u003E\notherwise, if the GUI is open, it will acquire data from all available vessels\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhich data does it acquire:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nthe name of the ship\n\u003C/li\u003E\n\u003Cli\u003E\nthe number of crew aboard and maximum number of crew\n\u003C/li\u003E\n\u003Cli\u003E\nand a currently hard-coded subset of the fuels (LiquidFuel, Oxidizer, MonoProp); the infrastructure is there to allow easily changing this, so it will work with any other resource, e.g. life support things etc.; if anybody is interested, this just requires some appropriate GUI work\n\u003C/li\u003E\n\u003Cli\u003E\nno persistent storage; as soon as you return to the Main Menu, or exit the game, it\u0027s all discarded\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nObligatory screenshots:\n\u003C/p\u003E\n\u003Cblockquote lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\n\u003Ca href=\u0022//imgur.com/a/RSTob\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDependencies:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nold versions (until 0.8) have a hard dependency on the Toolbar (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60863\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/60863\u003C/a\u003E); I don\u0027t see a reason to make this soft, as there would be no way to open the GUI window\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRelease status: [thread=82996]release thread[/thread].\n\u003C/p\u003E\n\u003Cp\u003E\nLicense: GPLv2; includes some code derived strongly from aviveys Switch Vessel Plugin, which is BSD-2 licensed.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, I\u0027m posting this here because I also do have questions which maybe some of you might be able to answer:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Eis there a more elegant way to load the vessels (to be able to fetch the resources) without actually activating their PartModules? because I think this is what leads to some NREs\u003C/span\u003E\u003Cbr\u003E\u003Cem\u003Esolved\u003C/em\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nhow would I go about re-using the vessel-type selection icons for my own settings/filter menu, and is this actually permitted (by Squad) ?\u003Cbr\u003E\u003Cem\u003Eusing the recommendation by avivey yet; only downside so far is that it the icons are only loaded after switching (once) to the map view\u003C/em\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nsomething is weird with the GUI style in the Tracking Station, but I\u0027m not too concerned about this right now\n\u003C/li\u003E\n\u003Cli\u003E\nany ideas for the GUI? I know it would need a settings menu to select which resources it acquires, and also some filter options to improve the selection of which vessels it force-loads (ideally by individual vessel type, but see my question regarding the icons above); also some select to filter the output list; and it might be useful to sort the ship list by name (currently it is just the same order as your vessels appear elsewhere in the game, e.g. in the tracking station)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCheers \u003Cimg alt=\u0022:)\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E\nDidgey @\n\u003C/p\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/82996-0-23-5-WIP-Ship-List-v0-6?p=1214627\u0026amp;viewfull=1#post1214627\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/82996-0-23-5-WIP-Ship-List-v0-6?p=1214627\u0026amp;viewfull=1#post1214627\u003C/a\u003E\n\u003Cp\u003E\n:\n\u003C/p\u003E\n\u003Cp\u003E\nCould you make it so that you can select the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E from a list instead of selecting it based on the ship you are controlling?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-12T09:30:36Z\u0022 title=\u002210/12/2016 09:30  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 12, 2016\u003C/time\u003E by Kiwa\u003C/strong\u003E\n\u003Cbr\u003E0.9 update for KSP 1.2\n\u003C/span\u003E\n"},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2014-06-02T22:49:25Z","Content":"\n\u003Cp\u003EWith regards to the resource types, TacFuelBalancer by ThunderAerospace seems to inventory all resources, base and custom for a ship so it might be worth trying to chase down the source for that.\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-02T23:05:26Z","Content":"\n\u003Cp\u003EWell - it already does search the list of registered resources (PartResourceLibrary.Instance.resourceDefinitions) and just filter the three I am interested in (by name). The only thing that is missing is a way to enable users to select the list of resources *they* are interested in, as opposed to *me*. Which means adding a GUI for this, with a list of resource check-boxes, or a config file. It might also lead to a requirement for persistent storage for this selection :/ Guess I will wait to see if there is actually any interest in this.\u003C/p\u003E\u003Cp\u003EAnd I was actually more looking at the AlternateResourcePanel because it sports nice icons for the fuels, instead of my crude short two-letter labels, and also nice bar-graphs in addition to the raw numbers.\u003C/p\u003E\n"},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2014-06-02T23:10:03Z","Content":"\n\u003Cp\u003EI\u0027ve had situations where I\u0027ve had to flip through a number of stations to determine which one actually has fuel for a ship that needs it. So \u002B1 interest in this.\u003C/p\u003E\n"},{"CreatedByName":"avivey","CreatedById":98217,"CreatedDateTime":"2014-06-03T04:38:52Z","Content":"\n\u003Cp\u003ETips \u002B shameless plug:\u003C/p\u003E\u003Cp\u003E1. I \u003Cem\u003Ethink \u003C/em\u003EFlightGlobals.Vessels is the list of all ships in the game, including un-loaded ones. Take the ProtoVessel from each of those, and iterate over the ProtoParts - resource data is kept there, no need to actually load vessels. My similar plugin at \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/65769\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/65769\u003C/a\u003E does that for one ProtoVessel.\u003C/p\u003E\u003Cp\u003EUnloaded vessels use no resources anyway.\u003C/p\u003E\u003Cp\u003E2. Reusing squad icons is borderline impractical; There\u0027s no Texture object for them. I have a not-overly-maintainable solution at \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/78183\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/78183\u003C/a\u003E (Buttom of UI.cs) that you can reuse.\u003C/p\u003E\u003Cp\u003E3. UI styles: The only thing I understand about Unity UI is that there\u0027s a global style variable, that you need to set before drawing your elements, and should restore when you\u0027re done.\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-03T19:14:38Z","Content":"\n\u003Cp\u003EWell that\u0027s embarrassing. I totally assumed the ProtoVessel would only contain the \u0022prototype\u0022, as in the VAB-design. If that lets me get rid of the loading... would be cool. Will definitely try it next.\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-06T21:17:48Z","Content":"\n\u003Cp\u003EGithub now has v0.3 commited.\u003C/p\u003E\u003Cp\u003ECleaned out all the vessel loading code, and actually got to test it. Didn\u0027t have any bad things in the debug console, so it looks stable enough for now.\u003C/p\u003E\u003Cp\u003ENext planned feature will be the filtering of the list by vessel type, then the sorting, and possibly an option to ignore remove individual vessels from the list; but unlikely to happen this weekend.\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-12T21:09:13Z","Content":"\n\u003Cp\u003EFiltering is basically functional and commited to github (v0.4). Only downside is it requires the ship list window to be opened once from the map view, otherwise the icons are not loaded/available :/\u003C/p\u003E\u003Cp\u003ECode looks stable so far. Continuing with the plan, probably sorting will be next.\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-15T09:06:13Z","Content":"\n\u003Cp\u003EIn between, released fist public version (v0.5).\u003C/p\u003E\u003Cp\u003EInstead of sorting, todays update includes a new feature: SOI-based filtering, available in-flight and in the tracking station. This actually reduces the vessel list so much that sorting probably will not be needed for now and I can focus on the resource selection, and maybe finally getting the GUI style problems sorted.\u003C/p\u003E\u003Cp\u003EOr have any of you a strong preference to go for sorting first?\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2014-06-20T13:22:34Z","Content":"\n\u003Cp\u003EPublished v0.7 with the selectable reference body for the SOI filtering, as requested. More later next week.\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2016-04-10T09:55:13Z","Content":"\n\u003Cp\u003E\nPublished v0.8 with the update for KSP 1.1 .\n\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2016-10-12T09:29:20Z","Content":"\n\u003Cp\u003E\nPublished v0.9 with the update for KSP 1.2 containing a switchover from Toolbar to ApplauncherButton and some minor Mod API changes.\n\u003C/p\u003E\n"},{"CreatedByName":"Kiwa","CreatedById":109641,"CreatedDateTime":"2017-01-03T16:05:19Z","Content":"\n\u003Cp\u003E\nPublished v0.10 with a fix for the new vessel type icons (KSP 1.2.2), and a change so it is no longer required to enter the map view to have the filter icons.\n\u003C/p\u003E\n"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2017-01-03T16:21:09Z","Content":"\n\u003Cp\u003E\nCant believe this mod isnt getting more love... Its awesome... \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Murdabenne","CreatedById":142825,"CreatedDateTime":"2017-01-07T15:40:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222909170\u0022 data-ipsquote-contentid=\u002273944\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221483460469\u0022 data-ipsquote-userid=\u002277721\u0022 data-ipsquote-username=\u0022Stone Blue\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn \u200E1\u200E/\u200E3\u200E/\u200E2017 at 10:21 AM, Stone Blue said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCant believe this mod isnt getting more love... Its awesome... \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAgree!\u00A0 Sometimes putting it on \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E will gain it more exposure. Much of the time, someone will even volunteer to do the metadata for you.\n\u003C/p\u003E\n"}]}