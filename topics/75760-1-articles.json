{"TopicId":75760,"ForumId":29,"TopicTitle":"How to get the *actual* position at UT for an orbit that enters another SOI?","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-23T06:35:46Z","PageNum":1,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-23T06:35:46Z","Content":"\n\u003Cp\u003EI\u0027m trying to implement an orbit solver for the kOS mod (i.e. let people see their future position at time T, taking into account all maneuver nodes (assuming they get executed as planned) and orbit transitions).\u003C/p\u003E\u003Cp\u003EI\u0027ve almost got it working except for one annoying problem.\u003C/p\u003E\u003Cp\u003EWhen I call the KSP API method Orbit.getPositionAtUT(timestamp) to predict the future position of an orbit patch that\u0027s in an SOI I\u0027m not currently in right now, it gives me the location relative to where that SOI body is NOW, rather than where it will be later at the timestamp.\u003C/p\u003E\u003Cp\u003ESay I\u0027m on a course for a Munar flyby from Kerbin. My future orbit patches therefore consist of an orbit in Kerbin\u0027s SOI that\u0027s aimed about 90 degrees ahead of where the Mun is now, so it then transitions into another orbit patch that\u0027s in the Mun\u0027s SOI for a while, that transitions into an orbit back in Kerbin\u0027s SOI again.\u003C/p\u003E\u003Cp\u003EWhen I take the piece of that in the Mun\u0027s SOI, and call Orbit.getPositionAtUT(timestamp) I end up with totally the wrong position because it\u0027s giving me a position relative to where the Mun is NOW, not where it will be when the transition happens, 90 degrees around its orbit or so.\u003C/p\u003E\u003Cp\u003EHas anyone else encountered this and do they know a good workaround?\u003C/p\u003E\n"}]}