{"TopicId":36264,"ForumId":16,"TopicTitle":"How to calculate DeltaV to get to orbit or to get from orbit to land","CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-07T22:55:30Z","PageNum":1,"Articles":[{"CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-07T22:55:30Z","Content":"\n\u003Cp\u003EHey guys,\u003C/p\u003E\u003Cp\u003EI\u0027m trying to figure out how to calculate the Delta V required to get from Kerbin surface to orbit (any alt) and from Munar orbit to Munar surface. Basically I\u0027m trying to get my numbers to come out similar to the Delta V map numbers. I know the Hohmann Transfer equations and Delta V equations that I need to use. I understand that the Kerbin to orbit calculation might be a little convoluted due to the atmosphere so if I have to hit the \u0022I Believe\u0022 button, I will.\u003C/p\u003E\u003Cp\u003EBasically I am using this example:\u003C/p\u003E\u003Cp\u003EThe Delta V map shows from a 14km munar orbit it requires 640 Delta V to land.\u003C/p\u003E\u003Cp\u003EIm using a Mu value of 6.5138398*10\u003Csup\u003E10\u003C/sup\u003E m\u003Csup\u003E3\u003C/sup\u003E/s\u003Csup\u003E2\u003C/sup\u003E and a Munar radius of 200 km. r\u003Csub\u003E1\u003C/sub\u003E=214000 m and r\u003Csub\u003E2\u003C/sub\u003E=200000 m. If I plug the values into the Hohmann equations I only get between -9.4 and -9.7 m\u003Csup\u003E3\u003C/sup\u003E/s\u003Csup\u003E2\u003C/sup\u003E Delta V depending on whether I use delta v\u003Csub\u003E1\u003C/sub\u003E or delta v\u003Csub\u003E2\u003C/sub\u003E equation respectively.\u003C/p\u003E\u003Cp\u003EWhere am I going wrong?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-09T10:38:51Z\u0022 title=\u002207/09/2013 10:38  AM\u0022 data-short=\u002211 yr\u0022\u003EJuly 9, 2013\u003C/time\u003E by MH60AV8R\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"purpletarget","CreatedById":57317,"CreatedDateTime":"2013-07-07T23:58:24Z","Content":"\n\u003Cp\u003EYour hohmann numbers are probably correct, but...that assumes that your already doing orbital velocity at 0m altitude, which for the Mun is about 570m/s. The surface of the Mun however trundles along at a leisurely 9ish m/s...and good thing too, otherwise jumping over a trashcan would put a poor Kerbal into orbit instantly!\u003C/p\u003E\u003Cp\u003ESo, launching from the Mun requires a bit of Delta-V to get to altitude, but mostly on vacuum worlds, you need to gain (or kill) the orbital velocity needed for your desired orbit.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T00:13:52Z","Content":"\n\u003Cp\u003EYou are sitting on the surface. At equator that puts you at sidereal rotational speed. On the Mun, that\u0027s 9.04 m/s. Periapsis velocity for Hohmann is sqrt((r2/r1)GM/a) = sqrt((214,000m/200,000m)6.5138398x10\u003Csup\u003E10\u003C/sup\u003E/(207,000m)) = 580.26. This means your first burn is going to be 571.22m/s. (I just subtract off the velocity you already have, the 9.04m/s. Assuming Eastward launch, of course.) The apoapsis velocity, using the same formula, will be 542.30m/s. You need 551.71m/s to circularize, so that\u0027s another 9.41m/s burn at apoapsis.\u003C/p\u003E\u003Cp\u003EThe total delta-V required to reach orbit, assuming Eastward launch from equator is, therefore, 580.63m/s. Realistically, it will be slightly higher, depending on how high your TWR is and how well you perform the gravity turn. For ascent in vacuum, the higher the TWR the better.\u003C/p\u003E\u003Cp\u003EFor a rough estimate you can also take escape velocity, which is 807.08m/s and divide that by 1.41 to get 572.40m/s. It\u0027s always going to be an underestimate, but it gives you the absolute minimum delta-V to break away from the surface.\u003C/p\u003E\u003Cp\u003EFinally, the atmosphere. The simple formula to estimate \u003Cem\u003Eadditional\u003C/em\u003E delta-V to leave atmosphere is 4gH/v\u003Csub\u003Et\u003C/sub\u003E. Here, g is surface gravity, H is scale height of the atmosphere, and v\u003Csub\u003Et\u003C/sub\u003E is the surface terminal velocity. For Kerbin that works out to 1,832m/s. This assumes TWR of roughly 2 of your rocket, which optimizes fuel consumption on ascent.\u003C/p\u003E\n"},{"CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-08T00:18:41Z","Content":"\n\u003Cp\u003EAnyone else care to weigh in? This is REALLY bugging me because math doesn\u0027t lie...and don\u0027t say to download a Mod because I like the vanilla version of things.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T00:22:58Z","Content":"\n\u003Cp\u003EWhat\u0027s wrong with equations I gave you? They are absolutely precise.\u003C/p\u003E\n"},{"CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-08T00:29:18Z","Content":"\n\u003Cp\u003ESorry, I posted that last post and didn\u0027t see you had responded.\u003C/p\u003E\u003Cp\u003EK^2, I like the math you presented. Where did you get the equation you used for the first Periapsis equation?\u003C/p\u003E\u003Cp\u003EThe equations I was using were Delta V1=sqrt(Mu/r1)*(sqrt(2*r2/r1\u002Br2)-1) and Delta V2=sqrt(Mu/r2)*(1-sqrt(2*r1/r1\u002Br2)). The equation you used looks like a derivation of the one I\u0027m using. What are the definitions of \u0027M\u0027 and \u0027G\u0027? And why did you use the average of the radii?\u003C/p\u003E\n"},{"CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-08T00:38:14Z","Content":"\n\u003Cp\u003EOk, figured out the G and the M. I also found the equation you used. You worked the problem backwards from what I was asking though. Lets say I am parked in orbit, what Delta V does it take to get from that orbit to the surface?\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T00:44:36Z","Content":"\n\u003Cp\u003EYes, these are the same equations, but for actual velocity, rather than change. Works out the same once you take everything into account.\u003C/p\u003E\u003Cp\u003EWithout atmosphere, perfect landing is the exact reversal of perfect takeoff. So ideally, delta-V is going to be the same. However, \u0022perfect landing\u0022 requires a suicide burn. So you perform a de-orbiting burn to put yourself on transfer orbit that just touches the surface, and then you burn to halt right before hitting the surface. Of course, if you mess up the suicide burn, splat. Hence the name. So in practice, you burn earlier which means you\u0027ll need more fuel to fight gravity as you do final adjustments. How much extra fuel you use will depend on how much of margin you want for errors. I would recommend about 20% in reserve.\u003C/p\u003E\u003Cp\u003EThen, of course, there are alternative landing techniques if you want to land at a precise location. These tend to require a lot more fuel, but it all depends on exactly what you are planning to do.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2013-07-08T00:58:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003EOf course, if you mess up the suicide burn, splat.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf your periapsis just touches the surface, you can easily avoid going splat.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T01:03:44Z","Content":"\n\u003Cp\u003ENot once you started the deceleration burn. That drops apoapsis, causing your trajectory to cut through the planet/moon. So if it\u0027s just a matter of, \u0022Oh, crap. Missed my window.\u0022 Then yes, a small correction burn will get you to miss the surface and you can go for another try. But if you only realized that you are not going to make it half way through your burn, you\u0027re done.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-08T01:22:27Z","Content":"\n\u003Cp\u003EPlease note that the calculations for atmospheric drag loss are, in general, highly path (that is, trajectory) dependent. How much fuel you expend on your way to orbit depends on how you fly. Any mathematical relationship you see for atmospheric drag loss should be regarded as a loose approximation until you get in game and can verify manually. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T01:45:42Z","Content":"\n\u003Cp\u003EVery much so. Yet 4gH/v\u003Csub\u003Et\u003C/sub\u003E formula goes very nicely with all of the empirical results available on \u0022best\u0022 ascent scenarios. While a loose approximation, it\u0027s a pretty good tool for estimating how much you are going to save by change of elevation, for example, which will change v\u003Csub\u003Et\u003C/sub\u003E value.\u003C/p\u003E\n"},{"CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-08T02:08:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003EYou are sitting on the surface. At equator that puts you at sidereal rotational speed. On the Mun, that\u0027s 9.04 m/s. Periapsis velocity for Hohmann is sqrt((r2/r1)GM/a) = sqrt((214,000m/200,000m)6.5138398x10\u003Csup\u003E10\u003C/sup\u003E/(207,000m)) = 580.26. This means your first burn is going to be 571.22m/s. (I just subtract off the velocity you already have, the 9.04m/s. Assuming Eastward launch, of course.) The apoapsis velocity, using the same formula, will be 542.30m/s. You need 551.71m/s to circularize, so that\u0027s another 9.41m/s burn at apoapsis.\u003Cp\u003EThe total delta-V required to reach orbit, assuming Eastward launch from equator is, therefore, 580.63m/s. Realistically, it will be slightly higher, depending on how high your TWR is and how well you perform the gravity turn. For ascent in vacuum, the higher the TWR the better.\u003C/p\u003E\u003Cp\u003EFor a rough estimate you can also take escape velocity, which is 807.08m/s and divide that by 1.41 to get 572.40m/s. It\u0027s always going to be an underestimate, but it gives you the absolute minimum delta-V to break away from the surface.\u003C/p\u003E\u003Cp\u003EFinally, the atmosphere. The simple formula to estimate \u003Cem\u003Eadditional\u003C/em\u003E delta-V to leave atmosphere is 4gH/v\u003Csub\u003Et\u003C/sub\u003E. Here, g is surface gravity, H is scale height of the atmosphere, and v\u003Csub\u003Et\u003C/sub\u003E is the surface terminal velocity. For Kerbin that works out to 1,832m/s. This assumes TWR of roughly 2 of your rocket, which optimizes fuel consumption on ascent.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo I\u0027m having a little trouble understanding where the following numbers came from: \u0022You need 551.71m/s to circularize\u0022 and \u0022The total delta-V required to reach orbit, assuming Eastward launch from equator is, therefore, 580.63m/s\u0022 I got the rest of the numbers figured out but I can\u0027t figure out where the 551.71 comes from. Also, the 580.63 is very close to what was calculated at 580.26 m/s, why are these different?\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T02:14:11Z","Content":"\n\u003Cp\u003E551.71 m/s is the orbital velocity at 14km altitude. You can use the formula I posted earlier with r\u003Csub\u003E1\u003C/sub\u003E = r\u003Csub\u003E2\u003C/sub\u003E.\u003C/p\u003E\u003Cp\u003EAs for the difference, I suspect rounding errors. They are more than sufficient to introduce a discrepancy of 1 part per 1,000.\u003C/p\u003E\n"},{"CreatedByName":"MH60AV8R","CreatedById":72316,"CreatedDateTime":"2013-07-08T03:41:16Z","Content":"\n\u003Cp\u003EI really appreciate your help K^2. It\u0027s been awhile since I took an orbital mechanics class. Can you explain why we calculate both the apoapsis and periapsis velocities? \u003C/p\u003E\u003Cp\u003EI figured out where you got the 580.63 number from. You took the difference of the orbital velocity and apoapsis velocity which was 9.41 and added it to the periapsis velocity to get the total required. So, from my understanding, we calculated we needed 571.22 m/s of velocity to get to 214km altitude and 9.41 Delta V to circularize?\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T05:53:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MH60AV8R\u0022 data-cite=\u0022MH60AV8R\u0022\u003E\u003Cdiv\u003ESo, from my understanding, we calculated we needed 571.22 m/s of velocity to get to 214km altitude and 9.41 Delta V to circularize?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECorrect. The actual altitude will read as 14km, of course, since the game will subtract the radius of the Mun.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ECan you explain why we calculate both the apoapsis and periapsis velocities? \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBecause the ship will slow down as it races from periapsis to apoapsis. (Or vice versa, speed up on the way down.) This is just consequence of conservation of energy.\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-08T10:09:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003ENot once you started the deceleration burn. That drops apoapsis, causing your trajectory to cut through the planet/moon. So if it\u0027s just a matter of, \u0022Oh, crap. Missed my window.\u0022 Then yes, a small correction burn will get you to miss the surface and you can go for another try. But if you only realized that you are not going to make it half way through your burn, you\u0027re done.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou don\u0027t have to point retrograde during the whole braking burn. I thought that would be most efficient too, until Nao demonstrated otherwise in some other thread... It turns out to be better to pitch up and keep your vspeed at 0 during the braking burn, though the difference is only noticeable if your TWR is in the 1-1.5ish range.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-07-08T10:45:06Z","Content":"\n\u003Cp\u003EThat is not true. Burning retrograde optimizes fuel consumption. It\u0027s simple calculus. Something wasn\u0027t done right in these experiments.\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-08T14:42:37Z","Content":"\n\u003Cp\u003ELet\u0027s do the calculus then. Simple-ish, nonlinear so we\u0027ll need to pick some example cases and integrate numerically. Perhaps a new thread on numerical trajectory optimization is in order?\u003C/p\u003E\u003Cp\u003EI convinced myself with a quick little Euler-integrating spreadsheet, but it\u0027s not hard to do something more sophisticated. If you allow your altitude to drop, you also gain horizontal speed which you have to counteract. By my numbers it looks worse than the steering losses you incur in a constant-altitude landing.\u003C/p\u003E\n"},{"CreatedByName":"Mr Shifty","CreatedById":68146,"CreatedDateTime":"2013-07-08T16:07:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EPerhaps a new thread on numerical trajectory optimization is in order?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPlease post a link here if you do this. I would love to see the math.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-08T16:34:21Z","Content":"\n\u003Cp\u003EI would love to participate as well!\u003C/p\u003E\n"},{"CreatedByName":"Mr Shifty","CreatedById":68146,"CreatedDateTime":"2013-07-08T17:34:30Z","Content":"\n\u003Cp\u003EHere\u0027s a test case to start with:\u003C/p\u003E\u003Cp\u003EStart from a 10 km x 0 km, equatorial, eastbound orbit over the Mun.\u003C/p\u003E\u003Cp\u003EThe landing burn starts at 1 km altitude; here are some parameters for the orbit at that point:\u003C/p\u003E\u003Cp\u003E(These speeds are orbital, not surface speeds.)\u003C/p\u003E\u003Cp\u003EVertical speed: 8.4 m/s\u003C/p\u003E\u003Cp\u003EHorizontal speed: 574.7 m/s\u003C/p\u003E\u003Cp\u003ETotal speed: 574.8 m/s\u003C/p\u003E\u003Cp\u003ETime to periapsis: 228.7 seconds\u003C/p\u003E\u003Cp\u003EContest: Total m/s required using a constant thrust retrograde burn vs. constant altitude burn followed by a soft landing burn.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-08T17:54:42Z\u0022 title=\u002207/08/2013 05:54  PM\u0022 data-short=\u002211 yr\u0022\u003EJuly 8, 2013\u003C/time\u003E by Mr Shifty\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-08T17:53:10Z","Content":"\n\u003Cp\u003EPosing this as a challenge would be a good way of experimentally confirming the math here, and might get Nao\u0027s attention - he\u0027s much better at flying the constant-altitude landings than I am. But maybe Minmus would be a better target, since there we could require landing on one of the lakebeds to rule out any differences due to landing altitude. The results will be most interesting for a fixed craft with low TWR, which for Minmus would mean a tiny engine.\u003C/p\u003E\n"},{"CreatedByName":"Mr Shifty","CreatedById":68146,"CreatedDateTime":"2013-07-08T18:07:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EPosing this as a challenge would be a good way of experimentally confirming the math here . . .The results will be most interesting for a fixed craft with low TWR, which for Minmus would mean a tiny engine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr a very large craft:)\u003C/p\u003E\u003Cp\u003ESounds like a good idea; I\u0027ll have to work on setting up the challenge when I get a chance. Probably a persistence file with a fixed, low TWR craft in a low circular orbit around Minmas.\u003C/p\u003E\u003Cp\u003EI\u0027d still like to see the math though.\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-08T18:18:05Z","Content":"\n\u003Cp\u003ELet me dig up some papers I was looking at last month...\u003C/p\u003E\u003Cp\u003EHow much of \u003Ca href=\u0022http://link.springer.com/article/10.1007%2Fs12555-011-0618-0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://link.springer.com/article/10.1007%2Fs12555-011-0618-0\u003C/a\u003E (click \u0022look inside\u0022) can you guys see if you\u0027re not coming from an academic domain? I was going to start from those dynamic equations on page 2, but do a simpler discretization than the pseudospectral stuff they used, and not impose some of the constraints they had that are unnecessary for crazy KSP landings. Start with equatorial for simplicity, so phi = alpha = v_phi = 0.\u003C/p\u003E\u003Cp\u003EI was planning on using \u003Ca href=\u0022http://openopt.org\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://openopt.org\u003C/a\u003E for formulation and interface to optimization solvers, though any simple ODE integrator can tell us the answer for the restricted cases of retrograde burn vs constant-altitude burn.\u003C/p\u003E\n"}]}