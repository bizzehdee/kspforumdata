{"TopicId":103534,"ForumId":32,"TopicTitle":"Running KSP in a Linux VM","CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-06T16:54:35Z","PageNum":1,"Articles":[{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-06T16:54:35Z","Content":"**Edit: Got this ALMOST working at acceptable framerates but with pretty severe graphical glitches, findings are in** [**post #19**](https://forum.kerbalspaceprogram.com/threads/114932-Running-KSP-in-a-Linux-VM?p=1825056\u0026viewfull=1#post1825056)\n\n[sorry if this is the wrong forum for thus.]\n\nI\u0027ve decided that I\u0027d like to be able to run KSP x64 -- and it\u0027s pretty well known how stable the Windows x64 builds are...\n\nSo I was pondering building a Linux VM for KSP (and Minecraft, but that\u0027s not relevant) -- as a bonus, it gives me an extra layer of protection in case I inadvertently install a malicious mod.\n\nI have plenty of experience with virtualization and Linux (I work with both professionally), but I\u0027ve never actually tried to play graphics-intensive games in a VM before. I know that I\u0027ll need a hypervisor that supports hardware accelerated graphics -- any suggestions? (Ideally free or low cost)\n\nAlternatively, is there anyone running KSP in this arrangement who\u0027d care to share the details of their setup and any observed pros/cons?\n\n[No, I\u0027m not interested in dual booting or making Linux my primary OS.]\n\n**Edited \u003Ctime datetime=\u00222015-04-07T04:06:58Z\u0022 title=\u002204/07/2015 04:06  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 7, 2015\u003C/time\u003E by dewin**"},{"CreatedByName":"Taki117","CreatedById":89975,"CreatedDateTime":"2015-04-06T16:59:56Z","Content":"I\u0027ve never heard of a malicious mod. I just Dual boot Linux for my KSP fix."},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2015-04-06T17:15:47Z","Content":"Why no dual boot ?\n\nJust install Linux in a small partition (30GB is more than enough plus let\u0027s say 4GB Swap) ? A 64bit VM on a 32 bit OS (stick tongue) doesn\u0027t make things better. And i would guess dual boot is easier to maintain in cases of ... drawbacks.\n\nKSP (fairly modded) runs perfectly stable and fast (for me) on (X)ubuntu, Mint, Debian ... under different Setups (yes, have bought more than one licence :-)). Mods i\u0027m using: B9, KW, Scansat, Station Parts Ext., KJR, KAS, FAR, Karbonite(\u002B), Proc. Fairings, Camera Tools, Raster Prop Monitor, NF Solar, Waypoint Manager.\n\n- Notebook, 4GB Ram, i3, Intel 4400 Graphics. Lowest Graphics Settings.\n\n- Laptop, 16GB Ram, i7, Xubuntu and Debian Wheezy, (XFCE, Gnome), Nvidia GT570M\n\n- Desktop, X/Lubuntu, i7, 16GB, Nvidia GT660\n\nUsing the propriatary nvidia driver i even have AA.\n\nHope i could turn you to the dark side ...\n\nKlaus"},{"CreatedByName":"Lord Aurelius","CreatedById":71687,"CreatedDateTime":"2015-04-06T17:31:40Z","Content":"Running games in a VM doesn\u0027t usually work very well. The big issue is that the VM doesn\u0027t have direct access to the video hardware for rendering, so your 3D performance is going to be terrible compared to running a dualboot. If you don\u0027t want to mess with repartitioning your hard drive, I would suggest following one of the many excellent guides for making a bootable usb stick and just boot off that. An 8GB stick is the minimum I would recommend, it should still be big enough for Linux, KSP, and all the mods you could want (~2GB for Linux, ~2GB for base KSP, so 4GB for mods).\n\nAs far as a hypervisor setup, I\u0027ve heard of such things but from what I\u0027ve heard such setups can be a huge pain to get everything working. The only free one I\u0027ve heard of that might let you do what you\u0027re asking is Xen, which is itself is basically a minimal linux install to run the Xen utilities and then you run Windows and Linux as guests, and you would only be able to use your video card in one guest or the other. I don\u0027t have any experience with actually setting it up, I was looking for a similar thing awhile ago and came to the conclusion that there\u0027s really no good way to do it with virtualization, dualboot (or a bootable thumb drive) is much simpler and is guaranteed to work."},{"CreatedByName":"bakanando","CreatedById":126310,"CreatedDateTime":"2015-04-06T17:48:23Z","Content":"The main issue with KSP is with memory hogging, which will increase given the overhead of running two OS simultaneously. So try only if you have RAM to spare.\n\nI normally use virtualbox for my vm\u0027s, with the guest-additions installed.\n\nIf I remember correctly, Unity doesn\u0027t support 64-bit outside of win-64 and the only change between both ksp is the libraries used (either lib32 or lib64). Can\u0027t say much about the RAM usage though, never had a memory issue with ksp and I use ksp.x32."},{"CreatedByName":"sp4c3","CreatedById":111958,"CreatedDateTime":"2015-04-06T17:58:00Z","Content":"I personally know no hypervisor for windows, which is able to accelerate graphics in a way, that gaming works.\n\nOn the Linux side, KVM an Xen both are able to pass-through real pci(e) hardware to the guests. Also video cards. My current setup works that way. Gentoo for everything except of windows games. Those run in a VM.\n\nSo if you are using Windows as your hostos, you\u0027re lost."},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-06T18:51:09Z","Content":"(Forums ate my first attempt at this post, take 2!)\n\n\u003E \n\u003E Why no dual boot ?\n\u003E Just install Linux in a small partition (30GB is more than enough plus let\u0027s say 4GB Swap) ? A 64bit VM on a 32 bit OS (stick tongue) doesn\u0027t make things better. And i would guess dual boot is easier to maintain in cases of ... drawbacks.\n\nI specifically don\u0027t want to dual boot because I want my Windows environment to continue to be available while playing KSP. The reasons are personal, not technical -- I\u0027m more than capable of setting it up but I\u0027m looking for an alternative.\n\n\u003E \n\u003E Running games in a VM doesn\u0027t usually work very well. The big issue is that the VM doesn\u0027t have direct access to the video hardware for rendering, so your 3D performance is going to be terrible compared to running a dualboot.\n\nSome versions of VMWare claim support for hardware acceleration in the guests, though it\u0027s unclear as to whether that applies to any of the free versions. As noted above, there\u0027s reasons I don\u0027t want to dual boot (mainly the \u0027rebooting\u0027 part.)\n\n\u003E \n\u003E The main issue with KSP is with memory hogging, which will increase given the overhead of running two OS simultaneously. So try only if you have RAM to spare.\n\n12GB available, so I could easily give the guest 6-8GB.\n\n\u003E \n\u003E If I remember correctly, Unity doesn\u0027t support 64-bit outside of win-64 and the only change between both ksp is the libraries used (either lib32 or lib64). Can\u0027t say much about the RAM usage though, never had a memory issue with ksp and I use ksp.x32.\n\nModded KSP installs can start causing memory issues (fairly quickly with large part mods), and and running KSP\u0027s 64-bit Linux build seems to be the recommended way around them if other efforts don\u0027t work (AdvancedTextureManager, etc.)"},{"CreatedByName":"technicalfool","CreatedById":70430,"CreatedDateTime":"2015-04-06T19:00:07Z","Content":"\u003E \n\u003E I personally know no hypervisor for windows, which is able to accelerate graphics in a way, that gaming works.\n\nVirtualBox supports 3D acceleration with the guest additions. I\u0027m not sure how well this works for KSP, but it seems to work okay for the Win8.1 VM and the few crappy Windows Store games I\u0027ve tested it with.\n\nWhat it doesn\u0027t support, oddly enough, is 2D acceleration."},{"CreatedByName":"jarmund","CreatedById":126888,"CreatedDateTime":"2015-04-06T19:36:30Z","Content":"My experience with VMs \u002B games: Don\u0027t\n\nThe performance penalty of the extra layers of abstraction will make you scream in agony, almost as much as your kerbals normally do. The only benefit I can see here is the memory-usage, but you\u0027re going to need loads to make up for the fact that you\u0027ll be running 2 OSes in addition to KSP itself.\n\nSeeing as you have plenty of professional linux experience you should be aware of how trivial it is to set up a dual boot, or just install it on a flash drive and run from there, if you prefer.\n\nAlso, as someone else said, I\u0027ve never heard of a malicious mod either."},{"CreatedByName":"Snarfster","CreatedById":80347,"CreatedDateTime":"2015-04-06T20:10:46Z","Content":"I know you don\u0027t want to go dual boot, as you mentioned. This will limit you though.\n\nI run Cinnamon Mint 64, works like a charm. (My KSP takes 4.5GB in the VAB, without a stutter.)\n\nSecond best option would be to make a bootable USB drive with linux on it. Although that also doesn\u0027t cover your needs 100% (being able to use windows whilst...)\n\nTough one."},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2015-04-06T20:13:52Z","Content":"\u003E \n\u003E I specifically don\u0027t want to dual boot because I want my Windows environment to continue to be available while playing KSP. The reasons are personal, not technical -- I\u0027m more than capable of setting it up but I\u0027m looking for an alternative.\n\nI\u0027d just play under windows, then ... am a follower of KISS.\n\n:-)\n\nK\n\n**Edited \u003Ctime datetime=\u00222015-04-06T20:17:35Z\u0022 title=\u002204/06/2015 08:17  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 6, 2015\u003C/time\u003E by kemde**"},{"CreatedByName":"Lord Aurelius","CreatedById":71687,"CreatedDateTime":"2015-04-06T20:39:12Z","Content":"Many VMs claim to provide 3D acceleration, but it is very limited and flat out doesn\u0027t work on a lot of 3D games due to driver issues because the VM doesn\u0027t see your AMD/Intel/Nvidia GPU, it sees a generic virtual video device and anything beyond simple games (like from the windows store, even some of those may not work correctly) will likely have issues, not to mention the performance penalties. The best integration I\u0027ve seen with this is Parallels for mac (it actually allows you to play some proper 3D games from what I\u0027ve heard), but that\u0027s for running windows on a Mac, I haven\u0027t heard of a similar option that works quite as well for running linux on windows with decent 3D performance.\n\nAnother thought: With the correct settings I\u0027ve gotten 32-bit KSP remarkably stable on windows even with a lot of mods and visual improvements. If you use the -force-opengl flag, you can save an entire gigabyte of RAM on just the stock game. I\u0027ve heard that some people have reported performance problems with it, YMMV but it works well for me. Also try deleting parts that you don\u0027t use from the gamedata folder. There\u0027s a mod called autopruner (link is on the SETI page in my signature) that supports batch renaming which effectively hides the parts from the game so you can still easily get the parts back if you want."},{"CreatedByName":"v8Dave","CreatedById":134518,"CreatedDateTime":"2015-04-06T21:16:10Z","Content":"\u003E \n\u003E I specifically don\u0027t want to dual boot because I want my Windows environment to continue to be available while playing KSP. The reasons are personal, not technical -- I\u0027m more than capable of setting it up but I\u0027m looking for an alternative.\n\nBoot in a Linux and run Windows in a VM.\n\nAnd if you don\u0027t own the hardware don\u0027t assume that the contends of a local VM cannot be discovered by a sys admin."},{"CreatedByName":"Cydonian Monk","CreatedById":69224,"CreatedDateTime":"2015-04-06T21:22:21Z","Content":"\u003E \n\u003E Many VMs claim to provide 3D acceleration, but it is very limited and flat out doesn\u0027t work on a lot of 3D games due to driver issues because the VM doesn\u0027t see your AMD/Intel/Nvidia GPU, it sees a generic virtual video device....\n\nI can confirm this is the case for VirtualBox running a guest GNU/Linux system on my Win7 box at work. The hardware (a decent AMD card from a couple years back) is only exposed as an \u0022InnoTek GmbH VirtualBox Graphics Adapter.\u0022 And the 2D acceleration only works for Windows guest systems. YMMV.\n\n\u003E \n\u003E The best integration I\u0027ve seen with this is Parallels for mac (it actually allows you to play some proper 3D games from what I\u0027ve heard), but that\u0027s for running windows on a Mac\n\nParallels for Mac is the greatest thing since sliced bread. As far as I could tell it provided direct hardware access to the guest, and its hardware pass-through worked just as well for Ubuntu as it did for Win7. VMWare\u0027s solution was equally capable when I last used it (a version or two ago). Until I finally caved and bought a new Windows box to game on, I played graphics-heavy games through one of those two via Windows as a guest on OS-X. That doesn\u0027t help the OP much, though. \n\nAnd running KSP on Linux isn\u0027t a panacea - there are still oddities and minor quirks just like there are on Windows. But the only way to figure out if it works for you at all is to try it. Just remember us and report back when it works out. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-06T21:30:31Z","Content":"It looks like Virtualbox may have [proper 3D acceleration support](https://www.virtualbox.org/manual/ch04.html#guestadd-video), it\u0027s just disabled by default as it\u0027s \u0022experimental\u0022. Presumably it presents itself as a generic video adapter if disabled.\n\nI\u0027ll be trying this when I get home tonight, though there\u0027s going to be a lot of other overhead (Like figuring out Steam for Linux, whee!). I\u0027m *hoping* I can get the two KSP installs to share the same space, but we\u0027ll see -- one problem at a time."},{"CreatedByName":"Cydonian Monk","CreatedById":69224,"CreatedDateTime":"2015-04-06T21:38:26Z","Content":"\u003E \n\u003E It looks like Virtualbox may have [proper 3D acceleration support](https://www.virtualbox.org/manual/ch04.html#guestadd-video), it\u0027s just disabled by default as it\u0027s \u0022experimental\u0022. Presumably it presents itself as a generic video adapter if disabled.\n\nInteresting. Of course we\u0027re about 28 versions and half a century behind the one linked (assuming the current manual is for the current version), so it\u0027s unlikely it\u0027d work for me \\_at\\_ work if it\u0027s something recently fixed. Scuttlebutt was Oracle only has a handful of maintenance devs on the VBox project now, so who knows if they\u0027ve got the right personell to ever pull that out of \u0022Experimental.\u0022 I might just try that at home some weekend.\n\n**Edited \u003Ctime datetime=\u00222015-04-06T21:40:27Z\u0022 title=\u002204/06/2015 09:40  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 6, 2015\u003C/time\u003E by Cydonian Monk**"},{"CreatedByName":"Lord Aurelius","CreatedById":71687,"CreatedDateTime":"2015-04-06T22:42:08Z","Content":"Steam for Linux is very simple to set up if you use an Ubuntu derivative (I recommend Linux Mint), you can install it from the software center or download a .deb package installer and everything seems to just work without messing around too much. The big issue with gaming on Linux for me is getting the graphics driver up and running, although that\u0027s gotten a lot better in recent years and most Ubuntu derivatives will autodetect your card and provide an easy way to automatically download and install the driver (unless you\u0027re running this on a laptop with nvidia optimus anyways)."},{"CreatedByName":"SelectHalfling0","CreatedById":105051,"CreatedDateTime":"2015-04-06T22:52:15Z","Content":"I help run a *Minecraft Adventure Day Camp* during the summer. Last year we tried running a VM software with MinecraftEDU. There was plenty of RAM, but the video card made the lag terrible and there were graphics glitches everywhere. We decided to just stick with the old \u0022use this account on the computer\u0022 option.\n\nOf course, I am talking about a single-computer connecting to all the others, which is probably different from what your describing."},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-07T03:43:42Z","Content":"Here\u0027s an update:\n\nI opted for the latest Linux Mint for my testing.\n\n**Virtualbox**\n\nVirtualbox claims accelerated graphics, and they certainly felt reasonably \u0027snappy\u0027 during the install process. It also worked with Virtualbox out of the box, including proper sharing of mouse/keyboard and being able to resize the VM window and having the VM\u0027s desktop scale accordingly.\n\nHowever, KSP ran at a crawl (seconds-per-frame speed, as opposed to frames-per-second). I fiddled a bit -- but even after confirming that hw acceleration was, in fact, happening -- no luck. \n\n**VMWare Player**\n\nFree for personal use, which is all I\u0027m doing here. (Otherwise it\u0027s an evaluation).\n\nMuch more of a headache to get setup, but KSP started *much* faster and definitely had proper acceleration going on -- though I also had some impressive graphical glitches, like sometimes having a hall of mirrors-effect (the background of the scene not redrawing properly) and, at one point, everything being rendered on a solid white background.\n\nOh, also, KSP doesn\u0027t think it can run at 1920x1080, but this might be due to the VM not having the full screen real estate available (due to VMWare player\u0027s window chrome). This is minor and probably easily fixable.\n\nAlso, Steam launches the x86 client by default, but the x64 client is also available.\n\nWill need more tinkering to see if this is remotely feasible... also, while it\u0027s getting accelerated, it\u0027s probably still not as fast as running native.\n\nI\u0027ll tinker more to see what I can find out.\n\n**Observed graphical glitches:**\n\nVessel background doesn\u0027t update when there\u0027s no objects in the background (e.g. ship in Kerbin orbit, looking away from Kerbin). This causes the vessel to render on top of previous frames until a body comes into view. (Fixed by turning off Edge Highlightting (PPFX))\n\nMaking any change to graphics settings hangs the game for a *long* time\n\nSpace Center models are basically partially-rendered wireframes, unless I zoom in close to one -- which causes other issues. (Fixed by turning off Edge Highlightting (PPFX))\n\nSpace Center looks extremely ugly, with lots of z-fighting.\n\nLarge chunks of the VAB UI don\u0027t display, including buttons for categories and the background behind parts. (Fixed by Force Fallback Shaders, but that breaks most of the text.)\n\n**Edited \u003Ctime datetime=\u00222015-04-07T04:01:56Z\u0022 title=\u002204/07/2015 04:01  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 7, 2015\u003C/time\u003E by dewin**"},{"CreatedByName":"jarmund","CreatedById":126888,"CreatedDateTime":"2015-04-07T08:54:21Z","Content":"\u003E \n\u003E **Observed graphical glitches:**\n\u003E \n\u003E Vessel background doesn\u0027t update when there\u0027s no objects in the background (e.g. ship in Kerbin orbit, looking away from Kerbin). This causes the vessel to render on top of previous frames until a body comes into view. (Fixed by turning off Edge Highlightting (PPFX))\n\u003E \n\u003E Making any change to graphics settings hangs the game for a *long* time\n\u003E \n\u003E Space Center models are basically partially-rendered wireframes, unless I zoom in close to one -- which causes other issues. (Fixed by turning off Edge Highlightting (PPFX))\n\u003E \n\u003E Space Center looks extremely ugly, with lots of z-fighting.\n\u003E \n\u003E Large chunks of the VAB UI don\u0027t display, including buttons for categories and the background behind parts. (Fixed by Force Fallback Shaders, but that breaks most of the text.)\n\nI wouldn\u0027t blame those issues on the virtualization. I had the same issue on my linux install until i started using the official nvidia driver instead of the open source driver."},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-07T14:48:51Z","Content":"\u003E \n\u003E I wouldn\u0027t blame those issues on the virtualization. I had the same issue on my linux install until i started using the official nvidia driver instead of the open source driver.\n\nI suspected they were driver-related as well, but in my case I\u0027m using VMware\u0027s video drivers inside the VM so it might not be that easy.\n\nThat said, nVidia cards are horrendously buggy -- an issue the drivers mostly patch around. The best example of this I\u0027ve seen is when WoW first released a 64-bit client: tons of minor graphic issues, fixed by... renaming wow64.exe to wow.exe so that the drivers could apply the correct game-specific fixes. (Renaming games to hl2.exe has been suggested fix in other cases, as well.)\n\nI\u0027ll tinker more after work today."},{"CreatedByName":"Lord Aurelius","CreatedById":71687,"CreatedDateTime":"2015-04-07T16:00:04Z","Content":"It\u0027s not just Nvidia cards, I\u0027ve had similar issues with ATI cards, but updating ATI drivers has historically been much more painful than with Nvidia. Both companies have gotten a lot better in recent years from what I\u0027ve observed though, especially in terms of Linux support. Both WoW and hl2 are old games now and not particularly relevant to the current state of affairs, especially given that the current GPUs are entirely different architectures from what was being used in that era.\n\nUnfortunately, unless you have a VM that supports pci-e hardware pass-through you\u0027re not going to be able to use those GPU drivers. Without direct hardware access, the VM guest can\u0027t even see your actual video card, only the generic video adapter interface that the VM software provides so even if you managed to get the drivers installed they wouldn\u0027t actually do anything.\n\nThat said, it looks like VMware may support passthrough, take a look at [this](http://esxi.oeey.com/2013/11/how-to-pci-passthrough.html), but I\u0027m not sure it works on the free version."},{"CreatedByName":"stampy","CreatedById":142278,"CreatedDateTime":"2015-05-07T20:54:44Z","Content":"I think I\u0027m about to give Mint 17.1 under Parallels a while (late 2013 macbook pro, 16gb)... if anyone has the knowledge to warn me off before I dump time into it, it would be appreciated ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif). Otherwise, I\u0027ll post results.\n\nLove my kerbals... just isn\u0027t playable on mac anymore."},{"CreatedByName":"Lord Aurelius","CreatedById":71687,"CreatedDateTime":"2015-05-07T21:17:12Z","Content":"While gaming in parallels on a mac using windows works reasonably well from what I\u0027ve heard, I don\u0027t know how well the 3D acceleration for Linux works. Still, setting up a VM doesn\u0027t take all that long and I would be curious to hear how well Linux fares.\n\nIf you have an extra copy of windows (or if not, windows 10 is still in beta and free at the moment) that might be another option if Linux gives you issues."},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-05-07T22:07:14Z","Content":"\u003E \n\u003E If you have an extra copy of windows (or if not, windows 10 is still in beta and free at the moment) that might be another option if Linux gives you issues.\n\nThe whole point of this is to be able to run 64-bit KSP, which only runs stable in Linux.\n\n(As for me, I realized all\u0027s I did on my home PC was play indie games that all have Linux builds and browse the internet -- and discovered I had an 80GB partition just set aside anyways.. so I just went to dual-booting. Haven\u0027t been in Windows for weeks, unless I\u0027m at work.)"}]}