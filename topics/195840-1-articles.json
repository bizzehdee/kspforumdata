{"TopicId":195840,"ForumId":29,"TopicTitle":"How do you calculate closest ground track point to TGT","CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-24T15:51:30Z","PageNum":1,"Articles":[{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-24T15:51:30Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to learn how I would calculate when a craft in orbit would have a ground track that flies\u00A0over/close to a Target that is on the ground.\n\u003C/p\u003E\n\u003Cp\u003E\nI know you can use the stock map for this, but if you\u0027re in IVA, that information is not available. (ignoring Scansat and other such mods for this query) It\u0027s all so easy with the visual representation that scansat gives... Providing you\u0027re not brute forcing it, just need to wait until the orbit looks close to passing over the landed vessel. Then perform an orbit adjustment burn so that ground track line goes right over the lander.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve seen\u00A0the \u0022closest approach distance\u0022 and \u0022time to closest approach\u0022\u00A0calculations in IVA mods MAS and RPM. I\u0027m hoping there was someone who knew the funky maths involved for this calculation, who might be able to modify that calc so it works for a the target on the ground? ie the closest approach would be the from the ground track path, not the distance from the orbiting vessel to the ground vessel.\n\u003C/p\u003E\n\u003Cp\u003E\nI know \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E, has got their awesome trajectories\u00A0tool with all it\u0027s wonderful visualisations, but what I\u0027m after is a calculation that can be used to find the future orbit when I should perform that orbit adjustment so the\u00A0ground track gets very close to the point where the landed vessel is at.\u003Cbr\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2020-07-24T19:15:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223825564\u0022 data-ipsquote-contentid=\u0022195840\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221595605890\u0022 data-ipsquote-userid=\u002228891\u0022 data-ipsquote-username=\u0022cyberKerb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, cyberKerb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI know \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E, has got their awesome trajectories\u00A0tool with all it\u0027s wonderful visualisations, but what I\u0027m after is a calculation that can be used to find the future orbit when I should perform that orbit adjustment so the\u00A0ground track gets very close to the point where the landed vessel is at.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou could do this in KSPTOT\u0027s \u003Cspan\u003EL\u003C/span\u003Eaunch Vehicle Designer with some ease I think:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nCreate a ground object at the point you want to overfly;\n\u003C/li\u003E\n\u003Cli\u003E\nSet up your initial state, an initial coast, an impulsive delta-v maneuver, and another post-delta-v coast;\n\u003C/li\u003E\n\u003Cli\u003E\nSet up a maximum \u0022extrema\u0022 for ground object elevation to the point in (1);\n\u003C/li\u003E\n\u003Cli\u003E\nSet up a constraint that that extrema needs to be 90 degrees at the end of the second coast;\n\u003C/li\u003E\n\u003Cli\u003E\nRun the optimizer.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nI can\u0027t think of an analytical way to do what you\u0027re asking, I think it might need to be optimized out in all but the simplest cases.\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s just my thought, let me know if you have any questions. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EEDIT: Yup, just tried it.\u00A0 This is very easy in KSPTOT LVD.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022MmHt0UG.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002275.26\u0022 height=\u0022727\u0022 width=\u0022966\u0022 src=\u0022https://i.imgur.com/MmHt0UG.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nRed line is the pre-burn orbit and the grey line is the post-burn orbit.\u00A0 The trajectory is viewed in the body-fixed frame, meaning that the surface of Kerbin is stationary and the orbit is plotted against that. You see the grey line passing over the red marker, which is the ground object I randomly put down on the surface (this could be your landing site or whatever).\n\u003C/p\u003E\n\u003Cp\u003E\nLet me know if you have any questions. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-24T19:54:55Z\u0022 title=\u002207/24/2020 07:54  PM\u0022 data-short=\u00223 yr\u0022\u003EJuly 24, 2020\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-25T00:08:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223825667\u0022 data-ipsquote-contentid=\u0022195840\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221595618138\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou could do this in KSPTOT\u0027s \u003Cspan\u003EL\u003C/span\u003Eaunch Vehicle Designer with some ease I think:\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t think of an analytical way to do what you\u0027re asking, I think it might need to be optimized out in all but the simplest cases.\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s just my thought, let me know if you have any questions. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E\u00A0- I was pretty confident that you\u0027d work it out with your tool. However, maybe I set up the question with too\u00A0many restrictions that made you think I was after a solution finder. I\u0027ve added some context below to help.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m after a value that can be used by the player to find their own\u00A0solution for landing close to a ground target from orbit. This is preferred\u00A0rather than give them the complete solution. Currently there is not enough information in an IVA for this, even with mods, provided\u00A0you don\u0027t look\u00A0at any map screens of console that show\u00A0ScanSat.\n\u003C/p\u003E\n\u003Cp\u003E\nThe proposed calculation/function would be added to a variant of the RPM mod. RPM has\u00A0a small CRT screen in the older\u00A0technology controls (no glass cockpit here), hence\u00A0the no map restriction. It would only be able to calculate the closest distance from ground track information. eg: \u003Cem\u003EClosest TGT distance to ground track: 1345Km.\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nCalculating the required burn is not required and it would only look at the current orbital period and not multiple orbits. \u0027How\u0027 to use this information would be something for the player to work out. I\u0027m hoping that helps simplify the parameters?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe information would in theory allow an IVA player to plan and execute a landing burn for a ground target so it\u0027s close\u00A0to desired landing point. I\u0027d implement a small UI in the CRT display of the IVA mod RPM so the distance in KM could be visible. Depending on how intense that function is to run, it might be click-to-run and\u00A0not something that is constantly refreshed. There would be only one parameter the user could modify, with the rest nabbed from the API to get current state.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFor parameters, i figure the function could require at least the body, craft orbit, lat/long of target and a variable of UT (Universal Time) for starting condition. Ideally, it would only calculate this on for 1 orbit period from the UT given and result in how close the ground track is to the target location. ie \u003Cem\u003EExample result could be \u0027214353m\u0027.\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThinking over it more, I could re-word the problem as:\u003Cbr\u003E\nWhat would I need to do to workout the LatLon position for when the ground track crosses the targets Latitude or\u00A0Longitude?\n\u003C/p\u003E\n\u003Cp\u003E\nIf I could get that, I think all that\u0027s required then is to do a \u0027great\u00A0circle\u0027 calc (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/62310-how-to-calculate-real-distances/\u0026amp;do=findComment\u0026amp;comment=942368\u0022 rel=\u0022\u0022\u003Eold forum post for reference\u003C/a\u003E) for the two position to find the distances across a sphere\u00A0surface and select the lowest value to get the minimum distance?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAll of this would let me run the calc for this orbit, or if I change the starting UT, I would get the next orbit. That information would be enough (I think) for me to know which way to make an Normal / Anti-Normal burn. Specifically\u00A0when my Orbit is 1/4 of the Orbit period prior to the closest \u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E/\u003Cabbr title=\u0022Descending Node\u0022\u003EDN\u003C/abbr\u003E node. (90 degrees prior to the next \u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E/\u003Cabbr title=\u0022Descending Node\u0022\u003EDN\u003C/abbr\u003E in the Orbit) Running the calc a third time after a guesstimate of the burn duration would tell me if I got close by checking if the distance reduced significantly.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOtherwise, if there was a way to use Vector3d for this, I\u0027d love to learn how.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-25T16:31:54Z\u0022 title=\u002207/25/2020 04:31  PM\u0022 data-short=\u00223 yr\u0022\u003EJuly 25, 2020\u003C/time\u003E by cyberKerb\u003C/strong\u003E\n\u003Cbr\u003Eremoved bad idea\n\u003C/span\u003E\n"},{"CreatedByName":"Gargamel","CreatedById":64714,"CreatedDateTime":"2020-07-25T03:11:40Z","Content":"\n\u003Cp\u003E\nMoved to C# Support upon request.\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-25T03:14:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223825801\u0022 data-ipsquote-contentid=\u0022195840\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221595646700\u0022 data-ipsquote-userid=\u002264714\u0022 data-ipsquote-username=\u0022Gargamel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Gargamel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMoved to C# Support upon request.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks - figured I was starting to lean the conversation into API references and though it would be better there.\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-26T06:29:57Z","Content":"\n\u003Cp\u003E\nOh boy\u00A0- I\u0027ve been digging and found this maths area fun to dig into, but I\u00A0think I\u0027ve worked out what I need to do.\n\u003C/p\u003E\n\u003Cp\u003E\nI think I have to iteratively\u00A0calculate\u00A0(~7-8 loops) to get a close approx of distance to the ideal flyover point. Anyone know of a way to do that with Vector3d?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-26T15:35:22Z\u0022 title=\u002207/26/2020 03:35  PM\u0022 data-short=\u00223 yr\u0022\u003EJuly 26, 2020\u003C/time\u003E by cyberKerb\u003C/strong\u003E\n\u003C/span\u003E\n"}]}