{"TopicId":162698,"ForumId":20,"TopicTitle":"Thrust control to follow various parameters","CreatedByName":"Starlionblue","CreatedById":135405,"CreatedDateTime":"2017-06-30T00:51:38Z","PageNum":1,"Articles":[{"CreatedByName":"Starlionblue","CreatedById":135405,"CreatedDateTime":"2017-06-30T00:51:38Z","Content":"\n\u003Cp\u003E\nGood morning.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m seemingly obsessed with Eve ascents. Constantly trying to find the lightest weight vehicle.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t hand fly. Mostly I use MechJeb. However one of the problems I face is suboptimal thrust control. MechJeb allows setting of a dynamic pressure (Q) limitation on thrust, which is good for the initial ascent. However later I have a feeling that higher thrust is better due to an increase in terminal velocity.\n\u003C/p\u003E\n\u003Cp\u003E\nI would like to be able to control thrust by matching vessel velocity (EAS) to estimated terminal velocity, both numbers found in Aero GUI from the debug menu. Another option would be thrust to be limited by a specific local Thrust to weight ratio. Say \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E reaches 2.0. At that point thrust stays at 2.0 and does not go higher.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there any add-on that allows setting thrust to follow various parameters like this? Alternatively, perhaps someone would like to take the challenge on?\n\u003C/p\u003E\n\u003Cp\u003E\nKind regards.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-06-30T01:12:16Z\u0022 title=\u002206/30/2017 01:12  AM\u0022 data-short=\u00227 yr\u0022\u003EJune 30, 2017\u003C/time\u003E by Starlionblue\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2017-06-30T01:17:02Z","Content":"\n\u003Cp\u003E\nMechjeb used to have a \u0027limit to terminal velocity\u0027 setting.... \u00A0but it was considered deprecated I believe? \u00A0You could perhaps compile an old version of mechjeb against the current KSP version? \u00A0 Or.... \u00A0is this something the mechjeb scripting module could be used for? \u00A0 Quite possibly? \u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhat you want to do would be pretty trivial to accomplish in Python via KRPC... \u00A0but... \u00A0if you don\u0027t know Python...getting everything set up and learned to the point that you\u0027re READY to write that trivial program is... \u00A0non-trivial. \u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Starlionblue","CreatedById":135405,"CreatedDateTime":"2017-06-30T01:34:26Z","Content":"\n\u003Cp\u003E\nYeah I don\u0027t know Python. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSetting a Thermal limit would also work I think. Like \u0022don\u0027t go over x% of the max temperature for the most critical part.\u0022\n\u003C/p\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2017-07-01T18:43:38Z","Content":"\n\u003Cp\u003E\nI absolutely am not volunteering \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0, one of the hardest working modder I know, for more work... \u00A0but... \u00A0if you take a look at this thread - \u00A0\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/151340-13-smart-parts-continued/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nIf they DON\u0027T have a part that responds to temperature, I suspect that it\u0027s something that might get added to the eventual todo list there if you explain exactly what you\u0027d want it to do, in context of the other parts already in that mod?\n\u003C/p\u003E\n\u003Cp\u003E\nThat said... \u00A0and I\u0027m not a fluid dynamics expert... \u00A0 Isn\u0027t terminal velocity essentially a property OF dynamic pressure? \u00A0 If the dynamic pressure is within limits, I don\u0027t see how you could be exceeding terminal velocity? \u00A0 This is just intuition speaking, but it SEEMS like some value of MaxQ set in Mechjeb would give you \u0027good enough\u0027 results... \u00A0when the alternative is hours of coding and another plugin in memory? \u00A0If not, I\u0027d love to hear why my intuition is wrong so I can learn more about the subject! \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you DO want to go the KRPC route - I\u0027ve got a script that uses a PID to control thrust based on Dynamic Pressure pretty solidly. \u00A0It would be changing 3 or 4 lines of code to make it limit it based on any other parameter. \u00A0And while that\u0027s not a 15 second project if you\u0027re learning python at the same time... \u00A0I\u0027d encourage you not to dismiss the fun you can have if you DO get into coding.\n\u003C/p\u003E\n\u003Cp\u003E\nI view writing the software for my rockets to be just as important and fun as slapping the hardware pieces together! \u00A0 For example - it\u0027s cool to have an abort routine watching the guidance numbers... \u00A0so if your rocket loses stability it could automatically chop power, lock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E to retrograde, separate the crew capsule and deploy parachutes!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-07-01T18:43:54Z\u0022 title=\u002207/01/2017 06:43  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 1, 2017\u003C/time\u003E by artwhaley\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-07-01T21:21:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223108401\u0022 data-ipsquote-contentid=\u0022162698\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221498934618\u0022 data-ipsquote-userid=\u0022118388\u0022 data-ipsquote-username=\u0022artwhaley\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, artwhaley said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI absolutely am not volunteering \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0, one of the hardest working modder I know, for more work... \u00A0but... \u00A0if you take a look at this thread - \u00A0\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/151340-13-smart-parts-continued/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nIf they DON\u0027T have a part that responds to temperature, I suspect that it\u0027s something that might get added to the eventual todo list there if you explain exactly what you\u0027d want it to do, in context of the other parts already in that mod?\n\u003C/p\u003E\n\u003Cp\u003E\nThat said... \u00A0and I\u0027m not a fluid dynamics expert... \u00A0 Isn\u0027t terminal velocity essentially a property OF dynamic pressure? \u00A0 If the dynamic pressure is within limits, I don\u0027t see how you could be exceeding terminal velocity? \u00A0 This is just intuition speaking, but it SEEMS like some value of MaxQ set in Mechjeb would give you \u0027good enough\u0027 results... \u00A0when the alternative is hours of coding and another plugin in memory? \u00A0If not, I\u0027d love to hear why my intuition is wrong so I can learn more about the subject! \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you DO want to go the KRPC route - I\u0027ve got a script that uses a PID to control thrust based on Dynamic Pressure pretty solidly. \u00A0It would be changing 3 or 4 lines of code to make it limit it based on any other parameter. \u00A0And while that\u0027s not a 15 second project if you\u0027re learning python at the same time... \u00A0I\u0027d encourage you not to dismiss the fun you can have if you DO get into coding.\n\u003C/p\u003E\n\u003Cp\u003E\nI view writing the software for my rockets to be just as important and fun as slapping the hardware pieces together! \u00A0 For example - it\u0027s cool to have an abort routine watching the guidance numbers... \u00A0so if your rocket loses stability it could automatically chop power, lock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E to retrograde, separate the crew capsule and deploy parachutes!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe C# code for this isn\u0027t hard. \u00A0So if someone wants to make me a part model which is suitable to indicate temperature, I would be willing to add a temperature sensor.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223106875\u0022 data-ipsquote-contentid=\u0022162698\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221498783898\u0022 data-ipsquote-userid=\u0022135405\u0022 data-ipsquote-username=\u0022Starlionblue\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/29/2017 at 8:51 PM, Starlionblue said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGood morning.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m seemingly obsessed with Eve ascents. Constantly trying to find the lightest weight vehicle.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t hand fly. Mostly I use MechJeb. However one of the problems I face is suboptimal thrust control. MechJeb allows setting of a dynamic pressure (Q) limitation on thrust, which is good for the initial ascent. However later I have a feeling that higher thrust is better due to an increase in terminal velocity.\n\u003C/p\u003E\n\u003Cp\u003E\nI would like to be able to control thrust by matching vessel velocity (EAS) to estimated terminal velocity, both numbers found in Aero GUI from the debug menu. Another option would be thrust to be limited by a specific local Thrust to weight ratio. Say \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E reaches 2.0. At that point thrust stays at 2.0 and does not go higher.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there any add-on that allows setting thrust to follow various parameters like this? Alternatively, perhaps someone would like to take the challenge on?\n\u003C/p\u003E\n\u003Cp\u003E\nKind regards.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou may want to look at ConstantTWR, which I\u0027ll be releasing tomorrow.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Starlionblue","CreatedById":135405,"CreatedDateTime":"2017-07-03T00:36:38Z","Content":"\n\u003Cp\u003E\nThanks for input. Much appreciated.\n\u003C/p\u003E\n\u003Cp\u003E\nI can use dynamic pressure as a (manual) input for thrust control. However given rocket configuration changes during climb, the ideal number changes because terminal velocity is specific to the configuration. As side boosters are shed, terminal velocity seems to increase, and thrust should ideally increase.\n\u003C/p\u003E\n\u003Cp\u003E\nAdjusting thrust on the fly by changing the Q limit number in MechJeb is finicky. I\u0027ll check if Smart Parts allows a staging event to trigger a change the thrust level. That would neatly deal with the problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}