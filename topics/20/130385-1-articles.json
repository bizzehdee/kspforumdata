{"TopicId":130385,"ForumId":20,"TopicTitle":"Making an RD-701 tripropellant engine work in KSP","CreatedByName":"nilof","CreatedById":119624,"CreatedDateTime":"2016-01-21T03:26:53Z","PageNum":1,"Articles":[{"CreatedByName":"nilof","CreatedById":119624,"CreatedDateTime":"2016-01-21T03:26:53Z","Content":"\n\u003Cp\u003E\nHi there!\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been playing around changing configs around to make historical engines for realism overhaul. One engine that I\u0027d love to play around with is the RD-701, which could switch from a 330s seal level/415 vaccum isp mode which used a dense Oxygen \u002B Hydrogen \u002B Kerosene tripropellant configuration, and a 460 vac isp mode which used ordinary hydrolox. Basically a better RD-180 which can also transform into an SSME mid-flight.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried modifying the config of the stock RAPIER to do what I want(I don\u0027t care much about looks for now) but I couldn\u0027t get it to stop requiring inlet air even when removing intake air from the list of resources. How do I get it to work? Closed cycle works like a charm even with real fuels though. Is there a simpler way to make the mode switching work if I don\u0027t need/want air-breathing without messing with an air-breathing engine?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-21T03:28:23Z\u0022 title=\u002201/21/2016 03:28  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 21, 2016\u003C/time\u003E by nilof\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2016-01-21T12:21:37Z","Content":"\n\u003Cp\u003E\nHmm! I don\u0027t have a KSP install nearby, but I love config files, so this is relevant to my interests \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E Let\u0027s see, what would be my first try...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\n\nPART\n{\n\tname = RD-701\n\n\t// Blah blah various things\n\n\tMODULE\n\t{\n\t\tname = MultiModeEngine\n\t\tprimaryEngineID = Tripropellant\n\t\tsecondaryEngineID = Bipropellant\n\t}\n\n\tMODULE\n\t{\n\t\tname = ModuleEnginesFX\n\t\tengineID = Tripropellant\n\t\t\n\t\t// Stuff\n\n\t\tPROPELLANT\n\t\t{\n\t\t\tname = LiquidFuel\n\t\t\tratio = 1\n\t\t\tDrawGauge = True\n\t\t}\n\n\t\tPROPELLANT\n\t\t{\n\t\t\tname = Oxidizer\n\t\t\tratio = 1\n\t\t\tDrawGauge = True\n\t\t}\n\n\t\tPROPELLANT\n\t\t{\n\t\t\tname = LqdHydrogen\n\t\t\tratio = 1\n\t\t\tDrawGauge = True\n\t\t}\n\n\t\tatmosphereCurve\n\t\t{\n\t\t\tkey = 0 415\n\t\t\tkey = 1 330\n\t\t}\n\n\t}\n\n\tMODULE\n\t{\n\t\tname = ModuleEnginesFX\n\t\tengineID = Bipropellant\n\n\t\t// Stuff\n\n\t\tPROPELLANT\n\t\t{\n\t\t\tname = Oxidizer\n\t\t\tratio = 1\n\t\t\tDrawGauge = True\n\t\t}\n\n\t\tPROPELLANT\n\t\t{\n\t\t\tname = LqdHydrogen\n\t\t\tratio = 1\n\t\t\tDrawGauge = True\n\t\t}\n\n\t\tatmosphereCurve\n\t\t{\n\t\t\tkey = 0 460\n\t\t\tkey = 1 200\n\t\t\tkey = 4 0.001\n\t\t}\n\t}\n\n\t// Etcetera\n\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThat should, in my amateurish mind, implement a dualmode tripropellant/bipropellant rocket engine. You\u0027ll have to add all the ancillary info like mass, cost, description, engine thrust and heat, sound and graphics, gimbal and so on yourself, but most of that is pure copy\u0026amp;paste while adjusting some numbers.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, since I don\u0027t know enough about RealFuels, I just used stock/CRP resources. And didn\u0027t worry about ratios. You\u0027ll have to adjust those to your liking as well. All ratios are mass flow rates relative to the first PROPELLANT node specified. In other words, ratio 1 for all three propellants would mean equal mass flow rates for all three propellants, while 1, 1, 0.5 would result in a 40%, 40%, 20% split. Total consumption is computed off of Isp alone and not specified anywhere else in the config.\n\u003C/p\u003E\n\u003Cp\u003E\nHope that helps \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2016-01-21T16:02:28Z","Content":"\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\n//  ==================================================\n//  NPO Energomash RD-701 engine.\n\n//  Using the stock RAPIER model as a template.\n\n//  Dimensions: 5 m x 3.81 m\n//  Inert Mass: 4150 Kg\n//  Throttle Range: 32% to 100%\n//  Burn Time: -\n//  O/F Ratio: 6.1 (Vacuum Mode)\n\n//  Source 1: http://www.buran.ru/htm/rd-701.htm\n//  Source 2: http://www.b14643.de/Spacerockets/Diverse/Russian_Rocket_engines/engines.htm\n//  ==================================================\n\n\u002BPART[RAPIER]:FIRST\n{\n    @name = RO-RD-701\n    %RSSROConfig = True\n\n    !mesh = NULL\n\n    @MODEL\n    {\n        scale = 1.0, 1.0, 1.0\n    }\n\n    @scale = 1.0\n    %rescaleFactor = 1.0\n\n    @node_stack_top = 0.0, 0.741, 0.0, 0.0, 1.0, 0.0, 1\n    @node_stack_bottom = 0.0, -0.205, 0.0, 0.0, -1.0, 0.0, 1\n\n    @title = RD-701\n    @manufacturer = NPO Energomash [Glushko]\n    @description = A staged combustion tripropellant liquid fuel engine using Kerosene, liquid Hydrogen and liquid Oxygen. Originally developed for the MAKS space plane. In the early phases of the ascent it uses a mixture of Kerosene with liquid Hydrogen and it switches to pure Hydrogen for vacuum conditions.\n\n    @mass = 4.15\n    @crashTolerance = 12\n    %breakingForce = 250\n    %breakingTorque = 250\n    @maxTemp = 1023.15\n    %skinMaxTemp = 1773.15\n    !CoMOffset = NULL\n\n    @MODULE[MultiModeEngine]\n    {\n        @primaryEngineID = SurfaceMode\n        @secondaryEngineID = VacuumMode\n    }\n\n    @MODULE[ModuleEngines*]:HAS[#engineID[AirBreathing]]\n    {\n        @engineID = SurfaceMode\n        @ignitionThreshold = 0.1\n        @minThrust = 1281\n        @maxThrust = 4003\n        @heatProduction = 100\n        @useEngineResponseTime = False\n        !engineAccelerationSpeed = NULL\n        !engineDecelerationSpeed = NULL\n        !useVelocityCurve = NULL\n        !spoolEffectName = NULL\n        !engineSpoolIdle = NULL\n        !engineSpoolTime = NULL\n        !atmChangeFlow = NULL\n        !useVelCurve = NULL\n        !useAtmCurve = NULL\n        !flowMultCap = NULL\n        %ullage = True\n        %pressureFed = False\n        %ignitions = 1\n\n        !velCurve{}\n\n        !atmCurve{}\n\n        IGNITOR_RESOURCE\n        {\n            name = ElectricCharge\n            amount = 0.5\n        }\n\n        IGNITOR_RESOURCE\n        {\n            name = Kerosene\n            amount = 0.126\n        }\n\n        IGNITOR_RESOURCE\n        {\n            name = LqdHydrogen\n            amount = 0.06\n        }\n\n        IGNITOR_RESOURCE\n        {\n            name = LqdOxygen\n            amount = 0.814\n        }\n\n        @PROPELLANT[LiquidFuel]\n        {\n            @name = Kerosene\n            @ratio = 0.126\n            !resourceFlowMode = NULL\n        }\n\n        @PROPELLANT[IntakeAir]\n        {\n            @name = LqdHydrogen\n            @ratio = 0.06\n            !ignoreForIsp = NULL\n        }\n\n        PROPELLANT\n        {\n            name = LqdOxygen\n            ratio = 0.814\n            DrawGauge = False\n        }\n\n        @atmosphereCurve\n        {\n            @key,0 = 0 415\n            key = 1 330\n        }\n    }\n\n    @MODULE[ModuleEngines*]:HAS[#engineID[ClosedCycle]]\n    {\n        @engineID = VacuumMode\n        @minThrust = 918.9\n        @maxThrust = 2871.6\n        @heatProduction = 100\n        %ullage = True\n        %pressureFed = False\n        %ignitions = 1\n\n        IGNITOR_RESOURCE\n        {\n            name = ElectricCharge\n            amount = 0.5\n        }\n\n        IGNITOR_RESOURCE\n        {\n            name = LqdHydrogen\n            amount = 0.725\n        }\n\n        IGNITOR_RESOURCE\n        {\n            name = LqdOxygen\n            amount = 0.275\n        }\n\n        @PROPELLANT[LiquidFuel]\n        {\n            @name = LqdHydrogen\n            @ratio = 0.725\n            !resourceFlowMode = NULL\n        }\n\n        @PROPELLANT[Oxidizer]\n        {\n            @name = LqdOxygen\n            @ratio = 0.275\n            !resourceFlowMode = NULL\n        }\n\n        @atmosphereCurve\n        {\n            @key,0 = 0 460\n            @key,1 = 1 330\n        }\n    }\n\n    @MODULE[ModuleGimbal]\n    {\n        @gimbalRange = 5.0\n        %useGimbalResponseSpeed = True\n        @gimbalResponseSpeed = 16\n    }\n}\n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-23T14:26:45Z\u0022 title=\u002201/23/2016 02:26  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 23, 2016\u003C/time\u003E by Phineas Freak\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nilof","CreatedById":119624,"CreatedDateTime":"2016-01-22T23:08:04Z","Content":"\n\u003Cp\u003E\nThanks a lot for the config file! That is exactly what I needed!\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m having a weird bug though. It seems to require LqdOxygen twice instead of requiring LqdOxygen and Kerosene, even though the config file clearly specifies the latter. \u003Cimg alt=\u0022:huh:\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 title=\u0022:huh:\u0022\u003E This doesn\u0027t affect gameplay too much since Kerosene and LOX have similar densities, but I can\u0027t figure out why the game does this.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-22T23:10:06Z\u0022 title=\u002201/22/2016 11:10  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 22, 2016\u003C/time\u003E by nilof\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2016-01-23T13:14:09Z","Content":"\n\u003Cp\u003E\nTruly weird. I cannot replicate this issue.\n\u003C/p\u003E\n\u003Cp\u003E\nIn other news, i updated a bit the original config to remove some unneeded flow rules and add an ignition count that i forgot.\n\u003C/p\u003E\n"},{"CreatedByName":"nilof","CreatedById":119624,"CreatedDateTime":"2016-01-23T13:25:30Z","Content":"\n\u003Cp\u003E\nHuh. If your install has kerosene working, I\u0027ll try this with a fresh install. Thanks again!\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are still editing the config file you posted, I\u0027d suggest also swapping the thrusts in case someone else grabs this config. The kerosene-burning mode is supposed to have the higher thrust. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2016-01-23T14:26:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222375599\u0022 data-ipsquote-contentid=\u0022130385\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453555530\u0022 data-ipsquote-userid=\u0022119624\u0022 data-ipsquote-username=\u0022nilof\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n59 minutes ago, nilof said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe kerosene-burning mode is supposed to have the higher thrust. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDamn...i just noticed it...\u003Cimg alt=\u0022:rolleyes:\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 title=\u0022:rolleyes:\u0022\u003E OK, done!\n\u003C/p\u003E\n"},{"CreatedByName":"nilof","CreatedById":119624,"CreatedDateTime":"2016-01-23T19:17:23Z","Content":"\n\u003Cp\u003E\nAll right, tried it out on a fresh install, now the Kerosene works just fine. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}