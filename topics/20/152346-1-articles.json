{"TopicId":152346,"ForumId":20,"TopicTitle":"Determining a Memory Leak Culprit","CreatedByName":"Cornholio","CreatedById":94349,"CreatedDateTime":"2016-11-21T04:32:43Z","PageNum":1,"Articles":[{"CreatedByName":"Cornholio","CreatedById":94349,"CreatedDateTime":"2016-11-21T04:32:43Z","Content":"\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nI have a heavily modded version of 1.2.1 that I want to start playing. \u00A0I totally understand and respect the posting logs part of problem solving and will definitely do it if another requests and wants to help but... I enjoy problem-solving on my own too.\n\u003C/p\u003E\n\u003Cp\u003E\nI discovered that my game has a memory leak. \u00A0Using task manager, memory in KSP will continue to increase by about 200kb until it crashes due to reaching maximum computer memory. \u00A0I am running 64bit client on 64 bit windows with 16gb of ram.\n\u003C/p\u003E\n\u003Cp\u003E\nOther than exhaustion and being sure that add-ons are up to date, are there any good methods anyone could suggest for figuring this out or reaching the solution faster?\n\u003C/p\u003E\n"},{"CreatedByName":"Hesperid","CreatedById":171739,"CreatedDateTime":"2016-11-21T07:22:13Z","Content":"\n\u003Cp\u003E\nThe game leaks memory regardless of what mods you have installed. This can easily be verified by linking a debugger to the process and creating and test-launching a bunch of crafts from the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E when you already have ships/labs in the area. Every launch, regardless of whether you end up reverting it, leaves a bunch of objects that for some reason never get cleaned up. I\u0027m not sure if Unity\u0027s garbage collection has caveats like lost references, or what sloppiness is the reason behind this.\n\u003C/p\u003E\n\u003Cp\u003E\nEventually it uses up all the memory and begins swapping, this is immediately noticeable as recurring frame-freezing. There\u0027s literally nothing you can do about this except terminate the game process, as this causes Windows to release all the allocations, cleaning up what Squad couldn\u0027t be bothered to.\n\u003C/p\u003E\n"},{"CreatedByName":"Dafni","CreatedById":149636,"CreatedDateTime":"2016-11-21T08:20:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222858777\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479712933\u0022 data-ipsquote-userid=\u0022171739\u0022 data-ipsquote-username=\u0022Hesperid\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n55 minutes ago, Hesperid said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe game leaks memory regardless of what mods you have installed. This can easily be verified by linking a debugger to the process and creating and test-launching a bunch of crafts from the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E when you already have ships/labs in the area. Every launch, regardless of whether you end up reverting it, leaves a bunch of objects that for some reason never get cleaned up. I\u0027m not sure if Unity\u0027s garbage collection has caveats like lost references, or what sloppiness is the reason behind this.\n\u003C/p\u003E\n\u003Cp\u003E\nEventually it uses up all the memory and begins swapping, this is immediately noticeable as recurring frame-freezing. There\u0027s literally nothing you can do about this except terminate the game process, as this causes Windows to release all the allocations, cleaning up what Squad couldn\u0027t be bothered to.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh really?? Is this true?? Even for stock installs?? Even for 1.2.1?? Even after all this talk of leak fixing and code clean up etc???\n\u003C/p\u003E\n\u003Cp\u003E\nI rarely get the chance to play more than 1hr in one single session these days, but I was starting to suspect something like this must still go on.\n\u003C/p\u003E\n\u003Cp\u003E\nWill this ever get fixed then??\n\u003C/p\u003E\n"},{"CreatedByName":"Hesperid","CreatedById":171739,"CreatedDateTime":"2016-11-21T08:24:52Z","Content":"\n\u003Cp\u003E\nYes, it\u0027s true. And even without my observations, let\u0027s be frank here, if you\u0027re at version 1.2\u002B and your patch notes are still talking about memory leaks... then you can be assured that there isn\u0027t just that one that you happened to find.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-11-21T10:20:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222858807\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479716442\u0022 data-ipsquote-userid=\u0022149636\u0022 data-ipsquote-username=\u0022Dafni\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Dafni said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWill this ever get fixed then??\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBecause they are only reported by clever folks weeks after a release.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd of course everyone know fixing memory leak is easy. Right ?\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-11-21T10:25:47Z","Content":"\n\u003Cp\u003E\nYes, there are memory leaks (and other effects that are described by lay-people as memory leaks though they aren\u0027t actually leaks) but statements such as:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222858777\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479712933\u0022 data-ipsquote-userid=\u0022171739\u0022 data-ipsquote-username=\u0022Hesperid\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Hesperid said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not sure if Unity\u0027s garbage collection has caveats like lost references, or what sloppiness is the reason behind this.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n...imply to me that you don\u0027t have enough knowledge of the subject to be apportioning blame to anyone in particular.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222858777\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479712933\u0022 data-ipsquote-userid=\u0022171739\u0022 data-ipsquote-username=\u0022Hesperid\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Hesperid said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n...what Squad couldn\u0027t be bothered to.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have to assume that you have virtually no experience of software development as it is insulting to suggest that any developer would release a program that knowingly includes a memory leak because they \u0022couldn\u0027t be bothered\u0022 to fix it. \u00A0It\u0027s far more important to fix issues that cause the game to crash or cause other game-breaking issues than it is to fix a gradual rise in the memory usage of a program that will eventually cause a crash.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222858812\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479716692\u0022 data-ipsquote-userid=\u0022171739\u0022 data-ipsquote-username=\u0022Hesperid\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Hesperid said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nif you\u0027re at version 1.2\u002B and your patch notes are still talking about memory leaks...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n[citation needed] \u00A0Where in the release notes for 1.2 or 1.2.1 does it mention memory leaks? \u00A0Before you reply, bear in mind that excessive garbage creation is not a memory leak...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-21T10:31:16Z\u0022 title=\u002211/21/2016 10:31  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 21, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sh1pman","CreatedById":147869,"CreatedDateTime":"2016-11-22T23:44:03Z","Content":"\n\u003Cp\u003E\nI just restart KSP every hour or so to avoid stuttering and frame-freezing. It\u0027s not much of a problem, really.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Hesperid","CreatedById":171739,"CreatedDateTime":"2016-11-27T16:40:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222858881\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479723947\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 21/11/2016 at 11:25 AM, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n...imply to me that you don\u0027t have enough knowledge of the subject to be apportioning blame to anyone in particular.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s why I wasn\u0027t directing my criticism to anyone in particular.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Cornholio","CreatedById":94349,"CreatedDateTime":"2016-11-29T13:59:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222861099\u0022 data-ipsquote-contentid=\u0022152346\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221479858243\u0022 data-ipsquote-userid=\u0022147869\u0022 data-ipsquote-username=\u0022sh1pman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/22/2016 at 5:44 PM, sh1pman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI just restart KSP every hour or so to avoid stuttering and frame-freezing. It\u0027s not much of a problem, really.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI do that too and it\u0027s not as cumbersome since KSP loads faster now, although I can\u0027t leave it running overnight like I used to. I just thought we were past all of that \u0027how to deal with a memory leak\u0027 issue.\u00A0\n\u003C/p\u003E\n"}]}