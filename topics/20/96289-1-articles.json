{"TopicId":96289,"ForumId":20,"TopicTitle":"question about memory usage and part loading (and maybe a mod suggestion)","CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2015-01-10T23:06:35Z","PageNum":1,"Articles":[{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2015-01-10T23:06:35Z","Content":"\n\u003Cp\u003EThe 64 bit version of the game is buggy and while the 32 bit version is less buggy, it\u0027s also memory limited. When KSP runs, it loads all of the parts in gamedata, but could it load and unload them once the game is running? Everyone has parts they don\u0027t use but deleting them is a bit permanent. \u003C/p\u003E\u003Cp\u003ESuppose you could base part loading on tech tree availability. If you play career and the part\u0027s not unlocked yet, why have it take up memory? Parts in unlocked nodes could be clicked on to load or unload them and anything not loaded into memory doesn\u0027t show up in the VAB and SPH part inventory. By adding a memory display you could fine tune your install for the parts you actually want to use rather than everything in gamedata. In the research building you\u0027d also load and save profiles with different parts active like spaceplanes or rockets.\u003C/p\u003E\u003Cp\u003EThe one downside to this method is that you\u0027d end up with some longer loading screens coming out of the research building after changing parts. You\u0027d also need a warning to keep you from unloading a part used in an active flight unless you wanted to lose the ship as well. Or perhaps it could use a placeholder for unloaded parts and they could load from disk as you approach the vessel.\u003C/p\u003E\u003Cp\u003EI\u0027m no programmer, but would this even be possible? You can reload the entire database from the debug menu but will Unity and KSP let you load and unload stuff at will? I\u0027d be willing to trade longer loading screens for more memory avialable for mods.\u003C/p\u003E\u003Cp\u003EOr does a mod like this already exist and I just don\u0027t know about it yet?\u003C/p\u003E\n"},{"CreatedByName":"noonespecial","CreatedById":81942,"CreatedDateTime":"2015-01-11T02:00:42Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/59005-0-90-Release-4-3-Dec-16-2014-Active-Texture-Management-Save-RAM\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/59005-0-90-Release-4-3-Dec-16-2014-Active-Texture-Management-Save-RAM\u003C/a\u003E!\u003C/p\u003E\u003Cp\u003EPlus, there is the trick of creating a shortcut of the ksp.exe and adding -force-opengl in properties.\u003C/p\u003E\u003Cp\u003EIf you want to go through the effort of converting your file formats, there is:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96729-0-90-DDSLoader-1-8-%28Dec-15%29-Loads-DDS-Texture-Boringly-fast-edition\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/96729-0-90-DDSLoader-1-8-%28Dec-15%29-Loads-DDS-Texture-Boringly-fast-edition\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"helaeon","CreatedById":101767,"CreatedDateTime":"2015-01-11T04:07:07Z","Content":"\n\u003Cp\u003EWhat would really fix this is the optimization phase that hasn\u0027t happened yet because we\u0027re still playing with prototype software. Hopefully now that we\u0027re in beta that will be happening a little bit in each version, and certainly before going to 1.0. My pure speculative guess based on no information is it\u0027s on the list right below \u0022fix aero\u0022, then maybe 64 bit might be moot if the asset loader is more efficient or there is protection against hitting the memory cap rather than crash where the software takes preventative protective severe garbage clean-up measures when application use gets to say, 3.0 GB.\u003C/p\u003E\u003Cp\u003EIt\u0027s not the parts though, not really. Its their textures (and models to a smaller degree). Some mods use models and textures more efficiently than others. Some mod makers like to use huge unique textures to make their stuff pretty, but if you halve the resolution you don\u0027t lose much graphically because it was so huge in the first place but you get a massive drop in memory use. Some use mapped textures across lots of models, these give you tons of parts for little memory use comparatively. These are the main reasons ATM and the DDS conversion procedures work to reduce mem footprint. Also why if you delete cfgs it doesn\u0027t help very much if you don\u0027t get the textures too.\u003C/p\u003E\u003Cp\u003EIt also seems from what I see around the forum and trying different setting myself as if there are some issues with offloading texture assets to VRAM (which ATM and DDS also help with) and is I think part of the reason why running OpenGL works to lower memory use. Seems D3D (both 9 and 11) may have some bugs in Unity related to this symptomed by the broken TGA loader, wouldn\u0027t surprise me of other aspects relating to texture loading were bugged as well. However, OpenGL has other bugs related to how it renders things in Unity and it\u0027s not as fast as D3D9 (simulation speed is faster).\u003C/p\u003E\u003Cp\u003ERbray, Sarbain, and Shaw certainly would know better. I\u0027m coming to these hypotheses from I see from playing and tinkering, they actually code stuff related to these problems. So if one of the mighty modders or a dev says something else they are right and I\u0027m wrong.\u003C/p\u003E\n"},{"CreatedByName":"noonespecial","CreatedById":81942,"CreatedDateTime":"2015-01-11T12:14:19Z","Content":"\n\u003Cp\u003Eand all that is before you take in consideration that Unity 5 is dropping soon with drastically different shader and texture handling.\u003C/p\u003E\n"},{"CreatedByName":"Malah","CreatedById":96644,"CreatedDateTime":"2015-01-11T13:19:25Z","Content":"\n\u003Cp\u003EHave you tried \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/73236\u0022 rel=\u0022external nofollow\u0022\u003E[WIP] Loading textures only as required\u003C/a\u003E? But it hasn\u0027t been updated for KSP 0.90 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E and it is in experimental \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"}]}