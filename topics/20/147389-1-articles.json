{"TopicId":147389,"ForumId":20,"TopicTitle":"How does ModuleScienceExperiment know which animation to trigger?","CreatedByName":"Fwiffo","CreatedById":148084,"CreatedDateTime":"2016-09-10T05:25:56Z","PageNum":1,"Articles":[{"CreatedByName":"Fwiffo","CreatedById":148084,"CreatedDateTime":"2016-09-10T05:25:56Z","Content":"\n\u003Cp\u003E\nI\u0027m curious how \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Module#ModuleScienceExperiment\u0022 rel=\u0022external nofollow\u0022\u003EModuleScienceExperiment\u003C/a\u003E is wired up to animations.\n\u003C/p\u003E\n\u003Cp\u003E\nStock science experiment\u00A0parts like the \u003Cem\u003EMystery Goo Containment Unit\u003C/em\u003E have two modules as illustrated below.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve learned through experimentation that the first (\u003Cem\u003EModuleAnimateGeneric\u003C/em\u003E) provides an action button on the part\u0027s right-click menu (at least in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E, and usually after launch) that triggers the animation. \u00A0For the Goo, the button is labeled \u0022Deploy\u0022. \u00A0I\u0027ve also determined \u003Cem\u003EanimationName \u003C/em\u003Epoints the game to the relevant animation in the mu file.\n\u003C/p\u003E\n\u003Cp\u003E\nSimilarly, \u003Cem\u003EModuleScienceExperiment \u003C/em\u003Eincludes button labels that show up on the part\u0027s right-click menu (e.g. \u0022Observe Mystery Goo\u0022). \u00A0And when you perform the science experiment in the game by clicking the button, the animation is triggered (start animation, then end animation). \u00A0However the module is missing any reference to an animation name. \u00A0I\u0027m wondering how the game determines which animation to run. \u00A0Is it always assumed parts with \u003Cem\u003EModuleScienceExperiment\u003C/em\u003E will also have a \u003Cem\u003EModuleAnimateGeneric\u003C/em\u003E, and is that how the game looks up the animation?\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m asking because I want to have a part with multiple \u003Cem\u003EModuleScienceExperiment\u003C/em\u003E\u0027s and \u003Cem\u003EModuleAnimateGeneric\u003C/em\u003E\u0027s. \u00A0When I do that in my weldment, performing a\u00A0science experiment doesn\u0027t trigger the animation\u00A0(but the animations still run when using the buttons corresponding to the first module).\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-javascript prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\u00A0\u00A0 \u00A0MODULE\n\u00A0\u00A0 \u00A0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0name \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EModuleAnimateGeneric\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0animationName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EDeploy\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0startEventGUIName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EDeploy\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0endEventGUIName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EClose\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0actionGUIName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EToggle\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ECover\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0MODULE\n\u00A0\u00A0 \u00A0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0name \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EModuleScienceExperiment\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0experimentID \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E mysteryGoo\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0experimentActionName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EObserve\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EMystery\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EGoo\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0resetActionName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EReset\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EGoo\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ECanister\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0useStaging \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EFalse\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0useActionGroups \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ETrue\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0hideUIwhenUnavailable \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ETrue\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0xmitDataScalar \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0.3\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003C/span\u003E\u003Cspan\u003EFxModules\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0dataIsCollectable \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ETrue\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0collectActionName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ECollect\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EData\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0interactionRange \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1.2\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0usageReqMaskInternal \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0usageReqMaskExternal \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E8\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0\u00A0 \u00A0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-10T05:37:10Z\u0022 title=\u002209/10/2016 05:37  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 10, 2016\u003C/time\u003E by Fwiffo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ShotgunNinja","CreatedById":159391,"CreatedDateTime":"2016-09-10T05:38:06Z","Content":"\n\u003Cp\u003E\n\u003Cem style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003EModuleScienceExperiment\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/em\u003E is propably picking up the first\u00A0\u003Cem\u003EModuleAnimateGeneric\u003C/em\u003E it find in the same part, if there is any. Then it use it to play the animation\u00A0\u003Cem\u003EanimationName\u003C/em\u003E.\n\u003C/p\u003E\n"},{"CreatedByName":"Fwiffo","CreatedById":148084,"CreatedDateTime":"2016-09-10T06:18:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222749335\u0022 data-ipsquote-contentid=\u0022147389\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473485886\u0022 data-ipsquote-userid=\u0022159391\u0022 data-ipsquote-username=\u0022ShotgunNinja\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, ShotgunNinja said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cem style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003EModuleScienceExperiment\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/em\u003E is propably picking up the first\u00A0\u003Cem\u003EModuleAnimateGeneric\u003C/em\u003E it find in the same part, if there is any. Then it use it to play the animation\u00A0\u003Cem\u003EanimationName\u003C/em\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI didn\u0027t think that\u0027s right, as\u00A0my part had two \u003Cem\u003EModuleAnimateGeneric\u003C/em\u003E\u0027s and it wasn\u0027t triggering either one.\n\u003C/p\u003E\n\u003Cp\u003E\nBut you prompted me to experiment some more with ordering. \u00A0From what I can determine: \u00A0When you activate a \u003Cem\u003EModuleScienceExperiment\u003C/em\u003E, the game just grabs the very first module (whatever it is), looks for its \u003Cem\u003EanimationName\u003C/em\u003E (if exists) and runs that. \u00A0So you can either move the desired animation module up to the top, or (if you don\u0027t want to mess up the action button ordering) just add a gimped \u003Cem\u003EmoduleAnimateGeneric\u003C/em\u003E as the first module in your CFG:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMODULE\n{\n\tname = moduleAnimateGeneric\n\tanimationName = blah\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe latter technique gives you an extra \u0022toggle\u0022 button in the Editor, but it goes away in flight.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd yes,\u00A0as far as I can tell, this means if a part has multiple \u003Cem\u003EModuleScienceExperiment\u003C/em\u003E\u0027s they must all share the same experiment animation.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso turns out some other non-science parts use a similar scheme. \u00A0e.g. The \u003Cem\u003EComms DTS-M1\u003C/em\u003E\u00A0similarly looks to the first module when picking the animation to run for its \u0022Transmit Data\u0022 action. \u00A0(And the second technique above doesn\u0027t work; the extra \u0022toggle\u0022 button stays present after launch, so you need to move its \u003Cem\u003EmoduleAnimateGeneric \u003C/em\u003Eto the top)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m finding so much good information like this lately; wish the wiki was publicly editable so I could\u00A0make updates.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-10T06:44:52Z\u0022 title=\u002209/10/2016 06:44  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 10, 2016\u003C/time\u003E by Fwiffo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2016-09-10T11:00:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222749347\u0022 data-ipsquote-contentid=\u0022147389\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473488306\u0022 data-ipsquote-userid=\u0022148084\u0022 data-ipsquote-username=\u0022Fwiffo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Fwiffo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nwish the wiki was publicly editable so I could\u00A0make updates.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think you can do that,but you need to create an account.After you login you\u0027ll get the edit button next to every title.\u003Cbr\u003E\nI tried once but formatting is little odd for me,so i gave up.\n\u003C/p\u003E\n"},{"CreatedByName":"Fwiffo","CreatedById":148084,"CreatedDateTime":"2016-10-23T07:40:27Z","Content":"\n\u003Cp\u003E\nWeeks later, I finally learned the FxModules attribute is what wires the experiment up to the correct animation module. \u00A0That solved my problem for many cases without needing to rearrange ModuleAnimateGeneric\u0027s.\n\u003C/p\u003E\n"},{"CreatedByName":"CobaltWolf","CreatedById":105588,"CreatedDateTime":"2016-10-24T02:47:52Z","Content":"\n\u003Cp\u003E\nFXModule indexes the animation modules in the cfg, in the order that they appear, starting with 0. So first one to appear would be 0, second would be 1, etc.\n\u003C/p\u003E\n"}]}