{"TopicId":71516,"ForumId":20,"TopicTitle":"RasterPropMonitor, MechJeb and SCANsat...","CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-05-05T22:16:42Z","PageNum":1,"Articles":[{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-05-05T22:16:42Z","Content":"\n\u003Cp\u003E3 of my favourite mods that just don\u0027t seem to play together nicely any more.\u003C/p\u003E\u003Cp\u003EI know why, it\u0027s because MJ and SS get updated, which breaks links to them in RPM. It just makes me sad because because we have different people working on all 3 mods - there\u0027s moarDV and Mihara working on RPM, sarbian on MJ (with OrbitalDebris recompiling RPM to work with the dev builds of MJ) and technogeeky/DMagic working on SCANsat with danmy M.I.A - and I don\u0027t know how much they are talking/co-ordinating.\u003C/p\u003E\u003Cp\u003EDon\u0027t get me wrong, I think it\u0027s great that these mods are actively being worked on and updated, but every time one of them updates, it breaks compatibility with the others. I guess it\u0027s inevitable, but it\u0027s also frustrating. We either have everything working but with old versions or everything up to date but not working together. I don\u0027t know if there\u0027s a fix for it or if anything can be done about it, but I\u0027m tired of checking all three threads for updates about RPM compatibility. \u003C/p\u003E\u003Cp\u003EI guess what I\u0027d really like is this thread to become the hub for everything to do with getting these three to work together nicely because there\u0027s various goings-on in all three threads that people in the other threads don\u0027t know about. A central place to work around it all rather than spread out over three threads is a lot neater, I think..\u003C/p\u003E\u003Cp\u003EI repeat, I think it\u0027s great that everyone mentioned is working hard on updating/fixing/recompiling their dlls and mods, but what I find less than great is the fact that doing so invalidates the others work. I\u0027d like for this thread to be where everyone involved (or not) can post and see all updates and thoughts and most important of all, co-ordinate with each other so they don\u0027t mess up everyone elses work. All authors can see updates about the others and advise their users accordingly. \u003C/p\u003E\u003Cp\u003EFor reference, here are some links to the latest versions of all (some threads, some posts, one neither):\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55832-PLUGIN-PARTS-0-23-SCANsat-terrain-mapping?p=1123433\u0026amp;viewfull=1#post1123433\u0022 rel=\u0022external nofollow\u0022\u003ESCANsat v6rc1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMechJeb (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/12384-PART-0-23-5-Anatid-Robotics-MuMech-MechJeb-Autopilot-v2-2\u0022 rel=\u0022external nofollow\u0022\u003Ethread\u003C/a\u003E and \u003Ca href=\u0022http://jenkins.mumech.com/job/MechJeb2/\u0022 rel=\u0022external nofollow\u0022\u003Ejenkins dev builds\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/57603-0-23-5-RasterPropMonitor-make-your-IVA-a-glass-cockpit-%28v0-16%29-20-Apr\u0022 rel=\u0022external nofollow\u0022\u003ERasterPropMonitor\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/12384-PART-0-23-5-Anatid-Robotics-MuMech-MechJeb-Autopilot-v2-2/page640?p=1118981#post1118981\u0022 rel=\u0022external nofollow\u0022\u003EOrbitalDebris\u0027 RPM recompile for MJ dev builds\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Cdr_Zeta","CreatedById":59015,"CreatedDateTime":"2014-05-06T01:10:20Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003EAltho RPM is nice I havnt used it this time around and hope to do so...it is however in my opinion at the bottom of your list priority-wise...Mechjeb then ScanSat compatibility but even then ScanSat is also at the bottom or midway on our long list of mods.\u003C/p\u003E\u003Cp\u003EWe all must look to individual threads for the most important mods for us; I use Planet Factory and had to change something in the code myself to get it to work and I cant re-distribute it; I spent a week or more solving various problems just so that I can play the Science Career mode; we seem to forget this is an Alpha program; one of the best around in that light.\u003C/p\u003E\u003Cp\u003ECdr Zeta\u003C/p\u003E\n"},{"CreatedByName":"Zeroignite","CreatedById":1377,"CreatedDateTime":"2014-05-06T03:38:26Z","Content":"\n\u003Cp\u003ESo is there a known way to get the three of them to play nice as of MJ build 240 and ScanSat v6r2?\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-06T04:06:37Z","Content":"\n\u003Cp\u003EI will step in here.\u003C/p\u003E\u003Cp\u003EI am stuck in limbo right now. I have so far only made SCANsat release candidates. This is because, so far, there have been problems with every one of them. The problem with v6rc2 is that \u003Cstrong\u003EI\u003C/strong\u003E built SCANsat and SCANsatRPM myself, but did not build MechJebRPM (or MechJeb itself, for that matter) myself (nor did I include it anywhere in the references for anything I built).\u003C/p\u003E\u003Cp\u003EI don\u0027t understand what is happening to reject these builds. My outstanding questions are:\u003C/p\u003E\u003Cp\u003E1. What is deciding that these builds are incompatible, and on what grounds? Is this the role of \u0027assemblies\u0027? Is it KSP itself? Is it RPM itself? \u003C/p\u003E\u003Cp\u003E2. Are there error messages (in KSP.log or the more detailed log file whose name escapes me) when one or more of these DLLs fails to load? Or do we really just do an IVA and see nothing on the screen?\u003C/p\u003E\u003Cp\u003E3. What is actually happening when the RPM, SCANsatRPM, and MechJebRPM assemblies are built \u003Cstrong\u003Ewithout\u003C/strong\u003E any version information in the assemblies? Does a random version number get generated? Does it get assigned a version number like 0.0.0.0?\u003C/p\u003E\u003Cp\u003E4. Is some piece of software reverting to comparing a hash (MD5? SHA?) or checksum of these DLL files to determine they are invalid? If this is the case and it can\u0027t be avoided, then we might very well be doomed.\u003C/p\u003E\u003Cp\u003EI simply can not accept that the \u0022proper\u0022 solution is to mechanically build every single permutation of the versions of: RPM, ssRPM, mjRPM, and MJ. That would be an absurd state of affairs. \u003C/p\u003E\u003Cp\u003EThis \u0027limbo\u0027 I\u0027m stuck in is worse than that. I don\u0027t want to make an official release (v6) of SCANsat (which now includes SCANsatRPM, thanks to this issue) until I know that it \u003Cem\u003Ewill\u003C/em\u003E work with the above trio. But evidently (as DMagic et. al. argue), the proper thing to do is make the v6 release and let the RPM developers target my official release. I do this, but then the very next day I\u0027m sure there will be a bug in my official release. Or one of the new features we are working on will be released, and we\u0027ll be back in this situation.\u003C/p\u003E\u003Cp\u003EI feel like we need a C# expert to help us here.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-06T04:08:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zeroignite\u0022 data-cite=\u0022Zeroignite\u0022\u003E\u003Cdiv\u003ESo is there a known way to get the three of them to play nice as of MJ build 240 and ScanSat v6r2?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can try and build and release all three (four?) packages myself. I don\u0027t think I should need to build MechJeb myself. But again, that only solves the problem for a day.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cdr_Zeta\u0022 data-cite=\u0022Cdr_Zeta\u0022\u003E\u003Cdiv\u003EHi,\u003Cp\u003EAltho RPM is nice I havnt used it this time around and hope to do so...it is however in my opinion at the bottom of your list priority-wise...Mechjeb then ScanSat compatibility but even then ScanSat is also at the bottom or midway on our long list of mods.\u003C/p\u003E\u003Cp\u003EWe all must look to individual threads for the most important mods for us; I use Planet Factory and had to change something in the code myself to get it to work and I cant re-distribute it; I spent a week or more solving various problems just so that I can play the Science Career mode; we seem to forget this is an Alpha program; one of the best around in that light.\u003C/p\u003E\u003Cp\u003ECdr Zeta\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m hurt that my beloved SCANsat is at the bottom of your list. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003Ej/k. I only adopted SCANsat.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-06T05:29:38Z","Content":"\n\u003Cp\u003ESee \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/57603-0-23-5-RasterPropMonitor-make-your-IVA-a-glass-cockpit-%28v0-16%29-20-Apr?p=1139695\u0026amp;viewfull=1#post1139695\u0022 rel=\u0022external nofollow\u0022\u003Ethis post\u003C/a\u003E for some information that, if verified to be correct, can be imported in here. Namely, what is the role of assembly version numbers, if any, in rejecting our DLLs.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-05-06T08:22:17Z","Content":"\n\u003Cp\u003ESo you want to ignore assembly versions? There is an \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve%28v=vs.110%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003EAppDomain.AssemblyResolve\u003C/a\u003E event that is fired whenever a resolve fails and seems to be the most promising way to accomplish that goal, though its a bit tricky to set up in KSP and i don\u0027t usually want mods messing around with assembly resolution. That could lead to some really ugly bugs. I also wonder whether it is possible to modify such an reference in an assembly to use an partial assembly reference (\u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/0a7zy9z5%28v=vs.110%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003Ethough Microsoft really don\u0027t want us to do sth like that^^\u003C/a\u003E)... sounds interesting, ill try it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E *edit* ofc it doesn\u0027t work... would have been way to easy \u0026amp; awesome. I\u0027ll set up a proof of concept with AssemblyResolve later today. *edit2* Damit, even module constructors seem to be executed only after KSPs AssemblyLoader has gone though all assemblies and already failed to load those others. Anyone else have an idea on how to execute code early? The only other approach i could imagine would be to reload those dlls if they failed in the first place, but no idea what would be necessary to make this work... beside ofc using a lot of reflection in *RPM.dll\u0027s.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-06T09:36:23Z\u0022 title=\u002205/06/2014 09:36  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 6, 2014\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-05-06T16:28:10Z","Content":"\n\u003Cp\u003EI still did not take time to look into that. What\u0027s happening still sounds strange since I have dll the interface with each other that don\u0027t require recompiling each time. But then as I said I did not look into it yet.\u003C/p\u003E\u003Cp\u003ESo I\u0027ll have a look, try to understand and if I can\u0027t make it work I\u0027ll ask the various dev if I can configure my Jenkins server to build all their mods each time one is updated. Not the perfect solution but it would work.\u003C/p\u003E\n"},{"CreatedByName":"OrbitalDebris","CreatedById":101515,"CreatedDateTime":"2014-05-06T23:55:44Z","Content":"\n\u003Cp\u003ESo here\u0027s the crazy thing: VesselViewRPM works just fine, even with my rebuild (which is why I assumed scansat would work as well, since I don\u0027t use it. My bad for not testing it). What\u0027s different about VV?\u003C/p\u003E\u003Cp\u003EEdit: Oh I just realized. VV supports RPM directly and the other two do it through the *RPM helpers. Bit slow today \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E. So what seems to be happening is that if KSP loads assembly A and assembly B, then assembly B can refer to assembly A just fine (VV can call RPM functions) but if assembly A calls assembly B which then calls assembly C then versioning matters (RPM calls MJRPM which calls MJ). Weird.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-07T07:29:06Z\u0022 title=\u002205/07/2014 07:29  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 7, 2014\u003C/time\u003E by OrbitalDebris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-18T23:35:02Z","Content":"\n\u003Cp\u003EThis issue is solved as of the latest releases of both \u003Cstrong\u003EMechJeb\u003C/strong\u003E and \u003Cstrong\u003ESCANsat\u003C/strong\u003E. Both projects are now committed to hardcoding their assembly version (even for dev releases), and the \u003Cstrong\u003EssRPM \u003C/strong\u003Eand \u003Cstrong\u003EmjRPM\u003C/strong\u003E helpers are both hardcoded to 0.0.0.0.\u003C/p\u003E\n"},{"CreatedByName":"phoenix_ca","CreatedById":50380,"CreatedDateTime":"2014-05-19T06:27:54Z","Content":"\n\u003Cp\u003EVersions mismatch and assemblies don\u0027t load. Solution? Call everything version 0. Sounds like a very kerbal solution. Jeb would approve I\u0027m sure, if Jeb knew anything about programming.\u003C/p\u003E\n"},{"CreatedByName":"Yilmas","CreatedById":83246,"CreatedDateTime":"2014-06-03T19:16:44Z","Content":"\n\u003Cp\u003EWouldn\u0027t it be fixable with an assembly policy file?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/8f6988ab(v=vs.110).aspx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://msdn.microsoft.com/en-us/library/8f6988ab(v=vs.110).aspx\u003C/a\u003E\u003C/p\u003E\n"}]}