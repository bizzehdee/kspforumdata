{"TopicId":92637,"ForumId":20,"TopicTitle":"Softer docking magnetism","CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-12T17:27:49Z","PageNum":1,"Articles":[{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-12T17:27:49Z","Content":"\n\u003Cp\u003EIs there an add-on that reduces or eliminates the attraction of docking ports? The sudden acceleration can often produce some hazardous motions, especially on stations. Some docking ports aren\u0027t even able to link at that speed and they just end up bouncing through each other for a while until a safe relative speed is met.\u003C/p\u003E\u003Cp\u003EIf I\u0027m approaching a docking port at 0.1 m/s, I want the speed at docking to be no greater than 0.1 m/s. If anything, the magnetism should be reversed such that the relative velocity decreases as relative distance approaches zero.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-12-12T17:37:40Z","Content":"\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64711\u0022 rel=\u0022external nofollow\u0022\u003ETweakable Everything\u003C/a\u003E lets you tweak the magnet strength per part yourself, but I don\u0027t think it lets you make it repulsive.\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-12T18:04:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64711\u0022 rel=\u0022external nofollow\u0022\u003ETweakable Everything\u003C/a\u003E lets you tweak the magnet strength per part yourself, but I don\u0027t think it lets you make it repulsive.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s perfect, though I would prefer to be able to edit them in flight as well.\u003C/p\u003E\u003Cp\u003EFor simplicity\u0027s sake, is there a way to create a simple plugin that just reduces the magnet force of all docking ports to say 10% of base value? Similarly I wanted to be able to tone down reaction torque by a similar value. I just thought it would be easier to apply a standard reduction across all parts rather than having to micro-manage each part.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-12T18:33:13Z","Content":"\n\u003Cp\u003Ethis should do the trick; needs ModuleManager\u003C/p\u003E\u003Cp\u003Ecopy/paste this into a text file and change extension to *.cfg; place in GameData, it should set all parts with ModuleDockingNode to 10% of specified acquireForce and Torque\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:HAS[@MODULE[ModuleDockingNode]]:FINAL\u003Cbr\u003E{\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E[INDENT]@MODULE[ModuleDockingNode]\u003Cbr\u003E{\u003Cbr\u003E[INDENT]%acquireForce = 0.1\u003Cbr\u003E%acquireTorque = 0.1[/INDENT]\u003C/p\u003E\u003Cp\u003E\u003Cbr\u003E}[/INDENT]\u003Cbr\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Edelete the cfg from GameData to unapply or if it doesn\u0027t work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-13T05:02:19Z\u0022 title=\u002212/13/2014 05:02  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 13, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-12T18:50:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Ethis should do the trick; needs ModuleManager\u003Cp\u003Ecopy/paste this into a text file and change extension to *.cfg; place in GameData, it should set all parts with ModuleDockingNode to 10% of specified acquireForce and Torque\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:HAS[@MODULE[ModuleDockingNode]:Final\u003Cbr\u003E{\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E[INDENT]@MODULE[ModuleDockingNode]\u003Cbr\u003E{\u003Cbr\u003E[INDENT]%acquireForce *= 0.1\u003Cbr\u003E%acquireTorque *= 0.1[/INDENT]\u003C/p\u003E\u003Cp\u003E\u003Cbr\u003E}[/INDENT]\u003Cbr\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Edelete the cfg from GameData to unapply or if it doesn\u0027t work.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EModule Manager detected an error in the file. Does it matter where it\u0027s stored within GameData, or is it just a syntax error? Should there be a second closing square bracket in the first line?\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-12-12T18:59:05Z","Content":"\n\u003Cp\u003EYes there should. Right before the second colon.\u003C/p\u003E\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-12T19:03:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EYes there should. Right before the second colon.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWent from one error to 26.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-12-12T19:49:41Z","Content":"\n\u003Cp\u003EIt may be because if there\u0027s no definition, then there\u0027s nothing to multiply.\u003C/p\u003E\u003Cp\u003EYou might need to do it separately for parts that have those values and for those that don\u0027t\u003C/p\u003E\u003Cp\u003Eor\u003C/p\u003E\u003Cp\u003ETry defining values explicitly with \u0022=\u0022 but I don\u0027t know what the default is, so you might need to do some trial and error, or install Tweakable Everything, just to see what default it shows.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-12T20:20:57Z","Content":"\n\u003Cp\u003Etry changing the % to @; Final may have to be all Caps. not sure on that one.\u003C/p\u003E\u003Cp\u003ETweakableEverything is good too.\u003C/p\u003E\u003Cp\u003E*Yep, it was the %, and FINAL. change those and the errors should be gone.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-12T20:28:46Z\u0022 title=\u002212/12/2014 08:28  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 12, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-13T03:46:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Etry changing the % to @; Final may have to be all Caps. not sure on that one.\u003Cp\u003ETweakableEverything is good too.\u003C/p\u003E\u003Cp\u003E*Yep, it was the %, and FINAL. change those and the errors should be gone.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell there were no errors, but it didn\u0027t seem like it worked. I think there was a subtle difference, though that could just be a placebo effect, but the craft still ends up hitting the port at about 0.4 m/s, making it bounce before linking. I tried a few times docking at 0.1 and 0.05 m/s, I even changed the multipliers in the config to 0.01, but the result was consistent.\u003C/p\u003E\u003Cp\u003EI\u0027m curious, where do those acquireForce and acquireTorque attributes come from? They don\u0027t appear to be in the part configs, are they buried somewhere in the core files?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-12-13T04:06:31Z","Content":"\n\u003Cp\u003EThe problem is there\u0027s nothing there to multiply, as Cpt. Kipard suggested.\u003C/p\u003E\u003Cp\u003EInstead of\u003C/p\u003E\u003Cp\u003E%acquireForce *= 0.1\u003C/p\u003E\u003Cp\u003Euse\u003C/p\u003E\u003Cp\u003E%acquireForce = 0.1\u003C/p\u003E\u003Cp\u003E(and fiddle with the 0.1 until you get an amount you like).\u003C/p\u003E\u003Cp\u003ESame for the other one.\u003C/p\u003E\u003Cp\u003EThey come from the ModuleDockingNode class. Like most modules, it reads its settings from the cfg; anything in the code tagged as [KSPField] will be read from cfg when loading.\u003C/p\u003E\u003Cp\u003EIf no value is specified in the cfg for a KSPField, the default value will be used when the part loads.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-13T04:07:41Z","Content":"\n\u003Cp\u003Eyou can look at the code with Unity\u0027s Monodevelop IDE. the stock modules are not well documented, and not all the settings are visible by looking at the configs. This is one way to dig a little further than the config files.\u003C/p\u003E\u003Cp\u003Ehere\u0027s the ModuleDockingNode. some of them you see in the part config, some not. generally a public variable in a part module can be manipulated through the part\u0027s config settings. But the rub is not all of them are used in the module, if you know C# well you can look deeper and see which ones are and which ones aren\u0027t. The other setting you can try adjusting is captureMaxRvel. I\u0027d experiment with just one docking port on the launch pad, use ALT-F12 to turn off gravity. if you find a setting that works, you can use MM to apply it to all docking ports.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/nJHzUjZ.jpg\u0022 alt=\u0022nJHzUjZ.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E*Edit: I figured using *= would edit the default values; should have realized MM only deals with what\u0027s written in the config files.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-13T04:12:06Z\u0022 title=\u002212/13/2014 04:12  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 13, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2014-12-13T04:43:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bobe\u0022 data-cite=\u0022Bobe\u0022\u003E\u003Cdiv\u003EModule Manager detected an error in the file. Does it matter where it\u0027s stored within GameData, or is it just a syntax error? Should there be a second closing square bracket in the first line?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShouldn\u0027t it be \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E@PART[*]:HAS[@MODULE[ModuleDockingNode]]:Final\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E@MODULE[ModuleDockingNode] {\u003C/p\u003E\u003Cp\u003E%acquireForce *= 0.1 \u003C/p\u003E\u003Cp\u003E%acquireTorque *= 0.1\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEDIT- Looks like he missed a ] in it.\u003C/p\u003E\u003Cp\u003EEDIT- post # 4 right but # 5 wrong\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-13T04:48:17Z\u0022 title=\u002212/13/2014 04:48  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 13, 2014\u003C/time\u003E by Mecripp2\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-13T05:04:26Z","Content":"\n\u003Cp\u003Eyar... I been editing #4 to correct the MM patch. I was missing a bracket initially.\u003C/p\u003E\u003Cp\u003EI think this should actually work \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:HAS[@MODULE[ModuleDockingNode]]:FINAL  //applied after everything else\u003Cbr\u003E{\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E[INDENT]@MODULE[ModuleDockingNode]\u003Cbr\u003E{\u003Cbr\u003E[INDENT]%acquireForce = 0.1 //adds acquireForce if not specified; changes to 0.1 if is specified; stock value is 2 if not specified in part CFG.\u003Cbr\u003E%acquireTorque = 0.1 //same as above[/INDENT]\u003C/p\u003E\u003Cp\u003E \u003Cbr\u003E}[/INDENT]\u003Cbr\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m still not very good with the voodoo that is MM.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-13T05:10:05Z\u0022 title=\u002212/13/2014 05:10  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 13, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-13T09:20:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI think this should actually work \u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:HAS[@MODULE[ModuleDockingNode]]:FINAL  //applied after everything else\u003Cbr\u003E{\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E[INDENT]@MODULE[ModuleDockingNode]\u003Cbr\u003E{\u003Cbr\u003E[INDENT]%acquireForce = 0.1 //adds acquireForce if not specified; changes to 0.1 if is specified; stock value is 2 if not specified in part CFG.\u003Cbr\u003E%acquireTorque = 0.1 //same as above[/INDENT]\u003C/p\u003E\u003Cp\u003E \u003Cbr\u003E}[/INDENT]\u003Cbr\u003E}\u003C/p\u003E\u003Cp\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESeems to work exactly as desired. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-12-13T10:30:22Z","Content":"\n\u003Cp\u003EWhat does 2f mean?\u003C/p\u003E\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-13T11:39:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EWhat does 2f mean?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI assumed the f defined the value as a floating point number. Maybe the value itself refers to the acceleration, so it\u0027s effectively 2.0 m/s\u003Csup\u003E2\u003C/sup\u003E? I\u0027ll have to keep an eye on the ship\u0027s acceleration next time, though 2 m/s\u003Csup\u003E2\u003C/sup\u003E seems a bit high.\u003C/p\u003E\n"},{"CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2014-12-13T13:14:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EWhat does 2f mean?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, as stated the f just indicates it\u0027s a floating point number. My guess for force is 2kN, not sure what units torque uses, but maybe 2kN*m? A set acceleration doesn\u0027t fit the empirical experience since lower mass ships seem to be affected by the magnetic force more.\u003C/p\u003E\n"},{"CreatedByName":"Bobe","CreatedById":95803,"CreatedDateTime":"2014-12-13T14:12:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kujuman\u0022 data-cite=\u0022kujuman\u0022\u003E\u003Cdiv\u003EMy guess for force is 2kN, not sure what units torque uses, but maybe 2kN*m? A set acceleration doesn\u0027t fit the empirical experience since lower mass ships seem to be affected by the magnetic force more.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you had a 10 t ship, applying a force of 2000 N would result in an acceleration of 0.2 m/s\u003Csup\u003E2\u003C/sup\u003E, which seems close but slightly less than what I see for a docking of a ship of that mass (roughly \u00C3\u017D\u00E2\u20AC0.4 m/s). However, if you had a 1 t ship, a 2000 N force would result in an acceleration of 2 m/s\u003Csup\u003E2\u003C/sup\u003E.\u003C/p\u003E\u003Cp\u003ETo me those numbers don\u0027t quite seem to reflect what happens in the game, but I could be mistaken. The magnetism time is usually less than a second and I never see the relative velocity go over 1 m/s.\u003C/p\u003E\n"},{"CreatedByName":"ap0r","CreatedById":100383,"CreatedDateTime":"2016-08-07T19:25:40Z","Content":"\n\u003Cp\u003E\nThis has been really helpful, thanks\n\u003C/p\u003E\n"}]}