{"TopicId":110548,"ForumId":20,"TopicTitle":"Kerbin Ocean Additions (icebergs) I AM OPEN TO MORE IDEAS TO ADD THE THE SEAS OF KERBIN","CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-23T21:41:02Z","PageNum":1,"Articles":[{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-23T21:41:02Z","Content":"Okay, I have an Idea for a mod which adds in icebergs, they will work similar to asteroids but spawn in the ocean of Kerbin. I know how to make the part(s) and get them into the game, but I have no idea how to get them to spawn randomly but in the right place. Any one think they could tell me how I would go about doing that?\n\n![iceberg.jpg](https://d13yacurqjgara.cloudfront.net/users/68180/screenshots/1104190/iceberg.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-05-28T22:32:21Z\u0022 title=\u002205/28/2015 10:32  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 28, 2015\u003C/time\u003E by JaffaFediration**"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-24T16:59:43Z","Content":"No one?"},{"CreatedByName":"Feradose","CreatedById":111211,"CreatedDateTime":"2015-05-24T20:08:11Z","Content":"Did you look at how the asteroids or stuck kerbal pods spawn? Im no modder, but it might help you"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-24T21:06:36Z","Content":"I have no idea how, cfg files are tricky to open and edit on iOS\n\n**Edited \u003Ctime datetime=\u00222015-05-28T21:23:04Z\u0022 title=\u002205/28/2015 09:23  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 28, 2015\u003C/time\u003E by JaffaFediration**"},{"CreatedByName":"Windspren","CreatedById":134441,"CreatedDateTime":"2015-05-24T21:20:23Z","Content":"Try looking at the code for Custom Asteroids. This will be harder that you think, as all the asteroid spawner has to do is choose a random point in space and make a orbit there. You will have to make it so that your iceberg part:\n\nOnly spawns in water\n\nOnly spawns on Kerbin\n\nOnly spawns up north-ish\n\nSpawns on the surface\n\nMatches velocities with Kerbin\n\nIt will be a LOT of code."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-24T22:58:50Z","Content":"My suggestion would be to look at Contract Configurator\u0027s code for placing vessels at specific locations. The hardest part would be to ensure they only spawn in water, but if you only spawn them within, say, physics range of the active vessel then you can probably poll the PQS system and check if the terrain height is less than 0. You can quite easily check latitude and primary body. It actually shouldn\u0027t be very difficult or require much code.\n\nPseudo code:\n\nDuring FixedUpdate() randomly decide whether you should try to spawn an iceberg.\n\nCheck that the active vessel\u0027s mainBody is Kerbin (compare names, for instance), and perhaps that the active vessel\u0027s altitude is \u003C 2km or so. If not, cancel.\n\nPick a random location within a few km of the active vessel (add a random offset to the lat/lon of the active vessel).\n\nCheck the terrain height at that location. If \u003C 0, spawn iceberg (using the Contract Configurator code). Else, cancel (or pick a new spot).\n\nRepeat until you hit some internal limit of how many icebergs to spawn. To avoid issues with having a bunch of icebergs in the save file, I\u0027d add a listener for the vessel unload event and destroy the iceberg rather than save it to persistence.\n\nYou\u0027ll need to test it a bunch, but it shouldn\u0027t be too difficult to implement.\n\nEdit: Just to specifically address the concerns of the above poster, here is (one way) of handling the issues they present:\n\n**Only spawns in water**\n\n-Check the land height is less than 0\n\n**Only spawns on Kerbin**\n\n-check that the active vessel\u0027s mainBody is Kerbin\n\n**Only spawns up north-ish**\n\n-Check the active vessel latitude. Make sure the absolute value is greater than ~70 degrees (assuming you want north and south)\n\n**Spawns on the surface**\n\n-Set the iceberg\u0027s altitude to 0. Might need a slight offset. Testing will make that clear.\n\n**Matches velocities with Kerbin**\n\n-Set the vessel situation to landed or, better, splashed down. Orbits aren\u0027t calculated for those.\n\nE2: If it wasn\u0027t clear, you\u0027ll very likely need a plugin for this.\n\n**Edited \u003Ctime datetime=\u00222015-05-24T23:03:48Z\u0022 title=\u002205/24/2015 11:03  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 24, 2015\u003C/time\u003E by magico13**"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-25T00:39:09Z","Content":"Well I am in much much deeper water than I thought, thanks all the same. Don\u0027t expect anything till Sunday mabey, i am on holiday."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-25T00:42:56Z","Content":"If you\u0027d like, I can try to throw something together. I\u0027ve been thinking of trying to do something else that\u0027s related, so I could eventually work this into something bigger."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-25T03:55:17Z","Content":"And your timing is pretty good if you want to look at the Contract Configurator code - I just fixed a bug that was preventing spawning on water from working (everything would immediately warp to the bottom, which is kind of cool, but not really useful).\n\nAnyway, take a look at [SpawnVessel.CreateVessels()](https://github.com/jrossignol/ContractConfigurator/blob/master/source/ContractConfigurator/ContractBehaviour/SpawnVessel.cs#L193)."},{"CreatedByName":"GavinZac","CreatedById":68719,"CreatedDateTime":"2015-05-25T07:50:26Z","Content":"Would just like to say this is just awesomely useless ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) In a good way, I swear! Once you\u0027ve got the code and theory right it might make a very interesting thing to apply to Laythe or to some custom planets."},{"CreatedByName":"Feradose","CreatedById":111211,"CreatedDateTime":"2015-05-25T16:55:46Z","Content":"This needs to happen, if it can. I really want to test my rapier VTOL and lift those icebergs to orbit"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-25T21:00:01Z","Content":"I decided to try out coming up with a basic implementation of this. Definitely not working in a stable manner, but the linked code is a proof of concept. If you don\u0027t mind too much, I\u0027m considering trying to make this idea into a \u0022physical ground scatter\u0022 mod where physical ground scatter could happen, like icebergs in water, or rocks in the desert. Ideally it\u0027d be easily modable so people could add their own scatter based on planet, biome, latitude, etc.\n\nThe code below will take whatever craft file is in GameData/PhysicalScatter/iceberg.craft and will spawn it directly below the active vessel when it\u0027s over water and below 1km. It spawns quite a few of them (up to 100) and doesn\u0027t seem to be removing them properly. Like I said, very much a buggy proof of concept. Note that it takes a craft file, not a part file. It\u0027s got code that\u0027s basically a direct copy of the code from Contract Configurator. I had to make a few changes, but not too many.\n\nSince everything needs licenses, this will be under the MIT license, per Contract Configurator.\n\n[link](http://www.magico13.net/files/KSP/PhysicalScatter.zip)"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-25T23:51:58Z","Content":"Muh dream\n\n![hab4.jpg](http://www.mondolithic.com/wp-content/uploads/2009/08/hab4.jpg)"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-26T00:01:23Z","Content":"If you realistically want that, check out Kerbal Konstructs. That\u0027s totally possible to make with Kerbal Konstructs ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-26T00:30:47Z","Content":"\u003E \n\u003E Since everything needs licenses, this will be under the MIT license, per Contract Configurator.\n\nNeat, although MIT is a non-viral license, so you can release under whatever license you like."},{"CreatedByName":"Fel","CreatedById":57121,"CreatedDateTime":"2015-05-26T01:17:58Z","Content":"Realistically though, he blatantly copies your code so \u0022The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\u0022"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-26T02:31:01Z","Content":"\u003E \n\u003E Realistically though, he blatantly copies your code so \u0022The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\u0022\n\nWell, I don\u0027t like the use of \u0022blatantly copies\u0022 here, as that implies wrongdoing. As far as what he did being a substantial copy:\n\n    $ find source -name \u0027*.cs\u0027 | xargs wc -l | tail -n 1  26941 total$ find source -name \u0027SpawnVessel.cs\u0027 | xargs wc -l | tail -n 1    632 source/ContractConfigurator/ContractBehaviour/SpawnVessel.cs\n\nEven if he did take the entire source file verbatim (he didn\u0027t, it was one function) that would be about ~2% of the source, which I really don\u0027t think is \u0022substantial portions\u0022. So I would interpret that based on the license requirements, he can sublicense (ie. re-release under a different license) without including the copyright notice (but he did anyway, so it\u0027s really moot)."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-26T03:09:21Z","Content":"If/when I actually go and make it into a more fully featured mod, there will be additional changes to that code. Even if there aren\u0027t, credit will be given where credit is due. KSP modding isn\u0027t a solo effort (especially with the lack of any documentation from Squad), so people share ideas and code all the time. Nightingale freely offered the source as an example, the license permits reuse, and we\u0027re all friends here. If I borrow code from somewhere, I\u0027ll make sure to include credit. If nightingale wasn\u0027t satisfied with the amount of attribution, I\u0027d imagine I\u0027d be contacted directly about that and we\u0027d work something out ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI typically go with GPLv3 for my licenses, as I like to ensure things stay free, but the MIT license is fine by me too. As long as others can learn from my code, and borrow code when they can\u0027t solve a problem themselves but I can, then I\u0027m happy ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-26T09:20:00Z","Content":"I will be making the models as soon as I can."},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-26T14:50:12Z","Content":"\u003E \n\u003E I will be making the models as soon as I can.\n\nNo rush from me. I\u0027m back at work (sadly, the long weekend is over), so I won\u0027t be making as much progress during the week. I just wanted to see if I could come up with *something* as easily as I thought I could, and thankfully it played nicely and *mostly* worked right. I tend to be a somewhat slow modder and have a long time between releases of things ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-26T19:40:01Z","Content":"You should never rush an an artist muh friend."},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-28T12:22:24Z","Content":"Should I use a edited Potatroid .cfg since it is practically the same thing, also how could you make sure it \u0022melted\u0022 or at least explode when it gets to hot?"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2015-05-28T13:06:50Z","Content":"\u003E \n\u003E Should I use a edited Potatroid .cfg since it is practically the same thing, also how could you make sure it \u0022melted\u0022 or at least explode when it gets to hot?\n\nThe code I posted takes a .craft file, so ideally you\u0027d load up the iceberg in the VAB by itself and save that as a single part \u0022ship\u0022.\n\nTo have it \u0022melt\u0022 at some temperature you\u0027d have to play with the temperature values in the part config. I haven\u0027t done that before, but I imagine it isn\u0027t too difficult (there used to be a MaxTemp value but that may have changed in the new system).\n\nYou can copy the potatoroid for the part config if you want, but I don\u0027t actually know anything about making parts. The system I\u0027m using for spawning them has nothing in common really with the asteroid spawning code (I mean, it might, but it\u0027s not directly derived from that code)"},{"CreatedByName":"JaffaFediration","CreatedById":112619,"CreatedDateTime":"2015-05-28T22:35:39Z","Content":"Gib new ideas? I wad thinking giant Rubber duckies, hehehe.\n\n![odd-giant-rubber-duck.jpg](http://i1.cdnds.net/13/18/618x407/odd-giant-rubber-duck.jpg)"}]}