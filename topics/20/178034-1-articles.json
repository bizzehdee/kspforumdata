{"TopicId":178034,"ForumId":20,"TopicTitle":"dV-Calculations Incorrect with LH2 Engines","CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2018-09-03T09:21:04Z","PageNum":1,"Articles":[{"CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2018-09-03T09:21:04Z","Content":"\n\u003Cp\u003E\nHello all,\n\u003C/p\u003E\n\u003Cp\u003E\nI am posting this here, because I have noticed some odd behaviour in conjunction with engines using liquid hydrogen (LH2), such as from the Cryo Engines pack by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/83952-nertea/\u0026amp;do=hovercard\u0022 data-mentionid=\u002283952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/83952-nertea/\u0022 rel=\u0022\u0022\u003E@Nertea\u003C/a\u003E or from BDB by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/105588-cobaltwolf/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022105588\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/105588-cobaltwolf/\u0022 rel=\u0022\u0022\u003E@CobaltWolf\u003C/a\u003E. I am not posting the relevant threads, as I believe this is not a bug of these specific mods but rather something underlying, which makes these engines work.\n\u003C/p\u003E\n\u003Cp\u003E\nThe issue is that with any LH2 engine, that I have used so far, the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculation within the game seems incorrect. This becomes apparent, when using a mod such as MechJeb and/or \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E, which calculate the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E per stage and for the whole ship.\n\u003C/p\u003E\n\u003Cp\u003E\nFollowing please find some screenshots to illustrate what I am referring to: In the first screenshot, I am at the beginning of executing a manouver node of ~350m/s, I have 3,770m/s left in my rocket.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00222018-09-02_7.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://cdn.discordapp.com/attachments/206181796164009984/485832719096479754/2018-09-02_7.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nYou would expect that after the burn, you\u0027d be left with ~3,418m/s.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00222018-09-02_8.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://cdn.discordapp.com/attachments/206181796164009984/485832713014870017/2018-09-02_8.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nInstead, you end up with roughly twice the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E expended, with only 3,114m/s left in your rocket.\n\u003C/p\u003E\n\u003Cp\u003E\nFWIW, I installed \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E as well, to see if the error can be traced back to some error with MechJeb, but this does not seem to be the case, as the remaining \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E is calculated almost to the same value (#floatingpointerror) in both mods. Now, I do believe there is only one way to calculate the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of a rocket, hence the error must be somewhere else?!\n\u003C/p\u003E\n\u003Cp\u003E\nI heard that others, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/152263-rocketpcgaming/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022152263\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/152263-rocketpcgaming/\u0022 rel=\u0022\u0022\u003E@RocketPCGaming\u003C/a\u003E specifically, wondered about this inconsistency as well. As I have currently no idea, what might be causing this, I would like to stick some heads together to try and find the cause for this. As a start I would like to ask others, whether or not they have seen the same kind of behaviour and if so, was/is it similar to what I have seen (roughly twice the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E expended than anticipated) or was it a different kind of inconsistency?\n\u003C/p\u003E\n\u003Cp\u003E\nYour feedback will be very welcome!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"4x4cheesecake","CreatedById":187982,"CreatedDateTime":"2018-09-03T14:25:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223444396\u0022 data-ipsquote-contentid=\u0022178034\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221535966464\u0022 data-ipsquote-userid=\u0022118557\u0022 data-ipsquote-username=\u0022StarStreak2109\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, StarStreak2109 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs a start I would like to ask others, whether or not they have seen the same kind of behaviour and if so, was/is it similar to what I have seen (roughly twice the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E expended than anticipated) or was it a different kind of inconsistency?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHappens to me as well but with stock engines/fuel and AFAIK, the reason for this behaviour is somehow connected to the root part of the vessel.\n\u003C/p\u003E\n\u003Cp\u003E\nRecently, my Cassini-Huygens probe I\u0027ve build for one of the shuttle challenges, displayed a \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of ~2700m/s and just a single stage because the root part was on of the SRBs in the first stage. Re-rooting it to the probe core at the top brought back the correct values (1955m/s for the transfer stage and 322m/s for the probe itself)\n\u003C/p\u003E\n\u003Cp\u003E\nBased on this observation, I assume that \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E and \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E don\u0027t use the staging bar to separate the calculations for different stages but the part informations in the .craft file.\n\u003C/p\u003E\n\u003Cp\u003E\nAny chance you got an unusual root part as well?\n\u003C/p\u003E\n"},{"CreatedByName":"CobaltWolf","CreatedById":105588,"CreatedDateTime":"2018-09-03T17:48:23Z","Content":"\n\u003Cp\u003E\nWouldnt it be from the boiloff?\n\u003C/p\u003E\n"},{"CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2018-09-03T20:34:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223444508\u0022 data-ipsquote-contentid=\u0022178034\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221535984734\u0022 data-ipsquote-userid=\u0022187982\u0022 data-ipsquote-username=\u00224x4cheesecake\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, 4x4cheesecake said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHappens to me as well but with stock engines/fuel and AFAIK, the reason for this behaviour is somehow connected to the root part of the vessel.\n\u003C/p\u003E\n\u003Cp\u003E\nRecently, my Cassini-Huygens probe I\u0027ve build for one of the shuttle challenges, displayed a \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of ~2700m/s and just a single stage because the root part was on of the SRBs in the first stage. Re-rooting it to the probe core at the top brought back the correct values (1955m/s for the transfer stage and 322m/s for the probe itself)\n\u003C/p\u003E\n\u003Cp\u003E\nBased on this observation, I assume that \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E and \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E don\u0027t use the staging bar to separate the calculations for different stages but the part informations in the .craft file.\n\u003C/p\u003E\n\u003Cp\u003E\nAny chance you got an unusual root part as well?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHi,\n\u003C/p\u003E\n\u003Cp\u003E\ninteresting idea. I shall investigate that one!\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223444618\u0022 data-ipsquote-contentid=\u0022178034\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221535996903\u0022 data-ipsquote-userid=\u0022105588\u0022 data-ipsquote-username=\u0022CobaltWolf\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, CobaltWolf said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWouldnt it be from the boiloff?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, I have boiloff deactivated. Also in that short time span, 200% more fuel expenditure than projected at the beginning of the burn would be excessive, wouldn\u0027t you think?\n\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2018-09-05T10:48:14Z","Content":"\n\u003Cp\u003E\nSo not sure if it is related but BDAc AI air battles using craft built in previous versions of KSP use fuel faster in KSP 1.4.5 as compared to previous versions of KSP\n\u003C/p\u003E\n\u003Cp\u003E\nI have craft I built going back a few years and I have found that on average the crafts in question use about a third or more fuel than they did in previous versions of KSP\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nA plane I built specifically to fly for 15 minutes in a previous KSP version will only just make the 10 minute mark and then run out of fuel in KSP v1.4.x\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-09-05T10:49:07Z\u0022 title=\u002209/05/2018 10:49  AM\u0022 data-short=\u00225 yr\u0022\u003ESeptember 5, 2018\u003C/time\u003E by DoctorDavinci\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Rocketology","CreatedById":152263,"CreatedDateTime":"2018-09-13T19:03:45Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/118557-starstreak2109/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022118557\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/118557-starstreak2109/\u0022 rel=\u0022\u0022\u003E@StarStreak2109\u003C/a\u003E\u00A0I hadn\u0027t dug into this, just noticed it. I thought it may have been an error in \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E as I was using SSTU which does things very different from stock/ other mods and \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E miscalculates at times. That being said, have you done the rocket equation on a test vehicle and compared it to it\u0027s actual performance vs. \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E/ \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E?\u003Cbr\u003E\u003Cbr\u003E\nAnd as Cobaltwolf stated above, have to account for boiloff which varies between different mods as to the rate and other factors such as tank type/ EC usage.\n\u003C/p\u003E\n\u003Cp\u003E\n.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-09-13T19:06:38Z\u0022 title=\u002209/13/2018 07:06  PM\u0022 data-short=\u00225 yr\u0022\u003ESeptember 13, 2018\u003C/time\u003E by RocketPCGaming\u003C/strong\u003E\n\u003Cbr\u003Eadded content\n\u003C/span\u003E\n"},{"CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2018-09-13T21:12:18Z","Content":"\n\u003Cp\u003E\nHey,\n\u003C/p\u003E\n\u003Cp\u003E\nactually, I hadn\u0027t had much chance to dig into it deeper due to real life constraints... I have not thought of doing the math actually. My findings / prerequisites are still:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E and \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E deliver roughly the same numbers concerning \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E for both \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E as well as LH2 engines.\n\u003C/li\u003E\n\u003Cli\u003E\nWhen using LH2 engines, the \u003Cu\u003Eactual \u003C/u\u003Eamount of \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E spent during an in-space manouver is twice as high as stated by the \u003Cu\u003Emanouver node system\u003C/u\u003E.\n\u003C/li\u003E\n\u003Cli\u003E\nBoil-off is \u003Cu\u003Edeactivated\u003C/u\u003E all the time, so it should not factor in the calculations.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI still have to try whether the root part has anything to do with it...\n\u003C/p\u003E\n"},{"CreatedByName":"Ultimate Steve","CreatedById":161505,"CreatedDateTime":"2018-09-13T21:16:38Z","Content":"\n\u003Cp\u003E\nYou know, I\u0027ve had something similar happen... Don\u0027t know what is causing it, but I ended up with\u00A0\u003Cem\u003Emore\u003C/em\u003E\u00A0Delta-V than what \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E said. \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E consistently showed more (No, I wasn\u0027t in Aero mode) and as a result my 100t lifter can lift something like 140t, which shrunk my lunar architecture form one launch to two.\n\u003C/p\u003E\n"}]}