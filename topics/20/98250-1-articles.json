{"TopicId":98250,"ForumId":20,"TopicTitle":"Mod that changes the mass of pods depending on kerbal occupancy.","CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-01-30T11:28:37Z","PageNum":1,"Articles":[{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-01-30T11:28:37Z","Content":"\n\u003Cp\u003EHi guys!\u003C/p\u003E\u003Cp\u003EI am interested if anyone has developed, or is interested in developing, a mod that automatically adjusts the mass of the command pods based on the number of kerbals occupying them. (Possibly also the number of \u0027sample survey\u0027 datas stored within it also?)\u003C/p\u003E\u003Cp\u003EAs it currently stands, the EAS-1 chair is the only part which changes mass, perhaps the coding for that effect could be \u0022Module Manager\u0022ed onto the other pods?\u003C/p\u003E\u003Cp\u003EThanks for consideration,\u003C/p\u003E\u003Cp\u003ESam\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003E*Aqua* has kindly coded a plugin based on my request. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/109790-0-90-KerbalMass-0-8-Alpha\u0022 rel=\u0022external nofollow\u0022\u003EThread is here\u003C/a\u003E.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-07T01:55:59Z\u0022 title=\u002202/07/2015 01:55  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 7, 2015\u003C/time\u003E by kahlzun\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2015-01-30T16:10:11Z","Content":"\n\u003Cp\u003EThis... is actually a pretty awesome idea. I wish it were implemented in the stock game, since astronaut weight is a big consideration in real life as well.\u003C/p\u003E\n"},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2015-01-30T16:54:05Z","Content":"\n\u003Cp\u003ECan\u0027t just module manager the seat to pods. They use totally different modules.\u003C/p\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-02-01T11:43:24Z","Content":"\n\u003Cp\u003EI meant whatever part of the module which triggers the change of weight.\u003C/p\u003E\n"},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2015-02-01T11:45:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kahlzun\u0022 data-cite=\u0022kahlzun\u0022\u003E\u003Cdiv\u003EI meant whatever part of the module which triggers the change of weight.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey don\u0027t even use the same module to cut/paste that part in.\u003C/p\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-02-01T12:15:28Z","Content":"\n\u003Cp\u003ESorry, im not too good with the internals of KSP.\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-01T23:28:33Z","Content":"\n\u003Cp\u003ETechnically, the easy way to implement this would be to add a weight resource to any part that can contain Kerbals, and fill it wen a kerbal enters the Part.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-02T00:33:43Z","Content":"\n\u003Cp\u003EI\u0027m currently working on that. But I can\u0027t tell you when it\u0027ll be released.\u003C/p\u003E\u003Cp\u003EThere are some things which make me scrach my head (example: Kerbals going on EVA have an initial mass of 3.13 tons - why? I don\u0027t know.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-02T00:36:51Z\u0022 title=\u002202/02/2015 12:36  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 2, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-02-02T10:26:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003EI\u0027m currently working on that. But I can\u0027t tell you when it\u0027ll be released.\u003Cp\u003EThere are some things which make me scrach my head (example: Kerbals going on EVA have an initial mass of 3.13 tons - why? I don\u0027t know.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m just happy someone\u0027s working on it.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-02T12:26:40Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Ca href=\u0022http://imgur.com/Wcyce7N\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/Wcyce7N.gif\u0022 alt=\u0022Wcyce7N.gif\u0022\u003E\u003C/a\u003E\u003Cp\u003EFirst image: All capsules don\u0027t have a crew. CoM in neutral position.\u003C/p\u003E\u003Cp\u003ESecond image: Capsule has 3 crews (3 x 93.75 kg). CoM moves a bit to the front.\u003C/p\u003E\u003Cp\u003EThird image: All capsules are fully manned (3 x 93.75 kg in the front \u002B 3 x 4 x 93.75 kg in the back = 1406.25 kg!). CoM moves back.\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EI guess some plane engineers are going to be angry with me. ^^\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-02T12:30:04Z\u0022 title=\u002202/02/2015 12:30  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 2, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rabidninjawombat","CreatedById":108889,"CreatedDateTime":"2015-02-02T22:01:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI guess some plane engineers are going to be angry with me. ^^\u003C/p\u003E\u003C/div\u003E\u003Cblockquote\u003E\u003Ca href=\u0022http://i.imgur.com/Wcyce7N.gif\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/Wcyce7N.gif\u003C/a\u003E\u003Cp\u003EFirst image: All capsules don\u0027t have a crew. CoM in neutral position.\u003C/p\u003E\u003Cp\u003ESecond image: Capsule has 3 crews (3 x 93.75 kg). CoM moves a bit to the front.\u003C/p\u003E\u003Cp\u003EThird image: All capsules are fully manned (3 x 93.75 kg in the front \u002B 3 x 4 x 93.75 kg in the back = 1406.25 kg!). CoM moves back.\u003C/p\u003E\u003C/blockquote\u003E\u003C/blockquote\u003E\u003Cp\u003ENice work! good for added realism. Though 93kg seems a bit heavy for a kerbal \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-02T22:20:22Z","Content":"\n\u003Cp\u003EA external command seat automatically changes it\u0027s part mass by \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Kerbal\u0022 rel=\u0022external nofollow\u0022\u003E93.75 kg\u003C/a\u003E when a Kerbal boards or leaves it. That\u0027s where the number comes from. \u003Cspan style=\u0022font-size:8px;\u0022\u003E(I remember there was a discussion about that. People concluded that a Kerbal itself weights about 30 kg. The space suit is the heavy thing.)\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EYou can tweak the Kerbal\u0027s mass in a config file if you think it\u0027s too much or not enough. I added that to allow modding (had RSS in mind where everything can have a different scale).\u003C/p\u003E\u003Cp\u003EI\u0027m almost finished. I still have to test a complete mission with several parts, in the editor, launching and recovering, EVAing and boarding, saving and loading, etc. When nothing goes wrong I\u0027ll release this small mod tonight or tomorrow.\u003C/p\u003E\n"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-02-03T00:36:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI guess some plane engineers are going to be angry with me. ^^\u003C/p\u003E\u003C/div\u003E\u003Cblockquote\u003E\u003Ca href=\u0022http://imgur.com/Wcyce7N\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Ca href=\u0022http://i.imgur.com/Wcyce7N.gif\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/Wcyce7N.gif\u003C/a\u003E\u003Cp\u003EFirst image: All capsules don\u0027t have a crew. CoM in neutral position.\u003C/p\u003E\u003Cp\u003ESecond image: Capsule has 3 crews (3 x 93.75 kg). CoM moves a bit to the front.\u003C/p\u003E\u003Cp\u003EThird image: All capsules are fully manned (3 x 93.75 kg in the front \u002B 3 x 4 x 93.75 kg in the back = 1406.25 kg!). CoM moves back.\u003C/p\u003E\u003C/blockquote\u003E\u003C/blockquote\u003E\u003Cp\u003EIt looks like you just made crew a resource. Does the mass actually change with Kerbal count?\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-03T11:20:02Z","Content":"\n\u003Cp\u003EIt\u0027s not a resource. I add a new KerbalMassModule to each part which can hold a crew. It changes the part\u0027s mass depending on how many Kerbals are in that part. In flight it queries the part\u0027s population to work. Ok... in a way it feels like a ressource.\u003C/p\u003E\u003Cp\u003EUnfortunately Squad hasn\u0027t exposed a public API for the crew assignment in the editor. That\u0027s why I added a slider in the context menu to allow a quick and easy way to preview CoM changes. I just needed to do that. For example a MK3 passenger module can hold up to 16 Kerbals, so the difference between fully manned and and empty is 16 * 93.75 kg = 1.5 tons. If you can\u0027t preview that difference in the editor people will be bugged.\u003C/p\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-02-03T12:33:06Z","Content":"\n\u003Cp\u003EAre you adding the kerbal mass to the initial part, or are you assuming the part as stock comes occupied, and reducing the weight for empties?\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-03T14:10:05Z","Content":"\n\u003Cp\u003EThere\u0027s a switch in the config file to choose one of both behaviors. By default it assumes the initial part mass is without Kerbals.\u003C/p\u003E\u003Cp\u003ECurrently I\u0027m still trying to figure out how to not save the new module to a save file. The reason for that is to guarantee flawless behavior if the user removed the mod. It already works on the persistence file but not on the VAB save file.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EI\u0027m sorry, you have to wait a bit more. There is a major problem with saving and loading. The changed mass gets written to the save file. The next time the game loads that save my mod adds more mass to it. So on every saving and loading the part mass increases. My attempts to prevent that didn\u0027t work so far.\u003C/p\u003E\u003Cp\u003EIf this keeps on I\u0027ll have to include ModuleManager and rewrite a lot of code. That\u0027s a thing I still hope to avoid, even when it has some advantages.\u003C/p\u003E\u003Cp\u003EAbout the switch I mentioned in this post: I\u0027m not sure if it\u0027s a good idea to treat the default mass as the total mass including Kerbals. There are some parts like the external command seat which weight less than a Kerbal (50 kg \u0026lt;-\u0026gt; 93,75 kg). Because of the special behavior of parts like the seat (it auto-adds/auto-substracts Kerbal mass on boarding or EVAing) I added blacklist options in the cfg for parts and parts with specific modules. My mod will then ignore them.\u003C/p\u003E\u003Cp\u003EI can also add an option to treat these parts in a special way: The mod could reverse what ever that part does with its mass and then apply my mass changes (useful when you change the Kerbal mass in the cfg). Do you want that funtionality?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-04T05:27:22Z\u0022 title=\u002202/04/2015 05:27  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 4, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-02-06T01:49:08Z","Content":"\n\u003Cp\u003EThat would make sense, it would allow changes to Kerbal mass to work as expected.\u003C/p\u003E\u003Cp\u003EThough it probably isn\u0027t terribly important overall, if its going to be a lot of work, you could always release it \u0027as is\u0027 and have that as a later \u0027stretch goal\u0027..\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-06T05:26:55Z\u0022 title=\u002202/06/2015 05:26  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 6, 2015\u003C/time\u003E by kahlzun\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2015-02-06T06:17:06Z","Content":"\n\u003Cp\u003EI guess now we are also able to use kerbals as counter balance weight.\u003C/p\u003E\u003Cp\u003E\u0022Kerbals, today you are tasked with an important duty, one that may means success or failure of the entire mission. You must sit here, strap on your seat belt and...remains like that for the rest of the flight. No wiggling in your seat, no taking your seat belt off, and most importantly, no going to bathroom. May the stars bless your souls.\u0022\u003C/p\u003E\n"},{"CreatedByName":"KerBlam","CreatedById":134309,"CreatedDateTime":"2015-02-06T06:22:16Z","Content":"\n\u003Cp\u003EMaybe kerbals weigh that much because they\u0027re so dense.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-02-06T08:03:19Z","Content":"\n\u003Cp\u003EI love this community.\u003C/p\u003E\u003Cp\u003E\u0022Hey this would be neat.\u0022\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u0022I think I can do that.\u0022\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u0022Sweet how long do you think it would take?\u0022\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u0022I\u0027ve got a prototype working right now...\u0022\u003C/em\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-02-06T09:45:45Z","Content":"\n\u003Cp\u003EFYI the seat does not add anything. The mass comes from the kerbal itself, who is attached to the seat.\u003C/p\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2015-02-06T12:11:26Z","Content":"\n\u003Cp\u003EWell, yes, but no other part has that effect, which is what this is intending to fix.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-02-06T12:19:59Z","Content":"\n\u003Cp\u003EI am not saying otherwise. It\u0027s just that there is not code in the seat module to deal with the mass.\u003C/p\u003E\u003Cp\u003EAdding the mass with a part module leads to added complexity since other module might also try to change the mass.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-06T16:21:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EFYI the seat does not add anything. The mass comes from the kerbal itself, who is attached to the seat.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat means I don\u0027t have to change anything of the seats behavior - as long as there isn\u0027t a surprise in the the code. I didn\u0027t test that out yet. Thank you for your information! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAdding the mass with a part module leads to added complexity since other module might also try to change the mass. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe other modules can change the part\u0027s mass as they like. That\u0027s no problem. I\u0027m only adding or substracting mass on EVAing, boarding and transfering. I do not reset the part\u0027s mass to a default value or something like that so other module\u0027s changes still have their effect applied.\u003C/p\u003E\u003Cp\u003EThat\u0027s reason why I didn\u0027t released yet. I just want to make sure that I don\u0027t blow up the game.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-06T16:25:20Z\u0022 title=\u002202/06/2015 04:25  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 6, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-06T18:55:29Z","Content":"\n\u003Cp\u003EI found a surprise in the code. The mass of an EVAed Kerbal is calculated by the KerbalEVA part module. It has an initial mass (\u0027initialMass\u0027) of 3.125 tons. That get\u0027s multiplied by a factor (\u0027massMultiplier\u0027) of 0.03 which results in a final mass of 93.75 kg.\u003C/p\u003E\u003Cp\u003EI don\u0027t know why Squad did it but that also influences the jet pack. Setting the initialMass to 0.05 and the multiplier to 1 \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Eresulted in no more visible RCS exhaust\u003C/span\u003E. I didn\u0027t test it but I assume the thrust changed also.\u003C/p\u003E\u003Cp\u003EEdit: Further test showed it doesn\u0027t seam to influence the jet pack. It was another thing I did.\u003C/p\u003E\u003Cp\u003EStill I don\u0027t know why they came up with this kind of mass calculation.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-06T19:07:09Z\u0022 title=\u002202/06/2015 07:07  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 6, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"}]}