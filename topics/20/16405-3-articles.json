{"TopicId":16405,"ForumId":20,"TopicTitle":"MechJeb Autom8 Scripts Megathread","CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-08-08T23:57:23Z","PageNum":3,"Articles":[{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-08-16T17:46:33Z","Content":"\n\u003Cp\u003ETGMB1, I put your text in spoiler tags for you as it was a bit messy, \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/showthread.php/15764-Forum-s-migration-to-vBulletin?p=226762#post226762\u0022 rel=\u0022external nofollow\u0022\u003Eyou can find the new spoiler format here\u003C/a\u003E \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"domox","CreatedById":17108,"CreatedDateTime":"2012-08-16T18:06:24Z","Content":"\n\u003Cp\u003EWould peeps be interested in starting a mechjeb autom8 script repo on github? It\u0027d be easy-peasy and provide a great way to track changes/file issues...\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-17T02:03:32Z","Content":"\n\u003Cp\u003EThank you to the Mechjeb team for both Mechjeb, and releasing the Autom8 lua interface! That\u0027s very much something I\u0027m enjoying. \u003C/p\u003E\u003Cp\u003EIn the hopes that this is useful to some of the other script kerbals out there, I\u0027m hereby releasing a set of three lua scripts/pseudo-libraries, licensed under your choice of GPLv2, GPLv3, or Creative Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) \u003Ca href=\u0022http://www.gnu.org/licenses/gpl-2.0.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.gnu.org/licenses/gpl-2.0.html\u003C/a\u003E or \u003Ca href=\u0022http://www.gnu.org/licenses/gpl.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.gnu.org/licenses/gpl.html\u003C/a\u003E or \u003Ca href=\u0022http://creativecommons.org/licenses/by-sa/3.0/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://creativecommons.org/licenses/by-sa/3.0/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAll functions have extensive comments regarding how to use them, and there are help functions in all three files to make essentially the same information available when using the code.\u003C/p\u003E\u003Cp\u003ESimpleOrbitalMechanics 0.002 (\u003Ca href=\u0022http://pastebin.com/eZkL9wW7\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/eZkL9wW7\u003C/a\u003E) is just that - orbital mechanics. It can be run in any lua environment (including lua for your OS), and all it does it orbital math. Well, and it knows a few facts regarding a few celestial bodies (Earth, Kerbin, Mun, Minmus). It has functions to calculate the semi-major axis, calculate desired Apoapsis and Periapsis values, calculate sidereal orbital periods, calculate orbital velocities, and calculate u (GM, the standard gravitiational parameter) - which it can use to guess which body your orbit must be around. There are also functions to calculate whether an orbit is stable (above the atmosphere, below the end of the Hill sphere [of influence]), to calculate Apoapsis and Periapsis for a particular orbital period, and a specific function to calculate Molniya orbits. Additionally, it has a reasonably capable test harness, so you can do a test and see if it\u0027s returning the expected results.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E-- Function headings:\u003Cbr\u003EglobalSomOverallInit()\u003Cbr\u003EglobalSomMainBodyReset(MainBodyName)\u003Cbr\u003EcalcSomSemiMajorAxisOrbitingSphereFromApPeMbr(Ap, Pe, MainBodyRadius)\u003Cbr\u003EcalcSomPeorapFromaAporpeMbr(a, Aporpe, MainBodyRadius)\u003Cbr\u003EcalcSomSiderealOrbitalPeriodFromaGm(a, GM)\u003Cbr\u003EcalcSomSemiMajorAxisFromSopGm(SiderealOrbitalPeriod, GM)\u003Cbr\u003EcalcSomGMFromaSop(a, SiderealOrbitalPeriod)\u003Cbr\u003EcalcSomSiderealOrbitalPeriodFromApPeMbrGm(Ap, Pe, MainBodyRadius, GM)\u003Cbr\u003EcalcSomOrbitalVelocityFromaGmRfcb(a, GM, RadiusFromCentralBody)\u003Cbr\u003EcalcSomOrbitalVelocityFromaGmAltaslMbr(a, GM, AltitudeASL, MainBodyRadius)\u003Cbr\u003EcalcSomGMFromaOvRfcb(a, OrbitalVelocity, RadiusFromCentralBody)\u003Cbr\u003EcalcSomGMFromaOvAltaslMbr(a, OrbitalVelocity, AltitudeASL, MainBodyRadius)\u003Cbr\u003EguessSomWhatBodyIsTheMainBodyFromaOvAltaslMoe(a, OrbitalVelocity, AltitudeASL, MarginOfError)\u003Cbr\u003EcalcSomPeorapFromAporpeMbrGmSop(Aporpe, MainBodyRadius, GM, SiderealOrbitalPeriod)\u003Cbr\u003EcalcSomMolniyaPeorapFromAporpeMbrGmSrp(Aporpe, MainBodyRadius, GM, SiderealRotationalPeriod)\u003Cbr\u003EcalcSomApPeFromAporpePeorap(Aporpe, Peorap)\u003Cbr\u003EcalcSomMolniyaApPeFromHsoiMsaMbrGmSrpMoe(HillSphereOfInfluence, MinStableAltitude, MainBodyRadius, GM, SiderealRotationalPeriod, MarginOfError)\u003Cbr\u003EisSomOrbitStableFromApPeHsoiMsa(Ap, Pe, HillSphereOfInfluence, MinStableAltitude)\u003Cbr\u003EcalcSomDeltaVFromIspTsmTem(Isp, TotalStartingMass, TotalEndingMass)\u003Cbr\u003EcalcSomIspFromTsmTemDv(TotalStartingMass, TotalEndingMass, DeltaV)\u003Cbr\u003EtestSomTestHarness()\u003Cbr\u003EhelpSomSimpleOrbitalMechanics1()\u003Cbr\u003EhelpSomSimpleOrbitalMechanics2()\u003Cbr\u003EhelpSomSimpleOrbitalMechanics3()  \u003Cbr\u003EhelpSomSimpleOrbitalMechanics4()  \u003Cbr\u003EhelpSomSimpleOrbitalMechanics5()\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENotably lacking are Delta-V predictions for specific orbital changes - what I could find of the vis-viva equations were mostly simplified for circular orbits, and I want to implement the general case if possible, not a specific case.\u003C/p\u003E\u003Cp\u003ESimpleKSPOrbitalMechanics 0.003 (\u003Ca href=\u0022http://pastebin.com/fvD6hK1h\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/fvD6hK1h\u003C/a\u003E) is pretty sparse, since KSP already implements simple orbital mechanics properly in the first place. It has functions that automatically use the vessel.X values to guess which planet you\u0027re orbiting (or on), to print a fair bit of that vessel.X information to the Autom8 screen, to calculate stable Molniya orbits around whatever celestial body you\u0027re orbiting, to check if your current orbit is stable, and to report on orbital and mass variables instantaneously as well as the changes over a specified number of seconds.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E-- Function headings\u003Cbr\u003EglobalSkomKSPMainBodyResetBasedOnGuessing()\u003Cbr\u003EguessSkomKSPWhatBodyIsTheMainBodyCurrentlyBeingOrbited()\u003Cbr\u003Efunction calcSkomMolniyaApPeFromMainBodyCurrentlyBeingOrbitedFromMoe(MarginOfError)\u003Cbr\u003Efunction printSkomKSPCurrentOrbitalElements()\u003Cbr\u003Efunction reportSkomCurrentMsMsdApPeSopTmapTmpeLanAopIncEccAOvSvVvHvHdPiRlAltaslAlttruAltbotLatLngRfcbGAtmdTm()\u003Cbr\u003Efunction reportSkomCurrentChangeOverTimeMsiMsfMsMsdApPeSopTmapTmpeLanAopIncEccAOvSvVvHvHdPiRlAltaslAlttruAltbotLatLngRfcbGAtmdTmFromTmbiTmbtwnDriver(TimeBeforeInitial, TimeBetween)\u003Cbr\u003Efunction printSkomCurrentChangeOverTimeMsiMsfMsMsdApPeSopTmapTmpeLanAopIncEccAOvSvVvHvHdPiRlAltaslAlttruAltbotLatLngRfcbGAtmdTmFromTmbiTmbtwnDriver(TimeBeforeInitial, TimeBetween)\u003Cbr\u003EcoprintSkomCurrentChangeOverTimeMsiMsfMsMsdApPeSopTmapTmpeLanAopIncEccAOvSvVvHvHdPiRlAltaslAlttruAltbotLatLngRfcbGAtmdTmFromTmbiTmbtwn(TimeBeforeInitial, TimeBetween)\u003Cbr\u003EisSkomCurrentOrbitStable()\u003Cbr\u003EprintSkomKSPCurrentVesselInfo()\u003Cbr\u003EhelpSkomSimpleKSPOrbitalMechanics1()\u003Cbr\u003EhelpSkomSimpleKSPOrbitalMechanics2()\u003Cbr\u003EhelpSkomSimpleKSPOrbitalMechanics3()\u003Cbr\u003EhelpSkomSimpleKSPOrbitalMechanics4()\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESimpleKSPOrbitalOperations 0.002 (\u003Ca href=\u0022http://pastebin.com/Vsdbth2h\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/Vsdbth2h\u003C/a\u003E) is, so far, similar to but a little more generic than what we\u0027ve seen already by other users - one function to launch a ship from the ground into a specific orbit (by Apoapsis, Periapsis, and Inclination), and a second script that automatically launches into a Molniya orbit at the chosen inclination (63.4, 116.6, -63.4, -116.6), if one is available (Kerbin and the Mun, at least, can have Molniya orbits). Functions are available to show a ship\u0027s actual, tested Isp (Specific Impulse), DeltaV per kg fuel, and DeltaV per second at various thrusts - this is an amazing test of the 0.16 fuel consumption bug:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E-- Put the three .lua files in your PluginData\\mumechlib directory\u003Cbr\u003E-- in the Autom8 window from a vessel in a stable elliptical or circular orbit around any body, copy and paste:\u003Cbr\u003Erequire \u0022SimpleKSPOrbitalOperations\u0022\u003Cbr\u003EcotestSkooIspFromTmbiTmbtwnNsMpcs(0.5, 0.5, 4, 0.02)\u003Cbr\u003E-- then hit Enter or click Execute\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E-- Function headings\u003Cbr\u003ElaunchSkooFromApPeInc(Ap, Pe, Inclination)\u003Cbr\u003ElaunchSkooMolniyaFromIncMoe(Inclination, MarginOfError)\u003Cbr\u003EcolaunchSkooFromApPeInc(Ap, Pe, Inclination)\u003Cbr\u003EcolaunchSkooMolniyaFromIncMoe(Inclination, MarginOfError)\u003Cbr\u003EmeasureSkooIspFromTmbiTmbtwnNsDriver(TimeBeforeInitial, TimeBetweenEach, NumberSlices)\u003Cbr\u003EtestSkooIspFromTmbiTmbtwnNsMpcsDriver(TimeBeforeInitial, TimeBetweenEach, NumberSlices, MaxPointingChangeStable)\u003Cbr\u003EcotestSkooIspFromTmbiTmbtwnNs(TimeBeforeInitial, TimeBetweenEach, NumberSlices)\u003Cbr\u003EcotestSkooIspFromTmbiTmbtwnNsMpcs(TimeBeforeInitial, TimeBetweenEach, NumberSlices, MaxPointingChangeStable)\u003Cbr\u003EhelpSkooSimpleKSPOrbitalOperations1()\u003Cbr\u003EhelpSkooSimpleKSPOrbitalOperations2()\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENext on the agenda, if I can get them working: Orbit phase changes for those that want constellations!\u003C/p\u003E\u003Cp\u003EI\u0027ve also attached them, for anyone who doesn\u0027t want to use the Pastebin links.\u003C/p\u003E\u003Cp\u003EP.S. No, I\u0027ve never touched lua before in my life. Why do you ask?\u003C/p\u003E\u003Cp\u003EP.P.S. No, I really don\u0027t know if the sidereal rotational period of the Mun is 41, 38... or 39... hours - I see a note about being tidally locked in the wiki, and then I see that the sidereal and planetary rotation periods are different, so I\u0027m confused.\u003C/p\u003E\u003Cp\u003EEDIT: 20120827 Updated Som and Skom to 0.002 - added real life Moon data, delta-V based on Tsiolkovsky rocket equation and Isp (specific impulse), useful constants, minor renaming of Period to SiderealOrbitalPeriod, added more Autom8 variables to the Skom print... functions. \u003C/p\u003E\u003Cp\u003EEDIT: 20120904 Updated Skom to 0.003 and Skoo to 0.002 - added KSP based isOrbitStable, reporting on orbital and mass variables instantaneously and over time(!), and operational testing of actual Isp at various thrust settings. Skoo now has functional code to detect when mechjeb.attitudeTo() has finished pointing.\u003C/p\u003E\u003Cp\u003EOlder versions are at:\u003C/p\u003E\u003Cp\u003ESimpleOrbitalMechanics 0.001 (\u003Ca href=\u0022http://pastebin.com/YDdSA37H\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/YDdSA37H\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003ESimpleKSPOrbitalMechanics 0.001 (\u003Ca href=\u0022http://pastebin.com/yQ09yHJi\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/yQ09yHJi\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003ESimpleKSPOrbitalMechanics 0.002 (\u003Ca href=\u0022http://pastebin.com/8zcahtTB\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/8zcahtTB\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003ESimpleKSPOrbitalOperations 0.001 (\u003Ca href=\u0022http://pastebin.com/s5KQg8fu\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/s5KQg8fu\u003C/a\u003E)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-04T03:47:15Z\u0022 title=\u002209/04/2012 03:47  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 4, 2012\u003C/time\u003E by Nadrek\u003C/strong\u003E\n\u003Cbr\u003EUpdated Orbital Mechanics pastebins to 0.003\n\u003C/span\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-17T02:37:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022olex\u0022 data-cite=\u0022olex\u0022\u003E\u003Cdiv\u003EYou can\u0027t use C functions is the Lua console directly. If all you want to do is to pause the script for a given time, use the provided \u003Cstrong\u003Ewait(ms)\u003C/strong\u003E function.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you.\u003C/p\u003E\u003Cp\u003EFor C functions, what I meant to say was can we include (require \u0022xxx\u0022) Lua libraries that are wrappers to C libraries - there appear to be very few pure lua libraries to do real math available.\u003C/p\u003E\u003Cp\u003EWhen I tried the hand-typed experiment, in the Autom8 console, of:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Edo print(vessel.time) wait(2) print(vessel.time) end\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe entire game froze for 2 seconds, and then I had two identical timestamps in the display.\u003C/p\u003E\n"},{"CreatedByName":"olex","CreatedById":32731,"CreatedDateTime":"2012-08-17T03:31:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nadrek\u0022 data-cite=\u0022Nadrek\u0022\u003E\u003Cdiv\u003EWhen I tried the hand-typed experiment, in the Autom8 console, of:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Edo print(vessel.time) wait(2) print(vessel.time) end\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe entire game froze for 2 seconds, and then I had two identical timestamps in the display.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETo avoid the game freezing, take a look at the coroutine implementation in the scripts linked in the first post. Currently, the autom8 lua console runs on the same thread as the main game. Using the coroutine workaround, your Lua code that uses the wait() function can be offloaded into a separate thread, which allows the game to continue running as the script waits - this is used extensively in my Mun return and shuttle landing scripts.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-17T10:45:20Z","Content":"\n\u003Cp\u003EI\u0027ve also been trying to work out how to do delta v calcs given the limited info available.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-17T10:51:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022domox\u0022 data-cite=\u0022domox\u0022\u003E\u003Cdiv\u003EWould peeps be interested in starting a mechjeb autom8 script repo on github? It\u0027d be easy-peasy and provide a great way to track changes/file issues...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve no experience with github. What do others think?\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-17T13:35:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022togfox\u0022 data-cite=\u0022togfox\u0022\u003E\u003Cdiv\u003EI\u0027ve also been trying to work out how to do delta v calcs given the limited info available.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, if you can help with an equation that works for any mix of circular, elliptical, parabolic and hyperbolic orbits, perhaps we can work something out together. Equation or equations which don\u0027t assume at least one orbit is circular are what I haven\u0027t found (or noticed I\u0027d found) yet.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-17T14:06:36Z","Content":"\n\u003Cp\u003EThe dV formula\u0027s I know are all about transfering mass to energy. This means moving fuel to thrust. MJ can\u0027t tell how much fuel you have or how much you\u0027re burning. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Bestia","CreatedById":15322,"CreatedDateTime":"2012-08-17T14:35:55Z","Content":"\n\u003Cp\u003EHey What am I doing wrong?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u0026gt; dofile(\u0022KminO\u0022)\u003Cbr\u003EUsage: KMinO(alt, malt)\u003Cbr\u003Ealt is Kerbin Orbit Altitude in meters\u003Cbr\u003Emalt is Minmus Orbit Altitude in meters\u003Cbr\u003EWarning: Insure that you do not transect Mun.\u003Cbr\u003E\u0026gt; KminO(99978,75000)\u003Cbr\u003EException: Invoke function call on non function value.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-17T14:51:27Z","Content":"\n\u003Cp\u003EWould be handy to see the source code. Cant see the problem with what you have there.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-17T14:56:59Z\u0022 title=\u002208/17/2012 02:56  PM\u0022 data-short=\u002211 yr\u0022\u003EAugust 17, 2012\u003C/time\u003E by togfox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Bestia","CreatedById":15322,"CreatedDateTime":"2012-08-17T14:56:49Z","Content":"\n\u003Ca href=\u0022http://pastebin.com/Qfnp6YVw\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/Qfnp6YVw\u003C/a\u003E\n"},{"CreatedByName":"olex","CreatedById":32731,"CreatedDateTime":"2012-08-17T15:36:36Z","Content":"\n\u003Cp\u003ECapitalization. It\u0027s \u0022KMinO\u0022, you\u0027re typing \u0022KminO\u0022.\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-17T23:57:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022togfox\u0022 data-cite=\u0022togfox\u0022\u003E\u003Cdiv\u003EThe dV formula\u0027s I know are all about transfering mass to energy. This means moving fuel to thrust. MJ can\u0027t tell how much fuel you have or how much you\u0027re burning. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat I actually was talking about was \u0022dV required\u0022 equations; i.e. to move from a 125km Pe, 500km Ap orbit to a 125km Pe, 750km Ap orbit, what dV will be required?\u003C/p\u003E\u003Cp\u003Ei.e. \u003Ca href=\u0022http://www.enotes.com/topic/Bi-elliptic_transfer\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.enotes.com/topic/Bi-elliptic_transfer\u003C/a\u003E has some equations based on orbit changes irrespective of the vessel doing so, but again, a brief glance shows \u0022initial circular orbit with radius r0\u0022, which indicates a simplification has been done that I don\u0027t want (circular orbits only). Likewise, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://en.wikipedia.org/wiki/Hohmann_transfer_orbit\u003C/a\u003E uses circular orbit based equations, i.e. \u0022r1 and r2 are, respectively, the radii of the departure and arrival circular orbits\u0022.\u003C/p\u003E\u003Cp\u003ENote that this is going to end up as the same math Mechjeb uses internally to tell you how much dV will be required for a given manuever.\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-18T00:28:27Z","Content":"\n\u003Cp\u003ETo the author:\u003C/p\u003E\u003Cp\u003EThank you again for creating this - it\u0027s very much something I like working with.\u003C/p\u003E\u003Cp\u003EI do have a few requests for future versions:\u003C/p\u003E\u003Cp\u003E1) mechjeb.warpToEvent with \u0022instant\u0022 as an option, so only the optional lead time in seconds is used (i.e. warp (amount of time))\u003C/p\u003E\u003Cp\u003E2) mechjeb.warpToEvent Ascending Node and Descending Node, for inclination change manuevers\u003C/p\u003E\u003Cp\u003E3) Ideally, some way of determining where other objects are - the Mun, other craft or debris, and their orbital parameters so we can work out the rendevous/intercept/orbit phase math ourselves.\u003C/p\u003E\u003Cp\u003E4) mechjeb.launchToApogee - do the launch to inclination at an apogee, but do not circularize.\u003C/p\u003E\u003Cp\u003E5) Better instructions on how to use mechjeb.attitudeTo - is it instant or sustained, and if sustained, how do we turn it off?\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-18T01:47:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nadrek\u0022 data-cite=\u0022Nadrek\u0022\u003E\u003Cdiv\u003EWhat I actually was talking about was \u0022dV required\u0022 equations; i.e. to move from a 125km Pe, 500km Ap orbit to a 125km Pe, 750km Ap orbit, what dV will be required?\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003ENote that this is going to end up as the same math Mechjeb uses internally to tell you how much dV will be required for a given manuever.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI see. I was hoping to find out how much dV a craft has at a given point in time. This would help a pilot know what maneuvors are an option and what are not. In Kerbin orbit and want to do a Mun/Minmus slingshot? Check your current dV and see if its even possible. That sort of thing.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-18T01:49:34Z","Content":"\n\u003Cp\u003E\u0026gt; 5) Better instructions on how to use mechjeb.attitudeTo - is it instant or sustained, and if sustained, how do we turn it off? \u003C/p\u003E\u003Cp\u003EIt\u0027s just a direction facing. You still need to adjust throttle for the required time period. That time period depends on what you\u0027re trying to achieve. I\u0027ve used attitudeTo in my most recent script posted above. It\u0027s not a maneuver - its a facing/heading.\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-18T01:57:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022togfox\u0022 data-cite=\u0022togfox\u0022\u003E\u003Cdiv\u003EI see. I was hoping to find out how much dV a craft has at a given point in time. This would help a pilot know what maneuvors are an option and what are not. In Kerbin orbit and want to do a Mun/Minmus slingshot? Check your current dV and see if its even possible. That sort of thing.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe\u0027re working on opposite ends of the problem, then. I want to calculate dV required for arbitrary operations, and you want to calculate dV remaining.\u003C/p\u003E\u003Cp\u003EI\u0027d advise you to create the pure math functions first, in the most general way possible. That way, you have options:\u003C/p\u003E\u003Cp\u003E1) You can have the user enter the amount of fuel left (in kg, available by using the GUI to right-click fuel tanks one at a time and then using another general function to convert X type of fuel from liters to kg) as a temporary bandaid.\u003C/p\u003E\u003Cp\u003E2) Once fuel is available, you can easily create a shell function like the ones in my SimpleKSPOrbitalMechanics that automatically determines those values in the units you need, and passes them in to the mathematical function you already wrote.\u003C/p\u003E\u003Cp\u003E3) The real future fun will be figuring out fuel per stage and mass per stage, for accurate calculations on multi-stage vessels.\u003C/p\u003E\n"},{"CreatedByName":"Nachtwind","CreatedById":41015,"CreatedDateTime":"2012-08-18T10:10:27Z","Content":"\n\u003Cp\u003EHi, \u003C/p\u003E\u003Cp\u003EFrist of all thanks for that excellent addon. At first i thought that automat8 and all these autopilots are mere \u0022cheats\u0022 but after some testing i am convinced it should be a core part of the game as it is not simply a \u0022push a button and land on the mun\u0022 software. Excellently balanced Addon.\u003C/p\u003E\u003Cp\u003EWhat i wonder though is: how do i change the orbiting direction. As of now i can only orbit in a 90\u00C3\u201A\u00C2\u00B0 angle and follow the equator. I tried setting heading/inclination in the take off autopilot and in an automate script, but i always keep circling above the equator.. do i miss something or is there maybe some bug? \u003C/p\u003E\u003Cp\u003EAs script i simply use the line \u0022 mechjeb.launchTo(100000, 78) \u0022 but this seems not to work... any ideas?\u003C/p\u003E\n"},{"CreatedByName":"mager42","CreatedById":10610,"CreatedDateTime":"2012-08-18T19:28:46Z","Content":"\n\u003Cp\u003EThere is another script, this one to fly VTOL mun land/start Spaceplane to KSC /Horizontal Land tnere/.\u003C/p\u003E\u003Cp\u003Eit is better to start it when is KSC on oposite side of kerbin from Muun - but not neceseary should be abel land in any start time.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/gSDNG3Bm\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/gSDNG3Bm\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EParameters is Pe for areobraking /set to value that get you to low Kerbin orbit - depend on drag and gliding capabity/\u003C/p\u003E\u003Cp\u003ELanding offset /set distance in km before KSC for deorbit Landing Autopilot depend on gliding capapility of space plane/\u003C/p\u003E\u003Cp\u003EThere is posibility to warp manualy on Muun parking orbit but must manualy stop before Equator /at least 1 degree/ and Muun escape point /-120 N/.\u003C/p\u003E\n"},{"CreatedByName":"SyrusDrake","CreatedById":24441,"CreatedDateTime":"2012-08-18T23:59:03Z","Content":"\n\u003Cp\u003EOkay, first of all, let me give all of you a huge applause for what you\u0027ve created. Especially the Shuttle-landing script is extremely useful...or I suppose it could be and that\u0027s why I\u0027m writing this post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003ETo test the script (and spaceplanes in general) I\u0027ve built a really small, simple shuttle. It\u0027s a good glider and it can actually fly, I tested that out.\u003C/p\u003E\u003Cp\u003EI then shot it into orbit and tried to return it using the script. I tried it three times but every single time I got this: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003ECoroutine exception: InvalidOperationException - out of sync\u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.Dictionary\u00602\u002BEnumerator[sharpLua.LuaTypes.LuaValue,SharpLua.LuaTypes.LuaValue].VerifyState () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.Dictionary\u00602\u002BEnumerator[sharpLua.LuaTypes.LuaValue,SharpLua.LuaTypes.LuaValue].MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.Dictionary\u00602\u002BKeyCollection\u002BEnumerator[sharpLua.LuaTypes.LuaValue,SharpLua.LuaTypes.LuaValue].MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaTable.GetKey (System.String key) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaTable.GetValue (System.String name) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaTable.GetValueFromMetaTable (System.String name) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaTable.GetValue (System.String name) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaTable.GetValueFromMetaTable (System.String name) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaTable.GetValue (System.String name) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.VarName.Evaluate (SharpLua.LuaTypes.LuaTable enviroment) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.PrimaryExpr.Evaluate (SharpLua.LuaTypes.LuaTable enviroment) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Operation.InfixBinaryOperation (SharpLua.AST.Term LeftOperand, System.String Operator, SharpLua.AST.Term RightOperand, SharpLua.LuaTypes.LuaTable enviroment) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Operation.Evaluate (SharpLua.LuaTypes.LuaTable enviroment) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Chunk.\u0026lt;Execute\u0026gt;m__6 (SharpLua.AST.Expr expr) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.List\u00601[sharpLua.AST.Expr].ConvertAll[LuaValue] (System.Converter\u00602 converter) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Chunk.Execute (System.Boolean\u0026amp; isBreak) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Chunk.Execute () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.FunctionBody\u002B\u0026lt;Evaluate\u0026gt;c__AnonStorey8.\u0026lt;\u0026gt;m__A (SharpLua.LuaTypes.LuaValue[] args) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaFunction.Invoke (SharpLua.LuaTypes.LuaValue[] args) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.Library.BaseLib.Wait (SharpLua.LuaTypes.LuaValue[] args) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.FunctionCall.Evaluate (SharpLua.LuaTypes.LuaValue baseValue, SharpLua.LuaTypes.LuaTable enviroment) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.PrimaryExpr.Evaluate (SharpLua.LuaTypes.LuaTable enviroment) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.ExprStmt.Execute (SharpLua.LuaTypes.LuaTable enviroment, System.Boolean\u0026amp; isBreak) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Chunk.Execute (System.Boolean\u0026amp; isBreak) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.Chunk.Execute () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.AST.FunctionBody\u002B\u0026lt;Evaluate\u0026gt;c__AnonStorey8.\u0026lt;\u0026gt;m__A (SharpLua.LuaTypes.LuaValue[] args) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaFunction.Invoke (SharpLua.LuaTypes.LuaValue[] args) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SharpLua.LuaTypes.LuaCoroutine\u002B\u0026lt;Resume\u0026gt;c__AnonStoreyD.\u0026lt;\u0026gt;m__2F () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EOnce it happened shortly after the reto burn began, two other times it happened at about 50\u0027000 m during re-entry. The ILS-Autoland function could still land the plane after I turned it on manually, but it started about 60 km away from KSC so it took me quite a while to get back to ground.\u003C/p\u003E\u003Cp\u003EThis error doesn\u0027t only happen with this script, I also encoutered it with the Kerbin return script, but that one worked about 80% of times while the lander script doesn\u0027t seem to work for me at all.\u003C/p\u003E\u003Cp\u003EIs there something wrong with the script(s) or am I doing something wrong?\u003C/p\u003E\n"},{"CreatedByName":"olex","CreatedById":32731,"CreatedDateTime":"2012-08-19T00:03:55Z","Content":"\n\u003Cp\u003EThis error happens a lot, it is known, and nothing is found yet we can do about it. \u003C/p\u003E\u003Cp\u003EIt appears to stem from the fact that the script thread is running in parallel to the game thread, and during the waiting loops, as variables from the game thread are accessed to check if the wait needs to be ended, a sync exception happens (meaning that the variable was written to at the same time it was read or something similar). Since the multithread solution is a workaround already (without it the wait() function would freeze the whole game outright), there\u0027s nothing we know of that could be done about it.\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-19T00:21:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mager42\u0022 data-cite=\u0022mager42\u0022\u003E\u003Cdiv\u003EThere is another script, this one to fly VTOL mun land/start Spaceplane to KSC /Horizontal Land tnere/.\u003Cp\u003Eit is better to start it when is KSC on oposite side of kerbin from Muun - but not neceseary should be abel land in any start time.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/gSDNG3Bm\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/gSDNG3Bm\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EParameters is Pe for areobraking /set to value that get you to low Kerbin orbit - depend on drag and gliding capabity/\u003C/p\u003E\u003Cp\u003ELanding offset /set distance in km before KSC for deorbit Landing Autopilot depend on gliding capapility of space plane/\u003C/p\u003E\u003Cp\u003EThere is posibility to warp manualy on Muun parking orbit but must manualy stop before Equator /at least 1 degree/ and Muun escape point /-120 N/.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI looked at your script, and I noticed that you know commands that I do not - mechjeb.thrustActivate(10), mechjeb.controlRelease(), and mechjeb.stage() are not on the Autom8 wiki page I was using as a reference, much less ils = mechjeb.getModule(\u0022ils\u0022) ils.glideslope = slope - how did you find them - read the source code for Mechjeb, or some other way?\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2012-08-19T00:23:22Z","Content":"\n\u003Cp\u003EIs there any kind of exception handling that can be used to find these exceptions and retry a random but short amount of time later?\u003C/p\u003E\n"},{"CreatedByName":"Jontu","CreatedById":22078,"CreatedDateTime":"2012-08-19T00:26:43Z","Content":"\n\u003Cp\u003EThis script started out as what I thought would be a \u0026lt;i\u0026gt;trivial\u0026lt;/i\u0026gt; modification of olex\u0027s Mun to Kerbin Return script. Well there is no such thing as a \u0026lt;i\u0026gt;trivial\u0026lt;/i\u0026gt; mod to someone else code! I did have a \u0022yeah\u0022 moment when I was finally coasting to Mun escape with fuel, but that didn\u0027t last. I found out what olex was refering to as fine tuning when I ended up back in Mun orbit. I know how to return from Mun, but I needed to start fresh. So HomeJeb started.\u003C/p\u003E\u003Cp\u003EThe script is not optimal. Longitude is not yet available (neither vessel.longitude nor vessel.Longitude worked) and I don\u0027t know how to kill time warp. This is where you come in. You need to manually \u0022abort\u0022 the time warp at the deorbit burn point. These are are -45 degrees longitude for Mun and \u002B20 degrees longitude for Minmus. Neither value is critical or for that matter even optimal, but they work well. Longitude is at the bottom of the \u0022surface info\u0022 screen.\u003C/p\u003E\u003Cp\u003ENotes:\u003C/p\u003E\u003Cp\u003EThe script assumes your ship has sufficient fuel and thrust to get back to Kerbin. If you run out of fuel it just stops.\u003C/p\u003E\u003Cp\u003EThere is one scenario I\u0027m aware of that will cause you to crash. If you run out of fuel just before landing and without enough altitude to deploy your chute you will crash. Easy fix, if it looks like this may happen stage to your chute.\u003C/p\u003E\u003Cp\u003E\u0026lt;font color=\u0022red\u0022\u0026gt;Warning:\u0026lt;/font\u0026gt; The script sometimes returns a coroutine error - out of sync. I think I understand what this means but I have no clue how to fix it. Fortunately it\u0027s intermittent, so quick save before starting script.\u003C/p\u003E\u003Cp\u003E\u0026lt;a href=\u0022\u003Ca href=\u0022http://pastebin.com/Bj0eC7P2\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/Bj0eC7P2\u003C/a\u003E\u0022\u0026gt;HomeJeb\u0026lt;/a\u0026gt; on pastebin. I\u0027m also attaching a zip file.\u003C/p\u003E\u003Cp\u003E\u0026lt;a href=\u0022\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/E3wHXE7k1To?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u0022\u0026gt;Video\u0026lt;/a\u0026gt;\u003Cp\u003EUsage:\u003C/p\u003E\u003Cp\u003EEnter dofile(\u0022homejeb\u0022)\u003C/p\u003E\u003Cp\u003EEnter Home()\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-19T14:26:02Z\u0022 title=\u002208/19/2012 02:26  PM\u0022 data-short=\u002211 yr\u0022\u003EAugust 19, 2012\u003C/time\u003E by Jontu\u003C/strong\u003E\n\u003Cbr\u003EChange Minmus deorbit burn point\n\u003C/span\u003E\n"}]}