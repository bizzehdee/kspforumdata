{"TopicId":120285,"ForumId":20,"TopicTitle":"kOS Ship Orientation","CreatedByName":"Mat2ch","CreatedById":139755,"CreatedDateTime":"2015-09-06T17:17:36Z","PageNum":1,"Articles":[{"CreatedByName":"Mat2ch","CreatedById":139755,"CreatedDateTime":"2015-09-06T17:17:36Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003EI\u0027m currently trying to build something like a quadrocopter with kOS. Currently it looks like this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/jhFRsUw\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/jhFRsUwh.jpg\u0022 alt=\u0022jhFRsUwh.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEngines are already controlled to keep vertical speed to an adjustable value. Now I want to make it hover without haveing to use SAS, just by individually controlling the engines. But I ran into a problem with the orientation here. I tried several of them SHIP:UP, SHIP:FACING, etc. But I can\u0027t find a value which gives me the deviation in a way that I can add it to my controller. I think SHIP:FACING gave me the proper X value, but not the proper value for Z. So I\u0027m stuck here. Does anyone have an example for me?\u003C/p\u003E\u003Cp\u003EThank you!\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-09-07T21:22:21Z","Content":"\n\u003Cp\u003EIt\u0027s a little unclear what you\u0027re asking for. Do you want to know your velocity vector relative to your ship\u0027s current orientation instead of relative to the world?\u003C/p\u003E\u003Cp\u003EIf so, then you can get the 3 components with just dot products.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset vel to ship:velocity:surface.\u003Cbr\u003Eset vel_component_in_my_top_direction to VDOT(vel, ship:facing:topvector).\u003Cbr\u003Eset vel_component_in_my_fore_direction to VDOT(vel, ship:facing:forevector).\u003Cbr\u003Eset vel_component_in_my_starboard_direction to VDOT(vel, ship:facing:starvector).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ERemember that with VAB-built ships, your \u0022fore\u0022 direction is actually up on the launchpad, and the \u0022top\u0022 direction is actually out the roof of the cabin, and therefore horizontal when aimed nose-up on the launchpad.\u003C/p\u003E\n"},{"CreatedByName":"Mat2ch","CreatedById":139755,"CreatedDateTime":"2015-09-08T18:45:19Z","Content":"\n\u003Cp\u003EHello Steve,\u003C/p\u003E\u003Cp\u003Ethank you for your answer.\u003C/p\u003E\u003Cp\u003ERight now I just want to know my angle in the air. E.g. I want to know if it points straight up or if there is some roll or pitch in the vessel.\u003C/p\u003E\u003Cp\u003EThe next step after that would be controlling roll and pitch to get the relative velocity to 0. But now I\u0027m not sure if I need the first step. I could just cancel out all horizontal velocity and would get the same result, I guess.\u003C/p\u003E\n"},{"CreatedByName":"Mat2ch","CreatedById":139755,"CreatedDateTime":"2015-09-09T18:32:36Z","Content":"\n\u003Cp\u003EOk, this approach is not what I need. Canceling out the horizontal velocity only works, if I can limit the angle of attack. Otherwise my controller will try very violently to do this and if it\u0027s by crashing into the ground...\u003C/p\u003E\u003Cp\u003EI think Angle of Attack is the right keyword. That\u0027s what I\u0027m looking for and haven\u0027t found yet in the documentation.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-09-11T17:28:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mat2ch\u0022 data-cite=\u0022Mat2ch\u0022\u003E\u003Cdiv\u003EOk, this approach is not what I need. Canceling out the horizontal velocity only works, if I can limit the angle of attack. Otherwise my controller will try very violently to do this and if it\u0027s by crashing into the ground...\u003Cp\u003EI think Angle of Attack is the right keyword. That\u0027s what I\u0027m looking for and haven\u0027t found yet in the documentation.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECompare your forward vector to the upward vector.\u003C/p\u003E\u003Cp\u003Eship:up:vector points right at the center of the sky (the dot in the middle of the blue part of the navball).\u003C/p\u003E\u003Cp\u003Eship:facing:forevector points whichever way the nose of your craft is aimed.\u003C/p\u003E\u003Cp\u003EGetting the VANG between them tells you how \u0022tilted\u0022 your craft is. I THINK that\u0027s what you\u0027re asking for - you want to limit your tilt and not tilt any further if that angle is too large, I think is what you\u0027re saying.\u003C/p\u003E\n"},{"CreatedByName":"Mat2ch","CreatedById":139755,"CreatedDateTime":"2015-09-12T15:41:49Z","Content":"\n\u003Cp\u003EHello Steven,\u003C/p\u003E\u003Cp\u003Ethank you for your answer! And sorry I called you Steve earlier, I missread it and I hope you\u0027re not upset...\u003C/p\u003E\u003Cp\u003EYou are right that is, what I was looking for. Now some more vector magic and I have everything I need. Oh, some sinus and cosinus magic as well.\u003C/p\u003E\n"}]}