{"TopicId":136829,"ForumId":29,"TopicTitle":"How do I close the right click \u0026quot;window\u0026quot;, stop cam mode switching?","CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-13T04:02:39Z","PageNum":1,"Articles":[{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-13T04:02:39Z","Content":"\n\u003Cp\u003E\nWorking on a plugin that moves you viewpoint to a docking port. \u00A0It activates when you click a custom button in the right click window (button is labeled \u0022view from here\u0022).\n\u003C/p\u003E\n\u003Cp\u003E\nOnce in my camera virw, that right click box remains unless you right click somewhere outside of it to close it. \u00A0Is there a way I can force it closed?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, when in my camera view, hitting \u0022v\u0022 does not change the view on he screen, but you do get those \u0022camera mode\u0022 messages on the screen and I\u0027d like to supreme them, or lock out the \u0022v\u0022 key. \u00A0Any thoughts on how?\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-04-13T05:35:29Z","Content":"\n\u003Cp\u003E\nForce it closed or remove/change\u00A0the event button sounds like a better solution?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\ndepends on how you are changing the cameras. Which camera are you changing and do you update or use the CameraManager instance? Do you really need to lock it out or ensure you don\u0027t break the std camera modes and options (which at the moment it sounds like you are breaking it)\n\u003C/p\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-13T05:50:24Z","Content":"\n\u003Cp\u003E\nNothing gets broken afaik, the camera transform gets set to the docking port, the restored when you exit the view. The camera mode in question is flight.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUsing an update function I keep enforcing my intended view and it\u0027s settings.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSuppressing the Auto, Chase, Locked etc. Messages isn\u0027t super important, but I would like that right click window or dialog box might be a better term, to close when my button is clicked. \u00A0Not just my button go, but the whole box.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-04-13T06:03:45Z","Content":"\n\u003Cp\u003E\nRemoving messages can be done. See this \u003Ca href=\u0022https://gist.github.com/JPLRepo/08b0d28b7dea4d8ac5cd19256a7bbe5c\u0022 rel=\u0022external nofollow\u0022\u003Ecode snippit\u003C/a\u003E. but even better for you would be:-\u003Cbr\u003E\u003Cbr\u003E\nYou can lock the camera buttons out by adding and removing a control lock.\n\u003C/p\u003E\n\u003Cpre style=\u0022font-family:Consolas;color:#000000;background:#FFFFFF;\u0022\u003E\n\u003Cspan style=\u0022color:#2b91af;\u0022\u003EInputLockManager\u003C/span\u003E.SetControlLock(\u003Cspan style=\u0022color:#2b91af;\u0022\u003EControlTypes\u003C/span\u003E.CAMERAMODES,\u00A0\u003Cspan style=\u0022color:#a31515;\u0022\u003E\u0022YourModorSomething\u0022\u003C/span\u003E);\n\n\u003Cspan style=\u0022color:#2b91af;\u0022\u003EInputLockManager\u003C/span\u003E.RemoveControlLock(\u003Cspan style=\u0022color:#a31515;\u0022\u003E\u0022YourModorSomething\u0022\u003C/span\u003E);\n\nYou can see the control Locks in the alt-F12 debug menu.\n\nAs far as removing the PArt right click menu, depends on whether you are doing it in 1.0.5 or 1.1 as it has changed.\nEDIT: let me know what version you are trying to do this for?\n\n\u003C/pre\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-13T06:22:46Z\u0022 title=\u002204/13/2016 06:22  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 13, 2016\u003C/time\u003E by JPLRepo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-13T14:29:56Z","Content":"\n\u003Cp\u003E\nThat second one sounds like what I\u0027m after (inputlock) thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-13T16:04:25Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022\u003E@JPLRepo\u003C/a\u003E\u00A0I\u0027d say 1.1, since it\u0027s just around the corner (I hope)\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-04-13T18:59:16Z","Content":"\n\u003Cpre style=\u0022font-family:Consolas;color:#000000;background:#FFFFFF;\u0022\u003E\n\u003Cspan style=\u0022color:#2b91af;\u0022\u003EUIPartActionController\u003C/span\u003E.Instance.Deselect(\u003Cspan style=\u0022color:#0000FF;\u0022\u003Etrue\u003C/span\u003E);\n\u003C/pre\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-14T05:34:26Z","Content":"\n\u003Cp\u003E\nPerfect!\n\u003C/p\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-15T01:12:25Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022\u003E@JPLRepo\u003C/a\u003E You\u0027ve been very helpful so I hope I can trouble you for one more thing. \u00A0Neither CAMERAMODES nor CAMERA CONTROLS kills the actual camera switching key (default c). \u00A0To be seamless I really want that key to exit my cam mode and set things back to normal, but it also flips to the iva view. \u00A0I tried various commands in my code to switch the cam mode back, but it seems to be occasionally glitchy....\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027m thinking if there\u0027s a way to lockout the games response to that key, it might solve the odd occasion were the view gets locked in external looking straight down...\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-04-15T01:31:29Z","Content":"\n\u003Cp\u003E\nI don\u0027t understand.\n\u003C/p\u003E\n\u003Cpre style=\u0022font-family:Consolas;color:#000000;background:#FFFFFF;\u0022\u003E\n\u003Cspan style=\u0022color:#2b91af;\u0022\u003EInputLockManager\u003C/span\u003E.SetControlLock(\u003Cspan style=\u0022color:#2b91af;\u0022\u003EControlTypes\u003C/span\u003E.CAMERAMODES,\u00A0\u003Cspan style=\u0022color:#a31515;\u0022\u003E\u0022Modname\u0022\u003C/span\u003E);\nDefinitely locks the \u0027C\u0027 camera switch key for me.\nAre you saying you still want it to function but only for your mod?\nIf you put the control lock on as above it should block the stock game.\nIn your mod code you can check for:\n\u003Cspan style=\u0022color:#0000ff;font-weight:bold;\u0022\u003Eif\u003C/span\u003E GameSettings.CAMERA_MODE.\u003Cspan style=\u0022color:#191970;font-weight:bold;\u0022\u003EGetKeyDown\u003C/span\u003E(\u003Cspan style=\u0022color:#008b8b;font-weight:bold;\u0022\u003Etrue\u003C/span\u003E)\nTo still intercept the \u0027C\u0027 key or whatever the user has set the camera mode key to in their settings. \nthe true bool tells it to ignore the control lock I believe. \n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-15T01:39:11Z\u0022 title=\u002204/15/2016 01:39  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 15, 2016\u003C/time\u003E by JPLRepo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-15T02:18:55Z","Content":"\n\u003Cp\u003E\nSo, what I did do was coded it to store and unbind the CAMERA_MODE keybind, then do my thing. \u00A0Then when I hit the camera key I exit my cam and return to normal but it\u0027s the IVA view. \u00A0So I have\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003ECameraManager.Instance.NextCameraMode ();\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nWhich flips it back to External view.\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t be sure, but I think it was still activating a cam switch and fighting with my code and occasionally getting locked up so you couldn\u0027t move the cam.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-04-15T02:28:00Z","Content":"\n\u003Cp\u003E\ncode would help to see.. but if you do as I suggested above it should work fine. (do the input lock) and then do your own checking for the input keys with the true bool on GetKeyDown.\n\u003C/p\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-15T03:10:14Z","Content":"\n\u003Cp\u003E\nI\u0027m going to investigate further...\n\u003C/p\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2016-04-15T04:55:58Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022\u003E@JPLRepo\u003C/a\u003E\u00A0- Ok, wow... I would have bet precious body parts that I had tested it and found that the C key still swapped cameras between IVA and External. \u00A0But I just did a die hard test by commenting out my \u0022unlock\u0022 line and sure enough, I can pan, zoom, etc but I can NOT change type (Orbital, Locked, etc.) nor can I switch between External and IVA... so what I think I need to do now is set up another conditional statement that looks for GetKeyUp before unlocking the controls. \u00A0Right now I\u0027m unlocking them as soon as I see a key down, and I think the game is then catching the key being pressed when the unlock happens.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll test that out Sunday. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for the help!\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-04-15T05:41:56Z","Content":"\n\u003Cp\u003E\nNP. Glad you sorted it out.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}