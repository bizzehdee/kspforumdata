{"TopicId":93396,"ForumId":29,"TopicTitle":"EVA: identify the ship you left - is KSPAddon different?","CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-12-17T19:06:41Z","PageNum":1,"Articles":[{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-12-17T19:06:41Z","Content":"\n\u003Cp\u003EFor some reason (i.E. the star trek tricorder my kerbals get, I need to know for certain, wich vessel the kerbal came from.\u003C/p\u003E\u003Cp\u003EMy Kerbals leave the vessel on two ways, \u0022normal\u0022 EVA and they get beamed out by the transporter..\u003C/p\u003E\u003Cp\u003EIn both situations, I need to identify the \u0022MotherShip\u0022.\u003C/p\u003E\u003Cp\u003EIt seems onVesselChange does not get fired in all instances.\u003C/p\u003E\u003Cp\u003EDid I miss any obviouse detail or function?\u003C/p\u003E\u003Cp\u003EI\u0027ve tested on Vessel change in two classes, a KSPaddon (see below) and the tricorder PartModule.\u003C/p\u003E\u003Cp\u003EIt wasn\u0027t fired in both.. ??\u003C/p\u003E\u003Cp\u003EAdditionally, my ineptitude let\u0027s me run in an other wall aswell by testing some workarounds..\u003C/p\u003E\u003Cp\u003Emaybe someone can help me there:\u003C/p\u003E\u003Cp\u003EI got an allways-running background singleton setup with:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E    [KSPAddon(KSPAddon.Startup.Flight, true)]\u003Cbr\u003E    public sealed class LCARS_Util_FlightControll : MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        private static LCARS_Util_FlightControll _instance;\u003Cbr\u003E        public static LCARS_Util_FlightControll Instance\u003Cbr\u003E        {\u003Cbr\u003E            get\u003Cbr\u003E            {\u003Cbr\u003E                if (_instance == null)\u003Cbr\u003E                {\u003Cbr\u003E                    _instance = new LCARS_Util_FlightControll();\u003Cbr\u003E                }\u003Cbr\u003E\u003Cbr\u003E                return _instance;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E// [snip]\u003Cbr\u003E        public  Vessel lastVessel;\u003Cbr\u003E        public Vessel getlastVessel()\u003Cbr\u003E        {\u003Cbr\u003E            UnityEngine.Debug.Log(\u0022LCARS_Util_FlightControll: lastVessel : this.lastVessel.name=\u0022 \u002B this.lastVessel.name);\u003Cbr\u003E            return this.lastVessel;\u003Cbr\u003E        }\u003Cbr\u003E// [snip]\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Enow when the tricorder runs:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                    MotherShip = LCARS_Util_FlightControll.Instance.getlastVessel();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMothership should hold lastVessel but the function throws an exception (NRE) - is KSPAddon not like other classes? I\u0027ve done that singleton thing for other classes as well, there the same works, but none is a KSPAddon.\u003C/p\u003E\u003Cp\u003EFYI: lastVessel is assigned correctly in the KSPAddon class according to the logs.. - but the tricorder get\u0027s a NULL value delivered..\u003C/p\u003E\u003Cp\u003EI am either inept or I\u0027m missing something obvious here or both - either way, I\u0027m puzzled..\u003C/p\u003E\u003Cp\u003EThank\u0027s for any hints..\u003C/p\u003E\n"},{"CreatedByName":"noisybit","CreatedById":62545,"CreatedDateTime":"2014-12-25T23:13:04Z","Content":"\n\u003Cp\u003EThis isn\u0027t a full answer because I\u0027m away from my dev computer right now but...\u003C/p\u003E\u003Cp\u003EHave you tried listening to the OnCrewEva(...) event? It passes in a \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Efrom\u003C/span\u003E and \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eto\u003C/span\u003E part. You can use that to do something like \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EfromPart.vessel.flightID\u003C/span\u003E and \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EtoPart.vessel.flightID\u003C/span\u003E (or missionID or however else you track the vessels).\u003C/p\u003E\u003Cp\u003EI need to solve this problem as well soon. I\u0027ll post an update here if I find a better method.\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-12-28T11:19:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022noisybit\u0022 data-cite=\u0022noisybit\u0022\u003E\u003Cdiv\u003EThis isn\u0027t a full answer because I\u0027m away from my dev computer right now but...\u003Cp\u003EHave you tried listening to the OnCrewEva(...) event? It passes in a \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Efrom\u003C/span\u003E and \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eto\u003C/span\u003E part. You can use that to do something like \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EfromPart.vessel.flightID\u003C/span\u003E and \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EtoPart.vessel.flightID\u003C/span\u003E (or missionID or however else you track the vessels).\u003C/p\u003E\u003Cp\u003EI need to solve this problem as well soon. I\u0027ll post an update here if I find a better method.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethank\u0027s, will try that.. :-)\u003C/p\u003E\u003Cp\u003EI\u0027m not sure it will help though, because my kerbals only partially go \u0022on EVA\u0022 - mainly I need it for when I \u0022beam\u0022 kerbals out, the star trek way.\u003C/p\u003E\u003Cp\u003EMy intermittent solution, is for now, to display a ship list in my \u0022Tricorder\u0022-addon where the user can select.\u003C/p\u003E\u003Cp\u003Ebut an automatic solution would be preferable.\u003C/p\u003E\n"}]}