{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":192,"Articles":[{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-14T22:37:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222921539\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484414467\u0022 data-ipsquote-userid=\u0022162839\u0022 data-ipsquote-username=\u0022EpicSpaceTroll139\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, EpicSpaceTroll139 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not an expert, but from my limited experience I would suggest changing the trigger from \u0022WHEN SHIP:WATER=144 THEN...\u0022 to \u0022WHEN SHIP:WATER\u0026lt;144 THEN...\u0022 (or \u0026gt;, whatever works best for you).\n\u003C/p\u003E\n\u003Cp\u003E\nOr is it throwing some kind of error message? In that case I probably don\u0027t know what to do.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the reply \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162839-epicspacetroll139/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022162839\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162839-epicspacetroll139/\u0022 rel=\u0022\u0022\u003E@EpicSpaceTroll139\u003C/a\u003E, much appreciated! However I believe if I set my trigger to WHEN SHIP:WATER\u0026lt;144 that will not operate as I want -\u0026gt; I need the Drills to shut down once they filled up my Water tanks, with your\u00A0proposed\u00A0suggestion they would be shutting down as soon as the program reaches that part of the code since SHIP:WATER will always be \u0026lt; 144.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"EpicSpaceTroll139","CreatedById":162839,"CreatedDateTime":"2017-01-14T22:42:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222921992\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484433427\u0022 data-ipsquote-userid=\u0022136426\u0022 data-ipsquote-username=\u0022hypervelocity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, hypervelocity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks for the reply \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162839-epicspacetroll139/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022162839\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162839-epicspacetroll139/\u0022 rel=\u0022\u0022\u003E@EpicSpaceTroll139\u003C/a\u003E, much appreciated! However I believe if I set my trigger to WHEN SHIP:WATER\u0026lt;144 that will not operate as I want -\u0026gt; I need the Drills to shut down once they filled up my Water tanks, with your\u00A0proposed\u00A0suggestion they would be shutting down as soon as the program reaches that part of the code since SHIP:WATER will always be \u0026lt; 144.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmmm... maybe set it to shut down at WHEN ROUND(SHIP:WATER,0) = 144? All I know is that sometimes things don\u0027t work when the script is expecting to get some exact value (apparently numbers often\u00A0end up actually being something like 143.9999991 or something oddball like that.\n\u003C/p\u003E\n"},{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-14T22:47:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222921994\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484433733\u0022 data-ipsquote-userid=\u0022162839\u0022 data-ipsquote-username=\u0022EpicSpaceTroll139\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, EpicSpaceTroll139 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHmmm... maybe set it to shut down at WHEN ROUND(SHIP:WATER,0) = 144? All I know is that sometimes things don\u0027t work when the script is expecting to get some exact value (apparently numbers often\u00A0end up actually being something like 143.9999991 or something oddball like that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks again, I tried that but did not work.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMy gut feeling tells me the Trigger is not being preserved and hence not working.\n\u003C/p\u003E\n\u003Cp\u003E\nTried RETURN = TRUE but had no effect either \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnyone else willing to lay a helping hand?\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-01-14T23:14:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222921514\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484413826\u0022 data-ipsquote-userid=\u0022136426\u0022 data-ipsquote-username=\u0022hypervelocity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, hypervelocity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe code I have written is the following:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nCLEARSCREEN. PRINT \u0022==== EXECUTING DRILLING SCRIPT - DRILLING PROGRAM ACTIVATED\u0022.\n\nWAIT UNTIL SHIP:ELECTRICCHARGE\u0026gt;100.\n {\n  TOGGLE AG2.                                    //Action Group that deploys the Drills\n  PRINT \u0022===== DRILLS ACTIVATED\u0022.\n  SET AG2 TO FALSE.\n }\n\nWAIT UNTIL SHIP:ELECTRICCHARGE\u0026lt;100.\n {\n  TOGGLE AG3.                                    //Action Group that shuts-down the Drills\n  PRINT \u0022===== DRILLS SHUT-DOWN\u0022.\n  SET AG3 TO FALSE.\n }\n\nWHEN SHIP:WATER=144 THEN {                       //Trigger I am having issues with and cannot make it work\n TOGGLE AG3.                                     //Trigger I am having issues with and cannot make it work\n PRINT\u0022===== WATER FULL, DRILLS SHUT-DOWN\u0022.      //Trigger I am having issues with and cannot make it work\n PRESERVE.}.                                     //Trigger I am having issues with and cannot make it work\nRUN DRILLING.                                    //VERY LAME solution for not being able to work the WHEN/THEN statements. \n                                                 //As I don\u0027t know how to make my code to keep checking if EC is \u0026lt; or \u0026gt; than 100, I need to\n                                                 //do this to get the code running again (would love to learn how to avoid this very disgraceful solution)\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n...and...\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222921539\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484414467\u0022 data-ipsquote-userid=\u0022162839\u0022 data-ipsquote-username=\u0022EpicSpaceTroll139\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, EpicSpaceTroll139 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not an expert, but from my limited experience I would suggest changing the trigger from \u0022WHEN SHIP:WATER=144 THEN...\u0022 to \u0022WHEN SHIP:WATER\u0026lt;144 THEN...\u0022 (or \u0026gt;, whatever works best for you).\n\u003C/p\u003E\n\u003Cp\u003E\nOr is it throwing some kind of error message? In that case I probably don\u0027t know what to do.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t think SHIP:WATER exists in stock \u002B kOS, but I\u0027m guessing it\u0027s a resource added by another mod that could be picked up automatically... otherwise I\u0027d expect that to throw an error and crash the script. Going via something like SHIP:RESOURCES is more complicated (you need to loop through the resource entries in the list until you find the one with the right name), but should allow access to any resource.\n\u003C/p\u003E\n\u003Cp\u003E\nIf it exists, SHIP:WATER is probably a floating point value, in which case, yes, it\u0027s highly unlikely to equal any value precisely, so a less than or greater than kind of check *is* preferable. As you\u0027re looking for \u0022full\u0022 tanks, you probably want something like \u0027greater than 143\u0027. If you use SHIP:RESOURCES, you can actually find out what the capacity of the specific resource is and so react once the resource amount is over 99% (say) of the full capacity.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, do you want to re-enable the drills if the level of water drops back below 144 units? If enabling and disabling via separate triggers, you want to check they don\u0027t conflict with each other or fire all the time. I would set a global variable that declares whether the drills are on or off and check that in the logic for each trigger. I\u0027d also combine the checks on electric charge with those on the water level (the bits inside braces are pseudocode):\n\u003C/p\u003E\n\u003Cp\u003E\nGLOBAL (drills are on/off) // pick a starting value and then set the drills to that condition.\n\u003C/p\u003E\n\u003Cp\u003E\n(set drills to on/off)\n\u003C/p\u003E\n\u003Cp\u003E\nWHEN ((water level is over 99%) OR (electric charge is below 10%)) AND (drills are on) { (turn drills off) (set that drills are off) PRESERVE. }\n\u003C/p\u003E\n\u003Cp\u003E\nWHEN (water level is below 99%) AND (electric charge is above 10%) AND (drills are off) { (turn drills on) (set that drills are on) PRESERVE. }\n\u003C/p\u003E\n\u003Cp\u003E\nAh, I see there were several respones while I was typing!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-14T23:17:50Z\u0022 title=\u002201/14/2017 11:17  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 14, 2017\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-14T23:24:59Z","Content":"\n\u003Cp\u003E\nThanks for the prompt reply \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114015-elwanderer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114015\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114015-elwanderer/\u0022 rel=\u0022\u0022\u003E@ElWanderer\u003C/a\u003E\u00A0!!!\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EIndeed, Water is added by Realism Overhaul and I checked it is a working resource, it is visible under SHIP:RESOURCES and I am able to PRINT its amount on any given moment.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nYour suggestion is really good and was my initial approach, that is trying to nest both conditions (EC \u0026amp; Water Level), but as I couldn\u0027t make any WHEN/THEN Triggers work I just moved on to the code I shared here.\n\u003C/p\u003E\n\u003Cp\u003E\nI have checked WHEN SHIP:WATER \u0026gt; 143 to avoid precision issues but still no cigar \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMy WHEN/THEN is not being PRESERVED for some reason \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-14T23:25:23Z\u0022 title=\u002201/14/2017 11:25  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 14, 2017\u003C/time\u003E by hypervelocity\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-14T23:48:16Z","Content":"\n\u003Cp\u003E\nOK, so I figured out that in my previous script, the code was stuck waiting for WAIT UNTIL SHIP:ELECTRICCHARGE \u0026lt; 100 and hence the WHEN SHIP:WATER \u0026lt; 143 was never executed.\n\u003C/p\u003E\n\u003Cp\u003E\nNevertheless, I just can\u0027t seem to figure out these WHEN/THEN statements.\n\u003C/p\u003E\n\u003Cp\u003E\nRe-wrote the code as follows and the program prints \u0022DRILLING PROGRAM ACTIVATED\u0022 and ends. Ship resources are EC \u0026gt; 100 \u0026amp; Water \u0026lt; 143 \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nCLEARSCREEN. PRINT \u0022==== DRILLING PROGRAM ACTIVATED\u0022.\n\nSET EC TO 0.\nSET WATER TO 0.\nSET READYTODRILL TO EC \u002B WATER.\n\nWHEN SHIP:ELECTRICCHARGE \u0026gt; 100 THEN {\n    SET EC TO 1.\n    PRESERVE. }\n\nWHEN SHIP:WATER \u0026lt; 143 THEN {\n    SET WATER TO 1.\n    PRESERVE. }\n\nWHEN READYTODRILL = 2 THEN {\n    PRINT \u0022===== DRILLS ACTIVATED\u0022.\n    TOGGLE AG2.\n    PRESERVE. }\n\nWHEN READYTODRILL \u0026lt;\u0026gt; 2 THEN {\n\n   PRINT \u0022===== DRILLS SHUT-DOWN\u0022.\n   TOGGLE AG3.\n   PRESERVE. }\n\n\n\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cb\u003EEDIT: After running the script, I tried PRINT EC, PRINT WATER \u0026amp; PRINT READYTODRILL and all read 0. Clearly the WHEN/THEN statements are \u003Cs\u003Enot being executed/just wrong\u003C/s\u003E\u003C/b\u003E\u003Cstrong\u003E somehow not working.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-15T00:20:53Z\u0022 title=\u002201/15/2017 12:20  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 15, 2017\u003C/time\u003E by hypervelocity\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"EpicSpaceTroll139","CreatedById":162839,"CreatedDateTime":"2017-01-14T23:59:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222922050\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484437696\u0022 data-ipsquote-userid=\u0022136426\u0022 data-ipsquote-username=\u0022hypervelocity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, hypervelocity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u0026lt;snip\u0026gt;\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUhh... do you mean to have \u0022WHEN READYTODRILL \u0026lt; 2...\u0022 on that last statement? It looks like you put \u0022\u0026lt;\u0026gt;\u0022 by accident... or does \u0022\u0026lt;\u0026gt;\u0022 have some function in K-OS that I\u0027m not aware of?\n\u003C/p\u003E\n"},{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-15T00:02:20Z","Content":"\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162839-epicspacetroll139/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022162839\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162839-epicspacetroll139/\u0022 rel=\u0022\u0022\u003E@EpicSpaceTroll139\u003C/a\u003E,\u00A0I believe \u0022\u0026lt;\u0026gt;\u0022 means \u0022not equal to\u0022.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-15T00:03:45Z\u0022 title=\u002201/15/2017 12:03  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 15, 2017\u003C/time\u003E by hypervelocity\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-01-15T00:14:58Z","Content":"\n\u003Cp\u003E\nWHEN/THEN commands do not work as you\u0027re possibly thinking. They don\u0027t stop code execution; instead they\u0027re stored as triggers to be run each tick. This means that the script will continue executing, but if there is no more code to run, the script will end. Try sticking a WAIT UNTIL FALSE. at the bottom of the script so it never ends.\n\u003C/p\u003E\n"},{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-15T00:19:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222922080\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484439298\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWHEN/THEN commands do not work as you\u0027re possibly thinking. They don\u0027t stop code execution; instead they\u0027re stored as triggers to be run each tick. This means that the script will continue executing, but if there is no more code to run, the script will end. Try sticking a WAIT UNTIL FALSE. at the bottom of the script so it never ends.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry I meant the WAIT UNTIL was preventing the code moving from forwards\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I meant was: if currently my Ship\u0027s EC is \u0026gt; 100 and Water is \u0026lt; 143 why PRINT EC and PRINT WATER are both 0 when I have the following in my code?\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nWHEN SHIP:ELECTRICCHARGE \u0026gt; 100 THEN {\n    SET EC TO 1.\n    PRESERVE. }\n\nWHEN SHIP:WATER \u0026lt; 143 THEN {\n    SET WATER TO 1.\n    PRESERVE. }\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-15T00:23:48Z\u0022 title=\u002201/15/2017 12:23  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 15, 2017\u003C/time\u003E by hypervelocity\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-01-15T00:23:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222922089\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484439579\u0022 data-ipsquote-userid=\u0022136426\u0022 data-ipsquote-username=\u0022hypervelocity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, hypervelocity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry I meant the WAIT UNTIL was preventing the code moving from forwards\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI was referring to the be script you posted that had only WHEN statements, to which you added: \u0022EDIT: After running the script, I tried PRINT EC, PRINT WATER \u0026amp; PRINT READYTODRILL and all read 0. Clearly the WHEN/THEN statements are not being executed/just wrong.\u0022 My last post was explaining why it\u0027ll exit without doing anything useful.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-01-15T00:45:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222922089\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484439579\u0022 data-ipsquote-userid=\u0022136426\u0022 data-ipsquote-username=\u0022hypervelocity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 minutes ago, hypervelocity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat I meant was: if currently my Ship\u0027s EC is \u0026gt; 100 and Water is \u0026lt; 143 why PRINT EC and PRINT WATER are both 0 when I have the following in my code?\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nWHEN SHIP:ELECTRICCHARGE \u0026gt; 100 THEN {\n    SET EC TO 1.\n    PRESERVE. }\n\nWHEN SHIP:WATER \u0026lt; 143 THEN {\n    SET WATER TO 1.\n    PRESERVE. }\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe contents of those triggers won\u0027t get executed until the start of the next physics tick, by which time your script has already ended.\n\u003C/p\u003E\n"},{"CreatedByName":"hypervelocity","CreatedById":136426,"CreatedDateTime":"2017-01-15T00:51:57Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114015-elwanderer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114015\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114015-elwanderer/\u0022 rel=\u0022\u0022\u003E@ElWanderer\u003C/a\u003E, gotcha! \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0Sorry for being such a noob.\n\u003C/p\u003E\n\u003Cp\u003E\nI added WAIT UNTIL FALSE, which had the aforementioned effect.\n\u003C/p\u003E\n\u003Cp\u003E\nNow I notice my previous code was missing the Triggers for setting back the EC \u0026amp; WATER variables back to 0, so the Drills could re-start after resource levels met the WHEN/THEN conditions again.\n\u003C/p\u003E\n\u003Cp\u003E\nI updated the code as follows, tested it with enough resources on my Ship to meet the initial criteria and start drilling. The code activated AG2 and started to continuosly print \u0022====== DRILLS ACTIVATED\u0022. However, once my Ship\u0027s Water levels rose above 143, AG3 was not executed, \u0022===== DRILLS SHUT-DOWN\u0022 was not printed and my defined variable WATER did not get SET TO 0 again \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nCLEARSCREEN. PRINT \u0022==== DRILLING PROGRAM ACTIVATED\u0022.\n\nSET EC TO 0.\nSET WATER TO 0.\nSET READYTODRILL TO EC \u002B WATER.\n\nWHEN SHIP:ELECTRICCHARGE \u0026gt; 100 THEN {\n    SET EC TO 1.\n    PRESERVE. }.\nWHEN SHIP:ELECTRICCHARGE \u0026lt; 100 THEN {\n    SET EC TO 0.\n    PRESERVE. }.\n\nWHEN SHIP:WATER \u0026lt; 143 THEN {\n    SET WATER TO 1.\n    PRESERVE. }.\nWHEN SHIP:WATER \u0026gt; 143 THEN {\n    SET WATER TO 0.\n    PRESERVE. }.\n\nWHEN EC = 1 AND WATER = 1 THEN {\n    TOGGLE AG2.\n    PRESERVE. }.\n\nWHEN EC = 0 OR WATER = 0 THEN {\n    TOGGLE AG3.\n    PRESERVE. }.\n\nON AG2 {\n    PRINT \u0022===== DRILLS ACTIVATED\u0022.\n    PRESERVE. }.\n\nON AG3 {\n    PRINT \u0022===== DRILLS SHUT-DOWN\u0022.\n    PRESERVE. }.\n\nWAIT UNTIL FALSE.\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-15T00:52:57Z\u0022 title=\u002201/15/2017 12:52  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 15, 2017\u003C/time\u003E by hypervelocity\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"danielboro","CreatedById":166078,"CreatedDateTime":"2017-01-15T07:10:58Z","Content":"\n\u003Cp\u003E\nits possible you need to add AG2 off and AG3 off.\u003Cbr\u003E\ni remember having some problems whit AG only working wen going from off to on.\u003Cbr\u003E\nso i needed {toggle AGX. toggle AGX.} for it to work the second time\u003Cbr\u003E\nactually what i did was {AGX on. AGX off.}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUNTIL FALSE {\u003Cbr\u003E\n\u00A0 if SHIP:ELECTRICCHARGE \u0026gt; 100 and SHIP:WATER \u0026lt; 143 {TOGGLE AG2. PRINT \u0022===== DRILLS ACTIVATED\u0022.} else {TOGGLE AG3. PRINT \u0022===== DRILLS SHUT-DOWN\u0022.}\u003Cbr\u003E\nwait X.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\ni think this is better.\u003Cbr\u003E\nset X to the number of seconds bittwin testing or 0 to test every tick\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"EmbersArc","CreatedById":163406,"CreatedDateTime":"2017-01-15T20:25:41Z","Content":"\n\u003Cp\u003E\nOkay I\u0027ve got a (hopefully less confusing) bug report. The whole thing is quite complicated but I\u0027ll do my best to explain it.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve noticed that command seats on a vessel can significantly impact the way it flies. If they are empty it\u0027s fine, unless you grab vessels with them with a claw. Here\u0027s a little gif of what I mean:\u00A0\u003Ca href=\u0022http://i.imgur.com/E1MeiRe.gifv\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/E1MeiRe.gifv\u003C/a\u003E\u00A0(First grabs a vessel without then with command seat)\n\u003C/p\u003E\n\u003Cp\u003E\nIf they have a Kerbal in them, the behavior is very similar. Then it doesn\u0027t matter if you grab it first or not. As soon as a Kerbal boards the seat the whole thing loses control. This is independent from when the script is launched.\u00A0\u003Ca href=\u0022http://i.imgur.com/JSTlTcY.gifv\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/JSTlTcY.gifv\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe behavior is similar to what you would expect if the script runs very slowly and variables are not updated often enough.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s a log for all four situations and some more info (The last one is the random steering bug).\u00A0\u003Ca href=\u0022https://gist.github.com/EmbersArc/b17cf12ab8ce4401a7d8c86f92b38197\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://gist.github.com/EmbersArc/b17cf12ab8ce4401a7d8c86f92b38197\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"EpicSpaceTroll139","CreatedById":162839,"CreatedDateTime":"2017-01-15T22:00:12Z","Content":"\n\u003Cp\u003E\nI have what is probably a dumb question, but I\u0027m currently stumped. Is there a way to find the current thrust on a craft? I know there\u0027s VESSEL:MAXTHRUST, VESSEL:MAXTHRUSTAT(), VESSEL:AVAILABLETHRUST, VESSEL:AVAILABLETHRUSTAT(), ENG:THRUSTAT(), etc, but for the life of me, looking through the documentation, I can not find a command to get the current total\u00A0thrust.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso is there a way to get the combined input from \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003Esas\u003C/abbr\u003E and pilot, instead of just the pilot?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-16T18:54:39Z\u0022 title=\u002201/16/2017 06:54  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 16, 2017\u003C/time\u003E by EpicSpaceTroll139\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-01-16T03:20:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222922830\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484511941\u0022 data-ipsquote-userid=\u0022163406\u0022 data-ipsquote-username=\u0022EmbersArc\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, EmbersArc said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay I\u0027ve got a (hopefully less confusing) bug report. The whole thing is quite complicated but I\u0027ll do my best to explain it.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve noticed that command seats on a vessel can significantly impact the way it flies. If they are empty it\u0027s fine, unless you grab vessels with them with a claw. Here\u0027s a little gif of what I mean:\u00A0\u003Ca href=\u0022http://i.imgur.com/E1MeiRe.gifv\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/E1MeiRe.gifv\u003C/a\u003E\u00A0(First grabs a vessel without then with command seat)\n\u003C/p\u003E\n\u003Cp\u003E\nIf they have a Kerbal in them, the behavior is very similar. Then it doesn\u0027t matter if you grab it first or not. As soon as a Kerbal boards the seat the whole thing loses control. This is independent from when the script is launched.\u00A0\u003Ca href=\u0022http://i.imgur.com/JSTlTcY.gifv\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/JSTlTcY.gifv\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe behavior is similar to what you would expect if the script runs very slowly and variables are not updated often enough.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s a log for all four situations and some more info (The last one is the random steering bug).\u00A0\u003Ca href=\u0022https://gist.github.com/EmbersArc/b17cf12ab8ce4401a7d8c86f92b38197\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://gist.github.com/EmbersArc/b17cf12ab8ce4401a7d8c86f92b38197\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhen a kerbal gets in the seat, the stock game changes the \u0022control from here\u0022 part, which can rotate its notion of which way is the \u0022front\u0022 of the ship pointed.\u00A0 (A similar thing happens when you use \u0027C\u0027 to toggle cockpit view - if you had previously been using a probe core to drive from, now the cockpit that the kerbal is inside of becomes the \u0022control from here\u0022 part the instant you go to cockpit view.)\n\u003C/p\u003E\n\u003Cp\u003E\nDo you think this might be causing the behviour you see or does it look like something else?\n\u003C/p\u003E\n"},{"CreatedByName":"EmbersArc","CreatedById":163406,"CreatedDateTime":"2017-01-16T08:42:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222923197\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484536850\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen a kerbal gets in the seat, the stock game changes the \u0022control from here\u0022 part, which can rotate its notion of which way is the \u0022front\u0022 of the ship pointed.\u00A0 (A similar thing happens when you use \u0027C\u0027 to toggle cockpit view - if you had previously been using a probe core to drive from, now the cockpit that the kerbal is inside of becomes the \u0022control from here\u0022 part the instant you go to cockpit view.)\n\u003C/p\u003E\n\u003Cp\u003E\nDo you think this might be causing the behviour you see or does it look like something else?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI thought I had ruled that out but just tested it again.\u00A0Yes you\u0027re right. It somehow didn\u0027t happen when it grabbed a vessel with a tilted probe core on it. Luckily kOS has a way to set the control point. Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"meyerweb","CreatedById":135212,"CreatedDateTime":"2017-01-16T21:44:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222920613\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484340777\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/13/2017 at 3:52 PM, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWe could maybe add the ability to pick a \u0022frequency\u0022 to triggers to get the same effect:\n\u003C/p\u003E\n\u003Cp\u003E\nEVERY 0.5 ON AG10 { stuff },\u00A0 or EVERY 0.5 WHEN Foo THEN { stuff }\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat would be pretty sweet.\n\u003C/p\u003E\n"},{"CreatedByName":"meyerweb","CreatedById":135212,"CreatedDateTime":"2017-01-16T21:56:45Z","Content":"\n\u003Cp\u003E\nI\u2019ve been running into a situation where sometimes, the stage resources show as zero because (it turns out) the ship\u2019s fuel tanks have been demoted to stage number \u0060-1\u0060.\u00A0 This happens most often when a craft launches with both liquid and solid fuel engines, such as the stock GDLV3.\u00A0 Once the GDLV3 reaches space, having staged off the solid boosters, the Rockomax 64 fuel tank is in stage \u0060-1\u0060 (along with the OKTO, the struts, the KAL9000 I slapped on the side, and several other parts).\u00A0 Having the R-64 in stage \u0060-1\u0060 means the current active stage calculates as having a \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of 0, because the ship is currently on stage 2, as is the Skipper engine.\u00A0 Staging to stage 1 moves the Skipper to stage 1, but the R-64 stays at stage \u0060-1\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to prevent this?\u00A0 I\u2019d prefer a programmatic way to prevent or fix it, as opposed to restructuring the craft or its staging in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E just to accommodate this.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2017-01-17T03:30:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924178\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484603805\u0022 data-ipsquote-userid=\u0022135212\u0022 data-ipsquote-username=\u0022meyerweb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, meyerweb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u2019ve been running into a situation where sometimes, the stage resources show as zero because (it turns out) the ship\u2019s fuel tanks have been demoted to stage number \u0060-1\u0060.\u00A0 This happens most often when a craft launches with both liquid and solid fuel engines, such as the stock GDLV3.\u00A0 Once the GDLV3 reaches space, having staged off the solid boosters, the Rockomax 64 fuel tank is in stage \u0060-1\u0060 (along with the OKTO, the struts, the KAL9000 I slapped on the side, and several other parts).\u00A0 Having the R-64 in stage \u0060-1\u0060 means the current active stage calculates as having a \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of 0, because the ship is currently on stage 2, as is the Skipper engine.\u00A0 Staging to stage 1 moves the Skipper to stage 1, but the R-64 stays at stage \u0060-1\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to prevent this?\u00A0 I\u2019d prefer a programmatic way to prevent or fix it, as opposed to restructuring the craft or its staging in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E just to accommodate this.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf our reading matches the stock in game GUI (with \u0022stage only\u0022 selected) then it\u0027s the best we can do. \u00A0We replicate the exact same system the UI uses, and short of writing our own more complicated system that\u0027s the best way we have to be close to correct. \u00A0If it doesn\u0027t match the GUI though we need to fix it. \u00A0Unfortunately we don\u0027t have any kind of a means to adjust the stage numbers, and it\u0027s my understanding that all kinds of crazy things happen to the stages if you try to re-arrange them in flight (though I\u0027ve never tested it myself). \u00A0I don\u0027t have a good solution, but I\u0027ll try to keep it in mind when I look at testing the stage resource info.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-01-17T11:39:13Z","Content":"\n\u003Cp\u003E\nKSP\u0027s behaviour with \u0022stage\u0022 resources has been annoying me too. I\u0027ve had to write my own fuel-finding functions that recursively negotiate the parts tree, starting from any currently-ignited engines. I\u0027m not aware of any way to take into account fuel lines, though \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIs there a way in kOS to find which part a fuel line transfers fuel to? A search pulled up an old Reddit post saying fuel lines had their own module, but it had nothing useful accessible https\u003Ca href=\u0022https://m.reddit.com/r/Kos/comments/35wu8o/fuel_zones_or_remaining_deltav_fuel_per_engine/\u0022 rel=\u0022external nofollow\u0022\u003E://m.reddit.com/r/Kos/comments/35wu8o/fuel_zones_or_remaining_deltav_fuel_per_engine/\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"meyerweb","CreatedById":135212,"CreatedDateTime":"2017-01-17T16:04:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924482\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484623834\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf our reading matches the stock in game GUI (with \u0022stage only\u0022 selected) then it\u0027s the best we can do. \u00A0We replicate the exact same system the UI uses, and short of writing our own more complicated system that\u0027s the best way we have to be close to correct. \u00A0If it doesn\u0027t match the GUI though we need to fix it. \u00A0Unfortunately we don\u0027t have any kind of a means to adjust the stage numbers, and it\u0027s my understanding that all kinds of crazy things happen to the stages if you try to re-arrange them in flight (though I\u0027ve never tested it myself). \u00A0I don\u0027t have a good solution, but I\u0027ll try to keep it in mind when I look at testing the stage resource info.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmmm, that\u2019s a good point about in-flight stage rearrangement.\u00A0 I don\u2019t think I did that, but it\u2019s possible, so I\u2019ll do some more testing just to make sure.\n\u003C/p\u003E\n\u003Cp\u003E\nSpeaking of making sure, when you say \u201Cwith \u2018stage only\u2019 selected\u201D, do you mean selecting the \u201Cstage view\u201D button in the stock resources panel?\n\u003C/p\u003E\n"},{"CreatedByName":"meyerweb","CreatedById":135212,"CreatedDateTime":"2017-01-17T17:15:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222919831\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484272933\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/12/2017 at 9:02 PM, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Ch2 style=\u0022margin-bottom:16px;font-size:1.5em;font-weight:600;line-height:1.25;padding-bottom:.3em;border-bottom:1px solid rgb(238,238,238);color:rgb(51,51,51);font-family:\u0027-apple-system\u0027, BlinkMacSystemFont, \u0027Segoe UI\u0027, Helvetica, Arial, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-style:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nKOS-StockCamera\n\u003C/h2\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027-apple-system\u0027, BlinkMacSystemFont, \u0027Segoe UI\u0027, Helvetica, Arial, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\n\u003Ca href=\u0022https://github.com/hvacengi/KOS-StockCamera/blob/v0.1.0\u0022 rel=\u0022external nofollow\u0022 style=\u0022background-color:transparent;color:rgb(64,120,192);text-decoration:none;\u0022\u003E\u003Cimg alt=\u0022for KSP v1.2.2\u0022 src=\u0022https://camo.githubusercontent.com/751fd45d5d9e748fcc737c9aa73b2783c9d17c40/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f666f722532304b53502d76312e322e322d6f72616e67652e7376673f7374796c653d666c61742d737175617265\u0022 style=\u0022border-style:none;background-color:rgb(255,255,255);\u0022\u003E\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://github.com/hvacengi/KOS-StockCamera/blob/v0.1.0\u0022 rel=\u0022external nofollow\u0022 style=\u0022background-color:transparent;color:rgb(64,120,192);text-decoration:none;\u0022\u003E\u003Cimg alt=\u0022for kOS v1.0.3\u0022 src=\u0022https://camo.githubusercontent.com/40151cd3049984655de81f30e5897ee12c21586d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f666f722532306b4f532d76312e302e332d626c75652e7376673f7374796c653d666c61742d737175617265\u0022 style=\u0022border-style:none;background-color:rgb(255,255,255);\u0022\u003E\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://github.com/hvacengi/KOS-StockCamera/releases/download/v0.1.0/KOS-StockCamera-v0.1.0.zip\u0022 rel=\u0022external nofollow\u0022 style=\u0022background-color:transparent;color:rgb(64,120,192);text-decoration:none;\u0022\u003E\u003Cimg alt=\u0022Downloads this release\u0022 src=\u0022https://camo.githubusercontent.com/2a1d2498cb38a89c9a620d635d2be8a0cec7e9dd/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f646f776e6c6f6164732f68766163656e67692f4b4f532d53746f636b43616d6572612f76302e312e302f746f74616c2e7376673f7374796c653d666c61742d737175617265\u0022 style=\u0022border-style:none;background-color:rgb(255,255,255);\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027-apple-system\u0027, BlinkMacSystemFont, \u0027Segoe UI\u0027, Helvetica, Arial, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nA kOS addon for manipulating the camera from inside scripts.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027-apple-system\u0027, BlinkMacSystemFont, \u0027Segoe UI\u0027, Helvetica, Arial, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nInitial public release.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-top:0px;color:rgb(51,51,51);font-family:\u0027-apple-system\u0027, BlinkMacSystemFont, \u0027Segoe UI\u0027, Helvetica, Arial, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nSee\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://github.com/hvacengi/KOS-StockCamera/blob/master/README.md\u0022 rel=\u0022external nofollow\u0022 style=\u0022background-color:transparent;color:rgb(64,120,192);text-decoration:none;\u0022\u003EREADME.md\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Efor documentation.\n\u003C/p\u003E\n\u003Cp\u003E\nDownload:\u00A0\u003Ca href=\u0022https://github.com/hvacengi/KOS-StockCamera/releases\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/hvacengi/KOS-StockCamera/releases\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNice!\u00A0 Any plans for creating built-in structures to allow things like the stationary flyby cameras found in other camera-manipulating mods, geographic/world coordinates, and similar?\u00A0 I assume these could be calculated from what\u2019s already provided, but it would be nice to have a way to say \u201Cplop a camera here in the world and don\u2019t move it while still staying pointed at the craft\u201D.\u00A0 Example: put a camera on the ground 500 meters from the launchpad and track the craft as it takes off.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2017-01-18T00:30:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924862\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484669060\u0022 data-ipsquote-userid=\u0022135212\u0022 data-ipsquote-username=\u0022meyerweb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, meyerweb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSpeaking of making sure, when you say \u201Cwith \u2018stage only\u2019 selected\u201D, do you mean selecting the \u201Cstage view\u201D button in the stock resources panel?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I forgot the phrasing and didn\u0027t open KSP to check. \u00A0\u0022Stage View\u0022 is the correct option.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924922\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484673332\u0022 data-ipsquote-userid=\u0022135212\u0022 data-ipsquote-username=\u0022meyerweb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, meyerweb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNice!\u00A0 Any plans for creating built-in structures to allow things like the stationary flyby cameras found in other camera-manipulating mods, geographic/world coordinates, and similar?\u00A0 I assume these could be calculated from what\u2019s already provided, but it would be nice to have a way to say \u201Cplop a camera here in the world and don\u2019t move it while still staying pointed at the craft\u201D.\u00A0 Example: put a camera on the ground 500 meters from the launchpad and track the craft as it takes off.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, I don\u0027t have any intention to do anything like that. \u00A0That\u0027s more complicated because you need to manage when that camera controller lives/dies/becomes a ravenous zombie bent on eating my brain (maybe not that last option). \u00A0There are some other mods that do things like that and I may make an addon to interact with them instead.\n\u003C/p\u003E\n\u003Cp\u003E\nI did forget to link the example library I built to help users manage the camera easily. \u00A0So here it is (if you didn\u0027t already find it):\u00A0\u003Ca href=\u0022https://github.com/hvacengi/KOS-StockCamera/blob/master/Example%20Scripts/libcamera.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/hvacengi/KOS-StockCamera/blob/master/Example Scripts/libcamera.ks\u003C/a\u003E\u00A0(I\u0027ll update the README to point at it too).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924704\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484653153\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKSP\u0027s behaviour with \u0022stage\u0022 resources has been annoying me too. I\u0027ve had to write my own fuel-finding functions that recursively negotiate the parts tree, starting from any currently-ignited engines. I\u0027m not aware of any way to take into account fuel lines, though \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIs there a way in kOS to find which part a fuel line transfers fuel to? A search pulled up an old Reddit post saying fuel lines had their own module, but it had nothing useful accessible https\u003Ca href=\u0022https://m.reddit.com/r/Kos/comments/35wu8o/fuel_zones_or_remaining_deltav_fuel_per_engine/\u0022 rel=\u0022external nofollow\u0022\u003E://m.reddit.com/r/Kos/comments/35wu8o/fuel_zones_or_remaining_deltav_fuel_per_engine/\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn theory, that\u0027s exactly what the GUI and our methods are supposed to do. \u00A0We query each engine to see if it\u0027s activated, and then ask it \u0022what fuel tanks are you connected to?\u0022. \u00A0And it should use the exact internal fuel flow logic, so it\u00A0\u003Cstrong\u003E\u003Cem\u003Eshould\u003C/em\u003E\u003C/strong\u003E\u00A0show the exact value available to all currently active engines.\n\u003C/p\u003E\n"}]}