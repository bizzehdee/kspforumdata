{"TopicId":113154,"ForumId":36,"TopicTitle":"[Idea] Realistic ground scatter","CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-16T23:02:03Z","PageNum":1,"Articles":[{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-16T23:02:03Z","Content":"\n\u003Cp\u003EThe trees on Kerbin (which can only be seen with ground scatter enabled) are rather low-poly when standing right by them - but they have too many polygons to render a realistic number of them.\u003C/p\u003E\u003Cp\u003ESo, I\u0027ve been thinking about how one might make a mod to fix this. I made some mock-ups in GIMP of what I came up with (and what I believe many modern games do); grey is what you\u0027d actually be seeing, red is the edges of in-game polygons.\u003C/p\u003E\u003Cp\u003EMy proposed solution: A proper LOD (level of detail) system for trees. Close up, trees would be fairly high-poly models, with at a few polygons per branch:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/5clKpNF.png\u0022 alt=\u00225clKpNF.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EOnce the camera is more than say 100 meters away from them, they fade into a more simplistic model of three intersecting planes. The key to making this look realistic is a combination of proper normal mapping, so the trees appear lit from the correct angle, and a shader which fades the planes to transparent as they come close to edge-on (which avoids the effect of stretched trees).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6WUQa6f.png\u0022 alt=\u00226WUQa6f.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EFinally, for further distances, the trees are all drawn on the same texture, parallel to the ground. Ideally, this would be part of the terrain shader itself rather than seperate geometry. (This is a top-down view.)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/EoYFQTF.png\u0022 alt=\u0022EoYFQTF.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ETo prevent pop-in, the low-poly trees should fade out as the ground texture fades in. Here is a mock-up of how that might look (notice the fading of the furthest trees):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/osX3t13.png\u0022 alt=\u0022osX3t13.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd that same image with polygons visible, showing the transition from high(ish)-poly trees to low-poly trees at about a hundred meters out:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/GAq2OTx.png\u0022 alt=\u0022GAq2OTx.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo why did I start this thread? Quite simply, because I need help. I\u0027ve created some mods for KSP but don\u0027t know enough about Unity to do this - in particular, I don\u0027t know how to modify geometry directly without adding a game object for each tree, and I don\u0027t know very much about Unity shaders. So, I am looking for feedback, and pointers if anyone can help.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-17T00:11:27Z","Content":"\n\u003Cp\u003EI doubt I\u0027d be of any help plugin-wise, but I\u0027m very keen on seeing how this turns out.\u003C/p\u003E\u003Cp\u003EI\u0027m also interested in procedurally generating cities, towns, villages and roads, although that\u0027s another topic altogether.\u003C/p\u003E\n"},{"CreatedByName":"G\u0026#039;th","CreatedById":98595,"CreatedDateTime":"2015-06-17T01:37:16Z","Content":"\n\u003Cp\u003ELOD would do wonders for visuals in this game. Especially for planet creators, as then they could do real jungle type worlds and not have it be crazy hard to run.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-17T01:58:40Z","Content":"\n\u003Cp\u003EI\u0027d like to add a few more suggestions to the original proposal:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EVariations in plant size / maturity\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EShould be fairly easy, with randomized scaling\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EVariations in plant types depending on biome\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E - Palm trees near Shores\u003C/p\u003E\u003Cp\u003E - Deciduous (broadleaf) in Grasslands/Highlands\u003C/p\u003E\u003Cp\u003E - Coniferous (evergreen) in Mountains\u003C/p\u003E\u003Cp\u003E - Cacti in Desert\u003C/p\u003E\u003Cp\u003E - Shrubs in most biomes to add visual interest\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ESeed-based procedural generation\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe same seed value results in the same distribution of scatter between savegames\u003C/p\u003E\n"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-17T02:03:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003EI\u0027d like to add a few more suggestions to the original proposal:\u003Cp\u003E\u003Cstrong\u003EVariations in plant size / maturity\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EShould be fairly easy, with randomized scaling\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIndeed.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003EVariations in plant types depending on biome\u003C/strong\u003E\u003Cp\u003E - Palm trees near Shores\u003C/p\u003E\u003Cp\u003E - Deciduous (broadleaf) in Grasslands/Highlands\u003C/p\u003E\u003Cp\u003E - Coniferous (evergreen) in Mountains\u003C/p\u003E\u003Cp\u003E - Cacti in Desert\u003C/p\u003E\u003Cp\u003E - Shrubs in most biomes to add visual interest\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat was something I was hoping to do once I had the basic system working, as well as grass.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003ESeed-based procedural generation\u003C/strong\u003E\u003Cp\u003EThe same seed value results in the same distribution of scatter between savegames\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaving them line up predictably is required anyway, so that they match up with the static textures at long draw distances.\u003C/p\u003E\n"},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2015-06-17T02:16:20Z","Content":"\n\u003Cp\u003EMight as well add the stock feature that we need to somehow disable it so that the users will not compilain the low poly trees. (Add coliders too? Amount of scatter percentage?)\u003C/p\u003E\u003Cp\u003EEDIT : do also do for other planets. Eg (laythe mun minmus etc)\u003C/p\u003E\u003Cp\u003EEDIT 2 : nice idea i like it!\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m also interested in procedurally generating cities, towns, villages and roads, although that\u0027s another topic altogether.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eit is kinda difficult. You know that those cities need meshes and colliders.\u003C/p\u003E\u003Cp\u003EEDIT 3 : i just realised it is the EPL original owner! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png\u0022 alt=\u0022:o\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"KillAshley","CreatedById":128696,"CreatedDateTime":"2015-06-17T09:56:27Z","Content":"\n\u003Cp\u003Ei really hope you can pull this off dude, one selfish suggestion as a planet pack creator is the ability to add custom models \u0026amp; textures. Then we can add alien objects as scatter to other worlds easily \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003Eare you planning on having a collision mesh system? or just the current \u0022trees aren\u0027t relly there\u0022 system?\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-06-17T13:12:49Z","Content":"\n\u003Cp\u003ESo, basically you are proposing reinventing the realtree system for KSP. Nice.\u003C/p\u003E\n"},{"CreatedByName":"mysteriosmind","CreatedById":128626,"CreatedDateTime":"2015-06-18T15:50:37Z","Content":"\n\u003Cp\u003EYou might want to have a look at this video then: \u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/4Ghulpp6CPw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EIt shows how what you are describing is done in Proland and gives some details on how it is achieved. Not that I understand much off it, but maybe it makes more sense to you. The source code and some documentation is available on the Proland website as well: \u003Ca href=\u0022http://proland.inrialpes.fr/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://proland.inrialpes.fr/index.html\u003C/a\u003E I am not sure if it is even possible to bring this to KSP, but there seems to exist a (basic) port to Unity \u003Ca href=\u0022http://scrawkblog.com/2014/05/20/proland-to-unity-forests/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://scrawkblog.com/2014/05/20/proland-to-unity-forests/\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-18T16:18:20Z","Content":"\n\u003Cp\u003EI\u0027ve looked at Proland\u0027s trees before. The trouble with them in regards to KSP is that they use geometry shaders (bits of code that the GPU uses to figure out where polygons are), which requires a higher level of DirectX/OpenGL compatibility than KSP has.\u003C/p\u003E\n"},{"CreatedByName":"mysteriosmind","CreatedById":128626,"CreatedDateTime":"2015-06-18T16:44:06Z","Content":"\n\u003Cp\u003EYeah, I kinda expected that there were some reasons, why this wouldn\u0027t work in KSP. Anyway, it sounds like you know about KSP\u0027s limitations pretty well, so you might be able to make something similar in a different way!\u003C/p\u003E\n"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2015-06-22T02:53:57Z","Content":"\n\u003Cp\u003EIf someone managed to make a working test version of this mod, I would test it to destruction.\u003C/p\u003E\n"},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2015-06-22T15:49:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mekan1k\u0022 data-cite=\u0022Mekan1k\u0022\u003E\u003Cdiv\u003EIf someone managed to make a working test version of this mod, I would test it to destruction.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame.. wait where have you been?! We want to see the atories you write!\u003C/p\u003E\n"}]}