{"TopicId":113191,"ForumId":29,"TopicTitle":"How to rotate internal camera\u0026#039;s view?","CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-06-17T10:18:30Z","PageNum":1,"Articles":[{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-06-17T10:18:30Z","Content":"\n\u003Cp\u003ENeed some help with internal camera:\u003C/p\u003E\u003Cp\u003EWhen I try to rotate the view while in IVA mode via InternalCamera\u0027s transform using any of its Rotate methods, it turns together with cockpit\u0027s interior. Seems like that the interior is rendered using the same transform so all the gauges and monitors appear in front of a view regardless it is turned away from the vessels front. So what\u0027s the proper way to turn the \u0022eye\u0022 view only as if it was moved with RMB? Should I manipulate a kerbal\u0027s head instead?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-02T13:41:16Z\u0022 title=\u002207/02/2015 01:41  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 2, 2015\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-02T11:55:49Z","Content":"\n\u003Cp\u003ESeems to be too hard task... does anyone know the answer?\u003C/p\u003E\n"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-02T12:48:25Z","Content":"\n\u003Cp\u003EI\u0027m trying to do something... I\u0027ll update if I find \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI found !!!\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECameraManager.Instance.SetCameraMode(CameraManager.CameraMode.IVA);\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EI don\u0027t know why, but it doesn\u0027t only set the camera mode to IVA, but it toggles it so when you\u0027re in external, it switches to internal, and if you call it again it switches back to external. Try \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003E[EDIT] \u003C/p\u003E\u003Cp\u003EOH NO !! I thought you were trying to toggle IVA mode \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-02T13:03:55Z\u0022 title=\u002207/02/2015 01:03  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 2, 2015\u003C/time\u003E by simon56modder\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-02T13:08:41Z","Content":"\n\u003Cp\u003EThat\u0027s the problem. I\u0027m trying to control the view direction when it is already toggled. And there\u0027s a bunch of cameras, transforms and stuff and nothing does well enough.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-02T13:11:10Z\u0022 title=\u002207/02/2015 01:11  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 2, 2015\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-07-02T14:07:52Z","Content":"\n\u003Cp\u003EHave a look at InternalCamera.Instance\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-02T14:15:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EHave a look at InternalCamera.Instance\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHave already messed with it. It looks like the right thing to look at. But when I try to rotate it via its transform it rotates together with cockpit\u0027s interior. I.e if rotated 90 degrees in flight then everything looks like nothing happened except for landscape moving perpendicular to view.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-02T14:22:01Z\u0022 title=\u002207/02/2015 02:22  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 2, 2015\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-07-02T14:38:45Z","Content":"\n\u003Cp\u003EWhat did you use to rotate ? I guess I would change InternalCamera.Instance.transform.localRotation\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-02T15:46:53Z","Content":"\n\u003Cp\u003Esarbian, I\u0027ve tried many things:\u003C/p\u003E\u003Cp\u003ERotate, RotateAround, RotateAroundLocal, rotation\u003C/p\u003E\u003Cp\u003ElocalRotation.SetLokkRotation doesn\u0027t seem to work.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EInternalCamera.Instance.transform.localRotation = Quaternion.Euler(0, 40, 0);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Emakes the view stay at the present direction but the interior rotates left by 40 degress. And than it rotates together with the view if I use RMB to look around \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I could try to recall now what lead the view to rotate together with the interior and than rotate the interior in opposite but that \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Estinks\u003C/span\u003E would not work because the interior is bound to the view direction after that. It must be the most crappy camera of all the KSP\u0027s\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/yfI3PgI.png\u0022 alt=\u0022yfI3PgI.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-02T16:27:56Z\u0022 title=\u002207/02/2015 04:27  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 2, 2015\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-07-02T17:01:27Z","Content":"\n\u003Cp\u003EI don\u0027t know the code for this (sorry), but I think you need to get the GameObject inheritance tree. It sounds like the IVA models and props are child objects of the internal camera for some reason if rotating the camera is moving the visible objects in the game world.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-02T17:04:30Z\u0022 title=\u002207/02/2015 05:04  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 2, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-03T17:25:09Z","Content":"\n\u003Cp\u003EInternalCamera.Instance.transform strangely has no children. Trying to mess with GameObject...\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2015-07-09T10:35:43Z","Content":"\n\u003Cp\u003EI ran into this exact problem when developing KerbTrack. Here\u0027s the solution to it:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E// Without setting the flight camera transform, the pod rotates about without changing the background.\u003Cbr\u003EFlightCamera.fetch.transform.rotation = InternalSpace.InternalToWorld(InternalCamera.Instance.transform.rotation);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/pizzaoverhead/KerbTrack/blob/master/KerbTrack/KerbTrack.cs#L445-446\u0022 rel=\u0022external nofollow\u0022\u003EYou can see the rest of the code involved here.\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-07-10T08:51:53Z","Content":"\n\u003Cp\u003EThanks. I should look in your mod\u0027s source code first of all. It works but not in my case \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027ll explain: it holds the specified view direction as long as the command is issued. Otherwise it is returned to default direction by the next frame. But I need to rotate the view once and leave it in that state to make user have to restore it by mouse.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-10T08:54:21Z\u0022 title=\u002207/10/2015 08:54  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 10, 2015\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"}]}