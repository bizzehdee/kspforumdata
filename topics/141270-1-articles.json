{"TopicId":141270,"ForumId":29,"TopicTitle":"How to find current biome? (including \u0026quot;LaunchPad\u0026quot; etc.) [Answered]","CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-06-05T22:04:20Z","PageNum":1,"Articles":[{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-06-05T22:04:20Z","Content":"\n\u003Cp\u003E\nSo, I\u0027m trying to figure out \u0022what biome is the ship in\u0022.\u00A0 Simple, right?\n\u003C/p\u003E\n\u003Cp\u003E\nSo far, I\u0027ve found two ways:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nScienceUtil.GetExperimentBiome\n\u003C/li\u003E\n\u003Cli\u003E\nResourceUtilities.GetBiome\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n...and they both work... \u003Cem\u003E\u003Cu\u003Emostly\u003C/u\u003E\u003C/em\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, they appear to be clueless about the various mini-biomes around KSC.\u00A0 For example, if I\u0027m sitting on the launch pad and query either of those mechanisms, they\u0027ll simply say \u0022Shores\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nHow do I get the \u003Cem\u003E\u003Cu\u003Eactual science biome\u003C/u\u003E\u003C/em\u003E of the current ship position?\u00A0 In other words, \u0022If I were to take a science measurement right now, what biome would it say\u0022, \u003Cem\u003E\u003Cu\u003Eincluding\u003C/u\u003E\u003C/em\u003E the micro-KSC biomes?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-06-05T22:10:39Z","Content":"\n\u003Cp\u003E\nIt is actually easy :\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/MuMech/MechJeb2/blob/master/MechJeb2/MechJebModuleInfoItems.cs#L1155-L1161\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/MuMech/MechJeb2/blob/master/MechJeb2/MechJebModuleInfoItems.cs#L1155-L1161\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-06-05T23:06:44Z","Content":"\n\u003Cp\u003E\nOh!\u00A0 So \u003Cem\u003E\u003Cu\u003Ethat\u0027s\u003C/u\u003E\u003C/em\u003E what Vessel.landedAt is for.\n\u003C/p\u003E\n\u003Cp\u003E\nOkay, well, nice to know that not everything has to be hard.\u00A0 \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThank you for the answer!\u00A0 Very easy, yes, but it sure wasn\u0027t very discoverable (by me, at least).\u00A0 Would have taken me \u003Cem\u003E\u003Cu\u003Eforever\u003C/u\u003E\u003C/em\u003E to find that on my own.\u00A0 Much obliged.\n\u003C/p\u003E\n\u003Cp\u003E\n-------------\n\u003C/p\u003E\n\u003Cp\u003E\n[EDIT]\u00A0 ...Okay, I spoke too soon.\u00A0 It\u0027s still not quite what I need.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222618126\u0022 data-ipsquote-contentid=\u0022141270\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465164639\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt is actually easy :\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/MuMech/MechJeb2/blob/master/MechJeb2/MechJebModuleInfoItems.cs#L1155-L1161\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/MuMech/MechJeb2/blob/master/MechJeb2/MechJebModuleInfoItems.cs#L1155-L1161\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cspan\u003EThe code in question basically says, \u0022use Vessel.landedAt if it\u0027s there, otherwise use the current biome\u0022.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\npublic string CurrentRawBiome()\n{\n    if (vessel.landedAt != string.Empty)\n        return vessel.landedAt;\n    string biome = ScienceUtil.GetExperimentBiome(mainBody, vessel.latitude, vessel.longitude);\n    return \u0022\u0022 \u002B biome;\n}\n\u003C/pre\u003E\n\u003Cp\u003E\n...The problem is, it doesn\u0027t seem to match what I need.\u00A0 If I do this on the launchpad at KSC, for example, landedAt is \u003Cstrong\u003EKSC_LaunchPad_Platform\u003C/strong\u003E, whereas what I actually need is just \u003Cstrong\u003ELaunchPad\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I mean by \u0022what I need\u0022:\u00A0 I need the biome name that ends up in science subject IDs.\u00A0 For example, if I take a gravimeter reading on the launch pad at KSC, the subject ID that it ends up with is:\n\u003C/p\u003E\n\u003Cp\u003E\ngravityScan@KerbinSrfLanded\u003Cstrong\u003ELaunchPad\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n...It\u0027s pretty clear that the way the game constructs a subject ID is:\u00A0 experiment ID \u002B @ \u002B body \u002B situation \u002B biome\n\u003C/p\u003E\n\u003Cp\u003E\n...so the \u0022biome\u0022 that I need, here is just plain \u0022LaunchPad\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nNor can I just do something programmatic, like \u0022parse out the first word after \u0022KSC_\u0022.\u00A0 For example, the ground just east of the launchpad platform gives a landedAt value of \u003Cstrong\u003EKSC_Pad_Grounds\u003C/strong\u003E, but the resulting science subject ID is still using a biome string of LaunchPad.\n\u003C/p\u003E\n\u003Cp\u003E\nI suppose I could try just driving all over KSC with the debugger and seeing what landedAt gets set to, and then build a dictionary (e.g. \u0022if landedAt is \u0027KSC_LaunchPad_Platform\u0027, then the biome is \u0027LaunchPad\u0027, etc.) to do the translation.\u00A0 But that seems really hacky, tedious, and error-prone (I\u0027m likely to miss stuff) ... surely there must be a better way?\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-06-06T00:10:18Z","Content":"\n\u003Cp\u003E\n...Okay, was able to find the answer.\n\u003C/p\u003E\n\u003Cp\u003E\nIt turns out that there\u0027s a static function \u003Cstrong\u003EVessel.GetLandedAtString\u003C/strong\u003E.\u00A0 Pass in the value of Vessel.landedAt, and it returns the string that gets used in science subject IDs.\n\u003C/p\u003E\n\u003Cp\u003E\nSo the algorithm is basically,\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\ncheck vessel.landedAt to see if there\u0027s a string there\n\u003C/li\u003E\n\u003Cli\u003E\nif there is, the answer is Vessel.GetLandedAtString(vessel.landedAt)\n\u003C/li\u003E\n\u003Cli\u003E\nif there isn\u0027t, use the other biome-determining functions\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}