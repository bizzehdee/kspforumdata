{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":16,"Articles":[{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-09T17:14:31Z","Content":"\n\u003Cp\u003EHow are you getting the dVTot and so on values?\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-09T18:20:08Z","Content":"\n\u003Cp\u003EMechJeb source code says \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Efloat atmDv = (stats.atmoStats.Length == 0) ? 0 : stats.atmoStats[stats.atmoStats.Length - 1].deltaV;\u003Cbr\u003Efloat vacDv = (stats.vacStats.Length == 0) ? 0 : stats.vacStats[stats.vacStats.Length - 1].deltaV;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ereturns atmospheric and vaccum stage delta-V.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E            float atmDv = stats.atmoStats.Sum(s =\u0026gt; s.deltaV);\u003Cbr\u003E            float vacDv = stats.vacStats.Sum(s =\u0026gt; s.deltaV);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eare the total delta-V stats.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFlightGlobals.currentMainBody.maxAtmosphereAltitude\u003Cbr\u003EFlightGlobals.currentMainBody.Radius\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eare from Unity\u003C/p\u003E\u003Cp\u003EI must admit I have not yet started work on extracting data from MechJeb or controlling it. My coding skills are not that good. But I\u0027ll have to look into those issues for my project, so why not share it with you? Or would you prefer writing that code yourself?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-09T18:26:27Z\u0022 title=\u002205/09/2014 06:26  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 9, 2014\u003C/time\u003E by cm2227\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-09T21:13:35Z","Content":"\n\u003Cp\u003EWell my plug-in needs to work for people not using mechjeb...\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-09T21:46:12Z","Content":"\n\u003Cp\u003EWould you consider a mechjeb-version and a non-mechjeb version, maybe a fork? I don\u0027t understand enough of the game architecture and c# to calculate these values in code instead of grabbing them from a plugin that actually does it. See for example \u003Ca href=\u0022https://github.com/CYBUTEK/KerbalEngineer/blob/a596fcfbd50ab08b828401c04c2e1ca8b941ae69/KerbalEngineer/Simulation/Simulation.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/CYBUTEK/KerbalEngineer/blob/a596fcfbd50ab08b828401c04c2e1ca8b941ae69/KerbalEngineer/Simulation/Simulation.cs\u003C/a\u003E, it is the source code of how Kerbal Engineer simulates all stages and comes up with stage and total dV. If you don\u0027t like the idea of accessing another plugin\u0027s data we should find another way.\u003C/p\u003E\n"},{"CreatedByName":"pantner","CreatedById":83119,"CreatedDateTime":"2014-05-10T14:22:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EYeah that would help if you have performance problems. If you are only displaying 4 values to a LCD you really shouldn\u0027t be. I am doing much more with my display and have no problems at all. You are using the lcd library right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, i am using the LCD library, and not having performance issues now that i am using the 8-bit bus for the LCD.\u003C/p\u003E\u003Cp\u003EActually going to use it to read groups of digital inputs (and possibly do outputs aswell, ie, LEDs) and then Case statements to do specific things as opposed to using an if statement for each input.\u003C/p\u003E\u003Cp\u003EFor example, i too am going to use a rotary switch to switch between different displays but i don\u0027t want 6 if statements for it. From my understanding if statements are not very efficient. Reading all pins as a single value and then using a case statement would definitely be much better.\u003C/p\u003E\u003Cp\u003Ewas just an idea.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cm2227\u0022 data-cite=\u0022cm2227\u0022\u003E\u003Cdiv\u003EWould you consider a mechjeb-version and a non-mechjeb version, maybe a fork? I don\u0027t understand enough of the game architecture and c# to calculate these values in code instead of grabbing them from a plugin that actually does it. See for example \u003Ca href=\u0022https://github.com/CYBUTEK/KerbalEngineer/blob/a596fcfbd50ab08b828401c04c2e1ca8b941ae69/KerbalEngineer/Simulation/Simulation.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/CYBUTEK/KerbalEngineer/blob/a596fcfbd50ab08b828401c04c2e1ca8b941ae69/KerbalEngineer/Simulation/Simulation.cs\u003C/a\u003E, it is the source code of how Kerbal Engineer simulates all stages and comes up with stage and total dV. If you don\u0027t like the idea of accessing another plugin\u0027s data we should find another way.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Emaybe a value in the config file for the plugin to turn mechjeb support on and off?\u003C/p\u003E\u003Cp\u003E*EDIT - Also, looking through the plugin more...seems you have defined the same pin to 2 different functions? 4-5-6-7 are seem to be 2 \u0027things\u0027???\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-10T14:25:50Z\u0022 title=\u002205/10/2014 02:25  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 10, 2014\u003C/time\u003E by pantner\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-10T17:19:52Z","Content":"\n\u003Cp\u003EI think I found another solution to the mechjeb question. A routine to check wether mechjeb is present, and all mechjeb specific functions are only active when mj is present. In the VesselData packet all values calculated by mj would be 0, and mj commands in the control packet would be simply ignored. How about that?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-10T17:53:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pantner\u0022 data-cite=\u0022pantner\u0022\u003E\u003Cdiv\u003E*EDIT - Also, looking through the plugin more...seems you have defined the same pin to 2 different functions? 4-5-6-7 are seem to be 2 \u0027things\u0027???\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry I don\u0027t understand what you are saying? Which line of code are you talking about?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cm2227\u0022 data-cite=\u0022cm2227\u0022\u003E\u003Cdiv\u003EI think I found another solution to the mechjeb question. A routine to check wether mechjeb is present, and all mechjeb specific functions are only active when mj is present. In the VesselData packet all values calculated by mj would be 0, and mj commands in the control packet would be simply ignored. How about that?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah that could work. We have tons of space in the control packet.\u003C/p\u003E\n"},{"CreatedByName":"pantner","CreatedById":83119,"CreatedDateTime":"2014-05-11T01:10:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003ESorry I don\u0027t understand what you are saying? Which line of code are you talking about?\u003Cp\u003EYeah that could work. We have tons of space in the control packet.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ein the main sketch you have\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define GLED 5\u003Cbr\u003E#define YLED 6\u003Cbr\u003E#define RLED 7\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand then further down you have\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define SAS 7\u003Cbr\u003E#define RCS 6\u003Cbr\u003E#define LIGHTS 5\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Earen\u0027t they referring to the same pins?\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-11T10:32:06Z","Content":"\n\u003Cp\u003EThere are still questions remaining for me. Do you want to work on your code together with me? If so, who writes which part? And how do we exchange code? Github?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-12T08:28:40Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define GLED 5\u003Cbr\u003E#define YLED 6\u003Cbr\u003E#define RLED 7\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThese are LED pins.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define SAS 7\u003Cbr\u003E#define RCS 6\u003Cbr\u003E#define LIGHTS 5\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThese have nothing to do with pins.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cm2227\u0022 data-cite=\u0022cm2227\u0022\u003E\u003Cdiv\u003EThere are still questions remaining for me. Do you want to work on your code together with me? If so, who writes which part? And how do we exchange code? Github?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf the code is short/simple, you can just post it and I can add it.\u003C/p\u003E\n"},{"CreatedByName":"pantner","CreatedById":83119,"CreatedDateTime":"2014-05-12T08:56:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define GLED 5\u003Cbr\u003E#define YLED 6\u003Cbr\u003E#define RLED 7\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThese are LED pins.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define SAS 7\u003Cbr\u003E#define RCS 6\u003Cbr\u003E#define LIGHTS 5\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThese have nothing to do with pins.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ehmm, ok then, what do they do then?\u003C/p\u003E\u003Cp\u003EJust trying to get my head around what I need to change in the code to start when I start adding all my own inputs and leds, etc.\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-12T10:24:35Z","Content":"\n\u003Cp\u003EDear panter,\u003C/p\u003E\u003Cp\u003Ehave a look at void controls() and void MainControls(byte n, boolean s). controls() reads pin input and calls MainControls to write the input value to the nth bit of the controls byte. So the defines you list,\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#define SAS 7\u003C/pre\u003E\u003Cp\u003E for example, don\u0027t apply to pins but to which bit in the control byte stores which binary information about a system (SAS in that case) to be turned on or off.\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-12T13:37:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf the code is short/simple, you can just post it and I can add it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs I have to write a mechjeb interface, it\u0027ll neither be short nor simple. I forked a copy of KSP to my git at \u003Ca href=\u0022https://github.com/cm2227/KSPSerialIO/blob/master/KSPSerialIO/KSPIO.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/cm2227/KSPSerialIO/blob/master/KSPSerialIO/KSPIO.cs\u003C/a\u003E. I will tell you about what I do and you can decide what to add to your code. I\u0027ll write you my mail adress by private message.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-12T19:47:20Z","Content":"\n\u003Cp\u003EOK, from your PM is seem that your requirements are fairly specific to your hardware. In that case I will just direct people who want additional mechjeb functionality to you. You can be in charge of your own plugin fork, and feel free to use the code however you want. I\u0027ll put a link in the first post to your thread. I might steal some code from you if you add other output/input from the vanilla game! Also thanks for explaining it to panter.\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-12T21:08:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EYou can be in charge of your own plugin fork, and feel free to use the code however you want.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESounds fair and okay to me, thank you for your work. I might continue asking stupid questions when I don\u0027t understand how your code works. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-05-14T16:25:51Z","Content":"\n\u003Cp\u003EI am starting to dabble a bit myself, as I was able to scrounge up a few parts. My plan is to use an Arduino mainly for controlling LEDs and a thruster. An old keyboard chip will control buttons, which I have experience with already. Looking through the vessel parameters, it seems to me that you are unable to read the current status of the main controls, only set them. Is that so?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-14T17:13:56Z","Content":"\n\u003Cp\u003EThat\u0027s correct. Depends on what you mean by \u0022main controls\u0022. If you are talking about things like throttle, pitch, roll etc., it would be possible to output them. If you are talking about RCS, SAS, etc., I don\u0027t know how to get the status from the game.\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-05-14T19:10:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EThat\u0027s correct. Depends on what you mean by \u0022main controls\u0022. If you are talking about things like throttle, pitch, roll etc., it would be possible to output them. If you are talking about RCS, SAS, etc., I don\u0027t know how to get the status from the game.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the fast answer. I referred to the controls defined in your MainControls byte. The original plan was to control these by keystrokes on a keyboard. However, while writing I realize that if I use a pin for a LED, I could just as well use it for a switch and activate a LED with the switch as well.\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-15T12:58:33Z","Content":"\n\u003Cp\u003EZitronen we\u0027ve had a problem. I start the simulation, KSPSerialIO states it opened the com port, and the green LED indication connection is on. I can read true numbers on my displays (like AP and PE), and then the connection LED goes off but still the RX blinks. It never stops blinking, but the numbers remain static until at a random point in the next minutes the green light goes back on and the numbers are updated, but only once. It seems the connection is somehow erratic. From your experience, do you know possible causes for this behaviour? Thanks alot for your help!\u003C/p\u003E\u003Cp\u003EStrange behaviour just observed: The arduino did four resets between Space Center an the loaded scene, and then KSPSerialIO said there was no display found. Very strange.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-15T14:17:44Z\u0022 title=\u002205/15/2014 02:17  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 15, 2014\u003C/time\u003E by cm2227\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-15T16:21:35Z","Content":"\n\u003Cp\u003EIf your arduino is crashing randomly and resetting itself that usually means you have a serious bug in your arduino code... I think it may be related to your other problems.\u003C/p\u003E\u003Cp\u003ECan you confirm that the demo code in the first post is working or not?\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-16T10:09:29Z","Content":"\n\u003Cp\u003EI think I have to look into how your code determines the COM port it is using. I set up my arduino on a USB TTL converter adressed COM6 and changed the default com port in config.xml to COM6. Now when I start the game scene KSPSerialIO claims to have established a connection on COM3 (which is not listed in device manager) and prints [Log]: KSPSerialIO: Handshake received - 123, but the arduino (of course) does nothing.\u003C/p\u003E\u003Cp\u003EOkay, just take this as some sort of bug report.\u003C/p\u003E\u003Cp\u003EI now tried another configuration. Regarding what I posted yesterday about the reboots I suspected a power supply issue and added external DC 7.5 Volts. Now the arduino still reboots several times during the loading screen, but IT WORKS INGAME as desired, with my modified code for LCDs. Now I have to raise baud rate and update interval, which I lowered when I suspected a bad connection issue. Zitronen, you are still very helpful and responsive considering you are doing it for fun and free. Thanks alot, man!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-16T10:19:25Z\u0022 title=\u002205/16/2014 10:19  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 16, 2014\u003C/time\u003E by cm2227\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-16T11:33:22Z","Content":"\n\u003Cp\u003EZitronen I have two simple followup-questions. \u003C/p\u003E\u003Cp\u003E1) How many bytes does the VesselData packet usually have? I\u0027m trying to find out the minimal baud rate I need, as higher baud rates and update rates seem to be unstable on my arduino code, probably because I have several modules for display on LCDs and LEDs which result in a significantly lower loop rate than in your example, I guess.\u003C/p\u003E\u003Cp\u003E2) At which point is the config file read by your plugin? I don\u0027t think it is possible to change for example the baud rate without restarting KSP. And you might consider an option in your plugin to not scan for the correct com port but use the default provided in the config file and just retry that connection every other second until it works. Problem is somehow your plugin considers the internal modem of my laptop a serial display and continues to use the wrong COM port until I restart KSP.\u003C/p\u003E\u003Cp\u003EForget Question 1), it\u0027s 165 bytes. It seems that 9600 Baud and 0.5 seconds is working fine, 9600 Baud and 0.2 seconds interval is too much. Damn. Math says 165 bytes times 5 would still be well below 9600 baud, but at those settings KSPSerialIO tries to connect at the wrong COM port (3 instead of 2) which I consider a handshake issue.\u003C/p\u003E\u003Cp\u003EBut don\u0027t forget: I achieved a huge milstone today, which I owe to you and your work.\u003C/p\u003E\u003Cp\u003EActually a third question came up. VData.MissionTime seems to contain unreadable Data, as my LCD turns the raw value into a single chinese character. Any suggestions on troubleshooting?\u003C/p\u003E\u003Cp\u003EBy the way, I managed to make one arduino handle all data and handshake and simply write all data received to Serial1 for the second arduino. So having multiple serial connections on your plugin is no more an issue for me.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-16T15:28:51Z\u0022 title=\u002205/16/2014 03:28  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 16, 2014\u003C/time\u003E by cm2227\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-16T16:21:03Z","Content":"\n\u003Cp\u003EOk that is weird, if it says KSPSerialIO: Handshake received - 123, that means the plugins had sent the packet to the arduino, and the arduino has replied correctly. So the arduino must be connected to that port! Can you post the debug log?\u003C/p\u003E\u003Cp\u003EYou need to add 4 bytes to 165 for overhead. 9600 Baud is 9600 bits/s maximum, which is only 1200 Bytes/s, that\u0027s pretty close to the 850 bytes you are sending. Remember Baud rate is not a guarantee, it\u0027s the maximum possible.\u003C/p\u003E\u003Cp\u003EConfig files are read at the main menu screen, you can try switching back from launch to menu. \u003C/p\u003E\u003Cp\u003EMission time is a unsigned 32 bit integer with a unit of seconds, are you printing it as a number?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-16T16:28:58Z\u0022 title=\u002205/16/2014 04:28  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 16, 2014\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-16T16:27:57Z","Content":"\n\u003Cp\u003EHold on a second. The correct response should be KSPSerialIO: Handshake received - 314, not 123. It seems like whatever is on your \u0022COM3\u0022 is just returning the packet send from the plug-in straight back to the plug-in! Are you sure you don\u0027t have some kind of hidden loop-back device on your computer?\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-16T20:54:37Z","Content":"\n\u003Cp\u003EAfaik COM3 is an internal modem on the laptop I use for the dev work. My gaming pc should have no devices except for the hardware COM1 and the arduino. The point is: I would prefer if KSPSerialIO would try no other COM port than the one listed in config.xml. But I should be able to change that myself in the config file or even add an option wether your code should scan the COM ports or use nothing but the default.\u003C/p\u003E\u003Cp\u003EOkay, the Mission time issue is something different. I forgot to specify the base of the unsigned long integer. Now it works. Somehow. Not really. I\u0027ll look into it, but it doesn\u0027t seem to be your fault in any way.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-16T21:34:55Z\u0022 title=\u002205/16/2014 09:34  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 16, 2014\u003C/time\u003E by cm2227\u003C/strong\u003E\n\u003C/span\u003E\n"}]}